function c9(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Cv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var FH={exports:{}},mS={},NH={exports:{}},Ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cm=Symbol.for("react.element"),d9=Symbol.for("react.portal"),h9=Symbol.for("react.fragment"),p9=Symbol.for("react.strict_mode"),f9=Symbol.for("react.profiler"),g9=Symbol.for("react.provider"),m9=Symbol.for("react.context"),v9=Symbol.for("react.forward_ref"),y9=Symbol.for("react.suspense"),C9=Symbol.for("react.memo"),w9=Symbol.for("react.lazy"),LM=Symbol.iterator;function S9(t){return t===null||typeof t!="object"?null:(t=LM&&t[LM]||t["@@iterator"],typeof t=="function"?t:null)}var LH={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kH=Object.assign,GH={};function uh(t,e,n){this.props=t,this.context=e,this.refs=GH,this.updater=n||LH}uh.prototype.isReactComponent={};uh.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};uh.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function VH(){}VH.prototype=uh.prototype;function mx(t,e,n){this.props=t,this.context=e,this.refs=GH,this.updater=n||LH}var vx=mx.prototype=new VH;vx.constructor=mx;kH(vx,uh.prototype);vx.isPureReactComponent=!0;var kM=Array.isArray,HH=Object.prototype.hasOwnProperty,yx={current:null},BH={key:!0,ref:!0,__self:!0,__source:!0};function $H(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)HH.call(e,r)&&!BH.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:cm,type:t,key:s,ref:o,props:i,_owner:yx.current}}function E9(t,e){return{$$typeof:cm,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Cx(t){return typeof t=="object"&&t!==null&&t.$$typeof===cm}function b9(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var GM=/\/+/g;function Kb(t,e){return typeof t=="object"&&t!==null&&t.key!=null?b9(""+t.key):e.toString(36)}function dy(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case cm:case d9:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Kb(o,0):r,kM(i)?(n="",t!=null&&(n=t.replace(GM,"$&/")+"/"),dy(i,e,n,"",function(u){return u})):i!=null&&(Cx(i)&&(i=E9(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(GM,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",kM(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Kb(s,a);o+=dy(s,e,n,l,i)}else if(l=S9(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Kb(s,a++),o+=dy(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function wv(t,e,n){if(t==null)return t;var r=[],i=0;return dy(t,r,"","",function(s){return e.call(n,s,i++)}),r}function T9(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ar={current:null},hy={transition:null},R9={ReactCurrentDispatcher:Ar,ReactCurrentBatchConfig:hy,ReactCurrentOwner:yx};function WH(){throw Error("act(...) is not supported in production builds of React.")}Ke.Children={map:wv,forEach:function(t,e,n){wv(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return wv(t,function(){e++}),e},toArray:function(t){return wv(t,function(e){return e})||[]},only:function(t){if(!Cx(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ke.Component=uh;Ke.Fragment=h9;Ke.Profiler=f9;Ke.PureComponent=mx;Ke.StrictMode=p9;Ke.Suspense=y9;Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R9;Ke.act=WH;Ke.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=kH({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=yx.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)HH.call(e,l)&&!BH.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:cm,type:t.type,key:i,ref:s,props:r,_owner:o}};Ke.createContext=function(t){return t={$$typeof:m9,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:g9,_context:t},t.Consumer=t};Ke.createElement=$H;Ke.createFactory=function(t){var e=$H.bind(null,t);return e.type=t,e};Ke.createRef=function(){return{current:null}};Ke.forwardRef=function(t){return{$$typeof:v9,render:t}};Ke.isValidElement=Cx;Ke.lazy=function(t){return{$$typeof:w9,_payload:{_status:-1,_result:t},_init:T9}};Ke.memo=function(t,e){return{$$typeof:C9,type:t,compare:e===void 0?null:e}};Ke.startTransition=function(t){var e=hy.transition;hy.transition={};try{t()}finally{hy.transition=e}};Ke.unstable_act=WH;Ke.useCallback=function(t,e){return Ar.current.useCallback(t,e)};Ke.useContext=function(t){return Ar.current.useContext(t)};Ke.useDebugValue=function(){};Ke.useDeferredValue=function(t){return Ar.current.useDeferredValue(t)};Ke.useEffect=function(t,e){return Ar.current.useEffect(t,e)};Ke.useId=function(){return Ar.current.useId()};Ke.useImperativeHandle=function(t,e,n){return Ar.current.useImperativeHandle(t,e,n)};Ke.useInsertionEffect=function(t,e){return Ar.current.useInsertionEffect(t,e)};Ke.useLayoutEffect=function(t,e){return Ar.current.useLayoutEffect(t,e)};Ke.useMemo=function(t,e){return Ar.current.useMemo(t,e)};Ke.useReducer=function(t,e,n){return Ar.current.useReducer(t,e,n)};Ke.useRef=function(t){return Ar.current.useRef(t)};Ke.useState=function(t){return Ar.current.useState(t)};Ke.useSyncExternalStore=function(t,e,n){return Ar.current.useSyncExternalStore(t,e,n)};Ke.useTransition=function(){return Ar.current.useTransition()};Ke.version="18.3.1";NH.exports=Ke;var I=NH.exports;const G=gt(I),_9=c9({__proto__:null,default:G},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A9=I,x9=Symbol.for("react.element"),P9=Symbol.for("react.fragment"),I9=Object.prototype.hasOwnProperty,D9=A9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,O9={key:!0,ref:!0,__self:!0,__source:!0};function jH(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)I9.call(e,r)&&!O9.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:x9,type:t,key:s,ref:o,props:i,_owner:D9.current}}mS.Fragment=P9;mS.jsx=jH;mS.jsxs=jH;FH.exports=mS;var M=FH.exports,L0={},UH={exports:{}},bi={},zH={exports:{}},KH={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,U){var K=B.length;B.push(U);e:for(;0<K;){var ie=K-1>>>1,Q=B[ie];if(0<i(Q,U))B[ie]=U,B[K]=Q,K=ie;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var U=B[0],K=B.pop();if(K!==U){B[0]=K;e:for(var ie=0,Q=B.length,se=Q>>>1;ie<se;){var Me=2*(ie+1)-1,Ee=B[Me],qe=Me+1,Ye=B[qe];if(0>i(Ee,K))qe<Q&&0>i(Ye,Ee)?(B[ie]=Ye,B[qe]=K,ie=qe):(B[ie]=Ee,B[Me]=K,ie=Me);else if(qe<Q&&0>i(Ye,K))B[ie]=Ye,B[qe]=K,ie=qe;else break e}}return U}function i(B,U){var K=B.sortIndex-U.sortIndex;return K!==0?K:B.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,h=3,f=!1,g=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(B){for(var U=n(u);U!==null;){if(U.callback===null)r(u);else if(U.startTime<=B)r(u),U.sortIndex=U.expirationTime,e(l,U);else break;U=n(u)}}function _(B){if(m=!1,S(B),!g)if(n(l)!==null)g=!0,z(E);else{var U=n(u);U!==null&&q(_,U.startTime-B)}}function E(B,U){g=!1,m&&(m=!1,C(A),A=-1),f=!0;var K=h;try{for(S(U),d=n(l);d!==null&&(!(d.expirationTime>U)||B&&!k());){var ie=d.callback;if(typeof ie=="function"){d.callback=null,h=d.priorityLevel;var Q=ie(d.expirationTime<=U);U=t.unstable_now(),typeof Q=="function"?d.callback=Q:d===n(l)&&r(l),S(U)}else r(l);d=n(l)}if(d!==null)var se=!0;else{var Me=n(u);Me!==null&&q(_,Me.startTime-U),se=!1}return se}finally{d=null,h=K,f=!1}}var R=!1,b=null,A=-1,P=5,F=-1;function k(){return!(t.unstable_now()-F<P)}function L(){if(b!==null){var B=t.unstable_now();F=B;var U=!0;try{U=b(!0,B)}finally{U?N():(R=!1,b=null)}}else R=!1}var N;if(typeof y=="function")N=function(){y(L)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,j=W.port2;W.port1.onmessage=L,N=function(){j.postMessage(null)}}else N=function(){v(L,0)};function z(B){b=B,R||(R=!0,N())}function q(B,U){A=v(function(){B(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){g||f||(g=!0,z(E))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(h){case 1:case 2:case 3:var U=3;break;default:U=h}var K=h;h=U;try{return B()}finally{h=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,U){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var K=h;h=B;try{return U()}finally{h=K}},t.unstable_scheduleCallback=function(B,U,K){var ie=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?ie+K:ie):K=ie,B){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=K+Q,B={id:c++,callback:U,priorityLevel:B,startTime:K,expirationTime:Q,sortIndex:-1},K>ie?(B.sortIndex=K,e(u,B),n(l)===null&&B===n(u)&&(m?(C(A),A=-1):m=!0,q(_,K-ie))):(B.sortIndex=Q,e(l,B),g||f||(g=!0,z(E))),B},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(B){var U=h;return function(){var K=h;h=U;try{return B.apply(this,arguments)}finally{h=K}}}})(KH);zH.exports=KH;var M9=zH.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F9=I,wi=M9;function oe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qH=new Set,Rf={};function Gu(t,e){od(t,e),od(t+"Capture",e)}function od(t,e){for(Rf[t]=e,t=0;t<e.length;t++)qH.add(e[t])}var bo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),k0=Object.prototype.hasOwnProperty,N9=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,VM={},HM={};function L9(t){return k0.call(HM,t)?!0:k0.call(VM,t)?!1:N9.test(t)?HM[t]=!0:(VM[t]=!0,!1)}function k9(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function G9(t,e,n,r){if(e===null||typeof e>"u"||k9(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function xr(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var zn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){zn[t]=new xr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];zn[e]=new xr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){zn[t]=new xr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){zn[t]=new xr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){zn[t]=new xr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){zn[t]=new xr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){zn[t]=new xr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){zn[t]=new xr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){zn[t]=new xr(t,5,!1,t.toLowerCase(),null,!1,!1)});var wx=/[\-:]([a-z])/g;function Sx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(wx,Sx);zn[e]=new xr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(wx,Sx);zn[e]=new xr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(wx,Sx);zn[e]=new xr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){zn[t]=new xr(t,1,!1,t.toLowerCase(),null,!1,!1)});zn.xlinkHref=new xr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){zn[t]=new xr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ex(t,e,n,r){var i=zn.hasOwnProperty(e)?zn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(G9(e,n,i,r)&&(n=null),r||i===null?L9(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ko=F9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sv=Symbol.for("react.element"),Sc=Symbol.for("react.portal"),Ec=Symbol.for("react.fragment"),bx=Symbol.for("react.strict_mode"),G0=Symbol.for("react.profiler"),YH=Symbol.for("react.provider"),QH=Symbol.for("react.context"),Tx=Symbol.for("react.forward_ref"),V0=Symbol.for("react.suspense"),H0=Symbol.for("react.suspense_list"),Rx=Symbol.for("react.memo"),sa=Symbol.for("react.lazy"),XH=Symbol.for("react.offscreen"),BM=Symbol.iterator;function pp(t){return t===null||typeof t!="object"?null:(t=BM&&t[BM]||t["@@iterator"],typeof t=="function"?t:null)}var Yt=Object.assign,qb;function Mp(t){if(qb===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);qb=e&&e[1]||""}return`
`+qb+t}var Yb=!1;function Qb(t,e){if(!t||Yb)return"";Yb=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Yb=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Mp(t):""}function V9(t){switch(t.tag){case 5:return Mp(t.type);case 16:return Mp("Lazy");case 13:return Mp("Suspense");case 19:return Mp("SuspenseList");case 0:case 2:case 15:return t=Qb(t.type,!1),t;case 11:return t=Qb(t.type.render,!1),t;case 1:return t=Qb(t.type,!0),t;default:return""}}function B0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ec:return"Fragment";case Sc:return"Portal";case G0:return"Profiler";case bx:return"StrictMode";case V0:return"Suspense";case H0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case QH:return(t.displayName||"Context")+".Consumer";case YH:return(t._context.displayName||"Context")+".Provider";case Tx:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Rx:return e=t.displayName||null,e!==null?e:B0(t.type)||"Memo";case sa:e=t._payload,t=t._init;try{return B0(t(e))}catch{}}return null}function H9(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B0(e);case 8:return e===bx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ha(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function JH(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function B9(t){var e=JH(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ev(t){t._valueTracker||(t._valueTracker=B9(t))}function ZH(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=JH(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Xy(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function $0(t,e){var n=e.checked;return Yt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function $M(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ha(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function eB(t,e){e=e.checked,e!=null&&Ex(t,"checked",e,!1)}function W0(t,e){eB(t,e);var n=Ha(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?j0(t,e.type,n):e.hasOwnProperty("defaultValue")&&j0(t,e.type,Ha(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function WM(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function j0(t,e,n){(e!=="number"||Xy(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fp=Array.isArray;function $c(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ha(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function U0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(oe(91));return Yt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function jM(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(oe(92));if(Fp(n)){if(1<n.length)throw Error(oe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ha(n)}}function tB(t,e){var n=Ha(e.value),r=Ha(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function UM(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function nB(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function z0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?nB(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var bv,rB=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(bv=bv||document.createElement("div"),bv.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=bv.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function _f(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ef={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$9=["Webkit","ms","Moz","O"];Object.keys(ef).forEach(function(t){$9.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ef[e]=ef[t]})});function iB(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ef.hasOwnProperty(t)&&ef[t]?(""+e).trim():e+"px"}function sB(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=iB(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var W9=Yt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function K0(t,e){if(e){if(W9[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(oe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(oe(62))}}function q0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Y0=null;function _x(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Q0=null,Wc=null,jc=null;function zM(t){if(t=pm(t)){if(typeof Q0!="function")throw Error(oe(280));var e=t.stateNode;e&&(e=SS(e),Q0(t.stateNode,t.type,e))}}function oB(t){Wc?jc?jc.push(t):jc=[t]:Wc=t}function aB(){if(Wc){var t=Wc,e=jc;if(jc=Wc=null,zM(t),e)for(t=0;t<e.length;t++)zM(e[t])}}function lB(t,e){return t(e)}function uB(){}var Xb=!1;function cB(t,e,n){if(Xb)return t(e,n);Xb=!0;try{return lB(t,e,n)}finally{Xb=!1,(Wc!==null||jc!==null)&&(uB(),aB())}}function Af(t,e){var n=t.stateNode;if(n===null)return null;var r=SS(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(oe(231,e,typeof n));return n}var X0=!1;if(bo)try{var fp={};Object.defineProperty(fp,"passive",{get:function(){X0=!0}}),window.addEventListener("test",fp,fp),window.removeEventListener("test",fp,fp)}catch{X0=!1}function j9(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var tf=!1,Jy=null,Zy=!1,J0=null,U9={onError:function(t){tf=!0,Jy=t}};function z9(t,e,n,r,i,s,o,a,l){tf=!1,Jy=null,j9.apply(U9,arguments)}function K9(t,e,n,r,i,s,o,a,l){if(z9.apply(this,arguments),tf){if(tf){var u=Jy;tf=!1,Jy=null}else throw Error(oe(198));Zy||(Zy=!0,J0=u)}}function Vu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function dB(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function KM(t){if(Vu(t)!==t)throw Error(oe(188))}function q9(t){var e=t.alternate;if(!e){if(e=Vu(t),e===null)throw Error(oe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return KM(i),t;if(s===r)return KM(i),e;s=s.sibling}throw Error(oe(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(oe(189))}}if(n.alternate!==r)throw Error(oe(190))}if(n.tag!==3)throw Error(oe(188));return n.stateNode.current===n?t:e}function hB(t){return t=q9(t),t!==null?pB(t):null}function pB(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=pB(t);if(e!==null)return e;t=t.sibling}return null}var fB=wi.unstable_scheduleCallback,qM=wi.unstable_cancelCallback,Y9=wi.unstable_shouldYield,Q9=wi.unstable_requestPaint,rn=wi.unstable_now,X9=wi.unstable_getCurrentPriorityLevel,Ax=wi.unstable_ImmediatePriority,gB=wi.unstable_UserBlockingPriority,eC=wi.unstable_NormalPriority,J9=wi.unstable_LowPriority,mB=wi.unstable_IdlePriority,vS=null,Fs=null;function Z9(t){if(Fs&&typeof Fs.onCommitFiberRoot=="function")try{Fs.onCommitFiberRoot(vS,t,void 0,(t.current.flags&128)===128)}catch{}}var ds=Math.clz32?Math.clz32:nq,eq=Math.log,tq=Math.LN2;function nq(t){return t>>>=0,t===0?32:31-(eq(t)/tq|0)|0}var Tv=64,Rv=4194304;function Np(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function tC(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Np(a):(s&=o,s!==0&&(r=Np(s)))}else o=n&~i,o!==0?r=Np(o):s!==0&&(r=Np(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ds(e),i=1<<n,r|=t[n],e&=~i;return r}function rq(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iq(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-ds(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=rq(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Z0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function vB(){var t=Tv;return Tv<<=1,!(Tv&4194240)&&(Tv=64),t}function Jb(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function dm(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ds(e),t[e]=n}function sq(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ds(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function xx(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ds(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var mt=0;function yB(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var CB,Px,wB,SB,EB,eR=!1,_v=[],Ta=null,Ra=null,_a=null,xf=new Map,Pf=new Map,la=[],oq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function YM(t,e){switch(t){case"focusin":case"focusout":Ta=null;break;case"dragenter":case"dragleave":Ra=null;break;case"mouseover":case"mouseout":_a=null;break;case"pointerover":case"pointerout":xf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pf.delete(e.pointerId)}}function gp(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=pm(e),e!==null&&Px(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function aq(t,e,n,r,i){switch(e){case"focusin":return Ta=gp(Ta,t,e,n,r,i),!0;case"dragenter":return Ra=gp(Ra,t,e,n,r,i),!0;case"mouseover":return _a=gp(_a,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return xf.set(s,gp(xf.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Pf.set(s,gp(Pf.get(s)||null,t,e,n,r,i)),!0}return!1}function bB(t){var e=Gl(t.target);if(e!==null){var n=Vu(e);if(n!==null){if(e=n.tag,e===13){if(e=dB(n),e!==null){t.blockedOn=e,EB(t.priority,function(){wB(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function py(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=tR(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Y0=r,n.target.dispatchEvent(r),Y0=null}else return e=pm(n),e!==null&&Px(e),t.blockedOn=n,!1;e.shift()}return!0}function QM(t,e,n){py(t)&&n.delete(e)}function lq(){eR=!1,Ta!==null&&py(Ta)&&(Ta=null),Ra!==null&&py(Ra)&&(Ra=null),_a!==null&&py(_a)&&(_a=null),xf.forEach(QM),Pf.forEach(QM)}function mp(t,e){t.blockedOn===e&&(t.blockedOn=null,eR||(eR=!0,wi.unstable_scheduleCallback(wi.unstable_NormalPriority,lq)))}function If(t){function e(i){return mp(i,t)}if(0<_v.length){mp(_v[0],t);for(var n=1;n<_v.length;n++){var r=_v[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ta!==null&&mp(Ta,t),Ra!==null&&mp(Ra,t),_a!==null&&mp(_a,t),xf.forEach(e),Pf.forEach(e),n=0;n<la.length;n++)r=la[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<la.length&&(n=la[0],n.blockedOn===null);)bB(n),n.blockedOn===null&&la.shift()}var Uc=ko.ReactCurrentBatchConfig,nC=!0;function uq(t,e,n,r){var i=mt,s=Uc.transition;Uc.transition=null;try{mt=1,Ix(t,e,n,r)}finally{mt=i,Uc.transition=s}}function cq(t,e,n,r){var i=mt,s=Uc.transition;Uc.transition=null;try{mt=4,Ix(t,e,n,r)}finally{mt=i,Uc.transition=s}}function Ix(t,e,n,r){if(nC){var i=tR(t,e,n,r);if(i===null)lT(t,e,r,rC,n),YM(t,r);else if(aq(i,t,e,n,r))r.stopPropagation();else if(YM(t,r),e&4&&-1<oq.indexOf(t)){for(;i!==null;){var s=pm(i);if(s!==null&&CB(s),s=tR(t,e,n,r),s===null&&lT(t,e,r,rC,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else lT(t,e,r,null,n)}}var rC=null;function tR(t,e,n,r){if(rC=null,t=_x(r),t=Gl(t),t!==null)if(e=Vu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=dB(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return rC=t,null}function TB(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(X9()){case Ax:return 1;case gB:return 4;case eC:case J9:return 16;case mB:return 536870912;default:return 16}default:return 16}}var ma=null,Dx=null,fy=null;function RB(){if(fy)return fy;var t,e=Dx,n=e.length,r,i="value"in ma?ma.value:ma.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return fy=i.slice(t,1<r?1-r:void 0)}function gy(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Av(){return!0}function XM(){return!1}function Ti(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Av:XM,this.isPropagationStopped=XM,this}return Yt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Av)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Av)},persist:function(){},isPersistent:Av}),e}var ch={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ox=Ti(ch),hm=Yt({},ch,{view:0,detail:0}),dq=Ti(hm),Zb,eT,vp,yS=Yt({},hm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mx,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==vp&&(vp&&t.type==="mousemove"?(Zb=t.screenX-vp.screenX,eT=t.screenY-vp.screenY):eT=Zb=0,vp=t),Zb)},movementY:function(t){return"movementY"in t?t.movementY:eT}}),JM=Ti(yS),hq=Yt({},yS,{dataTransfer:0}),pq=Ti(hq),fq=Yt({},hm,{relatedTarget:0}),tT=Ti(fq),gq=Yt({},ch,{animationName:0,elapsedTime:0,pseudoElement:0}),mq=Ti(gq),vq=Yt({},ch,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),yq=Ti(vq),Cq=Yt({},ch,{data:0}),ZM=Ti(Cq),wq={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sq={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Eq={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bq(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Eq[t])?!!e[t]:!1}function Mx(){return bq}var Tq=Yt({},hm,{key:function(t){if(t.key){var e=wq[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=gy(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Sq[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mx,charCode:function(t){return t.type==="keypress"?gy(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?gy(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Rq=Ti(Tq),_q=Yt({},yS,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eF=Ti(_q),Aq=Yt({},hm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mx}),xq=Ti(Aq),Pq=Yt({},ch,{propertyName:0,elapsedTime:0,pseudoElement:0}),Iq=Ti(Pq),Dq=Yt({},yS,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Oq=Ti(Dq),Mq=[9,13,27,32],Fx=bo&&"CompositionEvent"in window,nf=null;bo&&"documentMode"in document&&(nf=document.documentMode);var Fq=bo&&"TextEvent"in window&&!nf,_B=bo&&(!Fx||nf&&8<nf&&11>=nf),tF=" ",nF=!1;function AB(t,e){switch(t){case"keyup":return Mq.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xB(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var bc=!1;function Nq(t,e){switch(t){case"compositionend":return xB(e);case"keypress":return e.which!==32?null:(nF=!0,tF);case"textInput":return t=e.data,t===tF&&nF?null:t;default:return null}}function Lq(t,e){if(bc)return t==="compositionend"||!Fx&&AB(t,e)?(t=RB(),fy=Dx=ma=null,bc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _B&&e.locale!=="ko"?null:e.data;default:return null}}var kq={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rF(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!kq[t.type]:e==="textarea"}function PB(t,e,n,r){oB(r),e=iC(e,"onChange"),0<e.length&&(n=new Ox("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var rf=null,Df=null;function Gq(t){HB(t,0)}function CS(t){var e=_c(t);if(ZH(e))return t}function Vq(t,e){if(t==="change")return e}var IB=!1;if(bo){var nT;if(bo){var rT="oninput"in document;if(!rT){var iF=document.createElement("div");iF.setAttribute("oninput","return;"),rT=typeof iF.oninput=="function"}nT=rT}else nT=!1;IB=nT&&(!document.documentMode||9<document.documentMode)}function sF(){rf&&(rf.detachEvent("onpropertychange",DB),Df=rf=null)}function DB(t){if(t.propertyName==="value"&&CS(Df)){var e=[];PB(e,Df,t,_x(t)),cB(Gq,e)}}function Hq(t,e,n){t==="focusin"?(sF(),rf=e,Df=n,rf.attachEvent("onpropertychange",DB)):t==="focusout"&&sF()}function Bq(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return CS(Df)}function $q(t,e){if(t==="click")return CS(e)}function Wq(t,e){if(t==="input"||t==="change")return CS(e)}function jq(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gs=typeof Object.is=="function"?Object.is:jq;function Of(t,e){if(gs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!k0.call(e,i)||!gs(t[i],e[i]))return!1}return!0}function oF(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function aF(t,e){var n=oF(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=oF(n)}}function OB(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?OB(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function MB(){for(var t=window,e=Xy();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Xy(t.document)}return e}function Nx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Uq(t){var e=MB(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&OB(n.ownerDocument.documentElement,n)){if(r!==null&&Nx(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=aF(n,s);var o=aF(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var zq=bo&&"documentMode"in document&&11>=document.documentMode,Tc=null,nR=null,sf=null,rR=!1;function lF(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;rR||Tc==null||Tc!==Xy(r)||(r=Tc,"selectionStart"in r&&Nx(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),sf&&Of(sf,r)||(sf=r,r=iC(nR,"onSelect"),0<r.length&&(e=new Ox("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Tc)))}function xv(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Rc={animationend:xv("Animation","AnimationEnd"),animationiteration:xv("Animation","AnimationIteration"),animationstart:xv("Animation","AnimationStart"),transitionend:xv("Transition","TransitionEnd")},iT={},FB={};bo&&(FB=document.createElement("div").style,"AnimationEvent"in window||(delete Rc.animationend.animation,delete Rc.animationiteration.animation,delete Rc.animationstart.animation),"TransitionEvent"in window||delete Rc.transitionend.transition);function wS(t){if(iT[t])return iT[t];if(!Rc[t])return t;var e=Rc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in FB)return iT[t]=e[n];return t}var NB=wS("animationend"),LB=wS("animationiteration"),kB=wS("animationstart"),GB=wS("transitionend"),VB=new Map,uF="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xa(t,e){VB.set(t,e),Gu(e,[t])}for(var sT=0;sT<uF.length;sT++){var oT=uF[sT],Kq=oT.toLowerCase(),qq=oT[0].toUpperCase()+oT.slice(1);Xa(Kq,"on"+qq)}Xa(NB,"onAnimationEnd");Xa(LB,"onAnimationIteration");Xa(kB,"onAnimationStart");Xa("dblclick","onDoubleClick");Xa("focusin","onFocus");Xa("focusout","onBlur");Xa(GB,"onTransitionEnd");od("onMouseEnter",["mouseout","mouseover"]);od("onMouseLeave",["mouseout","mouseover"]);od("onPointerEnter",["pointerout","pointerover"]);od("onPointerLeave",["pointerout","pointerover"]);Gu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Gu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Gu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Gu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Gu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Gu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yq=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lp));function cF(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,K9(r,e,void 0,t),t.currentTarget=null}function HB(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;cF(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;cF(i,a,u),s=l}}}if(Zy)throw t=J0,Zy=!1,J0=null,t}function Nt(t,e){var n=e[lR];n===void 0&&(n=e[lR]=new Set);var r=t+"__bubble";n.has(r)||(BB(e,t,2,!1),n.add(r))}function aT(t,e,n){var r=0;e&&(r|=4),BB(n,t,r,e)}var Pv="_reactListening"+Math.random().toString(36).slice(2);function Mf(t){if(!t[Pv]){t[Pv]=!0,qH.forEach(function(n){n!=="selectionchange"&&(Yq.has(n)||aT(n,!1,t),aT(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Pv]||(e[Pv]=!0,aT("selectionchange",!1,e))}}function BB(t,e,n,r){switch(TB(e)){case 1:var i=uq;break;case 4:i=cq;break;default:i=Ix}n=i.bind(null,e,n,t),i=void 0,!X0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function lT(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Gl(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}cB(function(){var u=s,c=_x(n),d=[];e:{var h=VB.get(t);if(h!==void 0){var f=Ox,g=t;switch(t){case"keypress":if(gy(n)===0)break e;case"keydown":case"keyup":f=Rq;break;case"focusin":g="focus",f=tT;break;case"focusout":g="blur",f=tT;break;case"beforeblur":case"afterblur":f=tT;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=JM;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=pq;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=xq;break;case NB:case LB:case kB:f=mq;break;case GB:f=Iq;break;case"scroll":f=dq;break;case"wheel":f=Oq;break;case"copy":case"cut":case"paste":f=yq;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=eF}var m=(e&4)!==0,v=!m&&t==="scroll",C=m?h!==null?h+"Capture":null:h;m=[];for(var y=u,S;y!==null;){S=y;var _=S.stateNode;if(S.tag===5&&_!==null&&(S=_,C!==null&&(_=Af(y,C),_!=null&&m.push(Ff(y,_,S)))),v)break;y=y.return}0<m.length&&(h=new f(h,g,null,n,c),d.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==Y0&&(g=n.relatedTarget||n.fromElement)&&(Gl(g)||g[To]))break e;if((f||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,f?(g=n.relatedTarget||n.toElement,f=u,g=g?Gl(g):null,g!==null&&(v=Vu(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=u),f!==g)){if(m=JM,_="onMouseLeave",C="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(m=eF,_="onPointerLeave",C="onPointerEnter",y="pointer"),v=f==null?h:_c(f),S=g==null?h:_c(g),h=new m(_,y+"leave",f,n,c),h.target=v,h.relatedTarget=S,_=null,Gl(c)===u&&(m=new m(C,y+"enter",g,n,c),m.target=S,m.relatedTarget=v,_=m),v=_,f&&g)t:{for(m=f,C=g,y=0,S=m;S;S=lc(S))y++;for(S=0,_=C;_;_=lc(_))S++;for(;0<y-S;)m=lc(m),y--;for(;0<S-y;)C=lc(C),S--;for(;y--;){if(m===C||C!==null&&m===C.alternate)break t;m=lc(m),C=lc(C)}m=null}else m=null;f!==null&&dF(d,h,f,m,!1),g!==null&&v!==null&&dF(d,v,g,m,!0)}}e:{if(h=u?_c(u):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var E=Vq;else if(rF(h))if(IB)E=Wq;else{E=Bq;var R=Hq}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(E=$q);if(E&&(E=E(t,u))){PB(d,E,n,c);break e}R&&R(t,h,u),t==="focusout"&&(R=h._wrapperState)&&R.controlled&&h.type==="number"&&j0(h,"number",h.value)}switch(R=u?_c(u):window,t){case"focusin":(rF(R)||R.contentEditable==="true")&&(Tc=R,nR=u,sf=null);break;case"focusout":sf=nR=Tc=null;break;case"mousedown":rR=!0;break;case"contextmenu":case"mouseup":case"dragend":rR=!1,lF(d,n,c);break;case"selectionchange":if(zq)break;case"keydown":case"keyup":lF(d,n,c)}var b;if(Fx)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else bc?AB(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(_B&&n.locale!=="ko"&&(bc||A!=="onCompositionStart"?A==="onCompositionEnd"&&bc&&(b=RB()):(ma=c,Dx="value"in ma?ma.value:ma.textContent,bc=!0)),R=iC(u,A),0<R.length&&(A=new ZM(A,t,null,n,c),d.push({event:A,listeners:R}),b?A.data=b:(b=xB(n),b!==null&&(A.data=b)))),(b=Fq?Nq(t,n):Lq(t,n))&&(u=iC(u,"onBeforeInput"),0<u.length&&(c=new ZM("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=b))}HB(d,e)})}function Ff(t,e,n){return{instance:t,listener:e,currentTarget:n}}function iC(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Af(t,n),s!=null&&r.unshift(Ff(t,s,i)),s=Af(t,e),s!=null&&r.push(Ff(t,s,i))),t=t.return}return r}function lc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function dF(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Af(n,s),l!=null&&o.unshift(Ff(n,l,a))):i||(l=Af(n,s),l!=null&&o.push(Ff(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Qq=/\r\n?/g,Xq=/\u0000|\uFFFD/g;function hF(t){return(typeof t=="string"?t:""+t).replace(Qq,`
`).replace(Xq,"")}function Iv(t,e,n){if(e=hF(e),hF(t)!==e&&n)throw Error(oe(425))}function sC(){}var iR=null,sR=null;function oR(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var aR=typeof setTimeout=="function"?setTimeout:void 0,Jq=typeof clearTimeout=="function"?clearTimeout:void 0,pF=typeof Promise=="function"?Promise:void 0,Zq=typeof queueMicrotask=="function"?queueMicrotask:typeof pF<"u"?function(t){return pF.resolve(null).then(t).catch(e8)}:aR;function e8(t){setTimeout(function(){throw t})}function uT(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),If(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);If(e)}function Aa(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function fF(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var dh=Math.random().toString(36).slice(2),Is="__reactFiber$"+dh,Nf="__reactProps$"+dh,To="__reactContainer$"+dh,lR="__reactEvents$"+dh,t8="__reactListeners$"+dh,n8="__reactHandles$"+dh;function Gl(t){var e=t[Is];if(e)return e;for(var n=t.parentNode;n;){if(e=n[To]||n[Is]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=fF(t);t!==null;){if(n=t[Is])return n;t=fF(t)}return e}t=n,n=t.parentNode}return null}function pm(t){return t=t[Is]||t[To],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function _c(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(oe(33))}function SS(t){return t[Nf]||null}var uR=[],Ac=-1;function Ja(t){return{current:t}}function Ht(t){0>Ac||(t.current=uR[Ac],uR[Ac]=null,Ac--)}function It(t,e){Ac++,uR[Ac]=t.current,t.current=e}var Ba={},ur=Ja(Ba),zr=Ja(!1),cu=Ba;function ad(t,e){var n=t.type.contextTypes;if(!n)return Ba;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Kr(t){return t=t.childContextTypes,t!=null}function oC(){Ht(zr),Ht(ur)}function gF(t,e,n){if(ur.current!==Ba)throw Error(oe(168));It(ur,e),It(zr,n)}function $B(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(oe(108,H9(t)||"Unknown",i));return Yt({},n,r)}function aC(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ba,cu=ur.current,It(ur,t),It(zr,zr.current),!0}function mF(t,e,n){var r=t.stateNode;if(!r)throw Error(oe(169));n?(t=$B(t,e,cu),r.__reactInternalMemoizedMergedChildContext=t,Ht(zr),Ht(ur),It(ur,t)):Ht(zr),It(zr,n)}var oo=null,ES=!1,cT=!1;function WB(t){oo===null?oo=[t]:oo.push(t)}function r8(t){ES=!0,WB(t)}function Za(){if(!cT&&oo!==null){cT=!0;var t=0,e=mt;try{var n=oo;for(mt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}oo=null,ES=!1}catch(i){throw oo!==null&&(oo=oo.slice(t+1)),fB(Ax,Za),i}finally{mt=e,cT=!1}}return null}var xc=[],Pc=0,lC=null,uC=0,Di=[],Oi=0,du=null,lo=1,uo="";function Tl(t,e){xc[Pc++]=uC,xc[Pc++]=lC,lC=t,uC=e}function jB(t,e,n){Di[Oi++]=lo,Di[Oi++]=uo,Di[Oi++]=du,du=t;var r=lo;t=uo;var i=32-ds(r)-1;r&=~(1<<i),n+=1;var s=32-ds(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,lo=1<<32-ds(e)+i|n<<i|r,uo=s+t}else lo=1<<s|n<<i|r,uo=t}function Lx(t){t.return!==null&&(Tl(t,1),jB(t,1,0))}function kx(t){for(;t===lC;)lC=xc[--Pc],xc[Pc]=null,uC=xc[--Pc],xc[Pc]=null;for(;t===du;)du=Di[--Oi],Di[Oi]=null,uo=Di[--Oi],Di[Oi]=null,lo=Di[--Oi],Di[Oi]=null}var gi=null,fi=null,jt=!1,os=null;function UB(t,e){var n=Ni(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function vF(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,gi=t,fi=Aa(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,gi=t,fi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=du!==null?{id:lo,overflow:uo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ni(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,gi=t,fi=null,!0):!1;default:return!1}}function cR(t){return(t.mode&1)!==0&&(t.flags&128)===0}function dR(t){if(jt){var e=fi;if(e){var n=e;if(!vF(t,e)){if(cR(t))throw Error(oe(418));e=Aa(n.nextSibling);var r=gi;e&&vF(t,e)?UB(r,n):(t.flags=t.flags&-4097|2,jt=!1,gi=t)}}else{if(cR(t))throw Error(oe(418));t.flags=t.flags&-4097|2,jt=!1,gi=t}}}function yF(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;gi=t}function Dv(t){if(t!==gi)return!1;if(!jt)return yF(t),jt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!oR(t.type,t.memoizedProps)),e&&(e=fi)){if(cR(t))throw zB(),Error(oe(418));for(;e;)UB(t,e),e=Aa(e.nextSibling)}if(yF(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(oe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){fi=Aa(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}fi=null}}else fi=gi?Aa(t.stateNode.nextSibling):null;return!0}function zB(){for(var t=fi;t;)t=Aa(t.nextSibling)}function ld(){fi=gi=null,jt=!1}function Gx(t){os===null?os=[t]:os.push(t)}var i8=ko.ReactCurrentBatchConfig;function yp(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(oe(309));var r=n.stateNode}if(!r)throw Error(oe(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(oe(284));if(!n._owner)throw Error(oe(290,t))}return t}function Ov(t,e){throw t=Object.prototype.toString.call(e),Error(oe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function CF(t){var e=t._init;return e(t._payload)}function KB(t){function e(C,y){if(t){var S=C.deletions;S===null?(C.deletions=[y],C.flags|=16):S.push(y)}}function n(C,y){if(!t)return null;for(;y!==null;)e(C,y),y=y.sibling;return null}function r(C,y){for(C=new Map;y!==null;)y.key!==null?C.set(y.key,y):C.set(y.index,y),y=y.sibling;return C}function i(C,y){return C=Da(C,y),C.index=0,C.sibling=null,C}function s(C,y,S){return C.index=S,t?(S=C.alternate,S!==null?(S=S.index,S<y?(C.flags|=2,y):S):(C.flags|=2,y)):(C.flags|=1048576,y)}function o(C){return t&&C.alternate===null&&(C.flags|=2),C}function a(C,y,S,_){return y===null||y.tag!==6?(y=vT(S,C.mode,_),y.return=C,y):(y=i(y,S),y.return=C,y)}function l(C,y,S,_){var E=S.type;return E===Ec?c(C,y,S.props.children,_,S.key):y!==null&&(y.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===sa&&CF(E)===y.type)?(_=i(y,S.props),_.ref=yp(C,y,S),_.return=C,_):(_=Ey(S.type,S.key,S.props,null,C.mode,_),_.ref=yp(C,y,S),_.return=C,_)}function u(C,y,S,_){return y===null||y.tag!==4||y.stateNode.containerInfo!==S.containerInfo||y.stateNode.implementation!==S.implementation?(y=yT(S,C.mode,_),y.return=C,y):(y=i(y,S.children||[]),y.return=C,y)}function c(C,y,S,_,E){return y===null||y.tag!==7?(y=Xl(S,C.mode,_,E),y.return=C,y):(y=i(y,S),y.return=C,y)}function d(C,y,S){if(typeof y=="string"&&y!==""||typeof y=="number")return y=vT(""+y,C.mode,S),y.return=C,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Sv:return S=Ey(y.type,y.key,y.props,null,C.mode,S),S.ref=yp(C,null,y),S.return=C,S;case Sc:return y=yT(y,C.mode,S),y.return=C,y;case sa:var _=y._init;return d(C,_(y._payload),S)}if(Fp(y)||pp(y))return y=Xl(y,C.mode,S,null),y.return=C,y;Ov(C,y)}return null}function h(C,y,S,_){var E=y!==null?y.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return E!==null?null:a(C,y,""+S,_);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Sv:return S.key===E?l(C,y,S,_):null;case Sc:return S.key===E?u(C,y,S,_):null;case sa:return E=S._init,h(C,y,E(S._payload),_)}if(Fp(S)||pp(S))return E!==null?null:c(C,y,S,_,null);Ov(C,S)}return null}function f(C,y,S,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return C=C.get(S)||null,a(y,C,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Sv:return C=C.get(_.key===null?S:_.key)||null,l(y,C,_,E);case Sc:return C=C.get(_.key===null?S:_.key)||null,u(y,C,_,E);case sa:var R=_._init;return f(C,y,S,R(_._payload),E)}if(Fp(_)||pp(_))return C=C.get(S)||null,c(y,C,_,E,null);Ov(y,_)}return null}function g(C,y,S,_){for(var E=null,R=null,b=y,A=y=0,P=null;b!==null&&A<S.length;A++){b.index>A?(P=b,b=null):P=b.sibling;var F=h(C,b,S[A],_);if(F===null){b===null&&(b=P);break}t&&b&&F.alternate===null&&e(C,b),y=s(F,y,A),R===null?E=F:R.sibling=F,R=F,b=P}if(A===S.length)return n(C,b),jt&&Tl(C,A),E;if(b===null){for(;A<S.length;A++)b=d(C,S[A],_),b!==null&&(y=s(b,y,A),R===null?E=b:R.sibling=b,R=b);return jt&&Tl(C,A),E}for(b=r(C,b);A<S.length;A++)P=f(b,C,A,S[A],_),P!==null&&(t&&P.alternate!==null&&b.delete(P.key===null?A:P.key),y=s(P,y,A),R===null?E=P:R.sibling=P,R=P);return t&&b.forEach(function(k){return e(C,k)}),jt&&Tl(C,A),E}function m(C,y,S,_){var E=pp(S);if(typeof E!="function")throw Error(oe(150));if(S=E.call(S),S==null)throw Error(oe(151));for(var R=E=null,b=y,A=y=0,P=null,F=S.next();b!==null&&!F.done;A++,F=S.next()){b.index>A?(P=b,b=null):P=b.sibling;var k=h(C,b,F.value,_);if(k===null){b===null&&(b=P);break}t&&b&&k.alternate===null&&e(C,b),y=s(k,y,A),R===null?E=k:R.sibling=k,R=k,b=P}if(F.done)return n(C,b),jt&&Tl(C,A),E;if(b===null){for(;!F.done;A++,F=S.next())F=d(C,F.value,_),F!==null&&(y=s(F,y,A),R===null?E=F:R.sibling=F,R=F);return jt&&Tl(C,A),E}for(b=r(C,b);!F.done;A++,F=S.next())F=f(b,C,A,F.value,_),F!==null&&(t&&F.alternate!==null&&b.delete(F.key===null?A:F.key),y=s(F,y,A),R===null?E=F:R.sibling=F,R=F);return t&&b.forEach(function(L){return e(C,L)}),jt&&Tl(C,A),E}function v(C,y,S,_){if(typeof S=="object"&&S!==null&&S.type===Ec&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Sv:e:{for(var E=S.key,R=y;R!==null;){if(R.key===E){if(E=S.type,E===Ec){if(R.tag===7){n(C,R.sibling),y=i(R,S.props.children),y.return=C,C=y;break e}}else if(R.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===sa&&CF(E)===R.type){n(C,R.sibling),y=i(R,S.props),y.ref=yp(C,R,S),y.return=C,C=y;break e}n(C,R);break}else e(C,R);R=R.sibling}S.type===Ec?(y=Xl(S.props.children,C.mode,_,S.key),y.return=C,C=y):(_=Ey(S.type,S.key,S.props,null,C.mode,_),_.ref=yp(C,y,S),_.return=C,C=_)}return o(C);case Sc:e:{for(R=S.key;y!==null;){if(y.key===R)if(y.tag===4&&y.stateNode.containerInfo===S.containerInfo&&y.stateNode.implementation===S.implementation){n(C,y.sibling),y=i(y,S.children||[]),y.return=C,C=y;break e}else{n(C,y);break}else e(C,y);y=y.sibling}y=yT(S,C.mode,_),y.return=C,C=y}return o(C);case sa:return R=S._init,v(C,y,R(S._payload),_)}if(Fp(S))return g(C,y,S,_);if(pp(S))return m(C,y,S,_);Ov(C,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,y!==null&&y.tag===6?(n(C,y.sibling),y=i(y,S),y.return=C,C=y):(n(C,y),y=vT(S,C.mode,_),y.return=C,C=y),o(C)):n(C,y)}return v}var ud=KB(!0),qB=KB(!1),cC=Ja(null),dC=null,Ic=null,Vx=null;function Hx(){Vx=Ic=dC=null}function Bx(t){var e=cC.current;Ht(cC),t._currentValue=e}function hR(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function zc(t,e){dC=t,Vx=Ic=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Hr=!0),t.firstContext=null)}function $i(t){var e=t._currentValue;if(Vx!==t)if(t={context:t,memoizedValue:e,next:null},Ic===null){if(dC===null)throw Error(oe(308));Ic=t,dC.dependencies={lanes:0,firstContext:t}}else Ic=Ic.next=t;return e}var Vl=null;function $x(t){Vl===null?Vl=[t]:Vl.push(t)}function YB(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,$x(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ro(t,r)}function Ro(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var oa=!1;function Wx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function QB(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function yo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function xa(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,st&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ro(t,n)}return i=r.interleaved,i===null?(e.next=e,$x(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ro(t,n)}function my(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,xx(t,n)}}function wF(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function hC(t,e,n,r){var i=t.updateQueue;oa=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,c=u=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,m=a;switch(h=e,f=n,m.tag){case 1:if(g=m.payload,typeof g=="function"){d=g.call(f,d,h);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,h=typeof g=="function"?g.call(f,d,h):g,h==null)break e;d=Yt({},d,h);break e;case 2:oa=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=f,l=d):c=c.next=f,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);pu|=o,t.lanes=o,t.memoizedState=d}}function SF(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(oe(191,i));i.call(r)}}}var fm={},Ns=Ja(fm),Lf=Ja(fm),kf=Ja(fm);function Hl(t){if(t===fm)throw Error(oe(174));return t}function jx(t,e){switch(It(kf,e),It(Lf,t),It(Ns,fm),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:z0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=z0(e,t)}Ht(Ns),It(Ns,e)}function cd(){Ht(Ns),Ht(Lf),Ht(kf)}function XB(t){Hl(kf.current);var e=Hl(Ns.current),n=z0(e,t.type);e!==n&&(It(Lf,t),It(Ns,n))}function Ux(t){Lf.current===t&&(Ht(Ns),Ht(Lf))}var Kt=Ja(0);function pC(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var dT=[];function zx(){for(var t=0;t<dT.length;t++)dT[t]._workInProgressVersionPrimary=null;dT.length=0}var vy=ko.ReactCurrentDispatcher,hT=ko.ReactCurrentBatchConfig,hu=0,qt=null,wn=null,Pn=null,fC=!1,of=!1,Gf=0,s8=0;function Zn(){throw Error(oe(321))}function Kx(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!gs(t[n],e[n]))return!1;return!0}function qx(t,e,n,r,i,s){if(hu=s,qt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,vy.current=t===null||t.memoizedState===null?u8:c8,t=n(r,i),of){s=0;do{if(of=!1,Gf=0,25<=s)throw Error(oe(301));s+=1,Pn=wn=null,e.updateQueue=null,vy.current=d8,t=n(r,i)}while(of)}if(vy.current=gC,e=wn!==null&&wn.next!==null,hu=0,Pn=wn=qt=null,fC=!1,e)throw Error(oe(300));return t}function Yx(){var t=Gf!==0;return Gf=0,t}function Ps(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pn===null?qt.memoizedState=Pn=t:Pn=Pn.next=t,Pn}function Wi(){if(wn===null){var t=qt.alternate;t=t!==null?t.memoizedState:null}else t=wn.next;var e=Pn===null?qt.memoizedState:Pn.next;if(e!==null)Pn=e,wn=t;else{if(t===null)throw Error(oe(310));wn=t,t={memoizedState:wn.memoizedState,baseState:wn.baseState,baseQueue:wn.baseQueue,queue:wn.queue,next:null},Pn===null?qt.memoizedState=Pn=t:Pn=Pn.next=t}return Pn}function Vf(t,e){return typeof e=="function"?e(t):e}function pT(t){var e=Wi(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=wn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((hu&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,qt.lanes|=c,pu|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,gs(r,e.memoizedState)||(Hr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,qt.lanes|=s,pu|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function fT(t){var e=Wi(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);gs(s,e.memoizedState)||(Hr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function JB(){}function ZB(t,e){var n=qt,r=Wi(),i=e(),s=!gs(r.memoizedState,i);if(s&&(r.memoizedState=i,Hr=!0),r=r.queue,Qx(n2.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Pn!==null&&Pn.memoizedState.tag&1){if(n.flags|=2048,Hf(9,t2.bind(null,n,r,i,e),void 0,null),On===null)throw Error(oe(349));hu&30||e2(n,e,i)}return i}function e2(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=qt.updateQueue,e===null?(e={lastEffect:null,stores:null},qt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function t2(t,e,n,r){e.value=n,e.getSnapshot=r,r2(e)&&i2(t)}function n2(t,e,n){return n(function(){r2(e)&&i2(t)})}function r2(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!gs(t,n)}catch{return!0}}function i2(t){var e=Ro(t,1);e!==null&&hs(e,t,1,-1)}function EF(t){var e=Ps();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vf,lastRenderedState:t},e.queue=t,t=t.dispatch=l8.bind(null,qt,t),[e.memoizedState,t]}function Hf(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=qt.updateQueue,e===null?(e={lastEffect:null,stores:null},qt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function s2(){return Wi().memoizedState}function yy(t,e,n,r){var i=Ps();qt.flags|=t,i.memoizedState=Hf(1|e,n,void 0,r===void 0?null:r)}function bS(t,e,n,r){var i=Wi();r=r===void 0?null:r;var s=void 0;if(wn!==null){var o=wn.memoizedState;if(s=o.destroy,r!==null&&Kx(r,o.deps)){i.memoizedState=Hf(e,n,s,r);return}}qt.flags|=t,i.memoizedState=Hf(1|e,n,s,r)}function bF(t,e){return yy(8390656,8,t,e)}function Qx(t,e){return bS(2048,8,t,e)}function o2(t,e){return bS(4,2,t,e)}function a2(t,e){return bS(4,4,t,e)}function l2(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function u2(t,e,n){return n=n!=null?n.concat([t]):null,bS(4,4,l2.bind(null,e,t),n)}function Xx(){}function c2(t,e){var n=Wi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kx(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function d2(t,e){var n=Wi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kx(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function h2(t,e,n){return hu&21?(gs(n,e)||(n=vB(),qt.lanes|=n,pu|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Hr=!0),t.memoizedState=n)}function o8(t,e){var n=mt;mt=n!==0&&4>n?n:4,t(!0);var r=hT.transition;hT.transition={};try{t(!1),e()}finally{mt=n,hT.transition=r}}function p2(){return Wi().memoizedState}function a8(t,e,n){var r=Ia(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},f2(t))g2(e,n);else if(n=YB(t,e,n,r),n!==null){var i=Er();hs(n,t,r,i),m2(n,e,r)}}function l8(t,e,n){var r=Ia(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(f2(t))g2(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,gs(a,o)){var l=e.interleaved;l===null?(i.next=i,$x(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=YB(t,e,i,r),n!==null&&(i=Er(),hs(n,t,r,i),m2(n,e,r))}}function f2(t){var e=t.alternate;return t===qt||e!==null&&e===qt}function g2(t,e){of=fC=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function m2(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,xx(t,n)}}var gC={readContext:$i,useCallback:Zn,useContext:Zn,useEffect:Zn,useImperativeHandle:Zn,useInsertionEffect:Zn,useLayoutEffect:Zn,useMemo:Zn,useReducer:Zn,useRef:Zn,useState:Zn,useDebugValue:Zn,useDeferredValue:Zn,useTransition:Zn,useMutableSource:Zn,useSyncExternalStore:Zn,useId:Zn,unstable_isNewReconciler:!1},u8={readContext:$i,useCallback:function(t,e){return Ps().memoizedState=[t,e===void 0?null:e],t},useContext:$i,useEffect:bF,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,yy(4194308,4,l2.bind(null,e,t),n)},useLayoutEffect:function(t,e){return yy(4194308,4,t,e)},useInsertionEffect:function(t,e){return yy(4,2,t,e)},useMemo:function(t,e){var n=Ps();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ps();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=a8.bind(null,qt,t),[r.memoizedState,t]},useRef:function(t){var e=Ps();return t={current:t},e.memoizedState=t},useState:EF,useDebugValue:Xx,useDeferredValue:function(t){return Ps().memoizedState=t},useTransition:function(){var t=EF(!1),e=t[0];return t=o8.bind(null,t[1]),Ps().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=qt,i=Ps();if(jt){if(n===void 0)throw Error(oe(407));n=n()}else{if(n=e(),On===null)throw Error(oe(349));hu&30||e2(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,bF(n2.bind(null,r,s,t),[t]),r.flags|=2048,Hf(9,t2.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Ps(),e=On.identifierPrefix;if(jt){var n=uo,r=lo;n=(r&~(1<<32-ds(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Gf++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=s8++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},c8={readContext:$i,useCallback:c2,useContext:$i,useEffect:Qx,useImperativeHandle:u2,useInsertionEffect:o2,useLayoutEffect:a2,useMemo:d2,useReducer:pT,useRef:s2,useState:function(){return pT(Vf)},useDebugValue:Xx,useDeferredValue:function(t){var e=Wi();return h2(e,wn.memoizedState,t)},useTransition:function(){var t=pT(Vf)[0],e=Wi().memoizedState;return[t,e]},useMutableSource:JB,useSyncExternalStore:ZB,useId:p2,unstable_isNewReconciler:!1},d8={readContext:$i,useCallback:c2,useContext:$i,useEffect:Qx,useImperativeHandle:u2,useInsertionEffect:o2,useLayoutEffect:a2,useMemo:d2,useReducer:fT,useRef:s2,useState:function(){return fT(Vf)},useDebugValue:Xx,useDeferredValue:function(t){var e=Wi();return wn===null?e.memoizedState=t:h2(e,wn.memoizedState,t)},useTransition:function(){var t=fT(Vf)[0],e=Wi().memoizedState;return[t,e]},useMutableSource:JB,useSyncExternalStore:ZB,useId:p2,unstable_isNewReconciler:!1};function es(t,e){if(t&&t.defaultProps){e=Yt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function pR(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Yt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var TS={isMounted:function(t){return(t=t._reactInternals)?Vu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Er(),i=Ia(t),s=yo(r,i);s.payload=e,n!=null&&(s.callback=n),e=xa(t,s,i),e!==null&&(hs(e,t,i,r),my(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Er(),i=Ia(t),s=yo(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=xa(t,s,i),e!==null&&(hs(e,t,i,r),my(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Er(),r=Ia(t),i=yo(n,r);i.tag=2,e!=null&&(i.callback=e),e=xa(t,i,r),e!==null&&(hs(e,t,r,n),my(e,t,r))}};function TF(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Of(n,r)||!Of(i,s):!0}function v2(t,e,n){var r=!1,i=Ba,s=e.contextType;return typeof s=="object"&&s!==null?s=$i(s):(i=Kr(e)?cu:ur.current,r=e.contextTypes,s=(r=r!=null)?ad(t,i):Ba),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=TS,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function RF(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&TS.enqueueReplaceState(e,e.state,null)}function fR(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Wx(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=$i(s):(s=Kr(e)?cu:ur.current,i.context=ad(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(pR(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&TS.enqueueReplaceState(i,i.state,null),hC(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function dd(t,e){try{var n="",r=e;do n+=V9(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function gT(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function gR(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var h8=typeof WeakMap=="function"?WeakMap:Map;function y2(t,e,n){n=yo(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){vC||(vC=!0,RR=r),gR(t,e)},n}function C2(t,e,n){n=yo(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){gR(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){gR(t,e),typeof r!="function"&&(Pa===null?Pa=new Set([this]):Pa.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function _F(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new h8;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=_8.bind(null,t,e,n),e.then(t,t))}function AF(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function xF(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=yo(-1,1),e.tag=2,xa(n,e,1))),n.lanes|=1),t)}var p8=ko.ReactCurrentOwner,Hr=!1;function mr(t,e,n,r){e.child=t===null?qB(e,null,n,r):ud(e,t.child,n,r)}function PF(t,e,n,r,i){n=n.render;var s=e.ref;return zc(e,i),r=qx(t,e,n,r,s,i),n=Yx(),t!==null&&!Hr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,_o(t,e,i)):(jt&&n&&Lx(e),e.flags|=1,mr(t,e,r,i),e.child)}function IF(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!sP(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,w2(t,e,s,r,i)):(t=Ey(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Of,n(o,r)&&t.ref===e.ref)return _o(t,e,i)}return e.flags|=1,t=Da(s,r),t.ref=e.ref,t.return=e,e.child=t}function w2(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Of(s,r)&&t.ref===e.ref)if(Hr=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Hr=!0);else return e.lanes=t.lanes,_o(t,e,i)}return mR(t,e,n,r,i)}function S2(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},It(Oc,oi),oi|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,It(Oc,oi),oi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,It(Oc,oi),oi|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,It(Oc,oi),oi|=r;return mr(t,e,i,n),e.child}function E2(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function mR(t,e,n,r,i){var s=Kr(n)?cu:ur.current;return s=ad(e,s),zc(e,i),n=qx(t,e,n,r,s,i),r=Yx(),t!==null&&!Hr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,_o(t,e,i)):(jt&&r&&Lx(e),e.flags|=1,mr(t,e,n,i),e.child)}function DF(t,e,n,r,i){if(Kr(n)){var s=!0;aC(e)}else s=!1;if(zc(e,i),e.stateNode===null)Cy(t,e),v2(e,n,r),fR(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=$i(u):(u=Kr(n)?cu:ur.current,u=ad(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&RF(e,o,r,u),oa=!1;var h=e.memoizedState;o.state=h,hC(e,r,o,i),l=e.memoizedState,a!==r||h!==l||zr.current||oa?(typeof c=="function"&&(pR(e,n,c,r),l=e.memoizedState),(a=oa||TF(e,n,a,r,h,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,QB(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:es(e.type,a),o.props=u,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=$i(l):(l=Kr(n)?cu:ur.current,l=ad(e,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&RF(e,o,r,l),oa=!1,h=e.memoizedState,o.state=h,hC(e,r,o,i);var g=e.memoizedState;a!==d||h!==g||zr.current||oa?(typeof f=="function"&&(pR(e,n,f,r),g=e.memoizedState),(u=oa||TF(e,n,u,r,h,g,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return vR(t,e,n,r,s,i)}function vR(t,e,n,r,i,s){E2(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&mF(e,n,!1),_o(t,e,s);r=e.stateNode,p8.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ud(e,t.child,null,s),e.child=ud(e,null,a,s)):mr(t,e,a,s),e.memoizedState=r.state,i&&mF(e,n,!0),e.child}function b2(t){var e=t.stateNode;e.pendingContext?gF(t,e.pendingContext,e.pendingContext!==e.context):e.context&&gF(t,e.context,!1),jx(t,e.containerInfo)}function OF(t,e,n,r,i){return ld(),Gx(i),e.flags|=256,mr(t,e,n,r),e.child}var yR={dehydrated:null,treeContext:null,retryLane:0};function CR(t){return{baseLanes:t,cachePool:null,transitions:null}}function T2(t,e,n){var r=e.pendingProps,i=Kt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),It(Kt,i&1),t===null)return dR(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=AS(o,r,0,null),t=Xl(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=CR(n),e.memoizedState=yR,t):Jx(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return f8(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Da(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Da(a,s):(s=Xl(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?CR(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=yR,r}return s=t.child,t=s.sibling,r=Da(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Jx(t,e){return e=AS({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Mv(t,e,n,r){return r!==null&&Gx(r),ud(e,t.child,null,n),t=Jx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function f8(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=gT(Error(oe(422))),Mv(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=AS({mode:"visible",children:r.children},i,0,null),s=Xl(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ud(e,t.child,null,o),e.child.memoizedState=CR(o),e.memoizedState=yR,s);if(!(e.mode&1))return Mv(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(oe(419)),r=gT(s,r,void 0),Mv(t,e,o,r)}if(a=(o&t.childLanes)!==0,Hr||a){if(r=On,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ro(t,i),hs(r,t,i,-1))}return iP(),r=gT(Error(oe(421))),Mv(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=A8.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,fi=Aa(i.nextSibling),gi=e,jt=!0,os=null,t!==null&&(Di[Oi++]=lo,Di[Oi++]=uo,Di[Oi++]=du,lo=t.id,uo=t.overflow,du=e),e=Jx(e,r.children),e.flags|=4096,e)}function MF(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),hR(t.return,e,n)}function mT(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function R2(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(mr(t,e,r.children,n),r=Kt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&MF(t,n,e);else if(t.tag===19)MF(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(It(Kt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&pC(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),mT(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&pC(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}mT(e,!0,n,null,s);break;case"together":mT(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Cy(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function _o(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),pu|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(oe(153));if(e.child!==null){for(t=e.child,n=Da(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Da(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function g8(t,e,n){switch(e.tag){case 3:b2(e),ld();break;case 5:XB(e);break;case 1:Kr(e.type)&&aC(e);break;case 4:jx(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;It(cC,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(It(Kt,Kt.current&1),e.flags|=128,null):n&e.child.childLanes?T2(t,e,n):(It(Kt,Kt.current&1),t=_o(t,e,n),t!==null?t.sibling:null);It(Kt,Kt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return R2(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),It(Kt,Kt.current),r)break;return null;case 22:case 23:return e.lanes=0,S2(t,e,n)}return _o(t,e,n)}var _2,wR,A2,x2;_2=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wR=function(){};A2=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Hl(Ns.current);var s=null;switch(n){case"input":i=$0(t,i),r=$0(t,r),s=[];break;case"select":i=Yt({},i,{value:void 0}),r=Yt({},r,{value:void 0}),s=[];break;case"textarea":i=U0(t,i),r=U0(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=sC)}K0(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Rf.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Rf.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Nt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};x2=function(t,e,n,r){n!==r&&(e.flags|=4)};function Cp(t,e){if(!jt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function er(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function m8(t,e,n){var r=e.pendingProps;switch(kx(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return er(e),null;case 1:return Kr(e.type)&&oC(),er(e),null;case 3:return r=e.stateNode,cd(),Ht(zr),Ht(ur),zx(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Dv(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,os!==null&&(xR(os),os=null))),wR(t,e),er(e),null;case 5:Ux(e);var i=Hl(kf.current);if(n=e.type,t!==null&&e.stateNode!=null)A2(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(oe(166));return er(e),null}if(t=Hl(Ns.current),Dv(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Is]=e,r[Nf]=s,t=(e.mode&1)!==0,n){case"dialog":Nt("cancel",r),Nt("close",r);break;case"iframe":case"object":case"embed":Nt("load",r);break;case"video":case"audio":for(i=0;i<Lp.length;i++)Nt(Lp[i],r);break;case"source":Nt("error",r);break;case"img":case"image":case"link":Nt("error",r),Nt("load",r);break;case"details":Nt("toggle",r);break;case"input":$M(r,s),Nt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Nt("invalid",r);break;case"textarea":jM(r,s),Nt("invalid",r)}K0(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Iv(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Iv(r.textContent,a,t),i=["children",""+a]):Rf.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Nt("scroll",r)}switch(n){case"input":Ev(r),WM(r,s,!0);break;case"textarea":Ev(r),UM(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=sC)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=nB(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Is]=e,t[Nf]=r,_2(t,e,!1,!1),e.stateNode=t;e:{switch(o=q0(n,r),n){case"dialog":Nt("cancel",t),Nt("close",t),i=r;break;case"iframe":case"object":case"embed":Nt("load",t),i=r;break;case"video":case"audio":for(i=0;i<Lp.length;i++)Nt(Lp[i],t);i=r;break;case"source":Nt("error",t),i=r;break;case"img":case"image":case"link":Nt("error",t),Nt("load",t),i=r;break;case"details":Nt("toggle",t),i=r;break;case"input":$M(t,r),i=$0(t,r),Nt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Yt({},r,{value:void 0}),Nt("invalid",t);break;case"textarea":jM(t,r),i=U0(t,r),Nt("invalid",t);break;default:i=r}K0(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?sB(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&rB(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&_f(t,l):typeof l=="number"&&_f(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Rf.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Nt("scroll",t):l!=null&&Ex(t,s,l,o))}switch(n){case"input":Ev(t),WM(t,r,!1);break;case"textarea":Ev(t),UM(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ha(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?$c(t,!!r.multiple,s,!1):r.defaultValue!=null&&$c(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=sC)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return er(e),null;case 6:if(t&&e.stateNode!=null)x2(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(oe(166));if(n=Hl(kf.current),Hl(Ns.current),Dv(e)){if(r=e.stateNode,n=e.memoizedProps,r[Is]=e,(s=r.nodeValue!==n)&&(t=gi,t!==null))switch(t.tag){case 3:Iv(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Iv(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Is]=e,e.stateNode=r}return er(e),null;case 13:if(Ht(Kt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(jt&&fi!==null&&e.mode&1&&!(e.flags&128))zB(),ld(),e.flags|=98560,s=!1;else if(s=Dv(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(oe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(oe(317));s[Is]=e}else ld(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;er(e),s=!1}else os!==null&&(xR(os),os=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Kt.current&1?bn===0&&(bn=3):iP())),e.updateQueue!==null&&(e.flags|=4),er(e),null);case 4:return cd(),wR(t,e),t===null&&Mf(e.stateNode.containerInfo),er(e),null;case 10:return Bx(e.type._context),er(e),null;case 17:return Kr(e.type)&&oC(),er(e),null;case 19:if(Ht(Kt),s=e.memoizedState,s===null)return er(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Cp(s,!1);else{if(bn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=pC(t),o!==null){for(e.flags|=128,Cp(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return It(Kt,Kt.current&1|2),e.child}t=t.sibling}s.tail!==null&&rn()>hd&&(e.flags|=128,r=!0,Cp(s,!1),e.lanes=4194304)}else{if(!r)if(t=pC(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Cp(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!jt)return er(e),null}else 2*rn()-s.renderingStartTime>hd&&n!==1073741824&&(e.flags|=128,r=!0,Cp(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=rn(),e.sibling=null,n=Kt.current,It(Kt,r?n&1|2:n&1),e):(er(e),null);case 22:case 23:return rP(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?oi&1073741824&&(er(e),e.subtreeFlags&6&&(e.flags|=8192)):er(e),null;case 24:return null;case 25:return null}throw Error(oe(156,e.tag))}function v8(t,e){switch(kx(e),e.tag){case 1:return Kr(e.type)&&oC(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return cd(),Ht(zr),Ht(ur),zx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ux(e),null;case 13:if(Ht(Kt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(oe(340));ld()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ht(Kt),null;case 4:return cd(),null;case 10:return Bx(e.type._context),null;case 22:case 23:return rP(),null;case 24:return null;default:return null}}var Fv=!1,ir=!1,y8=typeof WeakSet=="function"?WeakSet:Set,ge=null;function Dc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Xt(t,e,r)}else n.current=null}function SR(t,e,n){try{n()}catch(r){Xt(t,e,r)}}var FF=!1;function C8(t,e){if(iR=nC,t=MB(),Nx(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,h=null;t:for(;;){for(var f;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++u===i&&(a=o),h===s&&++c===r&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(sR={focusedElem:t,selectionRange:n},nC=!1,ge=e;ge!==null;)if(e=ge,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ge=t;else for(;ge!==null;){e=ge;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,v=g.memoizedState,C=e.stateNode,y=C.getSnapshotBeforeUpdate(e.elementType===e.type?m:es(e.type,m),v);C.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(oe(163))}}catch(_){Xt(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,ge=t;break}ge=e.return}return g=FF,FF=!1,g}function af(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&SR(e,n,s)}i=i.next}while(i!==r)}}function RS(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ER(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function P2(t){var e=t.alternate;e!==null&&(t.alternate=null,P2(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Is],delete e[Nf],delete e[lR],delete e[t8],delete e[n8])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function I2(t){return t.tag===5||t.tag===3||t.tag===4}function NF(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||I2(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function bR(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=sC));else if(r!==4&&(t=t.child,t!==null))for(bR(t,e,n),t=t.sibling;t!==null;)bR(t,e,n),t=t.sibling}function TR(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(TR(t,e,n),t=t.sibling;t!==null;)TR(t,e,n),t=t.sibling}var Hn=null,ts=!1;function Zo(t,e,n){for(n=n.child;n!==null;)D2(t,e,n),n=n.sibling}function D2(t,e,n){if(Fs&&typeof Fs.onCommitFiberUnmount=="function")try{Fs.onCommitFiberUnmount(vS,n)}catch{}switch(n.tag){case 5:ir||Dc(n,e);case 6:var r=Hn,i=ts;Hn=null,Zo(t,e,n),Hn=r,ts=i,Hn!==null&&(ts?(t=Hn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Hn.removeChild(n.stateNode));break;case 18:Hn!==null&&(ts?(t=Hn,n=n.stateNode,t.nodeType===8?uT(t.parentNode,n):t.nodeType===1&&uT(t,n),If(t)):uT(Hn,n.stateNode));break;case 4:r=Hn,i=ts,Hn=n.stateNode.containerInfo,ts=!0,Zo(t,e,n),Hn=r,ts=i;break;case 0:case 11:case 14:case 15:if(!ir&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&SR(n,e,o),i=i.next}while(i!==r)}Zo(t,e,n);break;case 1:if(!ir&&(Dc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Xt(n,e,a)}Zo(t,e,n);break;case 21:Zo(t,e,n);break;case 22:n.mode&1?(ir=(r=ir)||n.memoizedState!==null,Zo(t,e,n),ir=r):Zo(t,e,n);break;default:Zo(t,e,n)}}function LF(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new y8),e.forEach(function(r){var i=x8.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ji(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Hn=a.stateNode,ts=!1;break e;case 3:Hn=a.stateNode.containerInfo,ts=!0;break e;case 4:Hn=a.stateNode.containerInfo,ts=!0;break e}a=a.return}if(Hn===null)throw Error(oe(160));D2(s,o,i),Hn=null,ts=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Xt(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)O2(e,t),e=e.sibling}function O2(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ji(e,t),bs(t),r&4){try{af(3,t,t.return),RS(3,t)}catch(m){Xt(t,t.return,m)}try{af(5,t,t.return)}catch(m){Xt(t,t.return,m)}}break;case 1:Ji(e,t),bs(t),r&512&&n!==null&&Dc(n,n.return);break;case 5:if(Ji(e,t),bs(t),r&512&&n!==null&&Dc(n,n.return),t.flags&32){var i=t.stateNode;try{_f(i,"")}catch(m){Xt(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&eB(i,s),q0(a,o);var u=q0(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?sB(i,d):c==="dangerouslySetInnerHTML"?rB(i,d):c==="children"?_f(i,d):Ex(i,c,d,u)}switch(a){case"input":W0(i,s);break;case"textarea":tB(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?$c(i,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?$c(i,!!s.multiple,s.defaultValue,!0):$c(i,!!s.multiple,s.multiple?[]:"",!1))}i[Nf]=s}catch(m){Xt(t,t.return,m)}}break;case 6:if(Ji(e,t),bs(t),r&4){if(t.stateNode===null)throw Error(oe(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(m){Xt(t,t.return,m)}}break;case 3:if(Ji(e,t),bs(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{If(e.containerInfo)}catch(m){Xt(t,t.return,m)}break;case 4:Ji(e,t),bs(t);break;case 13:Ji(e,t),bs(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(tP=rn())),r&4&&LF(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(ir=(u=ir)||c,Ji(e,t),ir=u):Ji(e,t),bs(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(ge=t,c=t.child;c!==null;){for(d=ge=c;ge!==null;){switch(h=ge,f=h.child,h.tag){case 0:case 11:case 14:case 15:af(4,h,h.return);break;case 1:Dc(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){Xt(r,n,m)}}break;case 5:Dc(h,h.return);break;case 22:if(h.memoizedState!==null){GF(d);continue}}f!==null?(f.return=h,ge=f):GF(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=iB("display",o))}catch(m){Xt(t,t.return,m)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){Xt(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ji(e,t),bs(t),r&4&&LF(t);break;case 21:break;default:Ji(e,t),bs(t)}}function bs(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(I2(n)){var r=n;break e}n=n.return}throw Error(oe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(_f(i,""),r.flags&=-33);var s=NF(t);TR(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=NF(t);bR(t,a,o);break;default:throw Error(oe(161))}}catch(l){Xt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function w8(t,e,n){ge=t,M2(t)}function M2(t,e,n){for(var r=(t.mode&1)!==0;ge!==null;){var i=ge,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Fv;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ir;a=Fv;var u=ir;if(Fv=o,(ir=l)&&!u)for(ge=i;ge!==null;)o=ge,l=o.child,o.tag===22&&o.memoizedState!==null?VF(i):l!==null?(l.return=o,ge=l):VF(i);for(;s!==null;)ge=s,M2(s),s=s.sibling;ge=i,Fv=a,ir=u}kF(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ge=s):kF(t)}}function kF(t){for(;ge!==null;){var e=ge;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ir||RS(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ir)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:es(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&SF(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}SF(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&If(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(oe(163))}ir||e.flags&512&&ER(e)}catch(h){Xt(e,e.return,h)}}if(e===t){ge=null;break}if(n=e.sibling,n!==null){n.return=e.return,ge=n;break}ge=e.return}}function GF(t){for(;ge!==null;){var e=ge;if(e===t){ge=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ge=n;break}ge=e.return}}function VF(t){for(;ge!==null;){var e=ge;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{RS(4,e)}catch(l){Xt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Xt(e,i,l)}}var s=e.return;try{ER(e)}catch(l){Xt(e,s,l)}break;case 5:var o=e.return;try{ER(e)}catch(l){Xt(e,o,l)}}}catch(l){Xt(e,e.return,l)}if(e===t){ge=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ge=a;break}ge=e.return}}var S8=Math.ceil,mC=ko.ReactCurrentDispatcher,Zx=ko.ReactCurrentOwner,Vi=ko.ReactCurrentBatchConfig,st=0,On=null,fn=null,Wn=0,oi=0,Oc=Ja(0),bn=0,Bf=null,pu=0,_S=0,eP=0,lf=null,Vr=null,tP=0,hd=1/0,io=null,vC=!1,RR=null,Pa=null,Nv=!1,va=null,yC=0,uf=0,_R=null,wy=-1,Sy=0;function Er(){return st&6?rn():wy!==-1?wy:wy=rn()}function Ia(t){return t.mode&1?st&2&&Wn!==0?Wn&-Wn:i8.transition!==null?(Sy===0&&(Sy=vB()),Sy):(t=mt,t!==0||(t=window.event,t=t===void 0?16:TB(t.type)),t):1}function hs(t,e,n,r){if(50<uf)throw uf=0,_R=null,Error(oe(185));dm(t,n,r),(!(st&2)||t!==On)&&(t===On&&(!(st&2)&&(_S|=n),bn===4&&ua(t,Wn)),qr(t,r),n===1&&st===0&&!(e.mode&1)&&(hd=rn()+500,ES&&Za()))}function qr(t,e){var n=t.callbackNode;iq(t,e);var r=tC(t,t===On?Wn:0);if(r===0)n!==null&&qM(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&qM(n),e===1)t.tag===0?r8(HF.bind(null,t)):WB(HF.bind(null,t)),Zq(function(){!(st&6)&&Za()}),n=null;else{switch(yB(r)){case 1:n=Ax;break;case 4:n=gB;break;case 16:n=eC;break;case 536870912:n=mB;break;default:n=eC}n=B2(n,F2.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function F2(t,e){if(wy=-1,Sy=0,st&6)throw Error(oe(327));var n=t.callbackNode;if(Kc()&&t.callbackNode!==n)return null;var r=tC(t,t===On?Wn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=CC(t,r);else{e=r;var i=st;st|=2;var s=L2();(On!==t||Wn!==e)&&(io=null,hd=rn()+500,Ql(t,e));do try{T8();break}catch(a){N2(t,a)}while(!0);Hx(),mC.current=s,st=i,fn!==null?e=0:(On=null,Wn=0,e=bn)}if(e!==0){if(e===2&&(i=Z0(t),i!==0&&(r=i,e=AR(t,i))),e===1)throw n=Bf,Ql(t,0),ua(t,r),qr(t,rn()),n;if(e===6)ua(t,r);else{if(i=t.current.alternate,!(r&30)&&!E8(i)&&(e=CC(t,r),e===2&&(s=Z0(t),s!==0&&(r=s,e=AR(t,s))),e===1))throw n=Bf,Ql(t,0),ua(t,r),qr(t,rn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(oe(345));case 2:Rl(t,Vr,io);break;case 3:if(ua(t,r),(r&130023424)===r&&(e=tP+500-rn(),10<e)){if(tC(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Er(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=aR(Rl.bind(null,t,Vr,io),e);break}Rl(t,Vr,io);break;case 4:if(ua(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-ds(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=rn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*S8(r/1960))-r,10<r){t.timeoutHandle=aR(Rl.bind(null,t,Vr,io),r);break}Rl(t,Vr,io);break;case 5:Rl(t,Vr,io);break;default:throw Error(oe(329))}}}return qr(t,rn()),t.callbackNode===n?F2.bind(null,t):null}function AR(t,e){var n=lf;return t.current.memoizedState.isDehydrated&&(Ql(t,e).flags|=256),t=CC(t,e),t!==2&&(e=Vr,Vr=n,e!==null&&xR(e)),t}function xR(t){Vr===null?Vr=t:Vr.push.apply(Vr,t)}function E8(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!gs(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ua(t,e){for(e&=~eP,e&=~_S,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ds(e),r=1<<n;t[n]=-1,e&=~r}}function HF(t){if(st&6)throw Error(oe(327));Kc();var e=tC(t,0);if(!(e&1))return qr(t,rn()),null;var n=CC(t,e);if(t.tag!==0&&n===2){var r=Z0(t);r!==0&&(e=r,n=AR(t,r))}if(n===1)throw n=Bf,Ql(t,0),ua(t,e),qr(t,rn()),n;if(n===6)throw Error(oe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Rl(t,Vr,io),qr(t,rn()),null}function nP(t,e){var n=st;st|=1;try{return t(e)}finally{st=n,st===0&&(hd=rn()+500,ES&&Za())}}function fu(t){va!==null&&va.tag===0&&!(st&6)&&Kc();var e=st;st|=1;var n=Vi.transition,r=mt;try{if(Vi.transition=null,mt=1,t)return t()}finally{mt=r,Vi.transition=n,st=e,!(st&6)&&Za()}}function rP(){oi=Oc.current,Ht(Oc)}function Ql(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Jq(n)),fn!==null)for(n=fn.return;n!==null;){var r=n;switch(kx(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&oC();break;case 3:cd(),Ht(zr),Ht(ur),zx();break;case 5:Ux(r);break;case 4:cd();break;case 13:Ht(Kt);break;case 19:Ht(Kt);break;case 10:Bx(r.type._context);break;case 22:case 23:rP()}n=n.return}if(On=t,fn=t=Da(t.current,null),Wn=oi=e,bn=0,Bf=null,eP=_S=pu=0,Vr=lf=null,Vl!==null){for(e=0;e<Vl.length;e++)if(n=Vl[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Vl=null}return t}function N2(t,e){do{var n=fn;try{if(Hx(),vy.current=gC,fC){for(var r=qt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}fC=!1}if(hu=0,Pn=wn=qt=null,of=!1,Gf=0,Zx.current=null,n===null||n.return===null){bn=1,Bf=e,fn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Wn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=AF(o);if(f!==null){f.flags&=-257,xF(f,o,a,s,e),f.mode&1&&_F(s,u,e),e=f,l=u;var g=e.updateQueue;if(g===null){var m=new Set;m.add(l),e.updateQueue=m}else g.add(l);break e}else{if(!(e&1)){_F(s,u,e),iP();break e}l=Error(oe(426))}}else if(jt&&a.mode&1){var v=AF(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),xF(v,o,a,s,e),Gx(dd(l,a));break e}}s=l=dd(l,a),bn!==4&&(bn=2),lf===null?lf=[s]:lf.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var C=y2(s,l,e);wF(s,C);break e;case 1:a=l;var y=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Pa===null||!Pa.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var _=C2(s,a,e);wF(s,_);break e}}s=s.return}while(s!==null)}G2(n)}catch(E){e=E,fn===n&&n!==null&&(fn=n=n.return);continue}break}while(!0)}function L2(){var t=mC.current;return mC.current=gC,t===null?gC:t}function iP(){(bn===0||bn===3||bn===2)&&(bn=4),On===null||!(pu&268435455)&&!(_S&268435455)||ua(On,Wn)}function CC(t,e){var n=st;st|=2;var r=L2();(On!==t||Wn!==e)&&(io=null,Ql(t,e));do try{b8();break}catch(i){N2(t,i)}while(!0);if(Hx(),st=n,mC.current=r,fn!==null)throw Error(oe(261));return On=null,Wn=0,bn}function b8(){for(;fn!==null;)k2(fn)}function T8(){for(;fn!==null&&!Y9();)k2(fn)}function k2(t){var e=H2(t.alternate,t,oi);t.memoizedProps=t.pendingProps,e===null?G2(t):fn=e,Zx.current=null}function G2(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=v8(n,e),n!==null){n.flags&=32767,fn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{bn=6,fn=null;return}}else if(n=m8(n,e,oi),n!==null){fn=n;return}if(e=e.sibling,e!==null){fn=e;return}fn=e=t}while(e!==null);bn===0&&(bn=5)}function Rl(t,e,n){var r=mt,i=Vi.transition;try{Vi.transition=null,mt=1,R8(t,e,n,r)}finally{Vi.transition=i,mt=r}return null}function R8(t,e,n,r){do Kc();while(va!==null);if(st&6)throw Error(oe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(oe(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(sq(t,s),t===On&&(fn=On=null,Wn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Nv||(Nv=!0,B2(eC,function(){return Kc(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Vi.transition,Vi.transition=null;var o=mt;mt=1;var a=st;st|=4,Zx.current=null,C8(t,n),O2(n,t),Uq(sR),nC=!!iR,sR=iR=null,t.current=n,w8(n),Q9(),st=a,mt=o,Vi.transition=s}else t.current=n;if(Nv&&(Nv=!1,va=t,yC=i),s=t.pendingLanes,s===0&&(Pa=null),Z9(n.stateNode),qr(t,rn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(vC)throw vC=!1,t=RR,RR=null,t;return yC&1&&t.tag!==0&&Kc(),s=t.pendingLanes,s&1?t===_R?uf++:(uf=0,_R=t):uf=0,Za(),null}function Kc(){if(va!==null){var t=yB(yC),e=Vi.transition,n=mt;try{if(Vi.transition=null,mt=16>t?16:t,va===null)var r=!1;else{if(t=va,va=null,yC=0,st&6)throw Error(oe(331));var i=st;for(st|=4,ge=t.current;ge!==null;){var s=ge,o=s.child;if(ge.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(ge=u;ge!==null;){var c=ge;switch(c.tag){case 0:case 11:case 15:af(8,c,s)}var d=c.child;if(d!==null)d.return=c,ge=d;else for(;ge!==null;){c=ge;var h=c.sibling,f=c.return;if(P2(c),c===u){ge=null;break}if(h!==null){h.return=f,ge=h;break}ge=f}}}var g=s.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}ge=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ge=o;else e:for(;ge!==null;){if(s=ge,s.flags&2048)switch(s.tag){case 0:case 11:case 15:af(9,s,s.return)}var C=s.sibling;if(C!==null){C.return=s.return,ge=C;break e}ge=s.return}}var y=t.current;for(ge=y;ge!==null;){o=ge;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,ge=S;else e:for(o=y;ge!==null;){if(a=ge,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:RS(9,a)}}catch(E){Xt(a,a.return,E)}if(a===o){ge=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,ge=_;break e}ge=a.return}}if(st=i,Za(),Fs&&typeof Fs.onPostCommitFiberRoot=="function")try{Fs.onPostCommitFiberRoot(vS,t)}catch{}r=!0}return r}finally{mt=n,Vi.transition=e}}return!1}function BF(t,e,n){e=dd(n,e),e=y2(t,e,1),t=xa(t,e,1),e=Er(),t!==null&&(dm(t,1,e),qr(t,e))}function Xt(t,e,n){if(t.tag===3)BF(t,t,n);else for(;e!==null;){if(e.tag===3){BF(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Pa===null||!Pa.has(r))){t=dd(n,t),t=C2(e,t,1),e=xa(e,t,1),t=Er(),e!==null&&(dm(e,1,t),qr(e,t));break}}e=e.return}}function _8(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Er(),t.pingedLanes|=t.suspendedLanes&n,On===t&&(Wn&n)===n&&(bn===4||bn===3&&(Wn&130023424)===Wn&&500>rn()-tP?Ql(t,0):eP|=n),qr(t,e)}function V2(t,e){e===0&&(t.mode&1?(e=Rv,Rv<<=1,!(Rv&130023424)&&(Rv=4194304)):e=1);var n=Er();t=Ro(t,e),t!==null&&(dm(t,e,n),qr(t,n))}function A8(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),V2(t,n)}function x8(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(oe(314))}r!==null&&r.delete(e),V2(t,n)}var H2;H2=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||zr.current)Hr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Hr=!1,g8(t,e,n);Hr=!!(t.flags&131072)}else Hr=!1,jt&&e.flags&1048576&&jB(e,uC,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Cy(t,e),t=e.pendingProps;var i=ad(e,ur.current);zc(e,n),i=qx(null,e,r,t,i,n);var s=Yx();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Kr(r)?(s=!0,aC(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Wx(e),i.updater=TS,e.stateNode=i,i._reactInternals=e,fR(e,r,t,n),e=vR(null,e,r,!0,s,n)):(e.tag=0,jt&&s&&Lx(e),mr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Cy(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=I8(r),t=es(r,t),i){case 0:e=mR(null,e,r,t,n);break e;case 1:e=DF(null,e,r,t,n);break e;case 11:e=PF(null,e,r,t,n);break e;case 14:e=IF(null,e,r,es(r.type,t),n);break e}throw Error(oe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:es(r,i),mR(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:es(r,i),DF(t,e,r,i,n);case 3:e:{if(b2(e),t===null)throw Error(oe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,QB(t,e),hC(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=dd(Error(oe(423)),e),e=OF(t,e,r,n,i);break e}else if(r!==i){i=dd(Error(oe(424)),e),e=OF(t,e,r,n,i);break e}else for(fi=Aa(e.stateNode.containerInfo.firstChild),gi=e,jt=!0,os=null,n=qB(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ld(),r===i){e=_o(t,e,n);break e}mr(t,e,r,n)}e=e.child}return e;case 5:return XB(e),t===null&&dR(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,oR(r,i)?o=null:s!==null&&oR(r,s)&&(e.flags|=32),E2(t,e),mr(t,e,o,n),e.child;case 6:return t===null&&dR(e),null;case 13:return T2(t,e,n);case 4:return jx(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ud(e,null,r,n):mr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:es(r,i),PF(t,e,r,i,n);case 7:return mr(t,e,e.pendingProps,n),e.child;case 8:return mr(t,e,e.pendingProps.children,n),e.child;case 12:return mr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,It(cC,r._currentValue),r._currentValue=o,s!==null)if(gs(s.value,o)){if(s.children===i.children&&!zr.current){e=_o(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=yo(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),hR(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(oe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),hR(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}mr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,zc(e,n),i=$i(i),r=r(i),e.flags|=1,mr(t,e,r,n),e.child;case 14:return r=e.type,i=es(r,e.pendingProps),i=es(r.type,i),IF(t,e,r,i,n);case 15:return w2(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:es(r,i),Cy(t,e),e.tag=1,Kr(r)?(t=!0,aC(e)):t=!1,zc(e,n),v2(e,r,i),fR(e,r,i,n),vR(null,e,r,!0,t,n);case 19:return R2(t,e,n);case 22:return S2(t,e,n)}throw Error(oe(156,e.tag))};function B2(t,e){return fB(t,e)}function P8(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ni(t,e,n,r){return new P8(t,e,n,r)}function sP(t){return t=t.prototype,!(!t||!t.isReactComponent)}function I8(t){if(typeof t=="function")return sP(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Tx)return 11;if(t===Rx)return 14}return 2}function Da(t,e){var n=t.alternate;return n===null?(n=Ni(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ey(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")sP(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ec:return Xl(n.children,i,s,e);case bx:o=8,i|=8;break;case G0:return t=Ni(12,n,e,i|2),t.elementType=G0,t.lanes=s,t;case V0:return t=Ni(13,n,e,i),t.elementType=V0,t.lanes=s,t;case H0:return t=Ni(19,n,e,i),t.elementType=H0,t.lanes=s,t;case XH:return AS(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case YH:o=10;break e;case QH:o=9;break e;case Tx:o=11;break e;case Rx:o=14;break e;case sa:o=16,r=null;break e}throw Error(oe(130,t==null?t:typeof t,""))}return e=Ni(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Xl(t,e,n,r){return t=Ni(7,t,r,e),t.lanes=n,t}function AS(t,e,n,r){return t=Ni(22,t,r,e),t.elementType=XH,t.lanes=n,t.stateNode={isHidden:!1},t}function vT(t,e,n){return t=Ni(6,t,null,e),t.lanes=n,t}function yT(t,e,n){return e=Ni(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function D8(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jb(0),this.expirationTimes=Jb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jb(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function oP(t,e,n,r,i,s,o,a,l){return t=new D8(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ni(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wx(s),t}function O8(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Sc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function $2(t){if(!t)return Ba;t=t._reactInternals;e:{if(Vu(t)!==t||t.tag!==1)throw Error(oe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Kr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(oe(171))}if(t.tag===1){var n=t.type;if(Kr(n))return $B(t,n,e)}return e}function W2(t,e,n,r,i,s,o,a,l){return t=oP(n,r,!0,t,i,s,o,a,l),t.context=$2(null),n=t.current,r=Er(),i=Ia(n),s=yo(r,i),s.callback=e??null,xa(n,s,i),t.current.lanes=i,dm(t,i,r),qr(t,r),t}function xS(t,e,n,r){var i=e.current,s=Er(),o=Ia(i);return n=$2(n),e.context===null?e.context=n:e.pendingContext=n,e=yo(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=xa(i,e,o),t!==null&&(hs(t,i,o,s),my(t,i,o)),o}function wC(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function $F(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function aP(t,e){$F(t,e),(t=t.alternate)&&$F(t,e)}function M8(){return null}var j2=typeof reportError=="function"?reportError:function(t){console.error(t)};function lP(t){this._internalRoot=t}PS.prototype.render=lP.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(oe(409));xS(t,e,null,null)};PS.prototype.unmount=lP.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;fu(function(){xS(null,t,null,null)}),e[To]=null}};function PS(t){this._internalRoot=t}PS.prototype.unstable_scheduleHydration=function(t){if(t){var e=SB();t={blockedOn:null,target:t,priority:e};for(var n=0;n<la.length&&e!==0&&e<la[n].priority;n++);la.splice(n,0,t),n===0&&bB(t)}};function uP(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function IS(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function WF(){}function F8(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=wC(o);s.call(u)}}var o=W2(e,r,t,0,null,!1,!1,"",WF);return t._reactRootContainer=o,t[To]=o.current,Mf(t.nodeType===8?t.parentNode:t),fu(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=wC(l);a.call(u)}}var l=oP(t,0,!1,null,null,!1,!1,"",WF);return t._reactRootContainer=l,t[To]=l.current,Mf(t.nodeType===8?t.parentNode:t),fu(function(){xS(e,l,n,r)}),l}function DS(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=wC(o);a.call(l)}}xS(e,o,t,i)}else o=F8(n,e,t,i,r);return wC(o)}CB=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Np(e.pendingLanes);n!==0&&(xx(e,n|1),qr(e,rn()),!(st&6)&&(hd=rn()+500,Za()))}break;case 13:fu(function(){var r=Ro(t,1);if(r!==null){var i=Er();hs(r,t,1,i)}}),aP(t,1)}};Px=function(t){if(t.tag===13){var e=Ro(t,134217728);if(e!==null){var n=Er();hs(e,t,134217728,n)}aP(t,134217728)}};wB=function(t){if(t.tag===13){var e=Ia(t),n=Ro(t,e);if(n!==null){var r=Er();hs(n,t,e,r)}aP(t,e)}};SB=function(){return mt};EB=function(t,e){var n=mt;try{return mt=t,e()}finally{mt=n}};Q0=function(t,e,n){switch(e){case"input":if(W0(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=SS(r);if(!i)throw Error(oe(90));ZH(r),W0(r,i)}}}break;case"textarea":tB(t,n);break;case"select":e=n.value,e!=null&&$c(t,!!n.multiple,e,!1)}};lB=nP;uB=fu;var N8={usingClientEntryPoint:!1,Events:[pm,_c,SS,oB,aB,nP]},wp={findFiberByHostInstance:Gl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},L8={bundleType:wp.bundleType,version:wp.version,rendererPackageName:wp.rendererPackageName,rendererConfig:wp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ko.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=hB(t),t===null?null:t.stateNode},findFiberByHostInstance:wp.findFiberByHostInstance||M8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lv.isDisabled&&Lv.supportsFiber)try{vS=Lv.inject(L8),Fs=Lv}catch{}}bi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N8;bi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!uP(e))throw Error(oe(200));return O8(t,e,null,n)};bi.createRoot=function(t,e){if(!uP(t))throw Error(oe(299));var n=!1,r="",i=j2;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=oP(t,1,!1,null,null,n,!1,r,i),t[To]=e.current,Mf(t.nodeType===8?t.parentNode:t),new lP(e)};bi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(oe(188)):(t=Object.keys(t).join(","),Error(oe(268,t)));return t=hB(e),t=t===null?null:t.stateNode,t};bi.flushSync=function(t){return fu(t)};bi.hydrate=function(t,e,n){if(!IS(e))throw Error(oe(200));return DS(null,t,e,!0,n)};bi.hydrateRoot=function(t,e,n){if(!uP(t))throw Error(oe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=j2;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=W2(e,null,t,1,n??null,i,!1,s,o),t[To]=e.current,Mf(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new PS(e)};bi.render=function(t,e,n){if(!IS(e))throw Error(oe(200));return DS(null,t,e,!1,n)};bi.unmountComponentAtNode=function(t){if(!IS(t))throw Error(oe(40));return t._reactRootContainer?(fu(function(){DS(null,null,t,!1,function(){t._reactRootContainer=null,t[To]=null})}),!0):!1};bi.unstable_batchedUpdates=nP;bi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!IS(n))throw Error(oe(200));if(t==null||t._reactInternals===void 0)throw Error(oe(38));return DS(t,e,n,!1,r)};bi.version="18.3.1-next-f1338f8080-20240426";function U2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(U2)}catch(t){console.error(t)}}U2(),UH.exports=bi;var OS=UH.exports;const PR=gt(OS);var jF=OS;L0.createRoot=jF.createRoot,L0.hydrateRoot=jF.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $f(){return $f=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$f.apply(this,arguments)}var ya;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ya||(ya={}));const UF="popstate";function k8(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return IR("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:SC(i)}return V8(e,n,null,t)}function on(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function cP(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function G8(){return Math.random().toString(36).substr(2,8)}function zF(t,e){return{usr:t.state,key:t.key,idx:e}}function IR(t,e,n,r){return n===void 0&&(n=null),$f({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?hh(e):e,{state:n,key:e&&e.key||r||G8()})}function SC(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function hh(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function V8(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=ya.Pop,l=null,u=c();u==null&&(u=0,o.replaceState($f({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function d(){a=ya.Pop;let v=c(),C=v==null?null:v-u;u=v,l&&l({action:a,location:m.location,delta:C})}function h(v,C){a=ya.Push;let y=IR(m.location,v,C);u=c()+1;let S=zF(y,u),_=m.createHref(y);try{o.pushState(S,"",_)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(_)}s&&l&&l({action:a,location:m.location,delta:1})}function f(v,C){a=ya.Replace;let y=IR(m.location,v,C);u=c();let S=zF(y,u),_=m.createHref(y);o.replaceState(S,"",_),s&&l&&l({action:a,location:m.location,delta:0})}function g(v){let C=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof v=="string"?v:SC(v);return y=y.replace(/ $/,"%20"),on(C,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,C)}let m={get action(){return a},get location(){return t(i,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(UF,d),l=v,()=>{i.removeEventListener(UF,d),l=null}},createHref(v){return e(i,v)},createURL:g,encodeLocation(v){let C=g(v);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:h,replace:f,go(v){return o.go(v)}};return m}var KF;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(KF||(KF={}));function H8(t,e,n){return n===void 0&&(n="/"),B8(t,e,n)}function B8(t,e,n,r){let i=typeof e=="string"?hh(e):e,s=dP(i.pathname||"/",n);if(s==null)return null;let o=z2(t);$8(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=eY(s);a=X8(o[l],u)}return a}function z2(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(on(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Oa([r,l.relativePath]),c=n.concat(l);s.children&&s.children.length>0&&(on(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),z2(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:Y8(u,s.index),routesMeta:c})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of K2(s.path))i(s,o,l)}),e}function K2(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=K2(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function $8(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Q8(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const W8=/^:[\w-]+$/,j8=3,U8=2,z8=1,K8=10,q8=-2,qF=t=>t==="*";function Y8(t,e){let n=t.split("/"),r=n.length;return n.some(qF)&&(r+=q8),e&&(r+=U8),n.filter(i=>!qF(i)).reduce((i,s)=>i+(W8.test(s)?j8:s===""?z8:K8),r)}function Q8(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function X8(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=s==="/"?e:e.slice(s.length)||"/",d=J8({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),h=l.route;if(!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Oa([s,d.pathname]),pathnameBase:sY(Oa([s,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(s=Oa([s,d.pathnameBase]))}return o}function J8(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Z8(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,c,d)=>{let{paramName:h,isOptional:f}=c;if(h==="*"){let m=a[d]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const g=a[d];return f&&!g?u[h]=void 0:u[h]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function Z8(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),cP(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function eY(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return cP(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function dP(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const tY=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nY=t=>tY.test(t);function rY(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?hh(t):t,s;if(n)if(nY(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),cP(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=YF(n.substring(1),"/"):s=YF(n,e)}else s=e;return{pathname:s,search:oY(r),hash:aY(i)}}function YF(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function CT(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function iY(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function hP(t,e){let n=iY(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function pP(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=hh(t):(i=$f({},t),on(!i.pathname||!i.pathname.includes("?"),CT("?","pathname","search",i)),on(!i.pathname||!i.pathname.includes("#"),CT("#","pathname","hash",i)),on(!i.search||!i.search.includes("#"),CT("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}a=d>=0?e[d]:"/"}let l=rY(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const Oa=t=>t.join("/").replace(/\/\/+/g,"/"),sY=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),oY=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,aY=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function lY(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const q2=["post","put","patch","delete"];new Set(q2);const uY=["get",...q2];new Set(uY);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wf(){return Wf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wf.apply(this,arguments)}const fP=I.createContext(null),cY=I.createContext(null),el=I.createContext(null),MS=I.createContext(null),Xs=I.createContext({outlet:null,matches:[],isDataRoute:!1}),Y2=I.createContext(null);function dY(t,e){let{relative:n}=e===void 0?{}:e;ph()||on(!1);let{basename:r,navigator:i}=I.useContext(el),{hash:s,pathname:o,search:a}=X2(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Oa([r,o])),i.createHref({pathname:l,search:a,hash:s})}function ph(){return I.useContext(MS)!=null}function fh(){return ph()||on(!1),I.useContext(MS).location}function Q2(t){I.useContext(el).static||I.useLayoutEffect(t)}function gh(){let{isDataRoute:t}=I.useContext(Xs);return t?AY():hY()}function hY(){ph()||on(!1);let t=I.useContext(fP),{basename:e,future:n,navigator:r}=I.useContext(el),{matches:i}=I.useContext(Xs),{pathname:s}=fh(),o=JSON.stringify(hP(i,n.v7_relativeSplatPath)),a=I.useRef(!1);return Q2(()=>{a.current=!0}),I.useCallback(function(u,c){if(c===void 0&&(c={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let d=pP(u,JSON.parse(o),s,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Oa([e,d.pathname])),(c.replace?r.replace:r.push)(d,c.state,c)},[e,r,o,s,t])}const pY=I.createContext(null);function fY(t){let e=I.useContext(Xs).outlet;return e&&I.createElement(pY.Provider,{value:t},e)}function gY(){let{matches:t}=I.useContext(Xs),e=t[t.length-1];return e?e.params:{}}function X2(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=I.useContext(el),{matches:i}=I.useContext(Xs),{pathname:s}=fh(),o=JSON.stringify(hP(i,r.v7_relativeSplatPath));return I.useMemo(()=>pP(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function mY(t,e){return vY(t,e)}function vY(t,e,n,r){ph()||on(!1);let{navigator:i}=I.useContext(el),{matches:s}=I.useContext(Xs),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=fh(),c;if(e){var d;let v=typeof e=="string"?hh(e):e;l==="/"||(d=v.pathname)!=null&&d.startsWith(l)||on(!1),c=v}else c=u;let h=c.pathname||"/",f=h;if(l!=="/"){let v=l.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let g=H8(t,{pathname:f}),m=EY(g&&g.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:Oa([l,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:Oa([l,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),s,n,r);return e&&m?I.createElement(MS.Provider,{value:{location:Wf({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:ya.Pop}},m):m}function yY(){let t=_Y(),e=lY(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),n?I.createElement("pre",{style:i},n):null,null)}const CY=I.createElement(yY,null);class wY extends I.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?I.createElement(Xs.Provider,{value:this.props.routeContext},I.createElement(Y2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function SY(t){let{routeContext:e,match:n,children:r}=t,i=I.useContext(fP);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),I.createElement(Xs.Provider,{value:e},r)}function EY(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);c>=0||on(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let d=o[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:h,errors:f}=n,g=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||g){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,d,h)=>{let f,g=!1,m=null,v=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,m=d.route.errorElement||CY,l&&(u<0&&h===0?(xY("route-fallback"),g=!0,v=null):u===h&&(g=!0,v=d.route.hydrateFallbackElement||null)));let C=e.concat(o.slice(0,h+1)),y=()=>{let S;return f?S=m:g?S=v:d.route.Component?S=I.createElement(d.route.Component,null):d.route.element?S=d.route.element:S=c,I.createElement(SY,{match:d,routeContext:{outlet:c,matches:C,isDataRoute:n!=null},children:S})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?I.createElement(wY,{location:n.location,revalidation:n.revalidation,component:m,error:f,children:y(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):y()},null)}var J2=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(J2||{}),Z2=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Z2||{});function bY(t){let e=I.useContext(fP);return e||on(!1),e}function TY(t){let e=I.useContext(cY);return e||on(!1),e}function RY(t){let e=I.useContext(Xs);return e||on(!1),e}function e$(t){let e=RY(),n=e.matches[e.matches.length-1];return n.route.id||on(!1),n.route.id}function _Y(){var t;let e=I.useContext(Y2),n=TY(),r=e$();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function AY(){let{router:t}=bY(J2.UseNavigateStable),e=e$(Z2.UseNavigateStable),n=I.useRef(!1);return Q2(()=>{n.current=!0}),I.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Wf({fromRouteId:e},s)))},[t,e])}const QF={};function xY(t,e,n){QF[t]||(QF[t]=!0)}function PY(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function t$(t){let{to:e,replace:n,state:r,relative:i}=t;ph()||on(!1);let{future:s,static:o}=I.useContext(el),{matches:a}=I.useContext(Xs),{pathname:l}=fh(),u=gh(),c=pP(e,hP(a,s.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(c);return I.useEffect(()=>u(JSON.parse(d),{replace:n,state:r,relative:i}),[u,d,i,n,r]),null}function IY(t){return fY(t.context)}function na(t){on(!1)}function DY(t){let{basename:e="/",children:n=null,location:r,navigationType:i=ya.Pop,navigator:s,static:o=!1,future:a}=t;ph()&&on(!1);let l=e.replace(/^\/*/,"/"),u=I.useMemo(()=>({basename:l,navigator:s,static:o,future:Wf({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=hh(r));let{pathname:c="/",search:d="",hash:h="",state:f=null,key:g="default"}=r,m=I.useMemo(()=>{let v=dP(c,l);return v==null?null:{location:{pathname:v,search:d,hash:h,state:f,key:g},navigationType:i}},[l,c,d,h,f,g,i]);return m==null?null:I.createElement(el.Provider,{value:u},I.createElement(MS.Provider,{children:n,value:m}))}function OY(t){let{children:e,location:n}=t;return mY(DR(e),n)}new Promise(()=>{});function DR(t,e){e===void 0&&(e=[]);let n=[];return I.Children.forEach(t,(r,i)=>{if(!I.isValidElement(r))return;let s=[...e,i];if(r.type===I.Fragment){n.push.apply(n,DR(r.props.children,s));return}r.type!==na&&on(!1),!r.props.index||!r.props.children||on(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=DR(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function OR(){return OR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},OR.apply(this,arguments)}function MY(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function FY(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function NY(t,e){return t.button===0&&(!e||e==="_self")&&!FY(t)}const LY=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],kY="6";try{window.__reactRouterVersion=kY}catch{}const GY="startTransition",XF=_9[GY];function VY(t){let{basename:e,children:n,future:r,window:i}=t,s=I.useRef();s.current==null&&(s.current=k8({window:i,v5Compat:!0}));let o=s.current,[a,l]=I.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},c=I.useCallback(d=>{u&&XF?XF(()=>l(d)):l(d)},[l,u]);return I.useLayoutEffect(()=>o.listen(c),[o,c]),I.useEffect(()=>PY(r),[r]),I.createElement(DY,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const HY=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",BY=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,JF=I.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:d}=e,h=MY(e,LY),{basename:f}=I.useContext(el),g,m=!1;if(typeof u=="string"&&BY.test(u)&&(g=u,HY))try{let S=new URL(window.location.href),_=u.startsWith("//")?new URL(S.protocol+u):new URL(u),E=dP(_.pathname,f);_.origin===S.origin&&E!=null?u=E+_.search+_.hash:m=!0}catch{}let v=dY(u,{relative:i}),C=$Y(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i,viewTransition:d});function y(S){r&&r(S),S.defaultPrevented||C(S)}return I.createElement("a",OR({},h,{href:g||v,onClick:m||s?r:y,ref:n,target:l}))});var ZF;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ZF||(ZF={}));var eN;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(eN||(eN={}));function $Y(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=gh(),u=fh(),c=X2(t,{relative:o});return I.useCallback(d=>{if(NY(d,n)){d.preventDefault();let h=r!==void 0?r:SC(u)===SC(c);l(t,{replace:h,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,c,r,i,n,t,s,o,a])}var tN={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n$=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},WY=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},r$={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=s>>2,d=(s&3)<<4|a>>4;let h=(a&15)<<2|u>>6,f=u&63;l||(f=64,o||(h=64)),r.push(n[c],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(n$(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):WY(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new jY;const h=s<<2|a>>4;if(r.push(h),u!==64){const f=a<<4&240|u>>2;if(r.push(f),d!==64){const g=u<<6&192|d;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class jY extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const UY=function(t){const e=n$(t);return r$.encodeByteArray(e,!0)},EC=function(t){return UY(t).replace(/\./g,"")},i$=function(t){try{return r$.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zY(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KY=()=>zY().__FIREBASE_DEFAULTS__,qY=()=>{if(typeof process>"u"||typeof tN>"u")return;const t=tN.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},YY=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&i$(t[1]);return e&&JSON.parse(e)},FS=()=>{try{return KY()||qY()||YY()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},s$=t=>{var e,n;return(n=(e=FS())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},QY=t=>{const e=s$(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},o$=()=>{var t;return(t=FS())===null||t===void 0?void 0:t.config},a$=t=>{var e;return(e=FS())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XY{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JY(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[EC(JSON.stringify(n)),EC(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZY(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cr())}function e7(){var t;const e=(t=FS())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function t7(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function n7(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function r7(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function i7(){const t=cr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function s7(){return!e7()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function o7(){try{return typeof indexedDB=="object"}catch{return!1}}function a7(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l7="FirebaseError";class Go extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=l7,Object.setPrototypeOf(this,Go.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gm.prototype.create)}}class gm{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?u7(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Go(i,a,r)}}function u7(t,e){return t.replace(c7,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const c7=/\{\$([^}]+)}/g;function d7(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function bC(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(nN(s)&&nN(o)){if(!bC(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function nN(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mm(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function kp(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Gp(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function h7(t,e){const n=new p7(t,e);return n.subscribe.bind(n)}class p7{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");f7(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=wT),i.error===void 0&&(i.error=wT),i.complete===void 0&&(i.complete=wT);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function f7(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function wT(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(t){return t&&t._delegate?t._delegate:t}let gu=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _l="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g7{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new XY;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(v7(e))try{this.getOrInitializeService({instanceIdentifier:_l})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=_l){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_l){return this.instances.has(e)}getOptions(e=_l){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:m7(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=_l){return this.component?this.component.multipleInstances?e:_l:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function m7(t){return t===_l?void 0:t}function v7(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y7{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new g7(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Xe||(Xe={}));const C7={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},w7=Xe.INFO,S7={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},E7=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=S7[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let gP=class{constructor(e){this.name=e,this._logLevel=w7,this._logHandler=E7,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?C7[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}};const b7=(t,e)=>e.some(n=>t instanceof n);let rN,iN;function T7(){return rN||(rN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function R7(){return iN||(iN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const l$=new WeakMap,MR=new WeakMap,u$=new WeakMap,ST=new WeakMap,mP=new WeakMap;function _7(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ma(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&l$.set(n,t)}).catch(()=>{}),mP.set(e,t),e}function A7(t){if(MR.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});MR.set(t,e)}let FR={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return MR.get(t);if(e==="objectStoreNames")return t.objectStoreNames||u$.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ma(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function x7(t){FR=t(FR)}function P7(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ET(this),e,...n);return u$.set(r,e.sort?e.sort():[e]),Ma(r)}:R7().includes(t)?function(...e){return t.apply(ET(this),e),Ma(l$.get(this))}:function(...e){return Ma(t.apply(ET(this),e))}}function I7(t){return typeof t=="function"?P7(t):(t instanceof IDBTransaction&&A7(t),b7(t,T7())?new Proxy(t,FR):t)}function Ma(t){if(t instanceof IDBRequest)return _7(t);if(ST.has(t))return ST.get(t);const e=I7(t);return e!==t&&(ST.set(t,e),mP.set(e,t)),e}const ET=t=>mP.get(t);function D7(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Ma(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ma(o.result),l.oldVersion,l.newVersion,Ma(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const O7=["get","getKey","getAll","getAllKeys","count"],M7=["put","add","delete","clear"],bT=new Map;function sN(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bT.get(e))return bT.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=M7.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||O7.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return bT.set(e,s),s}x7(t=>({...t,get:(e,n,r)=>sN(e,n)||t.get(e,n,r),has:(e,n)=>!!sN(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F7{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(N7(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function N7(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const NR="@firebase/app",oN="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao=new gP("@firebase/app"),L7="@firebase/app-compat",k7="@firebase/analytics-compat",G7="@firebase/analytics",V7="@firebase/app-check-compat",H7="@firebase/app-check",B7="@firebase/auth",$7="@firebase/auth-compat",W7="@firebase/database",j7="@firebase/data-connect",U7="@firebase/database-compat",z7="@firebase/functions",K7="@firebase/functions-compat",q7="@firebase/installations",Y7="@firebase/installations-compat",Q7="@firebase/messaging",X7="@firebase/messaging-compat",J7="@firebase/performance",Z7="@firebase/performance-compat",eQ="@firebase/remote-config",tQ="@firebase/remote-config-compat",nQ="@firebase/storage",rQ="@firebase/storage-compat",iQ="@firebase/firestore",sQ="@firebase/vertexai-preview",oQ="@firebase/firestore-compat",aQ="firebase",lQ="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR="[DEFAULT]",uQ={[NR]:"fire-core",[L7]:"fire-core-compat",[G7]:"fire-analytics",[k7]:"fire-analytics-compat",[H7]:"fire-app-check",[V7]:"fire-app-check-compat",[B7]:"fire-auth",[$7]:"fire-auth-compat",[W7]:"fire-rtdb",[j7]:"fire-data-connect",[U7]:"fire-rtdb-compat",[z7]:"fire-fn",[K7]:"fire-fn-compat",[q7]:"fire-iid",[Y7]:"fire-iid-compat",[Q7]:"fire-fcm",[X7]:"fire-fcm-compat",[J7]:"fire-perf",[Z7]:"fire-perf-compat",[eQ]:"fire-rc",[tQ]:"fire-rc-compat",[nQ]:"fire-gcs",[rQ]:"fire-gcs-compat",[iQ]:"fire-fst",[oQ]:"fire-fst-compat",[sQ]:"fire-vertex","fire-js":"fire-js",[aQ]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=new Map,cQ=new Map,kR=new Map;function aN(t,e){try{t.container.addComponent(e)}catch(n){Ao.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function pd(t){const e=t.name;if(kR.has(e))return Ao.debug(`There were multiple attempts to register component ${e}.`),!1;kR.set(e,t);for(const n of TC.values())aN(n,t);for(const n of cQ.values())aN(n,t);return!0}function vP(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function co(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dQ={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fa=new gm("app","Firebase",dQ);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hQ{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new gu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh=lQ;function c$(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:LR,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Fa.create("bad-app-name",{appName:String(i)});if(n||(n=o$()),!n)throw Fa.create("no-options");const s=TC.get(i);if(s){if(bC(n,s.options)&&bC(r,s.config))return s;throw Fa.create("duplicate-app",{appName:i})}const o=new y7(i);for(const l of kR.values())o.addComponent(l);const a=new hQ(n,r,o);return TC.set(i,a),a}function d$(t=LR){const e=TC.get(t);if(!e&&t===LR&&o$())return c$();if(!e)throw Fa.create("no-app",{appName:t});return e}function Na(t,e,n){var r;let i=(r=uQ[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ao.warn(a.join(" "));return}pd(new gu(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pQ="firebase-heartbeat-database",fQ=1,jf="firebase-heartbeat-store";let TT=null;function h$(){return TT||(TT=D7(pQ,fQ,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(jf)}catch(n){console.warn(n)}}}}).catch(t=>{throw Fa.create("idb-open",{originalErrorMessage:t.message})})),TT}async function gQ(t){try{const n=(await h$()).transaction(jf),r=await n.objectStore(jf).get(p$(t));return await n.done,r}catch(e){if(e instanceof Go)Ao.warn(e.message);else{const n=Fa.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ao.warn(n.message)}}}async function lN(t,e){try{const r=(await h$()).transaction(jf,"readwrite");await r.objectStore(jf).put(e,p$(t)),await r.done}catch(n){if(n instanceof Go)Ao.warn(n.message);else{const r=Fa.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ao.warn(r.message)}}}function p$(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mQ=1024,vQ=30*24*60*60*1e3;class yQ{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new wQ(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=uN();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=vQ}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ao.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=uN(),{heartbeatsToSend:r,unsentEntries:i}=CQ(this._heartbeatsCache.heartbeats),s=EC(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Ao.warn(n),""}}}function uN(){return new Date().toISOString().substring(0,10)}function CQ(t,e=mQ){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),cN(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),cN(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class wQ{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return o7()?a7().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await gQ(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return lN(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return lN(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function cN(t){return EC(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SQ(t){pd(new gu("platform-logger",e=>new F7(e),"PRIVATE")),pd(new gu("heartbeat",e=>new yQ(e),"PRIVATE")),Na(NR,oN,t),Na(NR,oN,"esm2017"),Na("fire-js","")}SQ("");function yP(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function f$(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const EQ=f$,g$=new gm("auth","Firebase",f$());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC=new gP("@firebase/auth");function bQ(t,...e){RC.logLevel<=Xe.WARN&&RC.warn(`Auth (${mh}): ${t}`,...e)}function by(t,...e){RC.logLevel<=Xe.ERROR&&RC.error(`Auth (${mh}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(t,...e){throw CP(t,...e)}function Ls(t,...e){return CP(t,...e)}function m$(t,e,n){const r=Object.assign(Object.assign({},EQ()),{[e]:n});return new gm("auth","Firebase",r).create(e,{appName:t.name})}function La(t){return m$(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function CP(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return g$.create(t,...e)}function De(t,e,...n){if(!t)throw CP(e,...n)}function ho(t){const e="INTERNAL ASSERTION FAILED: "+t;throw by(e),new Error(e)}function xo(t,e){t||ho(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function TQ(){return dN()==="http:"||dN()==="https:"}function dN(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RQ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(TQ()||n7()||"connection"in navigator)?navigator.onLine:!0}function _Q(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,n){this.shortDelay=e,this.longDelay=n,xo(n>e,"Short delay should be less than long delay!"),this.isMobile=ZY()||r7()}get(){return RQ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wP(t,e){xo(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v${static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ho("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ho("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ho("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AQ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xQ=new vm(3e4,6e4);function Hu(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function tl(t,e,n,r,i={}){return y$(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=mm(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},s);return t7()||(u.referrerPolicy="no-referrer"),v$.fetch()(C$(t,t.config.apiHost,n,a),u)})}async function y$(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},AQ),e);try{const i=new IQ(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw kv(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw kv(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw kv(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw kv(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw m$(t,c,u);ms(t,c)}}catch(i){if(i instanceof Go)throw i;ms(t,"network-request-failed",{message:String(i)})}}async function NS(t,e,n,r,i={}){const s=await tl(t,e,n,r,i);return"mfaPendingCredential"in s&&ms(t,"multi-factor-auth-required",{_serverResponse:s}),s}function C$(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?wP(t.config,i):`${t.config.apiScheme}://${i}`}function PQ(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class IQ{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ls(this.auth,"network-request-failed")),xQ.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function kv(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ls(t,e,r);return i.customData._tokenResponse=n,i}function hN(t){return t!==void 0&&t.enterprise!==void 0}class DQ{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return PQ(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function OQ(t,e){return tl(t,"GET","/v2/recaptchaConfig",Hu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MQ(t,e){return tl(t,"POST","/v1/accounts:delete",e)}async function w$(t,e){return tl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function FQ(t,e=!1){const n=br(t),r=await n.getIdToken(e),i=SP(r);De(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:cf(RT(i.auth_time)),issuedAtTime:cf(RT(i.iat)),expirationTime:cf(RT(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function RT(t){return Number(t)*1e3}function SP(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return by("JWT malformed, contained fewer than 3 sections"),null;try{const i=i$(n);return i?JSON.parse(i):(by("Failed to decode base64 JWT payload"),null)}catch(i){return by("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function pN(t){const e=SP(t);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uf(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Go&&NQ(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function NQ({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LQ{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=cf(this.lastLoginAt),this.creationTime=cf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _C(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Uf(t,w$(n,{idToken:r}));De(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?S$(s.providerUserInfo):[],a=GQ(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new VR(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function kQ(t){const e=br(t);await _C(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function GQ(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function S$(t){return t.map(e=>{var{providerId:n}=e,r=yP(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VQ(t,e){const n=await y$(t,{},async()=>{const r=mm({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=C$(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",v$.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function HQ(t,e){return tl(t,"POST","/v2/accounts:revokeToken",Hu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):pN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){De(e.length!==0,"internal-error");const n=pN(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await VQ(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new qc;return r&&(De(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(De(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(De(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qc,this.toJSON())}_performRefresh(){return ho("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ea(t,e){De(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class po{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=yP(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new LQ(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new VR(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Uf(this,this.stsTokenManager.getToken(this.auth,e));return De(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return FQ(this,e)}reload(){return kQ(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new po(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await _C(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(co(this.auth.app))return Promise.reject(La(this.auth));const e=await this.getIdToken();return await Uf(this,MQ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,c;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,v=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,C=(u=n.createdAt)!==null&&u!==void 0?u:void 0,y=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:S,emailVerified:_,isAnonymous:E,providerData:R,stsTokenManager:b}=n;De(S&&b,e,"internal-error");const A=qc.fromJSON(this.name,b);De(typeof S=="string",e,"internal-error"),ea(d,e.name),ea(h,e.name),De(typeof _=="boolean",e,"internal-error"),De(typeof E=="boolean",e,"internal-error"),ea(f,e.name),ea(g,e.name),ea(m,e.name),ea(v,e.name),ea(C,e.name),ea(y,e.name);const P=new po({uid:S,auth:e,email:h,emailVerified:_,displayName:d,isAnonymous:E,photoURL:g,phoneNumber:f,tenantId:m,stsTokenManager:A,createdAt:C,lastLoginAt:y});return R&&Array.isArray(R)&&(P.providerData=R.map(F=>Object.assign({},F))),v&&(P._redirectEventId=v),P}static async _fromIdTokenResponse(e,n,r=!1){const i=new qc;i.updateFromServerResponse(n);const s=new po({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await _C(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];De(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?S$(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new qc;a.updateFromIdToken(r);const l=new po({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new VR(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN=new Map;function fo(t){xo(t instanceof Function,"Expected a class definition");let e=fN.get(t);return e?(xo(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,fN.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E${constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}E$.type="NONE";const gN=E$;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(t,e,n){return`firebase:${t}:${e}:${n}`}class Yc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Ty(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ty("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?po._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Yc(fo(gN),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||fo(gN);const o=Ty(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){const d=po._fromJSON(e,c);u!==s&&(a=d),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Yc(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Yc(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_$(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(b$(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(x$(e))return"Blackberry";if(P$(e))return"Webos";if(T$(e))return"Safari";if((e.includes("chrome/")||R$(e))&&!e.includes("edge/"))return"Chrome";if(A$(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function b$(t=cr()){return/firefox\//i.test(t)}function T$(t=cr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function R$(t=cr()){return/crios\//i.test(t)}function _$(t=cr()){return/iemobile/i.test(t)}function A$(t=cr()){return/android/i.test(t)}function x$(t=cr()){return/blackberry/i.test(t)}function P$(t=cr()){return/webos/i.test(t)}function EP(t=cr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function BQ(t=cr()){var e;return EP(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function $Q(){return i7()&&document.documentMode===10}function I$(t=cr()){return EP(t)||A$(t)||P$(t)||x$(t)||/windows phone/i.test(t)||_$(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D$(t,e=[]){let n;switch(t){case"Browser":n=mN(cr());break;case"Worker":n=`${mN(cr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${mh}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WQ{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jQ(t,e={}){return tl(t,"GET","/v2/passwordPolicy",Hu(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UQ=6;class zQ{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:UQ,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KQ{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vN(this),this.idTokenSubscription=new vN(this),this.beforeStateQueue=new WQ(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=g$,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=fo(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Yc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await w$(this,{idToken:e}),r=await po._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(co(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await _C(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_Q()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(co(this.app))return Promise.reject(La(this));const n=e?br(e):null;return n&&De(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return co(this.app)?Promise.reject(La(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return co(this.app)?Promise.reject(La(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jQ(this),n=new zQ(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new gm("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await HQ(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&fo(e)||this._popupRedirectResolver;De(n,this,"argument-error"),this.redirectPersistenceManager=await Yc.create(this,[fo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=D$(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&bQ(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function vh(t){return br(t)}class vN{constructor(e){this.auth=e,this.observer=null,this.addObserver=h7(n=>this.observer=n)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let LS={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qQ(t){LS=t}function O$(t){return LS.loadJS(t)}function YQ(){return LS.recaptchaEnterpriseScript}function QQ(){return LS.gapiScript}function XQ(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const JQ="recaptcha-enterprise",ZQ="NO_RECAPTCHA";class eX{constructor(e){this.type=JQ,this.auth=vh(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{OQ(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new DQ(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;hN(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(ZQ)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&hN(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=YQ();l.length!==0&&(l+=a),O$(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function yN(t,e,n,r=!1){const i=new eX(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function CN(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await yN(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await yN(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tX(t,e){const n=vP(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(bC(s,e??{}))return i;ms(i,"already-initialized")}return n.initialize({options:e})}function nX(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(fo);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function rX(t,e,n){const r=vh(t);De(r._canInitEmulator,r,"emulator-config-failed"),De(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=M$(e),{host:o,port:a}=iX(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),sX()}function M$(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function iX(t){const e=M$(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:wN(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:wN(o)}}}function wN(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function sX(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ho("not implemented")}_getIdTokenResponse(e){return ho("not implemented")}_linkToIdToken(e,n){return ho("not implemented")}_getReauthenticationResolver(e){return ho("not implemented")}}async function oX(t,e){return tl(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aX(t,e){return NS(t,"POST","/v1/accounts:signInWithPassword",Hu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lX(t,e){return NS(t,"POST","/v1/accounts:signInWithEmailLink",Hu(t,e))}async function uX(t,e){return NS(t,"POST","/v1/accounts:signInWithEmailLink",Hu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf extends bP{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new zf(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new zf(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return CN(e,n,"signInWithPassword",aX);case"emailLink":return lX(e,{email:this._email,oobCode:this._password});default:ms(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return CN(e,r,"signUpPassword",oX);case"emailLink":return uX(e,{idToken:n,email:this._email,oobCode:this._password});default:ms(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qc(t,e){return NS(t,"POST","/v1/accounts:signInWithIdp",Hu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cX="http://localhost";class mu extends bP{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new mu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ms("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=yP(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new mu(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Qc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Qc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Qc(e,n)}buildRequest(){const e={requestUri:cX,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=mm(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dX(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function hX(t){const e=kp(Gp(t)).link,n=e?kp(Gp(e)).deep_link_id:null,r=kp(Gp(t)).deep_link_id;return(r?kp(Gp(r)).link:null)||r||n||e||t}class TP{constructor(e){var n,r,i,s,o,a;const l=kp(Gp(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,c=(r=l.oobCode)!==null&&r!==void 0?r:null,d=dX((i=l.mode)!==null&&i!==void 0?i:null);De(u&&c&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=c,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=hX(e);try{return new TP(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(){this.providerId=yh.PROVIDER_ID}static credential(e,n){return zf._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=TP.parseLink(n);return De(r,"argument-error"),zf._fromEmailAndCode(e,r.code,r.tenantId)}}yh.PROVIDER_ID="password";yh.EMAIL_PASSWORD_SIGN_IN_METHOD="password";yh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F${constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym extends F${constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca extends ym{constructor(){super("facebook.com")}static credential(e){return mu._fromParams({providerId:ca.PROVIDER_ID,signInMethod:ca.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ca.credentialFromTaggedObject(e)}static credentialFromError(e){return ca.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ca.credential(e.oauthAccessToken)}catch{return null}}}ca.FACEBOOK_SIGN_IN_METHOD="facebook.com";ca.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da extends ym{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return mu._fromParams({providerId:da.PROVIDER_ID,signInMethod:da.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return da.credentialFromTaggedObject(e)}static credentialFromError(e){return da.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return da.credential(n,r)}catch{return null}}}da.GOOGLE_SIGN_IN_METHOD="google.com";da.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha extends ym{constructor(){super("github.com")}static credential(e){return mu._fromParams({providerId:ha.PROVIDER_ID,signInMethod:ha.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ha.credentialFromTaggedObject(e)}static credentialFromError(e){return ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ha.credential(e.oauthAccessToken)}catch{return null}}}ha.GITHUB_SIGN_IN_METHOD="github.com";ha.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa extends ym{constructor(){super("twitter.com")}static credential(e,n){return mu._fromParams({providerId:pa.PROVIDER_ID,signInMethod:pa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return pa.credentialFromTaggedObject(e)}static credentialFromError(e){return pa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return pa.credential(n,r)}catch{return null}}}pa.TWITTER_SIGN_IN_METHOD="twitter.com";pa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await po._fromIdTokenResponse(e,r,i),o=SN(r);return new fd({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=SN(r);return new fd({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function SN(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC extends Go{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,AC.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new AC(e,n,r,i)}}function N$(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?AC._fromErrorAndOperation(t,s,e,r):s})}async function pX(t,e,n=!1){const r=await Uf(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return fd._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fX(t,e,n=!1){const{auth:r}=t;if(co(r.app))return Promise.reject(La(r));const i="reauthenticate";try{const s=await Uf(t,N$(r,i,e,t),n);De(s.idToken,r,"internal-error");const o=SP(s.idToken);De(o,r,"internal-error");const{sub:a}=o;return De(t.uid===a,r,"user-mismatch"),fd._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ms(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L$(t,e,n=!1){if(co(t.app))return Promise.reject(La(t));const r="signIn",i=await N$(t,r,e),s=await fd._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function gX(t,e){return L$(vh(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mX(t){const e=vh(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function vX(t,e,n){return co(t.app)?Promise.reject(La(t)):gX(br(t),yh.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&mX(t),r})}function yX(t,e,n,r){return br(t).onIdTokenChanged(e,n,r)}function CX(t,e,n){return br(t).beforeAuthStateChanged(e,n)}function wX(t,e,n,r){return br(t).onAuthStateChanged(e,n,r)}function SX(t){return br(t).signOut()}const xC="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k${constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(xC,"1"),this.storage.removeItem(xC),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EX=1e3,bX=10;class G$ extends k${constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=I$(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);$Q()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,bX):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},EX)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}G$.type="LOCAL";const TX=G$;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V$ extends k${constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}V$.type="SESSION";const H$=V$;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RX(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new kS(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await RX(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}kS.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RP(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _X{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=RP("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const h=d;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(){return window}function AX(t){ks().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B$(){return typeof ks().WorkerGlobalScope<"u"&&typeof ks().importScripts=="function"}async function xX(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function PX(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function IX(){return B$()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $$="firebaseLocalStorageDb",DX=1,PC="firebaseLocalStorage",W$="fbase_key";class Cm{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function GS(t,e){return t.transaction([PC],e?"readwrite":"readonly").objectStore(PC)}function OX(){const t=indexedDB.deleteDatabase($$);return new Cm(t).toPromise()}function HR(){const t=indexedDB.open($$,DX);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(PC,{keyPath:W$})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(PC)?e(r):(r.close(),await OX(),e(await HR()))})})}async function EN(t,e,n){const r=GS(t,!0).put({[W$]:e,value:n});return new Cm(r).toPromise()}async function MX(t,e){const n=GS(t,!1).get(e),r=await new Cm(n).toPromise();return r===void 0?null:r.value}function bN(t,e){const n=GS(t,!0).delete(e);return new Cm(n).toPromise()}const FX=800,NX=3;class j${constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await HR(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>NX)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return B$()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kS._getInstance(IX()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await xX(),!this.activeServiceWorker)return;this.sender=new _X(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||PX()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await HR();return await EN(e,xC,"1"),await bN(e,xC),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>EN(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>MX(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>bN(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=GS(i,!1).getAll();return new Cm(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),FX)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}j$.type="LOCAL";const LX=j$;new vm(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kX(t,e){return e?fo(e):(De(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P extends bP{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Qc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Qc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function GX(t){return L$(t.auth,new _P(t),t.bypassAuthState)}function VX(t){const{auth:e,user:n}=t;return De(n,e,"internal-error"),fX(n,new _P(t),t.bypassAuthState)}async function HX(t){const{auth:e,user:n}=t;return De(n,e,"internal-error"),pX(n,new _P(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U${constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return GX;case"linkViaPopup":case"linkViaRedirect":return HX;case"reauthViaPopup":case"reauthViaRedirect":return VX;default:ms(this.auth,"internal-error")}}resolve(e){xo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BX=new vm(2e3,1e4);class Mc extends U${constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Mc.currentPopupAction&&Mc.currentPopupAction.cancel(),Mc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){xo(this.filter.length===1,"Popup operations only handle one event");const e=RP();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ls(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ls(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Mc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ls(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,BX.get())};e()}}Mc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $X="pendingRedirect",Ry=new Map;class WX extends U${constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ry.get(this.auth._key());if(!e){try{const r=await jX(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ry.set(this.auth._key(),e)}return this.bypassAuthState||Ry.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jX(t,e){const n=KX(e),r=zX(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function UX(t,e){Ry.set(t._key(),e)}function zX(t){return fo(t._redirectPersistence)}function KX(t){return Ty($X,t.config.apiKey,t.name)}async function qX(t,e,n=!1){if(co(t.app))return Promise.reject(La(t));const r=vh(t),i=kX(r,e),o=await new WX(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YX=10*60*1e3;class QX{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!XX(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!z$(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ls(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=YX&&this.cachedEventUids.clear(),this.cachedEventUids.has(TN(e))}saveEventToCache(e){this.cachedEventUids.add(TN(e)),this.lastProcessedEventTime=Date.now()}}function TN(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function z$({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function XX(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return z$(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JX(t,e={}){return tl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,eJ=/^https?/;async function tJ(t){if(t.config.emulator)return;const{authorizedDomains:e}=await JX(t);for(const n of e)try{if(nJ(n))return}catch{}ms(t,"unauthorized-domain")}function nJ(t){const e=GR(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!eJ.test(n))return!1;if(ZX.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rJ=new vm(3e4,6e4);function RN(){const t=ks().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function iJ(t){return new Promise((e,n)=>{var r,i,s;function o(){RN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{RN(),n(Ls(t,"network-request-failed"))},timeout:rJ.get()})}if(!((i=(r=ks().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ks().gapi)===null||s===void 0)&&s.load)o();else{const a=XQ("iframefcb");return ks()[a]=()=>{gapi.load?o():n(Ls(t,"network-request-failed"))},O$(`${QQ()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw _y=null,e})}let _y=null;function sJ(t){return _y=_y||iJ(t),_y}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oJ=new vm(5e3,15e3),aJ="__/auth/iframe",lJ="emulator/auth/iframe",uJ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cJ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dJ(t){const e=t.config;De(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?wP(e,lJ):`https://${t.config.authDomain}/${aJ}`,r={apiKey:e.apiKey,appName:t.name,v:mh},i=cJ.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${mm(r).slice(1)}`}async function hJ(t){const e=await sJ(t),n=ks().gapi;return De(n,t,"internal-error"),e.open({where:document.body,url:dJ(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uJ,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Ls(t,"network-request-failed"),a=ks().setTimeout(()=>{s(o)},oJ.get());function l(){ks().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pJ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fJ=500,gJ=600,mJ="_blank",vJ="http://localhost";class _N{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function yJ(t,e,n,r=fJ,i=gJ){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},pJ),{width:r.toString(),height:i.toString(),top:s,left:o}),u=cr().toLowerCase();n&&(a=R$(u)?mJ:n),b$(u)&&(e=e||vJ,l.scrollbars="yes");const c=Object.entries(l).reduce((h,[f,g])=>`${h}${f}=${g},`,"");if(BQ(u)&&a!=="_self")return CJ(e||"",a),new _N(null);const d=window.open(e||"",a,c);De(d,t,"popup-blocked");try{d.focus()}catch{}return new _N(d)}function CJ(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wJ="__/auth/handler",SJ="emulator/auth/handler",EJ=encodeURIComponent("fac");async function AN(t,e,n,r,i,s){De(t.config.authDomain,t,"auth-domain-config-required"),De(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:mh,eventId:i};if(e instanceof F$){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",d7(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,d]of Object.entries({}))o[c]=d}if(e instanceof ym){const c=e.getScopes().filter(d=>d!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await t._getAppCheckToken(),u=l?`#${EJ}=${encodeURIComponent(l)}`:"";return`${bJ(t)}?${mm(a).slice(1)}${u}`}function bJ({config:t}){return t.emulator?wP(t,SJ):`https://${t.authDomain}/${wJ}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="webStorageSupport";class TJ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=H$,this._completeRedirectFn=qX,this._overrideRedirectResult=UX}async _openPopup(e,n,r,i){var s;xo((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await AN(e,n,r,GR(),i);return yJ(e,o,RP())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await AN(e,n,r,GR(),i);return AX(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(xo(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await hJ(e),r=new QX(e);return n.register("authEvent",i=>(De(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(_T,{type:_T},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[_T];o!==void 0&&n(!!o),ms(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=tJ(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return I$()||T$()||EP()}}const RJ=TJ;var xN="@firebase/auth",PN="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _J{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AJ(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xJ(t){pd(new gu("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;De(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:D$(t)},u=new KQ(r,i,s,l);return nX(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),pd(new gu("auth-internal",e=>{const n=vh(e.getProvider("auth").getImmediate());return(r=>new _J(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Na(xN,PN,AJ(t)),Na(xN,PN,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PJ=5*60,IJ=a$("authIdTokenMaxAge")||PJ;let IN=null;const DJ=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>IJ)return;const i=n==null?void 0:n.token;IN!==i&&(IN=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function OJ(t=d$()){const e=vP(t,"auth");if(e.isInitialized())return e.getImmediate();const n=tX(t,{popupRedirectResolver:RJ,persistence:[LX,TX,H$]}),r=a$("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=DJ(s.toString());CX(n,o,()=>o(n.currentUser)),yX(n,a=>o(a))}}const i=s$("auth");return i&&rX(n,`http://${i}`),n}function MJ(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}qQ({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Ls("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",MJ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xJ("Browser");var FJ="firebase",NJ="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Na(FJ,NJ,"app");var DN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jl,K$;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,A){function P(){}P.prototype=A.prototype,b.D=A.prototype,b.prototype=new P,b.prototype.constructor=b,b.C=function(F,k,L){for(var N=Array(arguments.length-2),W=2;W<arguments.length;W++)N[W-2]=arguments[W];return A.prototype[k].apply(F,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,A,P){P||(P=0);var F=Array(16);if(typeof A=="string")for(var k=0;16>k;++k)F[k]=A.charCodeAt(P++)|A.charCodeAt(P++)<<8|A.charCodeAt(P++)<<16|A.charCodeAt(P++)<<24;else for(k=0;16>k;++k)F[k]=A[P++]|A[P++]<<8|A[P++]<<16|A[P++]<<24;A=b.g[0],P=b.g[1],k=b.g[2];var L=b.g[3],N=A+(L^P&(k^L))+F[0]+3614090360&4294967295;A=P+(N<<7&4294967295|N>>>25),N=L+(k^A&(P^k))+F[1]+3905402710&4294967295,L=A+(N<<12&4294967295|N>>>20),N=k+(P^L&(A^P))+F[2]+606105819&4294967295,k=L+(N<<17&4294967295|N>>>15),N=P+(A^k&(L^A))+F[3]+3250441966&4294967295,P=k+(N<<22&4294967295|N>>>10),N=A+(L^P&(k^L))+F[4]+4118548399&4294967295,A=P+(N<<7&4294967295|N>>>25),N=L+(k^A&(P^k))+F[5]+1200080426&4294967295,L=A+(N<<12&4294967295|N>>>20),N=k+(P^L&(A^P))+F[6]+2821735955&4294967295,k=L+(N<<17&4294967295|N>>>15),N=P+(A^k&(L^A))+F[7]+4249261313&4294967295,P=k+(N<<22&4294967295|N>>>10),N=A+(L^P&(k^L))+F[8]+1770035416&4294967295,A=P+(N<<7&4294967295|N>>>25),N=L+(k^A&(P^k))+F[9]+2336552879&4294967295,L=A+(N<<12&4294967295|N>>>20),N=k+(P^L&(A^P))+F[10]+4294925233&4294967295,k=L+(N<<17&4294967295|N>>>15),N=P+(A^k&(L^A))+F[11]+2304563134&4294967295,P=k+(N<<22&4294967295|N>>>10),N=A+(L^P&(k^L))+F[12]+1804603682&4294967295,A=P+(N<<7&4294967295|N>>>25),N=L+(k^A&(P^k))+F[13]+4254626195&4294967295,L=A+(N<<12&4294967295|N>>>20),N=k+(P^L&(A^P))+F[14]+2792965006&4294967295,k=L+(N<<17&4294967295|N>>>15),N=P+(A^k&(L^A))+F[15]+1236535329&4294967295,P=k+(N<<22&4294967295|N>>>10),N=A+(k^L&(P^k))+F[1]+4129170786&4294967295,A=P+(N<<5&4294967295|N>>>27),N=L+(P^k&(A^P))+F[6]+3225465664&4294967295,L=A+(N<<9&4294967295|N>>>23),N=k+(A^P&(L^A))+F[11]+643717713&4294967295,k=L+(N<<14&4294967295|N>>>18),N=P+(L^A&(k^L))+F[0]+3921069994&4294967295,P=k+(N<<20&4294967295|N>>>12),N=A+(k^L&(P^k))+F[5]+3593408605&4294967295,A=P+(N<<5&4294967295|N>>>27),N=L+(P^k&(A^P))+F[10]+38016083&4294967295,L=A+(N<<9&4294967295|N>>>23),N=k+(A^P&(L^A))+F[15]+3634488961&4294967295,k=L+(N<<14&4294967295|N>>>18),N=P+(L^A&(k^L))+F[4]+3889429448&4294967295,P=k+(N<<20&4294967295|N>>>12),N=A+(k^L&(P^k))+F[9]+568446438&4294967295,A=P+(N<<5&4294967295|N>>>27),N=L+(P^k&(A^P))+F[14]+3275163606&4294967295,L=A+(N<<9&4294967295|N>>>23),N=k+(A^P&(L^A))+F[3]+4107603335&4294967295,k=L+(N<<14&4294967295|N>>>18),N=P+(L^A&(k^L))+F[8]+1163531501&4294967295,P=k+(N<<20&4294967295|N>>>12),N=A+(k^L&(P^k))+F[13]+2850285829&4294967295,A=P+(N<<5&4294967295|N>>>27),N=L+(P^k&(A^P))+F[2]+4243563512&4294967295,L=A+(N<<9&4294967295|N>>>23),N=k+(A^P&(L^A))+F[7]+1735328473&4294967295,k=L+(N<<14&4294967295|N>>>18),N=P+(L^A&(k^L))+F[12]+2368359562&4294967295,P=k+(N<<20&4294967295|N>>>12),N=A+(P^k^L)+F[5]+4294588738&4294967295,A=P+(N<<4&4294967295|N>>>28),N=L+(A^P^k)+F[8]+2272392833&4294967295,L=A+(N<<11&4294967295|N>>>21),N=k+(L^A^P)+F[11]+1839030562&4294967295,k=L+(N<<16&4294967295|N>>>16),N=P+(k^L^A)+F[14]+4259657740&4294967295,P=k+(N<<23&4294967295|N>>>9),N=A+(P^k^L)+F[1]+2763975236&4294967295,A=P+(N<<4&4294967295|N>>>28),N=L+(A^P^k)+F[4]+1272893353&4294967295,L=A+(N<<11&4294967295|N>>>21),N=k+(L^A^P)+F[7]+4139469664&4294967295,k=L+(N<<16&4294967295|N>>>16),N=P+(k^L^A)+F[10]+3200236656&4294967295,P=k+(N<<23&4294967295|N>>>9),N=A+(P^k^L)+F[13]+681279174&4294967295,A=P+(N<<4&4294967295|N>>>28),N=L+(A^P^k)+F[0]+3936430074&4294967295,L=A+(N<<11&4294967295|N>>>21),N=k+(L^A^P)+F[3]+3572445317&4294967295,k=L+(N<<16&4294967295|N>>>16),N=P+(k^L^A)+F[6]+76029189&4294967295,P=k+(N<<23&4294967295|N>>>9),N=A+(P^k^L)+F[9]+3654602809&4294967295,A=P+(N<<4&4294967295|N>>>28),N=L+(A^P^k)+F[12]+3873151461&4294967295,L=A+(N<<11&4294967295|N>>>21),N=k+(L^A^P)+F[15]+530742520&4294967295,k=L+(N<<16&4294967295|N>>>16),N=P+(k^L^A)+F[2]+3299628645&4294967295,P=k+(N<<23&4294967295|N>>>9),N=A+(k^(P|~L))+F[0]+4096336452&4294967295,A=P+(N<<6&4294967295|N>>>26),N=L+(P^(A|~k))+F[7]+1126891415&4294967295,L=A+(N<<10&4294967295|N>>>22),N=k+(A^(L|~P))+F[14]+2878612391&4294967295,k=L+(N<<15&4294967295|N>>>17),N=P+(L^(k|~A))+F[5]+4237533241&4294967295,P=k+(N<<21&4294967295|N>>>11),N=A+(k^(P|~L))+F[12]+1700485571&4294967295,A=P+(N<<6&4294967295|N>>>26),N=L+(P^(A|~k))+F[3]+2399980690&4294967295,L=A+(N<<10&4294967295|N>>>22),N=k+(A^(L|~P))+F[10]+4293915773&4294967295,k=L+(N<<15&4294967295|N>>>17),N=P+(L^(k|~A))+F[1]+2240044497&4294967295,P=k+(N<<21&4294967295|N>>>11),N=A+(k^(P|~L))+F[8]+1873313359&4294967295,A=P+(N<<6&4294967295|N>>>26),N=L+(P^(A|~k))+F[15]+4264355552&4294967295,L=A+(N<<10&4294967295|N>>>22),N=k+(A^(L|~P))+F[6]+2734768916&4294967295,k=L+(N<<15&4294967295|N>>>17),N=P+(L^(k|~A))+F[13]+1309151649&4294967295,P=k+(N<<21&4294967295|N>>>11),N=A+(k^(P|~L))+F[4]+4149444226&4294967295,A=P+(N<<6&4294967295|N>>>26),N=L+(P^(A|~k))+F[11]+3174756917&4294967295,L=A+(N<<10&4294967295|N>>>22),N=k+(A^(L|~P))+F[2]+718787259&4294967295,k=L+(N<<15&4294967295|N>>>17),N=P+(L^(k|~A))+F[9]+3951481745&4294967295,b.g[0]=b.g[0]+A&4294967295,b.g[1]=b.g[1]+(k+(N<<21&4294967295|N>>>11))&4294967295,b.g[2]=b.g[2]+k&4294967295,b.g[3]=b.g[3]+L&4294967295}r.prototype.u=function(b,A){A===void 0&&(A=b.length);for(var P=A-this.blockSize,F=this.B,k=this.h,L=0;L<A;){if(k==0)for(;L<=P;)i(this,b,L),L+=this.blockSize;if(typeof b=="string"){for(;L<A;)if(F[k++]=b.charCodeAt(L++),k==this.blockSize){i(this,F),k=0;break}}else for(;L<A;)if(F[k++]=b[L++],k==this.blockSize){i(this,F),k=0;break}}this.h=k,this.o+=A},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var A=1;A<b.length-8;++A)b[A]=0;var P=8*this.o;for(A=b.length-8;A<b.length;++A)b[A]=P&255,P/=256;for(this.u(b),b=Array(16),A=P=0;4>A;++A)for(var F=0;32>F;F+=8)b[P++]=this.g[A]>>>F&255;return b};function s(b,A){var P=a;return Object.prototype.hasOwnProperty.call(P,b)?P[b]:P[b]=A(b)}function o(b,A){this.h=A;for(var P=[],F=!0,k=b.length-1;0<=k;k--){var L=b[k]|0;F&&L==A||(P[k]=L,F=!1)}this.g=P}var a={};function l(b){return-128<=b&&128>b?s(b,function(A){return new o([A|0],0>A?-1:0)}):new o([b|0],0>b?-1:0)}function u(b){if(isNaN(b)||!isFinite(b))return d;if(0>b)return v(u(-b));for(var A=[],P=1,F=0;b>=P;F++)A[F]=b/P|0,P*=4294967296;return new o(A,0)}function c(b,A){if(b.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(b.charAt(0)=="-")return v(c(b.substring(1),A));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=u(Math.pow(A,8)),F=d,k=0;k<b.length;k+=8){var L=Math.min(8,b.length-k),N=parseInt(b.substring(k,k+L),A);8>L?(L=u(Math.pow(A,L)),F=F.j(L).add(u(N))):(F=F.j(P),F=F.add(u(N)))}return F}var d=l(0),h=l(1),f=l(16777216);t=o.prototype,t.m=function(){if(m(this))return-v(this).m();for(var b=0,A=1,P=0;P<this.g.length;P++){var F=this.i(P);b+=(0<=F?F:4294967296+F)*A,A*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(g(this))return"0";if(m(this))return"-"+v(this).toString(b);for(var A=u(Math.pow(b,6)),P=this,F="";;){var k=_(P,A).g;P=C(P,k.j(A));var L=((0<P.g.length?P.g[0]:P.h)>>>0).toString(b);if(P=k,g(P))return L+F;for(;6>L.length;)L="0"+L;F=L+F}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function g(b){if(b.h!=0)return!1;for(var A=0;A<b.g.length;A++)if(b.g[A]!=0)return!1;return!0}function m(b){return b.h==-1}t.l=function(b){return b=C(this,b),m(b)?-1:g(b)?0:1};function v(b){for(var A=b.g.length,P=[],F=0;F<A;F++)P[F]=~b.g[F];return new o(P,~b.h).add(h)}t.abs=function(){return m(this)?v(this):this},t.add=function(b){for(var A=Math.max(this.g.length,b.g.length),P=[],F=0,k=0;k<=A;k++){var L=F+(this.i(k)&65535)+(b.i(k)&65535),N=(L>>>16)+(this.i(k)>>>16)+(b.i(k)>>>16);F=N>>>16,L&=65535,N&=65535,P[k]=N<<16|L}return new o(P,P[P.length-1]&-2147483648?-1:0)};function C(b,A){return b.add(v(A))}t.j=function(b){if(g(this)||g(b))return d;if(m(this))return m(b)?v(this).j(v(b)):v(v(this).j(b));if(m(b))return v(this.j(v(b)));if(0>this.l(f)&&0>b.l(f))return u(this.m()*b.m());for(var A=this.g.length+b.g.length,P=[],F=0;F<2*A;F++)P[F]=0;for(F=0;F<this.g.length;F++)for(var k=0;k<b.g.length;k++){var L=this.i(F)>>>16,N=this.i(F)&65535,W=b.i(k)>>>16,j=b.i(k)&65535;P[2*F+2*k]+=N*j,y(P,2*F+2*k),P[2*F+2*k+1]+=L*j,y(P,2*F+2*k+1),P[2*F+2*k+1]+=N*W,y(P,2*F+2*k+1),P[2*F+2*k+2]+=L*W,y(P,2*F+2*k+2)}for(F=0;F<A;F++)P[F]=P[2*F+1]<<16|P[2*F];for(F=A;F<2*A;F++)P[F]=0;return new o(P,0)};function y(b,A){for(;(b[A]&65535)!=b[A];)b[A+1]+=b[A]>>>16,b[A]&=65535,A++}function S(b,A){this.g=b,this.h=A}function _(b,A){if(g(A))throw Error("division by zero");if(g(b))return new S(d,d);if(m(b))return A=_(v(b),A),new S(v(A.g),v(A.h));if(m(A))return A=_(b,v(A)),new S(v(A.g),A.h);if(30<b.g.length){if(m(b)||m(A))throw Error("slowDivide_ only works with positive integers.");for(var P=h,F=A;0>=F.l(b);)P=E(P),F=E(F);var k=R(P,1),L=R(F,1);for(F=R(F,2),P=R(P,2);!g(F);){var N=L.add(F);0>=N.l(b)&&(k=k.add(P),L=N),F=R(F,1),P=R(P,1)}return A=C(b,k.j(A)),new S(k,A)}for(k=d;0<=b.l(A);){for(P=Math.max(1,Math.floor(b.m()/A.m())),F=Math.ceil(Math.log(P)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),L=u(P),N=L.j(A);m(N)||0<N.l(b);)P-=F,L=u(P),N=L.j(A);g(L)&&(L=h),k=k.add(L),b=C(b,N)}return new S(k,b)}t.A=function(b){return _(this,b).h},t.and=function(b){for(var A=Math.max(this.g.length,b.g.length),P=[],F=0;F<A;F++)P[F]=this.i(F)&b.i(F);return new o(P,this.h&b.h)},t.or=function(b){for(var A=Math.max(this.g.length,b.g.length),P=[],F=0;F<A;F++)P[F]=this.i(F)|b.i(F);return new o(P,this.h|b.h)},t.xor=function(b){for(var A=Math.max(this.g.length,b.g.length),P=[],F=0;F<A;F++)P[F]=this.i(F)^b.i(F);return new o(P,this.h^b.h)};function E(b){for(var A=b.g.length+1,P=[],F=0;F<A;F++)P[F]=b.i(F)<<1|b.i(F-1)>>>31;return new o(P,b.h)}function R(b,A){var P=A>>5;A%=32;for(var F=b.g.length-P,k=[],L=0;L<F;L++)k[L]=0<A?b.i(L+P)>>>A|b.i(L+P+1)<<32-A:b.i(L+P);return new o(k,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,K$=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=c,Jl=o}).apply(typeof DN<"u"?DN:typeof self<"u"?self:typeof window<"u"?window:{});var Gv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var q$,Vp,Y$,Ay,BR,Q$,X$,J$;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,T,D){return p==Array.prototype||p==Object.prototype||(p[T]=D.value),p};function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gv=="object"&&Gv];for(var T=0;T<p.length;++T){var D=p[T];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var r=n(this);function i(p,T){if(T)e:{var D=r;p=p.split(".");for(var V=0;V<p.length-1;V++){var $=p[V];if(!($ in D))break e;D=D[$]}p=p[p.length-1],V=D[p],T=T(V),T!=V&&T!=null&&e(D,p,{configurable:!0,writable:!0,value:T})}}function s(p,T){p instanceof String&&(p+="");var D=0,V=!1,$={next:function(){if(!V&&D<p.length){var Y=D++;return{value:T(Y,p[Y]),done:!1}}return V=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}i("Array.prototype.values",function(p){return p||function(){return s(this,function(T,D){return D})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(p){var T=typeof p;return T=T!="object"?T:p?Array.isArray(p)?"array":T:"null",T=="array"||T=="object"&&typeof p.length=="number"}function u(p){var T=typeof p;return T=="object"&&p!=null||T=="function"}function c(p,T,D){return p.call.apply(p.bind,arguments)}function d(p,T,D){if(!p)throw Error();if(2<arguments.length){var V=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,V),p.apply(T,$)}}return function(){return p.apply(T,arguments)}}function h(p,T,D){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:d,h.apply(null,arguments)}function f(p,T){var D=Array.prototype.slice.call(arguments,1);return function(){var V=D.slice();return V.push.apply(V,arguments),p.apply(this,V)}}function g(p,T){function D(){}D.prototype=T.prototype,p.aa=T.prototype,p.prototype=new D,p.prototype.constructor=p,p.Qb=function(V,$,Y){for(var ue=Array(arguments.length-2),St=2;St<arguments.length;St++)ue[St-2]=arguments[St];return T.prototype[$].apply(V,ue)}}function m(p){const T=p.length;if(0<T){const D=Array(T);for(let V=0;V<T;V++)D[V]=p[V];return D}return[]}function v(p,T){for(let D=1;D<arguments.length;D++){const V=arguments[D];if(l(V)){const $=p.length||0,Y=V.length||0;p.length=$+Y;for(let ue=0;ue<Y;ue++)p[$+ue]=V[ue]}else p.push(V)}}class C{constructor(T,D){this.i=T,this.j=D,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function y(p){return/^[\s\xa0]*$/.test(p)}function S(){var p=a.navigator;return p&&(p=p.userAgent)?p:""}function _(p){return _[" "](p),p}_[" "]=function(){};var E=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function R(p,T,D){for(const V in p)T.call(D,p[V],V,p)}function b(p,T){for(const D in p)T.call(void 0,p[D],D,p)}function A(p){const T={};for(const D in p)T[D]=p[D];return T}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(p,T){let D,V;for(let $=1;$<arguments.length;$++){V=arguments[$];for(D in V)p[D]=V[D];for(let Y=0;Y<P.length;Y++)D=P[Y],Object.prototype.hasOwnProperty.call(V,D)&&(p[D]=V[D])}}function k(p){var T=1;p=p.split(":");const D=[];for(;0<T&&p.length;)D.push(p.shift()),T--;return p.length&&D.push(p.join(":")),D}function L(p){a.setTimeout(()=>{throw p},0)}function N(){var p=U;let T=null;return p.g&&(T=p.g,p.g=p.g.next,p.g||(p.h=null),T.next=null),T}class W{constructor(){this.h=this.g=null}add(T,D){const V=j.get();V.set(T,D),this.h?this.h.next=V:this.g=V,this.h=V}}var j=new C(()=>new z,p=>p.reset());class z{constructor(){this.next=this.g=this.h=null}set(T,D){this.h=T,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let q,B=!1,U=new W,K=()=>{const p=a.Promise.resolve(void 0);q=()=>{p.then(ie)}};var ie=()=>{for(var p;p=N();){try{p.h.call(p.g)}catch(D){L(D)}var T=j;T.j(p),100>T.h&&(T.h++,p.next=T.g,T.g=p)}B=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(p,T){this.type=p,this.g=this.target=T,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var Me=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var p=!1,T=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const D=()=>{};a.addEventListener("test",D,T),a.removeEventListener("test",D,T)}catch{}return p}();function Ee(p,T){if(se.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var D=this.type=p.type,V=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=T,T=p.relatedTarget){if(E){e:{try{_(T.nodeName);var $=!0;break e}catch{}$=!1}$||(T=null)}}else D=="mouseover"?T=p.fromElement:D=="mouseout"&&(T=p.toElement);this.relatedTarget=T,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:qe[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&Ee.aa.h.call(this)}}g(Ee,se);var qe={2:"touch",3:"pen",4:"mouse"};Ee.prototype.h=function(){Ee.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var Ye="closure_listenable_"+(1e6*Math.random()|0),bt=0;function de(p,T,D,V,$){this.listener=p,this.proxy=null,this.src=T,this.type=D,this.capture=!!V,this.ha=$,this.key=++bt,this.da=this.fa=!1}function xe(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function fe(p){this.src=p,this.g={},this.h=0}fe.prototype.add=function(p,T,D,V,$){var Y=p.toString();p=this.g[Y],p||(p=this.g[Y]=[],this.h++);var ue=Fe(p,T,V,$);return-1<ue?(T=p[ue],D||(T.fa=!1)):(T=new de(T,this.src,Y,!!V,$),T.fa=D,p.push(T)),T};function Z(p,T){var D=T.type;if(D in p.g){var V=p.g[D],$=Array.prototype.indexOf.call(V,T,void 0),Y;(Y=0<=$)&&Array.prototype.splice.call(V,$,1),Y&&(xe(T),p.g[D].length==0&&(delete p.g[D],p.h--))}}function Fe(p,T,D,V){for(var $=0;$<p.length;++$){var Y=p[$];if(!Y.da&&Y.listener==T&&Y.capture==!!D&&Y.ha==V)return $}return-1}var pe="closure_lm_"+(1e6*Math.random()|0),ke={};function Ze(p,T,D,V,$){if(Array.isArray(T)){for(var Y=0;Y<T.length;Y++)Ze(p,T[Y],D,V,$);return null}return D=Yo(D),p&&p[Ye]?p.K(T,D,u(V)?!!V.capture:!1,$):yt(p,T,D,!1,V,$)}function yt(p,T,D,V,$,Y){if(!T)throw Error("Invalid event type");var ue=u($)?!!$.capture:!!$,St=Qn(p);if(St||(p[pe]=St=new fe(p)),D=St.add(T,D,V,ue,Y),D.proxy)return D;if(V=_n(),D.proxy=V,V.src=p,V.listener=D,p.addEventListener)Me||($=ue),$===void 0&&($=!1),p.addEventListener(T.toString(),V,$);else if(p.attachEvent)p.attachEvent(kn(T.toString()),V);else if(p.addListener&&p.removeListener)p.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return D}function _n(){function p(D){return T.call(p.src,p.listener,D)}const T=fr;return p}function ei(p,T,D,V,$){if(Array.isArray(T))for(var Y=0;Y<T.length;Y++)ei(p,T[Y],D,V,$);else V=u(V)?!!V.capture:!!V,D=Yo(D),p&&p[Ye]?(p=p.i,T=String(T).toString(),T in p.g&&(Y=p.g[T],D=Fe(Y,D,V,$),-1<D&&(xe(Y[D]),Array.prototype.splice.call(Y,D,1),Y.length==0&&(delete p.g[T],p.h--)))):p&&(p=Qn(p))&&(T=p.g[T.toString()],p=-1,T&&(p=Fe(T,D,V,$)),(D=-1<p?T[p]:null)&&Nr(D))}function Nr(p){if(typeof p!="number"&&p&&!p.da){var T=p.src;if(T&&T[Ye])Z(T.i,p);else{var D=p.type,V=p.proxy;T.removeEventListener?T.removeEventListener(D,V,p.capture):T.detachEvent?T.detachEvent(kn(D),V):T.addListener&&T.removeListener&&T.removeListener(V),(D=Qn(T))?(Z(D,p),D.h==0&&(D.src=null,T[pe]=null)):xe(p)}}}function kn(p){return p in ke?ke[p]:ke[p]="on"+p}function fr(p,T){if(p.da)p=!0;else{T=new Ee(T,this);var D=p.listener,V=p.ha||p.src;p.fa&&Nr(p),p=D.call(V,T)}return p}function Qn(p){return p=p[pe],p instanceof fe?p:null}var Es="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yo(p){return typeof p=="function"?p:(p[Es]||(p[Es]=function(T){return p.handleEvent(T)}),p[Es])}function Qe(){Q.call(this),this.i=new fe(this),this.M=this,this.F=null}g(Qe,Q),Qe.prototype[Ye]=!0,Qe.prototype.removeEventListener=function(p,T,D,V){ei(this,p,T,D,V)};function Tt(p,T){var D,V=p.F;if(V)for(D=[];V;V=V.F)D.push(V);if(p=p.M,V=T.type||T,typeof T=="string")T=new se(T,p);else if(T instanceof se)T.target=T.target||p;else{var $=T;T=new se(V,p),F(T,$)}if($=!0,D)for(var Y=D.length-1;0<=Y;Y--){var ue=T.g=D[Y];$=ml(ue,V,!0,T)&&$}if(ue=T.g=p,$=ml(ue,V,!0,T)&&$,$=ml(ue,V,!1,T)&&$,D)for(Y=0;Y<D.length;Y++)ue=T.g=D[Y],$=ml(ue,V,!1,T)&&$}Qe.prototype.N=function(){if(Qe.aa.N.call(this),this.i){var p=this.i,T;for(T in p.g){for(var D=p.g[T],V=0;V<D.length;V++)xe(D[V]);delete p.g[T],p.h--}}this.F=null},Qe.prototype.K=function(p,T,D,V){return this.i.add(String(p),T,!1,D,V)},Qe.prototype.L=function(p,T,D,V){return this.i.add(String(p),T,!0,D,V)};function ml(p,T,D,V){if(T=p.i.g[String(T)],!T)return!0;T=T.concat();for(var $=!0,Y=0;Y<T.length;++Y){var ue=T[Y];if(ue&&!ue.da&&ue.capture==D){var St=ue.listener,Gn=ue.ha||ue.src;ue.fa&&Z(p.i,ue),$=St.call(Gn,V)!==!1&&$}}return $&&!V.defaultPrevented}function BO(p,T,D){if(typeof p=="function")D&&(p=h(p,D));else if(p&&typeof p.handleEvent=="function")p=h(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:a.setTimeout(p,T||0)}function $O(p){p.g=BO(()=>{p.g=null,p.i&&(p.i=!1,$O(p))},p.l);const T=p.h;p.h=null,p.m.apply(null,T)}class G6 extends Q{constructor(T,D){super(),this.m=T,this.l=D,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:$O(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ep(p){Q.call(this),this.h=p,this.g={}}g(ep,Q);var WO=[];function jO(p){R(p.g,function(T,D){this.g.hasOwnProperty(D)&&Nr(T)},p),p.g={}}ep.prototype.N=function(){ep.aa.N.call(this),jO(this)},ep.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Db=a.JSON.stringify,V6=a.JSON.parse,H6=class{stringify(p){return a.JSON.stringify(p,void 0)}parse(p){return a.JSON.parse(p,void 0)}};function Ob(){}Ob.prototype.h=null;function UO(p){return p.h||(p.h=p.i())}function zO(){}var tp={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Mb(){se.call(this,"d")}g(Mb,se);function Fb(){se.call(this,"c")}g(Fb,se);var vl={},KO=null;function iv(){return KO=KO||new Qe}vl.La="serverreachability";function qO(p){se.call(this,vl.La,p)}g(qO,se);function np(p){const T=iv();Tt(T,new qO(T))}vl.STAT_EVENT="statevent";function YO(p,T){se.call(this,vl.STAT_EVENT,p),this.stat=T}g(YO,se);function gr(p){const T=iv();Tt(T,new YO(T,p))}vl.Ma="timingevent";function QO(p,T){se.call(this,vl.Ma,p),this.size=T}g(QO,se);function rp(p,T){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){p()},T)}function ip(){this.g=!0}ip.prototype.xa=function(){this.g=!1};function B6(p,T,D,V,$,Y){p.info(function(){if(p.g)if(Y)for(var ue="",St=Y.split("&"),Gn=0;Gn<St.length;Gn++){var ot=St[Gn].split("=");if(1<ot.length){var Xn=ot[0];ot=ot[1];var Jn=Xn.split("_");ue=2<=Jn.length&&Jn[1]=="type"?ue+(Xn+"="+ot+"&"):ue+(Xn+"=redacted&")}}else ue=null;else ue=Y;return"XMLHTTP REQ ("+V+") [attempt "+$+"]: "+T+`
`+D+`
`+ue})}function $6(p,T,D,V,$,Y,ue){p.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+$+"]: "+T+`
`+D+`
`+Y+" "+ue})}function ic(p,T,D,V){p.info(function(){return"XMLHTTP TEXT ("+T+"): "+j6(p,D)+(V?" "+V:"")})}function W6(p,T){p.info(function(){return"TIMEOUT: "+T})}ip.prototype.info=function(){};function j6(p,T){if(!p.g)return T;if(!T)return null;try{var D=JSON.parse(T);if(D){for(p=0;p<D.length;p++)if(Array.isArray(D[p])){var V=D[p];if(!(2>V.length)){var $=V[1];if(Array.isArray($)&&!(1>$.length)){var Y=$[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var ue=1;ue<$.length;ue++)$[ue]=""}}}}return Db(D)}catch{return T}}var sv={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},XO={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Nb;function ov(){}g(ov,Ob),ov.prototype.g=function(){return new XMLHttpRequest},ov.prototype.i=function(){return{}},Nb=new ov;function Qo(p,T,D,V){this.j=p,this.i=T,this.l=D,this.R=V||1,this.U=new ep(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new JO}function JO(){this.i=null,this.g="",this.h=!1}var ZO={},Lb={};function kb(p,T,D){p.L=1,p.v=cv(eo(T)),p.m=D,p.P=!0,eM(p,null)}function eM(p,T){p.F=Date.now(),av(p),p.A=eo(p.v);var D=p.A,V=p.R;Array.isArray(V)||(V=[String(V)]),fM(D.i,"t",V),p.C=0,D=p.j.J,p.h=new JO,p.g=OM(p.j,D?T:null,!p.m),0<p.O&&(p.M=new G6(h(p.Y,p,p.g),p.O)),T=p.U,D=p.g,V=p.ca;var $="readystatechange";Array.isArray($)||($&&(WO[0]=$.toString()),$=WO);for(var Y=0;Y<$.length;Y++){var ue=Ze(D,$[Y],V||T.handleEvent,!1,T.h||T);if(!ue)break;T.g[ue.key]=ue}T=p.H?A(p.H):{},p.m?(p.u||(p.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,T)):(p.u="GET",p.g.ea(p.A,p.u,null,T)),np(),B6(p.i,p.u,p.A,p.l,p.R,p.m)}Qo.prototype.ca=function(p){p=p.target;const T=this.M;T&&to(p)==3?T.j():this.Y(p)},Qo.prototype.Y=function(p){try{if(p==this.g)e:{const Jn=to(this.g);var T=this.g.Ba();const ac=this.g.Z();if(!(3>Jn)&&(Jn!=3||this.g&&(this.h.h||this.g.oa()||SM(this.g)))){this.J||Jn!=4||T==7||(T==8||0>=ac?np(3):np(2)),Gb(this);var D=this.g.Z();this.X=D;t:if(tM(this)){var V=SM(this.g);p="";var $=V.length,Y=to(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){yl(this),sp(this);var ue="";break t}this.h.i=new a.TextDecoder}for(T=0;T<$;T++)this.h.h=!0,p+=this.h.i.decode(V[T],{stream:!(Y&&T==$-1)});V.length=0,this.h.g+=p,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=D==200,$6(this.i,this.u,this.A,this.l,this.R,Jn,D),this.o){if(this.T&&!this.K){t:{if(this.g){var St,Gn=this.g;if((St=Gn.g?Gn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(St)){var ot=St;break t}}ot=null}if(D=ot)ic(this.i,this.l,D,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Vb(this,D);else{this.o=!1,this.s=3,gr(12),yl(this),sp(this);break e}}if(this.P){D=!0;let Xi;for(;!this.J&&this.C<ue.length;)if(Xi=U6(this,ue),Xi==Lb){Jn==4&&(this.s=4,gr(14),D=!1),ic(this.i,this.l,null,"[Incomplete Response]");break}else if(Xi==ZO){this.s=4,gr(15),ic(this.i,this.l,ue,"[Invalid Chunk]"),D=!1;break}else ic(this.i,this.l,Xi,null),Vb(this,Xi);if(tM(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Jn!=4||ue.length!=0||this.h.h||(this.s=1,gr(16),D=!1),this.o=this.o&&D,!D)ic(this.i,this.l,ue,"[Invalid Chunked Response]"),yl(this),sp(this);else if(0<ue.length&&!this.W){this.W=!0;var Xn=this.j;Xn.g==this&&Xn.ba&&!Xn.M&&(Xn.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),Ub(Xn),Xn.M=!0,gr(11))}}else ic(this.i,this.l,ue,null),Vb(this,ue);Jn==4&&yl(this),this.o&&!this.J&&(Jn==4?xM(this.j,this):(this.o=!1,av(this)))}else l9(this.g),D==400&&0<ue.indexOf("Unknown SID")?(this.s=3,gr(12)):(this.s=0,gr(13)),yl(this),sp(this)}}}catch{}finally{}};function tM(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function U6(p,T){var D=p.C,V=T.indexOf(`
`,D);return V==-1?Lb:(D=Number(T.substring(D,V)),isNaN(D)?ZO:(V+=1,V+D>T.length?Lb:(T=T.slice(V,V+D),p.C=V+D,T)))}Qo.prototype.cancel=function(){this.J=!0,yl(this)};function av(p){p.S=Date.now()+p.I,nM(p,p.I)}function nM(p,T){if(p.B!=null)throw Error("WatchDog timer not null");p.B=rp(h(p.ba,p),T)}function Gb(p){p.B&&(a.clearTimeout(p.B),p.B=null)}Qo.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(W6(this.i,this.A),this.L!=2&&(np(),gr(17)),yl(this),this.s=2,sp(this)):nM(this,this.S-p)};function sp(p){p.j.G==0||p.J||xM(p.j,p)}function yl(p){Gb(p);var T=p.M;T&&typeof T.ma=="function"&&T.ma(),p.M=null,jO(p.U),p.g&&(T=p.g,p.g=null,T.abort(),T.ma())}function Vb(p,T){try{var D=p.j;if(D.G!=0&&(D.g==p||Hb(D.h,p))){if(!p.K&&Hb(D.h,p)&&D.G==3){try{var V=D.Da.g.parse(T)}catch{V=null}if(Array.isArray(V)&&V.length==3){var $=V;if($[0]==0){e:if(!D.u){if(D.g)if(D.g.F+3e3<p.F)mv(D),fv(D);else break e;jb(D),gr(18)}}else D.za=$[1],0<D.za-D.T&&37500>$[2]&&D.F&&D.v==0&&!D.C&&(D.C=rp(h(D.Za,D),6e3));if(1>=sM(D.h)&&D.ca){try{D.ca()}catch{}D.ca=void 0}}else wl(D,11)}else if((p.K||D.g==p)&&mv(D),!y(T))for($=D.Da.g.parse(T),T=0;T<$.length;T++){let ot=$[T];if(D.T=ot[0],ot=ot[1],D.G==2)if(ot[0]=="c"){D.K=ot[1],D.ia=ot[2];const Xn=ot[3];Xn!=null&&(D.la=Xn,D.j.info("VER="+D.la));const Jn=ot[4];Jn!=null&&(D.Aa=Jn,D.j.info("SVER="+D.Aa));const ac=ot[5];ac!=null&&typeof ac=="number"&&0<ac&&(V=1.5*ac,D.L=V,D.j.info("backChannelRequestTimeoutMs_="+V)),V=D;const Xi=p.g;if(Xi){const yv=Xi.g?Xi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yv){var Y=V.h;Y.g||yv.indexOf("spdy")==-1&&yv.indexOf("quic")==-1&&yv.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Bb(Y,Y.h),Y.h=null))}if(V.D){const zb=Xi.g?Xi.g.getResponseHeader("X-HTTP-Session-Id"):null;zb&&(V.ya=zb,Ft(V.I,V.D,zb))}}D.G=3,D.l&&D.l.ua(),D.ba&&(D.R=Date.now()-p.F,D.j.info("Handshake RTT: "+D.R+"ms")),V=D;var ue=p;if(V.qa=DM(V,V.J?V.ia:null,V.W),ue.K){oM(V.h,ue);var St=ue,Gn=V.L;Gn&&(St.I=Gn),St.B&&(Gb(St),av(St)),V.g=ue}else _M(V);0<D.i.length&&gv(D)}else ot[0]!="stop"&&ot[0]!="close"||wl(D,7);else D.G==3&&(ot[0]=="stop"||ot[0]=="close"?ot[0]=="stop"?wl(D,7):Wb(D):ot[0]!="noop"&&D.l&&D.l.ta(ot),D.v=0)}}np(4)}catch{}}var z6=class{constructor(p,T){this.g=p,this.map=T}};function rM(p){this.l=p||10,a.PerformanceNavigationTiming?(p=a.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function iM(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function sM(p){return p.h?1:p.g?p.g.size:0}function Hb(p,T){return p.h?p.h==T:p.g?p.g.has(T):!1}function Bb(p,T){p.g?p.g.add(T):p.h=T}function oM(p,T){p.h&&p.h==T?p.h=null:p.g&&p.g.has(T)&&p.g.delete(T)}rM.prototype.cancel=function(){if(this.i=aM(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function aM(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let T=p.i;for(const D of p.g.values())T=T.concat(D.D);return T}return m(p.i)}function K6(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(l(p)){for(var T=[],D=p.length,V=0;V<D;V++)T.push(p[V]);return T}T=[],D=0;for(V in p)T[D++]=p[V];return T}function q6(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(l(p)||typeof p=="string"){var T=[];p=p.length;for(var D=0;D<p;D++)T.push(D);return T}T=[],D=0;for(const V in p)T[D++]=V;return T}}}function lM(p,T){if(p.forEach&&typeof p.forEach=="function")p.forEach(T,void 0);else if(l(p)||typeof p=="string")Array.prototype.forEach.call(p,T,void 0);else for(var D=q6(p),V=K6(p),$=V.length,Y=0;Y<$;Y++)T.call(void 0,V[Y],D&&D[Y],p)}var uM=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Y6(p,T){if(p){p=p.split("&");for(var D=0;D<p.length;D++){var V=p[D].indexOf("="),$=null;if(0<=V){var Y=p[D].substring(0,V);$=p[D].substring(V+1)}else Y=p[D];T(Y,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Cl(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof Cl){this.h=p.h,lv(this,p.j),this.o=p.o,this.g=p.g,uv(this,p.s),this.l=p.l;var T=p.i,D=new lp;D.i=T.i,T.g&&(D.g=new Map(T.g),D.h=T.h),cM(this,D),this.m=p.m}else p&&(T=String(p).match(uM))?(this.h=!1,lv(this,T[1]||"",!0),this.o=op(T[2]||""),this.g=op(T[3]||"",!0),uv(this,T[4]),this.l=op(T[5]||"",!0),cM(this,T[6]||"",!0),this.m=op(T[7]||"")):(this.h=!1,this.i=new lp(null,this.h))}Cl.prototype.toString=function(){var p=[],T=this.j;T&&p.push(ap(T,dM,!0),":");var D=this.g;return(D||T=="file")&&(p.push("//"),(T=this.o)&&p.push(ap(T,dM,!0),"@"),p.push(encodeURIComponent(String(D)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.s,D!=null&&p.push(":",String(D))),(D=this.l)&&(this.g&&D.charAt(0)!="/"&&p.push("/"),p.push(ap(D,D.charAt(0)=="/"?J6:X6,!0))),(D=this.i.toString())&&p.push("?",D),(D=this.m)&&p.push("#",ap(D,e9)),p.join("")};function eo(p){return new Cl(p)}function lv(p,T,D){p.j=D?op(T,!0):T,p.j&&(p.j=p.j.replace(/:$/,""))}function uv(p,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);p.s=T}else p.s=null}function cM(p,T,D){T instanceof lp?(p.i=T,t9(p.i,p.h)):(D||(T=ap(T,Z6)),p.i=new lp(T,p.h))}function Ft(p,T,D){p.i.set(T,D)}function cv(p){return Ft(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function op(p,T){return p?T?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function ap(p,T,D){return typeof p=="string"?(p=encodeURI(p).replace(T,Q6),D&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function Q6(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var dM=/[#\/\?@]/g,X6=/[#\?:]/g,J6=/[#\?]/g,Z6=/[#\?@]/g,e9=/#/g;function lp(p,T){this.h=this.g=null,this.i=p||null,this.j=!!T}function Xo(p){p.g||(p.g=new Map,p.h=0,p.i&&Y6(p.i,function(T,D){p.add(decodeURIComponent(T.replace(/\+/g," ")),D)}))}t=lp.prototype,t.add=function(p,T){Xo(this),this.i=null,p=sc(this,p);var D=this.g.get(p);return D||this.g.set(p,D=[]),D.push(T),this.h+=1,this};function hM(p,T){Xo(p),T=sc(p,T),p.g.has(T)&&(p.i=null,p.h-=p.g.get(T).length,p.g.delete(T))}function pM(p,T){return Xo(p),T=sc(p,T),p.g.has(T)}t.forEach=function(p,T){Xo(this),this.g.forEach(function(D,V){D.forEach(function($){p.call(T,$,V,this)},this)},this)},t.na=function(){Xo(this);const p=Array.from(this.g.values()),T=Array.from(this.g.keys()),D=[];for(let V=0;V<T.length;V++){const $=p[V];for(let Y=0;Y<$.length;Y++)D.push(T[V])}return D},t.V=function(p){Xo(this);let T=[];if(typeof p=="string")pM(this,p)&&(T=T.concat(this.g.get(sc(this,p))));else{p=Array.from(this.g.values());for(let D=0;D<p.length;D++)T=T.concat(p[D])}return T},t.set=function(p,T){return Xo(this),this.i=null,p=sc(this,p),pM(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[T]),this.h+=1,this},t.get=function(p,T){return p?(p=this.V(p),0<p.length?String(p[0]):T):T};function fM(p,T,D){hM(p,T),0<D.length&&(p.i=null,p.g.set(sc(p,T),m(D)),p.h+=D.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],T=Array.from(this.g.keys());for(var D=0;D<T.length;D++){var V=T[D];const Y=encodeURIComponent(String(V)),ue=this.V(V);for(V=0;V<ue.length;V++){var $=Y;ue[V]!==""&&($+="="+encodeURIComponent(String(ue[V]))),p.push($)}}return this.i=p.join("&")};function sc(p,T){return T=String(T),p.j&&(T=T.toLowerCase()),T}function t9(p,T){T&&!p.j&&(Xo(p),p.i=null,p.g.forEach(function(D,V){var $=V.toLowerCase();V!=$&&(hM(this,V),fM(this,$,D))},p)),p.j=T}function n9(p,T){const D=new ip;if(a.Image){const V=new Image;V.onload=f(Jo,D,"TestLoadImage: loaded",!0,T,V),V.onerror=f(Jo,D,"TestLoadImage: error",!1,T,V),V.onabort=f(Jo,D,"TestLoadImage: abort",!1,T,V),V.ontimeout=f(Jo,D,"TestLoadImage: timeout",!1,T,V),a.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=p}else T(!1)}function r9(p,T){const D=new ip,V=new AbortController,$=setTimeout(()=>{V.abort(),Jo(D,"TestPingServer: timeout",!1,T)},1e4);fetch(p,{signal:V.signal}).then(Y=>{clearTimeout($),Y.ok?Jo(D,"TestPingServer: ok",!0,T):Jo(D,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout($),Jo(D,"TestPingServer: error",!1,T)})}function Jo(p,T,D,V,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),V(D)}catch{}}function i9(){this.g=new H6}function s9(p,T,D){const V=D||"";try{lM(p,function($,Y){let ue=$;u($)&&(ue=Db($)),T.push(V+Y+"="+encodeURIComponent(ue))})}catch($){throw T.push(V+"type="+encodeURIComponent("_badmap")),$}}function dv(p){this.l=p.Ub||null,this.j=p.eb||!1}g(dv,Ob),dv.prototype.g=function(){return new hv(this.l,this.j)},dv.prototype.i=function(p){return function(){return p}}({});function hv(p,T){Qe.call(this),this.D=p,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(hv,Qe),t=hv.prototype,t.open=function(p,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=T,this.readyState=1,cp(this)},t.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(T.body=p),(this.D||a).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,up(this)),this.readyState=0},t.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,cp(this)),this.g&&(this.readyState=3,cp(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;gM(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function gM(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}t.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var T=p.value?p.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!p.done}))&&(this.response=this.responseText+=T)}p.done?up(this):cp(this),this.readyState==3&&gM(this)}},t.Ra=function(p){this.g&&(this.response=this.responseText=p,up(this))},t.Qa=function(p){this.g&&(this.response=p,up(this))},t.ga=function(){this.g&&up(this)};function up(p){p.readyState=4,p.l=null,p.j=null,p.v=null,cp(p)}t.setRequestHeader=function(p,T){this.u.append(p,T)},t.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],T=this.h.entries();for(var D=T.next();!D.done;)D=D.value,p.push(D[0]+": "+D[1]),D=T.next();return p.join(`\r
`)};function cp(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(hv.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function mM(p){let T="";return R(p,function(D,V){T+=V,T+=":",T+=D,T+=`\r
`}),T}function $b(p,T,D){e:{for(V in D){var V=!1;break e}V=!0}V||(D=mM(D),typeof p=="string"?D!=null&&encodeURIComponent(String(D)):Ft(p,T,D))}function Qt(p){Qe.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(Qt,Qe);var o9=/^https?$/i,a9=["POST","PUT"];t=Qt.prototype,t.Ha=function(p){this.J=p},t.ea=function(p,T,D,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);T=T?T.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Nb.g(),this.v=this.o?UO(this.o):UO(Nb),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(T,String(p),!0),this.B=!1}catch(Y){vM(this,Y);return}if(p=D||"",D=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var $ in V)D.set($,V[$]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const Y of V.keys())D.set(Y,V.get(Y));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(D.keys()).find(Y=>Y.toLowerCase()=="content-type"),$=a.FormData&&p instanceof a.FormData,!(0<=Array.prototype.indexOf.call(a9,T,void 0))||V||$||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,ue]of D)this.g.setRequestHeader(Y,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{wM(this),this.u=!0,this.g.send(p),this.u=!1}catch(Y){vM(this,Y)}};function vM(p,T){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=T,p.m=5,yM(p),pv(p)}function yM(p){p.A||(p.A=!0,Tt(p,"complete"),Tt(p,"error"))}t.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,Tt(this,"complete"),Tt(this,"abort"),pv(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pv(this,!0)),Qt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?CM(this):this.bb())},t.bb=function(){CM(this)};function CM(p){if(p.h&&typeof o<"u"&&(!p.v[1]||to(p)!=4||p.Z()!=2)){if(p.u&&to(p)==4)BO(p.Ea,0,p);else if(Tt(p,"readystatechange"),to(p)==4){p.h=!1;try{const ue=p.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var D;if(!(D=T)){var V;if(V=ue===0){var $=String(p.D).match(uM)[1]||null;!$&&a.self&&a.self.location&&($=a.self.location.protocol.slice(0,-1)),V=!o9.test($?$.toLowerCase():"")}D=V}if(D)Tt(p,"complete"),Tt(p,"success");else{p.m=6;try{var Y=2<to(p)?p.g.statusText:""}catch{Y=""}p.l=Y+" ["+p.Z()+"]",yM(p)}}finally{pv(p)}}}}function pv(p,T){if(p.g){wM(p);const D=p.g,V=p.v[0]?()=>{}:null;p.g=null,p.v=null,T||Tt(p,"ready");try{D.onreadystatechange=V}catch{}}}function wM(p){p.I&&(a.clearTimeout(p.I),p.I=null)}t.isActive=function(){return!!this.g};function to(p){return p.g?p.g.readyState:0}t.Z=function(){try{return 2<to(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(p){if(this.g){var T=this.g.responseText;return p&&T.indexOf(p)==0&&(T=T.substring(p.length)),V6(T)}};function SM(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function l9(p){const T={};p=(p.g&&2<=to(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<p.length;V++){if(y(p[V]))continue;var D=k(p[V]);const $=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();const Y=T[$]||[];T[$]=Y,Y.push(D)}b(T,function(V){return V.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function dp(p,T,D){return D&&D.internalChannelParams&&D.internalChannelParams[p]||T}function EM(p){this.Aa=0,this.i=[],this.j=new ip,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=dp("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=dp("baseRetryDelayMs",5e3,p),this.cb=dp("retryDelaySeedMs",1e4,p),this.Wa=dp("forwardChannelMaxRetries",2,p),this.wa=dp("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new rM(p&&p.concurrentRequestLimit),this.Da=new i9,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=EM.prototype,t.la=8,t.G=1,t.connect=function(p,T,D,V){gr(0),this.W=p,this.H=T||{},D&&V!==void 0&&(this.H.OSID=D,this.H.OAID=V),this.F=this.X,this.I=DM(this,null,this.W),gv(this)};function Wb(p){if(bM(p),p.G==3){var T=p.U++,D=eo(p.I);if(Ft(D,"SID",p.K),Ft(D,"RID",T),Ft(D,"TYPE","terminate"),hp(p,D),T=new Qo(p,p.j,T),T.L=2,T.v=cv(eo(D)),D=!1,a.navigator&&a.navigator.sendBeacon)try{D=a.navigator.sendBeacon(T.v.toString(),"")}catch{}!D&&a.Image&&(new Image().src=T.v,D=!0),D||(T.g=OM(T.j,null),T.g.ea(T.v)),T.F=Date.now(),av(T)}IM(p)}function fv(p){p.g&&(Ub(p),p.g.cancel(),p.g=null)}function bM(p){fv(p),p.u&&(a.clearTimeout(p.u),p.u=null),mv(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&a.clearTimeout(p.s),p.s=null)}function gv(p){if(!iM(p.h)&&!p.s){p.s=!0;var T=p.Ga;q||K(),B||(q(),B=!0),U.add(T,p),p.B=0}}function u9(p,T){return sM(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=T.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=rp(h(p.Ga,p,T),PM(p,p.B)),p.B++,!0)}t.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const $=new Qo(this,this.j,p);let Y=this.o;if(this.S&&(Y?(Y=A(Y),F(Y,this.S)):Y=this.S),this.m!==null||this.O||($.H=Y,Y=null),this.P)e:{for(var T=0,D=0;D<this.i.length;D++){t:{var V=this.i[D];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(T+=V,4096<T){T=D;break e}if(T===4096||D===this.i.length-1){T=D+1;break e}}T=1e3}else T=1e3;T=RM(this,$,T),D=eo(this.I),Ft(D,"RID",p),Ft(D,"CVER",22),this.D&&Ft(D,"X-HTTP-Session-Id",this.D),hp(this,D),Y&&(this.O?T="headers="+encodeURIComponent(String(mM(Y)))+"&"+T:this.m&&$b(D,this.m,Y)),Bb(this.h,$),this.Ua&&Ft(D,"TYPE","init"),this.P?(Ft(D,"$req",T),Ft(D,"SID","null"),$.T=!0,kb($,D,null)):kb($,D,T),this.G=2}}else this.G==3&&(p?TM(this,p):this.i.length==0||iM(this.h)||TM(this))};function TM(p,T){var D;T?D=T.l:D=p.U++;const V=eo(p.I);Ft(V,"SID",p.K),Ft(V,"RID",D),Ft(V,"AID",p.T),hp(p,V),p.m&&p.o&&$b(V,p.m,p.o),D=new Qo(p,p.j,D,p.B+1),p.m===null&&(D.H=p.o),T&&(p.i=T.D.concat(p.i)),T=RM(p,D,1e3),D.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),Bb(p.h,D),kb(D,V,T)}function hp(p,T){p.H&&R(p.H,function(D,V){Ft(T,V,D)}),p.l&&lM({},function(D,V){Ft(T,V,D)})}function RM(p,T,D){D=Math.min(p.i.length,D);var V=p.l?h(p.l.Na,p.l,p):null;e:{var $=p.i;let Y=-1;for(;;){const ue=["count="+D];Y==-1?0<D?(Y=$[0].g,ue.push("ofs="+Y)):Y=0:ue.push("ofs="+Y);let St=!0;for(let Gn=0;Gn<D;Gn++){let ot=$[Gn].g;const Xn=$[Gn].map;if(ot-=Y,0>ot)Y=Math.max(0,$[Gn].g-100),St=!1;else try{s9(Xn,ue,"req"+ot+"_")}catch{V&&V(Xn)}}if(St){V=ue.join("&");break e}}}return p=p.i.splice(0,D),T.D=p,V}function _M(p){if(!p.g&&!p.u){p.Y=1;var T=p.Fa;q||K(),B||(q(),B=!0),U.add(T,p),p.v=0}}function jb(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=rp(h(p.Fa,p),PM(p,p.v)),p.v++,!0)}t.Fa=function(){if(this.u=null,AM(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=rp(h(this.ab,this),p)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gr(10),fv(this),AM(this))};function Ub(p){p.A!=null&&(a.clearTimeout(p.A),p.A=null)}function AM(p){p.g=new Qo(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var T=eo(p.qa);Ft(T,"RID","rpc"),Ft(T,"SID",p.K),Ft(T,"AID",p.T),Ft(T,"CI",p.F?"0":"1"),!p.F&&p.ja&&Ft(T,"TO",p.ja),Ft(T,"TYPE","xmlhttp"),hp(p,T),p.m&&p.o&&$b(T,p.m,p.o),p.L&&(p.g.I=p.L);var D=p.g;p=p.ia,D.L=1,D.v=cv(eo(T)),D.m=null,D.P=!0,eM(D,p)}t.Za=function(){this.C!=null&&(this.C=null,fv(this),jb(this),gr(19))};function mv(p){p.C!=null&&(a.clearTimeout(p.C),p.C=null)}function xM(p,T){var D=null;if(p.g==T){mv(p),Ub(p),p.g=null;var V=2}else if(Hb(p.h,T))D=T.D,oM(p.h,T),V=1;else return;if(p.G!=0){if(T.o)if(V==1){D=T.m?T.m.length:0,T=Date.now()-T.F;var $=p.B;V=iv(),Tt(V,new QO(V,D)),gv(p)}else _M(p);else if($=T.s,$==3||$==0&&0<T.X||!(V==1&&u9(p,T)||V==2&&jb(p)))switch(D&&0<D.length&&(T=p.h,T.i=T.i.concat(D)),$){case 1:wl(p,5);break;case 4:wl(p,10);break;case 3:wl(p,6);break;default:wl(p,2)}}}function PM(p,T){let D=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(D*=2),D*T}function wl(p,T){if(p.j.info("Error code "+T),T==2){var D=h(p.fb,p),V=p.Xa;const $=!V;V=new Cl(V||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||lv(V,"https"),cv(V),$?n9(V.toString(),D):r9(V.toString(),D)}else gr(2);p.G=0,p.l&&p.l.sa(T),IM(p),bM(p)}t.fb=function(p){p?(this.j.info("Successfully pinged google.com"),gr(2)):(this.j.info("Failed to ping google.com"),gr(1))};function IM(p){if(p.G=0,p.ka=[],p.l){const T=aM(p.h);(T.length!=0||p.i.length!=0)&&(v(p.ka,T),v(p.ka,p.i),p.h.i.length=0,m(p.i),p.i.length=0),p.l.ra()}}function DM(p,T,D){var V=D instanceof Cl?eo(D):new Cl(D);if(V.g!="")T&&(V.g=T+"."+V.g),uv(V,V.s);else{var $=a.location;V=$.protocol,T=T?T+"."+$.hostname:$.hostname,$=+$.port;var Y=new Cl(null);V&&lv(Y,V),T&&(Y.g=T),$&&uv(Y,$),D&&(Y.l=D),V=Y}return D=p.D,T=p.ya,D&&T&&Ft(V,D,T),Ft(V,"VER",p.la),hp(p,V),V}function OM(p,T,D){if(T&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=p.Ca&&!p.pa?new Qt(new dv({eb:D})):new Qt(p.pa),T.Ha(p.J),T}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function MM(){}t=MM.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function vv(){}vv.prototype.g=function(p,T){return new ti(p,T)};function ti(p,T){Qe.call(this),this.g=new EM(T),this.l=p,this.h=T&&T.messageUrlParams||null,p=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(p?p["X-WebChannel-Content-Type"]=T.messageContentType:p={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(p?p["X-WebChannel-Client-Profile"]=T.va:p={"X-WebChannel-Client-Profile":T.va}),this.g.S=p,(p=T&&T.Sb)&&!y(p)&&(this.g.m=p),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!y(T)&&(this.g.D=T,p=this.h,p!==null&&T in p&&(p=this.h,T in p&&delete p[T])),this.j=new oc(this)}g(ti,Qe),ti.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ti.prototype.close=function(){Wb(this.g)},ti.prototype.o=function(p){var T=this.g;if(typeof p=="string"){var D={};D.__data__=p,p=D}else this.u&&(D={},D.__data__=Db(p),p=D);T.i.push(new z6(T.Ya++,p)),T.G==3&&gv(T)},ti.prototype.N=function(){this.g.l=null,delete this.j,Wb(this.g),delete this.g,ti.aa.N.call(this)};function FM(p){Mb.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var T=p.__sm__;if(T){e:{for(const D in T){p=D;break e}p=void 0}(this.i=p)&&(p=this.i,T=T!==null&&p in T?T[p]:void 0),this.data=T}else this.data=p}g(FM,Mb);function NM(){Fb.call(this),this.status=1}g(NM,Fb);function oc(p){this.g=p}g(oc,MM),oc.prototype.ua=function(){Tt(this.g,"a")},oc.prototype.ta=function(p){Tt(this.g,new FM(p))},oc.prototype.sa=function(p){Tt(this.g,new NM)},oc.prototype.ra=function(){Tt(this.g,"b")},vv.prototype.createWebChannel=vv.prototype.g,ti.prototype.send=ti.prototype.o,ti.prototype.open=ti.prototype.m,ti.prototype.close=ti.prototype.close,J$=function(){return new vv},X$=function(){return iv()},Q$=vl,BR={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},sv.NO_ERROR=0,sv.TIMEOUT=8,sv.HTTP_ERROR=6,Ay=sv,XO.COMPLETE="complete",Y$=XO,zO.EventType=tp,tp.OPEN="a",tp.CLOSE="b",tp.ERROR="c",tp.MESSAGE="d",Qe.prototype.listen=Qe.prototype.K,Vp=zO,Qt.prototype.listenOnce=Qt.prototype.L,Qt.prototype.getLastError=Qt.prototype.Ka,Qt.prototype.getLastErrorCode=Qt.prototype.Ba,Qt.prototype.getStatus=Qt.prototype.Z,Qt.prototype.getResponseJson=Qt.prototype.Oa,Qt.prototype.getResponseText=Qt.prototype.oa,Qt.prototype.send=Qt.prototype.ea,Qt.prototype.setWithCredentials=Qt.prototype.Ha,q$=Qt}).apply(typeof Gv<"u"?Gv:typeof self<"u"?self:typeof window<"u"?window:{});const ON="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rr.UNAUTHENTICATED=new rr(null),rr.GOOGLE_CREDENTIALS=new rr("google-credentials-uid"),rr.FIRST_PARTY=new rr("first-party-uid"),rr.MOCK_USER=new rr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ch="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vu=new gP("@firebase/firestore");function Sp(){return vu.logLevel}function Ce(t,...e){if(vu.logLevel<=Xe.DEBUG){const n=e.map(AP);vu.debug(`Firestore (${Ch}): ${t}`,...n)}}function Po(t,...e){if(vu.logLevel<=Xe.ERROR){const n=e.map(AP);vu.error(`Firestore (${Ch}): ${t}`,...n)}}function gd(t,...e){if(vu.logLevel<=Xe.WARN){const n=e.map(AP);vu.warn(`Firestore (${Ch}): ${t}`,...n)}}function AP(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(t="Unexpected state"){const e=`FIRESTORE (${Ch}) INTERNAL ASSERTION FAILED: `+t;throw Po(e),new Error(e)}function Zt(t,e){t||Be()}function tt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends Go{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z${constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LJ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(rr.UNAUTHENTICATED))}shutdown(){}}class kJ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class GJ{constructor(e){this.t=e,this.currentUser=rr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Zt(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Xc;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Xc,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Xc)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Zt(typeof r.accessToken=="string"),new Z$(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Zt(e===null||typeof e=="string"),new rr(e)}}class VJ{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=rr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class HJ{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new VJ(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(rr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class BJ{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $J{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Zt(this.o===void 0);const r=s=>{s.error!=null&&Ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Ce("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Zt(typeof n.token=="string"),this.R=n.token,new BJ(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WJ(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eW{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=WJ(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function dt(t,e){return t<e?-1:t>e?1:0}function md(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ye(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ye(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ye(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Mn.fromMillis(Date.now())}static fromDate(e){return Mn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Mn(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?dt(this.nanoseconds,e.nanoseconds):dt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new Mn(0,0))}static max(){return new Ve(new Mn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,n,r){n===void 0?n=0:n>e.length&&Be(),r===void 0?r=e.length-n:r>e.length-n&&Be(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Kf.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Kf?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Vt extends Kf{construct(e,n,r){return new Vt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ye(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Vt(n)}static emptyPath(){return new Vt([])}}const jJ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ar extends Kf{construct(e,n,r){return new ar(e,n,r)}static isValidIdentifier(e){return jJ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ar.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ar(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ye(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ye(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ye(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ye(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ar(n)}static emptyPath(){return new ar([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.path=e}static fromPath(e){return new Re(Vt.fromString(e))}static fromName(e){return new Re(Vt.fromString(e).popFirst(5))}static empty(){return new Re(Vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Vt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Re(new Vt(e.slice()))}}function UJ(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ve.fromTimestamp(r===1e9?new Mn(n+1,0):new Mn(n,r));return new $a(i,Re.empty(),e)}function zJ(t){return new $a(t.readTime,t.key,-1)}class $a{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new $a(Ve.min(),Re.empty(),-1)}static max(){return new $a(Ve.max(),Re.empty(),-1)}}function KJ(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Re.comparator(t.documentKey,e.documentKey),n!==0?n:dt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qJ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YJ{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xP(t){if(t.code!==ae.FAILED_PRECONDITION||t.message!==qJ)throw t;Ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Be(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new re((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof re?n:re.resolve(n)}catch(n){return re.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):re.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):re.reject(n)}static resolve(e){return new re((n,r)=>{n(e)})}static reject(e){return new re((n,r)=>{r(e)})}static waitFor(e){return new re((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=re.resolve(!1);for(const r of e)n=n.next(i=>i?re.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new re((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,n){return new re((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function QJ(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function wm(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}PP.oe=-1;function VS(t){return t==null}function IC(t){return t===0&&1/t==-1/0}function XJ(t){return typeof t=="number"&&Number.isInteger(t)&&!IC(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Sm(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function tW(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,n){this.comparator=e,this.root=n||Bn.EMPTY}insert(e,n){return new ln(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Bn.BLACK,null,null))}remove(e){return new ln(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vv(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vv(this.root,e,this.comparator,!0)}}class Vv{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Bn.RED,this.left=i??Bn.EMPTY,this.right=s??Bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Bn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Bn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Bn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Be();const e=this.left.check();if(e!==this.right.check())throw Be();return e+(this.isRed()?0:1)}}Bn.EMPTY=null,Bn.RED=!0,Bn.BLACK=!1;Bn.EMPTY=new class{constructor(){this.size=0}get key(){throw Be()}get value(){throw Be()}get color(){throw Be()}get left(){throw Be()}get right(){throw Be()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Bn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.comparator=e,this.data=new ln(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new FN(this.data.getIterator())}getIteratorFrom(e){return new FN(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof jn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new jn(this.comparator);return n.data=e,n}}class FN{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e){this.fields=e,e.sort(ar.comparator)}static empty(){return new Ca([])}unionWith(e){let n=new jn(ar.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ca(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return md(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nW extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new nW("Invalid base64 string: "+s):s}}(e);return new Kn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Kn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return dt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kn.EMPTY_BYTE_STRING=new Kn("");const JJ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wa(t){if(Zt(!!t),typeof t=="string"){let e=0;const n=JJ.exec(t);if(Zt(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nn(t.seconds),nanos:nn(t.nanos)}}function nn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function yu(t){return typeof t=="string"?Kn.fromBase64String(t):Kn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IP(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function DP(t){const e=t.mapValue.fields.__previous_value__;return IP(e)?DP(e):e}function qf(t){const e=Wa(t.mapValue.fields.__local_write_time__.timestampValue);return new Mn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZJ{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class Yf{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Yf("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Yf&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv={mapValue:{}};function Cu(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?IP(t)?4:tZ(t)?9007199254740991:eZ(t)?10:11:Be()}function Ws(t,e){if(t===e)return!0;const n=Cu(t);if(n!==Cu(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qf(t).isEqual(qf(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Wa(i.timestampValue),a=Wa(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return yu(i.bytesValue).isEqual(yu(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return nn(i.geoPointValue.latitude)===nn(s.geoPointValue.latitude)&&nn(i.geoPointValue.longitude)===nn(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return nn(i.integerValue)===nn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=nn(i.doubleValue),a=nn(s.doubleValue);return o===a?IC(o)===IC(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return md(t.arrayValue.values||[],e.arrayValue.values||[],Ws);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(MN(o)!==MN(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ws(o[l],a[l])))return!1;return!0}(t,e);default:return Be()}}function Qf(t,e){return(t.values||[]).find(n=>Ws(n,e))!==void 0}function vd(t,e){if(t===e)return 0;const n=Cu(t),r=Cu(e);if(n!==r)return dt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return dt(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=nn(s.integerValue||s.doubleValue),l=nn(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return NN(t.timestampValue,e.timestampValue);case 4:return NN(qf(t),qf(e));case 5:return dt(t.stringValue,e.stringValue);case 6:return function(s,o){const a=yu(s),l=yu(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const c=dt(a[u],l[u]);if(c!==0)return c}return dt(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=dt(nn(s.latitude),nn(o.latitude));return a!==0?a:dt(nn(s.longitude),nn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return LN(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,c;const d=s.fields||{},h=o.fields||{},f=(a=d.value)===null||a===void 0?void 0:a.arrayValue,g=(l=h.value)===null||l===void 0?void 0:l.arrayValue,m=dt(((u=f==null?void 0:f.values)===null||u===void 0?void 0:u.length)||0,((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0);return m!==0?m:LN(f,g)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Hv.mapValue&&o===Hv.mapValue)return 0;if(s===Hv.mapValue)return 1;if(o===Hv.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let d=0;d<l.length&&d<c.length;++d){const h=dt(l[d],c[d]);if(h!==0)return h;const f=vd(a[l[d]],u[c[d]]);if(f!==0)return f}return dt(l.length,c.length)}(t.mapValue,e.mapValue);default:throw Be()}}function NN(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return dt(t,e);const n=Wa(t),r=Wa(e),i=dt(n.seconds,r.seconds);return i!==0?i:dt(n.nanos,r.nanos)}function LN(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=vd(n[i],r[i]);if(s)return s}return dt(n.length,r.length)}function yd(t){return $R(t)}function $R(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Wa(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return yu(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Re.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=$R(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${$R(n.fields[o])}`;return i+"}"}(t.mapValue):Be()}function kN(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function WR(t){return!!t&&"integerValue"in t}function OP(t){return!!t&&"arrayValue"in t}function GN(t){return!!t&&"nullValue"in t}function VN(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function AT(t){return!!t&&"mapValue"in t}function eZ(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function df(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Sm(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=df(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=df(t.arrayValue.values[n]);return e}return Object.assign({},t)}function tZ(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e){this.value=e}static empty(){return new Ds({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!AT(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=df(n)}setAll(e){let n=ar.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=df(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());AT(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ws(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];AT(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Sm(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ds(df(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new sr(e,0,Ve.min(),Ve.min(),Ve.min(),Ds.empty(),0)}static newFoundDocument(e,n,r,i){return new sr(e,1,n,Ve.min(),r,i,0)}static newNoDocument(e,n){return new sr(e,2,n,Ve.min(),Ve.min(),Ds.empty(),0)}static newUnknownDocument(e,n){return new sr(e,3,n,Ve.min(),Ve.min(),Ds.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ds.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ds.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof sr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,n){this.position=e,this.inclusive=n}}function HN(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Re.comparator(Re.fromName(o.referenceValue),n.key):r=vd(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function BN(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ws(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,n="asc"){this.field=e,this.dir=n}}function nZ(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rW{}class gn extends rW{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new iZ(e,n,r):n==="array-contains"?new aZ(e,r):n==="in"?new lZ(e,r):n==="not-in"?new uZ(e,r):n==="array-contains-any"?new cZ(e,r):new gn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new sZ(e,r):new oZ(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(vd(n,this.value)):n!==null&&Cu(this.value)===Cu(n)&&this.matchesComparison(vd(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Be()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vs extends rW{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new vs(e,n)}matches(e){return iW(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function iW(t){return t.op==="and"}function sW(t){return rZ(t)&&iW(t)}function rZ(t){for(const e of t.filters)if(e instanceof vs)return!1;return!0}function jR(t){if(t instanceof gn)return t.field.canonicalString()+t.op.toString()+yd(t.value);if(sW(t))return t.filters.map(e=>jR(e)).join(",");{const e=t.filters.map(n=>jR(n)).join(",");return`${t.op}(${e})`}}function oW(t,e){return t instanceof gn?function(r,i){return i instanceof gn&&r.op===i.op&&r.field.isEqual(i.field)&&Ws(r.value,i.value)}(t,e):t instanceof vs?function(r,i){return i instanceof vs&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&oW(o,i.filters[a]),!0):!1}(t,e):void Be()}function aW(t){return t instanceof gn?function(n){return`${n.field.canonicalString()} ${n.op} ${yd(n.value)}`}(t):t instanceof vs?function(n){return n.op.toString()+" {"+n.getFilters().map(aW).join(" ,")+"}"}(t):"Filter"}class iZ extends gn{constructor(e,n,r){super(e,n,r),this.key=Re.fromName(r.referenceValue)}matches(e){const n=Re.comparator(e.key,this.key);return this.matchesComparison(n)}}class sZ extends gn{constructor(e,n){super(e,"in",n),this.keys=lW("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class oZ extends gn{constructor(e,n){super(e,"not-in",n),this.keys=lW("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function lW(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Re.fromName(r.referenceValue))}class aZ extends gn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return OP(n)&&Qf(n.arrayValue,this.value)}}class lZ extends gn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Qf(this.value.arrayValue,n)}}class uZ extends gn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Qf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Qf(this.value.arrayValue,n)}}class cZ extends gn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!OP(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Qf(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dZ{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function $N(t,e=null,n=[],r=[],i=null,s=null,o=null){return new dZ(t,e,n,r,i,s,o)}function MP(t){const e=tt(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>jR(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),VS(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>yd(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>yd(r)).join(",")),e.ue=n}return e.ue}function FP(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!nZ(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!oW(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!BN(t.startAt,e.startAt)&&BN(t.endAt,e.endAt)}function UR(t){return Re.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function hZ(t,e,n,r,i,s,o,a){return new wh(t,e,n,r,i,s,o,a)}function NP(t){return new wh(t)}function WN(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function uW(t){return t.collectionGroup!==null}function hf(t){const e=tt(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new jn(ar.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Xf(s,r))}),n.has(ar.keyField().canonicalString())||e.ce.push(new Xf(ar.keyField(),r))}return e.ce}function Gs(t){const e=tt(t);return e.le||(e.le=pZ(e,hf(t))),e.le}function pZ(t,e){if(t.limitType==="F")return $N(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Xf(i.field,s)});const n=t.endAt?new DC(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new DC(t.startAt.position,t.startAt.inclusive):null;return $N(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function zR(t,e){const n=t.filters.concat([e]);return new wh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function OC(t,e,n){return new wh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function HS(t,e){return FP(Gs(t),Gs(e))&&t.limitType===e.limitType}function cW(t){return`${MP(Gs(t))}|lt:${t.limitType}`}function pc(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>aW(i)).join(", ")}]`),VS(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>yd(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>yd(i)).join(",")),`Target(${r})`}(Gs(t))}; limitType=${t.limitType})`}function BS(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Re.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of hf(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=HN(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,hf(r),i)||r.endAt&&!function(o,a,l){const u=HN(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,hf(r),i))}(t,e)}function fZ(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function dW(t){return(e,n)=>{let r=!1;for(const i of hf(t)){const s=gZ(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function gZ(t,e,n){const r=t.field.isKeyField()?Re.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?vd(l,u):Be()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Be()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Sm(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return tW(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mZ=new ln(Re.comparator);function ja(){return mZ}const hW=new ln(Re.comparator);function Hp(...t){let e=hW;for(const n of t)e=e.insert(n.key,n);return e}function vZ(t){let e=hW;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Bl(){return pf()}function pW(){return pf()}function pf(){return new Sh(t=>t.toString(),(t,e)=>t.isEqual(e))}const yZ=new jn(Re.comparator);function it(...t){let e=yZ;for(const n of t)e=e.add(n);return e}const CZ=new jn(dt);function wZ(){return CZ}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LP(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:IC(e)?"-0":e}}function fW(t){return{integerValue:""+t}}function SZ(t,e){return XJ(e)?fW(e):LP(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(){this._=void 0}}function EZ(t,e,n){return t instanceof KR?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&IP(s)&&(s=DP(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof MC?gW(t,e):t instanceof FC?mW(t,e):function(i,s){const o=TZ(i,s),a=jN(o)+jN(i.Pe);return WR(o)&&WR(i.Pe)?fW(a):LP(i.serializer,a)}(t,e)}function bZ(t,e,n){return t instanceof MC?gW(t,e):t instanceof FC?mW(t,e):n}function TZ(t,e){return t instanceof qR?function(r){return WR(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class KR extends $S{}class MC extends $S{constructor(e){super(),this.elements=e}}function gW(t,e){const n=vW(e);for(const r of t.elements)n.some(i=>Ws(i,r))||n.push(r);return{arrayValue:{values:n}}}class FC extends $S{constructor(e){super(),this.elements=e}}function mW(t,e){let n=vW(e);for(const r of t.elements)n=n.filter(i=>!Ws(i,r));return{arrayValue:{values:n}}}class qR extends $S{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function jN(t){return nn(t.integerValue||t.doubleValue)}function vW(t){return OP(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function RZ(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof MC&&i instanceof MC||r instanceof FC&&i instanceof FC?md(r.elements,i.elements,Ws):r instanceof qR&&i instanceof qR?Ws(r.Pe,i.Pe):r instanceof KR&&i instanceof KR}(t.transform,e.transform)}class Zl{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Zl}static exists(e){return new Zl(void 0,e)}static updateTime(e){return new Zl(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xy(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class kP{}function yW(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new AZ(t.key,Zl.none()):new GP(t.key,t.data,Zl.none());{const n=t.data,r=Ds.empty();let i=new jn(ar.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new WS(t.key,r,new Ca(i.toArray()),Zl.none())}}function _Z(t,e,n){t instanceof GP?function(i,s,o){const a=i.value.clone(),l=zN(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof WS?function(i,s,o){if(!xy(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=zN(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(CW(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ff(t,e,n,r){return t instanceof GP?function(s,o,a,l){if(!xy(s.precondition,o))return a;const u=s.value.clone(),c=KN(s.fieldTransforms,l,o);return u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof WS?function(s,o,a,l){if(!xy(s.precondition,o))return a;const u=KN(s.fieldTransforms,l,o),c=o.data;return c.setAll(CW(s)),c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return xy(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function UN(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&md(r,i,(s,o)=>RZ(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class GP extends kP{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class WS extends kP{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function CW(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function zN(t,e,n){const r=new Map;Zt(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,bZ(o,a,n[i]))}return r}function KN(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,EZ(s,o,e))}return r}class AZ extends kP{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xZ{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&_Z(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ff(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ff(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=pW();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=yW(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Ve.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),it())}isEqual(e){return this.batchId===e.batchId&&md(this.mutations,e.mutations,(n,r)=>UN(n,r))&&md(this.baseMutations,e.baseMutations,(n,r)=>UN(n,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PZ{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IZ{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cn,et;function wW(t){if(t===void 0)return Po("GRPC error has no .code"),ae.UNKNOWN;switch(t){case cn.OK:return ae.OK;case cn.CANCELLED:return ae.CANCELLED;case cn.UNKNOWN:return ae.UNKNOWN;case cn.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case cn.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case cn.INTERNAL:return ae.INTERNAL;case cn.UNAVAILABLE:return ae.UNAVAILABLE;case cn.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case cn.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case cn.NOT_FOUND:return ae.NOT_FOUND;case cn.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case cn.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case cn.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case cn.ABORTED:return ae.ABORTED;case cn.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case cn.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case cn.DATA_LOSS:return ae.DATA_LOSS;default:return Be()}}(et=cn||(cn={}))[et.OK=0]="OK",et[et.CANCELLED=1]="CANCELLED",et[et.UNKNOWN=2]="UNKNOWN",et[et.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",et[et.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",et[et.NOT_FOUND=5]="NOT_FOUND",et[et.ALREADY_EXISTS=6]="ALREADY_EXISTS",et[et.PERMISSION_DENIED=7]="PERMISSION_DENIED",et[et.UNAUTHENTICATED=16]="UNAUTHENTICATED",et[et.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",et[et.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",et[et.ABORTED=10]="ABORTED",et[et.OUT_OF_RANGE=11]="OUT_OF_RANGE",et[et.UNIMPLEMENTED=12]="UNIMPLEMENTED",et[et.INTERNAL=13]="INTERNAL",et[et.UNAVAILABLE=14]="UNAVAILABLE",et[et.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DZ(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OZ=new Jl([4294967295,4294967295],0);function qN(t){const e=DZ().encode(t),n=new K$;return n.update(e),new Uint8Array(n.digest())}function YN(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Jl([n,r],0),new Jl([i,s],0)]}class VP{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Bp(`Invalid padding: ${n}`);if(r<0)throw new Bp(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Bp(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Bp(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Jl.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Jl.fromNumber(r)));return i.compare(OZ)===1&&(i=new Jl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=qN(e),[r,i]=YN(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new VP(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=qN(e),[r,i]=YN(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Bp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Em.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new jS(Ve.min(),i,new ln(dt),ja(),it())}}class Em{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Em(r,n,it(),it(),it())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class SW{constructor(e,n){this.targetId=e,this.me=n}}class EW{constructor(e,n,r=Kn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class QN{constructor(){this.fe=0,this.ge=JN(),this.pe=Kn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=it(),n=it(),r=it();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Be()}}),new Em(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=JN()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Zt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class MZ{constructor(e){this.Le=e,this.Be=new Map,this.ke=ja(),this.qe=XN(),this.Qe=new ln(dt)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Be()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(UR(s))if(r===0){const o=new Re(s.path);this.Ue(n,o,sr.newNoDocument(o,Ve.min()))}else Zt(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=yu(r).toUint8Array()}catch(l){if(l instanceof nW)return gd("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new VP(o,i,s)}catch(l){return gd(l instanceof Bp?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&UR(a.target)){const l=new Re(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,sr.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=it();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new jS(e,n,this.Qe,this.ke,r);return this.ke=ja(),this.qe=XN(),this.Qe=new ln(dt),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new QN,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new jn(dt),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Ce("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new QN),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function XN(){return new ln(Re.comparator)}function JN(){return new ln(Re.comparator)}const FZ={asc:"ASCENDING",desc:"DESCENDING"},NZ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LZ={and:"AND",or:"OR"};class kZ{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function YR(t,e){return t.useProto3Json||VS(e)?e:{value:e}}function QR(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bW(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Jc(t){return Zt(!!t),Ve.fromTimestamp(function(n){const r=Wa(n);return new Mn(r.seconds,r.nanos)}(t))}function TW(t,e){return XR(t,e).canonicalString()}function XR(t,e){const n=function(i){return new Vt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function RW(t){const e=Vt.fromString(t);return Zt(IW(e)),e}function xT(t,e){const n=RW(e);if(n.get(1)!==t.databaseId.projectId)throw new ye(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ye(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Re(AW(n))}function _W(t,e){return TW(t.databaseId,e)}function GZ(t){const e=RW(t);return e.length===4?Vt.emptyPath():AW(e)}function ZN(t){return new Vt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function AW(t){return Zt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function VZ(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Be()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,c){return u.useProto3Json?(Zt(c===void 0||typeof c=="string"),Kn.fromBase64String(c||"")):(Zt(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Kn.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=u.code===void 0?ae.UNKNOWN:wW(u.code);return new ye(c,u.message||"")}(o);n=new EW(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=xT(t,r.document.name),s=Jc(r.document.updateTime),o=r.document.createTime?Jc(r.document.createTime):Ve.min(),a=new Ds({mapValue:{fields:r.document.fields}}),l=sr.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new Py(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=xT(t,r.document),s=r.readTime?Jc(r.readTime):Ve.min(),o=sr.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Py([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=xT(t,r.document),s=r.removedTargetIds||[];n=new Py([],s,i,null)}else{if(!("filter"in e))return Be();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new IZ(i,s),a=r.targetId;n=new SW(a,o)}}return n}function HZ(t,e){return{documents:[_W(t,e.path)]}}function BZ(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=_W(t,i);const s=function(u){if(u.length!==0)return PW(vs.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(c=>function(h){return{field:fc(h.field),direction:jZ(h.dir)}}(c))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=YR(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function $Z(t){let e=GZ(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Zt(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=function(d){const h=xW(d);return h instanceof vs&&sW(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(h=>function(g){return new Xf(gc(g.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,VS(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(d){const h=!!d.before,f=d.values||[];return new DC(f,h)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const h=!d.before,f=d.values||[];return new DC(f,h)}(n.endAt)),hZ(e,i,o,s,a,"F",l,u)}function WZ(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Be()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function xW(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=gc(n.unaryFilter.field);return gn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=gc(n.unaryFilter.field);return gn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=gc(n.unaryFilter.field);return gn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=gc(n.unaryFilter.field);return gn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Be()}}(t):t.fieldFilter!==void 0?function(n){return gn.create(gc(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Be()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return vs.create(n.compositeFilter.filters.map(r=>xW(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Be()}}(n.compositeFilter.op))}(t):Be()}function jZ(t){return FZ[t]}function UZ(t){return NZ[t]}function zZ(t){return LZ[t]}function fc(t){return{fieldPath:t.canonicalString()}}function gc(t){return ar.fromServerFormat(t.fieldPath)}function PW(t){return t instanceof gn?function(n){if(n.op==="=="){if(VN(n.value))return{unaryFilter:{field:fc(n.field),op:"IS_NAN"}};if(GN(n.value))return{unaryFilter:{field:fc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(VN(n.value))return{unaryFilter:{field:fc(n.field),op:"IS_NOT_NAN"}};if(GN(n.value))return{unaryFilter:{field:fc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fc(n.field),op:UZ(n.op),value:n.value}}}(t):t instanceof vs?function(n){const r=n.getFilters().map(i=>PW(i));return r.length===1?r[0]:{compositeFilter:{op:zZ(n.op),filters:r}}}(t):Be()}function IW(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,n,r,i,s=Ve.min(),o=Ve.min(),a=Kn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new wa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new wa(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KZ{constructor(e){this.ct=e}}function qZ(t){const e=$Z({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?OC(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YZ{constructor(){this.un=new QZ}addToCollectionParentIndex(e,n){return this.un.add(n),re.resolve()}getCollectionParents(e,n){return re.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return re.resolve()}deleteFieldIndex(e,n){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,n){return re.resolve()}getDocumentsMatchingTarget(e,n){return re.resolve(null)}getIndexType(e,n){return re.resolve(0)}getFieldIndexes(e,n){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,n){return re.resolve($a.min())}getMinOffsetFromCollectionGroup(e,n){return re.resolve($a.min())}updateCollectionGroup(e,n,r){return re.resolve()}updateIndexEntries(e,n){return re.resolve()}}class QZ{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new jn(Vt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new jn(Vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Cd(0)}static kn(){return new Cd(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XZ{constructor(){this.changes=new Sh(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,sr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?re.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JZ{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZZ{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ff(r.mutation,i,Ca.empty(),Mn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,it()).next(()=>r))}getLocalViewOfDocuments(e,n,r=it()){const i=Bl();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Hp();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Bl();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,it()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=ja();const o=pf(),a=function(){return pf()}();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof WS)?s=s.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),ff(c.mutation,u,c.mutation.getFieldMask(),Mn.now())):o.set(u.key,Ca.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var d;return a.set(u,new JZ(c,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=pf();let i=new ln((o,a)=>o-a),s=it();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||Ca.empty();c=a.applyToLocalView(u,c),r.set(l,c);const d=(i.get(a.batchId)||it()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,d=pW();c.forEach(h=>{if(!s.has(h)){const f=yW(n.get(h),r.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return re.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return Re.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):uW(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):re.resolve(Bl());let a=-1,l=s;return o.next(u=>re.forEach(u,(c,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(c)?re.resolve():this.remoteDocumentCache.getEntry(e,c).next(h=>{l=l.insert(c,h)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,it())).next(c=>({batchId:a,changes:vZ(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Re(n)).next(r=>{let i=Hp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Hp();return this.indexManager.getCollectionParents(e,s).next(a=>re.forEach(a,l=>{const u=function(d,h){return new wh(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(c=>{c.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const c=u.getKey();o.get(c)===null&&(o=o.insert(c,sr.newInvalidDocument(c)))});let a=Hp();return o.forEach((l,u)=>{const c=s.get(l);c!==void 0&&ff(c.mutation,u,Ca.empty(),Mn.now()),BS(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eee{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return re.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Jc(i.createTime)}}(n)),re.resolve()}getNamedQuery(e,n){return re.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:qZ(i.bundledQuery),readTime:Jc(i.readTime)}}(n)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tee{constructor(){this.overlays=new ln(Re.comparator),this.Ir=new Map}getOverlay(e,n){return re.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Bl();return re.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),re.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),re.resolve()}getOverlaysForCollection(e,n,r){const i=Bl(),s=n.length+1,o=new Re(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return re.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new ln((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=Bl(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=Bl(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return re.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new PZ(n,r));let s=this.Ir.get(n);s===void 0&&(s=it(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nee{constructor(){this.sessionToken=Kn.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(){this.Tr=new jn(An.Er),this.dr=new jn(An.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new An(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new An(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Re(new Vt([])),r=new An(n,e),i=new An(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Re(new Vt([])),r=new An(n,e),i=new An(n,e+1);let s=it();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new An(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class An{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Re.comparator(e.key,n.key)||dt(e.wr,n.wr)}static Ar(e,n){return dt(e.wr,n.wr)||Re.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ree{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new jn(An.Er)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new xZ(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new An(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return re.resolve(o)}lookupMutationBatch(e,n){return re.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return re.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new An(n,0),i=new An(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),re.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new jn(dt);return n.forEach(i=>{const s=new An(i,0),o=new An(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),re.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Re.isDocumentKey(s)||(s=s.child(""));const o=new An(new Re(s),0);let a=new jn(dt);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.wr)),!0)},o),re.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Zt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return re.forEach(n.mutations,i=>{const s=new An(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new An(n,0),i=this.br.firstAfterOrEqual(r);return re.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iee{constructor(e){this.Mr=e,this.docs=function(){return new ln(Re.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return re.resolve(r?r.document.mutableCopy():sr.newInvalidDocument(n))}getEntries(e,n){let r=ja();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():sr.newInvalidDocument(i))}),re.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ja();const o=n.path,a=new Re(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||KJ(zJ(c),r)<=0||(i.has(c.key)||BS(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return re.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Be()}Or(e,n){return re.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new see(this)}getSize(e){return re.resolve(this.size)}}class see extends XZ{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),re.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oee{constructor(e){this.persistence=e,this.Nr=new Sh(n=>MP(n),FP),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.Lr=0,this.Br=new HP,this.targetCount=0,this.kr=Cd.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),re.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Cd(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,re.resolve()}updateTargetData(e,n){return this.Kn(n),re.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),re.waitFor(s).next(()=>i)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return re.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),re.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),re.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),re.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return re.resolve(r)}containsKey(e,n){return re.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aee{constructor(e,n){this.qr={},this.overlays={},this.Qr=new PP(0),this.Kr=!1,this.Kr=!0,this.$r=new nee,this.referenceDelegate=e(this),this.Ur=new oee(this),this.indexManager=new YZ,this.remoteDocumentCache=function(i){return new iee(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new KZ(n),this.Gr=new eee(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new tee,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new ree(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Ce("MemoryPersistence","Starting transaction:",e);const i=new lee(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return re.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class lee extends YJ{constructor(e){super(),this.currentSequenceNumber=e}}class BP{constructor(e){this.persistence=e,this.Jr=new HP,this.Yr=null}static Zr(e){return new BP(e)}get Xr(){if(this.Yr)return this.Yr;throw Be()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),re.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),re.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.Xr,r=>{const i=Re.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Ve.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return re.or([()=>re.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=it(),i=it();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new $P(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uee{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cee{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return s7()?8:QJ(cr())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new uee;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Sp()<=Xe.DEBUG&&Ce("QueryEngine","SDK will not create cache indexes for query:",pc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),re.resolve()):(Sp()<=Xe.DEBUG&&Ce("QueryEngine","Query:",pc(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Sp()<=Xe.DEBUG&&Ce("QueryEngine","The SDK decides to create cache indexes for query:",pc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gs(n))):re.resolve())}Yi(e,n){if(WN(n))return re.resolve(null);let r=Gs(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=OC(n,null,"F"),r=Gs(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=it(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(e,OC(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,r,i){return WN(n)||i.isEqual(Ve.min())?re.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?re.resolve(null):(Sp()<=Xe.DEBUG&&Ce("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),pc(n)),this.rs(e,o,n,UJ(i,-1)).next(a=>a))})}ts(e,n){let r=new jn(dW(e));return n.forEach((i,s)=>{BS(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Sp()<=Xe.DEBUG&&Ce("QueryEngine","Using full collection scan to execute query:",pc(n)),this.Ji.getDocumentsMatchingQuery(e,n,$a.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dee{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new ln(dt),this._s=new Sh(s=>MP(s),FP),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZZ(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function hee(t,e,n,r){return new dee(t,e,n,r)}async function DW(t,e){const n=tt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=it();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function OW(t){const e=tt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function pee(t,e){const n=tt(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((c,d)=>{const h=i.get(d);if(!h)return;a.push(n.Ur.removeMatchingKeys(s,c.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,c.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(Kn.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):c.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(c.resumeToken,r)),i=i.insert(d,f),function(m,v,C){return m.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(h,f,c)&&a.push(n.Ur.updateTargetData(s,f))});let l=ja(),u=it();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(fee(s,o,e.documentUpdates).next(c=>{l=c.Ps,u=c.Is})),!r.isEqual(Ve.min())){const c=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return re.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.os=i,s))}function fee(t,e,n){let r=it(),i=it();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ja();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Ve.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Ce("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function gee(t,e){const n=tt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,re.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new wa(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function JR(t,e,n){const r=tt(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!wm(o))throw o;Ce("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function eL(t,e,n){const r=tt(t);let i=Ve.min(),s=it();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,c){const d=tt(l),h=d._s.get(c);return h!==void 0?re.resolve(d.os.get(h)):d.Ur.getTargetData(u,c)}(r,o,Gs(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Ve.min(),n?s:it())).next(a=>(mee(r,fZ(e),a),{documents:a,Ts:s})))}function mee(t,e,n){let r=t.us.get(e)||Ve.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class tL{constructor(){this.activeTargetIds=wZ()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vee{constructor(){this.so=new tL,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new tL,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yee{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ce("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ce("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bv=null;function PT(){return Bv===null?Bv=function(){return 268435456+Math.round(2147483648*Math.random())}():Bv++,"0x"+Bv.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cee={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wee{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr="WebChannelConnection";class See extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=PT(),l=this.xo(n,r.toUriEncodedString());Ce("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(n,l,u,i).then(c=>(Ce("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw gd("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",l,"request:",i),c})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ch}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=Cee[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=PT();return new Promise((o,a)=>{const l=new q$;l.setWithCredentials(!0),l.listenOnce(Y$.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ay.NO_ERROR:const c=l.getResponseJson();Ce(tr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(c)),o(c);break;case Ay.TIMEOUT:Ce(tr,`RPC '${e}' ${s} timed out`),a(new ye(ae.DEADLINE_EXCEEDED,"Request time out"));break;case Ay.HTTP_ERROR:const d=l.getStatus();if(Ce(tr,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=h==null?void 0:h.error;if(f&&f.status&&f.message){const g=function(v){const C=v.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(C)>=0?C:ae.UNKNOWN}(f.status);a(new ye(g,f.message))}else a(new ye(ae.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ye(ae.UNAVAILABLE,"Connection failed."));break;default:Be()}}finally{Ce(tr,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);Ce(tr,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=PT(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=J$(),a=X$(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=s.join("");Ce(tr,`Creating RPC '${e}' stream ${i}: ${c}`,l);const d=o.createWebChannel(c,l);let h=!1,f=!1;const g=new wee({Io:v=>{f?Ce(tr,`Not sending because RPC '${e}' stream ${i} is closed:`,v):(h||(Ce(tr,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),Ce(tr,`RPC '${e}' stream ${i} sending:`,v),d.send(v))},To:()=>d.close()}),m=(v,C,y)=>{v.listen(C,S=>{try{y(S)}catch(_){setTimeout(()=>{throw _},0)}})};return m(d,Vp.EventType.OPEN,()=>{f||(Ce(tr,`RPC '${e}' stream ${i} transport opened.`),g.yo())}),m(d,Vp.EventType.CLOSE,()=>{f||(f=!0,Ce(tr,`RPC '${e}' stream ${i} transport closed`),g.So())}),m(d,Vp.EventType.ERROR,v=>{f||(f=!0,gd(tr,`RPC '${e}' stream ${i} transport errored:`,v),g.So(new ye(ae.UNAVAILABLE,"The operation could not be completed")))}),m(d,Vp.EventType.MESSAGE,v=>{var C;if(!f){const y=v.data[0];Zt(!!y);const S=y,_=S.error||((C=S[0])===null||C===void 0?void 0:C.error);if(_){Ce(tr,`RPC '${e}' stream ${i} received error:`,_);const E=_.status;let R=function(P){const F=cn[P];if(F!==void 0)return wW(F)}(E),b=_.message;R===void 0&&(R=ae.INTERNAL,b="Unknown error status: "+E+" with message "+_.message),f=!0,g.So(new ye(R,b)),d.close()}else Ce(tr,`RPC '${e}' stream ${i} received:`,y),g.bo(y)}}),m(a,Q$.STAT_EVENT,v=>{v.stat===BR.PROXY?Ce(tr,`RPC '${e}' stream ${i} detected buffering proxy`):v.stat===BR.NOPROXY&&Ce(tr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.wo()},0),g}}function IT(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(t){return new kZ(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MW{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&Ce("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eee{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new MW(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===ae.RESOURCE_EXHAUSTED?(Po(n.toString()),Po("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new ye(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Ce("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Ce("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class bee extends Eee{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=VZ(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ve.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Ve.min():o.readTime?Jc(o.readTime):Ve.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=ZN(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=UR(l)?{documents:HZ(s,l)}:{query:BZ(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=bW(s,o.resumeToken);const u=YR(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Ve.min())>0){a.readTime=QR(s,o.snapshotVersion.toTimestamp());const u=YR(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=WZ(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=ZN(this.serializer),n.removeTarget=e,this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tee extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ye(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,XR(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ye(ae.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,XR(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ye(ae.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Ree{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Po(n),this.D_=!1):Ce("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ee{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Tm(this)&&(Ce("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=tt(l);u.L_.add(4),await bm(u),u.q_.set("Unknown"),u.L_.delete(4),await zS(u)}(this))})}),this.q_=new Ree(r,i)}}async function zS(t){if(Tm(t))for(const e of t.B_)await e(!0)}async function bm(t){for(const e of t.B_)await e(!1)}function FW(t,e){const n=tt(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),zP(n)?UP(n):Eh(n).r_()&&jP(n,e))}function WP(t,e){const n=tt(t),r=Eh(n);n.N_.delete(e),r.r_()&&NW(n,e),n.N_.size===0&&(r.r_()?r.o_():Tm(n)&&n.q_.set("Unknown"))}function jP(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Eh(t).A_(e)}function NW(t,e){t.Q_.xe(e),Eh(t).R_(e)}function UP(t){t.Q_=new MZ({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Eh(t).start(),t.q_.v_()}function zP(t){return Tm(t)&&!Eh(t).n_()&&t.N_.size>0}function Tm(t){return tt(t).L_.size===0}function LW(t){t.Q_=void 0}async function Aee(t){t.q_.set("Online")}async function xee(t){t.N_.forEach((e,n)=>{jP(t,e)})}async function Pee(t,e){LW(t),zP(t)?(t.q_.M_(e),UP(t)):t.q_.set("Unknown")}async function Iee(t,e,n){if(t.q_.set("Online"),e instanceof EW&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){Ce("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await rL(t,r)}else if(e instanceof Py?t.Q_.Ke(e):e instanceof SW?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Ve.min()))try{const r=await OW(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.N_.get(u);c&&s.N_.set(u,c.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const c=s.N_.get(l);if(!c)return;s.N_.set(l,c.withResumeToken(Kn.EMPTY_BYTE_STRING,c.snapshotVersion)),NW(s,l);const d=new wa(c.target,l,u,c.sequenceNumber);jP(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Ce("RemoteStore","Failed to raise snapshot:",r),await rL(t,r)}}async function rL(t,e,n){if(!wm(e))throw e;t.L_.add(1),await bm(t),t.q_.set("Offline"),n||(n=()=>OW(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ce("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await zS(t)})}async function iL(t,e){const n=tt(t);n.asyncQueue.verifyOperationInProgress(),Ce("RemoteStore","RemoteStore received new credentials");const r=Tm(n);n.L_.add(3),await bm(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await zS(n)}async function Dee(t,e){const n=tt(t);e?(n.L_.delete(2),await zS(n)):e||(n.L_.add(2),await bm(n),n.q_.set("Unknown"))}function Eh(t){return t.K_||(t.K_=function(n,r,i){const s=tt(n);return s.w_(),new bee(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:Aee.bind(null,t),Ro:xee.bind(null,t),mo:Pee.bind(null,t),d_:Iee.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),zP(t)?UP(t):t.q_.set("Unknown")):(await t.K_.stop(),LW(t))})),t.K_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Xc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new KP(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kW(t,e){if(Po("AsyncQueue",`${e}: ${t}`),wm(t))return new ye(ae.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Re.comparator(n.key,r.key):(n,r)=>Re.comparator(n.key,r.key),this.keyedMap=Hp(),this.sortedSet=new ln(this.comparator)}static emptySet(e){return new Zc(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Zc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Zc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(){this.W_=new ln(Re.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Be():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class wd{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new wd(e,n,Zc.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&HS(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oee{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Mee{constructor(){this.queries=oL(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=tt(n),s=i.queries;i.queries=oL(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new ye(ae.ABORTED,"Firestore shutting down"))}}function oL(){return new Sh(t=>cW(t),HS)}async function Fee(t,e){const n=tt(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new Oee,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=kW(o,`Initialization of query '${pc(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&qP(n)}async function Nee(t,e){const n=tt(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Lee(t,e){const n=tt(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&qP(n)}function kee(t,e,n){const r=tt(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function qP(t){t.Y_.forEach(e=>{e.next()})}var ZR,aL;(aL=ZR||(ZR={})).ea="default",aL.Cache="cache";class Gee{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new wd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=wd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ZR.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GW{constructor(e){this.key=e}}class VW{constructor(e){this.key=e}}class Vee{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=it(),this.mutatedKeys=it(),this.Aa=dW(e),this.Ra=new Zc(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new sL,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,d)=>{const h=i.get(c),f=BS(this.query,d)?d:null,g=!!h&&this.mutatedKeys.has(h.key),m=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let v=!1;h&&f?h.data.isEqual(f.data)?g!==m&&(r.track({type:3,doc:f}),v=!0):this.ga(h,f)||(r.track({type:2,doc:f}),v=!0,(l&&this.Aa(f,l)>0||u&&this.Aa(f,u)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),v=!0):h&&!f&&(r.track({type:1,doc:h}),v=!0,(l||u)&&(a=!0)),v&&(f?(o=o.add(f),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((c,d)=>function(f,g){const m=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Be()}};return m(f)-m(g)}(c.type,d.type)||this.Aa(c.doc,d.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new wd(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new sL,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=it(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new VW(r))}),this.da.forEach(r=>{e.has(r)||n.push(new GW(r))}),n}ba(e){this.Ta=e.Ts,this.da=it();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return wd.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Hee{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Bee{constructor(e){this.key=e,this.va=!1}}class $ee{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Sh(a=>cW(a),HS),this.Ma=new Map,this.xa=new Set,this.Oa=new ln(Re.comparator),this.Na=new Map,this.La=new HP,this.Ba={},this.ka=new Map,this.qa=Cd.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Wee(t,e,n=!0){const r=jW(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await HW(r,e,n,!0),i}async function jee(t,e){const n=jW(t);await HW(n,e,!0,!1)}async function HW(t,e,n,r){const i=await gee(t.localStore,Gs(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await Uee(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&FW(t.remoteStore,i),a}async function Uee(t,e,n,r,i){t.Ka=(d,h,f)=>async function(m,v,C,y){let S=v.view.ma(C);S.ns&&(S=await eL(m.localStore,v.query,!1).then(({documents:b})=>v.view.ma(b,S)));const _=y&&y.targetChanges.get(v.targetId),E=y&&y.targetMismatches.get(v.targetId)!=null,R=v.view.applyChanges(S,m.isPrimaryClient,_,E);return uL(m,v.targetId,R.wa),R.snapshot}(t,d,h,f);const s=await eL(t.localStore,e,!0),o=new Vee(e,s.Ts),a=o.ma(s.documents),l=Em.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);uL(t,n,u.wa);const c=new Hee(e,n,o);return t.Fa.set(e,c),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function zee(t,e,n){const r=tt(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!HS(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await JR(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&WP(r.remoteStore,i.targetId),e_(r,i.targetId)}).catch(xP)):(e_(r,i.targetId),await JR(r.localStore,i.targetId,!0))}async function Kee(t,e){const n=tt(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),WP(n.remoteStore,r.targetId))}async function BW(t,e){const n=tt(t);try{const r=await pee(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Zt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Zt(o.va):i.removedDocuments.size>0&&(Zt(o.va),o.va=!1))}),await WW(n,r,e)}catch(r){await xP(r)}}function lL(t,e,n){const r=tt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=tt(o);l.onlineState=a;let u=!1;l.queries.forEach((c,d)=>{for(const h of d.j_)h.Z_(a)&&(u=!0)}),u&&qP(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function qee(t,e,n){const r=tt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new ln(Re.comparator);o=o.insert(s,sr.newNoDocument(s,Ve.min()));const a=it().add(s),l=new jS(Ve.min(),new Map,new ln(dt),o,a);await BW(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),YP(r)}else await JR(r.localStore,e,!1).then(()=>e_(r,e,n)).catch(xP)}function e_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||$W(t,r)})}function $W(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(WP(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),YP(t))}function uL(t,e,n){for(const r of n)r instanceof GW?(t.La.addReference(r.key,e),Yee(t,r)):r instanceof VW?(Ce("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||$W(t,r.key)):Be()}function Yee(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Ce("SyncEngine","New document in limbo: "+n),t.xa.add(r),YP(t))}function YP(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Re(Vt.fromString(e)),r=t.qa.next();t.Na.set(r,new Bee(n)),t.Oa=t.Oa.insert(n,r),FW(t.remoteStore,new wa(Gs(NP(n.path)),r,"TargetPurposeLimboResolution",PP.oe))}}async function WW(t,e,n){const r=tt(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(u=>{var c;if((u||n)&&r.isPrimaryClient){const d=u?!u.fromCache:(c=n==null?void 0:n.targetChanges.get(l.targetId))===null||c===void 0?void 0:c.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(u){i.push(u);const d=$P.Wi(l.targetId,u);s.push(d)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,u){const c=tt(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>re.forEach(u,h=>re.forEach(h.$i,f=>c.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>re.forEach(h.Ui,f=>c.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!wm(d))throw d;Ce("LocalStore","Failed to update sequence numbers: "+d)}for(const d of u){const h=d.targetId;if(!d.fromCache){const f=c.os.get(h),g=f.snapshotVersion,m=f.withLastLimboFreeSnapshotVersion(g);c.os=c.os.insert(h,m)}}}(r.localStore,s))}async function Qee(t,e){const n=tt(t);if(!n.currentUser.isEqual(e)){Ce("SyncEngine","User change. New user:",e.toKey());const r=await DW(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new ye(ae.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await WW(n,r.hs)}}function Xee(t,e){const n=tt(t),r=n.Na.get(e);if(r&&r.va)return it().add(r.key);{let i=it();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function jW(t){const e=tt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=BW.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Xee.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qee.bind(null,e),e.Ca.d_=Lee.bind(null,e.eventManager),e.Ca.$a=kee.bind(null,e.eventManager),e}class NC{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=US(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return hee(this.persistence,new cee,e.initialUser,this.serializer)}Ga(e){return new aee(BP.Zr,this.serializer)}Wa(e){return new vee}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}NC.provider={build:()=>new NC};class t_{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>lL(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Qee.bind(null,this.syncEngine),await Dee(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Mee}()}createDatastore(e){const n=US(e.databaseInfo.databaseId),r=function(s){return new See(s)}(e.databaseInfo);return function(s,o,a,l){return new Tee(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new _ee(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>lL(this.syncEngine,n,0),function(){return nL.D()?new nL:new yee}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,c){const d=new $ee(i,s,o,a,l,u);return c&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=tt(i);Ce("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await bm(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}t_.provider={build:()=>new t_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jee{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Po("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zee{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=rr.UNAUTHENTICATED,this.clientId=eW.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{Ce("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Ce("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=kW(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function DT(t,e){t.asyncQueue.verifyOperationInProgress(),Ce("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await DW(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function cL(t,e){t.asyncQueue.verifyOperationInProgress();const n=await ete(t);Ce("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>iL(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>iL(e.remoteStore,i)),t._onlineComponents=e}async function ete(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ce("FirestoreClient","Using user provided OfflineComponentProvider");try{await DT(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===ae.FAILED_PRECONDITION||i.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;gd("Error using user provided cache. Falling back to memory cache: "+n),await DT(t,new NC)}}else Ce("FirestoreClient","Using default OfflineComponentProvider"),await DT(t,new NC);return t._offlineComponents}async function tte(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ce("FirestoreClient","Using user provided OnlineComponentProvider"),await cL(t,t._uninitializedComponentsProvider._online)):(Ce("FirestoreClient","Using default OnlineComponentProvider"),await cL(t,new t_))),t._onlineComponents}async function dL(t){const e=await tte(t),n=e.eventManager;return n.onListen=Wee.bind(null,e.syncEngine),n.onUnlisten=zee.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=jee.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Kee.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UW(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zW(t,e,n){if(!n)throw new ye(ae.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function nte(t,e,n,r){if(e===!0&&r===!0)throw new ye(ae.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function pL(t){if(!Re.isDocumentKey(t))throw new ye(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function fL(t){if(Re.isDocumentKey(t))throw new ye(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function KS(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Be()}function Iy(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ye(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=KS(t);throw new ye(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function rte(t,e){if(e<=0)throw new ye(ae.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ye(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ye(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nte("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=UW((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ye(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ye(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ye(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qS{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gL({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gL(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new LJ;switch(r.type){case"firstParty":return new HJ(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ye(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=hL.get(n);r&&(Ce("ComponentProvider","Removing Datastore"),hL.delete(n),r.terminate())}(this),Promise.resolve()}}function ite(t,e,n,r={}){var i;const s=(t=Iy(t,qS))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&gd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=rr.MOCK_USER;else{a=JY(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new ye(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new rr(u)}t._authCredentials=new kJ(new Z$(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new nl(this.firestore,e,this._query)}}class mi{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ka(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mi(this.firestore,e,this._key)}}class ka extends nl{constructor(e,n,r){super(e,n,NP(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mi(this.firestore,null,new Re(e))}withConverter(e){return new ka(this.firestore,e,this._path)}}function YS(t,e,...n){if(t=br(t),zW("collection","path",e),t instanceof qS){const r=Vt.fromString(e,...n);return fL(r),new ka(t,null,r)}{if(!(t instanceof mi||t instanceof ka))throw new ye(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Vt.fromString(e,...n));return fL(r),new ka(t.firestore,null,r)}}function ste(t,e,...n){if(t=br(t),arguments.length===1&&(e=eW.newId()),zW("doc","path",e),t instanceof qS){const r=Vt.fromString(e,...n);return pL(r),new mi(t,null,new Re(r))}{if(!(t instanceof mi||t instanceof ka))throw new ye(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Vt.fromString(e,...n));return pL(r),new mi(t.firestore,t instanceof ka?t.converter:null,new Re(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new MW(this,"async_queue_retry"),this.Vu=()=>{const r=IT();r&&Ce("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=IT();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=IT();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Xc;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!wm(e))throw e;Ce("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Po("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=KP.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Be()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function vL(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class n_ extends qS{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new mL,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mL(e),this._firestoreClient=void 0,await e}}}function ote(t,e){const n=typeof t=="object"?t:d$(),r=typeof t=="string"?t:"(default)",i=vP(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=QY("firestore");s&&ite(i,...s)}return i}function ate(t){if(t._terminated)throw new ye(ae.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||lte(t),t._firestoreClient}function lte(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,c){return new ZJ(a,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,UW(c.experimentalLongPollingOptions),c.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Zee(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Sd(Kn.fromBase64String(e))}catch(n){throw new ye(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Sd(Kn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KW{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ye(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ar(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qW{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ye(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ye(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return dt(this._lat,e._lat)||dt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ute=/^__.*__$/;function YW(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Be()}}class JP{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new JP(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return r_(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(YW(this.Cu)&&ute.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class cte{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||US(e)}Qu(e,n,r,i=!1){return new JP({Cu:e,methodName:n,qu:r,path:ar.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function dte(t){const e=t._freezeSettings(),n=US(t._databaseId);return new cte(t._databaseId,!!e.ignoreUndefinedProperties,n)}function hte(t,e,n,r=!1){return ZP(n,t.Qu(r?4:3,e))}function ZP(t,e){if(QW(t=br(t)))return fte("Unsupported field value:",e,t),pte(t,e);if(t instanceof qW)return function(r,i){if(!YW(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=ZP(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=br(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return SZ(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Mn.fromDate(r);return{timestampValue:QR(i.serializer,s)}}if(r instanceof Mn){const s=new Mn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:QR(i.serializer,s)}}if(r instanceof QP)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Sd)return{bytesValue:bW(i.serializer,r._byteString)};if(r instanceof mi){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:TW(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof XP)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return LP(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${KS(r)}`)}(t,e)}function pte(t,e){const n={};return tW(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Sm(t,(r,i)=>{const s=ZP(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function QW(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Mn||t instanceof QP||t instanceof Sd||t instanceof mi||t instanceof qW||t instanceof XP)}function fte(t,e,n){if(!QW(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=KS(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}const gte=new RegExp("[~\\*/\\[\\]]");function mte(t,e,n){if(e.search(gte)>=0)throw r_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new KW(...e.split("."))._internalPath}catch{throw r_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function r_(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ye(ae.INVALID_ARGUMENT,a+t+l)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XW{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new mi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new vte(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(QS("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class vte extends XW{data(){return super.data()}}function QS(t,e){return typeof e=="string"?mte(t,e):e instanceof KW?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yte(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ye(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class eI{}class tI extends eI{}function nI(t,e,...n){let r=[];e instanceof eI&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof rI).length,a=s.filter(l=>l instanceof XS).length;if(o>1||o>0&&a>0)throw new ye(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class XS extends tI{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new XS(e,n,r)}_apply(e){const n=this._parse(e);return ZW(e._query,n),new nl(e.firestore,e.converter,zR(e._query,n))}_parse(e){const n=dte(e.firestore);return function(s,o,a,l,u,c,d){let h;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new ye(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){CL(d,c);const f=[];for(const g of d)f.push(yL(l,s,g));h={arrayValue:{values:f}}}else h=yL(l,s,d)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||CL(d,c),h=hte(a,o,d,c==="in"||c==="not-in");return gn.create(u,c,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function JW(t,e,n){const r=e,i=QS("where",t);return XS._create(i,r,n)}class rI extends eI{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new rI(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:vs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)ZW(o,l),o=zR(o,l)}(e._query,n),new nl(e.firestore,e.converter,zR(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class iI extends tI{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new iI(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new ye(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ye(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Xf(s,o)}(e._query,this._field,this._direction);return new nl(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new wh(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Cte(t,e="asc"){const n=e,r=QS("orderBy",t);return iI._create(r,n)}class sI extends tI{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new sI(e,n,r)}_apply(e){return new nl(e.firestore,e.converter,OC(e._query,this._limit,this._limitType))}}function oI(t){return rte("limit",t),sI._create("limit",t,"F")}function yL(t,e,n){if(typeof(n=br(n))=="string"){if(n==="")throw new ye(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uW(e)&&n.indexOf("/")!==-1)throw new ye(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Vt.fromString(n));if(!Re.isDocumentKey(r))throw new ye(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return kN(t,new Re(r))}if(n instanceof mi)return kN(t,n._key);throw new ye(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${KS(n)}.`)}function CL(t,e){if(!Array.isArray(t)||t.length===0)throw new ye(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ZW(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ye(ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ye(ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class wte{convertValue(e,n="none"){switch(Cu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(yu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Be()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Sm(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>nn(o.doubleValue));return new XP(s)}convertGeoPoint(e){return new QP(nn(e.latitude),nn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=DP(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(qf(e));default:return null}}convertTimestamp(e){const n=Wa(e);return new Mn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Vt.fromString(e);Zt(IW(r));const i=new Yf(r.get(1),r.get(3)),s=new Re(r.popFirst(5));return i.isEqual(n)||Po(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ej extends XW{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Dy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(QS("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Dy extends ej{data(e={}){return super.data(e)}}class Ste{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new $p(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Dy(this._firestore,this._userDataWriter,r.key,r,new $p(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ye(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Dy(i._firestore,i._userDataWriter,a.doc.key,a.doc,new $p(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Dy(i._firestore,i._userDataWriter,a.doc.key,a.doc,new $p(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:Ete(a.type),doc:l,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Ete(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Be()}}class tj extends wte{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sd(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new mi(this.firestore,null,n)}}function Rm(t,...e){var n,r,i;t=br(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||vL(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(vL(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,u,c;if(t instanceof mi)u=Iy(t.firestore,n_),c=NP(t._key.path),l={next:d=>{e[o]&&e[o](bte(u,t,d))},error:e[o+1],complete:e[o+2]};else{const d=Iy(t,nl);u=Iy(d.firestore,n_),c=d._query;const h=new tj(u);l={next:f=>{e[o]&&e[o](new Ste(u,h,d,f))},error:e[o+1],complete:e[o+2]},yte(t._query)}return function(h,f,g,m){const v=new Jee(m),C=new Gee(f,v,g);return h.asyncQueue.enqueueAndForget(async()=>Fee(await dL(h),C)),()=>{v.Za(),h.asyncQueue.enqueueAndForget(async()=>Nee(await dL(h),C))}}(ate(u),c,a,l)}function bte(t,e,n){const r=n.docs.get(e._key),i=new tj(t);return new ej(t,i,e._key,r,new $p(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Ch=i})(mh),pd(new gu("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new n_(new GJ(r.getProvider("auth-internal")),new $J(r.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ye(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yf(u.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Na(ON,"4.7.3",e),Na(ON,"4.7.3","esm2017")})();const Tte={apiKey:"AIzaSyAZdJP2Q13aY71xZsi5ZpCT8ZOwPGl2qEk",authDomain:"scout-sleeve.firebaseapp.com",projectId:"scout-sleeve",storageBucket:"scout-sleeve.firebasestorage.app",messagingSenderId:"182198637056",appId:"1:182198637056:web:ddc0d6571ce15ade46bee5"},nj=c$(Tte),_m=ote(nj),OT=OJ(nj);function aI(){const[t,e]=I.useState(null),[n,r]=I.useState(!0),[i,s]=I.useState(null);return I.useEffect(()=>{const l=wX(OT,u=>{e(u),r(!1)});return()=>l()},[]),{user:t,loading:n,error:i,login:async(l,u)=>{s(null);try{return await vX(OT,l,u),!0}catch(c){return s({"auth/user-not-found":"No account found with this email.","auth/wrong-password":"Incorrect password.","auth/invalid-email":"Invalid email address.","auth/too-many-requests":"Too many attempts. Try again later.","auth/invalid-credential":"Invalid email or password."}[c.code]||"Login failed. Check your credentials."),!1}},logout:()=>SX(OT)}}function Rte(){var i;const{pathname:t}=fh(),{user:e,logout:n}=aI(),r=(s,o)=>{const a=t===s||s!=="/"&&t.startsWith(s);return M.jsxs(JF,{to:s,className:`relative font-display font-semibold uppercase tracking-widest text-sm transition-all duration-200
          ${a?"text-grass-400":"text-grass-400/50 hover:text-grass-400/80"}`,children:[o,a&&M.jsx("span",{className:"absolute -bottom-0.5 left-0 right-0 h-0.5 bg-grass-500 rounded-full"})]})};return M.jsx("header",{className:"sticky top-0 z-50 border-b border-grass-500/10 bg-pitch-950/90 backdrop-blur-xl",children:M.jsxs("div",{className:"max-w-screen-2xl mx-auto px-6 h-16 flex items-center justify-between",children:[M.jsxs(JF,{to:"/dashboard",className:"flex items-center gap-3 group",children:[M.jsxs("div",{className:"relative w-9 h-9",children:[M.jsx("div",{className:"absolute inset-0 bg-grass-500 rounded-lg opacity-20 group-hover:opacity-30 transition-opacity"}),M.jsx("div",{className:"relative flex items-center justify-center w-full h-full",children:M.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5 text-grass-400",fill:"none",stroke:"currentColor",strokeWidth:"1.8",children:[M.jsx("ellipse",{cx:"12",cy:"12",rx:"10",ry:"7"}),M.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),M.jsx("circle",{cx:"12",cy:"12",r:"3.5"})]})})]}),M.jsxs("div",{children:[M.jsx("div",{className:"font-display font-bold text-lg tracking-wider text-white leading-none",children:"SCOUT"}),M.jsx("div",{className:"font-mono text-[10px] text-grass-500/70 tracking-widest leading-none",children:"DASHBOARD"})]})]}),M.jsxs("nav",{className:"hidden sm:flex items-center gap-6",children:[r("/dashboard","Leaderboard"),r("/dashboard/live","Live Demo")]}),M.jsxs("div",{className:"flex items-center gap-4",children:[M.jsxs("div",{className:"hidden sm:flex items-center gap-2 text-xs font-mono text-grass-500/60",children:[M.jsx("span",{className:"w-2 h-2 rounded-full bg-grass-500 animate-pulse-slow"}),"Live"]}),e&&M.jsxs("div",{className:"flex items-center gap-3",children:[M.jsxs("div",{className:"hidden sm:flex flex-col items-end",children:[M.jsx("span",{className:"text-xs font-semibold text-white/70 leading-none",children:(i=e.email)==null?void 0:i.split("@")[0]}),M.jsx("span",{className:"text-[10px] font-mono text-grass-500/40 leading-none mt-0.5",children:"Scout"})]}),M.jsxs("button",{onClick:n,className:"flex items-center gap-1.5 text-xs font-mono text-grass-400/50 hover:text-danger-400 transition-colors px-2 py-1 rounded-lg hover:bg-danger-500/10 border border-transparent hover:border-danger-500/20",children:[M.jsxs("svg",{viewBox:"0 0 24 24",className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[M.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),M.jsx("polyline",{points:"16 17 21 12 16 7"}),M.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),"Logout"]})]})]})]})})}function _te(){return M.jsxs("div",{className:"min-h-screen pitch-bg flex flex-col",children:[M.jsx(Rte,{}),M.jsx("main",{className:"flex-1 max-w-screen-2xl mx-auto w-full px-4 sm:px-6 py-6",children:M.jsx(IY,{})}),M.jsx("footer",{className:"border-t border-grass-500/10 text-center py-4 text-xs font-mono text-grass-500/30",children:"Scout Dashboard  Biomechanical Intelligence Platform"})]})}function Ate(){const t=gh();return M.jsxs("div",{className:"min-h-screen pitch-bg overflow-x-hidden",children:[M.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[M.jsx("div",{className:"absolute top-[-100px] left-1/2 -translate-x-1/2 w-[800px] h-[400px] rounded-full bg-grass-500/8 blur-3xl"}),M.jsx("div",{className:"absolute bottom-0 left-0 w-[400px] h-[400px] rounded-full bg-grass-600/5 blur-3xl"}),M.jsx("div",{className:"absolute bottom-0 right-0 w-[300px] h-[300px] rounded-full bg-grass-400/5 blur-3xl"})]}),M.jsx("nav",{className:"relative z-10 border-b border-grass-500/10 backdrop-blur-sm",children:M.jsxs("div",{className:"max-w-6xl mx-auto px-6 h-16 flex items-center justify-between",children:[M.jsxs("div",{className:"flex items-center gap-3",children:[M.jsx("div",{className:"w-8 h-8 rounded-lg bg-grass-500/15 border border-grass-500/25 flex items-center justify-center",children:M.jsxs("svg",{viewBox:"0 0 24 24",className:"w-4 h-4 text-grass-400",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[M.jsx("ellipse",{cx:"12",cy:"12",rx:"10",ry:"7"}),M.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),M.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}),M.jsx("span",{className:"font-display font-bold tracking-wider text-white uppercase",children:"Scout Sleeve"})]}),M.jsx("button",{onClick:()=>t("/login"),className:"btn-primary px-5 py-2 text-sm",children:"Scout Login "})]})}),M.jsxs("section",{className:"relative z-10 max-w-6xl mx-auto px-6 pt-20 pb-16 text-center",children:[M.jsxs("div",{className:"inline-flex items-center gap-2 bg-grass-500/10 border border-grass-500/20 rounded-full px-4 py-1.5 mb-8",children:[M.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-grass-400 animate-pulse"}),M.jsx("span",{className:"text-xs font-mono font-semibold text-grass-400 tracking-widest uppercase",children:"Hackathon Project 2026"})]}),M.jsxs("h1",{className:"font-display font-black text-6xl sm:text-8xl uppercase tracking-tight text-white leading-none mb-4",children:["Scout",M.jsx("span",{className:"text-grass-400",children:" Sleeve"})]}),M.jsx("p",{className:"font-display text-xl sm:text-2xl text-grass-400/60 uppercase tracking-widest mb-6",children:"Biomechanical Intelligence for Football"}),M.jsx("p",{className:"text-grass-300/60 text-lg max-w-2xl mx-auto leading-relaxed mb-10",children:"A wearable IoT sleeve + real-time web dashboard that detects injury risk, scores athletes objectively, and discovers hidden talent  anywhere in the world."}),M.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4",children:[M.jsx("button",{onClick:()=>t("/login"),className:"btn-primary px-8 py-3.5 text-base",children:"Open Scout Dashboard "}),M.jsx("a",{href:"#how",className:"btn-ghost px-6 py-3 text-base border border-grass-500/20 rounded-lg",children:"Learn More "})]})]}),M.jsx("section",{className:"relative z-10 border-y border-grass-500/10 bg-pitch-900/40 backdrop-blur-sm",children:M.jsx("div",{className:"max-w-6xl mx-auto px-6 py-8 grid grid-cols-2 sm:grid-cols-4 gap-6 text-center",children:[{value:"0100",label:"Efficiency Score"},{value:"Live",label:"Real-time Updates"},{value:"4",label:"Biomechanical Metrics"},{value:"",label:"Athletes Tracked"}].map(e=>M.jsxs("div",{children:[M.jsx("div",{className:"font-display font-black text-4xl text-grass-400",children:e.value}),M.jsx("div",{className:"text-xs font-mono text-grass-400/40 uppercase tracking-widest mt-1",children:e.label})]},e.label))})}),M.jsx("section",{id:"how",className:"relative z-10 max-w-6xl mx-auto px-6 py-20",children:M.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[M.jsxs("div",{children:[M.jsx("div",{className:"inline-block bg-danger-500/10 border border-danger-500/20 rounded-full px-3 py-1 text-xs font-mono text-danger-400 uppercase tracking-widest mb-4",children:"The Problem"}),M.jsxs("h2",{className:"font-display font-bold text-4xl uppercase tracking-wide text-white mb-6",children:["Talent scouting is",M.jsx("br",{}),M.jsx("span",{className:"text-danger-400",children:"blind to biomechanics"})]}),M.jsxs("div",{className:"space-y-4 text-grass-300/60 leading-relaxed",children:[M.jsxs("p",{children:["Scouts can judge speed, skill, and game intelligence  but they ",M.jsx("strong",{className:"text-white/80",children:"cannot see what's happening inside a player's knees and joints"})," during a match."]}),M.jsx("p",{children:"A talented 16-year-old with poor movement mechanics could suffer a serious ACL injury within a year, turning a promising recruitment into a costly mistake."}),M.jsxs("p",{children:["Worse  ",M.jsx("strong",{className:"text-white/80",children:"gifted athletes in rural areas and local clubs are never seen at all"}),", simply because no scout ever visits their ground."]})]})]}),M.jsx("div",{className:"space-y-3",children:[{icon:"",title:"Subjective Observation",desc:"Scouting decisions based on gut feeling, not objective data."},{icon:"",title:"Hidden Injury Risk",desc:"Dangerous movement patterns invisible to the human eye."},{icon:"",title:"Geographic Bias",desc:"Talent in small towns and rural areas goes completely unnoticed."},{icon:"",title:"Costly Recruitment Errors",desc:"Clubs invest in players who break down within their first season."}].map(e=>M.jsxs("div",{className:"panel px-5 py-4 flex items-start gap-4",children:[M.jsx("span",{className:"text-2xl flex-shrink-0",children:e.icon}),M.jsxs("div",{children:[M.jsx("div",{className:"font-semibold text-white text-sm",children:e.title}),M.jsx("div",{className:"text-xs text-grass-400/50 mt-0.5",children:e.desc})]})]},e.title))})]})}),M.jsx("section",{className:"relative z-10 border-t border-grass-500/10 bg-pitch-900/30",children:M.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-20",children:[M.jsxs("div",{className:"text-center mb-14",children:[M.jsx("div",{className:"inline-block bg-grass-500/10 border border-grass-500/20 rounded-full px-3 py-1 text-xs font-mono text-grass-400 uppercase tracking-widest mb-4",children:"Our Solution"}),M.jsx("h2",{className:"font-display font-bold text-4xl uppercase tracking-wide text-white",children:"How Scout Sleeve Works"})]}),M.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6 mb-16",children:[{step:"01",icon:"",title:"Athlete Wears the Sleeve",desc:"The IoT wearable captures valgus angle, G-force, and rotational velocity on every jump and cut  in real time."},{step:"02",icon:"",title:"Data Streams to Firebase",desc:"Each movement event uploads instantly to the cloud with an AI-generated efficiency score and risk classification."},{step:"03",icon:"",title:"Scouts See It Live",desc:"The Scout Dashboard shows a live leaderboard, trend charts, and risk alerts  updated the moment a player moves."}].map(e=>M.jsxs("div",{className:"panel p-7 relative overflow-hidden",children:[M.jsx("div",{className:"absolute top-4 right-4 font-display font-black text-5xl text-grass-500/08",children:e.step}),M.jsx("span",{className:"text-4xl mb-4 block",children:e.icon}),M.jsx("h3",{className:"font-display font-bold text-lg uppercase tracking-wide text-white mb-2",children:e.title}),M.jsx("p",{className:"text-sm text-grass-400/50 leading-relaxed",children:e.desc})]},e.step))}),M.jsxs("div",{className:"panel p-8",children:[M.jsx("h3",{className:"font-display font-bold text-center text-xl uppercase tracking-widest text-grass-400 mb-8",children:"4 Biomechanical Metrics  1 Unified Score"}),M.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[{icon:"",name:"Valgus Angle",unit:"degrees",desc:"Knee inward collapse",good:"< 10",danger:"> 15"},{icon:"",name:"Peak Vertical G",unit:"G-force",desc:"Landing impact",good:" 4G",danger:"> 5.5G"},{icon:"",name:"Peak Lateral G",unit:"G-force",desc:"Side cut force",good:" 2G",danger:"> 3G"},{icon:"",name:"Rotational Velocity",unit:"rad/s",desc:"Knee twist speed",good:" 2.5",danger:"> 3.5"}].map(e=>M.jsxs("div",{className:"bg-pitch-800/50 rounded-xl p-4 border border-grass-500/10 text-center",children:[M.jsx("div",{className:"text-3xl mb-2",children:e.icon}),M.jsx("div",{className:"font-display font-bold text-sm uppercase tracking-wide text-white mb-1",children:e.name}),M.jsxs("div",{className:"text-[10px] font-mono text-grass-400/40 mb-3",children:[e.unit,"  ",e.desc]}),M.jsxs("div",{className:"flex justify-between text-[10px] font-mono",children:[M.jsxs("span",{className:"text-grass-400",children:[" ",e.good]}),M.jsxs("span",{className:"text-danger-400",children:[" ",e.danger]})]})]},e.name))})]})]})}),M.jsxs("section",{className:"relative z-10 border-t border-grass-500/10 max-w-6xl mx-auto px-6 py-20",children:[M.jsxs("div",{className:"text-center mb-12",children:[M.jsx("h2",{className:"font-display font-bold text-4xl uppercase tracking-wide text-white mb-3",children:"Who Benefits"}),M.jsx("p",{className:"text-grass-400/50 max-w-xl mx-auto",children:"Scout Sleeve democratises talent discovery  making world-class biomechanical analysis available to every athlete, everywhere."})]}),M.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[{icon:"",title:"Scouts",desc:"Objective rankings replace subjective observation. Filter, compare, and shortlist athletes in seconds."},{icon:"",title:"Clubs & Academies",desc:"Reduce costly recruitment errors by screening for injury risk before signing players."},{icon:"",title:"Rural Talent",desc:"A player training in a village ground appears on the same leaderboard as academy players worldwide."},{icon:"",title:"Athletes",desc:"Real-time feedback on every movement helps players correct their technique and reduce injury risk."}].map(e=>M.jsxs("div",{className:"panel p-6 text-center",children:[M.jsx("div",{className:"text-4xl mb-3",children:e.icon}),M.jsx("div",{className:"font-display font-bold text-base uppercase tracking-wide text-white mb-2",children:e.title}),M.jsx("div",{className:"text-xs text-grass-400/50 leading-relaxed",children:e.desc})]},e.title))})]}),M.jsx("section",{className:"relative z-10 border-t border-grass-500/10 bg-pitch-900/40",children:M.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-20 text-center",children:[M.jsxs("h2",{className:"font-display font-black text-5xl uppercase tracking-tight text-white mb-3",children:["Every Movement",M.jsx("br",{}),M.jsx("span",{className:"text-grass-400",children:"Tells a Story"})]}),M.jsx("p",{className:"text-grass-400/50 mb-8",children:"Ready to read it?"}),M.jsx("button",{onClick:()=>t("/login"),className:"btn-primary px-10 py-4 text-lg",children:"Open Scout Dashboard "})]})}),M.jsx("footer",{className:"relative z-10 border-t border-grass-500/10 text-center py-6",children:M.jsx("p",{className:"text-xs font-mono text-grass-500/25",children:"Scout Sleeve  Biomechanical Intelligence Platform  Hackathon 2026"})})]})}function xte(){const{login:t,error:e,user:n,loading:r}=aI(),i=gh(),[s,o]=I.useState(""),[a,l]=I.useState(""),[u,c]=I.useState(!1);I.useEffect(()=>{!r&&n&&i("/dashboard",{replace:!0})},[n,r,i]);const d=async h=>{h.preventDefault(),c(!0),await t(s,a)&&i("/dashboard",{replace:!0}),c(!1)};return M.jsxs("div",{className:"min-h-screen pitch-bg flex items-center justify-center px-4",children:[M.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:M.jsx("div",{className:"absolute top-1/4 left-1/2 -translate-x-1/2 w-[600px] h-[600px] rounded-full bg-grass-500/5 blur-3xl"})}),M.jsxs("div",{className:"relative w-full max-w-md animate-slide-up",children:[M.jsxs("div",{className:"text-center mb-8",children:[M.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-grass-500/10 border border-grass-500/20 mb-4",children:M.jsxs("svg",{viewBox:"0 0 24 24",className:"w-8 h-8 text-grass-400",fill:"none",stroke:"currentColor",strokeWidth:"1.8",children:[M.jsx("ellipse",{cx:"12",cy:"12",rx:"10",ry:"7"}),M.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),M.jsx("circle",{cx:"12",cy:"12",r:"3.5"})]})}),M.jsx("h1",{className:"font-display font-bold text-4xl uppercase tracking-wider text-white",children:"Scout"}),M.jsx("p",{className:"font-display text-lg tracking-widest text-grass-500 uppercase mt-0.5",children:"Dashboard"}),M.jsx("p",{className:"text-sm text-grass-400/50 mt-3",children:"Authorised scouts only  enter your credentials"})]}),M.jsxs("div",{className:"panel p-8",children:[M.jsx("h2",{className:"font-display font-bold text-xl uppercase tracking-widest text-grass-400 mb-6",children:"Scout Login"}),M.jsxs("form",{onSubmit:d,className:"space-y-5",children:[M.jsxs("div",{className:"space-y-1.5",children:[M.jsx("label",{className:"text-[11px] font-display tracking-widest uppercase text-grass-400/60",children:"Email Address"}),M.jsx("input",{type:"email",required:!0,placeholder:"scout@club.com",value:s,onChange:h=>o(h.target.value),className:"input-field w-full",autoComplete:"email"})]}),M.jsxs("div",{className:"space-y-1.5",children:[M.jsx("label",{className:"text-[11px] font-display tracking-widest uppercase text-grass-400/60",children:"Password"}),M.jsx("input",{type:"password",required:!0,placeholder:"",value:a,onChange:h=>l(h.target.value),className:"input-field w-full",autoComplete:"current-password"})]}),e&&M.jsxs("div",{className:"bg-danger-500/10 border border-danger-500/25 rounded-lg px-4 py-3 text-sm text-danger-400 font-mono animate-fade-in",children:[" ",e]}),M.jsx("button",{type:"submit",disabled:u,className:"w-full btn-primary py-3 text-base disabled:opacity-50 disabled:cursor-not-allowed",children:u?M.jsxs("span",{className:"flex items-center justify-center gap-2",children:[M.jsx("span",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Signing in"]}):"Sign In "})]}),M.jsxs("p",{className:"text-center text-xs text-grass-400/30 mt-6 leading-relaxed",children:["Don't have an account? Contact your administrator.",M.jsx("br",{}),"Accounts are created in Firebase Authentication console."]})]}),M.jsx("p",{className:"text-center text-xs font-mono text-grass-500/20 mt-6",children:"Scout Sleeve  Biomechanical Intelligence Platform"})]})]})}var lI=Object.defineProperty,Pte=Object.defineProperties,Ite=Object.getOwnPropertyDescriptor,Dte=Object.getOwnPropertyDescriptors,LC=Object.getOwnPropertySymbols,rj=Object.prototype.hasOwnProperty,ij=Object.prototype.propertyIsEnumerable,wL=(t,e,n)=>e in t?lI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,me=(t,e)=>{for(var n in e||(e={}))rj.call(e,n)&&wL(t,n,e[n]);if(LC)for(var n of LC(e))ij.call(e,n)&&wL(t,n,e[n]);return t},Dt=(t,e)=>Pte(t,Dte(e)),Ote=(t,e)=>{var n={};for(var r in t)rj.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&LC)for(var r of LC(t))e.indexOf(r)<0&&ij.call(t,r)&&(n[r]=t[r]);return n},Nn=(t,e)=>{for(var n in e)lI(t,n,{get:e[n],enumerable:!0})},w=(t,e,n,r)=>{for(var i=r>1?void 0:r?Ite(e,n):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(r?o(e,n,i):o(i))||i);return r&&i&&lI(e,n,i),i},ls=(t,e)=>(n,r)=>e(n,r,t),sj={};Nn(sj,{attrToBoolean:()=>kC,attrToNumber:()=>Ga,attrToString:()=>Mte,defaultComparator:()=>Fte,exists:()=>J,jsonEquals:()=>i_,makeNull:()=>Vs,missing:()=>Te,missingOrEmpty:()=>Mi,toStringOrNull:()=>Jf,values:()=>eu});function Vs(t){return t==null||t===""?null:t}function J(t,e=!1){return t!=null&&(t!==""||e)}function Te(t){return!J(t)}function Mi(t){return t==null||t.length===0}function Jf(t){return t!=null&&typeof t.toString=="function"?t.toString():null}function Ga(t){if(t===void 0)return;if(t===null||t==="")return null;if(typeof t=="number")return isNaN(t)?void 0:t;const e=parseInt(t,10);return isNaN(e)?void 0:e}function kC(t){if(t!==void 0)return t===null||t===""?!1:typeof t=="boolean"?t:/true/i.test(t)}function Mte(t){if(!(t==null||t===""))return t}function i_(t,e){const n=t?JSON.stringify(t):null,r=e?JSON.stringify(e):null;return n===r}function Fte(t,e,n=!1){const r=t==null,i=e==null;if(t&&t.toNumber&&(t=t.toNumber()),e&&e.toNumber&&(e=e.toNumber()),r&&i)return 0;if(r)return-1;if(i)return 1;function s(o,a){return o>a?1:o<a?-1:0}if(typeof t!="string"||!n)return s(t,e);try{return t.localeCompare(e)}catch{return s(t,e)}}function eu(t){if(t instanceof Set||t instanceof Map){const e=[];return t.forEach(n=>e.push(n)),e}return Object.values(t)}var Nte=class{constructor(){this.existingKeys={}}addExistingKeys(t){for(let e=0;e<t.length;e++)this.existingKeys[t[e]]=!0}getUniqueKey(t,e){t=Jf(t);let n=0;for(;;){let r;if(t?(r=t,n!==0&&(r+="_"+n)):e?(r=e,n!==0&&(r+="_"+n)):r=n,!this.existingKeys[r])return this.existingKeys[r]=!0,String(r);n++}}},oj={};Nn(oj,{SKIP_JS_BUILTINS:()=>JS,cloneObject:()=>uI,deepCloneDefinition:()=>GC,getAllValuesInObject:()=>Ua,getValueUsingField:()=>ed,isNonNullObject:()=>VC,iterateObject:()=>lr,mergeDeep:()=>Br,removeAllReferences:()=>aj});var JS=new Set(["__proto__","constructor","prototype"]);function lr(t,e){if(t!=null){if(Array.isArray(t)){for(let n=0;n<t.length;n++)e(n.toString(),t[n]);return}for(const[n,r]of Object.entries(t))e(n,r)}}function uI(t){const e={},n=Object.keys(t);for(let r=0;r<n.length;r++){if(JS.has(n[r]))continue;const i=n[r],s=t[i];e[i]=s}return e}function GC(t,e){if(!t)return;const n=t,r={};return Object.keys(n).forEach(i=>{if(e&&e.indexOf(i)>=0||JS.has(i))return;const s=n[i];VC(s)&&s.constructor===Object?r[i]=GC(s):r[i]=s}),r}function Ua(t){if(!t)return[];const e=Object;if(typeof e.values=="function")return e.values(t);const n=[];for(const r in t)t.hasOwnProperty(r)&&t.propertyIsEnumerable(r)&&n.push(t[r]);return n}function Br(t,e,n=!0,r=!1){J(e)&&lr(e,(i,s)=>{if(JS.has(i))return;let o=t[i];o!==s&&(r&&o==null&&s!=null&&typeof s=="object"&&s.constructor===Object&&(o={},t[i]=o),VC(s)&&VC(o)&&!Array.isArray(o)?Br(o,s,n,r):(n||s!==void 0)&&(t[i]=s))})}function ed(t,e,n){if(!e||!t)return;if(!n)return t[e];const r=e.split(".");let i=t;for(let s=0;s<r.length;s++){if(i==null)return;i=i[r[s]]}return i}function aj(t,e=[],n){Object.keys(t).forEach(o=>{typeof t[o]=="object"&&!e.includes(o)&&(t[o]=void 0)});const r=Object.getPrototypeOf(t),i={},s=o=>`AG Grid: Grid API function ${o}() cannot be called as the grid has been destroyed.
    It is recommended to remove local references to the grid api. Alternatively, check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
    To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${n}`;Object.getOwnPropertyNames(r).forEach(o=>{if(typeof r[o]=="function"&&!e.includes(o)){const l=()=>{console.warn(s(o))};i[o]={value:l,writable:!0}}}),Object.defineProperties(t,i)}function VC(t){return typeof t=="object"&&t!==null}var lj={};Nn(lj,{compose:()=>Lte,debounce:()=>yr,doOnce:()=>Ed,errorOnce:()=>$l,executeAfter:()=>cj,executeInAWhile:()=>uj,executeNextVMTurn:()=>s_,getFunctionName:()=>ZS,isFunction:()=>eE,noop:()=>kte,throttle:()=>o_,waitUntil:()=>cI,warnOnce:()=>we});var SL={};function Ed(t,e){SL[e]||(t(),SL[e]=!0)}function we(t){Ed(()=>console.warn("AG Grid: "+t),t)}function $l(t){Ed(()=>console.error("AG Grid: "+t),t)}function ZS(t){if(t.name)return t.name;const e=/function\s+([^\(]+)/.exec(t.toString());return e&&e.length===2?e[1].trim():null}function eE(t){return!!(t&&t.constructor&&t.call&&t.apply)}function uj(t){cj(t,400)}var MT=[],FT=!1;function s_(t){MT.push(t),!FT&&(FT=!0,window.setTimeout(()=>{const e=MT.slice();MT.length=0,FT=!1,e.forEach(n=>n())},0))}function cj(t,e=0){t.length>0&&window.setTimeout(()=>t.forEach(n=>n()),e)}function yr(t,e){let n;return function(...r){const i=this;window.clearTimeout(n),n=window.setTimeout(function(){t.apply(i,r)},e)}}function o_(t,e){let n=0;return function(...r){const i=this,s=new Date().getTime();s-n<e||(n=s,t.apply(i,r))}}function cI(t,e,n=100,r){const i=new Date().getTime();let s=null,o=!1;const a=()=>{const l=new Date().getTime()-i>n;(t()||l)&&(e(),o=!0,s!=null&&(window.clearInterval(s),s=null),l&&r&&console.warn(r))};a(),o||(s=window.setInterval(a,10))}function Lte(...t){return e=>t.reduce((n,r)=>r(n),e)}var kte=()=>{},dj=(t=>(t.CommunityCoreModule="@ag-grid-community/core",t.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",t.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",t.CsvExportModule="@ag-grid-community/csv-export",t.EnterpriseCoreModule="@ag-grid-enterprise/core",t.RowGroupingModule="@ag-grid-enterprise/row-grouping",t.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",t.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",t.MenuModule="@ag-grid-enterprise/menu",t.SetFilterModule="@ag-grid-enterprise/set-filter",t.MultiFilterModule="@ag-grid-enterprise/multi-filter",t.StatusBarModule="@ag-grid-enterprise/status-bar",t.SideBarModule="@ag-grid-enterprise/side-bar",t.RangeSelectionModule="@ag-grid-enterprise/range-selection",t.MasterDetailModule="@ag-grid-enterprise/master-detail",t.RichSelectModule="@ag-grid-enterprise/rich-select",t.GridChartsModule="@ag-grid-enterprise/charts",t.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",t.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",t.ExcelExportModule="@ag-grid-enterprise/excel-export",t.ClipboardModule="@ag-grid-enterprise/clipboard",t.SparklinesModule="@ag-grid-enterprise/sparklines",t.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",t.AngularModule="@ag-grid-community/angular",t.ReactModule="@ag-grid-community/react",t.VueModule="@ag-grid-community/vue",t))(dj||{}),tE=class ct{static register(e){ct.__register(e,!0,void 0)}static registerModules(e){ct.__registerModules(e,!0,void 0)}static __register(e,n,r){ct.runVersionChecks(e),r!==void 0?(ct.areGridScopedModules=!0,ct.gridModulesMap[r]===void 0&&(ct.gridModulesMap[r]={}),ct.gridModulesMap[r][e.moduleName]=e):ct.globalModulesMap[e.moduleName]=e,ct.setModuleBased(n)}static __unRegisterGridModules(e){delete ct.gridModulesMap[e]}static __registerModules(e,n,r){ct.setModuleBased(n),e&&e.forEach(i=>ct.__register(i,n,r))}static isValidModuleVersion(e){const[n,r]=e.version.split(".")||[],[i,s]=ct.currentModuleVersion.split(".")||[];return n===i&&r===s}static runVersionChecks(e){if(ct.currentModuleVersion||(ct.currentModuleVersion=e.version),e.version?ct.isValidModuleVersion(e)||console.error(`AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '${e.moduleName}' is version ${e.version} but the other modules are version ${this.currentModuleVersion}. Please update all modules to the same version.`):console.error(`AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '${e.moduleName}' is incompatible. Please update all modules to the same version.`),e.validate){const n=e.validate();n.isValid||console.error(`AG Grid: ${n.message}`)}}static setModuleBased(e){ct.moduleBased===void 0?ct.moduleBased=e:ct.moduleBased!==e&&Ed(()=>{console.warn("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),console.warn("Please see https://www.ag-grid.com/javascript-grid/modules/ for more information.")},"ModulePackageCheck")}static __setIsBundled(){ct.isBundled=!0}static __assertRegistered(e,n,r){var i;if(this.__isRegistered(e,r))return!0;const s=n+e;let o;if(ct.isBundled)o=`AG Grid: unable to use ${n} as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:
        
        <script src="https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js"><\/script>
        
For more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise`;else if(ct.moduleBased||ct.moduleBased===void 0){let a=(i=Object.entries(dj).find(([l,u])=>u===e))==null?void 0:i[0];o=`AG Grid: unable to use ${n} as the ${a} is not registered${ct.areGridScopedModules?` for gridId: ${r}`:""}. Check if you have registered the module:
           
    import { ModuleRegistry } from '@ag-grid-community/core';
    import { ${a} } from '${e}';
    
    ModuleRegistry.registerModules([ ${a} ]);

For more info see: https://www.ag-grid.com/javascript-grid/modules/`}else o=`AG Grid: unable to use ${n} as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:
            
    import 'ag-grid-enterprise';`;return Ed(()=>{console.warn(o)},s),!1}static __isRegistered(e,n){var r;return!!ct.globalModulesMap[e]||!!((r=ct.gridModulesMap[n])!=null&&r[e])}static __getRegisteredModules(e){return[...eu(ct.globalModulesMap),...eu(ct.gridModulesMap[e]||{})]}static __getGridRegisteredModules(e){var n;return eu((n=ct.gridModulesMap[e])!=null?n:{})||[]}static __isPackageBased(){return!ct.moduleBased}};tE.globalModulesMap={};tE.gridModulesMap={};tE.areGridScopedModules=!1;var nt=tE,Gte=class{constructor(t,e){if(this.beanWrappers={},this.destroyed=!1,!t||!t.beanClasses)return;this.contextParams=t,this.logger=e,this.logger.log(">> creating ag-Application Context"),this.createBeans();const n=this.getBeanInstances();this.wireBeans(n),this.logger.log(">> ag-Application Context ready - component is alive")}getBeanInstances(){return eu(this.beanWrappers).map(t=>t.beanInstance)}createBean(t,e){if(!t)throw Error("Can't wire to bean since it is null");return this.wireBeans([t],e),t}wireBeans(t,e){this.autoWireBeans(t),this.methodWireBeans(t),this.callLifeCycleMethods(t,"preConstructMethods"),J(e)&&t.forEach(e),this.callLifeCycleMethods(t,"postConstructMethods")}createBeans(){this.contextParams.beanClasses.forEach(this.createBeanWrapper.bind(this)),lr(this.beanWrappers,(e,n)=>{let r;n.bean.__agBeanMetaData&&n.bean.__agBeanMetaData.autowireMethods&&n.bean.__agBeanMetaData.autowireMethods.agConstructor&&(r=n.bean.__agBeanMetaData.autowireMethods.agConstructor);const i=this.getBeansForParameters(r,n.bean.name),s=new(n.bean.bind.apply(n.bean,[null,...i]));n.beanInstance=s});const t=Object.keys(this.beanWrappers).join(", ");this.logger.log(`created beans: ${t}`)}createBeanWrapper(t){const e=t.__agBeanMetaData;if(!e){let r;t.prototype.constructor?r=ZS(t.prototype.constructor):r=""+t,console.error(`Context item ${r} is not a bean`);return}const n={bean:t,beanInstance:null,beanName:e.beanName};this.beanWrappers[e.beanName]=n}autoWireBeans(t){t.forEach(e=>{this.forEachMetaDataInHierarchy(e,(n,r)=>{const i=n.agClassAttributes;i&&i.forEach(s=>{const o=this.lookupBeanInstance(r,s.beanName,s.optional);e[s.attributeName]=o})})})}methodWireBeans(t){t.forEach(e=>{this.forEachMetaDataInHierarchy(e,(n,r)=>{lr(n.autowireMethods,(i,s)=>{if(i==="agConstructor")return;const o=this.getBeansForParameters(s,r);e[i].apply(e,o)})})})}forEachMetaDataInHierarchy(t,e){let n=Object.getPrototypeOf(t);for(;n!=null;){const r=n.constructor;if(r.hasOwnProperty("__agBeanMetaData")){const i=r.__agBeanMetaData,s=this.getBeanName(r);e(i,s)}n=Object.getPrototypeOf(n)}}getBeanName(t){if(t.__agBeanMetaData&&t.__agBeanMetaData.beanName)return t.__agBeanMetaData.beanName;const e=t.toString();return e.substring(9,e.indexOf("("))}getBeansForParameters(t,e){const n=[];return t&&lr(t,(r,i)=>{const s=this.lookupBeanInstance(e,i);n[Number(r)]=s}),n}lookupBeanInstance(t,e,n=!1){if(this.destroyed)return this.logger.log(`AG Grid: bean reference ${e} is used after the grid is destroyed!`),null;if(e==="context")return this;if(this.contextParams.providedBeanInstances&&this.contextParams.providedBeanInstances.hasOwnProperty(e))return this.contextParams.providedBeanInstances[e];const r=this.beanWrappers[e];return r?r.beanInstance:(n||console.error(`AG Grid: unable to find bean reference ${e} while initialising ${t}`),null)}callLifeCycleMethods(t,e){t.forEach(n=>this.callLifeCycleMethodsOnBean(n,e))}callLifeCycleMethodsOnBean(t,e,n){const r={};this.forEachMetaDataInHierarchy(t,s=>{const o=s[e];o&&o.forEach(a=>{a!=n&&(r[a]=!0)})}),Object.keys(r).forEach(s=>t[s]())}getBean(t){return this.lookupBeanInstance("getBean",t,!0)}destroy(){if(this.destroyed)return;this.destroyed=!0,this.logger.log(">> Shutting down ag-Application Context");const t=this.getBeanInstances();this.destroyBeans(t),this.contextParams.providedBeanInstances=null,nt.__unRegisterGridModules(this.contextParams.gridId),this.logger.log(">> ag-Application Context shut down - component is dead")}destroyBean(t){t&&this.destroyBeans([t])}destroyBeans(t){return t?(t.forEach(e=>{this.callLifeCycleMethodsOnBean(e,"preDestroyMethods","destroy");const n=e;typeof n.destroy=="function"&&n.destroy()}),[]):[]}isDestroyed(){return this.destroyed}getGridId(){return this.contextParams.gridId}};function hj(t,e,n){const r=wu(t.constructor);r.preConstructMethods||(r.preConstructMethods=[]),r.preConstructMethods.push(e)}function te(t,e,n){const r=wu(t.constructor);r.postConstructMethods||(r.postConstructMethods=[]),r.postConstructMethods.push(e)}function Pr(t,e,n){const r=wu(t.constructor);r.preDestroyMethods||(r.preDestroyMethods=[]),r.preDestroyMethods.push(e)}function ce(t){return e=>{const n=wu(e);n.beanName=t}}function O(t){return(e,n,r)=>{pj(e,t,!1,e,n)}}function ut(t){return(e,n,r)=>{pj(e,t,!0,e,n)}}function pj(t,e,n,r,i,s){if(e===null){console.error("AG Grid: Autowired name should not be null");return}const o=wu(t.constructor);o.agClassAttributes||(o.agClassAttributes=[]),o.agClassAttributes.push({attributeName:i,beanName:e,optional:n})}function Li(t){return(e,n,r)=>{const i=typeof e=="function"?e:e.constructor;let s;if(typeof r=="number"){let o;n?(s=wu(i),o=n):(s=wu(i),o="agConstructor"),s.autowireMethods||(s.autowireMethods={}),s.autowireMethods[o]||(s.autowireMethods[o]={}),s.autowireMethods[o][r]=t}}}function wu(t){return t.hasOwnProperty("__agBeanMetaData")||(t.__agBeanMetaData={}),t.__agBeanMetaData}var ys=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setBeans(t,e,n=null,r=null){if(this.frameworkOverrides=e,this.gos=t,n){const i=t.useAsyncEvents();this.addGlobalListener(n,i)}r&&this.addGlobalListener(r,!1)}setFrameworkOverrides(t){this.frameworkOverrides=t}getListeners(t,e,n){const r=e?this.allAsyncListeners:this.allSyncListeners;let i=r.get(t);return!i&&n&&(i=new Set,r.set(t,i)),i}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(t,e,n=!1){this.getListeners(t,n,!0).add(e)}removeEventListener(t,e,n=!1){const r=this.getListeners(t,n,!1);r&&(r.delete(e),r.size===0&&(n?this.allAsyncListeners:this.allSyncListeners).delete(t))}addGlobalListener(t,e=!1){(e?this.globalAsyncListeners:this.globalSyncListeners).add(t)}removeGlobalListener(t,e=!1){(e?this.globalAsyncListeners:this.globalSyncListeners).delete(t)}dispatchEvent(t){let e=t;this.gos&&this.gos.addGridCommonParams(e),this.dispatchToListeners(e,!0),this.dispatchToListeners(e,!1),this.firedEvents[e.type]=!0}dispatchEventOnce(t){this.firedEvents[t.type]||this.dispatchEvent(t)}dispatchToListeners(t,e){var n;const r=t.type;if(e&&"event"in t){const l=t.event;l instanceof Event&&(t.eventPath=l.composedPath())}const i=(l,u)=>l.forEach(c=>{if(!u.has(c))return;const d=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>c(t)):()=>c(t);e?this.dispatchAsync(d):d()}),s=(n=this.getListeners(r,e,!1))!=null?n:new Set,o=new Set(s);o.size>0&&i(o,s),new Set(e?this.globalAsyncListeners:this.globalSyncListeners).forEach(l=>{const u=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>l(r,t)):()=>l(r,t);e?this.dispatchAsync(u):u()})}dispatchAsync(t){this.asyncFunctionsQueue.push(t),this.scheduled||(this.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)}),this.scheduled=!0)}flushAsyncQueue(){this.scheduled=!1;const t=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],t.forEach(e=>e())}};w([ls(0,Li("gridOptionsService")),ls(1,Li("frameworkOverrides")),ls(2,Li("globalEventListener")),ls(3,Li("globalSyncEventListener"))],ys.prototype,"setBeans",1);ys=w([ce("eventService")],ys);var dI=class{constructor(t){this.frameworkOverrides=t,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}wrap(t){let e=t;return this.frameworkOverrides.shouldWrapOutgoing&&(e=n=>{this.frameworkOverrides.wrapOutgoing(()=>t(n))},this.wrappedListeners.set(t,e)),e}wrapGlobal(t){let e=t;return this.frameworkOverrides.shouldWrapOutgoing&&(e=(n,r)=>{this.frameworkOverrides.wrapOutgoing(()=>t(n,r))},this.wrappedGlobalListeners.set(t,e)),e}unwrap(t){var e;return(e=this.wrappedListeners.get(t))!=null?e:t}unwrapGlobal(t){var e;return(e=this.wrappedGlobalListeners.get(t))!=null?e:t}},Vte={resizable:!0,sortable:!0},Hte=0;function fj(){return Hte++}var un=class gj{constructor(e,n,r,i){this.instanceId=fj(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.eventService=new ys,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=e,this.userProvidedColDef=n,this.colId=r,this.primary=i,this.setState(e)}getInstanceId(){return this.instanceId}setState(e){e.sort!==void 0?(e.sort==="asc"||e.sort==="desc")&&(this.sort=e.sort):(e.initialSort==="asc"||e.initialSort==="desc")&&(this.sort=e.initialSort);const n=e.sortIndex,r=e.initialSortIndex;n!==void 0?n!==null&&(this.sortIndex=n):r!==null&&(this.sortIndex=r);const i=e.hide,s=e.initialHide;i!==void 0?this.visible=!i:this.visible=!s,e.pinned!==void 0?this.setPinned(e.pinned):this.setPinned(e.initialPinned);const o=e.flex,a=e.initialFlex;o!==void 0?this.flex=o:a!==void 0&&(this.flex=a)}setColDef(e,n,r){this.colDef=e,this.userProvidedColDef=n,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),this.eventService.dispatchEvent(this.createColumnEvent("colDefChanged",r))}getUserProvidedColDef(){return this.userProvidedColDef}setParent(e){this.parent=e}getParent(){return this.parent}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}initialise(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip()}initDotNotation(){const e=this.gos.get("suppressFieldDotNotation");this.fieldContainsDots=J(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!e,this.tooltipFieldContainsDots=J(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!e}initMinAndMaxWidths(){var e,n;const r=this.colDef;this.minWidth=(e=r.minWidth)!=null?e:this.environment.getMinColWidth(),this.maxWidth=(n=r.maxWidth)!=null?n:Number.MAX_SAFE_INTEGER}initTooltip(){this.tooltipEnabled=J(this.colDef.tooltipField)||J(this.colDef.tooltipValueGetter)||J(this.colDef.tooltipComponent)}resetActualWidth(e){const n=this.calculateColInitialWidth(this.colDef);this.setActualWidth(n,e,!0)}calculateColInitialWidth(e){var n,r;const i=(n=e.minWidth)!=null?n:this.environment.getMinColWidth(),s=(r=e.maxWidth)!=null?r:Number.MAX_SAFE_INTEGER;let o;const a=Ga(e.width),l=Ga(e.initialWidth);return a!=null?o=a:l!=null?o=l:o=200,Math.max(Math.min(o,s),i)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){if(Te(this.colDef)||Te(this.colDef.showRowGroup))return!1;const n=this.colDef.showRowGroup===!0,r=this.colDef.showRowGroup===e;return n||r}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}addEventListener(e,n){var r,i;this.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.eventService.setFrameworkOverrides(this.frameworkOverrides),this.frameworkEventListenerService=new dI(this.frameworkOverrides));const s=(i=(r=this.frameworkEventListenerService)==null?void 0:r.wrap(n))!=null?i:n;this.eventService.addEventListener(e,s)}removeEventListener(e,n){var r,i;const s=(i=(r=this.frameworkEventListenerService)==null?void 0:r.unwrap(n))!=null?i:n;this.eventService.removeEventListener(e,s)}createColumnFunctionCallbackParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){if(typeof this.colDef.suppressNavigable=="boolean")return this.colDef.suppressNavigable;if(typeof this.colDef.suppressNavigable=="function"){const n=this.createColumnFunctionCallbackParams(e),r=this.colDef.suppressNavigable;return r(n)}return!1}isCellEditable(e){return e.group&&!this.gos.get("enableGroupEdit")?!1:this.isColumnFunc(e,this.colDef.editable)}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){return this.isColumnFunc(e,this.colDef.checkboxSelection)}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?this.colDef.suppressPaste:null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){var n;return(n=this.colDef[e])!=null?n:Vte[e]}isColumnFunc(e,n){if(typeof n=="boolean")return n;if(typeof n=="function"){const r=this.createColumnFunctionCallbackParams(e);return n(r)}return!1}setMoving(e,n){this.moving=e,this.eventService.dispatchEvent(this.createColumnEvent("movingChanged",n))}createColumnEvent(e,n){return this.gos.addGridCommonParams({type:e,column:this,columns:[this],source:n})}isMoving(){return this.moving}getSort(){return this.sort}setSort(e,n){this.sort!==e&&(this.sort=e,this.eventService.dispatchEvent(this.createColumnEvent("sortChanged",n))),this.dispatchStateUpdatedEvent("sort")}setMenuVisible(e,n){this.menuVisible!==e&&(this.menuVisible=e,this.eventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",n)))}isMenuVisible(){return this.menuVisible}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return Te(this.sort)}isSorting(){return J(this.sort)}getSortIndex(){return this.sortIndex}setSortIndex(e){this.sortIndex=e,this.dispatchStateUpdatedEvent("sortIndex")}setAggFunc(e){this.aggFunc=e,this.dispatchStateUpdatedEvent("aggFunc")}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,n){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.eventService.dispatchEvent(this.createColumnEvent("leftChanged",n)))}isFilterActive(){return this.filterActive}setFilterActive(e,n,r){this.filterActive!==e&&(this.filterActive=e,this.eventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",n)));const i=this.createColumnEvent("filterChanged",n);r&&Br(i,r),this.eventService.dispatchEvent(i)}isHovered(){return this.columnHoverService.isHovered(this)}setPinned(e){e===!0||e==="left"?this.pinned="left":e==="right"?this.pinned="right":this.pinned=null,this.dispatchStateUpdatedEvent("pinned")}setFirstRightPinned(e,n){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.eventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",n)))}setLastLeftPinned(e,n){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.eventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",n)))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(e,n){const r=e===!0;this.visible!==r&&(this.visible=r,this.eventService.dispatchEvent(this.createColumnEvent("visibleChanged",n))),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){const e=this.getColDef();return!e.suppressSpanHeaderHeight&&!e.autoHeaderHeight}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const n=e.getPaddingLevel()+1;let r=!0;for(;e;){if(!e.isPadding()){r=!1;break}e=e.getParent()}return{numberOfParents:n,isSpanningTotal:r}}getColDef(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getDefinition(){return this.colDef}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const n=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,n}createBaseColDefParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(Te(this.colDef.colSpan))return 1;const n=this.createBaseColDefParams(e),r=this.colDef.colSpan(n);return Math.max(r,1)}getRowSpan(e){if(Te(this.colDef.rowSpan))return 1;const n=this.createBaseColDefParams(e),r=this.colDef.rowSpan(n);return Math.max(r,1)}setActualWidth(e,n,r=!1){this.minWidth!=null&&(e=Math.max(e,this.minWidth)),this.maxWidth!=null&&(e=Math.min(e,this.maxWidth)),this.actualWidth!==e&&(this.actualWidth=e,this.flex&&n!=="flex"&&n!=="gridInitializing"&&(this.flex=null),r||this.fireColumnWidthChangedEvent(n)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.eventService.dispatchEvent(this.createColumnEvent("widthChanged",e))}isGreaterThanMax(e){return this.maxWidth!=null?e>this.maxWidth:!1}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex||0}setFlex(e){this.flex!==e&&(this.flex=e),this.dispatchStateUpdatedEvent("flex")}setMinimum(e){J(this.minWidth)&&this.setActualWidth(this.minWidth,e)}setRowGroupActive(e,n){this.rowGroupActive!==e&&(this.rowGroupActive=e,this.eventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",n))),this.dispatchStateUpdatedEvent("rowGroup")}isRowGroupActive(){return this.rowGroupActive}setPivotActive(e,n){this.pivotActive!==e&&(this.pivotActive=e,this.eventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",n))),this.dispatchStateUpdatedEvent("pivot")}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}setValueActive(e,n){this.aggregationActive!==e&&(this.aggregationActive=e,this.eventService.dispatchEvent(this.createColumnEvent("columnValueChanged",n)))}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}getMenuTabs(e){we("As of v31.1, 'getMenuTabs' is deprecated. Use 'getColDef().menuTabs ?? defaultValues' instead.");let n=this.getColDef().menuTabs;return n==null&&(n=e),n}dispatchStateUpdatedEvent(e){this.eventService.dispatchEvent({type:gj.EVENT_STATE_UPDATED,key:e})}};un.EVENT_MOVING_CHANGED="movingChanged";un.EVENT_LEFT_CHANGED="leftChanged";un.EVENT_WIDTH_CHANGED="widthChanged";un.EVENT_LAST_LEFT_PINNED_CHANGED="lastLeftPinnedChanged";un.EVENT_FIRST_RIGHT_PINNED_CHANGED="firstRightPinnedChanged";un.EVENT_VISIBLE_CHANGED="visibleChanged";un.EVENT_FILTER_CHANGED="filterChanged";un.EVENT_FILTER_ACTIVE_CHANGED="filterActiveChanged";un.EVENT_SORT_CHANGED="sortChanged";un.EVENT_COL_DEF_CHANGED="colDefChanged";un.EVENT_MENU_VISIBLE_CHANGED="menuVisibleChanged";un.EVENT_ROW_GROUP_CHANGED="columnRowGroupChanged";un.EVENT_PIVOT_CHANGED="columnPivotChanged";un.EVENT_VALUE_CHANGED="columnValueChanged";un.EVENT_STATE_UPDATED="columnStateUpdated";w([O("gridOptionsService")],un.prototype,"gos",2);w([O("environment")],un.prototype,"environment",2);w([O("columnHoverService")],un.prototype,"columnHoverService",2);w([O("frameworkOverrides")],un.prototype,"frameworkOverrides",2);w([te],un.prototype,"initialise",1);var ft=un,nE=class Wp{constructor(e,n,r,i){this.localEventService=new ys,this.expandable=!1,this.instanceId=fj(),this.expandableListenerRemoveCallback=null,this.colGroupDef=e,this.groupId=n,this.expanded=!!e&&!!e.openByDefault,this.padding=r,this.level=i}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0)}reset(e,n){this.colGroupDef=e,this.level=n,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e;const n={type:Wp.EVENT_EXPANDED_CHANGED};this.localEventService.dispatchEvent(n)}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}addLeafColumns(e){this.children&&this.children.forEach(n=>{n instanceof ft?e.push(n):n instanceof Wp&&n.addLeafColumns(e)})}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(n=>n.addEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(n=>n.removeEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,n=!1,r=!1;const i=this.findChildrenRemovingPadding();for(let o=0,a=i.length;o<a;o++){const l=i[o];if(!l.isVisible())continue;const u=l.getColumnGroupShow();u==="open"?(e=!0,r=!0):u==="closed"?(n=!0,r=!0):(e=!0,n=!0)}const s=e&&n&&r;if(this.expandable!==s){this.expandable=s;const o={type:Wp.EVENT_EXPANDABLE_CHANGED};this.localEventService.dispatchEvent(o)}}findChildrenRemovingPadding(){const e=[],n=r=>{r.forEach(i=>{i instanceof Wp&&i.isPadding()?n(i.children):e.push(i)})};return n(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}addEventListener(e,n){this.localEventService.addEventListener(e,n)}removeEventListener(e,n){this.localEventService.removeEventListener(e,n)}};nE.EVENT_EXPANDED_CHANGED="expandedChanged";nE.EVENT_EXPANDABLE_CHANGED="expandableChanged";w([Pr],nE.prototype,"destroy",1);var tn=nE,Bte={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},mj={};Nn(mj,{addSafePassiveEventListener:()=>_j,createEventPath:()=>Tj,getCtrlForEventTarget:()=>HC,getEventPath:()=>Rj,isElementInEventPath:()=>BC,isEventSupported:()=>pI,isStopPropagationForAgGrid:()=>ps,stopPropagationForAgGrid:()=>Cs});var vj={};Nn(vj,{areEqual:()=>Os,existsAndNotEmpty:()=>yj,flatten:()=>Ej,forEachReverse:()=>Ute,includes:()=>vi,insertArrayIntoArray:()=>a_,insertIntoArray:()=>Zf,last:()=>Je,moveInArray:()=>l_,pushAll:()=>u_,removeAllFromArray:()=>Sj,removeAllFromUnorderedArray:()=>wj,removeFromArray:()=>Gr,removeFromUnorderedArray:()=>hI,removeRepeatsFromArray:()=>Wte,shallowCompare:()=>$te,sortNumerically:()=>Cj,toStrings:()=>jte});function yj(t){return t!=null&&t.length>0}function Je(t){if(!(!t||!t.length))return t[t.length-1]}function Os(t,e,n){return t==null&&e==null?!0:t!=null&&e!=null&&t.length===e.length&&t.every((r,i)=>n?n(r,e[i]):e[i]===r)}function $te(t,e){return Os(t,e)}function Cj(t){return t.sort((e,n)=>e-n)}function Wte(t,e){if(t)for(let n=t.length-2;n>=0;n--){const r=t[n]===e,i=t[n+1]===e;r&&i&&t.splice(n+1,1)}}function hI(t,e){const n=t.indexOf(e);n>=0&&(t[n]=t[t.length-1],t.pop())}function Gr(t,e){const n=t.indexOf(e);n>=0&&t.splice(n,1)}function wj(t,e){for(let n=0;n<e.length;n++)hI(t,e[n])}function Sj(t,e){for(let n=0;n<e.length;n++)Gr(t,e[n])}function Zf(t,e,n){t.splice(n,0,e)}function a_(t,e,n){if(!(t==null||e==null))for(let r=e.length-1;r>=0;r--){const i=e[r];Zf(t,i,n)}}function l_(t,e,n){Sj(t,e),e.slice().reverse().forEach(r=>Zf(t,r,n))}function vi(t,e){return t.indexOf(e)>-1}function Ej(t){return[].concat.apply([],t)}function u_(t,e){e==null||t==null||e.forEach(n=>t.push(n))}function jte(t){return t.map(Jf)}function Ute(t,e){if(t!=null)for(let n=t.length-1;n>=0;n--)e(t[n],n)}var bj="__ag_Grid_Stop_Propagation",zte=["touchstart","touchend","touchmove","touchcancel","scroll"],NT={};function Cs(t){t[bj]=!0}function ps(t){return t[bj]===!0}var pI=(()=>{const t={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return n=>{if(typeof NT[n]=="boolean")return NT[n];const r=document.createElement(t[n]||"div");return n="on"+n,NT[n]=n in r}})();function HC(t,e,n){let r=e;for(;r;){const i=t.getDomData(r,n);if(i)return i;r=r.parentElement}return null}function BC(t,e){return!e||!t?!1:Rj(e).indexOf(t)>=0}function Tj(t){const e=[];let n=t.target;for(;n;)e.push(n),n=n.parentElement;return e}function Rj(t){const e=t;return e.path?e.path:e.composedPath?e.composedPath():Tj(e)}function _j(t,e,n,r){const s=vi(zte,n)?{passive:!0}:void 0;t&&t.addEventListener&&t.addEventListener(e,n,r,s)}var Vo=class Aj{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.lastChangeSetIdLookup={},this.propertyListenerId=0,this.isAlive=()=>!this.destroyed}getFrameworkOverrides(){return this.frameworkOverrides}getContext(){return this.context}destroy(){for(let e=0;e<this.destroyFunctions.length;e++)this.destroyFunctions[e]();this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchEvent({type:Aj.EVENT_DESTROYED})}addEventListener(e,n){this.localEventService||(this.localEventService=new ys),this.localEventService.addEventListener(e,n)}removeEventListener(e,n){this.localEventService&&this.localEventService.removeEventListener(e,n)}dispatchEvent(e){this.localEventService&&this.localEventService.dispatchEvent(e)}addManagedListener(e,n,r){if(this.destroyed)return;e instanceof HTMLElement?_j(this.getFrameworkOverrides(),e,n,r):e.addEventListener(n,r);const i=()=>(e.removeEventListener(n,r),null);return this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter(s=>s!==i),null)}setupGridOptionListener(e,n){this.gos.addEventListener(e,n);const r=()=>(this.gos.removeEventListener(e,n),null);return this.destroyFunctions.push(r),()=>(r(),this.destroyFunctions=this.destroyFunctions.filter(i=>i!==r),null)}addManagedPropertyListener(e,n){return this.destroyed?()=>null:this.setupGridOptionListener(e,n)}addManagedPropertyListeners(e,n){if(this.destroyed)return;const r=e.join("-")+this.propertyListenerId++,i=s=>{if(s.changeSet){if(s.changeSet&&s.changeSet.id===this.lastChangeSetIdLookup[r])return;this.lastChangeSetIdLookup[r]=s.changeSet.id}const o={type:"gridPropertyChanged",changeSet:s.changeSet,source:s.source};n(o)};e.forEach(s=>this.setupGridOptionListener(s,i))}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createManagedBean(e,n){const r=this.createBean(e,n);return this.addDestroyFunc(this.destroyBean.bind(this,e,n)),r}createBean(e,n,r){return(n||this.getContext()).createBean(e,r)}destroyBean(e,n){return(n||this.getContext()).destroyBean(e)}destroyBeans(e,n){if(e)for(let r=0;r<e.length;r++)this.destroyBean(e[r],n);return[]}};Vo.EVENT_DESTROYED="destroyed";w([O("frameworkOverrides")],Vo.prototype,"frameworkOverrides",2);w([O("context")],Vo.prototype,"context",2);w([O("eventService")],Vo.prototype,"eventService",2);w([O("gridOptionsService")],Vo.prototype,"gos",2);w([O("localeService")],Vo.prototype,"localeService",2);w([O("environment")],Vo.prototype,"environment",2);w([Pr],Vo.prototype,"destroy",1);var ee=Vo,eg=class extends ee{setBeans(t){this.logger=t.create("ColumnFactory")}createColumnTree(t,e,n,r){const i=new Nte,{existingCols:s,existingGroups:o,existingColKeys:a}=this.extractExistingTreeData(n);i.addExistingKeys(a);const l=this.recursivelyCreateColumns(t,0,e,s,i,o,r),u=this.findMaxDept(l,0);this.logger.log("Number of levels for grouped columns is "+u);const c=this.balanceColumnTree(l,0,u,i);return ao(null,c,(h,f)=>{h instanceof tn&&h.setupExpandable(),h.setOriginalParent(f)}),{columnTree:c,treeDept:u}}extractExistingTreeData(t){const e=[],n=[],r=[];return t&&ao(null,t,i=>{if(i instanceof tn){const s=i;n.push(s)}else{const s=i;r.push(s.getId()),e.push(s)}}),{existingCols:e,existingGroups:n,existingColKeys:r}}createForAutoGroups(t,e){return t.map(n=>this.createAutoGroupTreeItem(e,n))}createAutoGroupTreeItem(t,e){const n=this.findDepth(t);let r=e;for(let i=n-1;i>=0;i--){const s=new tn(null,`FAKE_PATH_${e.getId()}}_${i}`,!0,i);this.createBean(s),s.setChildren([r]),r.setOriginalParent(s),r=s}return n===0&&e.setOriginalParent(null),r}findDepth(t){let e=0,n=t;for(;n&&n[0]&&n[0]instanceof tn;)e++,n=n[0].getChildren();return e}balanceColumnTree(t,e,n,r){const i=[];for(let s=0;s<t.length;s++){const o=t[s];if(o instanceof tn){const a=o,l=this.balanceColumnTree(a.getChildren(),e+1,n,r);a.setChildren(l),i.push(a)}else{let a,l;for(let u=n-1;u>=e;u--){const c=r.getUniqueKey(null,null),d=this.createMergedColGroupDef(null),h=new tn(d,c,!0,e);this.createBean(h),l&&l.setChildren([h]),l=h,a||(a=l)}if(a&&l)if(i.push(a),t.some(c=>c instanceof tn)){l.setChildren([o]);continue}else{l.setChildren(t);break}i.push(o)}}return i}findMaxDept(t,e){let n=e;for(let r=0;r<t.length;r++){const i=t[r];if(i instanceof tn){const s=i,o=this.findMaxDept(s.getChildren(),e+1);n<o&&(n=o)}}return n}recursivelyCreateColumns(t,e,n,r,i,s,o){if(!t)return[];const a=new Array(t.length);for(let l=0;l<a.length;l++){const u=t[l];this.isColumnGroup(u)?a[l]=this.createColumnGroup(n,u,e,r,i,s,o):a[l]=this.createColumn(n,u,r,i,o)}return a}createColumnGroup(t,e,n,r,i,s,o){const a=this.createMergedColGroupDef(e),l=i.getUniqueKey(a.groupId||null,null),u=new tn(a,l,!1,n);this.createBean(u);const c=this.findExistingGroup(e,s);c&&s.splice(c.idx,1);let d=c==null?void 0:c.group;d&&u.setExpanded(d.isExpanded());const h=this.recursivelyCreateColumns(a.children,n+1,t,r,i,s,o);return u.setChildren(h),u}createMergedColGroupDef(t){const e={};return Object.assign(e,this.gos.get("defaultColGroupDef")),Object.assign(e,t),e}createColumn(t,e,n,r,i){const s=this.findExistingColumn(e,n);s&&(n==null||n.splice(s.idx,1));let o=s==null?void 0:s.column;if(o){const a=this.addColumnDefaultAndTypes(e,o.getColId());o.setColDef(a,e,i),this.applyColumnState(o,a,i)}else{const a=r.getUniqueKey(e.colId,e.field),l=this.addColumnDefaultAndTypes(e,a);o=new ft(l,e,a,t),this.context.createBean(o)}return this.dataTypeService.addColumnListeners(o),o}applyColumnState(t,e,n){const r=Ga(e.flex);if(r!==void 0&&t.setFlex(r),t.getFlex()<=0){const a=Ga(e.width);if(a!=null)t.setActualWidth(a,n);else{const l=t.getActualWidth();t.setActualWidth(l,n)}}e.sort!==void 0&&(e.sort=="asc"||e.sort=="desc"?t.setSort(e.sort,n):t.setSort(void 0,n));const s=Ga(e.sortIndex);s!==void 0&&t.setSortIndex(s);const o=kC(e.hide);o!==void 0&&t.setVisible(!o,n),e.pinned!==void 0&&t.setPinned(e.pinned)}findExistingColumn(t,e){if(e)for(let n=0;n<e.length;n++){const r=e[n].getUserProvidedColDef();if(!r)continue;if(t.colId!=null){if(e[n].getId()===t.colId)return{idx:n,column:e[n]};continue}if(t.field!=null){if(r.field===t.field)return{idx:n,column:e[n]};continue}if(r===t)return{idx:n,column:e[n]}}}findExistingGroup(t,e){if(t.groupId!=null)for(let r=0;r<e.length;r++){const i=e[r];if(i.getColGroupDef()&&i.getId()===t.groupId)return{idx:r,group:i}}}addColumnDefaultAndTypes(t,e){const n={},r=this.gos.get("defaultColDef");Br(n,r,!1,!0);const i=this.dataTypeService.updateColDefAndGetColumnType(n,t,e);i&&this.assignColumnTypes(i,n),Br(n,t,!1,!0);const s=this.gos.get("autoGroupColumnDef"),o=this.gos.isColumnsSortingCoupledToGroup();return t.rowGroup&&s&&o&&Br(n,{sort:s.sort,initialSort:s.initialSort},!1,!0),this.dataTypeService.validateColDef(n),n}assignColumnTypes(t,e){if(!t.length)return;const n=Object.assign({},Bte),r=this.gos.get("columnTypes")||{};lr(r,(i,s)=>{i in n?console.warn(`AG Grid: the column type '${i}' is a default column type and cannot be overridden.`):(s.type&&we("Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type."),n[i]=s)}),t.forEach(i=>{const s=n[i.trim()];s?Br(e,s,!1,!0):console.warn("AG Grid: colDef.type '"+i+"' does not correspond to defined gridOptions.columnTypes")})}isColumnGroup(t){return t.children!==void 0}};w([O("dataTypeService")],eg.prototype,"dataTypeService",2);w([ls(0,Li("loggerFactory"))],eg.prototype,"setBeans",1);eg=w([ce("columnFactory")],eg);function ao(t,e,n){if(e)for(let r=0;r<e.length;r++){const i=e[r];i instanceof tn&&ao(i,i.getChildren(),n),n(i,t)}}var rE=class Ts{constructor(e,n,r,i){this.displayedChildren=[],this.localEventService=new ys,this.groupId=n,this.partId=r,this.providedColumnGroup=e,this.pinned=i}static createUniqueId(e,n){return e+"_"+n}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}setParent(e){this.parent=e}getUniqueId(){return Ts.createUniqueId(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(n=>n.isMoving())}checkLeft(){if(this.displayedChildren.forEach(e=>{e instanceof Ts&&e.checkLeft()}),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const n=Je(this.displayedChildren).getLeft();this.setLeft(n)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.localEventService.dispatchEvent(this.createAgEvent(Ts.EVENT_LEFT_CHANGED)))}getPinned(){return this.pinned}createAgEvent(e){return{type:e}}addEventListener(e,n){this.localEventService.addEventListener(e,n)}removeEventListener(e,n){this.localEventService.removeEventListener(e,n)}getGroupId(){return this.groupId}getPartId(){return this.partId}isChildInThisGroupDeepSearch(e){let n=!1;return this.children.forEach(r=>{e===r&&(n=!0),r instanceof Ts&&r.isChildInThisGroupDeepSearch(e)&&(n=!0)}),n}getActualWidth(){let e=0;return this.displayedChildren&&this.displayedChildren.forEach(n=>{e+=n.getActualWidth()}),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach(n=>{n.isResizable()&&(e=!0)}),e}getMinWidth(){let e=0;return this.displayedChildren.forEach(n=>{e+=n.getMinWidth()||0}),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}addDisplayedLeafColumns(e){this.displayedChildren.forEach(n=>{n instanceof ft?e.push(n):n instanceof Ts&&n.addDisplayedLeafColumns(e)})}addLeafColumns(e){this.children.forEach(n=>{n instanceof ft?e.push(n):n instanceof Ts&&n.addLeafColumns(e)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return!this.isPadding()||!e||!e.isPadding()?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;e!=null&&e.isPadding();)e=e.getParent();if(!(e?e.providedColumnGroup.isExpandable():!1)){this.displayedChildren=this.children,this.localEventService.dispatchEvent(this.createAgEvent(Ts.EVENT_DISPLAYED_CHILDREN_CHANGED));return}this.children.forEach(r=>{if(r instanceof Ts&&(!r.displayedChildren||!r.displayedChildren.length))return;switch(r.getColumnGroupShow()){case"open":e.providedColumnGroup.isExpanded()&&this.displayedChildren.push(r);break;case"closed":e.providedColumnGroup.isExpanded()||this.displayedChildren.push(r);break;default:this.displayedChildren.push(r);break}}),this.localEventService.dispatchEvent(this.createAgEvent(Ts.EVENT_DISPLAYED_CHILDREN_CHANGED))}};rE.EVENT_LEFT_CHANGED="leftChanged";rE.EVENT_DISPLAYED_CHILDREN_CHANGED="displayedChildrenChanged";w([O("gridOptionsService")],rE.prototype,"gos",2);var Sn=rE,x=class{};x.EVENT_COLUMN_EVERYTHING_CHANGED="columnEverythingChanged";x.EVENT_NEW_COLUMNS_LOADED="newColumnsLoaded";x.EVENT_COLUMN_PIVOT_MODE_CHANGED="columnPivotModeChanged";x.EVENT_PIVOT_MAX_COLUMNS_EXCEEDED="pivotMaxColumnsExceeded";x.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged";x.EVENT_EXPAND_COLLAPSE_ALL="expandOrCollapseAll";x.EVENT_COLUMN_PIVOT_CHANGED="columnPivotChanged";x.EVENT_GRID_COLUMNS_CHANGED="gridColumnsChanged";x.EVENT_COLUMN_VALUE_CHANGED="columnValueChanged";x.EVENT_COLUMN_MOVED="columnMoved";x.EVENT_COLUMN_VISIBLE="columnVisible";x.EVENT_COLUMN_PINNED="columnPinned";x.EVENT_COLUMN_GROUP_OPENED="columnGroupOpened";x.EVENT_COLUMN_RESIZED="columnResized";x.EVENT_DISPLAYED_COLUMNS_CHANGED="displayedColumnsChanged";x.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED="suppressMovableColumns";x.EVENT_SUPPRESS_MENU_HIDE_CHANGED="suppressMenuHide";x.EVENT_SUPPRESS_FIELD_DOT_NOTATION="suppressFieldDotNotation";x.EVENT_VIRTUAL_COLUMNS_CHANGED="virtualColumnsChanged";x.EVENT_COLUMN_HEADER_MOUSE_OVER="columnHeaderMouseOver";x.EVENT_COLUMN_HEADER_MOUSE_LEAVE="columnHeaderMouseLeave";x.EVENT_COLUMN_HEADER_CLICKED="columnHeaderClicked";x.EVENT_COLUMN_HEADER_CONTEXT_MENU="columnHeaderContextMenu";x.EVENT_ASYNC_TRANSACTIONS_FLUSHED="asyncTransactionsFlushed";x.EVENT_ROW_GROUP_OPENED="rowGroupOpened";x.EVENT_ROW_DATA_UPDATED="rowDataUpdated";x.EVENT_PINNED_ROW_DATA_CHANGED="pinnedRowDataChanged";x.EVENT_RANGE_SELECTION_CHANGED="rangeSelectionChanged";x.EVENT_CHART_CREATED="chartCreated";x.EVENT_CHART_RANGE_SELECTION_CHANGED="chartRangeSelectionChanged";x.EVENT_CHART_OPTIONS_CHANGED="chartOptionsChanged";x.EVENT_CHART_DESTROYED="chartDestroyed";x.EVENT_TOOL_PANEL_VISIBLE_CHANGED="toolPanelVisibleChanged";x.EVENT_TOOL_PANEL_SIZE_CHANGED="toolPanelSizeChanged";x.EVENT_COLUMN_PANEL_ITEM_DRAG_START="columnPanelItemDragStart";x.EVENT_COLUMN_PANEL_ITEM_DRAG_END="columnPanelItemDragEnd";x.EVENT_MODEL_UPDATED="modelUpdated";x.EVENT_CUT_START="cutStart";x.EVENT_CUT_END="cutEnd";x.EVENT_PASTE_START="pasteStart";x.EVENT_PASTE_END="pasteEnd";x.EVENT_FILL_START="fillStart";x.EVENT_FILL_END="fillEnd";x.EVENT_RANGE_DELETE_START="rangeDeleteStart";x.EVENT_RANGE_DELETE_END="rangeDeleteEnd";x.EVENT_UNDO_STARTED="undoStarted";x.EVENT_UNDO_ENDED="undoEnded";x.EVENT_REDO_STARTED="redoStarted";x.EVENT_REDO_ENDED="redoEnded";x.EVENT_KEY_SHORTCUT_CHANGED_CELL_START="keyShortcutChangedCellStart";x.EVENT_KEY_SHORTCUT_CHANGED_CELL_END="keyShortcutChangedCellEnd";x.EVENT_CELL_CLICKED="cellClicked";x.EVENT_CELL_DOUBLE_CLICKED="cellDoubleClicked";x.EVENT_CELL_MOUSE_DOWN="cellMouseDown";x.EVENT_CELL_CONTEXT_MENU="cellContextMenu";x.EVENT_CELL_VALUE_CHANGED="cellValueChanged";x.EVENT_CELL_EDIT_REQUEST="cellEditRequest";x.EVENT_ROW_VALUE_CHANGED="rowValueChanged";x.EVENT_CELL_FOCUSED="cellFocused";x.EVENT_CELL_FOCUS_CLEARED="cellFocusCleared";x.EVENT_FULL_WIDTH_ROW_FOCUSED="fullWidthRowFocused";x.EVENT_ROW_SELECTED="rowSelected";x.EVENT_SELECTION_CHANGED="selectionChanged";x.EVENT_TOOLTIP_SHOW="tooltipShow";x.EVENT_TOOLTIP_HIDE="tooltipHide";x.EVENT_CELL_KEY_DOWN="cellKeyDown";x.EVENT_CELL_MOUSE_OVER="cellMouseOver";x.EVENT_CELL_MOUSE_OUT="cellMouseOut";x.EVENT_FILTER_CHANGED="filterChanged";x.EVENT_FILTER_MODIFIED="filterModified";x.EVENT_FILTER_OPENED="filterOpened";x.EVENT_ADVANCED_FILTER_BUILDER_VISIBLE_CHANGED="advancedFilterBuilderVisibleChanged";x.EVENT_SORT_CHANGED="sortChanged";x.EVENT_VIRTUAL_ROW_REMOVED="virtualRowRemoved";x.EVENT_ROW_CLICKED="rowClicked";x.EVENT_ROW_DOUBLE_CLICKED="rowDoubleClicked";x.EVENT_GRID_READY="gridReady";x.EVENT_GRID_PRE_DESTROYED="gridPreDestroyed";x.EVENT_GRID_SIZE_CHANGED="gridSizeChanged";x.EVENT_VIEWPORT_CHANGED="viewportChanged";x.EVENT_SCROLLBAR_WIDTH_CHANGED="scrollbarWidthChanged";x.EVENT_FIRST_DATA_RENDERED="firstDataRendered";x.EVENT_DRAG_STARTED="dragStarted";x.EVENT_DRAG_STOPPED="dragStopped";x.EVENT_CHECKBOX_CHANGED="checkboxChanged";x.EVENT_ROW_EDITING_STARTED="rowEditingStarted";x.EVENT_ROW_EDITING_STOPPED="rowEditingStopped";x.EVENT_CELL_EDITING_STARTED="cellEditingStarted";x.EVENT_CELL_EDITING_STOPPED="cellEditingStopped";x.EVENT_BODY_SCROLL="bodyScroll";x.EVENT_BODY_SCROLL_END="bodyScrollEnd";x.EVENT_HEIGHT_SCALE_CHANGED="heightScaleChanged";x.EVENT_PAGINATION_CHANGED="paginationChanged";x.EVENT_COMPONENT_STATE_CHANGED="componentStateChanged";x.EVENT_STORE_REFRESHED="storeRefreshed";x.EVENT_STATE_UPDATED="stateUpdated";x.EVENT_COLUMN_MENU_VISIBLE_CHANGED="columnMenuVisibleChanged";x.EVENT_CONTEXT_MENU_VISIBLE_CHANGED="contextMenuVisibleChanged";x.EVENT_BODY_HEIGHT_CHANGED="bodyHeightChanged";x.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED="columnContainerWidthChanged";x.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED="displayedColumnsWidthChanged";x.EVENT_SCROLL_VISIBILITY_CHANGED="scrollVisibilityChanged";x.EVENT_COLUMN_HOVER_CHANGED="columnHoverChanged";x.EVENT_FLASH_CELLS="flashCells";x.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED="paginationPixelOffsetChanged";x.EVENT_DISPLAYED_ROWS_CHANGED="displayedRowsChanged";x.EVENT_LEFT_PINNED_WIDTH_CHANGED="leftPinnedWidthChanged";x.EVENT_RIGHT_PINNED_WIDTH_CHANGED="rightPinnedWidthChanged";x.EVENT_ROW_CONTAINER_HEIGHT_CHANGED="rowContainerHeightChanged";x.EVENT_HEADER_HEIGHT_CHANGED="headerHeightChanged";x.EVENT_COLUMN_HEADER_HEIGHT_CHANGED="columnHeaderHeightChanged";x.EVENT_ROW_DRAG_ENTER="rowDragEnter";x.EVENT_ROW_DRAG_MOVE="rowDragMove";x.EVENT_ROW_DRAG_LEAVE="rowDragLeave";x.EVENT_ROW_DRAG_END="rowDragEnd";x.EVENT_GRID_STYLES_CHANGED="gridStylesChanged";x.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST="columnRowGroupChangeRequest";x.EVENT_COLUMN_PIVOT_CHANGE_REQUEST="columnPivotChangeRequest";x.EVENT_COLUMN_VALUE_CHANGE_REQUEST="columnValueChangeRequest";x.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST="columnAggFuncChangeRequest";x.EVENT_STORE_UPDATED="storeUpdated";x.EVENT_FILTER_DESTROYED="filterDestroyed";x.EVENT_ROW_DATA_UPDATE_STARTED="rowDataUpdateStarted";x.EVENT_ROW_COUNT_READY="rowCountReady";x.EVENT_ADVANCED_FILTER_ENABLED_CHANGED="advancedFilterEnabledChanged";x.EVENT_DATA_TYPES_INFERRED="dataTypesInferred";x.EVENT_FIELD_VALUE_CHANGED="fieldValueChanged";x.EVENT_FIELD_PICKER_VALUE_SELECTED="fieldPickerValueSelected";x.EVENT_SIDE_BAR_UPDATED="sideBarUpdated";var Oy=new Set([x.EVENT_GRID_PRE_DESTROYED,x.EVENT_FILL_START]),xj=class{constructor(){this.existingIds={}}getInstanceIdForKey(t){const e=this.existingIds[t];let n;return typeof e!="number"?n=0:n=e+1,this.existingIds[t]=n,n}},bd="ag-Grid-AutoColumn",tg=class extends ee{createAutoGroupColumns(t){const e=[],n=this.gos.get("treeData");let r=this.gos.isGroupMultiAutoColumn();return n&&r&&(console.warn('AG Grid: you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data'),r=!1),r?t.forEach((i,s)=>{e.push(this.createOneAutoGroupColumn(i,s))}):e.push(this.createOneAutoGroupColumn()),e}updateAutoGroupColumns(t,e){t.forEach((n,r)=>this.updateOneAutoGroupColumn(n,r,e))}createOneAutoGroupColumn(t,e){let n;t?n=`${bd}-${t.getId()}`:n=bd;const r=this.createAutoGroupColDef(n,t,e);r.colId=n;const i=new ft(r,null,n,!0);return this.context.createBean(i),i}updateOneAutoGroupColumn(t,e,n){const r=t.getColDef(),i=typeof r.showRowGroup=="string"?r.showRowGroup:void 0,s=i!=null?this.columnModel.getPrimaryColumn(i):void 0,o=this.createAutoGroupColDef(t.getId(),s??void 0,e);t.setColDef(o,null,n),this.columnFactory.applyColumnState(t,o,n)}createAutoGroupColDef(t,e,n){let r=this.createBaseColDef(e);const i=this.gos.get("autoGroupColumnDef");Br(r,i),r=this.columnFactory.addColumnDefaultAndTypes(r,t),this.gos.get("treeData")||Te(r.field)&&Te(r.valueGetter)&&Te(r.filterValueGetter)&&r.filter!=="agGroupColumnFilter"&&(r.filter=!1),n&&n>0&&(r.headerCheckboxSelection=!1);const s=this.gos.isColumnsSortingCoupledToGroup(),o=r.valueGetter||r.field!=null;return s&&!o&&(r.sortIndex=void 0,r.initialSort=void 0),r}createBaseColDef(t){const e=this.gos.get("autoGroupColumnDef"),r={headerName:this.localeService.getLocaleTextFunc()("group","Group")};if(e&&(e.cellRenderer||e.cellRendererSelector)||(r.cellRenderer="agGroupCellRenderer"),t){const s=t.getColDef();Object.assign(r,{headerName:this.columnModel.getDisplayNameForColumn(t,"header"),headerValueGetter:s.headerValueGetter}),s.cellRenderer&&Object.assign(r,{cellRendererParams:{innerRenderer:s.cellRenderer,innerRendererParams:s.cellRendererParams}}),r.showRowGroup=t.getColId()}else r.showRowGroup=!0;return r}};w([O("columnModel")],tg.prototype,"columnModel",2);w([O("columnFactory")],tg.prototype,"columnFactory",2);tg=w([ce("autoGroupColService")],tg);var Pj={};Nn(Pj,{camelCaseToHumanText:()=>Ij,camelCaseToHyphenated:()=>Dj,capitalise:()=>Qte,escapeString:()=>sn,utf8_encode:()=>Yte});var Kte=/[&<>"']/g,qte={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Yte(t){const e=String.fromCharCode;function n(d){const h=[];if(!d)return[];const f=d.length;let g=0,m,v;for(;g<f;)m=d.charCodeAt(g++),m>=55296&&m<=56319&&g<f?(v=d.charCodeAt(g++),(v&64512)==56320?h.push(((m&1023)<<10)+(v&1023)+65536):(h.push(m),g--)):h.push(m);return h}function r(d){if(d>=55296&&d<=57343)throw Error("Lone surrogate U+"+d.toString(16).toUpperCase()+" is not a scalar value")}function i(d,h){return e(d>>h&63|128)}function s(d){if(d>=0&&d<=31&&d!==10)return`_x${d.toString(16).toUpperCase().padStart(4,"0")}_`;if(!(d&4294967168))return e(d);let h="";return d&4294965248?d&4294901760?d&4292870144||(h=e(d>>18&7|240),h+=i(d,12),h+=i(d,6)):(r(d),h=e(d>>12&15|224),h+=i(d,6)):h=e(d>>6&31|192),h+=e(d&63|128),h}const o=n(t),a=o.length;let l=-1,u,c="";for(;++l<a;)u=o[l],c+=s(u);return c}function Qte(t){return t[0].toUpperCase()+t.substring(1).toLowerCase()}function sn(t,e){if(t==null)return null;const n=t.toString().toString();return e?n:n.replace(Kte,r=>qte[r])}function Ij(t){if(!t||t==null)return null;const e=/([a-z])([A-Z])/g,n=/([A-Z]+)([A-Z])([a-z])/g;return t.replace(e,"$1 $2").replace(n,"$1 $2$3").replace(/\./g," ").split(" ").map(i=>i.substring(0,1).toUpperCase()+(i.length>1?i.substring(1,i.length):"")).join(" ")}function Dj(t){return t.replace(/[A-Z]/g,e=>`-${e.toLocaleLowerCase()}`)}var Oj={};Nn(Oj,{convertToMap:()=>fa,keys:()=>Jte,mapById:()=>Xte});function fa(t){const e=new Map;return t.forEach(n=>e.set(n[0],n[1])),e}function Xte(t,e){const n=new Map;return t.forEach(r=>n.set(e(r),r)),n}function Jte(t){const e=[];return t.forEach((n,r)=>e.push(r)),e}var Fn=class extends ee{constructor(){super(...arguments),this.primaryHeaderRowCount=0,this.secondaryHeaderRowCount=0,this.gridHeaderRowCount=0,this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.displayedColumnsAndGroupsMap={},this.viewportColumns=[],this.viewportColumnsHash="",this.headerViewportColumns=[],this.viewportColumnsCenter=[],this.headerViewportColumnsCenter=[],this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.autoHeightActiveAtLeastOnce=!1,this.rowGroupColumns=[],this.valueColumns=[],this.pivotColumns=[],this.ready=!1,this.changeEventsDispatching=!1,this.autoGroupsNeedBuilding=!1,this.forceRecreateAutoGroups=!1,this.pivotMode=!1,this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}init(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation");const t=this.gos.get("pivotMode");this.isPivotSettingAllowed(t)&&(this.pivotMode=t),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],e=>this.buildAutoGroupColumns(Fc(e.source))),this.addManagedPropertyListener("autoGroupColumnDef",e=>this.onAutoGroupColumnDefChanged(Fc(e.source))),this.addManagedPropertyListeners(["defaultColDef","columnTypes","suppressFieldDotNotation"],e=>this.onSharedColDefChanged(Fc(e.source))),this.addManagedPropertyListener("pivotMode",e=>this.setPivotMode(this.gos.get("pivotMode"),Fc(e.source))),this.addManagedListener(this.eventService,x.EVENT_FIRST_DATA_RENDERED,()=>this.onFirstDataRendered())}buildAutoGroupColumns(t){this.columnDefs&&(this.autoGroupsNeedBuilding=!0,this.forceRecreateAutoGroups=!0,this.updateGridColumns(),this.updateDisplayedColumns(t))}onAutoGroupColumnDefChanged(t){this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns,t)}onSharedColDefChanged(t){this.gridColumns&&(this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns,t),this.createColumnsFromColumnDefs(!0,t))}setColumnDefs(t,e){const n=!!this.columnDefs;this.columnDefs=t,this.createColumnsFromColumnDefs(n,e)}recreateColumnDefs(t){this.onSharedColDefChanged(t)}destroyOldColumns(t,e){const n={};if(!t)return;ao(null,t,i=>{n[i.getInstanceId()]=i}),e&&ao(null,e,i=>{n[i.getInstanceId()]=null});const r=Object.values(n).filter(i=>i!=null);this.destroyBeans(r)}destroyColumns(){this.destroyOldColumns(this.primaryColumnTree),this.destroyOldColumns(this.secondaryBalancedTree),this.destroyOldColumns(this.groupAutoColsBalancedTree)}createColumnsFromColumnDefs(t,e){const n=t?this.compareColumnStatesAndDispatchEvents(e):void 0;this.valueCache.expire(),this.autoGroupsNeedBuilding=!0;const r=this.primaryColumns,i=this.primaryColumnTree,s=this.columnFactory.createColumnTree(this.columnDefs,!0,i,e);this.destroyOldColumns(this.primaryColumnTree,s.columnTree),this.primaryColumnTree=s.columnTree,this.primaryHeaderRowCount=s.treeDept+1,this.primaryColumns=this.getColumnsFromTree(this.primaryColumnTree),this.primaryColumnsMap={},this.primaryColumns.forEach(l=>this.primaryColumnsMap[l.getId()]=l),this.extractRowGroupColumns(e,r),this.extractPivotColumns(e,r),this.extractValueColumns(e,r),this.ready=!0;const o=this.gridColsArePrimary===void 0;(this.gridColsArePrimary||o||this.autoGroupsNeedBuilding)&&(this.updateGridColumns(),t&&this.gridColsArePrimary&&!this.gos.get("maintainColumnOrder")&&this.orderGridColumnsLikePrimary(),this.updateDisplayedColumns(e),this.checkViewportColumns()),this.dispatchEverythingChanged(e),this.changeEventsDispatching=!0,n&&n(),this.changeEventsDispatching=!1,this.dispatchNewColumnsLoaded(e)}shouldRowModelIgnoreRefresh(){return this.changeEventsDispatching}dispatchNewColumnsLoaded(t){const e={type:x.EVENT_NEW_COLUMNS_LOADED,source:t};this.eventService.dispatchEvent(e),t==="gridInitializing"&&this.onColumnsReady()}dispatchEverythingChanged(t){const e={type:x.EVENT_COLUMN_EVERYTHING_CHANGED,source:t};this.eventService.dispatchEvent(e)}orderGridColumnsLikePrimary(){const t=this.primaryColumns;if(!t)return;const e=t.filter(r=>this.gridColumns.indexOf(r)>=0),n=this.gridColumns.filter(r=>e.indexOf(r)<0);this.gridColumns=[...n,...e],this.gridColumns=this.placeLockedColumns(this.gridColumns)}getAllDisplayedAutoHeightCols(){return this.displayedAutoHeightCols}setViewport(){this.gos.get("enableRtl")?(this.viewportLeft=this.bodyWidth-this.scrollPosition-this.scrollWidth,this.viewportRight=this.bodyWidth-this.scrollPosition):(this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition)}checkViewportColumns(t=!1){if(this.displayedColumnsCenter==null||!this.extractViewport())return;const n={type:x.EVENT_VIRTUAL_COLUMNS_CHANGED,afterScroll:t};this.eventService.dispatchEvent(n)}setViewportPosition(t,e,n=!1){(t!==this.scrollWidth||e!==this.scrollPosition||this.bodyWidthDirty)&&(this.scrollWidth=t,this.scrollPosition=e,this.bodyWidthDirty=!0,this.setViewport(),this.ready&&this.checkViewportColumns(n))}isPivotMode(){return this.pivotMode}isPivotSettingAllowed(t){return t&&this.gos.get("treeData")?(we("Pivot mode not available with treeData."),!1):!0}setPivotMode(t,e){if(t===this.pivotMode||!this.isPivotSettingAllowed(this.pivotMode)||(this.pivotMode=t,!this.gridColumns))return;this.autoGroupsNeedBuilding=!0,this.updateGridColumns(),this.updateDisplayedColumns(e);const n={type:x.EVENT_COLUMN_PIVOT_MODE_CHANGED};this.eventService.dispatchEvent(n)}getSecondaryPivotColumn(t,e){if(Te(this.secondaryColumns))return null;const n=this.getPrimaryColumn(e);let r=null;return this.secondaryColumns.forEach(i=>{const s=i.getColDef().pivotKeys,o=i.getColDef().pivotValueColumn;Os(s,t)&&o===n&&(r=i)}),r}setBeans(t){this.logger=t.create("columnModel")}setFirstRightAndLastLeftPinned(t){let e,n;this.gos.get("enableRtl")?(e=this.displayedColumnsLeft?this.displayedColumnsLeft[0]:null,n=this.displayedColumnsRight?Je(this.displayedColumnsRight):null):(e=this.displayedColumnsLeft?Je(this.displayedColumnsLeft):null,n=this.displayedColumnsRight?this.displayedColumnsRight[0]:null),this.gridColumns.forEach(r=>{r.setLastLeftPinned(r===e,t),r.setFirstRightPinned(r===n,t)})}autoSizeColumns(t){if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(()=>this.autoSizeColumns(t));return}const{columns:e,skipHeader:n,skipHeaderGroups:r,stopAtGroup:i,source:s="api"}=t;this.animationFrameService.flushAllFrames();const o=[];let a=-1;const l=n??this.gos.get("skipHeaderOnAutoSize"),u=r??l;for(;a!==0;)a=0,this.actionOnGridColumns(e,c=>{if(o.indexOf(c)>=0)return!1;const d=this.autoWidthCalculator.getPreferredWidthForColumn(c,l);if(d>0){const h=this.normaliseColumnWidth(c,d);c.setActualWidth(h,s),o.push(c),a++}return!0},s);u||this.autoSizeColumnGroupsByColumns(e,s,i),this.dispatchColumnResizedEvent(o,!0,"autosizeColumns")}dispatchColumnResizedEvent(t,e,n,r=null){if(t&&t.length){const i={type:x.EVENT_COLUMN_RESIZED,columns:t,column:t.length===1?t[0]:null,flexColumns:r,finished:e,source:n};this.eventService.dispatchEvent(i)}}dispatchColumnChangedEvent(t,e,n){const r={type:t,columns:e,column:e&&e.length==1?e[0]:null,source:n};this.eventService.dispatchEvent(r)}dispatchColumnMovedEvent(t){const{movedColumns:e,source:n,toIndex:r,finished:i}=t,s={type:x.EVENT_COLUMN_MOVED,columns:e,column:e&&e.length===1?e[0]:null,toIndex:r,finished:i,source:n};this.eventService.dispatchEvent(s)}dispatchColumnPinnedEvent(t,e){if(!t.length)return;const n=t.length===1?t[0]:null,r=this.getCommonValue(t,s=>s.getPinned()),i={type:x.EVENT_COLUMN_PINNED,pinned:r??null,columns:t,column:n,source:e};this.eventService.dispatchEvent(i)}dispatchColumnVisibleEvent(t,e){if(!t.length)return;const n=t.length===1?t[0]:null,r=this.getCommonValue(t,s=>s.isVisible()),i={type:x.EVENT_COLUMN_VISIBLE,visible:r,columns:t,column:n,source:e};this.eventService.dispatchEvent(i)}autoSizeColumn(t,e,n){t&&this.autoSizeColumns({columns:[t],skipHeader:n,skipHeaderGroups:!0,source:e})}autoSizeColumnGroupsByColumns(t,e,n){const r=new Set;this.getGridColumns(t).forEach(a=>{let l=a.getParent();for(;l&&l!=n;)l.isPadding()||r.add(l),l=l.getParent()});let s;const o=[];for(const a of r){for(const l of this.ctrlsService.getHeaderRowContainerCtrls())if(s=l.getHeaderCtrlForColumn(a),s)break;s&&s.resizeLeafColumnsToFit(e)}return o}autoSizeAllColumns(t,e){if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(()=>this.autoSizeAllColumns(t,e));return}const n=this.getAllDisplayedColumns();this.autoSizeColumns({columns:n,skipHeader:e,source:t})}getColumnsFromTree(t){const e=[],n=r=>{for(let i=0;i<r.length;i++){const s=r[i];s instanceof ft?e.push(s):s instanceof tn&&n(s.getChildren())}};return n(t),e}getAllDisplayedTrees(){return this.displayedTreeLeft&&this.displayedTreeRight&&this.displayedTreeCentre?this.displayedTreeLeft.concat(this.displayedTreeCentre).concat(this.displayedTreeRight):null}getPrimaryColumnTree(){return this.primaryColumnTree}getHeaderRowCount(){return this.gridHeaderRowCount}getDisplayedTreeLeft(){return this.displayedTreeLeft}getDisplayedTreeRight(){return this.displayedTreeRight}getDisplayedTreeCentre(){return this.displayedTreeCentre}isColumnDisplayed(t){return this.getAllDisplayedColumns().indexOf(t)>=0}getAllDisplayedColumns(){return this.displayedColumns}getViewportColumns(){return this.viewportColumns}getDisplayedLeftColumnsForRow(t){return this.colSpanActive?this.getDisplayedColumnsForRow(t,this.displayedColumnsLeft):this.displayedColumnsLeft}getDisplayedRightColumnsForRow(t){return this.colSpanActive?this.getDisplayedColumnsForRow(t,this.displayedColumnsRight):this.displayedColumnsRight}isColSpanActive(){return this.colSpanActive}getDisplayedColumnsForRow(t,e,n,r){const i=[];let s=null;for(let o=0;o<e.length;o++){const a=e[o],l=e.length-o,u=Math.min(a.getColSpan(t),l),c=[a];if(u>1){const h=u-1;for(let f=1;f<=h;f++)c.push(e[o+f]);o+=h}let d;n?(d=!1,c.forEach(h=>{n(h)&&(d=!0)})):d=!0,d&&(i.length===0&&s&&(r&&r(a))&&i.push(s),i.push(a)),s=a}return i}getViewportCenterColumnsForRow(t){if(!this.colSpanActive)return this.viewportColumnsCenter;const e=r=>{const i=r.getLeft();return J(i)&&i>this.viewportLeft},n=this.isColumnVirtualisationSuppressed()?null:this.isColumnInRowViewport.bind(this);return this.getDisplayedColumnsForRow(t,this.displayedColumnsCenter,n,e)}isColumnAtEdge(t,e){const n=this.getAllDisplayedColumns();if(!n.length)return!1;const r=e==="first";let i;if(t instanceof Sn){const s=t.getDisplayedLeafColumns();if(!s.length)return!1;i=r?s[0]:Je(s)}else i=t;return(r?n[0]:Je(n))===i}getAriaColumnIndex(t){let e;return t instanceof Sn?e=t.getLeafColumns()[0]:e=t,this.ariaOrderColumns.indexOf(e)+1}isColumnInHeaderViewport(t){return t.isAutoHeaderHeight()?!0:this.isColumnInRowViewport(t)}isColumnInRowViewport(t){if(t.isAutoHeight())return!0;const e=t.getLeft()||0,n=e+t.getActualWidth(),r=this.viewportLeft-200,i=this.viewportRight+200,s=e<r&&n<r,o=e>i&&n>i;return!s&&!o}getDisplayedColumnsLeftWidth(){return this.getWidthOfColsInList(this.displayedColumnsLeft)}getDisplayedColumnsRightWidth(){return this.getWidthOfColsInList(this.displayedColumnsRight)}updatePrimaryColumnList(t,e,n,r,i,s){if(!t||Mi(t))return;let o=!1;if(t.forEach(l=>{if(!l)return;const u=this.getPrimaryColumn(l);if(u){if(n){if(e.indexOf(u)>=0)return;e.push(u)}else{if(e.indexOf(u)<0)return;Gr(e,u)}r(u),o=!0}}),!o)return;this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(s);const a={type:i,columns:e,column:e.length===1?e[0]:null,source:s};this.eventService.dispatchEvent(a)}setRowGroupColumns(t,e){this.autoGroupsNeedBuilding=!0,this.setPrimaryColumnList(t,this.rowGroupColumns,x.EVENT_COLUMN_ROW_GROUP_CHANGED,!0,this.setRowGroupActive.bind(this),e)}setRowGroupActive(t,e,n){t!==e.isRowGroupActive()&&(e.setRowGroupActive(t,n),t&&!this.gos.get("suppressRowGroupHidesColumns")&&this.setColumnsVisible([e],!1,n),!t&&!this.gos.get("suppressMakeColumnVisibleAfterUnGroup")&&this.setColumnsVisible([e],!0,n))}addRowGroupColumns(t,e){this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(t,this.rowGroupColumns,!0,this.setRowGroupActive.bind(this,!0),x.EVENT_COLUMN_ROW_GROUP_CHANGED,e)}removeRowGroupColumns(t,e){this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(t,this.rowGroupColumns,!1,this.setRowGroupActive.bind(this,!1),x.EVENT_COLUMN_ROW_GROUP_CHANGED,e)}addPivotColumns(t,e){this.updatePrimaryColumnList(t,this.pivotColumns,!0,n=>n.setPivotActive(!0,e),x.EVENT_COLUMN_PIVOT_CHANGED,e)}setPivotColumns(t,e){this.setPrimaryColumnList(t,this.pivotColumns,x.EVENT_COLUMN_PIVOT_CHANGED,!0,(n,r)=>{r.setPivotActive(n,e)},e)}removePivotColumns(t,e){this.updatePrimaryColumnList(t,this.pivotColumns,!1,n=>n.setPivotActive(!1,e),x.EVENT_COLUMN_PIVOT_CHANGED,e)}setPrimaryColumnList(t,e,n,r,i,s){if(!this.gridColumns)return;const o=new Map;e.forEach((a,l)=>o.set(a,l)),e.length=0,J(t)&&t.forEach(a=>{const l=this.getPrimaryColumn(a);l&&e.push(l)}),e.forEach((a,l)=>{const u=o.get(a);if(u===void 0){o.set(a,0);return}r&&u!==l||o.delete(a)}),(this.primaryColumns||[]).forEach(a=>{const l=e.indexOf(a)>=0;i(l,a)}),this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(s),this.dispatchColumnChangedEvent(n,[...o.keys()],s)}setValueColumns(t,e){this.setPrimaryColumnList(t,this.valueColumns,x.EVENT_COLUMN_VALUE_CHANGED,!1,this.setValueActive.bind(this),e)}setValueActive(t,e,n){if(t!==e.isValueActive()&&(e.setValueActive(t,n),t&&!e.getAggFunc()&&this.aggFuncService)){const r=this.aggFuncService.getDefaultAggFunc(e);e.setAggFunc(r)}}addValueColumns(t,e){this.updatePrimaryColumnList(t,this.valueColumns,!0,this.setValueActive.bind(this,!0),x.EVENT_COLUMN_VALUE_CHANGED,e)}removeValueColumns(t,e){this.updatePrimaryColumnList(t,this.valueColumns,!1,this.setValueActive.bind(this,!1),x.EVENT_COLUMN_VALUE_CHANGED,e)}normaliseColumnWidth(t,e){const n=t.getMinWidth();J(n)&&e<n&&(e=n);const r=t.getMaxWidth();return J(r)&&t.isGreaterThanMax(e)&&(e=r),e}getPrimaryOrGridColumn(t){return this.getPrimaryColumn(t)||this.getGridColumn(t)}setColumnWidths(t,e,n,r){const i=[];t.forEach(s=>{const o=this.getPrimaryOrGridColumn(s.key);if(!o)return;if(i.push({width:s.newWidth,ratios:[1],columns:[o]}),this.gos.get("colResizeDefault")==="shift"&&(e=!e),e){const l=this.getDisplayedColAfter(o);if(!l)return;const u=o.getActualWidth()-s.newWidth,c=l.getActualWidth()+u;i.push({width:c,ratios:[1],columns:[l]})}}),i.length!==0&&this.resizeColumnSets({resizeSets:i,finished:n,source:r})}checkMinAndMaxWidthsForSet(t){const{columns:e,width:n}=t;let r=0,i=0,s=!0;e.forEach(l=>{const u=l.getMinWidth();r+=u||0;const c=l.getMaxWidth();J(c)&&c>0?i+=c:s=!1});const o=n>=r,a=!s||n<=i;return o&&a}resizeColumnSets(t){const{resizeSets:e,finished:n,source:r}=t;if(!(!e||e.every(c=>this.checkMinAndMaxWidthsForSet(c)))){if(n){const c=e&&e.length>0?e[0].columns:null;this.dispatchColumnResizedEvent(c,n,r)}return}const s=[],o=[];e.forEach(c=>{const{width:d,columns:h,ratios:f}=c,g={},m={};h.forEach(y=>o.push(y));let v=!0,C=0;for(;v;){if(C++,C>1e3){console.error("AG Grid: infinite loop in resizeColumnSets");break}v=!1;const y=[];let S=0,_=d;h.forEach((R,b)=>{if(m[R.getId()])_-=g[R.getId()];else{y.push(R);const P=f[b];S+=P}});const E=1/S;y.forEach((R,b)=>{const A=b===y.length-1;let P;A?P=_:(P=Math.round(f[b]*d*E),_-=P);const F=R.getMinWidth(),k=R.getMaxWidth();J(F)&&P<F?(P=F,m[R.getId()]=!0,v=!0):J(k)&&k>0&&P>k&&(P=k,m[R.getId()]=!0,v=!0),g[R.getId()]=P})}h.forEach(y=>{const S=g[y.getId()];y.getActualWidth()!==S&&(y.setActualWidth(S,r),s.push(y))})});const a=s.length>0;let l=[];a&&(l=this.refreshFlexedColumns({resizingCols:o,skipSetLeft:!0}),this.setLeftValues(r),this.updateBodyWidths(),this.checkViewportColumns());const u=o.concat(l);(a||n)&&this.dispatchColumnResizedEvent(u,n,r,l)}setColumnAggFunc(t,e,n){if(!t)return;const r=this.getPrimaryColumn(t);r&&(r.setAggFunc(e),this.dispatchColumnChangedEvent(x.EVENT_COLUMN_VALUE_CHANGED,[r],n))}moveRowGroupColumn(t,e,n){if(this.isRowGroupEmpty())return;const r=this.rowGroupColumns[t],i=this.rowGroupColumns.slice(t,e);this.rowGroupColumns.splice(t,1),this.rowGroupColumns.splice(e,0,r);const s={type:x.EVENT_COLUMN_ROW_GROUP_CHANGED,columns:i,column:i.length===1?i[0]:null,source:n};this.eventService.dispatchEvent(s)}moveColumns(t,e,n,r=!0){if(!this.gridColumns)return;if(this.columnAnimationService.start(),e>this.gridColumns.length-t.length){console.warn("AG Grid: tried to insert columns in invalid location, toIndex = "+e),console.warn("AG Grid: remember that you should not count the moving columns when calculating the new index");return}const i=this.getGridColumns(t);this.doesMovePassRules(i,e)&&(l_(this.gridColumns,i,e),this.updateDisplayedColumns(n),this.dispatchColumnMovedEvent({movedColumns:i,source:n,toIndex:e,finished:r}),this.columnAnimationService.finish())}doesMovePassRules(t,e){const n=this.getProposedColumnOrder(t,e);return this.doesOrderPassRules(n)}doesOrderPassRules(t){return!(!this.doesMovePassMarryChildren(t)||!this.doesMovePassLockedPositions(t))}getProposedColumnOrder(t,e){const n=this.gridColumns.slice();return l_(n,t,e),n}sortColumnsLikeGridColumns(t){!t||t.length<=1||t.filter(n=>this.gridColumns.indexOf(n)<0).length>0||t.sort((n,r)=>{const i=this.gridColumns.indexOf(n),s=this.gridColumns.indexOf(r);return i-s})}doesMovePassLockedPositions(t){let e=0,n=!0;const r=i=>i?i===!0||i==="left"?0:2:1;return t.forEach(i=>{const s=r(i.getColDef().lockPosition);s<e&&(n=!1),e=s}),n}doesMovePassMarryChildren(t){let e=!0;return ao(null,this.gridBalancedTree,n=>{if(!(n instanceof tn))return;const r=n,i=r.getColGroupDef();if(!(i&&i.marryChildren))return;const o=[];r.getLeafColumns().forEach(d=>{const h=t.indexOf(d);o.push(h)});const a=Math.max.apply(Math,o),l=Math.min.apply(Math,o),u=a-l,c=r.getLeafColumns().length-1;u>c&&(e=!1)}),e}moveColumnByIndex(t,e,n){if(!this.gridColumns)return;const r=this.gridColumns[t];this.moveColumns([r],e,n)}getColumnDefs(){if(!this.primaryColumns)return;const t=this.primaryColumns.slice();return this.gridColsArePrimary?t.sort((e,n)=>this.gridColumns.indexOf(e)-this.gridColumns.indexOf(n)):this.lastPrimaryOrder&&t.sort((e,n)=>this.lastPrimaryOrder.indexOf(e)-this.lastPrimaryOrder.indexOf(n)),this.columnDefFactory.buildColumnDefs(t,this.rowGroupColumns,this.pivotColumns)}getBodyContainerWidth(){return this.bodyWidth}getContainerWidth(t){switch(t){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}updateBodyWidths(){const t=this.getWidthOfColsInList(this.displayedColumnsCenter),e=this.getWidthOfColsInList(this.displayedColumnsLeft),n=this.getWidthOfColsInList(this.displayedColumnsRight);if(this.bodyWidthDirty=this.bodyWidth!==t,this.bodyWidth!==t||this.leftWidth!==e||this.rightWidth!==n){this.bodyWidth=t,this.leftWidth=e,this.rightWidth=n;const i={type:x.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED};this.eventService.dispatchEvent(i);const s={type:x.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED};this.eventService.dispatchEvent(s)}}getValueColumns(){return this.valueColumns?this.valueColumns:[]}getPivotColumns(){return this.pivotColumns?this.pivotColumns:[]}isPivotActive(){return this.pivotColumns&&this.pivotColumns.length>0&&this.pivotMode}getRowGroupColumns(){return this.rowGroupColumns?this.rowGroupColumns:[]}getDisplayedCenterColumns(){return this.displayedColumnsCenter}getDisplayedLeftColumns(){return this.displayedColumnsLeft}getDisplayedRightColumns(){return this.displayedColumnsRight}getAllPrimaryColumns(){return this.primaryColumns?this.primaryColumns:null}getSecondaryColumns(){return this.secondaryColumns?this.secondaryColumns:null}getAllColumnsForQuickFilter(){return this.columnsForQuickFilter}getAllGridColumns(){var t;return(t=this.gridColumns)!=null?t:[]}isRowGroupEmpty(){return Mi(this.rowGroupColumns)}setColumnsVisible(t,e=!1,n){this.applyColumnState({state:t.map(r=>({colId:typeof r=="string"?r:r.getColId(),hide:!e}))},n)}setColumnsPinned(t,e,n){if(!this.gridColumns)return;if(this.gos.isDomLayout("print")){console.warn("AG Grid: Changing the column pinning status is not allowed with domLayout='print'");return}this.columnAnimationService.start();let r;e===!0||e==="left"?r="left":e==="right"?r="right":r=null,this.actionOnGridColumns(t,i=>i.getPinned()!==r?(i.setPinned(r),!0):!1,n,()=>({type:x.EVENT_COLUMN_PINNED,pinned:r,column:null,columns:null,source:n})),this.columnAnimationService.finish()}actionOnGridColumns(t,e,n,r){if(Mi(t))return;const i=[];if(t.forEach(s=>{if(!s)return;const o=this.getGridColumn(s);if(!o)return;e(o)!==!1&&i.push(o)}),!!i.length&&(this.updateDisplayedColumns(n),J(r)&&r)){const s=r();s.columns=i,s.column=i.length===1?i[0]:null,this.eventService.dispatchEvent(s)}}getDisplayedColBefore(t){const e=this.getAllDisplayedColumns(),n=e.indexOf(t);return n>0?e[n-1]:null}getDisplayedColAfter(t){const e=this.getAllDisplayedColumns(),n=e.indexOf(t);return n<e.length-1?e[n+1]:null}getDisplayedGroupAtDirection(t,e){const n=t.getProvidedColumnGroup().getLevel()+t.getPaddingLevel(),r=t.getDisplayedLeafColumns(),i=e==="After"?Je(r):r[0],s=`getDisplayedCol${e}`;for(;;){const o=this[s](i);if(!o)return null;const a=this.getColumnGroupAtLevel(o,n);if(a!==t)return a}}getColumnGroupAtLevel(t,e){let n=t.getParent(),r,i;for(;r=n.getProvidedColumnGroup().getLevel(),i=n.getPaddingLevel(),!(r+i<=e);)n=n.getParent();return n}isPinningLeft(){return this.displayedColumnsLeft.length>0}isPinningRight(){return this.displayedColumnsRight.length>0}getPrimaryAndSecondaryAndAutoColumns(){return[].concat(this.primaryColumns||[],this.groupAutoColumns||[],this.secondaryColumns||[])}createStateItemFromColumn(t){const e=t.isRowGroupActive()?this.rowGroupColumns.indexOf(t):null,n=t.isPivotActive()?this.pivotColumns.indexOf(t):null,r=t.isValueActive()?t.getAggFunc():null,i=t.getSort()!=null?t.getSort():null,s=t.getSortIndex()!=null?t.getSortIndex():null,o=t.getFlex()!=null&&t.getFlex()>0?t.getFlex():null;return{colId:t.getColId(),width:t.getActualWidth(),hide:!t.isVisible(),pinned:t.getPinned(),sort:i,sortIndex:s,aggFunc:r,rowGroup:t.isRowGroupActive(),rowGroupIndex:e,pivot:t.isPivotActive(),pivotIndex:n,flex:o}}getColumnState(){if(Te(this.primaryColumns)||!this.isAlive())return[];const e=this.getPrimaryAndSecondaryAndAutoColumns().map(this.createStateItemFromColumn.bind(this));return this.orderColumnStateList(e),e}orderColumnStateList(t){const e=fa(this.gridColumns.map((n,r)=>[n.getColId(),r]));t.sort((n,r)=>{const i=e.has(n.colId)?e.get(n.colId):-1,s=e.has(r.colId)?e.get(r.colId):-1;return i-s})}resetColumnState(t){if(Mi(this.primaryColumns))return;const e=this.getColumnsFromTree(this.primaryColumnTree),n=[];let r=1e3,i=1e3,s=[];this.groupAutoColumns&&(s=s.concat(this.groupAutoColumns)),e&&(s=s.concat(e)),s.forEach(o=>{const a=this.getColumnStateFromColDef(o);Te(a.rowGroupIndex)&&a.rowGroup&&(a.rowGroupIndex=r++),Te(a.pivotIndex)&&a.pivot&&(a.pivotIndex=i++),n.push(a)}),this.applyColumnState({state:n,applyOrder:!0},t)}getColumnStateFromColDef(t){const e=(g,m)=>g??m??null,n=t.getColDef(),r=e(n.sort,n.initialSort),i=e(n.sortIndex,n.initialSortIndex),s=e(n.hide,n.initialHide),o=e(n.pinned,n.initialPinned),a=e(n.width,n.initialWidth),l=e(n.flex,n.initialFlex);let u=e(n.rowGroupIndex,n.initialRowGroupIndex),c=e(n.rowGroup,n.initialRowGroup);u==null&&(c==null||c==!1)&&(u=null,c=null);let d=e(n.pivotIndex,n.initialPivotIndex),h=e(n.pivot,n.initialPivot);d==null&&(h==null||h==!1)&&(d=null,h=null);const f=e(n.aggFunc,n.initialAggFunc);return{colId:t.getColId(),sort:r,sortIndex:i,hide:s,pinned:o,width:a,flex:l,rowGroup:c,rowGroupIndex:u,pivot:h,pivotIndex:d,aggFunc:f}}applyColumnState(t,e){if(Mi(this.primaryColumns))return!1;if(t&&t.state&&!t.state.forEach)return console.warn("AG Grid: applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;const n=(s,o,a)=>{const l=this.compareColumnStatesAndDispatchEvents(e);this.autoGroupsNeedBuilding=!0;const u=o.slice(),c={},d={},h=[],f=[];let g=0;const m=this.rowGroupColumns.slice(),v=this.pivotColumns.slice();s.forEach(_=>{const E=_.colId||"";if(E.startsWith(bd)){h.push(_),f.push(_);return}const b=a(E);b?(this.syncColumnWithStateItem(b,_,t.defaultState,c,d,!1,e),Gr(u,b)):(f.push(_),g+=1)});const C=_=>this.syncColumnWithStateItem(_,null,t.defaultState,c,d,!1,e);u.forEach(C);const y=(_,E,R,b)=>{const A=_[R.getId()],P=_[b.getId()],F=A!=null,k=P!=null;if(F&&k)return A-P;if(F)return-1;if(k)return 1;const L=E.indexOf(R),N=E.indexOf(b),W=L>=0,j=N>=0;return W&&j?L-N:W?-1:1};this.rowGroupColumns.sort(y.bind(this,c,m)),this.pivotColumns.sort(y.bind(this,d,v)),this.updateGridColumns();const S=this.groupAutoColumns?this.groupAutoColumns.slice():[];return h.forEach(_=>{const E=this.getAutoColumn(_.colId);Gr(S,E),this.syncColumnWithStateItem(E,_,t.defaultState,null,null,!0,e)}),S.forEach(C),this.applyOrderAfterApplyState(t),this.updateDisplayedColumns(e),this.dispatchEverythingChanged(e),l(),{unmatchedAndAutoStates:f,unmatchedCount:g}};this.columnAnimationService.start();let{unmatchedAndAutoStates:r,unmatchedCount:i}=n(t.state||[],this.primaryColumns||[],s=>this.getPrimaryColumn(s));return(r.length>0||J(t.defaultState))&&(i=n(r,this.secondaryColumns||[],s=>this.getSecondaryColumn(s)).unmatchedCount),this.columnAnimationService.finish(),i===0}applyOrderAfterApplyState(t){if(!t.applyOrder||!t.state)return;let e=[];const n={};t.state.forEach(i=>{if(!i.colId||n[i.colId])return;const s=this.gridColumnsMap[i.colId];s&&(e.push(s),n[i.colId]=!0)});let r=0;if(this.gridColumns.forEach(i=>{const s=i.getColId();if(n[s]!=null)return;s.startsWith(bd)?Zf(e,i,r++):e.push(i)}),e=this.placeLockedColumns(e),!this.doesMovePassMarryChildren(e)){console.warn("AG Grid: Applying column order broke a group where columns should be married together. Applying new order has been discarded.");return}this.gridColumns=e}compareColumnStatesAndDispatchEvents(t){const e={rowGroupColumns:this.rowGroupColumns.slice(),pivotColumns:this.pivotColumns.slice(),valueColumns:this.valueColumns.slice()},n=this.getColumnState(),r={};return n.forEach(i=>{r[i.colId]=i}),()=>{const i=this.getPrimaryAndSecondaryAndAutoColumns(),s=(m,v,C,y)=>{const S=v.map(y),_=C.map(y);if(Os(S,_))return;const R=new Set(v);C.forEach(P=>{R.delete(P)||R.add(P)});const b=[...R],A={type:m,columns:b,column:b.length===1?b[0]:null,source:t};this.eventService.dispatchEvent(A)},o=m=>{const v=[];return i.forEach(C=>{const y=r[C.getColId()];y&&m(y,C)&&v.push(C)}),v},a=m=>m.getColId();s(x.EVENT_COLUMN_ROW_GROUP_CHANGED,e.rowGroupColumns,this.rowGroupColumns,a),s(x.EVENT_COLUMN_PIVOT_CHANGED,e.pivotColumns,this.pivotColumns,a);const u=o((m,v)=>{const C=m.aggFunc!=null,y=C!=v.isValueActive(),S=C&&m.aggFunc!=v.getAggFunc();return y||S});u.length>0&&this.dispatchColumnChangedEvent(x.EVENT_COLUMN_VALUE_CHANGED,u,t);const c=(m,v)=>m.width!=v.getActualWidth();this.dispatchColumnResizedEvent(o(c),!0,t);const d=(m,v)=>m.pinned!=v.getPinned();this.dispatchColumnPinnedEvent(o(d),t);const h=(m,v)=>m.hide==v.isVisible();this.dispatchColumnVisibleEvent(o(h),t);const g=o((m,v)=>m.sort!=v.getSort()||m.sortIndex!=v.getSortIndex());g.length>0&&this.sortController.dispatchSortChangedEvents(t,g),this.normaliseColumnMovedEventForColumnState(n,t)}}getCommonValue(t,e){if(!t||t.length==0)return;const n=e(t[0]);for(let r=1;r<t.length;r++)if(n!==e(t[r]))return;return n}normaliseColumnMovedEventForColumnState(t,e){const n=this.getColumnState(),r={};n.forEach(l=>r[l.colId]=l);const i={};t.forEach(l=>{r[l.colId]&&(i[l.colId]=!0)});const s=t.filter(l=>i[l.colId]),o=n.filter(l=>i[l.colId]),a=[];o.forEach((l,u)=>{const c=s&&s[u];if(c&&c.colId!==l.colId){const d=this.getGridColumn(c.colId);d&&a.push(d)}}),a.length&&this.dispatchColumnMovedEvent({movedColumns:a,source:e,finished:!0})}syncColumnWithStateItem(t,e,n,r,i,s,o){var a;if(!t)return;const l=(_,E)=>{const R={value1:void 0,value2:void 0};let b=!1;return e&&(e[_]!==void 0&&(R.value1=e[_],b=!0),J(E)&&e[E]!==void 0&&(R.value2=e[E],b=!0)),!b&&n&&(n[_]!==void 0&&(R.value1=n[_]),J(E)&&n[E]!==void 0&&(R.value2=n[E])),R},u=l("hide").value1;u!==void 0&&t.setVisible(!u,o);const c=l("pinned").value1;c!==void 0&&t.setPinned(c);const d=(a=t.getColDef().minWidth)!=null?a:this.environment.getMinColWidth(),h=l("flex").value1;if(h!==void 0&&t.setFlex(h),h==null){const _=l("width").value1;_!=null&&d!=null&&_>=d&&t.setActualWidth(_,o)}const f=l("sort").value1;f!==void 0&&(f==="desc"||f==="asc"?t.setSort(f,o):t.setSort(void 0,o));const g=l("sortIndex").value1;if(g!==void 0&&t.setSortIndex(g),s||!t.isPrimary())return;const m=l("aggFunc").value1;m!==void 0&&(typeof m=="string"?(t.setAggFunc(m),t.isValueActive()||(t.setValueActive(!0,o),this.valueColumns.push(t))):(J(m)&&console.warn("AG Grid: stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),t.isValueActive()&&(t.setValueActive(!1,o),Gr(this.valueColumns,t))));const{value1:v,value2:C}=l("rowGroup","rowGroupIndex");(v!==void 0||C!==void 0)&&(typeof C=="number"||v?(t.isRowGroupActive()||(t.setRowGroupActive(!0,o),this.rowGroupColumns.push(t)),r&&typeof C=="number"&&(r[t.getId()]=C)):t.isRowGroupActive()&&(t.setRowGroupActive(!1,o),Gr(this.rowGroupColumns,t)));const{value1:y,value2:S}=l("pivot","pivotIndex");(y!==void 0||S!==void 0)&&(typeof S=="number"||y?(t.isPivotActive()||(t.setPivotActive(!0,o),this.pivotColumns.push(t)),i&&typeof S=="number"&&(i[t.getId()]=S)):t.isPivotActive()&&(t.setPivotActive(!1,o),Gr(this.pivotColumns,t)))}getGridColumns(t){return this.getColumns(t,this.getGridColumn.bind(this))}getColumns(t,e){const n=[];return t&&t.forEach(r=>{const i=e(r);i&&n.push(i)}),n}getColumnWithValidation(t){if(t==null)return null;const e=this.getGridColumn(t);return e||console.warn("AG Grid: could not find column "+t),e}getPrimaryColumn(t){return this.primaryColumns?this.getColumn(t,this.primaryColumns,this.primaryColumnsMap):null}getGridColumn(t){return this.getColumn(t,this.gridColumns,this.gridColumnsMap)}lookupGridColumn(t){return this.gridColumnsMap[t]}getSecondaryColumn(t){return this.secondaryColumns?this.getColumn(t,this.secondaryColumns,this.secondaryColumnsMap):null}getColumn(t,e,n){if(!t||!n)return null;if(typeof t=="string"&&n[t])return n[t];for(let r=0;r<e.length;r++)if(this.columnsMatch(e[r],t))return e[r];return this.getAutoColumn(t)}getSourceColumnsForGroupColumn(t){const e=t.getColDef().showRowGroup;if(!e)return null;if(e===!0)return this.rowGroupColumns.slice(0);const n=this.getPrimaryColumn(e);return n?[n]:null}getAutoColumn(t){return!this.groupAutoColumns||!J(this.groupAutoColumns)||Te(this.groupAutoColumns)?null:this.groupAutoColumns.find(e=>this.columnsMatch(e,t))||null}columnsMatch(t,e){const n=t===e,r=t.getColDef()===e,i=t.getColId()==e;return n||r||i}getDisplayNameForColumn(t,e,n=!1){if(!t)return null;const r=this.getHeaderName(t.getColDef(),t,null,null,e);return n?this.wrapHeaderNameWithAggFunc(t,r):r}getDisplayNameForProvidedColumnGroup(t,e,n){const r=e?e.getColGroupDef():null;return r?this.getHeaderName(r,null,t,e,n):null}getDisplayNameForColumnGroup(t,e){return this.getDisplayNameForProvidedColumnGroup(t,t.getProvidedColumnGroup(),e)}getHeaderName(t,e,n,r,i){const s=t.headerValueGetter;if(s){const o=this.gos.addGridCommonParams({colDef:t,column:e,columnGroup:n,providedColumnGroup:r,location:i});return typeof s=="function"?s(o):typeof s=="string"?this.expressionService.evaluate(s,o):(console.warn("AG Grid: headerValueGetter must be a function or a string"),"")}else{if(t.headerName!=null)return t.headerName;if(t.field)return Ij(t.field)}return""}wrapHeaderNameWithAggFunc(t,e){if(this.gos.get("suppressAggFuncInHeader"))return e;const n=t.getColDef().pivotValueColumn,r=J(n);let i=null,s;if(r){const o=this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&this.valueColumns.length===1,a=t.getColDef().pivotTotalColumnIds!==void 0;if(o&&!a)return e;i=n?n.getAggFunc():null,s=!0}else{const o=t.isValueActive(),a=this.pivotMode||!this.isRowGroupEmpty();o&&a?(i=t.getAggFunc(),s=!0):s=!1}if(s){const o=typeof i=="string"?i:"func";return`${this.localeService.getLocaleTextFunc()(o,o)}(${e})`}return e}getColumnGroup(t,e){if(!t)return null;if(t instanceof Sn)return t;const n=this.getAllDisplayedTrees(),r=typeof e=="number";let i=null;return Al(n,!1,s=>{if(s instanceof Sn){const o=s;let a;r?a=t===o.getGroupId()&&e===o.getPartId():a=t===o.getGroupId(),a&&(i=o)}}),i}isReady(){return this.ready}extractValueColumns(t,e){this.valueColumns=this.extractColumns(e,this.valueColumns,(n,r)=>n.setValueActive(r,t),()=>{},()=>{},n=>{const r=n.aggFunc;if(r===null||r==="")return null;if(r!==void 0)return!!r},n=>n.initialAggFunc!=null&&n.initialAggFunc!=""),this.valueColumns.forEach(n=>{const r=n.getColDef();r.aggFunc!=null&&r.aggFunc!=""?n.setAggFunc(r.aggFunc):n.getAggFunc()||n.setAggFunc(r.initialAggFunc)})}extractRowGroupColumns(t,e){this.rowGroupColumns=this.extractColumns(e,this.rowGroupColumns,(n,r)=>n.setRowGroupActive(r,t),n=>n.rowGroupIndex,n=>n.initialRowGroupIndex,n=>n.rowGroup,n=>n.initialRowGroup)}extractColumns(t=[],e=[],n,r,i,s,o){const a=[],l=[];(this.primaryColumns||[]).forEach(d=>{const h=t.indexOf(d)<0,f=d.getColDef(),g=kC(s(f)),m=kC(o(f)),v=Ga(r(f)),C=Ga(i(f));let y;g!==void 0?y=g:v!==void 0?v===null?y=!1:y=v>=0:h?m!==void 0?y=m:C!==void 0?y=C!=null&&C>=0:y=!1:y=e.indexOf(d)>=0,y&&((h?v!=null||C!=null:v!=null)?a.push(d):l.push(d))});const u=d=>{const h=r(d.getColDef()),f=i(d.getColDef());return h??f};a.sort((d,h)=>{const f=u(d),g=u(h);return f===g?0:f<g?-1:1});const c=[].concat(a);return e.forEach(d=>{l.indexOf(d)>=0&&c.push(d)}),l.forEach(d=>{c.indexOf(d)<0&&c.push(d)}),e.forEach(d=>{c.indexOf(d)<0&&n(d,!1)}),c.forEach(d=>{e.indexOf(d)<0&&n(d,!0)}),c}extractPivotColumns(t,e){this.pivotColumns=this.extractColumns(e,this.pivotColumns,(n,r)=>n.setPivotActive(r,t),n=>n.pivotIndex,n=>n.initialPivotIndex,n=>n.pivot,n=>n.initialPivot)}resetColumnGroupState(t){if(!this.primaryColumnTree)return;const e=[];ao(null,this.primaryColumnTree,n=>{if(n instanceof tn){const r=n.getColGroupDef(),i={groupId:n.getGroupId(),open:r?r.openByDefault:void 0};e.push(i)}}),this.setColumnGroupState(e,t)}getColumnGroupState(){const t=[];return ao(null,this.gridBalancedTree,e=>{e instanceof tn&&t.push({groupId:e.getGroupId(),open:e.isExpanded()})}),t}setColumnGroupState(t,e){if(!this.gridBalancedTree)return;this.columnAnimationService.start();const n=[];if(t.forEach(r=>{const i=r.groupId,s=r.open,o=this.getProvidedColumnGroup(i);o&&o.isExpanded()!==s&&(this.logger.log("columnGroupOpened("+o.getGroupId()+","+s+")"),o.setExpanded(s),n.push(o))}),this.updateGroupsAndDisplayedColumns(e),this.setFirstRightAndLastLeftPinned(e),n.length){const r={type:x.EVENT_COLUMN_GROUP_OPENED,columnGroup:tn.length===1?n[0]:void 0,columnGroups:n};this.eventService.dispatchEvent(r)}this.columnAnimationService.finish()}setColumnGroupOpened(t,e,n){let r;t instanceof tn?r=t.getId():r=t||"",this.setColumnGroupState([{groupId:r,open:e}],n)}getProvidedColumnGroup(t){typeof t!="string"&&console.error("AG Grid: group key must be a string");let e=null;return ao(null,this.gridBalancedTree,n=>{n instanceof tn&&n.getId()===t&&(e=n)}),e}calculateColumnsForDisplay(){let t;return this.pivotMode&&Te(this.secondaryColumns)?t=this.gridColumns.filter(e=>{const n=this.groupAutoColumns&&vi(this.groupAutoColumns,e),r=this.valueColumns&&vi(this.valueColumns,e);return n||r}):t=this.gridColumns.filter(e=>this.groupAutoColumns&&vi(this.groupAutoColumns,e)||e.isVisible()),t}checkColSpanActiveInCols(t){let e=!1;return t.forEach(n=>{J(n.getColDef().colSpan)&&(e=!0)}),e}calculateColumnsForGroupDisplay(){this.groupDisplayColumns=[],this.groupDisplayColumnsMap={};const t=e=>{const n=e.getColDef(),r=n.showRowGroup;n&&J(r)&&(this.groupDisplayColumns.push(e),typeof r=="string"?this.groupDisplayColumnsMap[r]=e:r===!0&&this.getRowGroupColumns().forEach(i=>{this.groupDisplayColumnsMap[i.getId()]=e}))};this.gridColumns.forEach(t)}getGroupDisplayColumns(){return this.groupDisplayColumns}getGroupDisplayColumnForGroup(t){return this.groupDisplayColumnsMap[t]}updateDisplayedColumns(t){const e=this.calculateColumnsForDisplay();this.buildDisplayedTrees(e),this.updateGroupsAndDisplayedColumns(t),this.setFirstRightAndLastLeftPinned(t)}isSecondaryColumnsPresent(){return J(this.secondaryColumns)}setSecondaryColumns(t,e){if(!this.gridColumns)return;const n=t;if(!(!n&&Te(this.secondaryColumns))){if(n){this.processSecondaryColumnDefinitions(t);const r=this.columnFactory.createColumnTree(t,!1,this.secondaryBalancedTree||this.previousSecondaryColumns||void 0,e);this.destroyOldColumns(this.secondaryBalancedTree,r.columnTree),this.secondaryBalancedTree=r.columnTree,this.secondaryHeaderRowCount=r.treeDept+1,this.secondaryColumns=this.getColumnsFromTree(this.secondaryBalancedTree),this.secondaryColumnsMap={},this.secondaryColumns.forEach(i=>this.secondaryColumnsMap[i.getId()]=i),this.previousSecondaryColumns=null}else this.previousSecondaryColumns=this.secondaryBalancedTree,this.secondaryBalancedTree=null,this.secondaryHeaderRowCount=-1,this.secondaryColumns=null,this.secondaryColumnsMap={};this.updateGridColumns(),this.updateDisplayedColumns(e)}}processSecondaryColumnDefinitions(t){const e=this.gos.get("processPivotResultColDef"),n=this.gos.get("processPivotResultColGroupDef");if(!e&&!n)return;const r=i=>{i.forEach(s=>{if(J(s.children)){const a=s;n&&n(a),r(a.children)}else e&&e(s)})};t&&r(t)}updateGridColumns(){const t=this.gridBalancedTree;if(this.gridColsArePrimary?this.lastPrimaryOrder=this.gridColumns:this.lastSecondaryOrder=this.gridColumns,this.createGroupAutoColumnsIfNeeded()){const r=fa(this.groupAutoColumns.map(i=>[i,!0]));this.lastPrimaryOrder&&(this.lastPrimaryOrder=this.lastPrimaryOrder.filter(i=>!r.has(i)),this.lastPrimaryOrder=[...this.groupAutoColumns,...this.lastPrimaryOrder]),this.lastSecondaryOrder&&(this.lastSecondaryOrder=this.lastSecondaryOrder.filter(i=>!r.has(i)),this.lastSecondaryOrder=[...this.groupAutoColumns,...this.lastSecondaryOrder])}let n;if(this.secondaryColumns&&this.secondaryBalancedTree){const r=this.secondaryColumns.some(i=>this.gridColumnsMap[i.getColId()]!==void 0);this.gridBalancedTree=this.secondaryBalancedTree.slice(),this.gridHeaderRowCount=this.secondaryHeaderRowCount,this.gridColumns=this.secondaryColumns.slice(),this.gridColsArePrimary=!1,r&&(n=this.lastSecondaryOrder)}else this.primaryColumns&&(this.gridBalancedTree=this.primaryColumnTree.slice(),this.gridHeaderRowCount=this.primaryHeaderRowCount,this.gridColumns=this.primaryColumns.slice(),this.gridColsArePrimary=!0,n=this.lastPrimaryOrder);if(this.addAutoGroupToGridColumns(),this.orderGridColsLike(n),this.gridColumns=this.placeLockedColumns(this.gridColumns),this.calculateColumnsForGroupDisplay(),this.refreshQuickFilterColumns(),this.clearDisplayedAndViewportColumns(),this.colSpanActive=this.checkColSpanActiveInCols(this.gridColumns),this.gridColumnsMap={},this.gridColumns.forEach(r=>this.gridColumnsMap[r.getId()]=r),this.setAutoHeightActive(),!Os(t,this.gridBalancedTree)){const r={type:x.EVENT_GRID_COLUMNS_CHANGED};this.eventService.dispatchEvent(r)}}setAutoHeightActive(){this.autoHeightActive=this.gridColumns.filter(t=>t.isAutoHeight()).length>0,this.autoHeightActive&&(this.autoHeightActiveAtLeastOnce=!0,this.gos.isRowModelType("clientSide")||this.gos.isRowModelType("serverSide")||we("autoHeight columns only work with Client Side Row Model and Server Side Row Model."))}orderGridColsLike(t){if(Te(t))return;const e=fa(t.map((l,u)=>[l,u]));let n=!0;if(this.gridColumns.forEach(l=>{e.has(l)&&(n=!1)}),n)return;const r=fa(this.gridColumns.map(l=>[l,!0])),i=t.filter(l=>r.has(l)),s=fa(i.map(l=>[l,!0])),o=this.gridColumns.filter(l=>!s.has(l)),a=i.slice();o.forEach(l=>{let u=l.getOriginalParent();if(!u){a.push(l);return}const c=[];for(;!c.length&&u;)u.getLeafColumns().forEach(g=>{const m=a.indexOf(g)>=0,v=c.indexOf(g)<0;m&&v&&c.push(g)}),u=u.getOriginalParent();if(!c.length){a.push(l);return}const d=c.map(f=>a.indexOf(f)),h=Math.max(...d);Zf(a,l,h+1)}),this.gridColumns=a}isPrimaryColumnGroupsPresent(){return this.primaryHeaderRowCount>1}refreshQuickFilterColumns(){var t;let e=(t=this.isPivotMode()&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")?this.secondaryColumns:this.primaryColumns)!=null?t:[];this.groupAutoColumns&&(e=e.concat(this.groupAutoColumns)),this.columnsForQuickFilter=this.gos.get("includeHiddenColumnsInQuickFilter")?e:e.filter(n=>n.isVisible()||n.isRowGroupActive())}placeLockedColumns(t){const e=[],n=[],r=[];return t.forEach(i=>{const s=i.getColDef().lockPosition;s==="right"?r.push(i):s==="left"||s===!0?e.push(i):n.push(i)}),[...e,...n,...r]}addAutoGroupToGridColumns(){if(Te(this.groupAutoColumns)){this.destroyOldColumns(this.groupAutoColsBalancedTree),this.groupAutoColsBalancedTree=null;return}this.gridColumns=this.groupAutoColumns?this.groupAutoColumns.concat(this.gridColumns):this.gridColumns;const t=this.columnFactory.createForAutoGroups(this.groupAutoColumns,this.gridBalancedTree);this.destroyOldColumns(this.groupAutoColsBalancedTree,t),this.groupAutoColsBalancedTree=t,this.gridBalancedTree=t.concat(this.gridBalancedTree)}clearDisplayedAndViewportColumns(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.ariaOrderColumns=[],this.viewportColumns=[],this.headerViewportColumns=[],this.viewportColumnsHash=""}updateGroupsAndDisplayedColumns(t){this.updateOpenClosedVisibilityInColumnGroups(),this.deriveDisplayedColumns(t),this.refreshFlexedColumns(),this.extractViewport(),this.updateBodyWidths();const e={type:x.EVENT_DISPLAYED_COLUMNS_CHANGED};this.eventService.dispatchEvent(e)}deriveDisplayedColumns(t){this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeLeft,this.displayedColumnsLeft),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeCentre,this.displayedColumnsCenter),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeRight,this.displayedColumnsRight),this.joinColumnsAriaOrder(),this.joinDisplayedColumns(),this.setLeftValues(t),this.displayedAutoHeightCols=this.displayedColumns.filter(e=>e.isAutoHeight())}isAutoRowHeightActive(){return this.autoHeightActive}wasAutoRowHeightEverActive(){return this.autoHeightActiveAtLeastOnce}joinColumnsAriaOrder(){const t=this.getAllGridColumns(),e=[],n=[],r=[];for(const i of t){const s=i.getPinned();s?s===!0||s==="left"?e.push(i):r.push(i):n.push(i)}this.ariaOrderColumns=e.concat(n).concat(r)}joinDisplayedColumns(){this.gos.get("enableRtl")?this.displayedColumns=this.displayedColumnsRight.concat(this.displayedColumnsCenter).concat(this.displayedColumnsLeft):this.displayedColumns=this.displayedColumnsLeft.concat(this.displayedColumnsCenter).concat(this.displayedColumnsRight)}setLeftValues(t){this.setLeftValuesOfColumns(t),this.setLeftValuesOfGroups()}setLeftValuesOfColumns(t){if(!this.primaryColumns)return;const e=this.getPrimaryAndSecondaryAndAutoColumns().slice(0),n=this.gos.get("enableRtl");[this.displayedColumnsLeft,this.displayedColumnsRight,this.displayedColumnsCenter].forEach(r=>{if(n){let i=this.getWidthOfColsInList(r);r.forEach(s=>{i-=s.getActualWidth(),s.setLeft(i,t)})}else{let i=0;r.forEach(s=>{s.setLeft(i,t),i+=s.getActualWidth()})}wj(e,r)}),e.forEach(r=>{r.setLeft(null,t)})}setLeftValuesOfGroups(){[this.displayedTreeLeft,this.displayedTreeRight,this.displayedTreeCentre].forEach(t=>{t.forEach(e=>{e instanceof Sn&&e.checkLeft()})})}derivedDisplayedColumnsFromDisplayedTree(t,e){e.length=0,Al(t,!0,n=>{n instanceof ft&&e.push(n)})}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}extractViewportColumns(){this.isColumnVirtualisationSuppressed()?(this.viewportColumnsCenter=this.displayedColumnsCenter,this.headerViewportColumnsCenter=this.displayedColumnsCenter):(this.viewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInRowViewport.bind(this)),this.headerViewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInHeaderViewport.bind(this))),this.viewportColumns=this.viewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight),this.headerViewportColumns=this.headerViewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight)}getVirtualHeaderGroupRow(t,e){let n;switch(t){case"left":n=this.viewportRowLeft[e];break;case"right":n=this.viewportRowRight[e];break;default:n=this.viewportRowCenter[e];break}return Te(n)&&(n=[]),n}calculateHeaderRows(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={};const t={};this.headerViewportColumns.forEach(n=>t[n.getId()]=!0);const e=(n,r,i)=>{let s=!1;for(let o=0;o<n.length;o++){const a=n[o];let l=!1;if(a instanceof ft)l=t[a.getId()]===!0;else{const c=a.getDisplayedChildren();c&&(l=e(c,r,i+1))}l&&(s=!0,r[i]||(r[i]=[]),r[i].push(a))}return s};e(this.displayedTreeLeft,this.viewportRowLeft,0),e(this.displayedTreeRight,this.viewportRowRight,0),e(this.displayedTreeCentre,this.viewportRowCenter,0)}extractViewport(){const t=r=>`${r.getId()}-${r.getPinned()||"normal"}`;this.extractViewportColumns();const e=this.viewportColumns.map(t).join("#"),n=this.viewportColumnsHash!==e;return n&&(this.viewportColumnsHash=e,this.calculateHeaderRows()),n}refreshFlexedColumns(t={}){var e;const n=t.source?t.source:"flex";if(t.viewportWidth!=null&&(this.flexViewportWidth=t.viewportWidth),!this.flexViewportWidth)return[];let r=-1;if(t.resizingCols){const h=new Set(t.resizingCols);let f=this.displayedColumnsCenter;for(let g=f.length-1;g>=0;g--)if(h.has(f[g])){r=g;break}}let i=0,s=[],o=0,a=0;for(let h=0;h<this.displayedColumnsCenter.length;h++)this.displayedColumnsCenter[h].getFlex()&&h>r?(s.push(this.displayedColumnsCenter[h]),a+=this.displayedColumnsCenter[h].getFlex(),o+=(e=this.displayedColumnsCenter[h].getMinWidth())!=null?e:0):i+=this.displayedColumnsCenter[h].getActualWidth();if(!s.length)return[];let l=[];i+o>this.flexViewportWidth&&(s.forEach(h=>{var f;return h.setActualWidth((f=h.getMinWidth())!=null?f:0,n)}),l=s,s=[]);const u=[];let c;e:for(;;){c=this.flexViewportWidth-i;const h=c/a;for(let f=0;f<s.length;f++){const g=s[f],m=h*g.getFlex();let v=0;const C=g.getMinWidth(),y=g.getMaxWidth();if(J(C)&&m<C?v=C:J(y)&&m>y&&(v=y),v){g.setActualWidth(v,n),hI(s,g),a-=g.getFlex(),l.push(g),i+=g.getActualWidth();continue e}u[f]=Math.round(m)}break}let d=c;return s.forEach((h,f)=>{h.setActualWidth(Math.min(u[f],d),n),l.push(h),d-=u[f]}),t.skipSetLeft||this.setLeftValues(n),t.updateBodyWidths&&this.updateBodyWidths(),t.fireResizedEvent&&this.dispatchColumnResizedEvent(l,!0,n,s),s}sizeColumnsToFit(t,e="sizeColumnsToFit",n,r){var i,s,o,a,l;if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(()=>this.sizeColumnsToFit(t,e,n,r));return}const u={};r&&((i=r==null?void 0:r.columnLimits)==null||i.forEach(C=>{var y=C,{key:S}=y,_=Ote(y,["key"]);u[typeof S=="string"?S:S.getColId()]=_}));const c=this.getAllDisplayedColumns(),d=t===this.getWidthOfColsInList(c);if(t<=0||!c.length||d)return;const h=[],f=[];c.forEach(C=>{C.getColDef().suppressSizeToFit===!0?f.push(C):h.push(C)});const g=h.slice(0);let m=!1;const v=C=>{Gr(h,C),f.push(C)};for(h.forEach(C=>{var y,S;C.resetActualWidth(e);const _=u==null?void 0:u[C.getId()],E=(y=_==null?void 0:_.minWidth)!=null?y:r==null?void 0:r.defaultMinWidth,R=(S=_==null?void 0:_.maxWidth)!=null?S:r==null?void 0:r.defaultMaxWidth,b=C.getActualWidth();typeof E=="number"&&b<E?C.setActualWidth(E,e,!0):typeof R=="number"&&b>R&&C.setActualWidth(R,e,!0)});!m;){m=!0;const C=t-this.getWidthOfColsInList(f);if(C<=0)h.forEach(y=>{var S,_;const E=(_=(S=u==null?void 0:u[y.getId()])==null?void 0:S.minWidth)!=null?_:r==null?void 0:r.defaultMinWidth;if(typeof E=="number"){y.setActualWidth(E,e,!0);return}y.setMinimum(e)});else{const y=C/this.getWidthOfColsInList(h);let S=C;for(let _=h.length-1;_>=0;_--){const E=h[_],R=u==null?void 0:u[E.getId()],b=(s=R==null?void 0:R.minWidth)!=null?s:r==null?void 0:r.defaultMinWidth,A=(o=R==null?void 0:R.maxWidth)!=null?o:r==null?void 0:r.defaultMaxWidth,P=(a=E.getMinWidth())!=null?a:0,F=(l=E.getMaxWidth())!=null?l:Number.MAX_VALUE,k=typeof b=="number"&&b>P?b:E.getMinWidth(),L=typeof A=="number"&&A<F?A:E.getMaxWidth();let N=Math.round(E.getActualWidth()*y);J(k)&&N<k?(N=k,v(E),m=!1):J(L)&&N>L?(N=L,v(E),m=!1):_===0&&(N=S),E.setActualWidth(N,e,!0),S-=N}}}g.forEach(C=>{C.fireColumnWidthChangedEvent(e)}),this.setLeftValues(e),this.updateBodyWidths(),!n&&this.dispatchColumnResizedEvent(g,!0,e)}buildDisplayedTrees(t){const e=[],n=[],r=[];t.forEach(s=>{switch(s.getPinned()){case"left":e.push(s);break;case"right":n.push(s);break;default:r.push(s);break}});const i=new xj;this.displayedTreeLeft=this.displayedGroupCreator.createDisplayedGroups(e,i,"left",this.displayedTreeLeft),this.displayedTreeRight=this.displayedGroupCreator.createDisplayedGroups(n,i,"right",this.displayedTreeRight),this.displayedTreeCentre=this.displayedGroupCreator.createDisplayedGroups(r,i,null,this.displayedTreeCentre),this.updateDisplayedMap()}updateDisplayedMap(){this.displayedColumnsAndGroupsMap={};const t=e=>{this.displayedColumnsAndGroupsMap[e.getUniqueId()]=e};Al(this.displayedTreeCentre,!1,t),Al(this.displayedTreeLeft,!1,t),Al(this.displayedTreeRight,!1,t)}isDisplayed(t){return this.displayedColumnsAndGroupsMap[t.getUniqueId()]===t}updateOpenClosedVisibilityInColumnGroups(){const t=this.getAllDisplayedTrees();Al(t,!1,e=>{e instanceof Sn&&e.calculateDisplayedColumns()})}getGroupAutoColumns(){return this.groupAutoColumns}createGroupAutoColumnsIfNeeded(){const t=this.forceRecreateAutoGroups;if(this.forceRecreateAutoGroups=!1,!this.autoGroupsNeedBuilding)return!1;this.autoGroupsNeedBuilding=!1;const e=this.gos.isGroupUseEntireRow(this.pivotMode),n=this.pivotMode?this.gos.get("pivotSuppressAutoColumn"):this.isGroupSuppressAutoColumn();if((this.rowGroupColumns.length>0||this.gos.get("treeData"))&&!n&&!e){const s=this.autoGroupColService.createAutoGroupColumns(this.rowGroupColumns);if(!this.autoColsEqual(s,this.groupAutoColumns)||t)return this.groupAutoColumns=s,!0}else this.groupAutoColumns=null;return!1}isGroupSuppressAutoColumn(){return this.gos.get("groupDisplayType")==="custom"?!0:this.gos.get("treeDataDisplayType")==="custom"}autoColsEqual(t,e){return Os(t,e,(n,r)=>n.getColId()===r.getColId())}getWidthOfColsInList(t){return t.reduce((e,n)=>e+n.getActualWidth(),0)}getFirstDisplayedColumn(){const t=this.gos.get("enableRtl"),e=["getDisplayedLeftColumns","getDisplayedCenterColumns","getDisplayedRightColumns"];t&&e.reverse();for(let n=0;n<e.length;n++){const r=this[e[n]]();if(r.length)return t?Je(r):r[0]}return null}setColumnHeaderHeight(t,e){if(t.setAutoHeaderHeight(e)){const r={type:x.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,column:t,columns:[t],source:"autosizeColumnHeaderHeight"};this.eventService.dispatchEvent(r)}}getColumnGroupHeaderRowHeight(){return this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight()}getColumnHeaderRowHeight(){const t=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),e=this.getAllDisplayedColumns().filter(n=>n.isAutoHeaderHeight()).map(n=>n.getAutoHeaderHeight()||0);return Math.max(t,...e)}getHeaderHeight(){var t;return(t=this.gos.get("headerHeight"))!=null?t:this.environment.getFromTheme(25,"headerHeight")}getFloatingFiltersHeight(){var t;return(t=this.gos.get("floatingFiltersHeight"))!=null?t:this.getHeaderHeight()}getGroupHeaderHeight(){var t;return(t=this.gos.get("groupHeaderHeight"))!=null?t:this.getHeaderHeight()}getPivotHeaderHeight(){var t;return(t=this.gos.get("pivotHeaderHeight"))!=null?t:this.getHeaderHeight()}getPivotGroupHeaderHeight(){var t;return(t=this.gos.get("pivotGroupHeaderHeight"))!=null?t:this.getGroupHeaderHeight()}queueResizeOperations(){this.shouldQueueResizeOperations=!0}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(t=>t()),this.resizeOperationQueue=[]}resetColumnDefIntoColumn(t,e){const n=t.getUserProvidedColDef();if(!n)return!1;const r=this.columnFactory.addColumnDefaultAndTypes(n,t.getColId());return t.setColDef(r,n,e),!0}isColumnGroupingLocked(t){const e=this.gos.get("groupLockGroupColumns");if(!t.isRowGroupActive()||e===0)return!1;if(e===-1)return!0;const n=this.rowGroupColumns.findIndex(r=>r.getColId()===t.getColId());return e>n}generateColumnStateForRowGroupAndPivotIndexes(t,e){let n={};const r=(i,s,o,a,l,u)=>{if(!s.length||!this.primaryColumns)return[];const c=Object.keys(i),d=new Set(c),h=new Set(c),f=new Set(s.map(E=>{const R=E.getColId();return h.delete(R),R}).concat(c)),g=[],m={};let v=0;for(let E=0;E<this.primaryColumns.length;E++){const R=this.primaryColumns[E].getColId();f.has(R)&&(g.push(R),m[R]=v++)}let C=1e3,y=!1,S=0;const _=E=>{const R=m[E];for(let b=S;b<R;b++){const A=g[b];h.has(A)&&(i[A][l]=C++,h.delete(A))}S=R};s.forEach(E=>{const R=E.getColId();if(d.has(R))_(R),i[R][l]=C++;else{const b=E.getColDef();(b[l]===null||b[l]===void 0&&b[u]==null)&&(y||(b[o]||b[o]===void 0&&b[a]?_(R):(h.forEach(F=>{i[F][l]=C+m[F]}),C+=g.length,y=!0)),n[R]||(n[R]={colId:R}),n[R][l]=C++)}})};return r(t,this.rowGroupColumns,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),r(e,this.pivotColumns,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(n)}onColumnsReady(){const t=this.gos.get("autoSizeStrategy");if(!t)return;const{type:e}=t;setTimeout(()=>{if(e==="fitGridWidth"){const{columnLimits:n,defaultMinWidth:r,defaultMaxWidth:i}=t,s=n==null?void 0:n.map(({colId:o,minWidth:a,maxWidth:l})=>({key:o,minWidth:a,maxWidth:l}));this.ctrlsService.getGridBodyCtrl().sizeColumnsToFit({defaultMinWidth:r,defaultMaxWidth:i,columnLimits:s})}else e==="fitProvidedWidth"&&this.sizeColumnsToFit(t.width,"sizeColumnsToFit")})}onFirstDataRendered(){const t=this.gos.get("autoSizeStrategy");if((t==null?void 0:t.type)!=="fitCellContents")return;const{colIds:e,skipHeader:n}=t;setTimeout(()=>{e?this.autoSizeColumns({columns:e,skipHeader:n,source:"autosizeColumns"}):this.autoSizeAllColumns("autosizeColumns",n)})}};w([O("expressionService")],Fn.prototype,"expressionService",2);w([O("columnFactory")],Fn.prototype,"columnFactory",2);w([O("displayedGroupCreator")],Fn.prototype,"displayedGroupCreator",2);w([O("ctrlsService")],Fn.prototype,"ctrlsService",2);w([O("autoWidthCalculator")],Fn.prototype,"autoWidthCalculator",2);w([O("columnAnimationService")],Fn.prototype,"columnAnimationService",2);w([O("autoGroupColService")],Fn.prototype,"autoGroupColService",2);w([O("valueCache")],Fn.prototype,"valueCache",2);w([O("animationFrameService")],Fn.prototype,"animationFrameService",2);w([O("sortController")],Fn.prototype,"sortController",2);w([O("columnDefFactory")],Fn.prototype,"columnDefFactory",2);w([ut("aggFuncService")],Fn.prototype,"aggFuncService",2);w([te],Fn.prototype,"init",1);w([Pr],Fn.prototype,"destroyColumns",1);w([ls(0,Li("loggerFactory"))],Fn.prototype,"setBeans",1);Fn=w([ce("columnModel")],Fn);function Fc(t){return t==="gridOptionsUpdated"?"gridOptionsChanged":t}function Al(t,e,n){if(t)for(let r=0;r<t.length;r++){const i=t[r];if(i instanceof Sn){const s=e?i.getDisplayedChildren():i.getChildren();Al(s,e,n)}n(i)}}var c_=class extends ee{createDisplayedGroups(t,e,n,r){const i=this.mapOldGroupsById(r),s=[];let o=t;for(;o.length;){const a=o;o=[];let l=0;const u=c=>{const d=l;l=c;const h=a[d],g=(h instanceof Sn?h.getProvidedColumnGroup():h).getOriginalParent();if(g==null){for(let v=d;v<c;v++)s.push(a[v]);return}const m=this.createColumnGroup(g,e,i,n);for(let v=d;v<c;v++)m.addChild(a[v]);o.push(m)};for(let c=1;c<a.length;c++){const d=a[c],f=(d instanceof Sn?d.getProvidedColumnGroup():d).getOriginalParent(),g=a[l],v=(g instanceof Sn?g.getProvidedColumnGroup():g).getOriginalParent();f!==v&&u(c)}l<a.length&&u(a.length)}return this.setupParentsIntoColumns(s,null),s}createColumnGroup(t,e,n,r){const i=t.getGroupId(),s=e.getInstanceIdForKey(i),o=Sn.createUniqueId(i,s);let a=n[o];return a&&a.getProvidedColumnGroup()!==t&&(a=null),J(a)?a.reset():(a=new Sn(t,i,s,r),this.context.createBean(a)),a}mapOldGroupsById(t){const e={},n=r=>{r.forEach(i=>{if(i instanceof Sn){const s=i;e[i.getUniqueId()]=s,n(s.getChildren())}})};return t&&n(t),e}setupParentsIntoColumns(t,e){t.forEach(n=>{if(n.setParent(e),n instanceof Sn){const r=n;this.setupParentsIntoColumns(r.getChildren(),r)}})}};c_=w([ce("displayedGroupCreator")],c_);var Zte={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,excludeHiddenColumnsFromQuickFilter:!0,advancedFilterModel:!0,customChartThemes:!0,chartThemeOverrides:!0,enableChartToolPanelsButton:!0,suppressChartToolPanelsButton:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressParentsInRowNodes:!0,suppressTouch:!0,suppressAsyncEvents:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,suppressAggFuncInHeader:!0,suppressAggAtRootLevel:!0,removePivotHeaderRowWhenSingleValueColumn:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,suppressGroupMaintainValueType:!0,groupLockGroupColumns:!0,rowGroupPanelSuppressSort:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,suppressServerSideInfiniteScroll:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,functionsPassive:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0},pn=class{};pn.STRING_PROPERTIES=["rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","grandTotalRow"];pn.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy"];pn.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"];pn.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"];pn.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressParentsInRowNodes","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressAggAtRootLevel","suppressFocusAfterRefresh","functionsPassive","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","excludeHiddenColumnsFromQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterMovesDown","enterMovesDownAfterEdit","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","enableChartToolPanelsButton","suppressChartToolPanelsButton","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideFilterAllLevels","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","maintainColumnOrder","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","suppressGroupMaintainValueType","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval"];pn.OTHER_PROPERTIES=["suppressStickyTotalRow"];pn.FUNCTIONAL_PROPERTIES=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher"];pn.CALLBACK_PROPERTIES=["getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering","chartMenuItems","groupTotalRow"];pn.FUNCTION_PROPERTIES=[...pn.FUNCTIONAL_PROPERTIES,...pn.CALLBACK_PROPERTIES];pn.ALL_PROPERTIES=[...pn.ARRAY_PROPERTIES,...pn.OBJECT_PROPERTIES,...pn.STRING_PROPERTIES,...pn.NUMBER_PROPERTIES,...pn.FUNCTION_PROPERTIES,...pn.BOOLEAN_PROPERTIES,...pn.OTHER_PROPERTIES];var ng=pn,Un=class My{static getCallbackForEvent(e){return!e||e.length<2?e:"on"+e[0].toUpperCase()+e.substring(1)}static getGridOptionKeys(){return this.ALL_PROPERTIES_AND_CALLBACKS}static combineAttributesAndGridOptions(e,n){typeof e!="object"&&(e={});const r=me({},e);return My.getGridOptionKeys().forEach(s=>{const o=n[s];typeof o<"u"&&o!==My.VUE_OMITTED_PROPERTY&&(r[s]=o)}),r}static processOnChange(e,n,r){if(!e)return;const i={};let s=!1;if(Object.keys(e).filter(a=>My.ALL_PROPERTIES_AND_CALLBACKS_SET.has(a)).forEach(a=>{i[a]=e[a],s=!0}),!s)return;n.__internalUpdateGridOptions(i,!0);const o={type:x.EVENT_COMPONENT_STATE_CHANGED};lr(i,(a,l)=>{o[a]=l}),n.dispatchEvent(o)}};Un.EVENTS=eu(x);Un.VUE_OMITTED_PROPERTY="AG-VUE-OMITTED-PROPERTY";Un.EXCLUDED_INTERNAL_EVENTS=[x.EVENT_SCROLLBAR_WIDTH_CHANGED,x.EVENT_CHECKBOX_CHANGED,x.EVENT_HEIGHT_SCALE_CHANGED,x.EVENT_BODY_HEIGHT_CHANGED,x.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED,x.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,x.EVENT_SCROLL_VISIBILITY_CHANGED,x.EVENT_COLUMN_HOVER_CHANGED,x.EVENT_FLASH_CELLS,x.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,x.EVENT_DISPLAYED_ROWS_CHANGED,x.EVENT_LEFT_PINNED_WIDTH_CHANGED,x.EVENT_RIGHT_PINNED_WIDTH_CHANGED,x.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,x.EVENT_STORE_UPDATED,x.EVENT_COLUMN_PANEL_ITEM_DRAG_START,x.EVENT_COLUMN_PANEL_ITEM_DRAG_END,x.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,x.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,x.EVENT_FULL_WIDTH_ROW_FOCUSED,x.EVENT_HEADER_HEIGHT_CHANGED,x.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,x.EVENT_CELL_FOCUS_CLEARED,x.EVENT_GRID_STYLES_CHANGED,x.EVENT_FILTER_DESTROYED,x.EVENT_ROW_DATA_UPDATE_STARTED,x.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,x.EVENT_DATA_TYPES_INFERRED,x.EVENT_FIELD_VALUE_CHANGED,x.EVENT_FIELD_PICKER_VALUE_SELECTED,x.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED,x.EVENT_SUPPRESS_MENU_HIDE_CHANGED,x.EVENT_SUPPRESS_FIELD_DOT_NOTATION,x.EVENT_ROW_COUNT_READY,x.EVENT_SIDE_BAR_UPDATED];Un.PUBLIC_EVENTS=Un.EVENTS.filter(t=>!vi(Un.EXCLUDED_INTERNAL_EVENTS,t));Un.EVENT_CALLBACKS=Un.EVENTS.map(t=>Un.getCallbackForEvent(t));Un.BOOLEAN_PROPERTIES=ng.BOOLEAN_PROPERTIES;Un.ALL_PROPERTIES=ng.ALL_PROPERTIES;Un.ALL_PROPERTIES_AND_CALLBACKS=[...Un.ALL_PROPERTIES,...Un.EVENT_CALLBACKS];Un.ALL_PROPERTIES_AND_CALLBACKS_SET=new Set(Un.ALL_PROPERTIES_AND_CALLBACKS);var $C=Un,d_=class extends ee{constructor(){super(...arguments),this.componentsMappedByName={}}setupComponents(t){t&&t.forEach(e=>this.addComponent(e))}addComponent(t){const n=t.componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase().toUpperCase();this.componentsMappedByName[n]=t.componentClass}getComponentClass(t){return this.componentsMappedByName[t]}};d_=w([ce("agStackComponentsRegistry")],d_);var Mj={};Nn(Mj,{getAriaCheckboxStateName:()=>oE,getAriaLabel:()=>kj,getAriaLevel:()=>ene,getAriaPosInSet:()=>Lj,getAriaSortState:()=>Nj,removeAriaExpanded:()=>Bj,removeAriaSort:()=>Kj,setAriaActiveDescendant:()=>vI,setAriaAtomic:()=>Gj,setAriaChecked:()=>nne,setAriaColCount:()=>jj,setAriaColIndex:()=>CI,setAriaColSpan:()=>Uj,setAriaControls:()=>wI,setAriaDescribedBy:()=>tne,setAriaDisabled:()=>mI,setAriaExpanded:()=>Io,setAriaHidden:()=>Am,setAriaLabel:()=>Si,setAriaLabelledBy:()=>Td,setAriaLevel:()=>Hj,setAriaLive:()=>gI,setAriaMultiSelectable:()=>$j,setAriaPosInSet:()=>sE,setAriaRelevant:()=>Vj,setAriaRole:()=>Ut,setAriaRowCount:()=>Wj,setAriaRowIndex:()=>yI,setAriaSelected:()=>Rd,setAriaSetSize:()=>iE,setAriaSort:()=>zj});function Ki(t,e,n){n==null||typeof n=="string"&&n==""?fI(t,e):qi(t,e,n)}function qi(t,e,n){t.setAttribute(Fj(e),n.toString())}function fI(t,e){t.removeAttribute(Fj(e))}function Fj(t){return`aria-${t}`}function Ut(t,e){e?t.setAttribute("role",e):t.removeAttribute("role")}function Nj(t){let e;return t==="asc"?e="ascending":t==="desc"?e="descending":t==="mixed"?e="other":e="none",e}function ene(t){return parseInt(t.getAttribute("aria-level"),10)}function Lj(t){return parseInt(t.getAttribute("aria-posinset"),10)}function kj(t){return t.getAttribute("aria-label")}function Si(t,e){Ki(t,"label",e)}function Td(t,e){Ki(t,"labelledby",e)}function tne(t,e){Ki(t,"describedby",e)}function gI(t,e){Ki(t,"live",e)}function Gj(t,e){Ki(t,"atomic",e)}function Vj(t,e){Ki(t,"relevant",e)}function Hj(t,e){Ki(t,"level",e)}function mI(t,e){Ki(t,"disabled",e)}function Am(t,e){Ki(t,"hidden",e)}function vI(t,e){Ki(t,"activedescendant",e)}function Io(t,e){qi(t,"expanded",e)}function Bj(t){fI(t,"expanded")}function iE(t,e){qi(t,"setsize",e)}function sE(t,e){qi(t,"posinset",e)}function $j(t,e){qi(t,"multiselectable",e)}function Wj(t,e){qi(t,"rowcount",e)}function yI(t,e){qi(t,"rowindex",e)}function jj(t,e){qi(t,"colcount",e)}function CI(t,e){qi(t,"colindex",e)}function Uj(t,e){qi(t,"colspan",e)}function zj(t,e){qi(t,"sort",e)}function Kj(t){fI(t,"sort")}function Rd(t,e){Ki(t,"selected",e)}function nne(t,e){qi(t,"checked",e===void 0?"mixed":e)}function wI(t,e){Ki(t,"controls",e.id),Td(e,t.id)}function oE(t,e){return e===void 0?t("ariaIndeterminate","indeterminate"):e===!0?t("ariaChecked","checked"):t("ariaUnchecked","unchecked")}var qj={};Nn(qj,{browserSupportsPreventScroll:()=>TI,getBodyHeight:()=>Xj,getBodyWidth:()=>Qj,getMaxDivHeight:()=>Yj,getSafariVersion:()=>SI,getScrollbarWidth:()=>Jj,getTabIndex:()=>WC,isBrowserChrome:()=>aE,isBrowserFirefox:()=>EI,isBrowserSafari:()=>js,isIOSUserAgent:()=>Ho,isInvisibleScrollbar:()=>RI,isMacOsUserAgent:()=>bI});var LT,$v,kT,GT,VT,HT,h_,p_;function js(){return LT===void 0&&(LT=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),LT}function SI(){if($v===void 0)if(js()){const t=navigator.userAgent.match(/version\/(\d+)/i);t&&($v=t[1]!=null?parseFloat(t[1]):0)}else $v=0;return $v}function aE(){if(kT===void 0){const t=window;kT=!!t.chrome&&(!!t.chrome.webstore||!!t.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return kT}function EI(){return GT===void 0&&(GT=/(firefox)/i.test(navigator.userAgent)),GT}function bI(){return VT===void 0&&(VT=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),VT}function Ho(){return HT===void 0&&(HT=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),HT}function TI(){return!js()||SI()>=15}function WC(t){if(!t)return null;const e=t.tabIndex,n=t.getAttribute("tabIndex");return e===-1&&(n===null||n===""&&!EI())?null:e.toString()}function Yj(){if(!document.body)return-1;let t=1e6;const e=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,n=document.createElement("div");for(document.body.appendChild(n);;){const r=t*2;if(n.style.height=r+"px",r>e||n.clientHeight!==r)break;t=r}return document.body.removeChild(n),t}function Qj(){var t,e,n;return(n=(t=document.body)==null?void 0:t.clientWidth)!=null?n:window.innerHeight||((e=document.documentElement)==null?void 0:e.clientWidth)||-1}function Xj(){var t,e,n;return(n=(t=document.body)==null?void 0:t.clientHeight)!=null?n:window.innerHeight||((e=document.documentElement)==null?void 0:e.clientHeight)||-1}function Jj(){return p_==null&&Zj(),p_}function Zj(){const t=document.body,e=document.createElement("div");e.style.width=e.style.height="100px",e.style.opacity="0",e.style.overflow="scroll",e.style.msOverflowStyle="scrollbar",e.style.position="absolute",t.appendChild(e);let n=e.offsetWidth-e.clientWidth;n===0&&e.clientWidth===0&&(n=null),e.parentNode&&e.parentNode.removeChild(e),n!=null&&(p_=n,h_=n===0)}function RI(){return h_==null&&Zj(),h_}var eU={};Nn(eU,{dateToFormattedString:()=>nd,parseDateTimeFromString:()=>$r,serialiseDate:()=>Hi});var tU={};Nn(tU,{cleanNumber:()=>rne,createArrayOfNumbers:()=>nU,decToHex:()=>ine,formatNumberCommas:()=>_I,formatNumberTwoDecimalPlacesAndCommas:()=>sne,padStartWidthZeros:()=>td,sum:()=>one});function td(t,e){return t.toString().padStart(e,"0")}function nU(t,e){const n=[];for(let r=t;r<=e;r++)n.push(r);return n}function rne(t){return typeof t=="string"&&(t=parseInt(t,10)),typeof t=="number"?Math.floor(t):null}function ine(t,e){let n="";for(let r=0;r<e;r++)n+=String.fromCharCode(t&255),t>>>=8;return n}function sne(t,e,n){return typeof t!="number"?"":_I(Math.round(t*100)/100,e,n)}function _I(t,e,n){return typeof t!="number"?"":t.toString().replace(".",n).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${e}`)}function one(t){return t==null?null:t.reduce((e,n)=>e+n,0)}function Hi(t,e=!0,n="-"){if(!t)return null;let r=[t.getFullYear(),t.getMonth()+1,t.getDate()].map(i=>td(i,2)).join(n);return e&&(r+=" "+[t.getHours(),t.getMinutes(),t.getSeconds()].map(i=>td(i,2)).join(":")),r}var BT=t=>{if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function nd(t,e="YYYY-MM-DD"){const n=td(t.getFullYear(),4),r=["January","February","March","April","May","June","July","August","September","October","November","December"],i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s={YYYY:()=>n.slice(n.length-4,n.length),YY:()=>n.slice(n.length-2,n.length),Y:()=>`${t.getFullYear()}`,MMMM:()=>r[t.getMonth()],MMM:()=>r[t.getMonth()].slice(0,3),MM:()=>td(t.getMonth()+1,2),Mo:()=>`${t.getMonth()+1}${BT(t.getMonth()+1)}`,M:()=>`${t.getMonth()+1}`,Do:()=>`${t.getDate()}${BT(t.getDate())}`,DD:()=>td(t.getDate(),2),D:()=>`${t.getDate()}`,dddd:()=>i[t.getDay()],ddd:()=>i[t.getDay()].slice(0,3),dd:()=>i[t.getDay()].slice(0,2),do:()=>`${t.getDay()}${BT(t.getDay())}`,d:()=>`${t.getDay()}`},o=new RegExp(Object.keys(s).join("|"),"g");return e.replace(o,a=>a in s?s[a]():a)}function $r(t){if(!t)return null;const[e,n]=t.split(" ");if(!e)return null;const r=e.split("-").map(d=>parseInt(d,10));if(r.filter(d=>!isNaN(d)).length!==3)return null;const[i,s,o]=r,a=new Date(i,s-1,o);if(a.getFullYear()!==i||a.getMonth()!==s-1||a.getDate()!==o)return null;if(!n||n==="00:00:00")return a;const[l,u,c]=n.split(":").map(d=>parseInt(d,10));return l>=0&&l<24&&a.setHours(l),u>=0&&u<60&&a.setMinutes(u),c>=0&&c<60&&a.setSeconds(c),a}var rU={};Nn(rU,{FOCUSABLE_EXCLUDE:()=>AI,FOCUSABLE_SELECTOR:()=>iU,addOrRemoveAttribute:()=>Hs,addStylesToElement:()=>FI,bindCellRendererToHtmlElement:()=>LI,clearElement:()=>en,copyNodeList:()=>uU,ensureDomOrder:()=>OI,formatSize:()=>lE,getAbsoluteHeight:()=>PI,getAbsoluteWidth:()=>rg,getElementRectWithOffset:()=>II,getElementSize:()=>rl,getInnerHeight:()=>xm,getInnerWidth:()=>Bu,getScrollLeft:()=>sg,insertWithDomOrder:()=>oU,isElementChildOfClass:()=>tu,isFocusableFormField:()=>xI,isHorizontalScrollShowing:()=>aU,isInDOM:()=>DI,isNodeOrElement:()=>Pm,isRtlNegativeScroll:()=>ig,isVerticalScrollShowing:()=>lU,isVisible:()=>Yr,iterateNamedNodeMap:()=>cU,loadTemplate:()=>Wr,nodeListForEach:()=>NI,radioCssClass:()=>f_,removeFromParent:()=>us,setDisabled:()=>_d,setDisplayed:()=>Ue,setDomChildOrder:()=>MI,setElementHeight:()=>ane,setElementWidth:()=>ag,setFixedHeight:()=>nu,setFixedWidth:()=>Bi,setScrollLeft:()=>og,setVisible:()=>sU});var Wv;function f_(t,e,n){const r=t.parentElement;let i=r&&r.firstChild;for(;i;)e&&i.classList.toggle(e,i===t),n&&i.classList.toggle(n,i!==t),i=i.nextSibling}var iU="[tabindex], input, select, button, textarea, [href]",AI="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function xI(t){const e=Element.prototype.matches||Element.prototype.msMatchesSelector,r=e.call(t,"input, select, button, textarea"),i=e.call(t,AI),s=Yr(t);return r&&!i&&s}function Ue(t,e,n={}){const{skipAriaHidden:r}=n;t.classList.toggle("ag-hidden",!e),r||Am(t,!e)}function sU(t,e,n={}){const{skipAriaHidden:r}=n;t.classList.toggle("ag-invisible",!e),r||Am(t,!e)}function _d(t,e){const n="disabled",r=e?i=>i.setAttribute(n,""):i=>i.removeAttribute(n);r(t),NI(t.querySelectorAll("input"),i=>r(i))}function tu(t,e,n){let r=0;for(;t;){if(t.classList.contains(e))return!0;if(t=t.parentElement,typeof n=="number"){if(++r>n)break}else if(t===n)break}return!1}function rl(t){const{height:e,width:n,borderTopWidth:r,borderRightWidth:i,borderBottomWidth:s,borderLeftWidth:o,paddingTop:a,paddingRight:l,paddingBottom:u,paddingLeft:c,marginTop:d,marginRight:h,marginBottom:f,marginLeft:g,boxSizing:m}=window.getComputedStyle(t);return{height:parseFloat(e||"0"),width:parseFloat(n||"0"),borderTopWidth:parseFloat(r||"0"),borderRightWidth:parseFloat(i||"0"),borderBottomWidth:parseFloat(s||"0"),borderLeftWidth:parseFloat(o||"0"),paddingTop:parseFloat(a||"0"),paddingRight:parseFloat(l||"0"),paddingBottom:parseFloat(u||"0"),paddingLeft:parseFloat(c||"0"),marginTop:parseFloat(d||"0"),marginRight:parseFloat(h||"0"),marginBottom:parseFloat(f||"0"),marginLeft:parseFloat(g||"0"),boxSizing:m}}function xm(t){const e=rl(t);return e.boxSizing==="border-box"?e.height-e.paddingTop-e.paddingBottom:e.height}function Bu(t){const e=rl(t);return e.boxSizing==="border-box"?e.width-e.paddingLeft-e.paddingRight:e.width}function PI(t){const e=rl(t),n=e.marginBottom+e.marginTop;return Math.ceil(t.offsetHeight+n)}function rg(t){const e=rl(t),n=e.marginLeft+e.marginRight;return Math.ceil(t.offsetWidth+n)}function II(t){const e=t.getBoundingClientRect(),{borderTopWidth:n,borderLeftWidth:r,borderRightWidth:i,borderBottomWidth:s}=rl(t);return{top:e.top+(n||0),left:e.left+(r||0),right:e.right+(i||0),bottom:e.bottom+(s||0)}}function ig(){if(typeof Wv=="boolean")return Wv;const t=document.createElement("div");return t.style.direction="rtl",t.style.width="1px",t.style.height="1px",t.style.position="fixed",t.style.top="0px",t.style.overflow="hidden",t.dir="rtl",t.innerHTML=`<div style="width: 2px">
            <span style="display: inline-block; width: 1px"></span>
            <span style="display: inline-block; width: 1px"></span>
        </div>`,document.body.appendChild(t),t.scrollLeft=1,Wv=Math.floor(t.scrollLeft)===0,document.body.removeChild(t),Wv}function sg(t,e){let n=t.scrollLeft;return e&&(n=Math.abs(n),aE()&&!ig()&&(n=t.scrollWidth-t.clientWidth-n)),n}function og(t,e,n){n&&(ig()?e*=-1:(js()||aE())&&(e=t.scrollWidth-t.clientWidth-e)),t.scrollLeft=e}function en(t){for(;t&&t.firstChild;)t.removeChild(t.firstChild)}function us(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function DI(t){return!!t.offsetParent}function Yr(t){const e=t;return e.checkVisibility?e.checkVisibility({checkVisibilityCSS:!0}):!(!DI(t)||window.getComputedStyle(t).visibility!=="visible")}function Wr(t){const e=document.createElement("div");return e.innerHTML=(t||"").trim(),e.firstChild}function OI(t,e,n){n&&n.nextSibling===e||(n?n.nextSibling?t.insertBefore(e,n.nextSibling):t.appendChild(e):t.firstChild&&t.firstChild!==e&&t.insertAdjacentElement("afterbegin",e))}function MI(t,e){for(let n=0;n<e.length;n++){const r=e[n],i=t.children[n];i!==r&&t.insertBefore(r,i)}}function oU(t,e,n){n?n.insertAdjacentElement("afterend",e):t.firstChild?t.insertAdjacentElement("afterbegin",e):t.appendChild(e)}function FI(t,e){if(e)for(const[n,r]of Object.entries(e)){if(!n||!n.length||r==null)continue;const i=Dj(n),s=r.toString(),o=s.replace(/\s*!important/g,""),a=o.length!=s.length?"important":void 0;t.style.setProperty(i,o,a)}}function aU(t){return t.clientWidth<t.scrollWidth}function lU(t){return t.clientHeight<t.scrollHeight}function ag(t,e){e==="flex"?(t.style.removeProperty("width"),t.style.removeProperty("minWidth"),t.style.removeProperty("maxWidth"),t.style.flex="1 1 auto"):Bi(t,e)}function Bi(t,e){e=lE(e),t.style.width=e.toString(),t.style.maxWidth=e.toString(),t.style.minWidth=e.toString()}function ane(t,e){e==="flex"?(t.style.removeProperty("height"),t.style.removeProperty("minHeight"),t.style.removeProperty("maxHeight"),t.style.flex="1 1 auto"):nu(t,e)}function nu(t,e){e=lE(e),t.style.height=e.toString(),t.style.maxHeight=e.toString(),t.style.minHeight=e.toString()}function lE(t){return typeof t=="number"?`${t}px`:t}function Pm(t){return t instanceof Node||t instanceof HTMLElement}function uU(t){if(t==null)return[];const e=[];return NI(t,n=>e.push(n)),e}function cU(t,e){if(t)for(let n=0;n<t.length;n++){const r=t[n];e(r.name,r.value)}}function Hs(t,e,n){n==null?t.removeAttribute(e):t.setAttribute(e,n.toString())}function NI(t,e){if(t!=null)for(let n=0;n<t.length;n++)e(t[n])}function LI(t,e){t.then(n=>{const r=n.getGui();r!=null&&(typeof r=="object"?e.appendChild(r):e.innerHTML=r)})}var dU={};Nn(dU,{fuzzyCheckStrings:()=>hU,fuzzySuggestions:()=>Im});function hU(t,e,n){const r={},i=t.filter(s=>!e.some(o=>o===s));return i.length>0&&i.forEach(s=>r[s]=Im(s,n).values),r}function Im(t,e,n,r){let i=e.map((a,l)=>({value:a,relevance:lne(t.toLowerCase(),a.toLocaleLowerCase()),idx:l}));if(i.sort((a,l)=>l.relevance-a.relevance),n&&(i=i.filter(a=>a.relevance!==0)),i.length>0&&r&&r>0){const l=i[0].relevance*r;i=i.filter(u=>l-u.relevance<0)}const s=[],o=[];for(const a of i)s.push(a.value),o.push(a.idx);return{values:s,indices:o}}function lne(t,e){const n=t.replace(/\s/g,""),r=e.replace(/\s/g,"");let i=0,s=-1;for(let o=0;o<n.length;o++){const a=r.indexOf(n[o],s+1);a!==-1&&(s=a,i+=100-s*100/1e4*100)}return i}var pU={};Nn(pU,{createIcon:()=>Pi,createIconNoSpan:()=>Bt,iconNameClassMap:()=>fU});var fU={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",menuAlt:"menu-alt",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus",chartsMenuEdit:"chart",chartsMenuAdvancedSettings:"settings",chartsMenuAdd:"plus"};function Pi(t,e,n){const r=Bt(t,e,n);if(r){const{className:s}=r;if(typeof s=="string"&&s.indexOf("ag-icon")>-1||typeof s=="object"&&s["ag-icon"])return r}const i=document.createElement("span");return i.appendChild(r),i}function Bt(t,e,n,r){let i=null;const s=n&&n.getColDef().icons;if(s&&(i=s[t]),e&&!i){const o=e.get("icons");o&&(i=o[t])}if(i){let o;if(typeof i=="function")o=i();else if(typeof i=="string")o=i;else throw new Error("icon from grid options needs to be a string or a function");if(typeof o=="string")return Wr(o);if(Pm(o))return o;console.warn("AG Grid: iconRenderer should return back a string or a dom object")}else{const o=document.createElement("span");let a=fU[t];return a||(r?a=t:(console.warn(`AG Grid: Did not find icon ${t}`),a="")),o.setAttribute("class",`ag-icon ag-icon-${a}`),o.setAttribute("unselectable","on"),Ut(o,"presentation"),o}}var gU={};Nn(gU,{isDeleteKey:()=>yU,isEventFromPrintableCharacter:()=>uE,isUserSuppressingHeaderKeyboardEvent:()=>mU,isUserSuppressingKeyboardEvent:()=>jC,normaliseQwertyAzerty:()=>vU});var H=class{};H.BACKSPACE="Backspace";H.TAB="Tab";H.ENTER="Enter";H.ESCAPE="Escape";H.SPACE=" ";H.LEFT="ArrowLeft";H.UP="ArrowUp";H.RIGHT="ArrowRight";H.DOWN="ArrowDown";H.DELETE="Delete";H.F2="F2";H.PAGE_UP="PageUp";H.PAGE_DOWN="PageDown";H.PAGE_HOME="Home";H.PAGE_END="End";H.A="KeyA";H.C="KeyC";H.D="KeyD";H.V="KeyV";H.X="KeyX";H.Y="KeyY";H.Z="KeyZ";var une=65,cne=67,dne=86,hne=68,pne=90,fne=89;function uE(t){return t.altKey||t.ctrlKey||t.metaKey?!1:t.key.length===1}function jC(t,e,n,r,i){const s=r?r.getColDef().suppressKeyboardEvent:void 0;if(!s)return!1;const o=t.addGridCommonParams({event:e,editing:i,column:r,node:n,data:n.data,colDef:r.getColDef()});return!!(s&&s(o))}function mU(t,e,n,r){const i=r.getDefinition(),s=i&&i.suppressHeaderKeyboardEvent;if(!J(s))return!1;const o=t.addGridCommonParams({colDef:i,column:r,headerRowIndex:n,event:e});return!!s(o)}function vU(t){const{keyCode:e}=t;let n;switch(e){case une:n=H.A;break;case cne:n=H.C;break;case dne:n=H.V;break;case hne:n=H.D;break;case pne:n=H.Z;break;case fne:n=H.Y;break;default:n=t.code}return n}function yU(t,e=!1){return t===H.DELETE?!0:!e&&t===H.BACKSPACE?bI():!1}var CU={};Nn(CU,{areEventsNear:()=>kI});function kI(t,e,n){if(n===0)return!1;const r=Math.abs(t.clientX-e.clientX),i=Math.abs(t.clientY-e.clientY);return Math.max(r,i)<=n}var wU={};Nn(wU,{sortRowNodesByOrder:()=>gne});function gne(t,e){if(!t)return!1;const n=(o,a)=>{const l=e[o.id],u=e[a.id],c=l!==void 0,d=u!==void 0,h=c&&d,f=!c&&!d;return h?l-u:f?o.__objectId-a.__objectId:c?1:-1};let r,i,s=!1;for(let o=0;o<t.length-1;o++)if(r=t[o],i=t[o+1],n(r,i)>0){s=!0;break}return s?(t.sort(n),!0):!1}var SU={};Nn(SU,{convertToSet:()=>GI});function GI(t){const e=new Set;return t.forEach(n=>e.add(n)),e}var mne=me(me(me(me(me(me(me(me(me(me(me(me(me(me(me(me(me(me({},Mj),vj),qj),eU),rU),mj),lj),dU),sj),pU),gU),Oj),CU),tU),oj),wU),SU),Pj),be=mne,Ad=class{constructor(t=0,e=1){this.nextValue=t,this.step=e}next(){const t=this.nextValue;return this.nextValue+=this.step,t}peek(){return this.nextValue}skip(t){this.nextValue+=t}},an=class Fy{constructor(e){this.status=0,this.resolution=null,this.waiters=[],e(n=>this.onDone(n),n=>this.onReject(n))}static all(e){return new Fy(n=>{let r=e.length;const i=new Array(r);e.forEach((s,o)=>{s.then(a=>{i[o]=a,r--,r===0&&n(i)})})})}static resolve(e=null){return new Fy(n=>n(e))}then(e){return new Fy(n=>{this.status===1?n(e(this.resolution)):this.waiters.push(r=>n(e(r)))})}resolveNow(e,n){return this.status===1?n(this.resolution):e}onDone(e){this.status=1,this.resolution=e,this.waiters.forEach(n=>n(e))}onReject(e){console.warn("TBI")}},Dm=class{constructor(t){this.cssClassStates={},this.getGui=t}addCssClass(t){const e=(t||"").split(" ");if(e.length>1){e.forEach(r=>this.addCssClass(r));return}if(this.cssClassStates[t]!==!0&&t.length){const r=this.getGui();r&&r.classList.add(t),this.cssClassStates[t]=!0}}removeCssClass(t){const e=(t||"").split(" ");if(e.length>1){e.forEach(r=>this.removeCssClass(r));return}if(this.cssClassStates[t]!==!1&&t.length){const r=this.getGui();r&&r.classList.remove(t),this.cssClassStates[t]=!1}}containsCssClass(t){const e=this.getGui();return e?e.classList.contains(t):!1}addOrRemoveCssClass(t,e){if(!t)return;if(t.indexOf(" ")>=0){const r=(t||"").split(" ");if(r.length>1){r.forEach(i=>this.addOrRemoveCssClass(i,e));return}}if(this.cssClassStates[t]!==e&&t.length){const r=this.getGui();r&&r.classList.toggle(t,e),this.cssClassStates[t]=e}}},Om=class xl extends ee{constructor(e,n,r,i){super(),this.parentComp=e,this.tooltipShowDelayOverride=n,this.tooltipHideDelayOverride=r,this.shouldDisplayTooltip=i,this.SHOW_QUICK_TOOLTIP_DIFF=1e3,this.FADE_OUT_TOOLTIP_TIMEOUT=1e3,this.INTERACTIVE_HIDE_DELAY=100,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");const e=this.parentComp.getGui();this.tooltipTrigger===0&&(this.addManagedListener(e,"mouseenter",this.onMouseEnter.bind(this)),this.addManagedListener(e,"mouseleave",this.onMouseLeave.bind(this))),this.tooltipTrigger===1&&(this.addManagedListener(e,"focusin",this.onFocusIn.bind(this)),this.addManagedListener(e,"focusout",this.onFocusOut.bind(this))),this.addManagedListener(e,"mousemove",this.onMouseMove.bind(this)),this.interactionEnabled||(this.addManagedListener(e,"mousedown",this.onMouseDown.bind(this)),this.addManagedListener(e,"keydown",this.onKeyDown.bind(this)))}getGridOptionsTooltipDelay(e){const n=this.gos.get(e);return n<0&&we(`${e} should not be lower than 0`),Math.max(200,n)}getTooltipDelay(e){var n,r;return e==="show"?(n=this.tooltipShowDelayOverride)!=null?n:this.getGridOptionsTooltipDelay("tooltipShowDelay"):(r=this.tooltipHideDelayOverride)!=null?r:this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const e=this.gos.get("tooltipTrigger");return!e||e==="hover"?0:1}onMouseEnter(e){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!Ho()&&(xl.isLocked?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(e)},this.INTERACTIVE_HIDE_DELAY):this.prepareToShowTooltip(e))}onMouseMove(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(e){var n;const r=e.relatedTarget,i=this.parentComp.getGui(),s=(n=this.tooltipComp)==null?void 0:n.getGui();this.isInteractingWithTooltip||i.contains(r)||this.interactionEnabled&&(s!=null&&s.contains(r))||this.setToDoNothing()}onKeyDown(){this.setToDoNothing()}prepareToShowTooltip(e){if(this.state!=0||xl.isLocked)return;let n=0;e&&(n=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=e||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),n),this.state=1}isLastTooltipHiddenRecently(){const e=new Date().getTime(),n=xl.lastTooltipHideTime;return e-n<this.SHOW_QUICK_TOOLTIP_DIFF}setToDoNothing(){this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){const e=me({},this.parentComp.getTooltipParams());if(!J(e.value)||this.shouldDisplayTooltip&&!this.shouldDisplayTooltip()){this.setToDoNothing();return}this.state=2,this.tooltipInstanceCount++;const n=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(e).newAgStackInstance().then(n)}hideTooltip(e){if(!e&&this.isInteractingWithTooltip)return;this.tooltipComp&&(this.destroyTooltipComp(),xl.lastTooltipHideTime=new Date().getTime());const n={type:x.EVENT_TOOLTIP_HIDE,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(n),this.state=0}newTooltipComponentCallback(e,n){if(this.state!==2||this.tooltipInstanceCount!==e){this.getContext().destroyBean(n);return}const i=n.getGui();this.tooltipComp=n,i.classList.contains("ag-tooltip")||i.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&i.classList.add("ag-tooltip-animate"),this.interactionEnabled&&i.classList.add("ag-tooltip-interactive");const s=this.localeService.getLocaleTextFunc(),o=this.popupService.addPopup({eChild:i,ariaLabel:s("ariaLabelTooltip","Tooltip")});o&&(this.tooltipPopupDestroyFunc=o.hideFunc),this.positionTooltip(),this.tooltipTrigger===1&&(this.onBodyScrollEventCallback=this.addManagedListener(this.eventService,x.EVENT_BODY_SCROLL,this.setToDoNothing.bind(this)),this.onColumnMovedEventCallback=this.addManagedListener(this.eventService,x.EVENT_COLUMN_MOVED,this.setToDoNothing.bind(this))),this.interactionEnabled&&(this.tooltipTrigger===0?(this.tooltipMouseEnterListener=this.addManagedListener(i,"mouseenter",this.onTooltipMouseEnter.bind(this))||null,this.tooltipMouseLeaveListener=this.addManagedListener(i,"mouseleave",this.onTooltipMouseLeave.bind(this))||null):(this.tooltipFocusInListener=this.addManagedListener(i,"focusin",this.onTooltipFocusIn.bind(this))||null,this.tooltipFocusOutListener=this.addManagedListener(i,"focusout",this.onTooltipFocusOut.bind(this))||null));const a={type:x.EVENT_TOOLTIP_SHOW,tooltipGui:i,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(a),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isInteractingWithTooltip=!1,this.lockService()}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}onTooltipFocusOut(e){var n;const r=this.parentComp.getGui(),i=(n=this.tooltipComp)==null?void 0:n.getGui(),s=e.relatedTarget;i!=null&&i.contains(s)||(this.isInteractingWithTooltip=!1,r.contains(s)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){const e={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent(Dt(me({},e),{mouseEvent:this.lastMouseEvent})):this.popupService.positionPopupByComponent(Dt(me({},e),{eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5}))}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const e=this.tooltipPopupDestroyFunc,n=this.tooltipComp,r=this.tooltipTrigger===0?this.FADE_OUT_TOOLTIP_TIMEOUT:0;window.setTimeout(()=>{e(),this.getContext().destroyBean(n)},r),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(e=>{e&&e()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){xl.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},this.INTERACTIVE_HIDE_DELAY)}unlockService(){xl.isLocked=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};Om.isLocked=!1;w([O("popupService")],Om.prototype,"popupService",2);w([O("userComponentFactory")],Om.prototype,"userComponentFactory",2);w([te],Om.prototype,"postConstruct",1);var vne=Om,Bo=class extends ee{constructor(t,e){super(),this.ctrl=t,e&&(this.beans=e)}postConstruct(){this.refreshToolTip()}setBrowserTooltip(t){const e="title",n=this.ctrl.getGui();n&&(t!=null&&t!=""?n.setAttribute(e,t):n.removeAttribute(e))}updateTooltipText(){this.tooltip=this.ctrl.getTooltipValue()}createTooltipFeatureIfNeeded(){var t,e,n,r;if(this.tooltipManager!=null)return;const i={getTooltipParams:()=>this.getTooltipParams(),getGui:()=>this.ctrl.getGui()};this.tooltipManager=this.createBean(new vne(i,(e=(t=this.ctrl).getTooltipShowDelayOverride)==null?void 0:e.call(t),(r=(n=this.ctrl).getTooltipHideDelayOverride)==null?void 0:r.call(n),this.ctrl.shouldDisplayTooltip),this.beans.context)}refreshToolTip(){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context))):(this.setBrowserTooltip(null),this.createTooltipFeatureIfNeeded())}getTooltipParams(){const t=this.ctrl,e=t.getColumn?t.getColumn():void 0,n=t.getColDef?t.getColDef():void 0,r=t.getRowNode?t.getRowNode():void 0;return{location:t.getLocation(),colDef:n,column:e,rowIndex:t.getRowIndex?t.getRowIndex():void 0,node:r,data:r?r.data:void 0,value:this.getTooltipText(),valueFormatted:t.getValueFormatted?t.getValueFormatted():void 0,hideTooltipCallback:()=>{var i;return(i=this.tooltipManager)==null?void 0:i.hideTooltip(!0)}}}getTooltipText(){return this.tooltip}destroy(){this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)),super.destroy()}};w([O("beans")],Bo.prototype,"beans",2);w([te],Bo.prototype,"postConstruct",1);var yne=new Ad,Mm=class g_ extends ee{constructor(e){super(),this.displayed=!0,this.visible=!0,this.compId=yne.next(),this.cssClassManager=new Dm(()=>this.eGui),e&&this.setTemplate(e)}preConstructOnComponent(){this.usingBrowserTooltips=this.gos.get("enableBrowserTooltips")}getCompId(){return this.compId}getTooltipParams(){return{value:this.tooltipText,location:"UNKNOWN"}}setTooltip(e){const{newTooltipText:n,showDelayOverride:r,hideDelayOverride:i,location:s,shouldDisplayTooltip:o}=e||{};this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.tooltipText!==n&&(this.tooltipText=n);const a=()=>this.tooltipText;n!=null&&(this.tooltipFeature=this.createBean(new Bo({getTooltipValue:a,getGui:()=>this.getGui(),getLocation:()=>s??"UNKNOWN",getColDef:e==null?void 0:e.getColDef,getColumn:e==null?void 0:e.getColumn,getTooltipShowDelayOverride:r!=null?()=>r:void 0,getTooltipHideDelayOverride:i!=null?()=>i:void 0,shouldDisplayTooltip:o})))}createChildComponentsFromTags(e,n){uU(e.childNodes).forEach(i=>{if(!(i instanceof HTMLElement))return;const s=this.createComponentFromElement(i,o=>{o.getGui()&&this.copyAttributesFromNode(i,o.getGui())},n);if(s){if(s.addItems&&i.children.length){this.createChildComponentsFromTags(i,n);const o=Array.prototype.slice.call(i.children);s.addItems(o)}this.swapComponentForNode(s,e,i)}else i.childNodes&&this.createChildComponentsFromTags(i,n)})}createComponentFromElement(e,n,r){const i=e.nodeName,s=r?r[e.getAttribute("ref")]:void 0,o=this.agStackComponentsRegistry.getComponentClass(i);if(o){g_.elementGettingCreated=e;const a=new o(s);return a.setParentComponent(this),this.createBean(a,null,n),a}return null}copyAttributesFromNode(e,n){cU(e.attributes,(r,i)=>n.setAttribute(r,i))}swapComponentForNode(e,n,r){const i=e.getGui();n.replaceChild(i,r),n.insertBefore(document.createComment(r.nodeName),i),this.addDestroyFunc(this.destroyBean.bind(this,e)),this.swapInComponentForQuerySelectors(e,r)}swapInComponentForQuerySelectors(e,n){const r=this;this.iterateOverQuerySelectors(i=>{r[i.attributeName]===n&&(r[i.attributeName]=e)})}iterateOverQuerySelectors(e){let n=Object.getPrototypeOf(this);for(;n!=null;){const r=n.__agComponentMetaData,i=ZS(n.constructor);r&&r[i]&&r[i].querySelectors&&r[i].querySelectors.forEach(s=>e(s)),n=Object.getPrototypeOf(n)}}activateTabIndex(e){const n=this.gos.get("tabIndex");e||(e=[]),e.length||e.push(this.getGui()),e.forEach(r=>r.setAttribute("tabindex",n.toString()))}setTemplate(e,n){const r=Wr(e);this.setTemplateFromElement(r,n)}setTemplateFromElement(e,n){this.eGui=e,this.eGui.__agComponent=this,this.wireQuerySelectors(),this.getContext()&&this.createChildComponentsFromTags(this.getGui(),n)}createChildComponentsPreConstruct(){this.getGui()&&this.createChildComponentsFromTags(this.getGui())}wireQuerySelectors(){if(!this.eGui)return;const e=this;this.iterateOverQuerySelectors(n=>{const r=s=>e[n.attributeName]=s;if(n.refSelector&&this.getAttribute("ref")===n.refSelector)r(this.eGui);else{const s=this.eGui.querySelector(n.querySelector);s&&r(s.__agComponent||s)}})}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}queryForHtmlInputElement(e){return this.eGui.querySelector(e)}appendChild(e,n){if(e!=null)if(n||(n=this.eGui),Pm(e))n.appendChild(e);else{const r=e;n.appendChild(r.getGui())}}isDisplayed(){return this.displayed}setVisible(e,n={}){if(e!==this.visible){this.visible=e;const{skipAriaHidden:r}=n;sU(this.eGui,e,{skipAriaHidden:r})}}setDisplayed(e,n={}){if(e!==this.displayed){this.displayed=e;const{skipAriaHidden:r}=n;Ue(this.eGui,e,{skipAriaHidden:r});const i={type:g_.EVENT_DISPLAYED_CHANGED,visible:this.displayed};this.dispatchEvent(i)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const e=this.eGui;e&&e.__agComponent&&(e.__agComponent=void 0),super.destroy()}addGuiEventListener(e,n,r){this.eGui.addEventListener(e,n,r),this.addDestroyFunc(()=>this.eGui.removeEventListener(e,n))}addCssClass(e){this.cssClassManager.addCssClass(e)}removeCssClass(e){this.cssClassManager.removeCssClass(e)}containsCssClass(e){return this.cssClassManager.containsCssClass(e)}addOrRemoveCssClass(e,n){this.cssClassManager.addOrRemoveCssClass(e,n)}getAttribute(e){const{eGui:n}=this;return n?n.getAttribute(e):null}getRefElement(e){return this.queryForHtmlElement(`[ref="${e}"]`)}};Mm.EVENT_DISPLAYED_CHANGED="displayedChanged";w([O("agStackComponentsRegistry")],Mm.prototype,"agStackComponentsRegistry",2);w([hj],Mm.prototype,"preConstructOnComponent",1);w([hj],Mm.prototype,"createChildComponentsPreConstruct",1);var Ae=Mm;function ne(t){return Cne.bind(this,`[ref=${t}]`,t)}function Cne(t,e,n,r,i){if(t===null){console.error("AG Grid: QuerySelector selector should not be null");return}if(typeof i=="number"){console.error("AG Grid: QuerySelector should be on an attribute");return}wne(n,"querySelectors",{attributeName:r,querySelector:t,refSelector:e})}function wne(t,e,n){const r=Sne(t,ZS(t.constructor));r[e]||(r[e]=[]),r[e].push(n)}function Sne(t,e){return t.__agComponentMetaData||(t.__agComponentMetaData={}),t.__agComponentMetaData[e]||(t.__agComponentMetaData[e]={}),t.__agComponentMetaData[e]}var VI=class extends Ae{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>
            </div>`)}destroy(){super.destroy()}init(t){this.params=t;const e=this.columnModel.getDisplayNameForColumn(t.column,"header",!0),n=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${e} ${n("ariaFilterInput","Filter Input")}`)}onParentModelChanged(t){if(t==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(e=>{if(e.getModelAsString){const n=e.getModelAsString(t);this.eFloatingFilterText.setValue(n)}})}onParamsUpdated(t){this.refresh(t)}refresh(t){this.init(t)}};w([ne("eFloatingFilterText")],VI.prototype,"eFloatingFilterText",2);w([O("columnModel")],VI.prototype,"columnModel",2);var EU=class{constructor(t,e,n,r,i){this.alive=!0,this.context=t,this.eParent=r,e.getDateCompDetails(n).newAgStackInstance().then(a=>{if(!this.alive){t.destroyBean(a);return}this.dateComp=a,a&&(r.appendChild(a.getGui()),a.afterGuiAttached&&a.afterGuiAttached(),this.tempValue&&a.setDate(this.tempValue),this.disabled!=null&&this.setDateCompDisabled(this.disabled),i==null||i(this))})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(t){this.dateComp?this.dateComp.setDate(t):this.tempValue=t}setDisabled(t){this.dateComp?this.setDateCompDisabled(t):this.disabled=t}setDisplayed(t){Ue(this.eParent,t)}setInputPlaceholder(t){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(t)}setInputAriaLabel(t){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(t)}afterGuiAttached(t){this.dateComp&&typeof this.dateComp.afterGuiAttached=="function"&&this.dateComp.afterGuiAttached(t)}updateParams(t){var e,n;let r=!1;(e=this.dateComp)!=null&&e.refresh&&typeof this.dateComp.refresh=="function"&&this.dateComp.refresh(t)!==null&&(r=!0),!r&&((n=this.dateComp)!=null&&n.onParamsUpdated)&&typeof this.dateComp.onParamsUpdated=="function"&&this.dateComp.onParamsUpdated(t)!==null&&we("Custom date component method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}setDateCompDisabled(t){this.dateComp!=null&&this.dateComp.setDisabled!=null&&this.dateComp.setDisabled(t)}},bU=class{constructor(){this.customFilterOptions={}}init(t,e){this.filterOptions=t.filterOptions||e,this.mapCustomOptions(),this.selectDefaultItem(t)}getFilterOptions(){return this.filterOptions}mapCustomOptions(){this.filterOptions&&this.filterOptions.forEach(t=>{if(typeof t=="string")return;const e=[["displayKey"],["displayName"],["predicate","test"]],n=r=>r.some(i=>t[i]!=null)?!0:(console.warn(`AG Grid: ignoring FilterOptionDef as it doesn't contain one of '${r}'`),!1);if(!e.every(n)){this.filterOptions=this.filterOptions.filter(r=>r===t)||[];return}this.customFilterOptions[t.displayKey]=t})}selectDefaultItem(t){if(t.defaultOption)this.defaultOption=t.defaultOption;else if(this.filterOptions.length>=1){const e=this.filterOptions[0];typeof e=="string"?this.defaultOption=e:e.displayKey?this.defaultOption=e.displayKey:console.warn("AG Grid: invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else console.warn("AG Grid: no filter options for filter")}getDefaultOption(){return this.defaultOption}getCustomOption(t){return this.customFilterOptions[t]}},TU={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"},cE=class RU extends ee{constructor(e,n={}){super(),this.eFocusableElement=e,this.callbacks=n,this.callbacks=me({shouldStopEventPropagation:()=>!1,onTabKeyDown:r=>{if(r.defaultPrevented)return;const i=this.focusService.findNextFocusableElement(this.eFocusableElement,!1,r.shiftKey);i&&(i.focus(),r.preventDefault())}},n)}postConstruct(){this.eFocusableElement.classList.add(RU.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedListener(this.eFocusableElement,"focusin",this.callbacks.onFocusIn),this.callbacks.onFocusOut&&this.addManagedListener(this.eFocusableElement,"focusout",this.callbacks.onFocusOut)}addKeyDownListeners(e){this.addManagedListener(e,"keydown",n=>{if(!(n.defaultPrevented||ps(n))){if(this.callbacks.shouldStopEventPropagation(n)){Cs(n);return}n.key===H.TAB?this.callbacks.onTabKeyDown(n):this.callbacks.handleKeyDown&&this.callbacks.handleKeyDown(n)}})}};cE.FOCUS_MANAGED_CLASS="ag-focus-managed";w([O("focusService")],cE.prototype,"focusService",2);w([te],cE.prototype,"postConstruct",1);var il=cE,_U="ag-resizer-wrapper",Ene=`<div class="${_U}">
        <div ref="eTopLeftResizer" class="ag-resizer ag-resizer-topLeft"></div>
        <div ref="eTopResizer" class="ag-resizer ag-resizer-top"></div>
        <div ref="eTopRightResizer" class="ag-resizer ag-resizer-topRight"></div>
        <div ref="eRightResizer" class="ag-resizer ag-resizer-right"></div>
        <div ref="eBottomRightResizer" class="ag-resizer ag-resizer-bottomRight"></div>
        <div ref="eBottomResizer" class="ag-resizer ag-resizer-bottom"></div>
        <div ref="eBottomLeftResizer" class="ag-resizer ag-resizer-bottomLeft"></div>
        <div ref="eLeftResizer" class="ag-resizer ag-resizer-left"></div>
    </div>`,bh=class extends ee{constructor(t,e){super(),this.element=t,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},e)}center(){const{clientHeight:t,clientWidth:e}=this.offsetParent,n=e/2-this.getWidth()/2,r=t/2-this.getHeight()/2;this.offsetElement(n,r)}initialisePosition(){if(this.positioned)return;const{centered:t,forcePopupParentAsOffsetParent:e,minWidth:n,width:r,minHeight:i,height:s,x:o,y:a}=this.config;this.offsetParent||this.setOffsetParent();let l=0,u=0;const c=Yr(this.element);if(c){const d=this.findBoundaryElement(),h=window.getComputedStyle(d);if(h.minWidth!=null){const f=d.offsetWidth-this.element.offsetWidth;u=parseInt(h.minWidth,10)-f}if(h.minHeight!=null){const f=d.offsetHeight-this.element.offsetHeight;l=parseInt(h.minHeight,10)-f}}if(this.minHeight=i||l,this.minWidth=n||u,r&&this.setWidth(r),s&&this.setHeight(s),(!r||!s)&&this.refreshSize(),t)this.center();else if(o||a)this.offsetElement(o,a);else if(c&&e){let d=this.boundaryEl,h=!0;if(d||(d=this.findBoundaryElement(),h=!1),d){const f=parseFloat(d.style.top),g=parseFloat(d.style.left);h?this.offsetElement(isNaN(g)?0:g,isNaN(f)?0:f):this.setPosition(g,f)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(t,e){if(!this.config.popup||t===this.movable)return;this.movable=t;const n=this.moveElementDragListener||{eElement:e,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};t?(this.dragService.addDragSource(n),this.moveElementDragListener=n):(this.dragService.removeDragSource(n),this.moveElementDragListener=void 0)}setResizable(t){if(this.clearResizeListeners(),t?this.addResizers():this.removeResizers(),typeof t=="boolean"){if(t===!1)return;t={topLeft:t,top:t,topRight:t,right:t,bottomRight:t,bottom:t,bottomLeft:t,left:t}}Object.keys(t).forEach(e=>{const r=!!t[e],i=this.getResizerElement(e),s={dragStartPixels:0,eElement:i,onDragStart:o=>this.onResizeStart(o,e),onDragging:this.onResize.bind(this),onDragStop:o=>this.onResizeEnd(o,e)};(r||!this.isAlive()&&!r)&&(r?(this.dragService.addDragSource(s),this.resizeListeners.push(s),i.style.pointerEvents="all"):i.style.pointerEvents="none",this.resizable[e]=r)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:t,width:e}=this.lastSize;e!==-1&&(this.element.style.width=`${e}px`),t!==-1&&(this.element.style.height=`${t}px`)}getHeight(){return this.element.offsetHeight}setHeight(t){const{popup:e}=this.config,n=this.element;let r=!1;if(typeof t=="string"&&t.indexOf("%")!==-1)nu(n,t),t=PI(n),r=!0;else if(t=Math.max(this.minHeight,t),this.positioned){const i=this.getAvailableHeight();i&&t>i&&(t=i)}this.getHeight()!==t&&(r?(n.style.maxHeight="unset",n.style.minHeight="unset"):e?nu(n,t):(n.style.height=`${t}px`,n.style.flex="0 0 auto",this.lastSize.height=typeof t=="number"?t:parseFloat(t)))}getAvailableHeight(){const{popup:t,forcePopupParentAsOffsetParent:e}=this.config;this.positioned||this.initialisePosition();const{clientHeight:n}=this.offsetParent;if(!n)return null;const r=this.element.getBoundingClientRect(),i=this.offsetParent.getBoundingClientRect(),s=t?this.position.y:r.top,o=t?0:i.top;let a=0;if(e){const u=this.element.parentElement;if(u){const{bottom:c}=u.getBoundingClientRect();a=c-r.bottom}}return n+o-s-a}getWidth(){return this.element.offsetWidth}setWidth(t){const e=this.element,{popup:n}=this.config;let r=!1;if(typeof t=="string"&&t.indexOf("%")!==-1)Bi(e,t),t=rg(e),r=!0;else if(this.positioned){t=Math.max(this.minWidth,t);const{clientWidth:i}=this.offsetParent,s=n?this.position.x:this.element.getBoundingClientRect().left;i&&t+s>i&&(t=i-s)}this.getWidth()!==t&&(r?(e.style.maxWidth="unset",e.style.minWidth="unset"):this.config.popup?Bi(e,t):(e.style.width=`${t}px`,e.style.flex=" unset",this.lastSize.width=typeof t=="number"?t:parseFloat(t)))}offsetElement(t=0,e=0){const{forcePopupParentAsOffsetParent:n}=this.config,r=n?this.boundaryEl:this.element;r&&(this.popupService.positionPopup({ePopup:r,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:t,y:e})}),this.setPosition(parseFloat(r.style.left),parseFloat(r.style.top)))}constrainSizeToAvailableHeight(t){if(!this.config.forcePopupParentAsOffsetParent)return;const e=()=>{const n=this.getAvailableHeight();this.element.style.setProperty("max-height",`${n}px`)};t?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),e):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(t,e){this.position.x=t,this.position.y=e}updateDragStartPosition(t,e){this.dragStartPosition={x:t,y:e}}calculateMouseMovement(t){const{e,isLeft:n,isTop:r,anywhereWithin:i,topBuffer:s}=t,o=e.clientX-this.dragStartPosition.x,a=e.clientY-this.dragStartPosition.y,l=this.shouldSkipX(e,!!n,!!i,o)?0:o,u=this.shouldSkipY(e,!!r,s,a)?0:a;return{movementX:l,movementY:u}}shouldSkipX(t,e,n,r){const i=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),o=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:i.left;let l=a<=0&&s.left>=t.clientX||s.right<=t.clientX&&s.right<=o.right;return l?!0:(e?l=r<0&&t.clientX>a+s.left||r>0&&t.clientX<a+s.left:n?l=r<0&&t.clientX>o.right||r>0&&t.clientX<a+s.left:l=r<0&&t.clientX>o.right||r>0&&t.clientX<o.right,l)}shouldSkipY(t,e,n=0,r){const i=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),o=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:i.top;let l=a<=0&&s.top>=t.clientY||s.bottom<=t.clientY&&s.bottom<=o.bottom;return l?!0:(e?l=r<0&&t.clientY>a+s.top+n||r>0&&t.clientY<a+s.top:l=r<0&&t.clientY>o.bottom||r>0&&t.clientY<o.bottom,l)}createResizeMap(){const t=this.element;this.resizerMap={topLeft:{element:t.querySelector("[ref=eTopLeftResizer]")},top:{element:t.querySelector("[ref=eTopResizer]")},topRight:{element:t.querySelector("[ref=eTopRightResizer]")},right:{element:t.querySelector("[ref=eRightResizer]")},bottomRight:{element:t.querySelector("[ref=eBottomRightResizer]")},bottom:{element:t.querySelector("[ref=eBottomResizer]")},bottomLeft:{element:t.querySelector("[ref=eBottomLeftResizer]")},left:{element:t.querySelector("[ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;const t=this.element;if(!t)return;const n=new DOMParser().parseFromString(Ene,"text/html").body;t.appendChild(n.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;const t=this.element.querySelector(`.${_U}`);t&&this.element.removeChild(t),this.resizersAdded=!1}getResizerElement(t){return this.resizerMap[t].element}onResizeStart(t,e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!e.match(/top/i),isRight:!!e.match(/right/i),isBottom:!!e.match(/bottom/i),isLeft:!!e.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[e].element.classList.add("ag-active");const{popup:n,forcePopupParentAsOffsetParent:r}=this.config;!n&&!r&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(t.clientX,t.clientY)}getSiblings(){const e=this.element.parentElement;return e?Array.prototype.slice.call(e.children).filter(n=>!n.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){const t=this.getSiblings()||[];let e=0,n=0;for(let r=0;r<t.length;r++){const i=t[r],s=!!i.style.flex&&i.style.flex!=="0 0 auto";if(i===this.element)continue;let o=this.minHeight||0,a=this.minWidth||0;if(s){const l=window.getComputedStyle(i);l.minHeight&&(o=parseInt(l.minHeight,10)),l.minWidth&&(a=parseInt(l.minWidth,10))}else o=i.offsetHeight,a=i.offsetWidth;e+=o,n+=a}return{height:e,width:n}}applySizeToSiblings(t){let e=null;const n=this.getSiblings();if(n){for(let r=0;r<n.length;r++){const i=n[r];i!==e&&(t?i.style.height=`${i.offsetHeight}px`:i.style.width=`${i.offsetWidth}px`,i.style.flex="0 0 auto",i===this.element&&(e=n[r+1]))}e&&(e.style.removeProperty("height"),e.style.removeProperty("min-height"),e.style.removeProperty("max-height"),e.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(t=>t)}onResize(t){if(!this.isResizing||!this.currentResizer)return;const{popup:e,forcePopupParentAsOffsetParent:n}=this.config,{isTop:r,isRight:i,isBottom:s,isLeft:o}=this.currentResizer,a=i||o,l=s||r,{movementX:u,movementY:c}=this.calculateMouseMovement({e:t,isLeft:o,isTop:r}),d=this.position.x,h=this.position.y;let f=0,g=0;if(a&&u){const m=o?-1:1,v=this.getWidth(),C=v+u*m;let y=!1;o&&(f=v-C,(d+f<=0||C<=this.minWidth)&&(y=!0,f=0)),y||this.setWidth(C)}if(l&&c){const m=r?-1:1,v=this.getHeight(),C=v+c*m;let y=!1;r?(g=v-C,(h+g<=0||C<=this.minHeight)&&(y=!0,g=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&v<C&&this.getMinSizeOfSiblings().height+C>this.element.parentElement.offsetHeight&&(y=!0),y||this.setHeight(C)}this.updateDragStartPosition(t.clientX,t.clientY),((e||n)&&f||g)&&this.offsetElement(d+f,h+g)}onResizeEnd(t,e){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null;const n={type:"resize"};this.element.classList.remove("ag-resizing"),this.resizerMap[e].element.classList.remove("ag-active"),this.dispatchEvent(n)}refreshSize(){const t=this.element;this.config.popup&&(this.config.width||this.setWidth(t.offsetWidth),this.config.height||this.setHeight(t.offsetHeight))}onMoveStart(t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(t.clientX,t.clientY)}onMove(t){if(!this.isMoving)return;const{x:e,y:n}=this.position;let r;this.config.calculateTopBuffer&&(r=this.config.calculateTopBuffer());const{movementX:i,movementY:s}=this.calculateMouseMovement({e:t,isTop:!0,anywhereWithin:!0,topBuffer:r});this.offsetElement(e+i,n+s),this.updateDragStartPosition(t.clientX,t.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let t=this.element;for(;t;){if(window.getComputedStyle(t).position!=="static")return t;t=t.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){const t=this.resizeListeners.pop();this.dragService.removeDragSource(t)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}};w([O("popupService")],bh.prototype,"popupService",2);w([O("resizeObserverService")],bh.prototype,"resizeObserverService",2);w([O("dragService")],bh.prototype,"dragService",2);var dE=class jp extends Ae{constructor(e){super(),this.filterNameKey=e,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.buttonListeners=[]}postConstruct(){this.resetTemplate(),this.createManagedBean(new il(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new bh(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(e){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(e){let n=this.getGui();n&&n.removeEventListener("submit",this.onFormSubmit);const r=`
            <form class="ag-filter-wrapper">
                <div class="ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper" ref="eFilterBody">
                    ${this.createBodyTemplate()}
                </div>
            </form>`;this.setTemplate(r,e),n=this.getGui(),n&&n.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.providedFilterParams.readOnly}init(e){this.setParams(e),this.resetUiToDefaults(!0).then(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}setParams(e){this.providedFilterParams=e,this.applyActive=jp.isUseApplyButton(e),this.resetButtonsPanel()}updateParams(e){this.providedFilterParams=e,this.applyActive=jp.isUseApplyButton(e),this.resetUiToActiveModel(this.getModel(),()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}resetButtonsPanel(){const{buttons:e}=this.providedFilterParams,n=e&&e.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(en(this.eButtonsPanel),this.buttonListeners.forEach(s=>s==null?void 0:s()),this.buttonListeners=[]):n&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!n){this.eButtonsPanel&&us(this.eButtonsPanel);return}const r=document.createDocumentFragment(),i=s=>{let o,a;switch(s){case"apply":o=this.translate("applyFilter"),a=c=>this.onBtApply(!1,!1,c);break;case"clear":o=this.translate("clearFilter"),a=()=>this.onBtClear();break;case"reset":o=this.translate("resetFilter"),a=()=>this.onBtReset();break;case"cancel":o=this.translate("cancelFilter"),a=c=>{this.onBtCancel(c)};break;default:console.warn("AG Grid: Unknown button type specified");return}const u=Wr(`<button
                    type="${s==="apply"?"submit":"button"}"
                    ref="${s}FilterButton"
                    class="ag-button ag-standard-button ag-filter-apply-panel-button"
                >${o}
                </button>`);this.buttonListeners.push(this.addManagedListener(u,"click",a)),r.append(u)};GI(e).forEach(s=>i(s)),this.eButtonsPanel.append(r),this.getGui().appendChild(this.eButtonsPanel)}getDefaultDebounceMs(){return 0}setupOnBtApplyDebounce(){const e=jp.getDebounceMs(this.providedFilterParams,this.getDefaultDebounceMs()),n=yr(this.checkApplyDebounce.bind(this),e);this.onBtApplyDebounce=()=>{this.debouncePending=!0,n()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel?this.appliedModel:null}setModel(e){return(e!=null?this.setModelIntoUi(e):this.resetUiToDefaults()).then(()=>{this.updateUiVisibility(),this.applyModel("api")})}onBtCancel(e){this.resetUiToActiveModel(this.getModel(),()=>{this.handleCancelEnd(e)})}handleCancelEnd(e){this.providedFilterParams.closeOnApply&&this.close(e)}resetUiToActiveModel(e,n){const r=()=>{this.onUiChanged(!1,"prevent"),n==null||n()};e!=null?this.setModelIntoUi(e).then(r):this.resetUiToDefaults().then(r)}onBtClear(){this.resetUiToDefaults().then(()=>this.onUiChanged())}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(e="api"){const n=this.getModelFromUi();if(!this.isModelValid(n))return!1;const r=this.appliedModel;return this.appliedModel=n,!this.areModelsEqual(r,n)}isModelValid(e){return!0}onFormSubmit(e){e.preventDefault()}onBtApply(e=!1,n=!1,r){r&&r.preventDefault(),this.applyModel(n?"rowDataUpdated":"ui")&&this.providedFilterParams.filterChangedCallback({afterFloatingFilter:e,afterDataChange:n,source:"columnFilter"});const{closeOnApply:i}=this.providedFilterParams;i&&this.applyActive&&!e&&!n&&this.close(r)}onNewRowsLoaded(){}close(e){if(!this.hidePopup)return;const n=e,r=n&&n.key;let i;(r==="Enter"||r==="Space")&&(i={keyboardEvent:n}),this.hidePopup(i),this.hidePopup=null}onUiChanged(e=!1,n){if(this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){const r=this.isModelValid(this.getModelFromUi()),i=this.getRefElement("applyFilterButton");i&&_d(i,!r)}e&&!n||n==="immediately"?this.onBtApply(e):(!this.applyActive&&!n||n==="debounce")&&this.onBtApplyDebounce()}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(e==null?void 0:e.container)}refreshFilterResizer(e){if(!this.positionableFeature||e==="toolPanel")return;const n=e==="floatingFilter"||e==="columnFilter",{positionableFeature:r,gos:i}=this;n?(r.restoreLastSize(),r.setResizable(i.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)}static getDebounceMs(e,n){return jp.isUseApplyButton(e)?(e.debounceMs!=null&&console.warn("AG Grid: debounceMs is ignored when apply button is present"),0):e.debounceMs!=null?e.debounceMs:n}static isUseApplyButton(e){return!!e.buttons&&e.buttons.indexOf("apply")>=0}refresh(e){return this.providedFilterParams=e,!0}destroy(){const e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(e){return this.localeService.getLocaleTextFunc()(e,TU[e])}getCellValue(e){return this.providedFilterParams.getValue(e)}getPositionableElement(){return this.eFilterBody}};w([O("rowModel")],dE.prototype,"rowModel",2);w([ne("eFilterBody")],dE.prototype,"eFilterBody",2);w([te],dE.prototype,"postConstruct",1);var UC=dE,HI=class extends Ae{constructor(t,e){super(e),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=t||{}}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:t,label:e,labelWidth:n,labelAlignment:r,disabled:i}=this.config;i!=null&&this.setDisabled(i),t!=null&&this.setLabelSeparator(t),e!=null&&this.setLabel(e),n!=null&&this.setLabelWidth(n),this.setLabelAlignment(r||this.labelAlignment),this.refreshLabel()}refreshLabel(){en(this.eLabel),typeof this.label=="string"?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),this.label===""?(Ue(this.eLabel,!1),Ut(this.eLabel,"presentation")):(Ue(this.eLabel,!0),Ut(this.eLabel,null))}setLabelSeparator(t){return this.labelSeparator===t?this:(this.labelSeparator=t,this.label!=null&&this.refreshLabel(),this)}getLabelId(){return this.eLabel.id=this.eLabel.id||`ag-${this.getCompId()}-label`,this.eLabel.id}getLabel(){return this.label}setLabel(t){return this.label===t?this:(this.label=t,this.refreshLabel(),this)}setLabelAlignment(t){const n=this.getGui().classList;return n.toggle("ag-label-align-left",t==="left"),n.toggle("ag-label-align-right",t==="right"),n.toggle("ag-label-align-top",t==="top"),this}setLabelEllipsis(t){return this.eLabel.classList.toggle("ag-label-ellipsis",t),this}setLabelWidth(t){return this.label==null?this:(ag(this.eLabel,t),this)}setDisabled(t){t=!!t;const e=this.getGui();return _d(e,t),e.classList.toggle("ag-disabled",t),this.disabled=t,this}isDisabled(){return!!this.disabled}};w([te],HI.prototype,"postConstruct",1);var AU=class extends HI{constructor(t,e,n){super(t,e),this.className=n}postConstruct(){super.postConstruct();const{width:t,value:e,onValueChange:n}=this.config;t!=null&&this.setWidth(t),e!=null&&this.setValue(e),n!=null&&this.onValueChange(n),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()}refreshAriaLabelledBy(){const t=this.getAriaElement(),e=this.getLabelId();kj(t)!==null?Td(t,""):Td(t,e??"")}setAriaLabel(t){return Si(this.getAriaElement(),t),this.refreshAriaLabelledBy(),this}onValueChange(t){return this.addManagedListener(this,x.EVENT_FIELD_VALUE_CHANGED,()=>t(this.getValue())),this}getWidth(){return this.getGui().clientWidth}setWidth(t){return Bi(this.getGui(),t),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(t,e){return this.value===t?this:(this.previousValue=this.value,this.value=t,e||this.dispatchEvent({type:x.EVENT_FIELD_VALUE_CHANGED}),this)}},bne=`
    <div class="ag-picker-field" role="presentation">
        <div ref="eLabel"></div>
            <div ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">
            <div ref="eDisplayField" class="ag-picker-field-display"></div>
            <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
        </div>
    </div>`,$u=class extends AU{constructor(t){if(super(t,(t==null?void 0:t.template)||bne,t==null?void 0:t.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.ariaRole=t==null?void 0:t.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!t)return;const{pickerGap:e,maxPickerHeight:n,variableWidth:r,minPickerWidth:i,maxPickerWidth:s}=t;e!=null&&(this.pickerGap=e),this.variableWidth=!!r,n!=null&&this.setPickerMaxHeight(n),i!=null&&this.setPickerMinWidth(i),s!=null&&this.setPickerMaxWidth(s)}postConstruct(){super.postConstruct(),this.setupAria();const t=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",t);const e=this.getAriaElement();this.addManagedListener(e,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(this.eLabel,"mousedown",this.onLabelOrWrapperMouseDown.bind(this)),this.addManagedListener(this.eWrapper,"mousedown",this.onLabelOrWrapperMouseDown.bind(this));const{pickerIcon:n,inputWidth:r}=this.config;if(n){const i=Bt(n,this.gos);i&&this.eIcon.appendChild(i)}r!=null&&this.setInputWidth(r)}setupAria(){const t=this.getAriaElement();t.setAttribute("tabindex",this.gos.get("tabIndex").toString()),Io(t,!1),this.ariaRole&&Ut(t,this.ariaRole)}onLabelOrWrapperMouseDown(t){if(t){const e=this.getFocusableElement();if(e!==this.eWrapper&&(t==null?void 0:t.target)===e)return;t.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(t){switch(t.key){case H.UP:case H.DOWN:case H.ENTER:case H.SPACE:t.preventDefault(),this.onLabelOrWrapperMouseDown();break;case H.ESCAPE:this.isPickerDisplayed&&(t.preventDefault(),t.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const t=this.pickerComponent.getGui();t.addEventListener("focusin",this.onPickerFocusIn),t.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const t=this.gos.getDocument(),e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||(this.destroyMouseWheelFunc=this.addManagedListener(this.eventService,x.EVENT_BODY_SCROLL,()=>{this.hidePicker()}));const n=this.localeService.getLocaleTextFunc(),{pickerAriaLabelKey:r,pickerAriaLabelValue:i,modalPicker:s=!0}=this.config,o={modal:s,eChild:e,closeOnEsc:!0,closedCallback:()=>{const f=this.gos.getActiveDomElement(),g=!f||f===t.body;this.beforeHidePicker(),g&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:n(r,i)},a=this.popupService.addPopup(o),{maxPickerHeight:l,minPickerWidth:u,maxPickerWidth:c,variableWidth:d}=this;d?(u&&(e.style.minWidth=u),e.style.width=lE(rg(this.eWrapper)),c&&(e.style.maxWidth=c)):ag(e,c??rg(this.eWrapper));const h=l??`${xm(this.popupService.getPopupParent())}px`;return e.style.setProperty("max-height",h),e.style.position="absolute",this.alignPickerToComponent(),a.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;const{pickerType:t}=this.config,{pickerGap:e}=this,n=this.gos.get("enableRtl")?"right":"left";this.popupService.positionPopupByComponent({type:t,eventSource:this.eWrapper,ePopup:this.pickerComponent.getGui(),position:"under",alignSide:n,keepWithinBounds:!0,nudgeY:e})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const t=this.pickerComponent.getGui();t.removeEventListener("focusin",this.onPickerFocusIn),t.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(t){if(!this.isAlive())return;const e=this.getAriaElement();Io(e,t),this.eWrapper.classList.toggle("ag-picker-expanded",t),this.eWrapper.classList.toggle("ag-picker-collapsed",!t)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(t){var e;(e=this.pickerComponent)!=null&&e.getGui().contains(t.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(t){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",t)}hidePicker(){this.hideCurrentPicker&&this.hideCurrentPicker()}setInputWidth(t){return ag(this.eWrapper,t),this}getFocusableElement(){return this.eWrapper}setPickerGap(t){return this.pickerGap=t,this}setPickerMinWidth(t){return typeof t=="number"&&(t=`${t}px`),this.minPickerWidth=t??void 0,this}setPickerMaxWidth(t){return typeof t=="number"&&(t=`${t}px`),this.maxPickerWidth=t??void 0,this}setPickerMaxHeight(t){return typeof t=="number"&&(t=`${t}px`),this.maxPickerHeight=t??void 0,this}destroy(){this.hidePicker(),super.destroy()}};w([O("popupService")],$u.prototype,"popupService",2);w([ne("eLabel")],$u.prototype,"eLabel",2);w([ne("eWrapper")],$u.prototype,"eWrapper",2);w([ne("eDisplayField")],$u.prototype,"eDisplayField",2);w([ne("eIcon")],$u.prototype,"eIcon",2);var hE=class Ny extends Ae{constructor(e="default",n=!1){super(`<div class="ag-list ag-${e}-list" role="listbox"></div>`),this.cssIdentifier=e,this.unFocusable=n,this.options=[],this.itemEls=[]}init(){const e=this.getGui();this.addManagedListener(e,"mouseleave",()=>this.clearHighlighted()),!this.unFocusable&&this.addManagedListener(e,"keydown",this.handleKeyDown.bind(this))}handleKeyDown(e){const n=e.key;switch(n){case H.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{const r=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(r)}break;case H.DOWN:case H.UP:e.preventDefault(),this.navigate(n);break;case H.PAGE_DOWN:case H.PAGE_UP:case H.PAGE_HOME:case H.PAGE_END:e.preventDefault(),this.navigateToPage(n);break}}navigate(e){const n=e===H.DOWN;let r;if(!this.highlightedEl)r=this.itemEls[n?0:this.itemEls.length-1];else{let s=this.itemEls.indexOf(this.highlightedEl)+(n?1:-1);s=Math.min(Math.max(s,0),this.itemEls.length-1),r=this.itemEls[s]}this.highlightItem(r)}navigateToPage(e){if(!this.highlightedEl||this.itemEls.length===0)return;const n=this.itemEls.indexOf(this.highlightedEl),r=this.options.length-1,i=this.itemEls[0].clientHeight,s=Math.floor(this.getGui().clientHeight/i);let o=-1;e===H.PAGE_HOME?o=0:e===H.PAGE_END?o=r:e===H.PAGE_DOWN?o=Math.min(n+s,r):e===H.PAGE_UP&&(o=Math.max(n-s,0)),o!==-1&&this.highlightItem(this.itemEls[o])}addOptions(e){return e.forEach(n=>this.addOption(n)),this}addOption(e){const{value:n,text:r}=e,i=r||n;return this.options.push({value:n,text:i}),this.renderOption(n,i),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach(e=>{us(e)}),this.itemEls=[]}updateIndices(){const e=this.getGui().querySelectorAll(".ag-list-item");e.forEach((n,r)=>{sE(n,r+1),iE(n,e.length)})}renderOption(e,n){const r=this.gos.getDocument(),i=r.createElement("div");Ut(i,"option"),i.classList.add("ag-list-item",`ag-${this.cssIdentifier}-list-item`);const s=r.createElement("span");i.appendChild(s),s.textContent=n,this.unFocusable||(i.tabIndex=-1),this.itemEls.push(i),this.addManagedListener(i,"mousemove",()=>this.highlightItem(i)),this.addManagedListener(i,"mousedown",o=>{o.preventDefault(),this.setValue(e)}),this.createManagedBean(new Bo({getTooltipValue:()=>n,getGui:()=>i,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>s.scrollWidth>s.clientWidth})),this.getGui().appendChild(i)}setValue(e,n){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(n),this;const r=this.options.findIndex(i=>i.value===e);if(r!==-1){const i=this.options[r];this.value=i.value,this.displayValue=i.text,this.highlightItem(this.itemEls[r]),n||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const e=this.options.findIndex(n=>n.value===this.value);e!==-1&&this.highlightItem(this.itemEls[e])}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}highlightItem(e){if(!Yr(e))return;this.clearHighlighted(),this.highlightedEl=e,this.highlightedEl.classList.add(Ny.ACTIVE_CLASS),Rd(this.highlightedEl,!0);const n=this.getGui(),{scrollTop:r,clientHeight:i}=n,{offsetTop:s,offsetHeight:o}=e;(s+o>r+i||s<r)&&this.highlightedEl.scrollIntoView({block:"nearest"}),this.unFocusable||this.highlightedEl.focus()}clearHighlighted(){!this.highlightedEl||!Yr(this.highlightedEl)||(this.highlightedEl.classList.remove(Ny.ACTIVE_CLASS),Rd(this.highlightedEl,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchEvent({type:x.EVENT_FIELD_VALUE_CHANGED}),this.fireItemSelected()}fireItemSelected(){this.dispatchEvent({type:Ny.EVENT_ITEM_SELECTED})}};hE.EVENT_ITEM_SELECTED="selectedItem";hE.ACTIVE_CLASS="ag-active-item";w([te],hE.prototype,"init",1);var EL=hE,xU=class PU extends $u{constructor(e){super(me({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"combobox"},e))}postConstruct(){super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");const{options:e,value:n,placeholder:r}=this.config;e!=null&&this.addOptions(e),n!=null&&this.setValue(n,!0),r&&n==null&&(this.eDisplayField.textContent=r),this.addManagedListener(this.eWrapper,"focusout",this.onWrapperFocusOut.bind(this))}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){this.listComponent=this.createBean(new EL("select",!0)),this.listComponent.setParentComponent(this);const e=this.listComponent.getAriaElement(),n=`ag-select-list-${this.listComponent.getCompId()}`;e.setAttribute("id",n),wI(this.getAriaElement(),e),this.listComponent.addManagedListener(this.listComponent,EL.EVENT_ITEM_SELECTED,()=>{this.hidePicker(),this.dispatchEvent({type:PU.EVENT_ITEM_SELECTED})}),this.listComponent.addManagedListener(this.listComponent,x.EVENT_FIELD_VALUE_CHANGED,()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())})}createPickerComponent(){return this.listComponent}onKeyDown(e){var n;const{key:r}=e;switch(r===H.TAB&&this.hidePicker(),r){case H.ENTER:case H.UP:case H.DOWN:case H.PAGE_UP:case H.PAGE_DOWN:case H.PAGE_HOME:case H.PAGE_END:e.preventDefault(),this.isPickerDisplayed?(n=this.listComponent)==null||n.handleKeyDown(e):super.onKeyDown(e);break;case H.ESCAPE:super.onKeyDown(e);break}}showPicker(){this.listComponent&&(super.showPicker(),this.listComponent.refreshHighlighted())}addOptions(e){return e.forEach(n=>this.addOption(n)),this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){var e;return(e=this.listComponent)==null||e.clearOptions(),this}setValue(e,n,r){if(this.value===e||!this.listComponent)return this;if(r||this.listComponent.setValue(e,!0),this.listComponent.getValue()===this.getValue())return this;let s=this.listComponent.getDisplayValue();return s==null&&this.config.placeholder&&(s=this.config.placeholder),this.eDisplayField.textContent=s,this.setTooltip({newTooltipText:s??null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth}),super.setValue(e,n)}destroy(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),super.destroy()}};xU.EVENT_ITEM_SELECTED="selectedItem";var pE=xU,cs=class extends AU{constructor(t,e,n="text",r="input"){super(t,`
            <div role="presentation">
                <div ref="eLabel" class="ag-input-field-label"></div>
                <div ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">
                    <${r} ref="eInput" class="ag-input-field-input"></${r}>
                </div>
            </div>`,e),this.inputType=n,this.displayFieldTag=r}postConstruct(){super.postConstruct(),this.setInputType(),this.eLabel.classList.add(`${this.className}-label`),this.eWrapper.classList.add(`${this.className}-input-wrapper`),this.eInput.classList.add(`${this.className}-input`),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||`ag-${this.getCompId()}-input`;const{inputName:t,inputWidth:e}=this.config;t!=null&&this.setInputName(t),e!=null&&this.setInputWidth(e),this.addInputListeners(),this.activateTabIndex([this.eInput])}addInputListeners(){this.addManagedListener(this.eInput,"input",t=>this.setValue(t.target.value))}setInputType(){this.displayFieldTag==="input"&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(t){return ag(this.eWrapper,t),this}setInputName(t){return this.getInputElement().setAttribute("name",t),this}getFocusableElement(){return this.eInput}setMaxLength(t){const e=this.eInput;return e.maxLength=t,this}setInputPlaceholder(t){return Hs(this.eInput,"placeholder",t),this}setInputAriaLabel(t){return Si(this.eInput,t),this.refreshAriaLabelledBy(),this}setDisabled(t){return _d(this.eInput,t),super.setDisabled(t)}setAutoComplete(t){if(t===!0)Hs(this.eInput,"autocomplete",null);else{const e=typeof t=="string"?t:"off";Hs(this.eInput,"autocomplete",e)}return this}};w([ne("eLabel")],cs.prototype,"eLabel",2);w([ne("eWrapper")],cs.prototype,"eWrapper",2);w([ne("eInput")],cs.prototype,"eInput",2);var fE=class extends cs{constructor(t,e="ag-checkbox",n="checkbox"){super(t,e,n),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:t,passive:e}=this.config;typeof t=="boolean"&&this.setReadOnly(t),typeof e=="boolean"&&this.setPassive(e)}addInputListeners(){this.addManagedListener(this.eInput,"click",this.onCheckboxClick.bind(this)),this.addManagedListener(this.eLabel,"click",this.toggle.bind(this))}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(t){this.passive=t}isReadOnly(){return this.readOnly}setReadOnly(t){this.eWrapper.classList.toggle("ag-disabled",t),this.eInput.disabled=t,this.readOnly=t}setDisabled(t){return this.eWrapper.classList.toggle("ag-disabled",t),super.setDisabled(t)}toggle(){if(this.eInput.disabled)return;const t=this.isSelected(),e=this.getNextValue();this.passive?this.dispatchChange(e,t):this.setValue(e)}getValue(){return this.isSelected()}setValue(t,e){return this.refreshSelectedClass(t),this.setSelected(t,e),this}setName(t){const e=this.getInputElement();return e.name=t,this}isSelected(){return this.selected}setSelected(t,e){this.isSelected()!==t&&(this.previousValue=this.isSelected(),t=this.selected=typeof t=="boolean"?t:void 0,this.eInput.checked=t,this.eInput.indeterminate=t===void 0,e||this.dispatchChange(this.selected,this.previousValue))}dispatchChange(t,e,n){this.dispatchEvent({type:x.EVENT_FIELD_VALUE_CHANGED,selected:t,previousValue:e,event:n});const r=this.getInputElement(),i={type:x.EVENT_CHECKBOX_CHANGED,id:r.id,name:r.name,selected:t,previousValue:e};this.eventService.dispatchEvent(i)}onCheckboxClick(t){if(this.passive||this.eInput.disabled)return;const e=this.isSelected(),n=this.selected=t.target.checked;this.refreshSelectedClass(n),this.dispatchChange(n,e,t)}refreshSelectedClass(t){this.eWrapper.classList.toggle("ag-checked",t===!0),this.eWrapper.classList.toggle("ag-indeterminate",t==null)}},IU=class extends fE{constructor(t){super(t,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedListener(this.eventService,x.EVENT_CHECKBOX_CHANGED,this.onChange.bind(this))}onChange(t){t.selected&&t.name&&this.eInput.name&&this.eInput.name===t.name&&t.id&&this.eInput.id!==t.id&&this.setValue(!1,!0)}},BI=class{constructor(t,e,n){this.localeService=t,this.optionsFactory=e,this.valueFormatter=n}getModelAsString(t){if(!t)return null;const e=t.operator!=null,n=this.localeService.getLocaleTextFunc();if(e){const r=t;let{conditions:i}=r;if(!i){const{condition1:a,condition2:l}=r;i=[a,l]}const s=i.map(a=>this.getModelAsString(a)),o=r.operator==="AND"?"andCondition":"orCondition";return s.join(` ${n(o,TU[o])} `)}else{if(t.type===Wt.BLANK||t.type===Wt.NOT_BLANK)return n(t.type,t.type);{const r=t,i=this.optionsFactory.getCustomOption(r.type),{displayKey:s,displayName:o,numberOfInputs:a}=i||{};return s&&o&&a===0?(n(s,o),o):this.conditionToString(r,i)}}}updateParams(t){this.optionsFactory=t.optionsFactory}formatValue(t){var e;return this.valueFormatter?(e=this.valueFormatter(t??null))!=null?e:"":String(t)}},Ir=class mc extends UC{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(e){const n=this.optionsFactory.getCustomOption(e);if(n){const{numberOfInputs:i}=n;return i??1}const r=[mc.EMPTY,mc.NOT_BLANK,mc.BLANK];return e&&r.indexOf(e)>=0?0:e===mc.IN_RANGE?2:1}onFloatingFilterChanged(e,n){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(n),this.onUiChanged(!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((n,r)=>{r===0?n.setValue(e,!0):n.setValue(this.optionsFactory.getDefaultOption(),!0)})}getModelFromUi(){const e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),condition1:e[0],condition2:e[1],conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){return this.eJoinOperatorsOr.length===0?this.defaultJoinOperator:this.eJoinOperatorsOr[0].getValue()===!0?"OR":"AND"}areModelsEqual(e,n){if(!e&&!n)return!0;if(!e&&n||e&&!n)return!1;const r=!e.operator,i=!n.operator;if(!r&&i||r&&!i)return!1;let o;if(r){const a=e,l=n;o=this.areSimpleModelsEqual(a,l)}else{const a=e,l=n;o=a.operator===l.operator&&Os(a.conditions,l.conditions,(u,c)=>this.areSimpleModelsEqual(u,c))}return o}shouldRefresh(e){var n,r,i;const s=this.getModel(),o=s?(n=s.conditions)!=null?n:[s]:null,a=(i=(r=e.filterOptions)==null?void 0:r.map(u=>typeof u=="string"?u:u.displayKey))!=null?i:this.getDefaultFilterOptions();return!(!(!o||o.every(u=>a.find(c=>c===u.type)!==void 0))||typeof e.maxNumConditions=="number"&&o&&o.length>e.maxNumConditions)}refresh(e){return!this.shouldRefresh(e)||!super.refresh(e)?!1:(this.setParams(e),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0)}setModelIntoUi(e){if(e.operator){let r=e;r.conditions||(r.conditions=[r.condition1,r.condition2]);const i=this.validateAndUpdateConditions(r.conditions),s=this.getNumConditions();if(i<s)this.removeConditionsAndOperators(i);else if(i>s)for(let a=s;a<i;a++)this.createJoinOperatorPanel(),this.createOption();const o=r.operator==="OR";this.eJoinOperatorsAnd.forEach(a=>a.setValue(!o,!0)),this.eJoinOperatorsOr.forEach(a=>a.setValue(o,!0)),r.conditions.forEach((a,l)=>{this.eTypes[l].setValue(a.type,!0),this.setConditionIntoUi(a,l)})}else{const r=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(r.type,!0),this.setConditionIntoUi(r,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),an.resolve()}validateAndUpdateConditions(e){let n=e.length;return n>this.maxNumConditions&&(e.splice(this.maxNumConditions),we('Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.'),n=this.maxNumConditions),n}doesFilterPass(e){var n;const r=this.getModel();if(r==null)return!0;const{operator:i}=r,s=[];if(i){const a=r;s.push(...(n=a.conditions)!=null?n:[])}else s.push(r);return s[i&&i==="OR"?"some":"every"](a=>this.individualConditionPasses(e,a))}setParams(e){super.setParams(e),this.setNumConditions(e),this.defaultJoinOperator=this.getDefaultJoinOperator(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new bU,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(e){var n,r;e.suppressAndOrCondition!=null&&we('Since v29.2 "filterParams.suppressAndOrCondition" is deprecated. Use "filterParams.maxNumConditions = 1" instead.'),e.alwaysShowBothConditions!=null&&we('Since v29.2 "filterParams.alwaysShowBothConditions" is deprecated. Use "filterParams.numAlwaysVisibleConditions = 2" instead.'),this.maxNumConditions=(n=e.maxNumConditions)!=null?n:e.suppressAndOrCondition?1:2,this.maxNumConditions<1&&(we('"filterParams.maxNumConditions" must be greater than or equal to zero.'),this.maxNumConditions=1),this.numAlwaysVisibleConditions=(r=e.numAlwaysVisibleConditions)!=null?r:e.alwaysShowBothConditions?2:1,this.numAlwaysVisibleConditions<1&&(we('"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.'),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(we('"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".'),this.numAlwaysVisibleConditions=this.maxNumConditions)}createOption(){const e=this.createManagedBean(new pE);this.eTypes.push(e),e.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(e.getGui());const n=this.createValueElement();this.eConditionBodies.push(n),this.eFilterBody.appendChild(n),this.putOptionsIntoDropdown(e),this.resetType(e);const r=this.getNumConditions()-1;this.forEachPositionInput(r,i=>this.resetInput(i)),this.addChangedListeners(e,r)}createJoinOperatorPanel(){const e=document.createElement("div");this.eJoinOperatorPanels.push(e),e.classList.add("ag-filter-condition");const n=this.createJoinOperator(this.eJoinOperatorsAnd,e,"and"),r=this.createJoinOperator(this.eJoinOperatorsOr,e,"or");this.eFilterBody.appendChild(e);const i=this.eJoinOperatorPanels.length-1,s=this.joinOperatorId++;this.resetJoinOperatorAnd(n,i,s),this.resetJoinOperatorOr(r,i,s),this.isReadOnly()||(n.onValueChange(this.listener),r.onValueChange(this.listener))}createJoinOperator(e,n,r){const i=this.createManagedBean(new IU);return e.push(i),i.addCssClass("ag-filter-condition-operator"),i.addCssClass(`ag-filter-condition-operator-${r}`),n.appendChild(i.getGui()),i}getDefaultJoinOperator(e){return e==="AND"||e==="OR"?e:"AND"}createFilterListOptions(){const e=this.optionsFactory.getFilterOptions();this.filterListOptions=e.map(n=>typeof n=="string"?this.createBoilerplateListOption(n):this.createCustomListOption(n))}putOptionsIntoDropdown(e){this.filterListOptions.forEach(n=>{e.addOption(n)}),e.setDisabled(this.filterListOptions.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){const{displayKey:n}=e,r=this.optionsFactory.getCustomOption(e.displayKey);return{value:n,text:r?this.localeService.getLocaleTextFunc()(r.displayKey,r.displayName):this.translate(n)}}isAllowTwoConditions(){return this.maxNumConditions>=2}createBodyTemplate(){return""}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){const e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){var e;let n=-1,r=!0;for(let i=0;i<this.getNumConditions();i++)this.isConditionUiComplete(i)?n=i:r=!1;if(this.shouldAddNewConditionAtEnd(r))this.createJoinOperatorPanel(),this.createOption();else{const i=(e=this.lastUiCompletePosition)!=null?e:this.getNumConditions()-2;if(n<i){this.removeConditionsAndOperators(i+1);const s=n+1,o=i-s;o>0&&this.removeConditionsAndOperators(s,o),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=n}updateConditionStatusesAndValues(e,n){this.eTypes.forEach((i,s)=>{const o=this.isConditionDisabled(s,e);i.setDisabled(o||this.filterListOptions.length<=1),s===1&&(_d(this.eJoinOperatorPanels[0],o),this.eJoinOperatorsAnd[0].setDisabled(o),this.eJoinOperatorsOr[0].setDisabled(o))}),this.eConditionBodies.forEach((i,s)=>{Ue(i,this.isConditionBodyVisible(s))});const r=(n??this.getJoinOperator())==="OR";this.eJoinOperatorsAnd.forEach((i,s)=>{i.setValue(!r,!0)}),this.eJoinOperatorsOr.forEach((i,s)=>{i.setValue(r,!0)}),this.forEachInput((i,s,o,a)=>{this.setElementDisplayed(i,s<a),this.setElementDisabled(i,this.isConditionDisabled(o,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,n){if(e>=this.getNumConditions())return;this.removeComponents(this.eTypes,e,n),this.removeElements(this.eConditionBodies,e,n),this.removeValueElements(e,n);const r=Math.max(e-1,0);this.removeElements(this.eJoinOperatorPanels,r,n),this.removeComponents(this.eJoinOperatorsAnd,r,n),this.removeComponents(this.eJoinOperatorsOr,r,n)}removeElements(e,n,r){this.removeItems(e,n,r).forEach(s=>us(s))}removeComponents(e,n,r){this.removeItems(e,n,r).forEach(s=>{us(s.getGui()),this.destroyBean(s)})}removeItems(e,n,r){return r==null?e.splice(n):e.splice(n,r)}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!(e!=null&&e.suppressFocus))if(this.isReadOnly())this.eFilterBody.focus();else{const n=this.getInputs(0)[0];if(!n)return;n instanceof cs&&n.getInputElement().focus()}}afterGuiDetached(){super.afterGuiDetached();const e=this.getModel();this.resetUiToActiveModel(e);let n=-1,r=-1,i=!1;const s=this.getJoinOperator();for(let a=this.getNumConditions()-1;a>=0;a--)if(this.isConditionUiComplete(a))n===-1&&(n=a,r=a);else{const l=a>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(a-1),u=a<n;(l||u)&&(this.removeConditionsAndOperators(a,1),i=!0,u&&r--)}let o=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),o=!0),this.shouldAddNewConditionAtEnd(r===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),o=!0),o&&this.updateConditionStatusesAndValues(r,s),i&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=r}getPlaceholderText(e,n){let r=this.translate(e);if(eE(this.filterPlaceholder)){const i=this.filterPlaceholder,s=this.eTypes[n].getValue(),o=this.translate(s);r=i({filterOptionKey:s,filterOption:o,placeholder:r})}else typeof this.filterPlaceholder=="string"&&(r=this.filterPlaceholder);return r}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc();this.forEachInput((n,r,i,s)=>{if(!(n instanceof cs))return;const o=r===0&&s>1?"inRangeStart":r===0?"filterOoo":"inRangeEnd",a=r===0&&s>1?e("ariaFilterFromValue","Filter from value"):r===0?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");n.setInputPlaceholder(this.getPlaceholderText(o,i)),n.setInputAriaLabel(a)})}setElementValue(e,n,r){e instanceof cs&&e.setValue(n!=null?String(n):null,!0)}setElementDisplayed(e,n){e instanceof Ae&&Ue(e.getGui(),n)}setElementDisabled(e,n){e instanceof Ae&&_d(e.getGui(),n)}attachElementOnChange(e,n){e instanceof cs&&e.onValueChange(n)}forEachInput(e){this.getConditionTypes().forEach((n,r)=>{this.forEachPositionTypeInput(r,n,e)})}forEachPositionInput(e,n){const r=this.getConditionType(e);this.forEachPositionTypeInput(e,r,n)}forEachPositionTypeInput(e,n,r){const i=this.getNumberOfInputs(n),s=this.getInputs(e);for(let o=0;o<s.length;o++){const a=s[o];a!=null&&r(a,o,e,i)}}isConditionDisabled(e,n){return this.isReadOnly()?!0:e===0?!1:e>n+1}isConditionBodyVisible(e){const n=this.getConditionType(e);return this.getNumberOfInputs(n)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||this.getConditionType(e)===mc.EMPTY||this.getValues(e).some(r=>r==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const e=[];for(let n=0;n<this.getNumConditions();n++)this.isConditionUiComplete(n)&&e.push(this.createCondition(n));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(n=>this.resetType(n)),this.eJoinOperatorsAnd.forEach((n,r)=>this.resetJoinOperatorAnd(n,r,this.joinOperatorId+r)),this.eJoinOperatorsOr.forEach((n,r)=>this.resetJoinOperatorOr(n,r,this.joinOperatorId+r)),this.joinOperatorId++,this.forEachInput(n=>this.resetInput(n)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,e||this.onUiChanged(),an.resolve()}resetType(e){const r=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(r).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,n,r){this.resetJoinOperator(e,n,this.isDefaultOperator("AND"),this.translate("andCondition"),r)}resetJoinOperatorOr(e,n,r){this.resetJoinOperator(e,n,this.isDefaultOperator("OR"),this.translate("orCondition"),r)}resetJoinOperator(e,n,r,i,s){this.updateJoinOperatorDisabled(e.setValue(r,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${s}`).setLabel(i),n)}updateJoinOperatorsDisabled(){this.eJoinOperatorsAnd.forEach((e,n)=>this.updateJoinOperatorDisabled(e,n)),this.eJoinOperatorsOr.forEach((e,n)=>this.updateJoinOperatorDisabled(e,n))}updateJoinOperatorDisabled(e,n){e.setDisabled(this.isReadOnly()||n>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,n){const r=this.mapValuesFromModel(e);this.forEachInput((i,s,o,a)=>{o===n&&this.setElementValue(i,r[s]!=null?r[s]:null)})}setValueFromFloatingFilter(e){this.forEachInput((n,r,i,s)=>{this.setElementValue(n,r===0&&i===0?e:null,!0)})}isDefaultOperator(e){return e===this.defaultJoinOperator}addChangedListeners(e,n){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(n,r=>{this.attachElementOnChange(r,this.listener)}))}individualConditionPasses(e,n){const r=this.getCellValue(e.node),i=this.mapValuesFromModel(n),s=this.optionsFactory.getCustomOption(n.type),o=this.evaluateCustomFilter(s,i,r);return o??(r==null?this.evaluateNullValue(n.type):this.evaluateNonNullValue(i,r,n,e))}evaluateCustomFilter(e,n,r){if(e==null)return;const{predicate:i}=e;if(i!=null&&!n.some(s=>s==null))return i(n,r)}isBlank(e){return e==null||typeof e=="string"&&e.trim().length===0}hasInvalidInputs(){return!1}};Ir.EMPTY="empty";Ir.BLANK="blank";Ir.NOT_BLANK="notBlank";Ir.EQUALS="equals";Ir.NOT_EQUAL="notEqual";Ir.LESS_THAN="lessThan";Ir.LESS_THAN_OR_EQUAL="lessThanOrEqual";Ir.GREATER_THAN="greaterThan";Ir.GREATER_THAN_OR_EQUAL="greaterThanOrEqual";Ir.IN_RANGE="inRange";Ir.CONTAINS="contains";Ir.NOT_CONTAINS="notContains";Ir.STARTS_WITH="startsWith";Ir.ENDS_WITH="endsWith";var Wt=Ir,hn=class yn extends Wt{setParams(e){super.setParams(e),this.scalarFilterParams=e}evaluateNullValue(e){switch(e){case yn.EQUALS:case yn.NOT_EQUAL:if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case yn.GREATER_THAN:case yn.GREATER_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case yn.LESS_THAN:case yn.LESS_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case yn.IN_RANGE:if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case yn.BLANK:return!0;case yn.NOT_BLANK:return!1}return!1}evaluateNonNullValue(e,n,r){const i=this.comparator(),s=e[0]!=null?i(e[0],n):0;switch(r.type){case yn.EQUALS:return s===0;case yn.NOT_EQUAL:return s!==0;case yn.GREATER_THAN:return s>0;case yn.GREATER_THAN_OR_EQUAL:return s>=0;case yn.LESS_THAN:return s<0;case yn.LESS_THAN_OR_EQUAL:return s<=0;case yn.IN_RANGE:{const o=i(e[1],n);return this.scalarFilterParams.inRangeInclusive?s>=0&&o<=0:s>0&&o<0}case yn.BLANK:return this.isBlank(n);case yn.NOT_BLANK:return!this.isBlank(n);default:return console.warn('AG Grid: Unexpected type of filter "'+r.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}}},bL=1e3,TL=1/0,DU=class extends BI{constructor(t,e,n){super(e,n),this.dateFilterParams=t}conditionToString(t,e){const{type:n}=t,{numberOfInputs:r}=e||{},i=n==Wt.IN_RANGE||r===2,s=$r(t.dateFrom),o=$r(t.dateTo),a=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(i){const l=s!==null?nd(s,a):"null",u=o!==null?nd(o,a):"null";return`${l}-${u}`}return s!=null?nd(s,a):`${n}`}updateParams(t){super.updateParams(t),this.dateFilterParams=t.dateFilterParams}},$I=class OU extends hn{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=bL,this.maxValidYear=TL,this.minValidDate=null,this.maxValidDate=null}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}mapValuesFromModel(e){const{dateFrom:n,dateTo:r,type:i}=e||{};return[n&&$r(n)||null,r&&$r(r)||null].slice(0,this.getNumberOfInputs(i))}comparator(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)}defaultComparator(e,n){const r=n;return n==null||r<e?-1:r>e?1:0}setParams(e){this.dateFilterParams=e,super.setParams(e);const n=(r,i)=>{if(e[r]!=null)if(isNaN(e[r]))console.warn(`AG Grid: DateFilter ${r} is not a number`);else return e[r]==null?i:Number(e[r]);return i};this.minValidYear=n("minValidYear",bL),this.maxValidYear=n("maxValidYear",TL),this.minValidYear>this.maxValidYear&&console.warn("AG Grid: DateFilter minValidYear should be <= maxValidYear"),e.minValidDate?this.minValidDate=e.minValidDate instanceof Date?e.minValidDate:$r(e.minValidDate):this.minValidDate=null,e.maxValidDate?this.maxValidDate=e.maxValidDate instanceof Date?e.maxValidDate:$r(e.maxValidDate):this.maxValidDate=null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&console.warn("AG Grid: DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new DU(this.dateFilterParams,this.localeService,this.optionsFactory)}createDateCompWrapper(e){const n=new EU(this.getContext(),this.userComponentFactory,{onDateChanged:()=>this.onUiChanged(),filterParams:this.dateFilterParams},e);return this.addDestroyFunc(()=>n.destroy()),n}setElementValue(e,n){e.setDate(n)}setElementDisplayed(e,n){e.setDisplayed(n)}setElementDisabled(e,n){e.setDisabled(n)}getDefaultFilterOptions(){return OU.DEFAULT_FILTER_OPTIONS}createValueElement(){const n=this.gos.getDocument().createElement("div");return n.classList.add("ag-filter-body"),this.createFromToElement(n,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(n,this.eConditionPanelsTo,this.dateConditionToComps,"to"),n}createFromToElement(e,n,r,i){const o=this.gos.getDocument().createElement("div");o.classList.add(`ag-filter-${i}`),o.classList.add(`ag-filter-date-${i}`),n.push(o),e.appendChild(o),r.push(this.createDateCompWrapper(o))}removeValueElements(e,n){this.removeDateComps(this.dateConditionFromComps,e,n),this.removeDateComps(this.dateConditionToComps,e,n),this.removeItems(this.eConditionPanelsFrom,e,n),this.removeItems(this.eConditionPanelsTo,e,n)}removeDateComps(e,n,r){this.removeItems(e,n,r).forEach(s=>s.destroy())}isValidDateValue(e){if(e===null)return!1;if(this.minValidDate){if(e<this.minValidDate)return!1}else if(e.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(e>this.maxValidDate)return!1}else if(e.getUTCFullYear()>this.maxValidYear)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let n=!0;return this.forEachInput((r,i,s,o)=>{s!==e||!n||i>=o||(n=n&&this.isValidDateValue(r.getDate()))}),n}areSimpleModelsEqual(e,n){return e.dateFrom===n.dateFrom&&e.dateTo===n.dateTo&&e.type===n.type}getFilterType(){return"date"}createCondition(e){const n=this.getConditionType(e),r={},i=this.getValues(e);return i.length>0&&(r.dateFrom=Hi(i[0])),i.length>1&&(r.dateTo=Hi(i[1])),me({dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:n},r)}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc(),n=this.translate("dateFormatOoo"),r=e("ariaFilterValue","Filter Value");this.forEachInput(i=>{i.setInputPlaceholder(n),i.setInputAriaLabel(r)})}getInputs(e){return e>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[e],this.dateConditionToComps[e]]}getValues(e){const n=[];return this.forEachPositionInput(e,(r,i,s,o)=>{i<o&&n.push(r.getDate())}),n}translate(e){return e===hn.LESS_THAN?super.translate("before"):e===hn.GREATER_THAN?super.translate("after"):super.translate(e)}getModelAsString(e){var n;return(n=this.filterModelFormatter.getModelAsString(e))!=null?n:""}};$I.DEFAULT_FILTER_OPTIONS=[hn.EQUALS,hn.NOT_EQUAL,hn.LESS_THAN,hn.GREATER_THAN,hn.IN_RANGE,hn.BLANK,hn.NOT_BLANK];w([O("userComponentFactory")],$I.prototype,"userComponentFactory",2);var MU=$I,WI=class extends Ae{getDefaultDebounceMs(){return 0}destroy(){super.destroy()}isEventFromFloatingFilter(t){return t&&t.afterFloatingFilter}isEventFromDataChange(t){return t==null?void 0:t.afterDataChange}getLastType(){return this.lastType}isReadOnly(){return this.readOnly}setLastTypeFromModel(t){if(!t){this.lastType=this.optionsFactory.getDefaultOption();return}const e=t.operator;let n;e?n=t.conditions[0]:n=t,this.lastType=n.type}canWeEditAfterModelFromParentFilter(t){if(!t)return this.isTypeEditable(this.lastType);if(t.operator)return!1;const n=t;return this.isTypeEditable(n.type)}init(t){this.setSimpleParams(t,!1)}setSimpleParams(t,e=!0){this.optionsFactory=new bU,this.optionsFactory.init(t.filterParams,this.getDefaultFilterOptions()),e||(this.lastType=this.optionsFactory.getDefaultOption()),this.readOnly=!!t.filterParams.readOnly;const n=this.isTypeEditable(this.optionsFactory.getDefaultOption());this.setEditable(n)}onParamsUpdated(t){this.refresh(t)}refresh(t){this.setSimpleParams(t)}doesFilterHaveSingleInput(t){const e=this.optionsFactory.getCustomOption(t),{numberOfInputs:n}=e||{};return n==null||n==1}isTypeEditable(t){const e=[Wt.IN_RANGE,Wt.EMPTY,Wt.BLANK,Wt.NOT_BLANK];return!!t&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(t)&&e.indexOf(t)<0}getAriaLabel(t){const e=this.columnModel.getDisplayNameForColumn(t.column,"header",!0),n=this.localeService.getLocaleTextFunc();return`${e} ${n("ariaFilterInput","Filter Input")}`}};w([O("columnModel")],WI.prototype,"columnModel",2);var gE=class extends WI{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field ref="eReadOnlyText"></ag-input-text-field>
                <div ref="eDateWrapper" style="display: flex;"></div>
            </div>`)}getDefaultFilterOptions(){return MU.DEFAULT_FILTER_OPTIONS}init(t){super.init(t),this.params=t,this.filterParams=t.filterParams,this.createDateComponent(),this.filterModelFormatter=new DU(this.filterParams,this.localeService,this.optionsFactory);const e=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(e("ariaDateFilterInput","Date Filter Input"))}onParamsUpdated(t){this.refresh(t)}refresh(t){super.refresh(t),this.params=t,this.filterParams=t.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(t.currentParentModel())}updateCompOnModelChange(t){const e=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(t);if(this.setEditable(e),e){if(t){const n=t;this.dateComp.setDate($r(n.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(t)),this.dateComp.setDate(null)}setEditable(t){Ue(this.eDateWrapper,t),Ue(this.eReadOnlyText.getGui(),!t)}onParentModelChanged(t,e){this.isEventFromFloatingFilter(e)||this.isEventFromDataChange(e)||(super.setLastTypeFromModel(t),this.updateCompOnModelChange(t))}onDateChanged(){const t=this.dateComp.getDate(),e=Hi(t);this.params.parentFilterInstance(n=>{if(n){const r=$r(e);n.onFloatingFilterChanged(this.getLastType()||null,r)}})}getDateComponentParams(){const t=UC.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:yr(this.onDateChanged.bind(this),t),filterParams:this.params.column.getColDef().filterParams}}createDateComponent(){this.dateComp=new EU(this.getContext(),this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper,t=>{t.setInputAriaLabel(this.getAriaLabel(this.params))}),this.addDestroyFunc(()=>this.dateComp.destroy())}updateDateComponent(){const t=this.gos.addGridCommonParams(this.getDateComponentParams());this.dateComp.updateParams(t)}getFilterModelFormatter(){return this.filterModelFormatter}};w([O("userComponentFactory")],gE.prototype,"userComponentFactory",2);w([ne("eReadOnlyText")],gE.prototype,"eReadOnlyText",2);w([ne("eDateWrapper")],gE.prototype,"eDateWrapper",2);var FU=class extends Ae{constructor(){super(`
            <div class="ag-filter-filter">
                <ag-input-text-field class="ag-date-filter" ref="eDateInput"></ag-input-text-field>
            </div>`)}destroy(){super.destroy()}init(t){this.params=t,this.setParams(t);const e=this.eDateInput.getInputElement();this.addManagedListener(e,"mousedown",()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||e.focus()}),this.addManagedListener(e,"input",n=>{n.target===this.gos.getActiveDomElement()&&(this.eDateInput.isDisabled()||this.params.onDateChanged())})}setParams(t){const e=this.eDateInput.getInputElement(),n=this.shouldUseBrowserDatePicker(t);this.usingSafariDatePicker=n&&js(),e.type=n?"date":"text";const{minValidYear:r,maxValidYear:i,minValidDate:s,maxValidDate:o}=t.filterParams||{};if(s&&r&&we("DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored."),o&&i&&we("DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored."),s&&o){const[a,l]=[s,o].map(u=>u instanceof Date?u:$r(u));a&&l&&a.getTime()>l.getTime()&&we("DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")}s?s instanceof Date?e.min=nd(s):e.min=s:r&&(e.min=`${r}-01-01`),o?o instanceof Date?e.max=nd(o):e.max=o:i&&(e.max=`${i}-12-31`)}onParamsUpdated(t){this.refresh(t)}refresh(t){this.params=t,this.setParams(t)}getDate(){return $r(this.eDateInput.getValue())}setDate(t){this.eDateInput.setValue(Hi(t,!1))}setInputPlaceholder(t){this.eDateInput.setInputPlaceholder(t)}setInputAriaLabel(t){this.eDateInput.setAriaLabel(t)}setDisabled(t){this.eDateInput.setDisabled(t)}afterGuiAttached(t){(!t||!t.suppressFocus)&&this.eDateInput.getInputElement().focus()}shouldUseBrowserDatePicker(t){return t.filterParams&&t.filterParams.browserDatePicker!=null?t.filterParams.browserDatePicker:aE()||EI()||js()&&SI()>=14.1}};w([ne("eDateInput")],FU.prototype,"eDateInput",2);var Wu=class extends cs{constructor(t,e="ag-text-field",n="text"){super(t,e,n)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(t,e){return this.eInput.value!==t&&(this.eInput.value=J(t)?t:""),super.setValue(t,e)}setStartValue(t){this.setValue(t,!0)}preventDisallowedCharacters(){const t=new RegExp(`[${this.config.allowedCharPattern}]`),e=n=>{uE(n)&&n.key&&!t.test(n.key)&&n.preventDefault()};this.addManagedListener(this.eInput,"keydown",e),this.addManagedListener(this.eInput,"paste",n=>{var r;const i=(r=n.clipboardData)==null?void 0:r.getData("text");i&&i.split("").some(s=>!t.test(s))&&n.preventDefault()})}},jI=class extends Wu{constructor(t){super(t,"ag-number-field","number")}postConstruct(){super.postConstruct(),this.addManagedListener(this.eInput,"blur",()=>{const i=parseFloat(this.eInput.value),s=isNaN(i)?"":this.normalizeValue(i.toString());this.value!==s&&this.setValue(s)}),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this)),this.eInput.step="any";const{precision:t,min:e,max:n,step:r}=this.config;typeof t=="number"&&this.setPrecision(t),typeof e=="number"&&this.setMin(e),typeof n=="number"&&this.setMax(n),typeof r=="number"&&this.setStep(r)}onWheel(t){this.gos.getActiveDomElement()===this.eInput&&t.preventDefault()}normalizeValue(t){if(t==="")return"";this.precision!=null&&(t=this.adjustPrecision(t));const e=parseFloat(t);return this.min!=null&&e<this.min?t=this.min.toString():this.max!=null&&e>this.max&&(t=this.max.toString()),t}adjustPrecision(t,e){if(this.precision==null)return t;if(e){const r=parseFloat(t).toFixed(this.precision);return parseFloat(r).toString()}const n=String(t).split(".");if(n.length>1){if(n[1].length<=this.precision)return t;if(this.precision>0)return`${n[0]}.${n[1].slice(0,this.precision)}`}return n[0]}setMin(t){return this.min===t?this:(this.min=t,Hs(this.eInput,"min",t),this)}setMax(t){return this.max===t?this:(this.max=t,Hs(this.eInput,"max",t),this)}setPrecision(t){return this.precision=t,this}setStep(t){return this.step===t?this:(this.step=t,Hs(this.eInput,"step",t),this)}setValue(t,e){return this.setValueOrInputValue(n=>super.setValue(n,e),()=>this,t)}setStartValue(t){return this.setValueOrInputValue(e=>super.setValue(e,!0),e=>{this.eInput.value=e},t)}setValueOrInputValue(t,e,n){if(J(n)){let r=this.isScientificNotation(n);if(r&&this.eInput.validity.valid)return t(n);if(!r){n=this.adjustPrecision(n);const i=this.normalizeValue(n);r=n!=i}if(r)return e(n)}return t(n)}getValue(){if(!this.eInput.validity.valid)return;const t=this.eInput.value;return this.isScientificNotation(t)?this.adjustPrecision(t,!0):super.getValue()}isScientificNotation(t){return typeof t=="string"&&t.includes("e")}},NU=class extends BI{conditionToString(t,e){const{numberOfInputs:n}=e||{};return t.type==Wt.IN_RANGE||n===2?`${this.formatValue(t.filter)}-${this.formatValue(t.filterTo)}`:t.filter!=null?this.formatValue(t.filter):`${t.type}`}};function m_(t){const{allowedCharPattern:e}=t??{};return e??null}var LU=class kU extends hn{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[]}refresh(e){return this.numberFilterParams.allowedCharPattern!==e.allowedCharPattern?!1:super.refresh(e)}mapValuesFromModel(e){const{filter:n,filterTo:r,type:i}=e||{};return[this.processValue(n),this.processValue(r)].slice(0,this.getNumberOfInputs(i))}getDefaultDebounceMs(){return 500}comparator(){return(e,n)=>e===n?0:e<n?1:-1}setParams(e){this.numberFilterParams=e,super.setParams(e),this.filterModelFormatter=new NU(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return kU.DEFAULT_FILTER_OPTIONS}setElementValue(e,n,r){const i=!r&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(n??null):n;super.setElementValue(e,i)}createValueElement(){const e=m_(this.numberFilterParams),n=document.createElement("div");return n.classList.add("ag-filter-body"),Ut(n,"presentation"),this.createFromToElement(n,this.eValuesFrom,"from",e),this.createFromToElement(n,this.eValuesTo,"to",e),n}createFromToElement(e,n,r,i){const s=this.createManagedBean(i?new Wu({allowedCharPattern:i}):new jI);s.addCssClass(`ag-filter-${r}`),s.addCssClass("ag-filter-filter"),n.push(s),e.appendChild(s.getGui())}removeValueElements(e,n){this.removeComponents(this.eValuesFrom,e,n),this.removeComponents(this.eValuesTo,e,n)}getValues(e){const n=[];return this.forEachPositionInput(e,(r,i,s,o)=>{i<o&&n.push(this.processValue(this.stringToFloat(r.getValue())))}),n}areSimpleModelsEqual(e,n){return e.filter===n.filter&&e.filterTo===n.filterTo&&e.type===n.type}getFilterType(){return"number"}processValue(e){return e==null||isNaN(e)?null:e}stringToFloat(e){if(typeof e=="number")return e;let n=Vs(e);return n!=null&&n.trim()===""&&(n=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(n):n==null||n.trim()==="-"?null:parseFloat(n)}createCondition(e){const n=this.getConditionType(e),r={filterType:this.getFilterType(),type:n},i=this.getValues(e);return i.length>0&&(r.filter=i[0]),i.length>1&&(r.filterTo=i[1]),r}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getModelAsString(e){var n;return(n=this.filterModelFormatter.getModelAsString(e))!=null?n:""}hasInvalidInputs(){let e=!1;return this.forEachInput(n=>{if(!n.getInputElement().validity.valid){e=!0;return}}),e}};LU.DEFAULT_FILTER_OPTIONS=[hn.EQUALS,hn.NOT_EQUAL,hn.GREATER_THAN,hn.GREATER_THAN_OR_EQUAL,hn.LESS_THAN,hn.LESS_THAN_OR_EQUAL,hn.IN_RANGE,hn.BLANK,hn.NOT_BLANK];var GU=LU,VU=class extends BI{conditionToString(t,e){const{numberOfInputs:n}=e||{};return t.type==Wt.IN_RANGE||n===2?`${t.filter}-${t.filterTo}`:t.filter!=null?`${t.filter}`:`${t.type}`}},ns=class vc extends Wt{constructor(){super("textFilter"),this.eValuesFrom=[],this.eValuesTo=[]}static trimInput(e){const n=e&&e.trim();return n===""?e:n}getDefaultDebounceMs(){return 500}setParams(e){this.textFilterParams=e,super.setParams(e),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?vc.DEFAULT_FORMATTER:vc.DEFAULT_LOWERCASE_FORMATTER),this.filterModelFormatter=new VU(this.localeService,this.optionsFactory)}getTextMatcher(){const e=this.textFilterParams.textCustomComparator;return e?(be.warnOnce("textCustomComparator is deprecated, use textMatcher instead."),({filterOption:n,value:r,filterText:i})=>e(n,r,i)):this.textFilterParams.textMatcher||vc.DEFAULT_MATCHER}createCondition(e){const n=this.getConditionType(e),r={filterType:this.getFilterType(),type:n},i=this.getValuesWithSideEffects(e,!0);return i.length>0&&(r.filter=i[0]),i.length>1&&(r.filterTo=i[1]),r}getFilterType(){return"text"}areSimpleModelsEqual(e,n){return e.filter===n.filter&&e.filterTo===n.filterTo&&e.type===n.type}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(e,n){const r=[];return this.forEachPositionInput(e,(i,s,o,a)=>{var l;if(s<a){let u=Vs(i.getValue());n&&this.textFilterParams.trimInput&&(u=(l=vc.trimInput(u))!=null?l:null,i.setValue(u,!0)),r.push(u)}}),r}getDefaultFilterOptions(){return vc.DEFAULT_FILTER_OPTIONS}createValueElement(){const e=document.createElement("div");return e.classList.add("ag-filter-body"),Ut(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e}createFromToElement(e,n,r){const i=this.createManagedBean(new Wu);i.addCssClass(`ag-filter-${r}`),i.addCssClass("ag-filter-filter"),n.push(i),e.appendChild(i.getGui())}removeValueElements(e,n){this.removeComponents(this.eValuesFrom,e,n),this.removeComponents(this.eValuesTo,e,n)}mapValuesFromModel(e){const{filter:n,filterTo:r,type:i}=e||{};return[n||null,r||null].slice(0,this.getNumberOfInputs(i))}evaluateNullValue(e){const n=[Wt.NOT_EQUAL,Wt.NOT_CONTAINS,Wt.BLANK];return e?n.indexOf(e)>=0:!1}evaluateNonNullValue(e,n,r,i){const s=e.map(g=>this.formatter(g))||[],o=this.formatter(n),{api:a,colDef:l,column:u,columnApi:c,context:d,textFormatter:h}=this.textFilterParams;if(r.type===Wt.BLANK)return this.isBlank(n);if(r.type===Wt.NOT_BLANK)return!this.isBlank(n);const f={api:a,colDef:l,column:u,columnApi:c,context:d,node:i.node,data:i.data,filterOption:r.type,value:o,textFormatter:h};return s.some(g=>this.matcher(Dt(me({},f),{filterText:g})))}getModelAsString(e){var n;return(n=this.filterModelFormatter.getModelAsString(e))!=null?n:""}};ns.DEFAULT_FILTER_OPTIONS=[Wt.CONTAINS,Wt.NOT_CONTAINS,Wt.EQUALS,Wt.NOT_EQUAL,Wt.STARTS_WITH,Wt.ENDS_WITH,Wt.BLANK,Wt.NOT_BLANK];ns.DEFAULT_FORMATTER=t=>t;ns.DEFAULT_LOWERCASE_FORMATTER=t=>t==null?null:t.toString().toLowerCase();ns.DEFAULT_MATCHER=({filterOption:t,value:e,filterText:n})=>{if(n==null)return!1;switch(t){case ns.CONTAINS:return e.indexOf(n)>=0;case ns.NOT_CONTAINS:return e.indexOf(n)<0;case ns.EQUALS:return e===n;case ns.NOT_EQUAL:return e!=n;case ns.STARTS_WITH:return e.indexOf(n)===0;case ns.ENDS_WITH:const r=e.lastIndexOf(n);return r>=0&&r===e.length-n.length;default:return!1}};var UI=ns,HU=class extends ee{constructor(t){super(),this.params=t,this.valueChangedListener=()=>{}}setupGui(t){var e;this.eFloatingFilterTextInput=this.createManagedBean(new Wu((e=this.params)==null?void 0:e.config));const n=this.eFloatingFilterTextInput.getGui();t.appendChild(n),this.addManagedListener(n,"input",r=>this.valueChangedListener(r)),this.addManagedListener(n,"keydown",r=>this.valueChangedListener(r))}setEditable(t){this.eFloatingFilterTextInput.setDisabled(!t)}setAutoComplete(t){this.eFloatingFilterTextInput.setAutoComplete(t)}getValue(){return this.eFloatingFilterTextInput.getValue()}setValue(t,e){this.eFloatingFilterTextInput.setValue(t,e)}setValueChangedListener(t){this.valueChangedListener=t}setParams(t){this.setAriaLabel(t.ariaLabel),t.autoComplete!==void 0&&this.setAutoComplete(t.autoComplete)}setAriaLabel(t){this.eFloatingFilterTextInput.setInputAriaLabel(t)}},mE=class extends WI{postConstruct(){this.setTemplate(`
            <div class="ag-floating-filter-input" role="presentation" ref="eFloatingFilterInputContainer"></div>
        `)}getDefaultDebounceMs(){return 500}onParentModelChanged(t,e){this.isEventFromFloatingFilter(e)||this.isEventFromDataChange(e)||(this.setLastTypeFromModel(t),this.setEditable(this.canWeEditAfterModelFromParentFilter(t)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(t)))}init(t){this.setupFloatingFilterInputService(t),super.init(t),this.setTextInputParams(t)}setupFloatingFilterInputService(t){this.floatingFilterInputService=this.createFloatingFilterInputService(t),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(t){var e;this.params=t;const n=(e=t.browserAutoComplete)!=null?e:!1;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(t),autoComplete:n}),this.applyActive=UC.isUseApplyButton(this.params.filterParams),!this.isReadOnly()){const r=UC.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs()),i=yr(this.syncUpWithParentFilter.bind(this),r);this.floatingFilterInputService.setValueChangedListener(i)}}onParamsUpdated(t){this.refresh(t)}refresh(t){super.refresh(t),this.setTextInputParams(t)}recreateFloatingFilterInputService(t){const e=this.floatingFilterInputService.getValue();en(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(t),this.floatingFilterInputService.setValue(e,!0)}syncUpWithParentFilter(t){const e=t.key===H.ENTER;if(this.applyActive&&!e)return;let n=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(n=UI.trimInput(n),this.floatingFilterInputService.setValue(n,!0)),this.params.parentFilterInstance(r=>{r&&r.onFloatingFilterChanged(this.getLastType()||null,n||null)})}setEditable(t){this.floatingFilterInputService.setEditable(t)}};w([ne("eFloatingFilterInputContainer")],mE.prototype,"eFloatingFilterInputContainer",2);w([te],mE.prototype,"postConstruct",1);var Tne=class extends ee{constructor(){super(...arguments),this.valueChangedListener=()=>{},this.numberInputActive=!0}setupGui(t){this.eFloatingFilterNumberInput=this.createManagedBean(new jI),this.eFloatingFilterTextInput=this.createManagedBean(new Wu),this.eFloatingFilterTextInput.setDisabled(!0);const e=this.eFloatingFilterNumberInput.getGui(),n=this.eFloatingFilterTextInput.getGui();t.appendChild(e),t.appendChild(n),this.setupListeners(e,r=>this.valueChangedListener(r)),this.setupListeners(n,r=>this.valueChangedListener(r))}setEditable(t){this.numberInputActive=t,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(t){this.eFloatingFilterNumberInput.setAutoComplete(t),this.eFloatingFilterTextInput.setAutoComplete(t)}getValue(){return this.getActiveInputElement().getValue()}setValue(t,e){this.getActiveInputElement().setValue(t,e)}getActiveInputElement(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput}setValueChangedListener(t){this.valueChangedListener=t}setupListeners(t,e){this.addManagedListener(t,"input",e),this.addManagedListener(t,"keydown",e)}setParams(t){this.setAriaLabel(t.ariaLabel),t.autoComplete!==void 0&&this.setAutoComplete(t.autoComplete)}setAriaLabel(t){this.eFloatingFilterNumberInput.setInputAriaLabel(t),this.eFloatingFilterTextInput.setInputAriaLabel(t)}},Rne=class extends mE{init(t){var e;super.init(t),this.filterModelFormatter=new NU(this.localeService,this.optionsFactory,(e=t.filterParams)==null?void 0:e.numberFormatter)}onParamsUpdated(t){this.refresh(t)}refresh(t){m_(t.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(t),super.refresh(t),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return GU.DEFAULT_FILTER_OPTIONS}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(t){return this.allowedCharPattern=m_(t.filterParams),this.allowedCharPattern?this.createManagedBean(new HU({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new Tne)}},_ne=class extends mE{init(t){super.init(t),this.filterModelFormatter=new VU(this.localeService,this.optionsFactory)}onParamsUpdated(t){this.refresh(t)}refresh(t){super.refresh(t),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return UI.DEFAULT_FILTER_OPTIONS}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(){return this.createManagedBean(new HU)}},Fm=class Up{constructor(e,n=!1){this.destroyFuncs=[],this.touching=!1,this.eventService=new ys,this.eElement=e,this.preventMouseClick=n;const r=this.onTouchStart.bind(this),i=this.onTouchMove.bind(this),s=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",r,{passive:!0}),this.eElement.addEventListener("touchmove",i,{passive:!0}),this.eElement.addEventListener("touchend",s,{passive:!1}),this.destroyFuncs.push(()=>{this.eElement.removeEventListener("touchstart",r,{passive:!0}),this.eElement.removeEventListener("touchmove",i,{passive:!0}),this.eElement.removeEventListener("touchend",s,{passive:!1})})}getActiveTouch(e){for(let n=0;n<e.length;n++)if(e[n].identifier===this.touchStart.identifier)return e[n];return null}addEventListener(e,n){this.eventService.addEventListener(e,n)}removeEventListener(e,n){this.eventService.removeEventListener(e,n)}onTouchStart(e){if(this.touching)return;this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;const n=this.touchStart;window.setTimeout(()=>{const r=this.touchStart===n;if(this.touching&&r&&!this.moved){this.moved=!0;const i={type:Up.EVENT_LONG_TAP,touchStart:this.touchStart,touchEvent:e};this.eventService.dispatchEvent(i)}},500)}onTouchMove(e){if(!this.touching)return;const n=this.getActiveTouch(e.touches);if(!n)return;!kI(n,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(e){if(this.touching){if(!this.moved){const n={type:Up.EVENT_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(n),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}}checkForDoubleTap(){const e=new Date().getTime();if(this.lastTapTime&&this.lastTapTime>0)if(e-this.lastTapTime>Up.DOUBLE_TAP_MILLIS){const r={type:Up.EVENT_DOUBLE_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(r),this.lastTapTime=null}else this.lastTapTime=e;else this.lastTapTime=e}destroy(){this.destroyFuncs.forEach(e=>e())}};Fm.EVENT_TAP="tap";Fm.EVENT_DOUBLE_TAP="doubleTap";Fm.EVENT_LONG_TAP="longTap";Fm.DOUBLE_TAP_MILLIS=500;var Dn=Fm,$o=class BU extends Ae{constructor(e){super(),e||this.setTemplate(BU.TEMPLATE)}attachCustomElements(e,n,r,i,s){this.eSortOrder=e,this.eSortAsc=n,this.eSortDesc=r,this.eSortMixed=i,this.eSortNone=s}setupSort(e,n=!1){this.column=e,this.suppressOrder=n,this.setupMultiSortIndicator(),!(!this.column.isSortable()&&!this.column.getColDef().showRowGroup)&&(this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e),this.addManagedPropertyListener("unSortIcon",()=>this.updateIcons()),this.addManagedListener(this.eventService,x.EVENT_NEW_COLUMNS_LOADED,()=>this.updateIcons()),this.addManagedListener(this.eventService,x.EVENT_SORT_CHANGED,()=>this.onSortChanged()),this.addManagedListener(this.eventService,x.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.onSortChanged()),this.onSortChanged())}addInIcon(e,n,r){if(n==null)return;const i=Bt(e,this.gos,r);i&&n.appendChild(i)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const e=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){const n=e==="asc";Ue(this.eSortAsc,n,{skipAriaHidden:!0})}if(this.eSortDesc){const n=e==="desc";Ue(this.eSortDesc,n,{skipAriaHidden:!0})}if(this.eSortNone){const n=!this.column.getColDef().unSortIcon&&!this.gos.get("unSortIcon"),r=e==null;Ue(this.eSortNone,!n&&r,{skipAriaHidden:!0})}}setupMultiSortIndicator(){this.addInIcon("sortUnSort",this.eSortMixed,this.column);const e=this.column.getColDef().showRowGroup;this.gos.isColumnsSortingCoupledToGroup()&&e&&(this.addManagedListener(this.eventService,x.EVENT_SORT_CHANGED,()=>this.updateMultiSortIndicator()),this.addManagedListener(this.eventService,x.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.updateMultiSortIndicator()),this.updateMultiSortIndicator())}updateMultiSortIndicator(){if(this.eSortMixed){const e=this.sortController.getDisplaySortForColumn(this.column)==="mixed";Ue(this.eSortMixed,e,{skipAriaHidden:!0})}}updateSortOrder(){var e;if(!this.eSortOrder)return;const n=this.sortController.getColumnsWithSortingOrdered(),r=(e=this.sortController.getDisplaySortIndexForColumn(this.column))!=null?e:-1,i=n.some(o=>{var a;return(a=this.sortController.getDisplaySortIndexForColumn(o))!=null?a:!1}),s=r>=0&&i;Ue(this.eSortOrder,s,{skipAriaHidden:!0}),r>=0?this.eSortOrder.textContent=(r+1).toString():en(this.eSortOrder)}};$o.TEMPLATE=`<span class="ag-sort-indicator-container">
            <span ref="eSortOrder" class="ag-sort-indicator-icon ag-sort-order ag-hidden" aria-hidden="true"></span>
            <span ref="eSortAsc" class="ag-sort-indicator-icon ag-sort-ascending-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortDesc" class="ag-sort-indicator-icon ag-sort-descending-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortMixed" class="ag-sort-indicator-icon ag-sort-mixed-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortNone" class="ag-sort-indicator-icon ag-sort-none-icon ag-hidden" aria-hidden="true"></span>
        </span>`;w([ne("eSortOrder")],$o.prototype,"eSortOrder",2);w([ne("eSortAsc")],$o.prototype,"eSortAsc",2);w([ne("eSortDesc")],$o.prototype,"eSortDesc",2);w([ne("eSortMixed")],$o.prototype,"eSortMixed",2);w([ne("eSortNone")],$o.prototype,"eSortNone",2);w([O("columnModel")],$o.prototype,"columnModel",2);w([O("sortController")],$o.prototype,"sortController",2);var zI=$o,hr=class $U extends Ae{constructor(){super(...arguments),this.lastMovingChanged=0}destroy(){super.destroy()}refresh(e){const n=this.params;return this.params=e,this.workOutTemplate()!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||this.workOutSort()!=this.currentSort||this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||n.enableFilterButton!=e.enableFilterButton||n.enableFilterIcon!=e.enableFilterIcon?!1:(this.setDisplayName(e),!0)}workOutTemplate(){var e;let n=(e=this.params.template)!=null?e:$U.TEMPLATE;return n=n&&n.trim?n.trim():n,n}init(e){this.params=e,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate),this.setupTap(),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setupFilterButton(),this.setDisplayName(e)}setDisplayName(e){if(this.currentDisplayName!=e.displayName){this.currentDisplayName=e.displayName;const n=sn(this.currentDisplayName,!0);this.eText&&(this.eText.textContent=n)}}addInIcon(e,n,r){if(n==null)return;const i=Bt(e,this.gos,r);i&&n.appendChild(i)}setupTap(){const{gos:e}=this;if(e.get("suppressTouch"))return;const n=new Dn(this.getGui(),!0),r=this.shouldSuppressMenuHide(),i=r&&J(this.eMenu),s=i?new Dn(this.eMenu,!0):n;if(this.params.enableMenu){const o=i?"EVENT_TAP":"EVENT_LONG_TAP",a=l=>this.params.showColumnMenuAfterMouseClick(l.touchStart);this.addManagedListener(s,Dn[o],a)}if(this.params.enableSorting){const o=a=>{var l,u;const c=a.touchStart.target;r&&((l=this.eMenu)!=null&&l.contains(c)||(u=this.eFilterButton)!=null&&u.contains(c))||this.sortController.progressSort(this.params.column,!1,"uiColumnSorted")};this.addManagedListener(n,Dn.EVENT_TAP,o)}if(this.params.enableFilterButton){const o=new Dn(this.eFilterButton,!0);this.addManagedListener(o,"tap",()=>this.params.showFilter(this.eFilterButton)),this.addDestroyFunc(()=>o.destroy())}this.addDestroyFunc(()=>n.destroy()),i&&this.addDestroyFunc(()=>s.destroy())}workOutShowMenu(){return this.params.enableMenu&&this.menuService.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return this.menuService.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){us(this.eMenu),this.eMenu=void 0;return}const e=this.menuService.isLegacyMenuEnabled();this.addInIcon(e?"menu":"menuAlt",this.eMenu,this.params.column),this.eMenu.classList.toggle("ag-header-menu-icon",!e),this.currentSuppressMenuHide=this.shouldSuppressMenuHide(),this.addManagedListener(this.eMenu,"click",()=>this.params.showColumnMenu(this.eMenu)),this.eMenu.classList.toggle("ag-header-menu-always-show",this.currentSuppressMenuHide)}onMenuKeyboardShortcut(e){var n,r,i,s;const{column:o}=this.params,a=this.menuService.isLegacyMenuEnabled();if(e&&!a){if(this.menuService.isFilterMenuInHeaderEnabled(o))return this.params.showFilter((r=(n=this.eFilterButton)!=null?n:this.eMenu)!=null?r:this.getGui()),!0}else if(this.params.enableMenu)return this.params.showColumnMenu((s=(i=this.eMenu)!=null?i:this.eFilterButton)!=null?s:this.getGui()),!0;return!1}workOutSort(){return this.params.enableSorting}setupSort(){if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.context.createBean(new zI(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!this.currentSort)return;this.addManagedListener(this.params.column,ft.EVENT_MOVING_CHANGED,()=>{this.lastMovingChanged=new Date().getTime()}),this.eLabel&&this.addManagedListener(this.eLabel,"click",n=>{const r=this.params.column.isMoving(),s=new Date().getTime()-this.lastMovingChanged<50;if(!(r||s)){const l=this.gos.get("multiSortKey")==="ctrl"?n.ctrlKey||n.metaKey:n.shiftKey;this.params.progressSort(l)}});const e=()=>{if(this.addOrRemoveCssClass("ag-header-cell-sorted-asc",this.params.column.isSortAscending()),this.addOrRemoveCssClass("ag-header-cell-sorted-desc",this.params.column.isSortDescending()),this.addOrRemoveCssClass("ag-header-cell-sorted-none",this.params.column.isSortNone()),this.params.column.getColDef().showRowGroup){const n=this.columnModel.getSourceColumnsForGroupColumn(this.params.column),i=!(n==null?void 0:n.every(s=>this.params.column.getSort()==s.getSort()));this.addOrRemoveCssClass("ag-header-cell-sorted-mixed",i)}};this.addManagedListener(this.eventService,x.EVENT_SORT_CHANGED,e),this.addManagedListener(this.eventService,x.EVENT_COLUMN_ROW_GROUP_CHANGED,e)}setupFilterIcon(){this.eFilter&&this.configureFilter(this.params.enableFilterIcon,this.eFilter,this.onFilterChangedIcon.bind(this))}setupFilterButton(){if(!this.eFilterButton)return;this.configureFilter(this.params.enableFilterButton,this.eFilterButton,this.onFilterChangedButton.bind(this))?this.addManagedListener(this.eFilterButton,"click",()=>this.params.showFilter(this.eFilterButton)):this.eFilterButton=void 0}configureFilter(e,n,r){if(!e)return us(n),!1;const{column:i}=this.params;return this.addInIcon("filter",n,i),this.addManagedListener(i,ft.EVENT_FILTER_CHANGED,r),r(),!0}onFilterChangedIcon(){const e=this.params.column.isFilterActive();Ue(this.eFilter,e,{skipAriaHidden:!0})}onFilterChangedButton(){const e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){var n,r,i,s;return e?(r=(n=this.eFilterButton)!=null?n:this.eMenu)!=null?r:this.getGui():(s=(i=this.eMenu)!=null?i:this.eFilterButton)!=null?s:this.getGui()}};hr.TEMPLATE=`<div class="ag-cell-label-container" role="presentation">
            <span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>
            <span ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>
            <div ref="eLabel" class="ag-header-cell-label" role="presentation">
                <span ref="eText" class="ag-header-cell-text"></span>
                <span ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>
                <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>
            </div>
        </div>`;w([O("sortController")],hr.prototype,"sortController",2);w([O("menuService")],hr.prototype,"menuService",2);w([O("columnModel")],hr.prototype,"columnModel",2);w([ne("eFilter")],hr.prototype,"eFilter",2);w([ne("eFilterButton")],hr.prototype,"eFilterButton",2);w([ne("eSortIndicator")],hr.prototype,"eSortIndicator",2);w([ne("eMenu")],hr.prototype,"eMenu",2);w([ne("eLabel")],hr.prototype,"eLabel",2);w([ne("eText")],hr.prototype,"eText",2);w([ne("eSortOrder")],hr.prototype,"eSortOrder",2);w([ne("eSortAsc")],hr.prototype,"eSortAsc",2);w([ne("eSortDesc")],hr.prototype,"eSortDesc",2);w([ne("eSortMixed")],hr.prototype,"eSortMixed",2);w([ne("eSortNone")],hr.prototype,"eSortNone",2);var v_=hr,Nm=class WU extends Ae{constructor(){super(WU.TEMPLATE)}destroy(){super.destroy()}init(e){this.params=e,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()}checkWarnings(){this.params.template&&we("A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")}setupExpandIcons(){this.addInIcon("columnGroupOpened","agOpened"),this.addInIcon("columnGroupClosed","agClosed");const e=i=>{if(ps(i))return;const s=!this.params.columnGroup.isExpanded();this.columnModel.setColumnGroupOpened(this.params.columnGroup.getProvidedColumnGroup(),s,"uiColumnExpanded")};this.addTouchAndClickListeners(this.eCloseIcon,e),this.addTouchAndClickListeners(this.eOpenIcon,e);const n=i=>{Cs(i)};this.addManagedListener(this.eCloseIcon,"dblclick",n),this.addManagedListener(this.eOpenIcon,"dblclick",n),this.addManagedListener(this.getGui(),"dblclick",e),this.updateIconVisibility();const r=this.params.columnGroup.getProvidedColumnGroup();this.addManagedListener(r,tn.EVENT_EXPANDED_CHANGED,this.updateIconVisibility.bind(this)),this.addManagedListener(r,tn.EVENT_EXPANDABLE_CHANGED,this.updateIconVisibility.bind(this))}addTouchAndClickListeners(e,n){const r=new Dn(e,!0);this.addManagedListener(r,Dn.EVENT_TAP,n),this.addDestroyFunc(()=>r.destroy()),this.addManagedListener(e,"click",n)}updateIconVisibility(){if(this.params.columnGroup.isExpandable()){const n=this.params.columnGroup.isExpanded();Ue(this.eOpenIcon,n),Ue(this.eCloseIcon,!n)}else Ue(this.eOpenIcon,!1),Ue(this.eCloseIcon,!1)}addInIcon(e,n){const r=Bt(e,this.gos,null);r&&this.getRefElement(n).appendChild(r)}addGroupExpandIcon(){if(!this.params.columnGroup.isExpandable()){Ue(this.eOpenIcon,!1),Ue(this.eCloseIcon,!1);return}}setupLabel(){var e;const{displayName:n,columnGroup:r}=this.params;if(J(n)){const i=sn(n,!0);this.getRefElement("agLabel").textContent=i}this.addOrRemoveCssClass("ag-sticky-label",!((e=r.getColGroupDef())!=null&&e.suppressStickyLabel))}};Nm.TEMPLATE=`<div class="ag-header-group-cell-label" ref="agContainer" role="presentation">
            <span ref="agLabel" class="ag-header-group-text" role="presentation"></span>
            <span ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>
            <span ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>
        </div>`;w([O("columnModel")],Nm.prototype,"columnModel",2);w([ne("agOpened")],Nm.prototype,"eOpenIcon",2);w([ne("agClosed")],Nm.prototype,"eCloseIcon",2);var Ane=Nm,ju=class extends Ae{isPopup(){return!0}setParentComponent(t){t.addCssClass("ag-has-popup"),super.setParentComponent(t)}destroy(){const t=this.parentComponent;t&&t.isAlive()&&t.getGui().classList.remove("ag-has-popup"),super.destroy()}},KI=class jU extends ju{constructor(){super(jU.TEMPLATE)}init(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),J(e.value,!0)&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(e){const n=e.key;(n===H.LEFT||n===H.UP||n===H.RIGHT||n===H.DOWN||e.shiftKey&&n===H.ENTER)&&e.stopPropagation()}afterGuiAttached(){const e=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){const e=this.eTextArea.getValue();return!J(e)&&!J(this.params.value)?this.params.value:this.params.parseValue(e)}};KI.TEMPLATE=`<div class="ag-large-text">
            <ag-input-text-area ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>
        </div>`;w([ne("eTextArea")],KI.prototype,"eTextArea",2);var xne=KI,qI=class extends ju{constructor(){super(`<div class="ag-cell-edit-wrapper">
                <ag-select class="ag-cell-editor" ref="eSelect"></ag-select>
            </div>`),this.startedByEnter=!1}init(t){this.focusAfterAttached=t.cellStartedEdit;const{eSelect:e,valueService:n,gos:r}=this,{values:i,value:s,eventKey:o}=t;if(Te(i)){console.warn("AG Grid: no values found for select cellEditor");return}this.startedByEnter=o!=null?o===H.ENTER:!1;let a=!1;i.forEach(d=>{const h={value:d},f=n.formatValue(t.column,null,d),g=f!=null;h.text=g?f:d,e.addOption(h),a=a||s===d}),a?e.setValue(t.value,!0):t.values.length&&e.setValue(t.values[0],!0);const{valueListGap:l,valueListMaxWidth:u,valueListMaxHeight:c}=t;l!=null&&e.setPickerGap(l),c!=null&&e.setPickerMaxHeight(c),u!=null&&e.setPickerMaxWidth(u),r.get("editType")!=="fullRow"&&this.addManagedListener(this.eSelect,pE.EVENT_ITEM_SELECTED,()=>t.stopEditing())}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eSelect.showPicker()})}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}};w([O("valueService")],qI.prototype,"valueService",2);w([ne("eSelect")],qI.prototype,"eSelect",2);var Lm=class extends ju{constructor(t){super(`
            <div class="ag-cell-edit-wrapper">
                ${t.getTemplate()}
            </div>`),this.cellEditorInput=t}init(t){this.params=t;const e=this.eInput;this.cellEditorInput.init(e,t);let n;if(t.cellStartedEdit){this.focusAfterAttached=!0;const r=t.eventKey;r===H.BACKSPACE||t.eventKey===H.DELETE?n="":r&&r.length===1?n=r:(n=this.cellEditorInput.getStartValue(),r!==H.F2&&(this.highlightAllOnFocus=!0))}else this.focusAfterAttached=!1,n=this.cellEditorInput.getStartValue();n!=null&&e.setStartValue(n),this.addManagedListener(e.getGui(),"keydown",r=>{const{key:i}=r;(i===H.PAGE_UP||i===H.PAGE_DOWN)&&r.preventDefault()})}afterGuiAttached(){var t,e;const n=this.localeService.getLocaleTextFunc(),r=this.eInput;if(r.setInputAriaLabel(n("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;js()||r.getFocusableElement().focus();const i=r.getInputElement();this.highlightAllOnFocus?i.select():(e=(t=this.cellEditorInput).setCaret)==null||e.call(t)}focusIn(){const t=this.eInput,e=t.getFocusableElement(),n=t.getInputElement();e.focus(),n.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}};w([ne("eInput")],Lm.prototype,"eInput",2);var Pne=class{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" ref="eInput"></ag-input-text-field>'}init(t,e){this.eInput=t,this.params=e,e.maxLength!=null&&t.setMaxLength(e.maxLength)}getValue(){const t=this.eInput.getValue();return!J(t)&&!J(this.params.value)?this.params.value:this.params.parseValue(t)}getStartValue(){return this.params.useFormatter||this.params.column.getColDef().refData?this.params.formatValue(this.params.value):this.params.value}setCaret(){const t=this.eInput.getValue(),e=J(t)&&t.length||0;e&&this.eInput.getInputElement().setSelectionRange(e,e)}},RL=class extends Lm{constructor(){super(new Pne)}},Ine="",Dne="",UU=class extends Ae{constructor(){super(),this.refreshCount=0;const t=document.createElement("span"),e=document.createElement("span");e.setAttribute("class","ag-value-change-delta");const n=document.createElement("span");n.setAttribute("class","ag-value-change-value"),t.appendChild(e),t.appendChild(n),this.setTemplateFromElement(t)}init(t){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(t,!0)}showDelta(t,e){const n=Math.abs(e),r=t.formatValue(n),i=J(r)?r:n,s=e>=0;s?this.eDelta.textContent=Ine+i:this.eDelta.textContent=Dne+i,this.eDelta.classList.toggle("ag-value-change-delta-up",s),this.eDelta.classList.toggle("ag-value-change-delta-down",!s)}setTimerToRemoveDelta(){this.refreshCount++;const t=this.refreshCount;this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{t===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),en(this.eDelta)}refresh(t,e=!1){const n=t.value;if(n===this.lastValue||(J(t.valueFormatted)?this.eValue.textContent=t.valueFormatted:J(t.value)?this.eValue.textContent=n:en(this.eValue),this.filterManager.isSuppressFlashingCellsBecauseFiltering()))return!1;if(typeof n=="number"&&typeof this.lastValue=="number"){const r=n-this.lastValue;this.showDelta(t,r)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),e||this.setTimerToRemoveDelta(),this.lastValue=n,!0}};w([O("filterManager")],UU.prototype,"filterManager",2);var zU=class extends Ae{constructor(){super(),this.refreshCount=0;const t=document.createElement("span"),e=document.createElement("span");e.setAttribute("class","ag-value-slide-current"),t.appendChild(e),this.setTemplateFromElement(t),this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current")}init(t){this.refresh(t,!0)}addSlideAnimation(){this.refreshCount++;const t=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);const e=document.createElement("span");e.setAttribute("class","ag-value-slide-previous ag-value-slide-out"),this.ePrevious=e,this.ePrevious.textContent=this.eCurrent.textContent,this.getGui().insertBefore(this.ePrevious,this.eCurrent),this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{t===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{t===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)},3e3)})}refresh(t,e=!1){let n=t.value;return Te(n)&&(n=""),n===this.lastValue||this.filterManager.isSuppressFlashingCellsBecauseFiltering()?!1:(e||this.addSlideAnimation(),this.lastValue=n,J(t.valueFormatted)?this.eCurrent.textContent=t.valueFormatted:J(t.value)?this.eCurrent.textContent=n:en(this.eCurrent),!0)}};w([O("filterManager")],zU.prototype,"filterManager",2);var Mt=class Ct{constructor(e){this.rowIndex=null,this.key=null,this.childrenMapped={},this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=Ct.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=e}setData(e){this.setDataCommon(e,!1)}updateData(e){this.setDataCommon(e,!0)}setDataCommon(e,n){const r=this.data;this.data=e,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();const i=this.createDataChangedEvent(e,r,n);this.dispatchLocalEvent(i)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(e,n,r){return{type:Ct.EVENT_DATA_CHANGED,node:this,oldData:n,newData:e,update:r}}createLocalRowEvent(e){return{type:e,node:this}}getRowIndexString(){return this.rowPinned==="top"?"t-"+this.rowIndex:this.rowPinned==="bottom"?"b-"+this.rowIndex:this.rowIndex.toString()}createDaemonNode(){const e=new Ct(this.beans);return e.id=this.id,e.data=this.data,e.__daemon=!0,e.selected=this.selected,e.level=this.level,e}setDataAndId(e,n){const r=J(this.id)?this.createDaemonNode():null,i=this.data;this.data=e,this.updateDataOnDetailNode(),this.setId(n),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,r);const s=this.createDataChangedEvent(e,i,!1);this.dispatchLocalEvent(s)}checkRowSelectable(){const e=this.beans.gos.get("isRowSelectable");this.setRowSelectable(e?e(this):!0)}setRowSelectable(e,n){if(this.selectable!==e){if(this.selectable=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Ct.EVENT_SELECTABLE_CHANGED)),n)return;if(this.beans.gos.get("groupSelectsChildren")){const i=this.calculateSelectedFromChildren();this.setSelectedParams({newValue:i??!1,source:"selectableChanged"});return}this.isSelected()&&!this.selectable&&this.setSelectedParams({newValue:!1,source:"selectableChanged"})}}setId(e){const n=this.beans.gos.getCallback("getRowId");if(n)if(this.data){const r=this.getGroupKeys(!0);this.id=n({data:this.data,parentKeys:r.length>0?r:void 0,level:this.level}),this.id!==null&&typeof this.id=="string"&&this.id.startsWith(Ct.ID_PREFIX_ROW_GROUP)&&console.error(`AG Grid: Row IDs cannot start with ${Ct.ID_PREFIX_ROW_GROUP}, this is a reserved prefix for AG Grid's row grouping feature.`),this.id!==null&&typeof this.id!="string"&&(this.id=""+this.id)}else this.id=void 0;else this.id=e}getGroupKeys(e=!1){const n=[];let r=this;for(e&&(r=r.parent);r&&r.level>=0;)n.push(r.key),r=r.parent;return n.reverse(),n}isPixelInRange(e){return!J(this.rowTop)||!J(this.rowHeight)?!1:e>=this.rowTop&&e<this.rowTop+this.rowHeight}setFirstChild(e){this.firstChild!==e&&(this.firstChild=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Ct.EVENT_FIRST_CHILD_CHANGED)))}setLastChild(e){this.lastChild!==e&&(this.lastChild=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Ct.EVENT_LAST_CHILD_CHANGED)))}setChildIndex(e){this.childIndex!==e&&(this.childIndex=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Ct.EVENT_CHILD_INDEX_CHANGED)))}setRowTop(e){this.oldRowTop=this.rowTop,this.rowTop!==e&&(this.rowTop=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Ct.EVENT_TOP_CHANGED)),this.setDisplayed(e!==null))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setDisplayed(e){this.displayed!==e&&(this.displayed=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Ct.EVENT_DISPLAYED_CHANGED)))}setDragging(e){this.dragging!==e&&(this.dragging=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Ct.EVENT_DRAGGING_CHANGED)))}setHighlighted(e){e!==this.highlighted&&(this.highlighted=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Ct.EVENT_HIGHLIGHT_CHANGED)))}setHovered(e){this.hovered!==e&&(this.hovered=e)}isHovered(){return this.hovered}setAllChildrenCount(e){this.allChildrenCount!==e&&(this.allChildrenCount=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Ct.EVENT_ALL_CHILDREN_COUNT_CHANGED)))}setMaster(e){this.master!==e&&(this.master&&!e&&(this.expanded=!1),this.master=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Ct.EVENT_MASTER_CHANGED)))}setGroup(e){this.group!==e&&(this.group&&!e&&(this.expanded=!1),this.group=e,this.updateHasChildren(),this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Ct.EVENT_GROUP_CHANGED)))}setRowHeight(e,n=!1){this.rowHeight=e,this.rowHeightEstimated=n,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Ct.EVENT_HEIGHT_CHANGED))}setRowAutoHeight(e,n){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[n.getId()]=e,e!=null&&(this.checkAutoHeightsDebounced==null&&(this.checkAutoHeightsDebounced=yr(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())}checkAutoHeights(){let e=!1,n=!0,r=0;const i=this.__autoHeights;if(i==null||(this.beans.columnModel.getAllDisplayedAutoHeightCols().forEach(a=>{let l=i[a.getId()];if(l==null)if(this.beans.columnModel.isColSpanActive()){let u=[];switch(a.getPinned()){case"left":u=this.beans.columnModel.getDisplayedLeftColumnsForRow(this);break;case"right":u=this.beans.columnModel.getDisplayedRightColumnsForRow(this);break;case null:u=this.beans.columnModel.getViewportCenterColumnsForRow(this);break}if(u.includes(a)){e=!0;return}l=-1}else{e=!0;return}else n=!1;l>r&&(r=l)}),e)||((n||r<10)&&(r=this.beans.gos.getRowHeightForNode(this).height),r==this.rowHeight))return;this.setRowHeight(r);const o=this.beans.rowModel;o.onRowHeightChangedDebounced&&o.onRowHeightChangedDebounced()}setRowIndex(e){this.rowIndex!==e&&(this.rowIndex=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Ct.EVENT_ROW_INDEX_CHANGED)))}setUiLevel(e){this.uiLevel!==e&&(this.uiLevel=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Ct.EVENT_UI_LEVEL_CHANGED)))}setExpanded(e,n,r){if(this.expanded===e)return;this.expanded=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Ct.EVENT_EXPANDED_CHANGED));const i=Object.assign({},this.createGlobalRowEvent(x.EVENT_ROW_GROUP_OPENED),{expanded:e,event:n||null});this.beans.rowNodeEventThrottle.dispatchExpanded(i,r),this.beans.rowRenderer.refreshCells({rowNodes:[this]})}createGlobalRowEvent(e){return this.beans.gos.addGridCommonParams({type:e,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned})}dispatchLocalEvent(e){this.eventService&&this.eventService.dispatchEvent(e)}setDataValue(e,n,r){const s=(()=>{var l;return typeof e!="string"?e:(l=this.beans.columnModel.getGridColumn(e))!=null?l:this.beans.columnModel.getPrimaryColumn(e)})(),o=this.getValueFromValueService(s);if(this.beans.gos.get("readOnlyEdit"))return this.dispatchEventForSaveValueReadOnly(s,o,n,r),!1;const a=this.beans.valueService.setValue(this,s,n,r);return this.dispatchCellChangedEvent(s,n,o),this.checkRowSelectable(),a}getValueFromValueService(e){var n,r;const i=this.leafGroup&&this.beans.columnModel.isPivotMode(),s=this.group&&this.expanded&&!this.footer&&!i;let o=!1;const a=(n=this.beans.gos.get("groupTotalRow"))!=null?n:this.beans.gos.get("groupIncludeFooter");typeof a!="function"?o=!!a:o=!!((r=this.beans.gos.getCallback("groupTotalRow"))!=null?r:this.beans.gos.getCallback("groupIncludeFooter"))({node:this});const l=this.beans.gos.get("groupSuppressBlankHeader"),u=s&&o&&!l;return this.beans.valueService.getValue(e,this,!1,u)}dispatchEventForSaveValueReadOnly(e,n,r,i){const s=this.beans.gos.addGridCommonParams({type:x.EVENT_CELL_EDIT_REQUEST,event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:e,colDef:e.getColDef(),data:this.data,node:this,oldValue:n,newValue:r,value:r,source:i});this.beans.eventService.dispatchEvent(s)}setGroupValue(e,n){const r=this.beans.columnModel.getGridColumn(e);Te(this.groupData)&&(this.groupData={});const i=r.getColId(),s=this.groupData[i];s!==n&&(this.groupData[i]=n,this.dispatchCellChangedEvent(r,n,s))}setAggData(e){const n=this.aggData;if(this.aggData=e,this.eventService){const r=i=>{const s=this.aggData?this.aggData[i]:void 0,o=n?n[i]:void 0;if(s===o)return;const a=this.beans.columnModel.lookupGridColumn(i);a&&this.dispatchCellChangedEvent(a,s,o)};for(const i in this.aggData)r(i);for(const i in e)i in this.aggData||r(i)}}updateHasChildren(){let e=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(this.beans.gos.isRowModelType("serverSide")){const r=this.beans.gos.get("treeData"),i=this.beans.gos.get("isServerSideGroup");e=!this.stub&&!this.footer&&(r?!!i&&i(this.data):!!this.group)}e!==this.__hasChildren&&(this.__hasChildren=!!e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(Ct.EVENT_HAS_CHILDREN_CHANGED)))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}isEmptyRowGroupNode(){return this.group&&Mi(this.childrenAfterGroup)}dispatchCellChangedEvent(e,n,r){const i={type:Ct.EVENT_CELL_CHANGED,node:this,column:e,newValue:n,oldValue:r};this.dispatchLocalEvent(i)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.footer?!1:this.beans.columnModel.isPivotMode()?this.hasChildren()&&!this.leafGroup:this.hasChildren()||!!this.master}isSelected(){return this.footer?this.sibling.isSelected():this.selected}depthFirstSearch(e){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(n=>n.depthFirstSearch(e)),e(this)}calculateSelectedFromChildren(){var e;let n=!1,r=!1,i=!1;if(!((e=this.childrenAfterGroup)!=null&&e.length))return this.selectable?this.selected:null;for(let s=0;s<this.childrenAfterGroup.length;s++){const o=this.childrenAfterGroup[s];let a=o.isSelected();if(!o.selectable){const l=o.calculateSelectedFromChildren();if(l===null)continue;a=l}switch(a){case!0:n=!0;break;case!1:r=!0;break;default:i=!0;break}}if(!(i||n&&r))return n?!0:r?!1:this.selectable?this.selected:null}setSelectedInitialValue(e){this.selected=e}selectThisNode(e,n,r="api"){const i=!this.selectable&&e,s=this.selected===e;if(i||s)return!1;this.selected=e,this.eventService&&this.dispatchLocalEvent(this.createLocalRowEvent(Ct.EVENT_ROW_SELECTED));const o=this.sibling;o&&o.footer&&o.eventService&&o.dispatchLocalEvent(o.createLocalRowEvent(Ct.EVENT_ROW_SELECTED));const a=Dt(me({},this.createGlobalRowEvent(x.EVENT_ROW_SELECTED)),{event:n||null,source:r});return this.beans.eventService.dispatchEvent(a),!0}setSelected(e,n=!1,r="api"){if(typeof r=="boolean"){console.warn("AG Grid: since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.");return}this.setSelectedParams({newValue:e,clearSelection:n,rangeSelect:!1,source:r})}setSelectedParams(e){return this.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),0):this.id===void 0?(console.warn("AG Grid: cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected(Dt(me({},e),{nodes:[this.footer?this.sibling:this]}))}isRowPinned(){return this.rowPinned==="top"||this.rowPinned==="bottom"}isParentOfNode(e){let n=this.parent;for(;n;){if(n===e)return!0;n=n.parent}return!1}addEventListener(e,n){var r,i;this.eventService||(this.eventService=new ys),this.beans.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.eventService.setFrameworkOverrides(this.beans.frameworkOverrides),this.frameworkEventListenerService=new dI(this.beans.frameworkOverrides));const s=(i=(r=this.frameworkEventListenerService)==null?void 0:r.wrap(n))!=null?i:n;this.eventService.addEventListener(e,s)}removeEventListener(e,n){var r,i;if(!this.eventService)return;const s=(i=(r=this.frameworkEventListenerService)==null?void 0:r.unwrap(n))!=null?i:n;this.eventService.removeEventListener(e,s),this.eventService.noRegisteredListenersExist()&&(this.eventService=null)}onMouseEnter(){this.dispatchLocalEvent(this.createLocalRowEvent(Ct.EVENT_MOUSE_ENTER))}onMouseLeave(){this.dispatchLocalEvent(this.createLocalRowEvent(Ct.EVENT_MOUSE_LEAVE))}getFirstChildOfFirstChild(e){let n=this,r=!0,i=!1,s=null;for(;r&&!i;){const o=n.parent;J(o)&&n.firstChild?o.rowGroupColumn===e&&(i=!0,s=o):r=!1,n=o}return i?s:null}isFullWidthCell(){if(this.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return e?e({rowNode:this}):!1}getRoute(){if(this.key==null)return;const e=[];let n=this;for(;n.key!=null;)e.push(n.key),n=n.parent;return e.reverse()}createFooter(){if(this.sibling)return;const e=new Set(["eventService","__objectId","sticky"]),n=new Ct(this.beans);Object.keys(this).forEach(r=>{e.has(r)||(n[r]=this[r])}),n.footer=!0,n.setRowTop(null),n.setRowIndex(null),n.oldRowTop=null,n.id="rowGroupFooter_"+this.id,n.sibling=this,this.sibling=n}destroyFooter(){this.sibling&&(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)}};Mt.ID_PREFIX_ROW_GROUP="row-group-";Mt.ID_PREFIX_TOP_PINNED="t-";Mt.ID_PREFIX_BOTTOM_PINNED="b-";Mt.OBJECT_ID_SEQUENCE=0;Mt.EVENT_ROW_SELECTED="rowSelected";Mt.EVENT_DATA_CHANGED="dataChanged";Mt.EVENT_CELL_CHANGED="cellChanged";Mt.EVENT_ALL_CHILDREN_COUNT_CHANGED="allChildrenCountChanged";Mt.EVENT_MASTER_CHANGED="masterChanged";Mt.EVENT_GROUP_CHANGED="groupChanged";Mt.EVENT_MOUSE_ENTER="mouseEnter";Mt.EVENT_MOUSE_LEAVE="mouseLeave";Mt.EVENT_HEIGHT_CHANGED="heightChanged";Mt.EVENT_TOP_CHANGED="topChanged";Mt.EVENT_DISPLAYED_CHANGED="displayedChanged";Mt.EVENT_FIRST_CHILD_CHANGED="firstChildChanged";Mt.EVENT_LAST_CHILD_CHANGED="lastChildChanged";Mt.EVENT_CHILD_INDEX_CHANGED="childIndexChanged";Mt.EVENT_ROW_INDEX_CHANGED="rowIndexChanged";Mt.EVENT_EXPANDED_CHANGED="expandedChanged";Mt.EVENT_HAS_CHILDREN_CHANGED="hasChildrenChanged";Mt.EVENT_SELECTABLE_CHANGED="selectableChanged";Mt.EVENT_UI_LEVEL_CHANGED="uiLevelChanged";Mt.EVENT_HIGHLIGHT_CHANGED="rowHighlightChanged";Mt.EVENT_DRAGGING_CHANGED="draggingChanged";var Ge=Mt,vE=class extends Ae{constructor(){super(`
            <div class="ag-selection-checkbox" role="presentation">
                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
            </div>`)}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const t=this.localeService.getLocaleTextFunc(),e=this.rowNode.isSelected(),n=oE(t,e),[r,i]=this.rowNode.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],s=t(r,i);this.eCheckbox.setValue(e,!0),this.eCheckbox.setInputAriaLabel(`${s} (${n})`)}onClicked(t,e,n){return this.rowNode.setSelectedParams({newValue:t,rangeSelect:n.shiftKey,groupSelectsFiltered:e,event:n,source:"checkboxSelected"})}init(t){if(this.rowNode=t.rowNode,this.column=t.column,this.overrides=t.overrides,this.onSelectionChanged(),this.addManagedListener(this.eCheckbox.getInputElement(),"dblclick",r=>{Cs(r)}),this.addManagedListener(this.eCheckbox.getInputElement(),"click",r=>{Cs(r);const i=this.gos.get("groupSelectsFiltered"),s=this.eCheckbox.getValue();this.shouldHandleIndeterminateState(s,i)?this.onClicked(!0,i,r||{})===0&&this.onClicked(!1,i,r):s?this.onClicked(!1,i,r):this.onClicked(!0,i,r||{})}),this.addManagedListener(this.rowNode,Ge.EVENT_ROW_SELECTED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_DATA_CHANGED,this.onDataChanged.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_SELECTABLE_CHANGED,this.onSelectableChanged.bind(this)),this.gos.get("isRowSelectable")||typeof this.getIsVisible()=="function"){const r=this.showOrHideSelect.bind(this);this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_CHANGED,r),this.addManagedListener(this.rowNode,Ge.EVENT_DATA_CHANGED,r),this.addManagedListener(this.rowNode,Ge.EVENT_CELL_CHANGED,r),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}shouldHandleIndeterminateState(t,e){return e&&(this.eCheckbox.getPreviousValue()===void 0||t===void 0)&&this.gos.isRowModelType("clientSide")}showOrHideSelect(){var t,e,n;let r=this.rowNode.selectable;const i=this.getIsVisible();if(r)if(typeof i=="function"){const o=(t=this.overrides)==null?void 0:t.callbackParams;if(!this.column)r=i(Dt(me({},o),{node:this.rowNode,data:this.rowNode.data}));else{const a=this.column.createColumnFunctionCallbackParams(this.rowNode);r=i(me(me({},o),a))}}else r=i??!1;if((e=this.column)==null?void 0:e.getColDef().showDisabledCheckboxes){this.eCheckbox.setDisabled(!r),this.setVisible(!0),this.setDisplayed(!0);return}if((n=this.overrides)!=null&&n.removeHidden){this.setDisplayed(r);return}this.setVisible(r)}getIsVisible(){var t,e;return this.overrides?this.overrides.isVisible:(e=(t=this.column)==null?void 0:t.getColDef())==null?void 0:e.checkboxSelection}};w([ne("eCheckbox")],vE.prototype,"eCheckbox",2);w([te],vE.prototype,"postConstruct",1);var KU=(t=>(t[t.Left=0]="Left",t[t.Right=1]="Right",t))(KU||{}),Ie=class extends ee{constructor(){super(...arguments),this.dragSourceAndParamsList=[],this.dropTargets=[]}init(){this.ePinnedIcon=Pi("columnMovePin",this.gos,null),this.eHideIcon=Pi("columnMoveHide",this.gos,null),this.eMoveIcon=Pi("columnMoveMove",this.gos,null),this.eLeftIcon=Pi("columnMoveLeft",this.gos,null),this.eRightIcon=Pi("columnMoveRight",this.gos,null),this.eGroupIcon=Pi("columnMoveGroup",this.gos,null),this.eAggregateIcon=Pi("columnMoveValue",this.gos,null),this.ePivotIcon=Pi("columnMovePivot",this.gos,null),this.eDropNotAllowedIcon=Pi("dropNotAllowed",this.gos,null)}addDragSource(t,e=!1){const n={eElement:t.eElement,dragStartPixels:t.dragStartPixels,onDragStart:this.onDragStart.bind(this,t),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),includeTouch:e};this.dragSourceAndParamsList.push({params:n,dragSource:t}),this.dragService.addDragSource(n)}removeDragSource(t){const e=this.dragSourceAndParamsList.find(n=>n.dragSource===t);e&&(this.dragService.removeDragSource(e.params),Gr(this.dragSourceAndParamsList,e))}clearDragSourceParamsList(){this.dragSourceAndParamsList.forEach(t=>this.dragService.removeDragSource(t.params)),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(t,e){this.dragging=!0,this.dragSource=t,this.eventLastTime=e,this.dragItem=this.dragSource.getDragItem(),this.lastDropTarget=void 0,this.dragSource.onDragStarted&&this.dragSource.onDragStarted(),this.createGhost()}onDragStop(t){if(this.eventLastTime=null,this.dragging=!1,this.dragSource.onDragStopped&&this.dragSource.onDragStopped(),this.lastDropTarget&&this.lastDropTarget.onDragStop){const e=this.createDropTargetEvent(this.lastDropTarget,t,null,null,!1);this.lastDropTarget.onDragStop(e)}this.lastDropTarget=null,this.dragItem=null,this.removeGhost()}onDragging(t,e){var n,r,i,s;const o=this.getHorizontalDirection(t),a=this.getVerticalDirection(t);this.eventLastTime=t,this.positionGhost(t);const l=this.dropTargets.filter(c=>this.isMouseOnDropTarget(t,c)),u=this.findCurrentDropTarget(t,l);if(u!==this.lastDropTarget)this.leaveLastTargetIfExists(t,o,a,e),this.lastDropTarget!==null&&u===null&&((r=(n=this.dragSource).onGridExit)==null||r.call(n,this.dragItem)),this.lastDropTarget===null&&u!==null&&((s=(i=this.dragSource).onGridEnter)==null||s.call(i,this.dragItem)),this.enterDragTargetIfExists(u,t,o,a,e),this.lastDropTarget=u;else if(u&&u.onDragging){const c=this.createDropTargetEvent(u,t,o,a,e);u.onDragging(c)}}getAllContainersFromDropTarget(t){const e=t.getSecondaryContainers?t.getSecondaryContainers():null,n=[[t.getContainer()]];return e?n.concat(e):n}allContainersIntersect(t,e){for(const n of e){const r=n.getBoundingClientRect();if(r.width===0||r.height===0)return!1;const i=t.clientX>=r.left&&t.clientX<r.right,s=t.clientY>=r.top&&t.clientY<r.bottom;if(!i||!s)return!1}return!0}isMouseOnDropTarget(t,e){const n=this.getAllContainersFromDropTarget(e);let r=!1;for(const i of n)if(this.allContainersIntersect(t,i)){r=!0;break}return e.targetContainsSource&&!e.getContainer().contains(this.dragSource.eElement)?!1:r&&e.isInterestedIn(this.dragSource.type,this.dragSource.eElement)}findCurrentDropTarget(t,e){const n=e.length;if(n===0)return null;if(n===1)return e[0];const i=this.gos.getRootNode().elementsFromPoint(t.clientX,t.clientY);for(const s of i)for(const o of e)if(Ej(this.getAllContainersFromDropTarget(o)).indexOf(s)!==-1)return o;return null}enterDragTargetIfExists(t,e,n,r,i){if(t){if(t.onDragEnter){const s=this.createDropTargetEvent(t,e,n,r,i);t.onDragEnter(s)}this.setGhostIcon(t.getIconName?t.getIconName():null)}}leaveLastTargetIfExists(t,e,n,r){if(this.lastDropTarget){if(this.lastDropTarget.onDragLeave){const i=this.createDropTargetEvent(this.lastDropTarget,t,e,n,r);this.lastDropTarget.onDragLeave(i)}this.setGhostIcon(null)}}addDropTarget(t){this.dropTargets.push(t)}removeDropTarget(t){this.dropTargets=this.dropTargets.filter(e=>e.getContainer()!==t.getContainer())}hasExternalDropZones(){return this.dropTargets.some(t=>t.external)}findExternalZone(t){return this.dropTargets.filter(n=>n.external).find(n=>n.getContainer()===t.getContainer())||null}getHorizontalDirection(t){const e=this.eventLastTime&&this.eventLastTime.clientX,n=t.clientX;return e===n?null:e>n?0:1}getVerticalDirection(t){const e=this.eventLastTime&&this.eventLastTime.clientY,n=t.clientY;return e===n?null:e>n?0:1}createDropTargetEvent(t,e,n,r,i){const s=t.getContainer(),o=s.getBoundingClientRect(),{gridApi:a,columnApi:l,dragItem:u,dragSource:c}=this,d=e.clientX-o.left,h=e.clientY-o.top;return{event:e,x:d,y:h,vDirection:r,hDirection:n,dragSource:c,fromNudge:i,dragItem:u,api:a,columnApi:l,dropZoneTarget:s}}positionGhost(t){const e=this.eGhost;if(!e)return;const r=e.getBoundingClientRect().height,i=Qj()-2,s=Xj()-2,o=II(e.offsetParent),{clientY:a,clientX:l}=t;let u=a-o.top-r/2,c=l-o.left-10;const d=this.gos.getDocument(),h=d.defaultView||window,f=h.pageYOffset||d.documentElement.scrollTop,g=h.pageXOffset||d.documentElement.scrollLeft;i>0&&c+e.clientWidth>i+g&&(c=i+g-e.clientWidth),c<0&&(c=0),s>0&&u+e.clientHeight>s+f&&(u=s+f-e.clientHeight),u<0&&(u=0),e.style.left=`${c}px`,e.style.top=`${u}px`}removeGhost(){this.eGhost&&this.eGhostParent&&this.eGhostParent.removeChild(this.eGhost),this.eGhost=null}createGhost(){this.eGhost=Wr(Ie.GHOST_TEMPLATE),this.mouseEventService.stampTopLevelGridCompWithGridInstance(this.eGhost);const{theme:t}=this.environment.getTheme();t&&this.eGhost.classList.add(t),this.eGhostIcon=this.eGhost.querySelector(".ag-dnd-ghost-icon"),this.setGhostIcon(null);const e=this.eGhost.querySelector(".ag-dnd-ghost-label");let n=this.dragSource.dragItemName;eE(n)&&(n=n()),e.innerHTML=sn(n)||"",this.eGhost.style.height="25px",this.eGhost.style.top="20px",this.eGhost.style.left="20px";const r=this.gos.getDocument();let i=null,s=null;try{i=r.fullscreenElement}catch{}finally{i||(i=this.gos.getRootNode());const o=i.querySelector("body");o?s=o:i instanceof ShadowRoot?s=i:i instanceof Document?s=i==null?void 0:i.documentElement:s=i}this.eGhostParent=s,this.eGhostParent?this.eGhostParent.appendChild(this.eGhost):console.warn("AG Grid: could not find document body, it is needed for dragging columns")}setGhostIcon(t,e=!1){en(this.eGhostIcon);let n=null;switch(t||(t=this.dragSource.getDefaultIconName?this.dragSource.getDefaultIconName():Ie.ICON_NOT_ALLOWED),t){case Ie.ICON_PINNED:n=this.ePinnedIcon;break;case Ie.ICON_MOVE:n=this.eMoveIcon;break;case Ie.ICON_LEFT:n=this.eLeftIcon;break;case Ie.ICON_RIGHT:n=this.eRightIcon;break;case Ie.ICON_GROUP:n=this.eGroupIcon;break;case Ie.ICON_AGGREGATE:n=this.eAggregateIcon;break;case Ie.ICON_PIVOT:n=this.ePivotIcon;break;case Ie.ICON_NOT_ALLOWED:n=this.eDropNotAllowedIcon;break;case Ie.ICON_HIDE:n=this.eHideIcon;break}this.eGhostIcon.classList.toggle("ag-shake-left-to-right",e),!(n===this.eHideIcon&&this.gos.get("suppressDragLeaveHidesColumns"))&&n&&this.eGhostIcon.appendChild(n)}};Ie.ICON_PINNED="pinned";Ie.ICON_MOVE="move";Ie.ICON_LEFT="left";Ie.ICON_RIGHT="right";Ie.ICON_GROUP="group";Ie.ICON_AGGREGATE="aggregate";Ie.ICON_PIVOT="pivot";Ie.ICON_NOT_ALLOWED="notAllowed";Ie.ICON_HIDE="hide";Ie.GHOST_TEMPLATE=`<div class="ag-dnd-ghost ag-unselectable">
            <span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>
            <div class="ag-dnd-ghost-label"></div>
        </div>`;w([O("dragService")],Ie.prototype,"dragService",2);w([O("mouseEventService")],Ie.prototype,"mouseEventService",2);w([O("columnApi")],Ie.prototype,"columnApi",2);w([O("gridApi")],Ie.prototype,"gridApi",2);w([te],Ie.prototype,"init",1);w([Pr],Ie.prototype,"clearDragSourceParamsList",1);Ie=w([ce("dragAndDropService")],Ie);var Su=class extends Ae{constructor(t,e,n,r,i,s){super(),this.cellValueFn=t,this.rowNode=e,this.column=n,this.customGui=r,this.dragStartPixels=i,this.suppressVisibilityChange=s,this.dragSource=null}isCustomGui(){return this.customGui!=null}postConstruct(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(Bt("rowDrag",this.gos,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){const t=this.gos.get("rowDragManaged")?new QU(this,this.beans,this.rowNode,this.column):new YU(this,this.beans,this.rowNode,this.column);this.createManagedBean(t,this.beans.context)}}setDragElement(t,e){this.setTemplateFromElement(t),this.addDragSource(e)}getSelectedNodes(){if(!this.gos.get("rowDragMultiRow"))return[this.rowNode];const e=this.beans.selectionService.getSelectedNodes();return e.indexOf(this.rowNode)!==-1?e:[this.rowNode]}checkCompatibility(){const t=this.gos.get("rowDragManaged");this.gos.get("treeData")&&t&&we("If using row drag with tree data, you cannot have rowDragManaged=true")}getDragItem(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(t){if(t){const e=t.getColDef();if(e.rowDragText)return e.rowDragText}return this.gos.get("rowDragText")}addDragSource(t=4){this.dragSource&&this.removeDragSource();const e=this.localeService.getLocaleTextFunc();this.dragSource={type:2,eElement:this.getGui(),dragItemName:()=>{var n;const r=this.getDragItem(),i=((n=r.rowNodes)==null?void 0:n.length)||1,s=this.getRowDragText(this.column);return s?s(r,i):i===1?this.cellValueFn():`${i} ${e("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:t,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)}removeDragSource(){this.dragSource&&this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null}};w([O("beans")],Su.prototype,"beans",2);w([te],Su.prototype,"postConstruct",1);w([Pr],Su.prototype,"removeDragSource",1);var qU=class extends ee{constructor(t,e,n){super(),this.parent=t,this.rowNode=e,this.column=n}setDisplayedOrVisible(t){const e={skipAriaHidden:!0};if(t)this.parent.setDisplayed(!1,e);else{let n=!0,r=!1;this.column&&(n=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),r=eE(this.column.getColDef().rowDrag)),r?(this.parent.setDisplayed(!0,e),this.parent.setVisible(n,e)):(this.parent.setDisplayed(n,e),this.parent.setVisible(!0,e))}}},YU=class extends qU{constructor(t,e,n,r){super(t,n,r),this.beans=e}postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,x.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const t=this.gos.get("suppressRowDrag");this.setDisplayedOrVisible(t)}};w([te],YU.prototype,"postConstruct",1);var QU=class extends qU{constructor(t,e,n,r){super(t,n,r),this.beans=e}postConstruct(){this.addManagedListener(this.beans.eventService,x.EVENT_SORT_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,x.EVENT_FILTER_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,x.EVENT_COLUMN_ROW_GROUP_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,x.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const e=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),n=e&&e.shouldPreventRowMove(),r=this.gos.get("suppressRowDrag"),i=this.beans.dragAndDropService.hasExternalDropZones(),s=n&&!i||r;this.setDisplayedOrVisible(s)}};w([te],QU.prototype,"postConstruct",1);var Uu=class extends ee{init(t,e,n,r,i,s,o){var a,l,u,c;this.params=o,this.eGui=e,this.eCheckbox=n,this.eExpanded=r,this.eContracted=i,this.comp=t,this.compClass=s;const{node:d,value:h,colDef:f}=o,g=this.isTopLevelFooter();if(!g){if(this.isEmbeddedRowMismatch())return;if(d.footer&&this.gos.get("groupHideOpenParents")){const v=f&&f.showRowGroup,C=d.rowGroupColumn&&d.rowGroupColumn.getColId();if(v!==C)return}}if(this.setupShowingValueForOpenedParent(),this.findDisplayedGroupNode(),!g){const m=o.node.footer&&o.node.rowGroupIndex===this.columnModel.getRowGroupColumns().findIndex(R=>{var b;return R.getColId()===((b=o.colDef)==null?void 0:b.showRowGroup)}),C=this.gos.get("groupDisplayType")!="multipleColumns"||this.gos.get("treeData")||this.gos.get("showOpenedGroup")&&!o.node.footer&&(!o.node.group||o.node.rowGroupIndex!=null&&o.node.rowGroupIndex>this.columnModel.getRowGroupColumns().findIndex(R=>{var b;return R.getColId()===((b=o.colDef)==null?void 0:b.showRowGroup)})),y=!d.group&&(((a=this.params.colDef)==null?void 0:a.field)||((l=this.params.colDef)==null?void 0:l.valueGetter)),S=this.isExpandable(),_=this.columnModel.isPivotMode()&&d.leafGroup&&((u=d.rowGroupColumn)==null?void 0:u.getColId())===((c=o.column)==null?void 0:c.getColDef().showRowGroup);if(!this.showingValueForOpenedParent&&!S&&!y&&!C&&!m&&!_)return}this.addExpandAndContract(),this.addFullWidthRowDraggerIfNeeded(),this.addCheckboxIfNeeded(),this.addValueElement(),this.setupIndent(),this.refreshAriaExpanded()}getCellAriaRole(){var t,e;const n=(t=this.params.colDef)==null?void 0:t.cellAriaRole,r=(e=this.params.column)==null?void 0:e.getColDef().cellAriaRole;return n||r||"gridcell"}destroy(){super.destroy(),this.expandListener=null}refreshAriaExpanded(){const{node:t,eGridCell:e}=this.params;if(this.expandListener&&(this.expandListener=this.expandListener()),!this.isExpandable()){Bj(e);return}const n=()=>{Io(e,!!t.expanded)};this.expandListener=this.addManagedListener(t,Ge.EVENT_EXPANDED_CHANGED,n)||null,n()}isTopLevelFooter(){if(!this.gos.getGrandTotalRow()||this.params.value!=null||this.params.node.level!=-1)return!1;const e=this.params.colDef;if(e==null||e.showRowGroup===!0)return!0;const r=this.columnModel.getRowGroupColumns();return!r||r.length===0?!0:r[0].getId()===e.showRowGroup}isEmbeddedRowMismatch(){if(!this.params.fullWidth||!this.gos.get("embedFullWidthRows"))return!1;const t=this.params.pinned==="left",e=this.params.pinned==="right",n=!t&&!e;return this.gos.get("enableRtl")?this.columnModel.isPinningLeft()?!e:!n:this.columnModel.isPinningLeft()?!t:!n}findDisplayedGroupNode(){const t=this.params.column,e=this.params.node;if(this.showingValueForOpenedParent){let n=e.parent;for(;n!=null;){if(n.rowGroupColumn&&t.isRowGroupDisplayed(n.rowGroupColumn.getId())){this.displayedGroupNode=n;break}n=n.parent}}Te(this.displayedGroupNode)&&(this.displayedGroupNode=e)}setupShowingValueForOpenedParent(){const t=this.params.node,e=this.params.column;if(!this.gos.get("groupHideOpenParents")){this.showingValueForOpenedParent=!1;return}if(!t.groupData){this.showingValueForOpenedParent=!1;return}if(t.rowGroupColumn!=null){const i=t.rowGroupColumn.getId();if(e.isRowGroupDisplayed(i)){this.showingValueForOpenedParent=!1;return}}const r=t.groupData[e.getId()]!=null;this.showingValueForOpenedParent=r}addValueElement(){this.displayedGroupNode.footer?this.addFooterValue():(this.addGroupValue(),this.addChildCount())}addGroupValue(){var t;const e=this.adjustParamsWithDetailsFromRelatedColumn(),n=this.getInnerCompDetails(e),{valueFormatted:r,value:i}=e;let s=r;if(s==null){const o=this.displayedGroupNode.rowGroupColumn&&((t=this.params.column)==null?void 0:t.isRowGroupDisplayed(this.displayedGroupNode.rowGroupColumn.getId()));this.displayedGroupNode.key===""&&this.displayedGroupNode.group&&o?s=this.localeService.getLocaleTextFunc()("blanks","(Blanks)"):s=i??null}this.comp.setInnerRenderer(n,s)}adjustParamsWithDetailsFromRelatedColumn(){const t=this.displayedGroupNode.rowGroupColumn,e=this.params.column;if(!t)return this.params;if(e!=null&&!e.isRowGroupDisplayed(t.getId()))return this.params;const r=this.params,{value:i,node:s}=this.params,o=this.valueService.formatValue(t,s,i);return Dt(me({},r),{valueFormatted:o})}addFooterValue(){let t=this.params.totalValueGetter;if(!t){const r=this.params.footerValueGetter;r&&(t=r,we("As of v31.3, footerValueGetter is deprecated. Use `totalValueGetter` instead."))}let e="";if(t){const r=uI(this.params);r.value=this.params.value,typeof t=="function"?e=t(r):typeof t=="string"?e=this.expressionService.evaluate(t,r):console.warn("AG Grid: footerValueGetter should be either a function or a string (expression)")}else e=this.localeService.getLocaleTextFunc()("footerTotal","Total")+" "+(this.params.value!=null?this.params.value:"");const n=this.getInnerCompDetails(this.params);this.comp.setInnerRenderer(n,e)}getInnerCompDetails(t){if(t.fullWidth)return this.userComponentFactory.getFullWidthGroupRowInnerCellRenderer(this.gos.get("groupRowRendererParams"),t);const e=this.userComponentFactory.getInnerRendererDetails(t,t),n=o=>o&&o.componentClass==this.compClass;if(e&&!n(e))return e;const r=this.displayedGroupNode.rowGroupColumn,i=r?r.getColDef():void 0;if(!i)return;const s=this.userComponentFactory.getCellRendererDetails(i,t);if(s&&!n(s))return s;if(n(s)&&i.cellRendererParams&&i.cellRendererParams.innerRenderer)return this.userComponentFactory.getInnerRendererDetails(i.cellRendererParams,t)}addChildCount(){this.params.suppressCount||(this.addManagedListener(this.displayedGroupNode,Ge.EVENT_ALL_CHILDREN_COUNT_CHANGED,this.updateChildCount.bind(this)),this.updateChildCount())}updateChildCount(){const t=this.displayedGroupNode.allChildrenCount,r=this.isShowRowGroupForThisRow()&&t!=null&&t>=0?`(${t})`:"";this.comp.setChildCount(r)}isShowRowGroupForThisRow(){if(this.gos.get("treeData"))return!0;const t=this.displayedGroupNode.rowGroupColumn;if(!t)return!1;const e=this.params.column;return e==null||e.isRowGroupDisplayed(t.getId())}addExpandAndContract(){var t;const e=this.params,n=Bt("groupExpanded",this.gos,null),r=Bt("groupContracted",this.gos,null);n&&this.eExpanded.appendChild(n),r&&this.eContracted.appendChild(r);const i=e.eGridCell;!(((t=this.params.column)==null?void 0:t.isCellEditable(e.node))&&this.gos.get("enableGroupEdit"))&&this.isExpandable()&&!e.suppressDoubleClickExpand&&this.addManagedListener(i,"dblclick",this.onCellDblClicked.bind(this)),this.addManagedListener(this.eExpanded,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eContracted,"click",this.onExpandClicked.bind(this)),this.addManagedListener(i,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(e.node,Ge.EVENT_EXPANDED_CHANGED,this.showExpandAndContractIcons.bind(this)),this.showExpandAndContractIcons();const o=this.onRowNodeIsExpandableChanged.bind(this);this.addManagedListener(this.displayedGroupNode,Ge.EVENT_ALL_CHILDREN_COUNT_CHANGED,o),this.addManagedListener(this.displayedGroupNode,Ge.EVENT_MASTER_CHANGED,o),this.addManagedListener(this.displayedGroupNode,Ge.EVENT_GROUP_CHANGED,o),this.addManagedListener(this.displayedGroupNode,Ge.EVENT_HAS_CHILDREN_CHANGED,o)}onExpandClicked(t){ps(t)||(Cs(t),this.onExpandOrContract(t))}onExpandOrContract(t){const e=this.displayedGroupNode,n=!e.expanded;!n&&e.sticky&&this.scrollToStickyNode(e),e.setExpanded(n,t)}scrollToStickyNode(t){this.ctrlsService.getGridBodyCtrl().getScrollFeature().setVerticalScrollPosition(t.rowTop-t.stickyRowTop)}isExpandable(){if(this.showingValueForOpenedParent)return!0;const t=this.displayedGroupNode,e=this.columnModel.isPivotMode()&&t.leafGroup;if(!(t.isExpandable()&&!t.footer&&!e))return!1;const r=this.params.column;return r!=null&&typeof r.getColDef().showRowGroup=="string"?this.isShowRowGroupForThisRow():!0}showExpandAndContractIcons(){const{params:t,displayedGroupNode:e,columnModel:n}=this,{node:r}=t,i=this.isExpandable();if(i){const u=this.showingValueForOpenedParent?!0:r.expanded;this.comp.setExpandedDisplayed(u),this.comp.setContractedDisplayed(!u)}else this.comp.setExpandedDisplayed(!1),this.comp.setContractedDisplayed(!1);const s=n.isPivotMode(),o=s&&e.leafGroup,a=i&&!o,l=r.footer&&r.level===-1;this.comp.addOrRemoveCssClass("ag-cell-expandable",a),this.comp.addOrRemoveCssClass("ag-row-group",a),s?this.comp.addOrRemoveCssClass("ag-pivot-leaf-group",o):l||this.comp.addOrRemoveCssClass("ag-row-group-leaf-indent",!a)}onRowNodeIsExpandableChanged(){this.showExpandAndContractIcons(),this.setIndent(),this.refreshAriaExpanded()}setupIndent(){const t=this.params.node;this.params.suppressPadding||(this.addManagedListener(t,Ge.EVENT_UI_LEVEL_CHANGED,this.setIndent.bind(this)),this.setIndent())}setIndent(){if(this.gos.get("groupHideOpenParents"))return;const t=this.params,e=t.node,n=!!t.colDef,r=this.gos.get("treeData"),s=!n||r||t.colDef.showRowGroup===!0?e.uiLevel:0;this.indentClass&&this.comp.addOrRemoveCssClass(this.indentClass,!1),this.indentClass="ag-row-group-indent-"+s,this.comp.addOrRemoveCssClass(this.indentClass,!0)}addFullWidthRowDraggerIfNeeded(){if(!this.params.fullWidth||!this.params.rowDrag)return;const t=new Su(()=>this.params.value,this.params.node);this.createManagedBean(t,this.context),this.eGui.insertAdjacentElement("afterbegin",t.getGui())}isUserWantsSelected(){const t=this.params.checkbox;return typeof t=="function"||t===!0}addCheckboxIfNeeded(){const t=this.displayedGroupNode,e=this.isUserWantsSelected()&&!t.footer&&!t.rowPinned&&!t.detail;if(e){const n=new vE;this.getContext().createBean(n),n.init({rowNode:this.params.node,column:this.params.column,overrides:{isVisible:this.params.checkbox,callbackParams:this.params,removeHidden:!0}}),this.eCheckbox.appendChild(n.getGui()),this.addDestroyFunc(()=>this.getContext().destroyBean(n))}this.comp.setCheckboxVisible(e)}onKeyDown(t){!(t.key===H.ENTER)||this.params.suppressEnterExpand||this.params.column&&this.params.column.isCellEditable(this.params.node)||this.onExpandOrContract(t)}onCellDblClicked(t){if(ps(t))return;BC(this.eExpanded,t)||BC(this.eContracted,t)||this.onExpandOrContract(t)}};w([O("expressionService")],Uu.prototype,"expressionService",2);w([O("valueService")],Uu.prototype,"valueService",2);w([O("columnModel")],Uu.prototype,"columnModel",2);w([O("userComponentFactory")],Uu.prototype,"userComponentFactory",2);w([O("ctrlsService")],Uu.prototype,"ctrlsService",2);var zu=class XU extends Ae{constructor(){super(XU.TEMPLATE)}init(e){const n={setInnerRenderer:(o,a)=>this.setRenderDetails(o,a),setChildCount:o=>this.eChildCount.textContent=o,addOrRemoveCssClass:(o,a)=>this.addOrRemoveCssClass(o,a),setContractedDisplayed:o=>Ue(this.eContracted,o),setExpandedDisplayed:o=>Ue(this.eExpanded,o),setCheckboxVisible:o=>this.eCheckbox.classList.toggle("ag-invisible",!o)},r=this.createManagedBean(new Uu),i=!e.colDef,s=this.getGui();r.init(n,s,this.eCheckbox,this.eExpanded,this.eContracted,this.constructor,e),i&&Ut(s,r.getCellAriaRole())}setRenderDetails(e,n){if(e){const r=e.newAgStackInstance();if(!r)return;r.then(i=>{if(!i)return;const s=()=>this.context.destroyBean(i);this.isAlive()?(this.eValue.appendChild(i.getGui()),this.addDestroyFunc(s)):s()})}else this.eValue.innerText=n}destroy(){this.getContext().destroyBean(this.innerCellRenderer),super.destroy()}refresh(){return!1}};zu.TEMPLATE=`<span class="ag-cell-wrapper">
            <span class="ag-group-expanded" ref="eExpanded"></span>
            <span class="ag-group-contracted" ref="eContracted"></span>
            <span class="ag-group-checkbox ag-invisible" ref="eCheckbox"></span>
            <span class="ag-group-value" ref="eValue"></span>
            <span class="ag-group-child-count" ref="eChildCount"></span>
        </span>`;w([ne("eExpanded")],zu.prototype,"eExpanded",2);w([ne("eContracted")],zu.prototype,"eContracted",2);w([ne("eCheckbox")],zu.prototype,"eCheckbox",2);w([ne("eValue")],zu.prototype,"eValue",2);w([ne("eChildCount")],zu.prototype,"eChildCount",2);var _L=zu,yE=class JU extends Ae{constructor(){super(JU.TEMPLATE)}init(e){e.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){const e=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingError","ERR")}setupLoading(){const e=Bt("groupLoading",this.gos,null);e&&this.eLoadingIcon.appendChild(e);const n=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=n("loadingOoo","Loading")}refresh(e){return!1}destroy(){super.destroy()}};yE.TEMPLATE=`<div class="ag-loading">
            <span class="ag-loading-icon" ref="eLoadingIcon"></span>
            <span class="ag-loading-text" ref="eLoadingText"></span>
        </div>`;w([ne("eLoadingIcon")],yE.prototype,"eLoadingIcon",2);w([ne("eLoadingText")],yE.prototype,"eLoadingText",2);var One=yE,ZU=class ez extends Ae{constructor(){super(ez.TEMPLATE)}init(e){const n=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",n),this.addDestroyFunc(()=>Td(e.eParentOfValue)),Td(e.eParentOfValue,n),e.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){const e=this.localeService.getLocaleTextFunc();this.getGui().innerText=e("loadingError","ERR");const n=e("ariaSkeletonCellLoadingFailed","Row failed to load");Si(this.getGui(),n)}setupLoading(){const n=this.gos.getDocument().createElement("div");n.classList.add("ag-skeleton-effect"),this.getGui().appendChild(n);const i=this.localeService.getLocaleTextFunc()("ariaSkeletonCellLoading","Row data is loading");Si(this.getGui(),i)}refresh(e){return!1}destroy(){super.destroy()}};ZU.TEMPLATE='<div class="ag-skeleton-container"></div>';var Mne=ZU,tz=class nz extends Ae{constructor(){super()}destroy(){super.destroy()}init(e){const n=this.gos.get("overlayLoadingTemplate");if(this.setTemplate(n??nz.DEFAULT_LOADING_OVERLAY_TEMPLATE),!n){const r=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=r("loadingOoo","Loading...")})}}};tz.DEFAULT_LOADING_OVERLAY_TEMPLATE='<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>';var Fne=tz,rz=class iz extends Ae{constructor(){super()}destroy(){super.destroy()}init(e){const n=this.gos.get("overlayNoRowsTemplate");if(this.setTemplate(n??iz.DEFAULT_NO_ROWS_TEMPLATE),!n){const r=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=r("noRowsToShow","No Rows To Show")})}}};rz.DEFAULT_NO_ROWS_TEMPLATE='<span class="ag-overlay-no-rows-center"></span>';var Nne=rz,Lne=class extends ju{constructor(){super('<div class="ag-tooltip"></div>')}init(t){const{value:e}=t;this.getGui().textContent=sn(e,!0)}},kne=class{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" ref="eInput"></ag-input-number-field>'}init(t,e){this.eInput=t,this.params=e,e.max!=null&&t.setMax(e.max),e.min!=null&&t.setMin(e.min),e.precision!=null&&t.setPrecision(e.precision),e.step!=null&&t.setStep(e.step);const n=t.getInputElement();e.preventStepping?t.addManagedListener(n,"keydown",this.preventStepping):e.showStepperButtons&&n.classList.add("ag-number-field-input-stepper")}preventStepping(t){(t.key===H.UP||t.key===H.DOWN)&&t.preventDefault()}getValue(){const t=this.eInput.getValue();if(!J(t)&&!J(this.params.value))return this.params.value;let e=this.params.parseValue(t);if(e==null)return e;if(typeof e=="string"){if(e==="")return null;e=Number(e)}return isNaN(e)?null:e}getStartValue(){return this.params.value}},Gne=class extends Lm{constructor(){super(new kne)}},Vne=class{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'}init(t,e){this.eInput=t,this.params=e,e.min!=null&&t.setMin(e.min),e.max!=null&&t.setMax(e.max),e.step!=null&&t.setStep(e.step)}getValue(){const t=this.eInput.getDate();return!J(t)&&!J(this.params.value)?this.params.value:t??null}getStartValue(){const{value:t}=this.params;if(t instanceof Date)return Hi(t,!1)}},Hne=class extends Lm{constructor(){super(new Vne)}},Bne=class{constructor(t){this.getDataTypeService=t}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'}init(t,e){this.eInput=t,this.params=e,e.min!=null&&t.setMin(e.min),e.max!=null&&t.setMax(e.max),e.step!=null&&t.setStep(e.step)}getValue(){const t=this.formatDate(this.eInput.getDate());return!J(t)&&!J(this.params.value)?this.params.value:this.params.parseValue(t??"")}getStartValue(){var t,e;return Hi((e=this.parseDate((t=this.params.value)!=null?t:void 0))!=null?e:null,!1)}parseDate(t){return this.getDataTypeService().getDateParserFunction(this.params.column)(t)}formatDate(t){return this.getDataTypeService().getDateFormatterFunction(this.params.column)(t)}},sz=class extends Lm{constructor(){super(new Bne(()=>this.dataTypeService))}};w([O("dataTypeService")],sz.prototype,"dataTypeService",2);var YI=class oz extends Ae{constructor(){super(oz.TEMPLATE)}init(e){this.params=e,this.updateCheckbox(e);const n=this.eCheckbox.getInputElement();n.setAttribute("tabindex","-1"),gI(n,"polite"),this.addManagedListener(n,"click",r=>{if(Cs(r),this.eCheckbox.isDisabled())return;const i=this.eCheckbox.getValue();this.onCheckboxChanged(i)}),this.addManagedListener(n,"dblclick",r=>{Cs(r)}),this.addManagedListener(this.params.eGridCell,"keydown",r=>{if(r.key===H.SPACE&&!this.eCheckbox.isDisabled()){this.params.eGridCell===this.gos.getActiveDomElement()&&this.eCheckbox.toggle();const i=this.eCheckbox.getValue();this.onCheckboxChanged(i),r.preventDefault()}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){var n,r,i;let s,o=!0;if(e.node.group&&e.column){const d=e.column.getColId();d.startsWith(bd)?s=e.value==null||e.value===""?void 0:e.value==="true":e.node.aggData&&e.node.aggData[d]!==void 0?s=(n=e.value)!=null?n:void 0:o=!1}else s=(r=e.value)!=null?r:void 0;if(!o){this.eCheckbox.setDisplayed(!1);return}this.eCheckbox.setValue(s);const a=e.disabled!=null?e.disabled:!((i=e.column)!=null&&i.isCellEditable(e.node));this.eCheckbox.setDisabled(a);const l=this.localeService.getLocaleTextFunc(),u=oE(l,s),c=a?u:`${l("ariaToggleCellValue","Press SPACE to toggle cell value")} (${u})`;this.eCheckbox.setInputAriaLabel(c)}onCheckboxChanged(e){const{column:n,node:r,rowIndex:i,value:s}=this.params,o={type:x.EVENT_CELL_EDITING_STARTED,column:n,colDef:n==null?void 0:n.getColDef(),data:r.data,node:r,rowIndex:i,rowPinned:r.rowPinned,value:s};this.eventService.dispatchEvent(o);const a=this.params.node.setDataValue(this.params.column,e,"edit"),l={type:x.EVENT_CELL_EDITING_STOPPED,column:n,colDef:n==null?void 0:n.getColDef(),data:r.data,node:r,rowIndex:i,rowPinned:r.rowPinned,value:s,oldValue:s,newValue:e,valueChanged:a};this.eventService.dispatchEvent(l)}};YI.TEMPLATE=`
        <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">
            <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
        </div>`;w([ne("eCheckbox")],YI.prototype,"eCheckbox",2);var $ne=YI,az=class extends ju{constructor(){super(`
            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">
                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
            </div>`)}init(t){var e;this.params=t;const n=(e=t.value)!=null?e:void 0;this.eCheckbox.setValue(n),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(n),this.addManagedListener(this.eCheckbox,x.EVENT_FIELD_VALUE_CHANGED,i=>this.setAriaLabel(i.selected))}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(t){const e=this.localeService.getLocaleTextFunc(),n=oE(e,t),r=e("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(`${r} (${n})`)}};w([ne("eCheckbox")],az.prototype,"eCheckbox",2);var Wne=class extends Ae{constructor(){super(),this.setTemplate("<div></div>")}init(t){var e;this.params=t,this.cssClassPrefix=(e=this.params.cssClassPrefix)!=null?e:"ag-menu-option",this.addIcon(),this.addName(),this.addShortcut(),this.addSubMenu()}configureDefaults(){return!0}addIcon(){if(this.params.isCompact)return;const t=Wr(`<span ref="eIcon" class="${this.getClassName("part")} ${this.getClassName("icon")}" role="presentation"></span>`);this.params.checked?t.appendChild(Bt("check",this.gos)):this.params.icon&&(Pm(this.params.icon)?t.appendChild(this.params.icon):typeof this.params.icon=="string"?t.innerHTML=this.params.icon:console.warn("AG Grid: menu item icon must be DOM node or string")),this.getGui().appendChild(t)}addName(){const t=Wr(`<span ref="eName" class="${this.getClassName("part")} ${this.getClassName("text")}">${this.params.name||""}</span>`);this.getGui().appendChild(t)}addShortcut(){if(this.params.isCompact)return;const t=Wr(`<span ref="eShortcut" class="${this.getClassName("part")} ${this.getClassName("shortcut")}">${this.params.shortcut||""}</span>`);this.getGui().appendChild(t)}addSubMenu(){const t=Wr(`<span ref="ePopupPointer" class="${this.getClassName("part")} ${this.getClassName("popup-pointer")}"></span>`),e=this.getGui();if(this.params.subMenu){const n=this.gos.get("enableRtl")?"smallLeft":"smallRight";Io(e,!1),t.appendChild(Bt(n,this.gos))}e.appendChild(t)}getClassName(t){return`${this.cssClassPrefix}-${t}`}destroy(){super.destroy()}},zC=class extends ee{constructor(){super(...arguments),this.agGridDefaults={agDateInput:FU,agColumnHeader:v_,agColumnGroupHeader:Ane,agSortIndicator:zI,agTextColumnFloatingFilter:_ne,agNumberColumnFloatingFilter:Rne,agDateColumnFloatingFilter:gE,agReadOnlyFloatingFilter:VI,agAnimateShowChangeCellRenderer:UU,agAnimateSlideCellRenderer:zU,agGroupCellRenderer:_L,agGroupRowRenderer:_L,agLoadingCellRenderer:One,agSkeletonCellRenderer:Mne,agCheckboxCellRenderer:$ne,agCellEditor:RL,agTextCellEditor:RL,agNumberCellEditor:Gne,agDateCellEditor:Hne,agDateStringCellEditor:sz,agSelectCellEditor:qI,agLargeTextCellEditor:xne,agCheckboxCellEditor:az,agTextColumnFilter:UI,agNumberColumnFilter:GU,agDateColumnFilter:MU,agLoadingOverlay:Fne,agNoRowsOverlay:Nne,agTooltipComponent:Lne,agMenuItem:Wne},this.enterpriseAgDefaultCompsModule={agSetColumnFilter:"@ag-grid-enterprise/set-filter",agSetColumnFloatingFilter:"@ag-grid-enterprise/set-filter",agMultiColumnFilter:"@ag-grid-enterprise/multi-filter",agMultiColumnFloatingFilter:"@ag-grid-enterprise/multi-filter",agGroupColumnFilter:"@ag-grid-enterprise/row-grouping",agGroupColumnFloatingFilter:"@ag-grid-enterprise/row-grouping",agRichSelect:"@ag-grid-enterprise/rich-select",agRichSelectCellEditor:"@ag-grid-enterprise/rich-select",agDetailCellRenderer:"@ag-grid-enterprise/master-detail",agSparklineCellRenderer:"@ag-grid-enterprise/sparklines"},this.jsComps={}}init(){const t=this.gos.get("components");t!=null&&lr(t,(e,n)=>this.registerJsComponent(e,n))}registerDefaultComponent(t,e){if(this.agGridDefaults[t]){console.error("Trying to overwrite a default component. You should call registerComponent");return}this.agGridDefaults[t]=e}registerJsComponent(t,e){this.jsComps[t]=e}retrieve(t,e){const n=(a,l)=>({componentFromFramework:l,component:a}),r=this.getFrameworkOverrides().frameworkComponent(e,this.gos.get("components"));if(r!=null)return n(r,!0);const i=this.jsComps[e];if(i){const a=this.getFrameworkOverrides().isFrameworkComponent(i);return n(i,a)}const s=this.agGridDefaults[e];if(s)return n(s,!1);const o=this.enterpriseAgDefaultCompsModule[e];return o?nt.__assertRegistered(o,`AG Grid '${t}' component: ${e}`,this.context.getGridId()):Ed(()=>{this.warnAboutMissingComponent(t,e)},"MissingComp"+e),null}warnAboutMissingComponent(t,e){const n=[...Object.keys(this.agGridDefaults).filter(i=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(i)),...Object.keys(this.jsComps)],r=Im(e,n,!0,.8).values;console.warn(`AG Grid: Could not find '${e}' component. It was configured as "${t}: '${e}'" but it wasn't found in the list of registered components.`),r.length>0&&console.warn(`         Did you mean: [${r.slice(0,3)}]?`),console.warn(`If using a custom component check it has been registered as described in: ${this.getFrameworkOverrides().getDocLink("components/")}`)}};w([te],zC.prototype,"init",1);zC=w([ce("userComponentRegistry")],zC);var jne={propertyName:"dateComponent",cellRenderer:!1},Une={propertyName:"headerComponent",cellRenderer:!1},zne={propertyName:"headerGroupComponent",cellRenderer:!1},AL={propertyName:"cellRenderer",cellRenderer:!0},Kne={propertyName:"loadingCellRenderer",cellRenderer:!0},qne={propertyName:"cellEditor",cellRenderer:!1},xL={propertyName:"innerRenderer",cellRenderer:!0},Yne={propertyName:"loadingOverlayComponent",cellRenderer:!1},Qne={propertyName:"noRowsOverlayComponent",cellRenderer:!1},Xne={propertyName:"tooltipComponent",cellRenderer:!1},y_={propertyName:"filter",cellRenderer:!1},Jne={propertyName:"floatingFilterComponent",cellRenderer:!1},Zne={propertyName:"toolPanel",cellRenderer:!1},ere={propertyName:"statusPanel",cellRenderer:!1},tre={propertyName:"fullWidthCellRenderer",cellRenderer:!0},nre={propertyName:"loadingCellRenderer",cellRenderer:!0},rre={propertyName:"groupRowRenderer",cellRenderer:!0},ire={propertyName:"detailCellRenderer",cellRenderer:!0},sre={propertyName:"menuItem",cellRenderer:!1},lz=class{static getFloatingFilterType(t){return this.filterToFloatingFilterMapping[t]}};lz.filterToFloatingFilterMapping={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"};var za=class extends ee{getHeaderCompDetails(t,e){return this.getCompDetails(t,Une,"agColumnHeader",e)}getHeaderGroupCompDetails(t){const e=t.columnGroup.getColGroupDef();return this.getCompDetails(e,zne,"agColumnGroupHeader",t)}getFullWidthCellRendererDetails(t){return this.getCompDetails(this.gridOptions,tre,null,t,!0)}getFullWidthLoadingCellRendererDetails(t){return this.getCompDetails(this.gridOptions,nre,"agLoadingCellRenderer",t,!0)}getFullWidthGroupCellRendererDetails(t){return this.getCompDetails(this.gridOptions,rre,"agGroupRowRenderer",t,!0)}getFullWidthDetailCellRendererDetails(t){return this.getCompDetails(this.gridOptions,ire,"agDetailCellRenderer",t,!0)}getInnerRendererDetails(t,e){return this.getCompDetails(t,xL,null,e)}getFullWidthGroupRowInnerCellRenderer(t,e){return this.getCompDetails(t,xL,null,e)}getCellRendererDetails(t,e){return this.getCompDetails(t,AL,null,e)}getLoadingCellRendererDetails(t,e){return this.getCompDetails(t,Kne,"agSkeletonCellRenderer",e,!0)}getCellEditorDetails(t,e){return this.getCompDetails(t,qne,"agCellEditor",e,!0)}getFilterDetails(t,e,n){return this.getCompDetails(t,y_,n,e,!0)}getDateCompDetails(t){return this.getCompDetails(this.gridOptions,jne,"agDateInput",t,!0)}getLoadingOverlayCompDetails(t){return this.getCompDetails(this.gridOptions,Yne,"agLoadingOverlay",t,!0)}getNoRowsOverlayCompDetails(t){return this.getCompDetails(this.gridOptions,Qne,"agNoRowsOverlay",t,!0)}getTooltipCompDetails(t){return this.getCompDetails(t.colDef,Xne,"agTooltipComponent",t,!0)}getSetFilterCellRendererDetails(t,e){return this.getCompDetails(t,AL,null,e)}getFloatingFilterCompDetails(t,e,n){return this.getCompDetails(t,Jne,n,e)}getToolPanelCompDetails(t,e){return this.getCompDetails(t,Zne,null,e,!0)}getStatusPanelCompDetails(t,e){return this.getCompDetails(t,ere,null,e,!0)}getMenuItemCompDetails(t,e){return this.getCompDetails(t,sre,"agMenuItem",e,!0)}getCompDetails(t,e,n,r,i=!1){const{propertyName:s,cellRenderer:o}=e;let{compName:a,jsComp:l,fwComp:u,paramsFromSelector:c,popupFromSelector:d,popupPositionFromSelector:h}=this.getCompKeys(t,e,r);const f=C=>{const y=this.userComponentRegistry.retrieve(s,C);y&&(l=y.componentFromFramework?void 0:y.component,u=y.componentFromFramework?y.component:void 0)};if(a!=null&&f(a),l==null&&u==null&&n!=null&&f(n),l&&o&&!this.agComponentUtils.doesImplementIComponent(l)&&(l=this.agComponentUtils.adaptFunction(s,l)),!l&&!u){i&&console.error(`AG Grid: Could not find component ${a}, did you forget to configure this component?`);return}const g=this.mergeParamsWithApplicationProvidedParams(t,e,r,c),m=l==null,v=l||u;return{componentFromFramework:m,componentClass:v,params:g,type:e,popupFromSelector:d,popupPositionFromSelector:h,newAgStackInstance:()=>this.newAgStackInstance(v,m,g,e)}}getCompKeys(t,e,n){const{propertyName:r}=e;let i,s,o,a,l,u;if(t){const c=t,d=c[r+"Selector"],h=d?d(n):null,f=g=>{typeof g=="string"?i=g:g!=null&&g!==!0&&(this.getFrameworkOverrides().isFrameworkComponent(g)?o=g:s=g)};h?(f(h.component),a=h.params,l=h.popup,u=h.popupPosition):f(c[r])}return{compName:i,jsComp:s,fwComp:o,paramsFromSelector:a,popupFromSelector:l,popupPositionFromSelector:u}}newAgStackInstance(t,e,n,r){const i=r.propertyName,s=!e;let o;if(s)o=new t;else{const l=this.componentMetadataProvider.retrieve(i);o=this.frameworkComponentWrapper.wrap(t,l.mandatoryMethodList,l.optionalMethodList,r)}const a=this.initComponent(o,n);return a==null?an.resolve(o):a.then(()=>o)}mergeParamsWithApplicationProvidedParams(t,e,n,r=null){const i=this.gos.getGridCommonParams();Br(i,n);const s=t,o=s&&s[e.propertyName+"Params"];if(typeof o=="function"){const a=o(n);Br(i,a)}else typeof o=="object"&&Br(i,o);return Br(i,r),i}initComponent(t,e){if(this.context.createBean(t),t.init!=null)return t.init(e)}getDefaultFloatingFilterType(t,e){if(t==null)return null;let n=null,{compName:r,jsComp:i,fwComp:s}=this.getCompKeys(t,y_);return r?n=lz.getFloatingFilterType(r):i==null&&s==null&&t.filter===!0&&(n=e()),n}};w([O("gridOptions")],za.prototype,"gridOptions",2);w([O("agComponentUtils")],za.prototype,"agComponentUtils",2);w([O("componentMetadataProvider")],za.prototype,"componentMetadataProvider",2);w([O("userComponentRegistry")],za.prototype,"userComponentRegistry",2);w([ut("frameworkComponentWrapper")],za.prototype,"frameworkComponentWrapper",2);za=w([ce("userComponentFactory")],za);var uz=class{constructor(t){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=t.scrollContainer,this.scrollHorizontally=t.scrollAxis.indexOf("x")!==-1,this.scrollVertically=t.scrollAxis.indexOf("y")!==-1,this.scrollByTick=t.scrollByTick!=null?t.scrollByTick:20,t.onScrollCallback&&(this.onScrollCallback=t.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=t.getVerticalPosition,this.setVerticalPosition=t.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=t.getHorizontalPosition,this.setHorizontalPosition=t.setHorizontalPosition),this.shouldSkipVerticalScroll=t.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=t.shouldSkipHorizontalScroll||(()=>!1)}check(t,e=!1){const n=e||this.shouldSkipVerticalScroll();if(n&&this.shouldSkipHorizontalScroll())return;const r=this.scrollContainer.getBoundingClientRect(),i=this.scrollByTick;this.tickLeft=t.clientX<r.left+i,this.tickRight=t.clientX>r.right-i,this.tickUp=t.clientY<r.top+i&&!n,this.tickDown=t.clientY>r.bottom-i&&!n,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;let t;if(t=this.tickCount>20?200:this.tickCount>10?80:40,this.scrollVertically){const e=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(e-t),this.tickDown&&this.setVerticalPosition(e+t)}if(this.scrollHorizontally){const e=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(e-t),this.tickRight&&this.setHorizontalPosition(e+t)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}},Ri=class extends ee{constructor(t){super(),this.eContainer=t}postConstruct(){this.gos.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(t=>{const e=t.gridBodyCtrl;this.autoScrollService=new uz({scrollContainer:e.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:()=>e.getScrollFeature().getVScrollPosition().top,setVerticalPosition:n=>e.getScrollFeature().setVerticalScrollPosition(n),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})})}getContainer(){return this.eContainer}isInterestedIn(t){return t===2}getIconName(){return this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?Ie.ICON_NOT_ALLOWED:Ie.ICON_MOVE}shouldPreventRowMove(){return!!(this.columnModel.getRowGroupColumns().length||this.filterManager.isAnyFilterPresent()||this.sortController.isSortActive())}getRowNodes(t){if(!this.isFromThisGrid(t))return t.dragItem.rowNodes||[];const e=t.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){const r=[...this.selectionService.getSelectedNodes()].sort((i,s)=>i.rowIndex==null||s.rowIndex==null?0:this.getRowIndexNumber(i)-this.getRowIndexNumber(s));if(r.indexOf(e)!==-1)return r}return[e]}onDragEnter(t){t.dragItem.rowNodes=this.getRowNodes(t),this.dispatchGridEvent(x.EVENT_ROW_DRAG_ENTER,t),this.getRowNodes(t).forEach(e=>{e.setDragging(!0)}),this.onEnterOrDragging(t)}onDragging(t){this.onEnterOrDragging(t)}isFromThisGrid(t){const{dragSourceDomDataKey:e}=t.dragSource;return e===this.gos.getDomDataKey()}isDropZoneWithinThisGrid(t){const n=this.ctrlsService.getGridBodyCtrl().getGui(),{dropZoneTarget:r}=t;return!n.contains(r)}onEnterOrDragging(t){this.dispatchGridEvent(x.EVENT_ROW_DRAG_MOVE,t),this.lastDraggingEvent=t;const e=this.mouseEventService.getNormalisedPosition(t).y;this.gos.get("rowDragManaged")&&this.doManagedDrag(t,e),this.autoScrollService.check(t.event)}doManagedDrag(t,e){const n=this.isFromThisGrid(t),r=this.gos.get("rowDragManaged"),i=t.dragItem.rowNodes;r&&this.shouldPreventRowMove()||(this.gos.get("suppressMoveWhenRowDragging")||!n?this.isDropZoneWithinThisGrid(t)||this.clientSideRowModel.highlightRowAtPixel(i[0],e):this.moveRows(i,e))}getRowIndexNumber(t){return parseInt(Je(t.getRowIndexString().split("-")),10)}moveRowAndClearHighlight(t){const e=this.clientSideRowModel.getLastHighlightedRowNode(),n=e&&e.highlighted===1,r=this.mouseEventService.getNormalisedPosition(t).y,i=t.dragItem.rowNodes;let s=n?1:0;if(this.isFromThisGrid(t))i.forEach(o=>{o.rowTop<r&&(s-=1)}),this.moveRows(i,r,s);else{const o=this.gos.getCallback("getRowId");let a=this.clientSideRowModel.getRowIndexAtPixel(r)+1;this.clientSideRowModel.getHighlightPosition(r)===0&&a--,this.clientSideRowModel.updateRowData({add:i.map(l=>l.data).filter(l=>!this.clientSideRowModel.getRowNode(o?o({data:l,level:0}):l.id)),addIndex:a})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(t,e,n=0){var r;this.clientSideRowModel.ensureRowsAtPixel(t,e,n)&&(this.focusService.clearFocusedCell(),(r=this.rangeService)==null||r.removeAllCellRanges())}addRowDropZone(t){if(!t.getContainer()){we("addRowDropZone - A container target needs to be provided");return}if(this.dragAndDropService.findExternalZone(t)){console.warn("AG Grid: addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");return}let e={getContainer:t.getContainer};t.fromGrid?e=t:(t.onDragEnter&&(e.onDragEnter=n=>{t.onDragEnter(this.draggingToRowDragEvent(x.EVENT_ROW_DRAG_ENTER,n))}),t.onDragLeave&&(e.onDragLeave=n=>{t.onDragLeave(this.draggingToRowDragEvent(x.EVENT_ROW_DRAG_LEAVE,n))}),t.onDragging&&(e.onDragging=n=>{t.onDragging(this.draggingToRowDragEvent(x.EVENT_ROW_DRAG_MOVE,n))}),t.onDragStop&&(e.onDragStop=n=>{t.onDragStop(this.draggingToRowDragEvent(x.EVENT_ROW_DRAG_END,n))})),this.dragAndDropService.addDropTarget(me({isInterestedIn:n=>n===2,getIconName:()=>Ie.ICON_MOVE,external:!0},e))}getRowDropZone(t){const e=this.getContainer.bind(this),n=this.onDragEnter.bind(this),r=this.onDragLeave.bind(this),i=this.onDragging.bind(this),s=this.onDragStop.bind(this);return t?{getContainer:e,onDragEnter:t.onDragEnter?o=>{n(o),t.onDragEnter(this.draggingToRowDragEvent(x.EVENT_ROW_DRAG_ENTER,o))}:n,onDragLeave:t.onDragLeave?o=>{r(o),t.onDragLeave(this.draggingToRowDragEvent(x.EVENT_ROW_DRAG_LEAVE,o))}:r,onDragging:t.onDragging?o=>{i(o),t.onDragging(this.draggingToRowDragEvent(x.EVENT_ROW_DRAG_MOVE,o))}:i,onDragStop:t.onDragStop?o=>{s(o),t.onDragStop(this.draggingToRowDragEvent(x.EVENT_ROW_DRAG_END,o))}:s,fromGrid:!0}:{getContainer:e,onDragEnter:n,onDragLeave:r,onDragging:i,onDragStop:s,fromGrid:!0}}draggingToRowDragEvent(t,e){const n=this.mouseEventService.getNormalisedPosition(e).y,r=n>this.paginationProxy.getCurrentPageHeight();let i=-1,s;r||(i=this.rowModel.getRowIndexAtPixel(n),s=this.rowModel.getRow(i));let o;switch(e.vDirection){case 1:o="down";break;case 0:o="up";break;default:o=null;break}return this.gos.addGridCommonParams({type:t,event:e.event,node:e.dragItem.rowNode,nodes:e.dragItem.rowNodes,overIndex:i,overNode:s,y:n,vDirection:o})}dispatchGridEvent(t,e){const n=this.draggingToRowDragEvent(t,e);this.eventService.dispatchEvent(n)}onDragLeave(t){this.dispatchGridEvent(x.EVENT_ROW_DRAG_LEAVE,t),this.stopDragging(t),this.gos.get("rowDragManaged")&&this.clearRowHighlight()}onDragStop(t){this.dispatchGridEvent(x.EVENT_ROW_DRAG_END,t),this.stopDragging(t),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(t))&&!this.isDropZoneWithinThisGrid(t)&&this.moveRowAndClearHighlight(t)}stopDragging(t){this.autoScrollService.ensureCleared(),this.getRowNodes(t).forEach(e=>{e.setDragging(!1)})}};w([O("dragAndDropService")],Ri.prototype,"dragAndDropService",2);w([O("rowModel")],Ri.prototype,"rowModel",2);w([O("paginationProxy")],Ri.prototype,"paginationProxy",2);w([O("columnModel")],Ri.prototype,"columnModel",2);w([O("focusService")],Ri.prototype,"focusService",2);w([O("sortController")],Ri.prototype,"sortController",2);w([O("filterManager")],Ri.prototype,"filterManager",2);w([O("selectionService")],Ri.prototype,"selectionService",2);w([O("mouseEventService")],Ri.prototype,"mouseEventService",2);w([O("ctrlsService")],Ri.prototype,"ctrlsService",2);w([ut("rangeService")],Ri.prototype,"rangeService",2);w([te],Ri.prototype,"postConstruct",1);var lg=class extends ee{constructor(){super(...arguments),this.dragEndFunctions=[],this.dragSources=[]}removeAllListeners(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0}removeListener(t){const e=t.dragSource.eElement,n=t.mouseDownListener;if(e.removeEventListener("mousedown",n),t.touchEnabled){const r=t.touchStartListener;e.removeEventListener("touchstart",r,{passive:!0})}}removeDragSource(t){const e=this.dragSources.find(n=>n.dragSource===t);e&&(this.removeListener(e),Gr(this.dragSources,e))}isDragging(){return this.dragging}addDragSource(t){const e=this.onMouseDown.bind(this,t),{eElement:n,includeTouch:r,stopPropagationForTouch:i}=t;n.addEventListener("mousedown",e);let s=null;const o=this.gos.get("suppressTouch");r&&!o&&(s=a=>{xI(a.target)||(a.cancelable&&(a.preventDefault(),i&&a.stopPropagation()),this.onTouchStart(t,a))},n.addEventListener("touchstart",s,{passive:!1})),this.dragSources.push({dragSource:t,mouseDownListener:e,touchStartListener:s,touchEnabled:!!r})}getStartTarget(){return this.startTarget}onTouchStart(t,e){this.currentDragParams=t,this.dragging=!1;const n=e.touches[0];this.touchLastTime=n,this.touchStart=n;const r=l=>this.onTouchMove(l,t.eElement),i=l=>this.onTouchUp(l,t.eElement),s=l=>{l.cancelable&&l.preventDefault()},o=e.target,a=[{target:this.gos.getRootNode(),type:"touchmove",listener:s,options:{passive:!1}},{target:o,type:"touchmove",listener:r,options:{passive:!0}},{target:o,type:"touchend",listener:i,options:{passive:!0}},{target:o,type:"touchcancel",listener:i,options:{passive:!0}}];this.addTemporaryEvents(a),t.dragStartPixels===0&&this.onCommonMove(n,this.touchStart,t.eElement)}onMouseDown(t,e){const n=e;if(t.skipMouseEvent&&t.skipMouseEvent(e)||n._alreadyProcessedByDragService||(n._alreadyProcessedByDragService=!0,e.button!==0))return;this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.currentDragParams=t,this.dragging=!1,this.mouseStartEvent=e,this.startTarget=e.target;const r=l=>this.onMouseMove(l,t.eElement),i=l=>this.onMouseUp(l,t.eElement),s=l=>l.preventDefault(),o=this.gos.getRootNode(),a=[{target:o,type:"mousemove",listener:r},{target:o,type:"mouseup",listener:i},{target:o,type:"contextmenu",listener:s}];this.addTemporaryEvents(a),t.dragStartPixels===0&&this.onMouseMove(e,t.eElement)}addTemporaryEvents(t){t.forEach(e=>{const{target:n,type:r,listener:i,options:s}=e;n.addEventListener(r,i,s)}),this.dragEndFunctions.push(()=>{t.forEach(e=>{const{target:n,type:r,listener:i,options:s}=e;n.removeEventListener(r,i,s)})})}isEventNearStartEvent(t,e){const{dragStartPixels:n}=this.currentDragParams,r=J(n)?n:4;return kI(t,e,r)}getFirstActiveTouch(t){for(let e=0;e<t.length;e++)if(t[e].identifier===this.touchStart.identifier)return t[e];return null}onCommonMove(t,e,n){if(!this.dragging){if(!this.dragging&&this.isEventNearStartEvent(t,e))return;this.dragging=!0;const r={type:x.EVENT_DRAG_STARTED,target:n};this.eventService.dispatchEvent(r),this.currentDragParams.onDragStart(e),this.currentDragParams.onDragging(e)}this.currentDragParams.onDragging(t)}onTouchMove(t,e){const n=this.getFirstActiveTouch(t.touches);n&&this.onCommonMove(n,this.touchStart,e)}onMouseMove(t,e){var n;js()&&((n=this.gos.getDocument().getSelection())==null||n.removeAllRanges()),this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.onCommonMove(t,this.mouseStartEvent,e)}shouldPreventMouseEvent(t){const e=this.gos.get("enableCellTextSelection"),n=t.type==="mousemove";return e&&n&&t.cancelable&&this.mouseEventService.isEventFromThisGrid(t)&&!this.isOverFormFieldElement(t)}isOverFormFieldElement(t){const e=t.target,n=e==null?void 0:e.tagName.toLocaleLowerCase();return!!(n!=null&&n.match("^a$|textarea|input|select|button"))}onTouchUp(t,e){let n=this.getFirstActiveTouch(t.changedTouches);n||(n=this.touchLastTime),this.onUpCommon(n,e)}onMouseUp(t,e){this.onUpCommon(t,e)}onUpCommon(t,e){if(this.dragging){this.dragging=!1,this.currentDragParams.onDragStop(t);const n={type:x.EVENT_DRAG_STOPPED,target:e};this.eventService.dispatchEvent(n)}this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(n=>n()),this.dragEndFunctions.length=0}};w([O("mouseEventService")],lg.prototype,"mouseEventService",2);w([Pr],lg.prototype,"removeAllListeners",1);lg=w([ce("dragService")],lg);var $T="ag-list-item-hovered",cz=class extends ee{constructor(t,e,n){super(),this.comp=t,this.virtualList=e,this.params=n,this.currentDragValue=null,this.lastHoveredListItem=null}postConstruct(){this.addManagedListener(this.params.eventSource,this.params.listItemDragStartEvent,this.listItemDragStart.bind(this)),this.addManagedListener(this.params.eventSource,this.params.listItemDragEndEvent,this.listItemDragEnd.bind(this)),this.createDropTarget(),this.createAutoScrollService()}listItemDragStart(t){this.currentDragValue=this.params.getCurrentDragValue(t),this.moveBlocked=this.params.isMoveBlocked(this.currentDragValue)}listItemDragEnd(){window.setTimeout(()=>{this.currentDragValue=null,this.moveBlocked=!1},10)}createDropTarget(){const t={isInterestedIn:e=>e===this.params.dragSourceType,getIconName:()=>this.moveBlocked?Ie.ICON_PINNED:Ie.ICON_MOVE,getContainer:()=>this.comp.getGui(),onDragging:e=>this.onDragging(e),onDragStop:()=>this.onDragStop(),onDragLeave:()=>this.onDragLeave()};this.dragAndDropService.addDropTarget(t)}createAutoScrollService(){const t=this.virtualList.getGui();this.autoScrollService=new uz({scrollContainer:t,scrollAxis:"y",getVerticalPosition:()=>t.scrollTop,setVerticalPosition:e=>t.scrollTop=e})}onDragging(t){if(!this.currentDragValue||this.moveBlocked)return;const e=this.getListDragItem(t),n=this.virtualList.getComponentAt(e.rowIndex);if(!n)return;const r=n.getGui().parentElement;this.lastHoveredListItem&&this.lastHoveredListItem.rowIndex===e.rowIndex&&this.lastHoveredListItem.position===e.position||(this.autoScrollService.check(t.event),this.clearHoveredItems(),this.lastHoveredListItem=e,f_(r,$T),f_(r,`ag-item-highlight-${e.position}`))}getListDragItem(t){const e=this.virtualList.getGui(),n=parseFloat(window.getComputedStyle(e).paddingTop),r=this.virtualList.getRowHeight(),i=this.virtualList.getScrollTop(),s=Math.max(0,(t.y-n+i)/r),o=this.params.getNumRows(this.comp)-1,a=Math.min(o,s)|0;return{rowIndex:a,position:Math.round(s)>s||s>o?"bottom":"top",component:this.virtualList.getComponentAt(a)}}onDragStop(){this.moveBlocked||(this.params.moveItem(this.currentDragValue,this.lastHoveredListItem),this.clearHoveredItems(),this.autoScrollService.ensureCleared())}onDragLeave(){this.clearHoveredItems(),this.autoScrollService.ensureCleared()}clearHoveredItems(){this.virtualList.getGui().querySelectorAll(`.${$T}`).forEach(e=>{[$T,"ag-item-highlight-top","ag-item-highlight-bottom"].forEach(n=>{e.classList.remove(n)})}),this.lastHoveredListItem=null}};w([O("dragAndDropService")],cz.prototype,"dragAndDropService",2);w([te],cz.prototype,"postConstruct",1);function Wl(t){const e=t;return e!=null&&e.getFrameworkComponentInstance!=null?e.getFrameworkComponentInstance():t}var We=class{constructor(){this.detailGridInfoMap={},this.destroyCalled=!1}init(){switch(this.rowModel.getType()){case"clientSide":this.clientSideRowModel=this.rowModel;break;case"infinite":this.infiniteRowModel=this.rowModel;break;case"serverSide":this.serverSideRowModel=this.rowModel;break}this.ctrlsService.whenReady(t=>{this.gridBodyCtrl=t.gridBodyCtrl})}__getAlignedGridService(){return this.alignedGridsService}getGridId(){return this.context.getGridId()}addDetailGridInfo(t,e){this.detailGridInfoMap[t]=e}removeDetailGridInfo(t){delete this.detailGridInfoMap[t]}getDetailGridInfo(t){return this.detailGridInfoMap[t]}forEachDetailGridInfo(t){let e=0;lr(this.detailGridInfoMap,(n,r)=>{J(r)&&(t(r,e),e++)})}getDataAsCsv(t){if(nt.__assertRegistered("@ag-grid-community/csv-export","api.getDataAsCsv",this.context.getGridId()))return this.csvCreator.getDataAsCsv(t)}exportDataAsCsv(t){nt.__assertRegistered("@ag-grid-community/csv-export","api.exportDataAsCsv",this.context.getGridId())&&this.csvCreator.exportDataAsCsv(t)}assertNotExcelMultiSheet(t,e){return nt.__assertRegistered("@ag-grid-enterprise/excel-export","api."+t,this.context.getGridId())?this.excelCreator.getFactoryMode()===1?(console.warn("AG Grid: The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'"),!1):!0:!1}getDataAsExcel(t){if(this.assertNotExcelMultiSheet("getDataAsExcel",t))return this.excelCreator.getDataAsExcel(t)}exportDataAsExcel(t){this.assertNotExcelMultiSheet("exportDataAsExcel",t)&&this.excelCreator.exportDataAsExcel(t)}getSheetDataForExcel(t){if(nt.__assertRegistered("@ag-grid-enterprise/excel-export","api.getSheetDataForExcel",this.context.getGridId()))return this.excelCreator.setFactoryMode(1),this.excelCreator.getSheetDataForExcel(t)}getMultipleSheetsAsExcel(t){if(nt.__assertRegistered("@ag-grid-enterprise/excel-export","api.getMultipleSheetsAsExcel",this.context.getGridId()))return this.excelCreator.getMultipleSheetsAsExcel(t)}exportMultipleSheetsAsExcel(t){nt.__assertRegistered("@ag-grid-enterprise/excel-export","api.exportMultipleSheetsAsExcel",this.context.getGridId())&&this.excelCreator.exportMultipleSheetsAsExcel(t)}setGridAriaProperty(t,e){if(!t)return;const n=this.ctrlsService.getGridBodyCtrl().getGui(),r=`aria-${t}`;e===null?n.removeAttribute(r):n.setAttribute(r,e)}logMissingRowModel(t,...e){console.error(`AG Grid: api.${t} can only be called when gridOptions.rowModelType is ${e.join(" or ")}`)}logDeprecation(t,e,n,r){we(`Since ${t} api.${e} is deprecated. Please use ${n} instead. ${r??""}`)}getPinnedTopRowCount(){return this.pinnedRowModel.getPinnedTopRowCount()}getPinnedBottomRowCount(){return this.pinnedRowModel.getPinnedBottomRowCount()}getPinnedTopRow(t){return this.pinnedRowModel.getPinnedTopRow(t)}getPinnedBottomRow(t){return this.pinnedRowModel.getPinnedBottomRow(t)}expireValueCache(){this.valueCache.expire()}getVerticalPixelRange(){return this.gridBodyCtrl.getScrollFeature().getVScrollPosition()}getHorizontalPixelRange(){return this.gridBodyCtrl.getScrollFeature().getHScrollPosition()}refreshCells(t={}){this.frameworkOverrides.wrapIncoming(()=>this.rowRenderer.refreshCells(t))}flashCells(t={}){const e=n=>we(`Since v31.1 api.flashCells parameter '${n}Delay' is deprecated. Please use '${n}Duration' instead.`);J(t.fadeDelay)&&e("fade"),J(t.flashDelay)&&e("flash"),this.frameworkOverrides.wrapIncoming(()=>this.rowRenderer.flashCells(t))}redrawRows(t={}){const e=t?t.rowNodes:void 0;this.frameworkOverrides.wrapIncoming(()=>this.rowRenderer.redrawRows(e))}refreshHeader(){this.frameworkOverrides.wrapIncoming(()=>this.ctrlsService.getHeaderRowContainerCtrls().forEach(t=>t.refresh()))}isAnyFilterPresent(){return this.filterManager.isAnyFilterPresent()}isColumnFilterPresent(){return this.filterManager.isColumnFilterPresent()||this.filterManager.isAggregateFilterPresent()}isQuickFilterPresent(){return this.filterManager.isQuickFilterPresent()}getModel(){return we("Since v31.1 getModel() is deprecated. Please use the appropriate grid API methods instead."),this.rowModel}setRowNodeExpanded(t,e,n,r){this.expansionService.setRowNodeExpanded(t,e,n,r)}onGroupExpandedOrCollapsed(){if(Te(this.clientSideRowModel)){this.logMissingRowModel("onGroupExpandedOrCollapsed","clientSide");return}this.expansionService.onGroupExpandedOrCollapsed()}refreshClientSideRowModel(t){if(Te(this.clientSideRowModel)){this.logMissingRowModel("refreshClientSideRowModel","clientSide");return}this.clientSideRowModel.refreshModel(t)}isAnimationFrameQueueEmpty(){return this.animationFrameService.isQueueEmpty()}flushAllAnimationFrames(){this.animationFrameService.flushAllFrames()}getRowNode(t){return this.rowModel.getRowNode(t)}getSizesForCurrentTheme(){return{rowHeight:this.gos.getRowHeightAsNumber(),headerHeight:this.columnModel.getHeaderHeight()}}expandAll(){this.clientSideRowModel||this.serverSideRowModel?this.expansionService.expandAll(!0):this.logMissingRowModel("expandAll","clientSide","serverSide")}collapseAll(){this.clientSideRowModel||this.serverSideRowModel?this.expansionService.expandAll(!1):this.logMissingRowModel("collapseAll","clientSide","serverSide")}addRenderedRowListener(t,e,n){this.rowRenderer.addRenderedRowListener(t,e,n)}getQuickFilter(){return this.gos.get("quickFilterText")}getAdvancedFilterModel(){return nt.__assertRegistered("@ag-grid-enterprise/advanced-filter","api.getAdvancedFilterModel",this.context.getGridId())?this.filterManager.getAdvancedFilterModel():null}setAdvancedFilterModel(t){this.filterManager.setAdvancedFilterModel(t)}showAdvancedFilterBuilder(){nt.__assertRegistered("@ag-grid-enterprise/advanced-filter","api.setAdvancedFilterModel",this.context.getGridId())&&this.filterManager.showAdvancedFilterBuilder("api")}setNodesSelected(t){if(!t.nodes.every(o=>o.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),!1):o.id===void 0?(console.warn("AG Grid: cannot select node until id for node is known"),!1):!0))return;const{nodes:n,source:r,newValue:i}=t,s=n;this.selectionService.setNodesSelected({nodes:s,source:r??"api",newValue:i})}selectAll(t="apiSelectAll"){this.selectionService.selectAllRowNodes({source:t})}deselectAll(t="apiSelectAll"){this.selectionService.deselectAllRowNodes({source:t})}selectAllFiltered(t="apiSelectAllFiltered"){this.selectionService.selectAllRowNodes({source:t,justFiltered:!0})}deselectAllFiltered(t="apiSelectAllFiltered"){this.selectionService.deselectAllRowNodes({source:t,justFiltered:!0})}getServerSideSelectionState(){return Te(this.serverSideRowModel)?(this.logMissingRowModel("getServerSideSelectionState","serverSide"),null):this.selectionService.getSelectionState()}setServerSideSelectionState(t){if(Te(this.serverSideRowModel)){this.logMissingRowModel("setServerSideSelectionState","serverSide");return}this.selectionService.setSelectionState(t,"api")}selectAllOnCurrentPage(t="apiSelectAllCurrentPage"){this.selectionService.selectAllRowNodes({source:t,justCurrentPage:!0})}deselectAllOnCurrentPage(t="apiSelectAllCurrentPage"){this.selectionService.deselectAllRowNodes({source:t,justCurrentPage:!0})}showLoadingOverlay(){this.overlayService.showLoadingOverlay()}showNoRowsOverlay(){this.overlayService.showNoRowsOverlay()}hideOverlay(){this.overlayService.hideOverlay()}getSelectedNodes(){return this.selectionService.getSelectedNodes()}getSelectedRows(){return this.selectionService.getSelectedRows()}getBestCostNodeSelection(){if(Te(this.clientSideRowModel)){this.logMissingRowModel("getBestCostNodeSelection","clientSide");return}return this.selectionService.getBestCostNodeSelection()}getRenderedNodes(){return this.rowRenderer.getRenderedNodes()}ensureColumnVisible(t,e="auto"){this.frameworkOverrides.wrapIncoming(()=>this.gridBodyCtrl.getScrollFeature().ensureColumnVisible(t,e),"ensureVisible")}ensureIndexVisible(t,e){this.frameworkOverrides.wrapIncoming(()=>this.gridBodyCtrl.getScrollFeature().ensureIndexVisible(t,e),"ensureVisible")}ensureNodeVisible(t,e=null){this.frameworkOverrides.wrapIncoming(()=>this.gridBodyCtrl.getScrollFeature().ensureNodeVisible(t,e),"ensureVisible")}forEachLeafNode(t){if(Te(this.clientSideRowModel)){this.logMissingRowModel("forEachLeafNode","clientSide");return}this.clientSideRowModel.forEachLeafNode(t)}forEachNode(t,e){this.rowModel.forEachNode(t,e)}forEachNodeAfterFilter(t){if(Te(this.clientSideRowModel)){this.logMissingRowModel("forEachNodeAfterFilter","clientSide");return}this.clientSideRowModel.forEachNodeAfterFilter(t)}forEachNodeAfterFilterAndSort(t){if(Te(this.clientSideRowModel)){this.logMissingRowModel("forEachNodeAfterFilterAndSort","clientSide");return}this.clientSideRowModel.forEachNodeAfterFilterAndSort(t)}getFilterInstance(t,e){return we("'getFilterInstance' is deprecated. To get/set individual filter models, use 'getColumnFilterModel' or 'setColumnFilterModel' instead. To get hold of the filter instance, use 'getColumnFilterInstance' which returns the instance asynchronously."),this.filterManager.getFilterInstance(t,e)}getColumnFilterInstance(t){return this.filterManager.getColumnFilterInstance(t)}destroyFilter(t){const e=this.columnModel.getPrimaryColumn(t);if(e)return this.filterManager.destroyFilter(e,"api")}getStatusPanel(t){if(!nt.__assertRegistered("@ag-grid-enterprise/status-bar","api.getStatusPanel",this.context.getGridId()))return;const e=this.statusBarService.getStatusPanel(t);return Wl(e)}getColumnDef(t){const e=this.columnModel.getPrimaryColumn(t);return e?e.getColDef():null}getColumnDefs(){return this.columnModel.getColumnDefs()}onFilterChanged(t="api"){this.filterManager.onFilterChanged({source:t})}onSortChanged(){this.sortController.onSortChanged("api")}setFilterModel(t){this.frameworkOverrides.wrapIncoming(()=>this.filterManager.setFilterModel(t))}getFilterModel(){return this.filterManager.getFilterModel()}getColumnFilterModel(t){return this.filterManager.getColumnFilterModel(t)}setColumnFilterModel(t,e){return this.filterManager.setColumnFilterModel(t,e)}getFocusedCell(){return this.focusService.getFocusedCell()}clearFocusedCell(){return this.focusService.clearFocusedCell()}setFocusedCell(t,e,n){this.focusService.setFocusedCell({rowIndex:t,column:e,rowPinned:n,forceBrowserFocus:!0})}addRowDropZone(t){this.gridBodyCtrl.getRowDragFeature().addRowDropZone(t)}removeRowDropZone(t){const e=this.dragAndDropService.findExternalZone(t);e&&this.dragAndDropService.removeDropTarget(e)}getRowDropZoneParams(t){return this.gridBodyCtrl.getRowDragFeature().getRowDropZone(t)}assertSideBarLoaded(t){return nt.__assertRegistered("@ag-grid-enterprise/side-bar","api."+t,this.context.getGridId())}isSideBarVisible(){return this.assertSideBarLoaded("isSideBarVisible")&&this.sideBarService.getSideBarComp().isDisplayed()}setSideBarVisible(t){this.assertSideBarLoaded("setSideBarVisible")&&this.sideBarService.getSideBarComp().setDisplayed(t)}setSideBarPosition(t){this.assertSideBarLoaded("setSideBarPosition")&&this.sideBarService.getSideBarComp().setSideBarPosition(t)}openToolPanel(t){this.assertSideBarLoaded("openToolPanel")&&this.sideBarService.getSideBarComp().openToolPanel(t,"api")}closeToolPanel(){this.assertSideBarLoaded("closeToolPanel")&&this.sideBarService.getSideBarComp().close("api")}getOpenedToolPanel(){return this.assertSideBarLoaded("getOpenedToolPanel")?this.sideBarService.getSideBarComp().openedItem():null}refreshToolPanel(){this.assertSideBarLoaded("refreshToolPanel")&&this.sideBarService.getSideBarComp().refresh()}isToolPanelShowing(){return this.assertSideBarLoaded("isToolPanelShowing")&&this.sideBarService.getSideBarComp().isToolPanelShowing()}getToolPanelInstance(t){if(this.assertSideBarLoaded("getToolPanelInstance")){const e=this.sideBarService.getSideBarComp().getToolPanelInstance(t);return Wl(e)}}getSideBar(){if(this.assertSideBarLoaded("getSideBar"))return this.sideBarService.getSideBarComp().getDef()}resetRowHeights(){if(J(this.clientSideRowModel)){if(this.columnModel.isAutoRowHeightActive()){console.warn("AG Grid: calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");return}this.clientSideRowModel.resetRowHeights()}}setRowCount(t,e){if(this.serverSideRowModel){if(this.columnModel.isRowGroupEmpty()){this.serverSideRowModel.setRowCount(t,e);return}console.error("AG Grid: setRowCount cannot be used while using row grouping.");return}if(this.infiniteRowModel){this.infiniteRowModel.setRowCount(t,e);return}this.logMissingRowModel("setRowCount","infinite","serverSide")}onRowHeightChanged(){this.clientSideRowModel?this.clientSideRowModel.onRowHeightChanged():this.serverSideRowModel&&this.serverSideRowModel.onRowHeightChanged()}getValue(t,e){return this.logDeprecation("31.3","getValue","getCellValue"),this.getCellValue({colKey:t,rowNode:e})}getCellValue(t){var e;const{colKey:n,rowNode:r,useFormatter:i}=t;let s=(e=this.columnModel.getPrimaryColumn(n))!=null?e:this.columnModel.getGridColumn(n);if(Te(s))return null;const o=this.valueService.getValue(s,r);if(i){const a=this.valueService.formatValue(s,r,o);return a??sn(o,!0)}return o}addEventListener(t,e){this.apiEventService.addEventListener(t,e)}addGlobalListener(t){this.apiEventService.addGlobalListener(t)}removeEventListener(t,e){this.apiEventService.removeEventListener(t,e)}removeGlobalListener(t){this.apiEventService.removeGlobalListener(t)}dispatchEvent(t){this.eventService.dispatchEvent(t)}destroy(){var t;const e=`See ${this.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}`;if(this.destroyCalled)return;const n={type:x.EVENT_GRID_PRE_DESTROYED,state:this.getState()};this.dispatchEvent(n),this.destroyCalled=!0,(t=this.ctrlsService.get("gridCtrl"))==null||t.destroyGridUi(),this.context.destroy(),this.detailGridInfoMap={},aj(this,["isDestroyed"],e)}isDestroyed(){return this.destroyCalled}resetQuickFilter(){this.filterManager.resetQuickFilterCache()}getCellRanges(){return this.rangeService?this.rangeService.getCellRanges():(nt.__assertRegistered("@ag-grid-enterprise/range-selection","api.getCellRanges",this.context.getGridId()),null)}addCellRange(t){if(this.rangeService){this.rangeService.addCellRange(t);return}nt.__assertRegistered("@ag-grid-enterprise/range-selection","api.addCellRange",this.context.getGridId())}clearRangeSelection(){this.rangeService&&this.rangeService.removeAllCellRanges(),nt.__assertRegistered("@ag-grid-enterprise/range-selection","gridApi.clearRangeSelection",this.context.getGridId())}undoCellEditing(){this.undoRedoService.undo("api")}redoCellEditing(){this.undoRedoService.redo("api")}getCurrentUndoSize(){return this.undoRedoService.getCurrentUndoStackSize()}getCurrentRedoSize(){return this.undoRedoService.getCurrentRedoStackSize()}assertChart(t,e){if(nt.__assertRegistered("@ag-grid-enterprise/charts","api."+t,this.context.getGridId()))return this.frameworkOverrides.wrapIncoming(()=>e())}getChartModels(){return this.assertChart("getChartModels",()=>this.chartService.getChartModels())}getChartRef(t){return this.assertChart("getChartRef",()=>this.chartService.getChartRef(t))}getChartImageDataURL(t){return this.assertChart("getChartImageDataURL",()=>this.chartService.getChartImageDataURL(t))}downloadChart(t){return this.assertChart("downloadChart",()=>this.chartService.downloadChart(t))}openChartToolPanel(t){return this.assertChart("openChartToolPanel",()=>this.chartService.openChartToolPanel(t))}closeChartToolPanel(t){return this.assertChart("closeChartToolPanel",()=>this.chartService.closeChartToolPanel(t.chartId))}createRangeChart(t){return this.assertChart("createRangeChart",()=>this.chartService.createRangeChart(t))}createPivotChart(t){return this.assertChart("createPivotChart",()=>this.chartService.createPivotChart(t))}createCrossFilterChart(t){return this.assertChart("createCrossFilterChart",()=>this.chartService.createCrossFilterChart(t))}updateChart(t){return this.assertChart("updateChart",()=>this.chartService.updateChart(t))}restoreChart(t,e){return this.assertChart("restoreChart",()=>this.chartService.restoreChart(t,e))}assertClipboard(t,e){nt.__assertRegistered("@ag-grid-enterprise/clipboard","api"+t,this.context.getGridId())&&e()}copyToClipboard(t){this.assertClipboard("copyToClipboard",()=>this.clipboardService.copyToClipboard(t))}cutToClipboard(t){this.assertClipboard("cutToClipboard",()=>this.clipboardService.cutToClipboard(t))}copySelectedRowsToClipboard(t){this.assertClipboard("copySelectedRowsToClipboard",()=>this.clipboardService.copySelectedRowsToClipboard(t))}copySelectedRangeToClipboard(t){this.assertClipboard("copySelectedRangeToClipboard",()=>this.clipboardService.copySelectedRangeToClipboard(t))}copySelectedRangeDown(){this.assertClipboard("copySelectedRangeDown",()=>this.clipboardService.copyRangeDown())}pasteFromClipboard(){this.assertClipboard("pasteFromClipboard",()=>this.clipboardService.pasteFromClipboard())}showColumnMenuAfterButtonClick(t,e){we("'showColumnMenuAfterButtonClick' is deprecated. Use 'IHeaderParams.showColumnMenu' within a header component, or 'api.showColumnMenu' elsewhere.");const n=this.columnModel.getGridColumn(t);this.menuService.showColumnMenu({column:n,buttonElement:e,positionBy:"button"})}showColumnMenuAfterMouseClick(t,e){we("'showColumnMenuAfterMouseClick' is deprecated. Use 'IHeaderParams.showColumnMenuAfterMouseClick' within a header component, or 'api.showColumnMenu' elsewhere.");let n=this.columnModel.getGridColumn(t);if(n||(n=this.columnModel.getPrimaryColumn(t)),!n){console.error(`AG Grid: column '${t}' not found`);return}this.menuService.showColumnMenu({column:n,mouseEvent:e,positionBy:"mouse"})}showContextMenu(t){const{rowNode:e,column:n,value:r,x:i,y:s}=t||{};let{x:o,y:a}=this.menuService.getContextMenuPosition(e,n);i!=null&&(o=i),s!=null&&(a=s),this.menuService.showContextMenu({mouseEvent:new MouseEvent("mousedown",{clientX:o,clientY:a}),rowNode:e,column:n,value:r})}showColumnChooser(t){this.menuService.showColumnChooser({chooserParams:t})}showColumnFilter(t){const e=this.columnModel.getGridColumn(t);if(!e){console.error(`AG Grid: column '${t}' not found`);return}this.menuService.showFilterMenu({column:e,containerType:"columnFilter",positionBy:"auto"})}showColumnMenu(t){const e=this.columnModel.getGridColumn(t);if(!e){console.error(`AG Grid: column '${t}' not found`);return}this.menuService.showColumnMenu({column:e,positionBy:"auto"})}hidePopupMenu(){this.menuService.hidePopupMenu()}hideColumnChooser(){this.menuService.hideColumnChooser()}tabToNextCell(t){return this.navigationService.tabToNextCell(!1,t)}tabToPreviousCell(t){return this.navigationService.tabToNextCell(!0,t)}getCellRendererInstances(t={}){return this.rowRenderer.getCellRendererInstances(t).map(Wl)}getCellEditorInstances(t={}){return this.rowRenderer.getCellEditorInstances(t).map(Wl)}getEditingCells(){return this.rowRenderer.getEditingCells()}stopEditing(t=!1){this.rowRenderer.stopEditing(t)}startEditingCell(t){const e=this.columnModel.getGridColumn(t.colKey);if(!e){console.warn(`AG Grid: no column found for ${t.colKey}`);return}const n={rowIndex:t.rowIndex,rowPinned:t.rowPinned||null,column:e};t.rowPinned==null&&this.ensureIndexVisible(t.rowIndex),this.ensureColumnVisible(t.colKey);const i=this.navigationService.getCellByPosition(n);i&&(this.focusService.isCellFocused(n)||this.focusService.setFocusedCell(n),i.startRowOrCellEdit(t.key))}addAggFunc(t,e){this.logDeprecation("v31.1","addAggFunc(key, func)","addAggFuncs({ key: func })"),this.aggFuncService&&this.aggFuncService.addAggFuncs({key:e})}addAggFuncs(t){this.aggFuncService&&this.aggFuncService.addAggFuncs(t)}clearAggFuncs(){this.aggFuncService&&this.aggFuncService.clear()}applyServerSideTransaction(t){if(!this.serverSideTransactionManager){this.logMissingRowModel("applyServerSideTransaction","serverSide");return}return this.serverSideTransactionManager.applyTransaction(t)}applyServerSideTransactionAsync(t,e){if(!this.serverSideTransactionManager){this.logMissingRowModel("applyServerSideTransactionAsync","serverSide");return}return this.serverSideTransactionManager.applyTransactionAsync(t,e)}applyServerSideRowData(t){var e,n;const r=(e=t.startRow)!=null?e:0,i=(n=t.route)!=null?n:[];if(r<0){console.warn(`AG Grid: invalid value ${t.startRow} for startRow, the value should be >= 0`);return}this.serverSideRowModel?this.serverSideRowModel.applyRowData(t.successParams,r,i):this.logMissingRowModel("setServerSideDatasource","serverSide")}retryServerSideLoads(){if(!this.serverSideRowModel){this.logMissingRowModel("retryServerSideLoads","serverSide");return}this.serverSideRowModel.retryLoads()}flushServerSideAsyncTransactions(){if(!this.serverSideTransactionManager){this.logMissingRowModel("flushServerSideAsyncTransactions","serverSide");return}return this.serverSideTransactionManager.flushAsyncTransactions()}applyTransaction(t){if(!this.clientSideRowModel){this.logMissingRowModel("applyTransaction","clientSide");return}return this.frameworkOverrides.wrapIncoming(()=>this.clientSideRowModel.updateRowData(t))}applyTransactionAsync(t,e){if(!this.clientSideRowModel){this.logMissingRowModel("applyTransactionAsync","clientSide");return}this.frameworkOverrides.wrapIncoming(()=>this.clientSideRowModel.batchUpdateRowData(t,e))}flushAsyncTransactions(){if(!this.clientSideRowModel){this.logMissingRowModel("flushAsyncTransactions","clientSide");return}this.frameworkOverrides.wrapIncoming(()=>this.clientSideRowModel.flushAsyncTransactions())}refreshInfiniteCache(){this.infiniteRowModel?this.infiniteRowModel.refreshCache():this.logMissingRowModel("refreshInfiniteCache","infinite")}purgeInfiniteCache(){this.infiniteRowModel?this.infiniteRowModel.purgeCache():this.logMissingRowModel("purgeInfiniteCache","infinite")}refreshServerSide(t){if(!this.serverSideRowModel){this.logMissingRowModel("refreshServerSide","serverSide");return}this.serverSideRowModel.refreshStore(t)}getServerSideGroupLevelState(){return this.serverSideRowModel?this.serverSideRowModel.getStoreState():(this.logMissingRowModel("getServerSideGroupLevelState","serverSide"),[])}getInfiniteRowCount(){if(this.infiniteRowModel)return this.infiniteRowModel.getRowCount();this.logMissingRowModel("getInfiniteRowCount","infinite")}isLastRowIndexKnown(){if(this.infiniteRowModel)return this.infiniteRowModel.isLastRowIndexKnown();this.logMissingRowModel("isLastRowIndexKnown","infinite")}getCacheBlockState(){return this.rowNodeBlockLoader.getBlockState()}getFirstDisplayedRow(){return this.logDeprecation("v31.1","getFirstDisplayedRow","getFirstDisplayedRowIndex"),this.getFirstDisplayedRowIndex()}getFirstDisplayedRowIndex(){return this.rowRenderer.getFirstVirtualRenderedRow()}getLastDisplayedRow(){return this.logDeprecation("v31.1","getLastDisplayedRow","getLastDisplayedRowIndex"),this.getLastDisplayedRowIndex()}getLastDisplayedRowIndex(){return this.rowRenderer.getLastVirtualRenderedRow()}getDisplayedRowAtIndex(t){return this.rowModel.getRow(t)}getDisplayedRowCount(){return this.rowModel.getRowCount()}paginationIsLastPageFound(){return this.paginationProxy.isLastPageFound()}paginationGetPageSize(){return this.paginationProxy.getPageSize()}paginationGetCurrentPage(){return this.paginationProxy.getCurrentPage()}paginationGetTotalPages(){return this.paginationProxy.getTotalPages()}paginationGetRowCount(){return this.paginationProxy.getMasterRowCount()}paginationGoToNextPage(){this.paginationProxy.goToNextPage()}paginationGoToPreviousPage(){this.paginationProxy.goToPreviousPage()}paginationGoToFirstPage(){this.paginationProxy.goToFirstPage()}paginationGoToLastPage(){this.paginationProxy.goToLastPage()}paginationGoToPage(t){this.paginationProxy.goToPage(t)}sizeColumnsToFit(t){typeof t=="number"?this.columnModel.sizeColumnsToFit(t,"api"):this.gridBodyCtrl.sizeColumnsToFit(t)}setColumnGroupOpened(t,e){this.columnModel.setColumnGroupOpened(t,e,"api")}getColumnGroup(t,e){return this.columnModel.getColumnGroup(t,e)}getProvidedColumnGroup(t){return this.columnModel.getProvidedColumnGroup(t)}getDisplayNameForColumn(t,e){return this.columnModel.getDisplayNameForColumn(t,e)||""}getDisplayNameForColumnGroup(t,e){return this.columnModel.getDisplayNameForColumnGroup(t,e)||""}getColumn(t){return this.columnModel.getPrimaryColumn(t)}getColumns(){return this.columnModel.getAllPrimaryColumns()}applyColumnState(t){return this.columnModel.applyColumnState(t,"api")}getColumnState(){return this.columnModel.getColumnState()}resetColumnState(){this.columnModel.resetColumnState("api")}getColumnGroupState(){return this.columnModel.getColumnGroupState()}setColumnGroupState(t){this.columnModel.setColumnGroupState(t,"api")}resetColumnGroupState(){this.columnModel.resetColumnGroupState("api")}isPinning(){return this.columnModel.isPinningLeft()||this.columnModel.isPinningRight()}isPinningLeft(){return this.columnModel.isPinningLeft()}isPinningRight(){return this.columnModel.isPinningRight()}getDisplayedColAfter(t){return this.columnModel.getDisplayedColAfter(t)}getDisplayedColBefore(t){return this.columnModel.getDisplayedColBefore(t)}setColumnVisible(t,e){this.logDeprecation("v31.1","setColumnVisible(key,visible)","setColumnsVisible([key],visible)"),this.columnModel.setColumnsVisible([t],e,"api")}setColumnsVisible(t,e){this.columnModel.setColumnsVisible(t,e,"api")}setColumnPinned(t,e){this.logDeprecation("v31.1","setColumnPinned(key,pinned)","setColumnsPinned([key],pinned)"),this.columnModel.setColumnsPinned([t],e,"api")}setColumnsPinned(t,e){this.columnModel.setColumnsPinned(t,e,"api")}getAllGridColumns(){return this.columnModel.getAllGridColumns()}getDisplayedLeftColumns(){return this.columnModel.getDisplayedLeftColumns()}getDisplayedCenterColumns(){return this.columnModel.getDisplayedCenterColumns()}getDisplayedRightColumns(){return this.columnModel.getDisplayedRightColumns()}getAllDisplayedColumns(){return this.columnModel.getAllDisplayedColumns()}getAllDisplayedVirtualColumns(){return this.columnModel.getViewportColumns()}moveColumn(t,e){this.logDeprecation("v31.1","moveColumn(key, toIndex)","moveColumns([key], toIndex)"),this.columnModel.moveColumns([t],e,"api")}moveColumnByIndex(t,e){this.columnModel.moveColumnByIndex(t,e,"api")}moveColumns(t,e){this.columnModel.moveColumns(t,e,"api")}moveRowGroupColumn(t,e){this.columnModel.moveRowGroupColumn(t,e,"api")}setColumnAggFunc(t,e){this.columnModel.setColumnAggFunc(t,e,"api")}setColumnWidth(t,e,n=!0,r="api"){this.logDeprecation("v31.1","setColumnWidth(col, width)","setColumnWidths([{key: col, newWidth: width}])"),this.columnModel.setColumnWidths([{key:t,newWidth:e}],!1,n,r)}setColumnWidths(t,e=!0,n="api"){this.columnModel.setColumnWidths(t,!1,e,n)}isPivotMode(){return this.columnModel.isPivotMode()}getPivotResultColumn(t,e){return this.columnModel.getSecondaryPivotColumn(t,e)}setValueColumns(t){this.columnModel.setValueColumns(t,"api")}getValueColumns(){return this.columnModel.getValueColumns()}removeValueColumn(t){this.logDeprecation("v31.1","removeValueColumn(colKey)","removeValueColumns([colKey])"),this.columnModel.removeValueColumns([t],"api")}removeValueColumns(t){this.columnModel.removeValueColumns(t,"api")}addValueColumn(t){this.logDeprecation("v31.1","addValueColumn(colKey)","addValueColumns([colKey])"),this.columnModel.addValueColumns([t],"api")}addValueColumns(t){this.columnModel.addValueColumns(t,"api")}setRowGroupColumns(t){this.columnModel.setRowGroupColumns(t,"api")}removeRowGroupColumn(t){this.logDeprecation("v31.1","removeRowGroupColumn(colKey)","removeRowGroupColumns([colKey])"),this.columnModel.removeRowGroupColumns([t],"api")}removeRowGroupColumns(t){this.columnModel.removeRowGroupColumns(t,"api")}addRowGroupColumn(t){this.logDeprecation("v31.1","addRowGroupColumn(colKey)","addRowGroupColumns([colKey])"),this.columnModel.addRowGroupColumns([t],"api")}addRowGroupColumns(t){this.columnModel.addRowGroupColumns(t,"api")}getRowGroupColumns(){return this.columnModel.getRowGroupColumns()}setPivotColumns(t){this.columnModel.setPivotColumns(t,"api")}removePivotColumn(t){this.logDeprecation("v31.1","removePivotColumn(colKey)","removePivotColumns([colKey])"),this.columnModel.removePivotColumns([t],"api")}removePivotColumns(t){this.columnModel.removePivotColumns(t,"api")}addPivotColumn(t){this.logDeprecation("v31.1","addPivotColumn(colKey)","addPivotColumns([colKey])"),this.columnModel.addPivotColumns([t],"api")}addPivotColumns(t){this.columnModel.addPivotColumns(t,"api")}getPivotColumns(){return this.columnModel.getPivotColumns()}getLeftDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeLeft()}getCenterDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeCentre()}getRightDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeRight()}getAllDisplayedColumnGroups(){return this.columnModel.getAllDisplayedTrees()}autoSizeColumn(t,e){return this.logDeprecation("v31.1","autoSizeColumn(key, skipHeader)","autoSizeColumns([key], skipHeader)"),this.columnModel.autoSizeColumns({columns:[t],skipHeader:e,source:"api"})}autoSizeColumns(t,e){this.columnModel.autoSizeColumns({columns:t,skipHeader:e,source:"api"})}autoSizeAllColumns(t){this.columnModel.autoSizeAllColumns("api",t)}setPivotResultColumns(t){this.columnModel.setSecondaryColumns(t,"api")}getPivotResultColumns(){return this.columnModel.getSecondaryColumns()}getState(){return this.stateService.getState()}getGridOption(t){return this.gos.get(t)}setGridOption(t,e){this.updateGridOptions({[t]:e})}updateGridOptions(t){this.gos.updateGridOptions({options:t})}__internalUpdateGridOptions(t,e){this.gos.updateGridOptions({options:t,force:e,source:"gridOptionsUpdated"})}deprecatedUpdateGridOption(t,e){we(`set${t.charAt(0).toUpperCase()}${t.slice(1,t.length)} is deprecated. Please use 'api.setGridOption('${t}', newValue)' or 'api.updateGridOptions({ ${t}: newValue })' instead.`),this.setGridOption(t,e)}setPivotMode(t){this.deprecatedUpdateGridOption("pivotMode",t)}setPinnedTopRowData(t){this.deprecatedUpdateGridOption("pinnedTopRowData",t)}setPinnedBottomRowData(t){this.deprecatedUpdateGridOption("pinnedBottomRowData",t)}setPopupParent(t){this.deprecatedUpdateGridOption("popupParent",t)}setSuppressModelUpdateAfterUpdateTransaction(t){this.deprecatedUpdateGridOption("suppressModelUpdateAfterUpdateTransaction",t)}setDataTypeDefinitions(t){this.deprecatedUpdateGridOption("dataTypeDefinitions",t)}setPagination(t){this.deprecatedUpdateGridOption("pagination",t)}paginationSetPageSize(t){this.deprecatedUpdateGridOption("paginationPageSize",t)}setSideBar(t){this.deprecatedUpdateGridOption("sideBar",t)}setSuppressClipboardPaste(t){this.deprecatedUpdateGridOption("suppressClipboardPaste",t)}setGroupRemoveSingleChildren(t){this.deprecatedUpdateGridOption("groupRemoveSingleChildren",t)}setGroupRemoveLowestSingleChildren(t){this.deprecatedUpdateGridOption("groupRemoveLowestSingleChildren",t)}setGroupDisplayType(t){this.deprecatedUpdateGridOption("groupDisplayType",t)}setGroupIncludeFooter(t){this.deprecatedUpdateGridOption("groupIncludeFooter",t)}setGroupIncludeTotalFooter(t){this.deprecatedUpdateGridOption("groupIncludeTotalFooter",t)}setRowClass(t){this.deprecatedUpdateGridOption("rowClass",t)}setDeltaSort(t){this.deprecatedUpdateGridOption("deltaSort",t)}setSuppressRowDrag(t){this.deprecatedUpdateGridOption("suppressRowDrag",t)}setSuppressMoveWhenRowDragging(t){this.deprecatedUpdateGridOption("suppressMoveWhenRowDragging",t)}setSuppressRowClickSelection(t){this.deprecatedUpdateGridOption("suppressRowClickSelection",t)}setEnableAdvancedFilter(t){this.deprecatedUpdateGridOption("enableAdvancedFilter",t)}setIncludeHiddenColumnsInAdvancedFilter(t){this.deprecatedUpdateGridOption("includeHiddenColumnsInAdvancedFilter",t)}setAdvancedFilterParent(t){this.deprecatedUpdateGridOption("advancedFilterParent",t)}setAdvancedFilterBuilderParams(t){this.deprecatedUpdateGridOption("advancedFilterBuilderParams",t)}setQuickFilter(t){we("setQuickFilter is deprecated. Please use 'api.setGridOption('quickFilterText', newValue)' or 'api.updateGridOptions({ quickFilterText: newValue })' instead."),this.gos.updateGridOptions({options:{quickFilterText:t}})}setExcludeHiddenColumnsFromQuickFilter(t){this.deprecatedUpdateGridOption("includeHiddenColumnsInQuickFilter",!t)}setIncludeHiddenColumnsInQuickFilter(t){this.deprecatedUpdateGridOption("includeHiddenColumnsInQuickFilter",t)}setQuickFilterParser(t){this.deprecatedUpdateGridOption("quickFilterParser",t)}setQuickFilterMatcher(t){this.deprecatedUpdateGridOption("quickFilterMatcher",t)}setAlwaysShowHorizontalScroll(t){this.deprecatedUpdateGridOption("alwaysShowHorizontalScroll",t)}setAlwaysShowVerticalScroll(t){this.deprecatedUpdateGridOption("alwaysShowVerticalScroll",t)}setFunctionsReadOnly(t){this.deprecatedUpdateGridOption("functionsReadOnly",t)}setColumnDefs(t,e="api"){we("setColumnDefs is deprecated. Please use 'api.setGridOption('columnDefs', newValue)' or 'api.updateGridOptions({ columnDefs: newValue })' instead."),this.gos.updateGridOptions({options:{columnDefs:t},source:e})}setAutoGroupColumnDef(t,e="api"){we("setAutoGroupColumnDef is deprecated. Please use 'api.setGridOption('autoGroupColumnDef', newValue)' or 'api.updateGridOptions({ autoGroupColumnDef: newValue })' instead."),this.gos.updateGridOptions({options:{autoGroupColumnDef:t},source:e})}setDefaultColDef(t,e="api"){we("setDefaultColDef is deprecated. Please use 'api.setGridOption('defaultColDef', newValue)' or 'api.updateGridOptions({ defaultColDef: newValue })' instead."),this.gos.updateGridOptions({options:{defaultColDef:t},source:e})}setColumnTypes(t,e="api"){we("setColumnTypes is deprecated. Please use 'api.setGridOption('columnTypes', newValue)' or 'api.updateGridOptions({ columnTypes: newValue })' instead."),this.gos.updateGridOptions({options:{columnTypes:t},source:e})}setTreeData(t){this.deprecatedUpdateGridOption("treeData",t)}setServerSideDatasource(t){this.deprecatedUpdateGridOption("serverSideDatasource",t)}setCacheBlockSize(t){this.deprecatedUpdateGridOption("cacheBlockSize",t)}setDatasource(t){this.deprecatedUpdateGridOption("datasource",t)}setViewportDatasource(t){this.deprecatedUpdateGridOption("viewportDatasource",t)}setRowData(t){this.deprecatedUpdateGridOption("rowData",t)}setEnableCellTextSelection(t){this.deprecatedUpdateGridOption("enableCellTextSelection",t)}setHeaderHeight(t){this.deprecatedUpdateGridOption("headerHeight",t)}setDomLayout(t){this.deprecatedUpdateGridOption("domLayout",t)}setFillHandleDirection(t){this.deprecatedUpdateGridOption("fillHandleDirection",t)}setGroupHeaderHeight(t){this.deprecatedUpdateGridOption("groupHeaderHeight",t)}setFloatingFiltersHeight(t){this.deprecatedUpdateGridOption("floatingFiltersHeight",t)}setPivotHeaderHeight(t){this.deprecatedUpdateGridOption("pivotHeaderHeight",t)}setPivotGroupHeaderHeight(t){this.deprecatedUpdateGridOption("pivotGroupHeaderHeight",t)}setAnimateRows(t){this.deprecatedUpdateGridOption("animateRows",t)}setIsExternalFilterPresent(t){this.deprecatedUpdateGridOption("isExternalFilterPresent",t)}setDoesExternalFilterPass(t){this.deprecatedUpdateGridOption("doesExternalFilterPass",t)}setNavigateToNextCell(t){this.deprecatedUpdateGridOption("navigateToNextCell",t)}setTabToNextCell(t){this.deprecatedUpdateGridOption("tabToNextCell",t)}setTabToNextHeader(t){this.deprecatedUpdateGridOption("tabToNextHeader",t)}setNavigateToNextHeader(t){this.deprecatedUpdateGridOption("navigateToNextHeader",t)}setRowGroupPanelShow(t){this.deprecatedUpdateGridOption("rowGroupPanelShow",t)}setGetGroupRowAgg(t){this.deprecatedUpdateGridOption("getGroupRowAgg",t)}setGetBusinessKeyForNode(t){this.deprecatedUpdateGridOption("getBusinessKeyForNode",t)}setGetChildCount(t){this.deprecatedUpdateGridOption("getChildCount",t)}setProcessRowPostCreate(t){this.deprecatedUpdateGridOption("processRowPostCreate",t)}setGetRowId(t){we("getRowId is a static property and can no longer be updated.")}setGetRowClass(t){this.deprecatedUpdateGridOption("getRowClass",t)}setIsFullWidthRow(t){this.deprecatedUpdateGridOption("isFullWidthRow",t)}setIsRowSelectable(t){this.deprecatedUpdateGridOption("isRowSelectable",t)}setIsRowMaster(t){this.deprecatedUpdateGridOption("isRowMaster",t)}setPostSortRows(t){this.deprecatedUpdateGridOption("postSortRows",t)}setGetDocument(t){this.deprecatedUpdateGridOption("getDocument",t)}setGetContextMenuItems(t){this.deprecatedUpdateGridOption("getContextMenuItems",t)}setGetMainMenuItems(t){this.deprecatedUpdateGridOption("getMainMenuItems",t)}setProcessCellForClipboard(t){this.deprecatedUpdateGridOption("processCellForClipboard",t)}setSendToClipboard(t){this.deprecatedUpdateGridOption("sendToClipboard",t)}setProcessCellFromClipboard(t){this.deprecatedUpdateGridOption("processCellFromClipboard",t)}setProcessPivotResultColDef(t){this.deprecatedUpdateGridOption("processPivotResultColDef",t)}setProcessPivotResultColGroupDef(t){this.deprecatedUpdateGridOption("processPivotResultColGroupDef",t)}setPostProcessPopup(t){this.deprecatedUpdateGridOption("postProcessPopup",t)}setInitialGroupOrderComparator(t){this.deprecatedUpdateGridOption("initialGroupOrderComparator",t)}setGetChartToolbarItems(t){this.deprecatedUpdateGridOption("getChartToolbarItems",t)}setPaginationNumberFormatter(t){this.deprecatedUpdateGridOption("paginationNumberFormatter",t)}setGetServerSideGroupLevelParams(t){this.deprecatedUpdateGridOption("getServerSideGroupLevelParams",t)}setIsServerSideGroupOpenByDefault(t){this.deprecatedUpdateGridOption("isServerSideGroupOpenByDefault",t)}setIsApplyServerSideTransaction(t){this.deprecatedUpdateGridOption("isApplyServerSideTransaction",t)}setIsServerSideGroup(t){this.deprecatedUpdateGridOption("isServerSideGroup",t)}setGetServerSideGroupKey(t){this.deprecatedUpdateGridOption("getServerSideGroupKey",t)}setGetRowStyle(t){this.deprecatedUpdateGridOption("getRowStyle",t)}setGetRowHeight(t){this.deprecatedUpdateGridOption("getRowHeight",t)}};w([O("rowRenderer")],We.prototype,"rowRenderer",2);w([O("navigationService")],We.prototype,"navigationService",2);w([O("filterManager")],We.prototype,"filterManager",2);w([O("columnModel")],We.prototype,"columnModel",2);w([O("selectionService")],We.prototype,"selectionService",2);w([O("gridOptionsService")],We.prototype,"gos",2);w([O("valueService")],We.prototype,"valueService",2);w([O("alignedGridsService")],We.prototype,"alignedGridsService",2);w([O("eventService")],We.prototype,"eventService",2);w([O("pinnedRowModel")],We.prototype,"pinnedRowModel",2);w([O("context")],We.prototype,"context",2);w([O("rowModel")],We.prototype,"rowModel",2);w([O("sortController")],We.prototype,"sortController",2);w([O("paginationProxy")],We.prototype,"paginationProxy",2);w([O("focusService")],We.prototype,"focusService",2);w([O("dragAndDropService")],We.prototype,"dragAndDropService",2);w([O("menuService")],We.prototype,"menuService",2);w([O("valueCache")],We.prototype,"valueCache",2);w([O("animationFrameService")],We.prototype,"animationFrameService",2);w([O("ctrlsService")],We.prototype,"ctrlsService",2);w([O("overlayService")],We.prototype,"overlayService",2);w([O("stateService")],We.prototype,"stateService",2);w([O("expansionService")],We.prototype,"expansionService",2);w([O("apiEventService")],We.prototype,"apiEventService",2);w([O("frameworkOverrides")],We.prototype,"frameworkOverrides",2);w([O("undoRedoService")],We.prototype,"undoRedoService",2);w([O("rowNodeBlockLoader")],We.prototype,"rowNodeBlockLoader",2);w([ut("csvCreator")],We.prototype,"csvCreator",2);w([ut("excelCreator")],We.prototype,"excelCreator",2);w([ut("rangeService")],We.prototype,"rangeService",2);w([ut("clipboardService")],We.prototype,"clipboardService",2);w([ut("aggFuncService")],We.prototype,"aggFuncService",2);w([ut("statusBarService")],We.prototype,"statusBarService",2);w([ut("chartService")],We.prototype,"chartService",2);w([ut("ssrmTransactionManager")],We.prototype,"serverSideTransactionManager",2);w([ut("sideBarService")],We.prototype,"sideBarService",2);w([te],We.prototype,"init",1);We=w([ce("gridApi")],We);var jr=class extends ee{constructor(){super(...arguments),this.quickFilter=null,this.quickFilterParts=null}postConstruct(){this.addManagedListener(this.eventService,x.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>this.resetQuickFilterCache()),this.addManagedListener(this.eventService,x.EVENT_NEW_COLUMNS_LOADED,()=>this.resetQuickFilterCache()),this.addManagedListener(this.eventService,x.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.resetQuickFilterCache()),this.addManagedListener(this.eventService,x.EVENT_COLUMN_VISIBLE,()=>{this.gos.get("includeHiddenColumnsInQuickFilter")||this.resetQuickFilterCache()}),this.addManagedPropertyListener("quickFilterText",t=>this.setQuickFilter(t.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onQuickFilterColumnConfigChanged()),this.quickFilter=this.parseQuickFilter(this.gos.get("quickFilterText")),this.parser=this.gos.get("quickFilterParser"),this.matcher=this.gos.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setQuickFilterParserAndMatcher())}isQuickFilterPresent(){return this.quickFilter!==null}doesRowPassQuickFilter(t){const e=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(e,t):this.quickFilterParts.every(n=>e?this.doesRowPassQuickFilterCache(t,n):this.doesRowPassQuickFilterNoCache(t,n))}resetQuickFilterCache(){this.rowModel.forEachNode(t=>t.quickFilterAggregateText=null)}setQuickFilterParts(){const{quickFilter:t,parser:e}=this;t?this.quickFilterParts=e?e(t):t.split(" "):this.quickFilterParts=null}parseQuickFilter(t){return J(t)?this.gos.isRowModelType("clientSide")?t.toUpperCase():(console.warn("AG Grid - Quick filtering only works with the Client-Side Row Model"),null):null}setQuickFilter(t){if(t!=null&&typeof t!="string"){console.warn(`AG Grid - Grid option quickFilterText only supports string inputs, received: ${typeof t}`);return}const e=this.parseQuickFilter(t);this.quickFilter!==e&&(this.quickFilter=e,this.setQuickFilterParts(),this.dispatchEvent({type:jr.EVENT_QUICK_FILTER_CHANGED}))}setQuickFilterParserAndMatcher(){const t=this.gos.get("quickFilterParser"),e=this.gos.get("quickFilterMatcher"),n=t!==this.parser||e!==this.matcher;this.parser=t,this.matcher=e,n&&(this.setQuickFilterParts(),this.dispatchEvent({type:jr.EVENT_QUICK_FILTER_CHANGED}))}onQuickFilterColumnConfigChanged(){this.columnModel.refreshQuickFilterColumns(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchEvent({type:jr.EVENT_QUICK_FILTER_CHANGED})}doesRowPassQuickFilterNoCache(t,e){return this.columnModel.getAllColumnsForQuickFilter().some(r=>{const i=this.getQuickFilterTextForColumn(r,t);return J(i)&&i.indexOf(e)>=0})}doesRowPassQuickFilterCache(t,e){return this.checkGenerateQuickFilterAggregateText(t),t.quickFilterAggregateText.indexOf(e)>=0}doesRowPassQuickFilterMatcher(t,e){let n;t?(this.checkGenerateQuickFilterAggregateText(e),n=e.quickFilterAggregateText):n=this.getQuickFilterAggregateText(e);const{quickFilterParts:r,matcher:i}=this;return i(r,n)}checkGenerateQuickFilterAggregateText(t){t.quickFilterAggregateText||(t.quickFilterAggregateText=this.getQuickFilterAggregateText(t))}getQuickFilterTextForColumn(t,e){let n=this.valueService.getValue(t,e,!0);const r=t.getColDef();if(r.getQuickFilterText){const i=this.gos.addGridCommonParams({value:n,node:e,data:e.data,column:t,colDef:r});n=r.getQuickFilterText(i)}return J(n)?n.toString().toUpperCase():null}getQuickFilterAggregateText(t){const e=[];return this.columnModel.getAllColumnsForQuickFilter().forEach(r=>{const i=this.getQuickFilterTextForColumn(r,t);J(i)&&e.push(i)}),e.join(jr.QUICK_FILTER_SEPARATOR)}};jr.EVENT_QUICK_FILTER_CHANGED="quickFilterChanged";jr.QUICK_FILTER_SEPARATOR=`
`;w([O("valueService")],jr.prototype,"valueService",2);w([O("columnModel")],jr.prototype,"columnModel",2);w([O("rowModel")],jr.prototype,"rowModel",2);w([te],jr.prototype,"postConstruct",1);jr=w([ce("quickFilterService")],jr);var ji=class extends ee{constructor(){super(...arguments),this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[],this.advancedFilterModelUpdateQueue=[]}init(){var t,e,n;this.addManagedListener(this.eventService,x.EVENT_GRID_COLUMNS_CHANGED,()=>this.onColumnsChanged()),this.addManagedListener(this.eventService,x.EVENT_COLUMN_VALUE_CHANGED,()=>this.refreshFiltersForAggregations()),this.addManagedListener(this.eventService,x.EVENT_COLUMN_PIVOT_CHANGED,()=>this.refreshFiltersForAggregations()),this.addManagedListener(this.eventService,x.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>this.refreshFiltersForAggregations()),this.addManagedListener(this.eventService,x.EVENT_NEW_COLUMNS_LOADED,()=>this.updateAdvancedFilterColumns()),this.addManagedListener(this.eventService,x.EVENT_COLUMN_VISIBLE,()=>this.updateAdvancedFilterColumns()),this.addManagedListener(this.eventService,x.EVENT_ROW_DATA_UPDATED,()=>this.onNewRowsLoaded("rowDataUpdated")),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.addManagedPropertyListener("advancedFilterModel",r=>this.setAdvancedFilterModel(r.currentValue)),this.addManagedListener(this.eventService,x.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,({enabled:r})=>this.onAdvancedFilterEnabledChanged(r)),this.addManagedListener(this.eventService,x.EVENT_DATA_TYPES_INFERRED,()=>this.processFilterModelUpdateQueue()),this.addManagedListener(this.quickFilterService,jr.EVENT_QUICK_FILTER_CHANGED,()=>this.onFilterChanged({source:"quickFilter"})),this.initialFilterModel=me({},(n=(e=(t=this.gos.get("initialState"))==null?void 0:t.filter)==null?void 0:e.filterModel)!=null?n:{})}isExternalFilterPresentCallback(){const t=this.gos.getCallback("isExternalFilterPresent");return typeof t=="function"?t({}):!1}doesExternalFilterPass(t){const e=this.gos.get("doesExternalFilterPass");return typeof e=="function"?e(t):!1}setFilterModel(t,e="api"){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}if(this.dataTypeService.isPendingInference()){this.filterModelUpdateQueue.push({model:t,source:e});return}const n=[],r=this.getFilterModel();if(t){const i=GI(Object.keys(t));this.allColumnFilters.forEach((s,o)=>{const a=t[o];n.push(this.setModelOnFilterWrapper(s.filterPromise,a)),i.delete(o)}),i.forEach(s=>{const o=this.columnModel.getPrimaryColumn(s)||this.columnModel.getGridColumn(s);if(!o){console.warn("AG Grid: setFilterModel() - no column found for colId: "+s);return}if(!o.isFilterAllowed()){console.warn("AG Grid: setFilterModel() - unable to fully apply model, filtering disabled for colId: "+s);return}const a=this.getOrCreateFilterWrapper(o,"NO_UI");if(!a){console.warn("AG-Grid: setFilterModel() - unable to fully apply model, unable to create filter for colId: "+s);return}n.push(this.setModelOnFilterWrapper(a.filterPromise,t[s]))})}else this.allColumnFilters.forEach(i=>{n.push(this.setModelOnFilterWrapper(i.filterPromise,null))});an.all(n).then(()=>{const i=this.getFilterModel(),s=[];this.allColumnFilters.forEach((o,a)=>{const l=r?r[a]:null,u=i?i[a]:null;be.jsonEquals(l,u)||s.push(o.column)}),s.length>0&&this.onFilterChanged({columns:s,source:e})})}setModelOnFilterWrapper(t,e){return new an(n=>{t.then(r=>{typeof r.setModel!="function"&&(console.warn("AG Grid: filter missing setModel method, which is needed for setFilterModel"),n()),(r.setModel(e)||an.resolve()).then(()=>n())})})}getFilterModel(){const t={};return this.allColumnFilters.forEach((e,n)=>{const r=this.getModelFromFilterWrapper(e);J(r)&&(t[n]=r)}),t}getModelFromFilterWrapper(t){var e;const r=t.filterPromise.resolveNow(null,i=>i);return r==null?(e=this.initialFilterModel[t.column.getColId()])!=null?e:null:typeof r.getModel!="function"?(console.warn("AG Grid: filter API missing getModel method, which is needed for getFilterModel"),null):r.getModel()}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}isExternalFilterPresent(){return this.externalFilterPresent}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}isAdvancedFilterPresent(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()}onAdvancedFilterEnabledChanged(t){var e;t?this.allColumnFilters.size&&(this.allColumnFilters.forEach(n=>this.disposeFilterWrapper(n,"advancedFilterEnabled")),this.onFilterChanged({source:"advancedFilter"})):(e=this.advancedFilterService)!=null&&e.isFilterPresent()&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvancedFilterEnabled(){var t;return!!((t=this.advancedFilterService)!=null&&t.isEnabled())}isAdvancedFilterHeaderActive(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()}doAggregateFiltersPass(t,e){return this.doColumnFiltersPass(t,e,!0)}updateActiveFilters(){this.activeColumnFilters.length=0,this.activeAggregateFilters.length=0;const t=r=>r?r.isFilterActive?r.isFilterActive():(console.warn("AG Grid: Filter is missing isFilterActive() method"),!1):!1,e=!!this.gos.getGroupAggFiltering(),n=r=>{if(!r.isPrimary())return!0;const s=!this.columnModel.isPivotActive();return!r.isValueActive()||!s?!1:this.columnModel.isPivotMode()?!0:e};this.allColumnFilters.forEach(r=>{if(r.filterPromise.resolveNow(!1,t)){const i=r.filterPromise.resolveNow(null,s=>s);n(r.column)?this.activeAggregateFilters.push(i):this.activeColumnFilters.push(i)}})}updateFilterFlagInColumns(t,e){this.allColumnFilters.forEach(n=>{const r=n.filterPromise.resolveNow(!1,i=>i.isFilterActive());n.column.setFilterActive(r,t,e)})}isAnyFilterPresent(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}doColumnFiltersPass(t,e,n){const{data:r,aggData:i}=t,s=n?this.activeAggregateFilters:this.activeColumnFilters,o=n?i:r;for(let a=0;a<s.length;a++){const l=s[a];if(!(l==null||l===e)){if(typeof l.doesFilterPass!="function")throw new Error("Filter is missing method doesFilterPass");if(!l.doesFilterPass({node:t,data:o}))return!1}}return!0}resetQuickFilterCache(){this.quickFilterService.resetQuickFilterCache()}refreshFiltersForAggregations(){this.gos.getGroupAggFiltering()&&this.onFilterChanged()}callOnFilterChangedOutsideRenderCycle(t){const e=()=>this.onFilterChanged(t);this.rowRenderer.isRefreshInProgress()?setTimeout(e,0):e()}onFilterChanged(t={}){const{source:e,filterInstance:n,additionalEventAttributes:r,columns:i}=t;this.updateDependantFilters(),this.updateActiveFilters(),this.updateFilterFlagInColumns("filterChanged",r),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.allColumnFilters.forEach(o=>{o.filterPromise&&o.filterPromise.then(a=>{a&&a!==n&&a.onAnyFilterChanged&&a.onAnyFilterChanged()})});const s={source:e,type:x.EVENT_FILTER_CHANGED,columns:i||[]};r&&Br(s,r),this.processingFilterChange=!0,this.eventService.dispatchEvent(s),this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){var t;return!((t=this.gos.get("allowShowChangeAfterFilter"))!=null?t:!1)&&this.processingFilterChange}isQuickFilterPresent(){return this.quickFilterService.isQuickFilterPresent()}updateAggFiltering(){this.aggFiltering=!!this.gos.getGroupAggFiltering()}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.columnModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(t,e){return this.doesRowPassFilter({rowNode:e,filterInstanceToSkip:t})}doesRowPassAggregateFilters(t){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(t.rowNode)||this.isAggregateFilterPresent()&&!this.doAggregateFiltersPass(t.rowNode,t.filterInstanceToSkip))}doesRowPassFilter(t){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(t.rowNode)||this.isExternalFilterPresent()&&!this.doesExternalFilterPass(t.rowNode)||this.isColumnFilterPresent()&&!this.doColumnFiltersPass(t.rowNode,t.filterInstanceToSkip)||this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(t.rowNode))}onNewRowsLoaded(t){this.allColumnFilters.forEach(e=>{e.filterPromise.then(n=>{n.onNewRowsLoaded&&n.onNewRowsLoaded()})}),this.updateFilterFlagInColumns(t,{afterDataChange:!0}),this.updateActiveFilters()}createValueGetter(t){return({node:e})=>this.valueService.getValue(t,e,!0)}createGetValue(t){return(e,n)=>{const r=n?this.columnModel.getGridColumn(n):t;return r?this.valueService.getValue(r,e,!0):void 0}}getFilterComponent(t,e,n=!0){var r;if(n)return((r=this.getOrCreateFilterWrapper(t,e))==null?void 0:r.filterPromise)||null;const i=this.cachedFilter(t);return i?i.filterPromise:null}isFilterActive(t){const e=this.cachedFilter(t);return!!e&&e.filterPromise.resolveNow(!1,n=>n.isFilterActive())}getOrCreateFilterWrapper(t,e){if(!t.isFilterAllowed())return null;let n=this.cachedFilter(t);return n||(n=this.createFilterWrapper(t,e),this.setColumnFilterWrapper(t,n)),n}cachedFilter(t){return this.allColumnFilters.get(t.getColId())}getDefaultFilter(t){let e;if(nt.__isRegistered("@ag-grid-enterprise/set-filter",this.context.getGridId()))e="agSetColumnFilter";else{const n=this.dataTypeService.getBaseDataType(t);n==="number"?e="agNumberColumnFilter":n==="date"||n==="dateString"?e="agDateColumnFilter":e="agTextColumnFilter"}return e}getDefaultFloatingFilter(t){let e;if(nt.__isRegistered("@ag-grid-enterprise/set-filter",this.context.getGridId()))e="agSetColumnFloatingFilter";else{const n=this.dataTypeService.getBaseDataType(t);n==="number"?e="agNumberColumnFloatingFilter":n==="date"||n==="dateString"?e="agDateColumnFloatingFilter":e="agTextColumnFloatingFilter"}return e}createFilterInstance(t){const e=this.getDefaultFilter(t),n=t.getColDef();let r;const i=Dt(me({},this.createFilterParams(t,n)),{filterModifiedCallback:()=>this.filterModifiedCallbackFactory(r,t)(),filterChangedCallback:o=>this.filterChangedCallbackFactory(r,t)(o),doesRowPassOtherFilter:o=>this.doesRowPassOtherFilters(r,o)}),s=this.userComponentFactory.getFilterDetails(n,i,e);return s?{filterPromise:()=>{const o=s.newAgStackInstance();return o&&o.then(a=>r=a),o},compDetails:s}:{filterPromise:null,compDetails:null}}createFilterParams(t,e){return this.gos.addGridCommonParams({column:t,colDef:uI(e),rowModel:this.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},valueGetter:this.createValueGetter(t),getValue:this.createGetValue(t),doesRowPassOtherFilter:()=>!0})}createFilterWrapper(t,e){var n;const r={column:t,filterPromise:null,compiledElement:null,compDetails:null},{filterPromise:i,compDetails:s}=this.createFilterInstance(t);return r.filterPromise=(n=i==null?void 0:i())!=null?n:null,r.compDetails=s,r}onColumnsChanged(){const t=[];this.allColumnFilters.forEach((e,n)=>{let r;e.column.isPrimary()?r=this.columnModel.getPrimaryColumn(n):r=this.columnModel.getGridColumn(n),!(r&&r===e.column)&&(t.push(e.column),this.disposeFilterWrapper(e,"columnChanged"),this.disposeColumnListener(n))}),t.length>0?this.onFilterChanged({columns:t,source:"api"}):this.updateDependantFilters()}updateDependantFilters(){const t=this.columnModel.getGroupAutoColumns();t==null||t.forEach(e=>{e.getColDef().filter==="agGroupColumnFilter"&&this.getOrCreateFilterWrapper(e,"NO_UI")})}isFilterAllowed(t){var e,n;if(this.isAdvancedFilterEnabled()||!t.isFilterAllowed())return!1;const i=this.allColumnFilters.get(t.getColId());return(n=(e=i==null?void 0:i.filterPromise)==null?void 0:e.resolveNow(!0,s=>typeof(s==null?void 0:s.isFilterAllowed)=="function"?s==null?void 0:s.isFilterAllowed():!0))!=null?n:!0}getFloatingFilterCompDetails(t,e){const n=l=>{const u=this.getFilterComponent(t,"NO_UI");u!=null&&u.then(c=>{l(Wl(c))})},r=t.getColDef(),i=Dt(me({},this.createFilterParams(t,r)),{filterChangedCallback:()=>n(l=>this.filterChangedCallbackFactory(l,t)())}),s=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(r,y_,i);let o=this.userComponentFactory.getDefaultFloatingFilterType(r,()=>this.getDefaultFloatingFilter(t));o==null&&(o="agReadOnlyFloatingFilter");const a={column:t,filterParams:s,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(t),parentFilterInstance:n,showParentFilter:e,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(r,a,o)}getCurrentFloatingFilterParentModel(t){const e=this.getFilterComponent(t,"NO_UI",!1);return e?e.resolveNow(null,n=>n&&n.getModel()):null}destroyFilter(t,e="api"){const n=t.getColId(),r=this.allColumnFilters.get(n);this.disposeColumnListener(n),delete this.initialFilterModel[n],r&&(this.disposeFilterWrapper(r,e),this.onFilterChanged({columns:[t],source:"api"}))}disposeColumnListener(t){const e=this.allColumnListeners.get(t);e&&(this.allColumnListeners.delete(t),e())}disposeFilterWrapper(t,e){t.filterPromise.then(n=>{this.getContext().destroyBean(n),t.column.setFilterActive(!1,"filterDestroyed"),this.allColumnFilters.delete(t.column.getColId());const r={type:x.EVENT_FILTER_DESTROYED,source:e,column:t.column};this.eventService.dispatchEvent(r)})}filterModifiedCallbackFactory(t,e){return()=>{const n={type:x.EVENT_FILTER_MODIFIED,column:e,filterInstance:t};this.eventService.dispatchEvent(n)}}filterChangedCallbackFactory(t,e){return n=>{var r;const i=(r=n==null?void 0:n.source)!=null?r:"api",s={filter:t,additionalEventAttributes:n,columns:[e],source:i};this.callOnFilterChangedOutsideRenderCycle(s)}}checkDestroyFilter(t){const e=this.allColumnFilters.get(t);if(!e)return;const n=e.column,{compDetails:r}=n.isFilterAllowed()?this.createFilterInstance(n):{compDetails:null};if(this.areFilterCompsDifferent(e.compDetails,r)){this.destroyFilter(n,"paramsUpdated");return}const i=n.getColDef().filterParams;if(!e.filterPromise){this.destroyFilter(n,"paramsUpdated");return}e.filterPromise.then(s=>{(s!=null&&s.refresh?s.refresh(me(Dt(me({},this.createFilterParams(n,n.getColDef())),{filterModifiedCallback:this.filterModifiedCallbackFactory(s,n),filterChangedCallback:this.filterChangedCallbackFactory(s,n),doesRowPassOtherFilter:a=>this.doesRowPassOtherFilters(s,a)}),i)):!0)===!1&&this.destroyFilter(n,"paramsUpdated")})}setColumnFilterWrapper(t,e){const n=t.getColId();this.allColumnFilters.set(n,e),this.allColumnListeners.set(n,this.addManagedListener(t,ft.EVENT_COL_DEF_CHANGED,()=>this.checkDestroyFilter(n)))}areFilterCompsDifferent(t,e){if(!e||!t)return!0;const{componentClass:n}=t,{componentClass:r}=e;return!(n===r||(n==null?void 0:n.render)&&(r==null?void 0:r.render)&&n.render===r.render)}getAdvancedFilterModel(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null}setAdvancedFilterModel(t){if(this.isAdvancedFilterEnabled()){if(this.dataTypeService.isPendingInference()){this.advancedFilterModelUpdateQueue.push(t);return}this.advancedFilterService.setModel(t??null),this.onFilterChanged({source:"advancedFilter"})}}showAdvancedFilterBuilder(t){this.isAdvancedFilterEnabled()&&this.advancedFilterService.getCtrl().toggleFilterBuilder(t,!0)}updateAdvancedFilterColumns(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){return this.isAdvancedFilterEnabled()?!1:this.columnModel.getAllGridColumns().some(e=>e.getColDef().floatingFilter)}getFilterInstance(t,e){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}const n=this.getFilterInstanceImpl(t,i=>{if(!e)return;const s=Wl(i);e(s)});return Wl(n)}getColumnFilterInstance(t){return new Promise(e=>{this.getFilterInstance(t,n=>{e(n)})})}getFilterInstanceImpl(t,e){const n=this.columnModel.getPrimaryColumn(t);if(!n)return;const r=this.getFilterComponent(n,"NO_UI"),i=r&&r.resolveNow(null,s=>s);return i?setTimeout(e,0,i):r&&r.then(s=>{e(s)}),i}warnAdvancedFilters(){we("Column Filter API methods have been disabled as Advanced Filters are enabled.")}setupAdvancedFilterHeaderComp(t){var e;(e=this.advancedFilterService)==null||e.getCtrl().setupHeaderComp(t)}getHeaderRowCount(){return this.isAdvancedFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach(({model:t,source:e})=>this.setFilterModel(t,e)),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach(({key:t,model:e,resolve:n})=>{this.setColumnFilterModel(t,e).then(()=>n())}),this.columnFilterModelUpdateQueue=[],this.advancedFilterModelUpdateQueue.forEach(t=>this.setAdvancedFilterModel(t)),this.advancedFilterModelUpdateQueue=[]}getColumnFilterModel(t){const e=this.getFilterWrapper(t);return e?this.getModelFromFilterWrapper(e):null}setColumnFilterModel(t,e){if(this.isAdvancedFilterEnabled())return this.warnAdvancedFilters(),Promise.resolve();if(this.dataTypeService.isPendingInference()){let s=()=>{};const o=new Promise(a=>{s=a});return this.columnFilterModelUpdateQueue.push({key:t,model:e,resolve:s}),o}const n=this.columnModel.getPrimaryColumn(t),r=n?this.getOrCreateFilterWrapper(n,"NO_UI"):null;return r?(s=>new Promise(o=>{s.then(a=>o(a))}))(this.setModelOnFilterWrapper(r.filterPromise,e)):Promise.resolve()}getFilterWrapper(t){var e;const n=this.columnModel.getPrimaryColumn(t);return n&&(e=this.cachedFilter(n))!=null?e:null}destroy(){super.destroy(),this.allColumnFilters.forEach(t=>this.disposeFilterWrapper(t,"gridDestroyed")),this.allColumnListeners.clear()}};w([O("valueService")],ji.prototype,"valueService",2);w([O("columnModel")],ji.prototype,"columnModel",2);w([O("rowModel")],ji.prototype,"rowModel",2);w([O("userComponentFactory")],ji.prototype,"userComponentFactory",2);w([O("rowRenderer")],ji.prototype,"rowRenderer",2);w([O("dataTypeService")],ji.prototype,"dataTypeService",2);w([O("quickFilterService")],ji.prototype,"quickFilterService",2);w([ut("advancedFilterService")],ji.prototype,"advancedFilterService",2);w([te],ji.prototype,"init",1);ji=w([ce("filterManager")],ji);var CE=class extends Ae{constructor(t,e){super('<div class="ag-filter"></div>'),this.column=t,this.source=e,this.filterWrapper=null}postConstruct(){this.createFilter(!0),this.addManagedListener(this.eventService,x.EVENT_FILTER_DESTROYED,this.onFilterDestroyed.bind(this))}hasFilter(){return!!this.filterWrapper}getFilter(){var t,e;return(e=(t=this.filterWrapper)==null?void 0:t.filterPromise)!=null?e:null}afterInit(){var t,e,n;return(n=(e=(t=this.filterWrapper)==null?void 0:t.filterPromise)==null?void 0:e.then(()=>{}))!=null?n:an.resolve()}afterGuiAttached(t){var e,n;(n=(e=this.filterWrapper)==null?void 0:e.filterPromise)==null||n.then(r=>{var i;(i=r==null?void 0:r.afterGuiAttached)==null||i.call(r,t)})}afterGuiDetached(){var t,e;(e=(t=this.filterWrapper)==null?void 0:t.filterPromise)==null||e.then(n=>{var r;(r=n==null?void 0:n.afterGuiDetached)==null||r.call(n)})}createFilter(t){var e;const{column:n,source:r}=this;this.filterWrapper=this.filterManager.getOrCreateFilterWrapper(n,r),(e=this.filterWrapper)!=null&&e.filterPromise&&this.filterWrapper.filterPromise.then(i=>{let s=i.getGui();if(J(s)||console.warn(`AG Grid: getGui method from filter returned ${s}, it should be a DOM element or an HTML template string.`),typeof s=="string"&&(s=Wr(s)),this.appendChild(s),t){const o={type:x.EVENT_FILTER_OPENED,column:n,source:r,eGui:this.getGui()};this.eventService.dispatchEvent(o)}})}onFilterDestroyed(t){(t.source==="api"||t.source==="paramsUpdated")&&t.column.getId()===this.column.getId()&&this.columnModel.getPrimaryColumn(this.column)&&(en(this.getGui()),this.createFilter())}destroy(){this.filterWrapper=null,super.destroy()}};w([O("filterManager")],CE.prototype,"filterManager",2);w([O("columnModel")],CE.prototype,"columnModel",2);w([te],CE.prototype,"postConstruct",1);var QI=class extends Ae{constructor(t,e){super(t),this.ctrl=e}getCtrl(){return this.ctrl}},Ku=class dz extends QI{constructor(e){super(dz.TEMPLATE,e)}postConstruct(){const e=this.getGui(),n={addOrRemoveCssClass:(r,i)=>this.addOrRemoveCssClass(r,i),addOrRemoveBodyCssClass:(r,i)=>this.eFloatingFilterBody.classList.toggle(r,i),setButtonWrapperDisplayed:r=>Ue(this.eButtonWrapper,r),setCompDetails:r=>this.setCompDetails(r),getFloatingFilterComp:()=>this.compPromise,setWidth:r=>e.style.width=r,setMenuIcon:r=>this.eButtonShowMainFilter.appendChild(r)};this.ctrl.setComp(n,e,this.eButtonShowMainFilter,this.eFloatingFilterBody)}setCompDetails(e){if(!e){this.destroyFloatingFilterComp(),this.compPromise=null;return}this.compPromise=e.newAgStackInstance(),this.compPromise.then(n=>this.afterCompCreated(n))}destroyFloatingFilterComp(){this.floatingFilterComp&&(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))}afterCompCreated(e){if(e){if(!this.isAlive()){this.destroyBean(e);return}this.destroyFloatingFilterComp(),this.floatingFilterComp=e,this.eFloatingFilterBody.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached()}}};Ku.TEMPLATE=`<div class="ag-header-cell ag-floating-filter" role="gridcell">
            <div ref="eFloatingFilterBody" role="presentation"></div>
            <div class="ag-floating-filter-button ag-hidden" ref="eButtonWrapper" role="presentation">
                <button type="button" class="ag-button ag-floating-filter-button-button" ref="eButtonShowMainFilter" tabindex="-1"></button>
            </div>
        </div>`;w([ne("eFloatingFilterBody")],Ku.prototype,"eFloatingFilterBody",2);w([ne("eButtonWrapper")],Ku.prototype,"eButtonWrapper",2);w([ne("eButtonShowMainFilter")],Ku.prototype,"eButtonShowMainFilter",2);w([te],Ku.prototype,"postConstruct",1);w([Pr],Ku.prototype,"destroyFloatingFilterComp",1);var ore=Ku,wE=class extends ee{constructor(t){super(),this.view=t}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const t=this.getDomLayout(),e={autoHeight:t==="autoHeight",normal:t==="normal",print:t==="print"},n=e.autoHeight?"ag-layout-auto-height":e.print?"ag-layout-print":"ag-layout-normal";this.view.updateLayoutClasses(n,e)}getDomLayout(){var t;const e=(t=this.gos.get("domLayout"))!=null?t:"normal";return["normal","print","autoHeight"].indexOf(e)===-1?(we(`${e} is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.`),"normal"):e}};w([te],wE.prototype,"postConstruct",1);var Wo=class extends ee{constructor(t){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.eBodyViewport=t,this.resetLastHScrollDebounced=yr(()=>this.lastScrollSource[1]=null,500),this.resetLastVScrollDebounced=yr(()=>this.lastScrollSource[0]=null,500)}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this)),this.ctrlsService.whenReady(t=>{this.centerRowsCtrl=t.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}addScrollListener(){const{fakeHScrollComp:t,fakeVScrollComp:e}=this.ctrlsService.getParams();this.addManagedListener(this.centerRowsCtrl.getViewportElement(),"scroll",this.onHScroll.bind(this)),t.onScrollCallback(this.onFakeHScroll.bind(this));const n=this.gos.get("debounceVerticalScrollbar"),r=n?yr(this.onVScroll.bind(this),100):this.onVScroll.bind(this),i=n?yr(this.onFakeVScroll.bind(this),100):this.onFakeVScroll.bind(this);this.addManagedListener(this.eBodyViewport,"scroll",r),e.onScrollCallback(i)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(t){if(this.centerRowsCtrl==null)return;t===void 0&&(t=this.centerRowsCtrl.getCenterViewportScrollLeft());const n=this.enableRtl?t:-t,{topCenter:r,stickyTopCenter:i,stickyBottomCenter:s,centerHeader:o,bottomCenter:a,fakeHScrollComp:l}=this.ctrlsService.getParams();o.setHorizontalScroll(-n),a.setContainerTranslateX(n),r.setContainerTranslateX(n),i.setContainerTranslateX(n),s.setContainerTranslateX(n);const u=this.centerRowsCtrl.getViewportElement(),c=this.lastScrollSource[1]===0;t=Math.abs(t),c?l.setScrollPosition(t):og(u,t,this.enableRtl)}isControllingScroll(t,e){return this.lastScrollSource[e]==null?(this.lastScrollSource[e]=t,!0):this.lastScrollSource[e]===t}onFakeHScroll(){this.isControllingScroll(1,1)&&this.onHScrollCommon(1)}onHScroll(){this.isControllingScroll(0,1)&&this.onHScrollCommon(0)}onHScrollCommon(t){const e=this.centerRowsCtrl.getViewportElement(),{scrollLeft:n}=e;if(this.shouldBlockScrollUpdate(1,n,!0))return;let r;t===0?r=sg(e,this.enableRtl):r=this.ctrlsService.get("fakeHScrollComp").getScrollPosition(),this.doHorizontalScroll(Math.round(r)),this.resetLastHScrollDebounced()}onFakeVScroll(){this.isControllingScroll(1,0)&&this.onVScrollCommon(1)}onVScroll(){this.isControllingScroll(0,0)&&this.onVScrollCommon(0)}onVScrollCommon(t){let e;t===0?e=this.eBodyViewport.scrollTop:e=this.ctrlsService.get("fakeVScrollComp").getScrollPosition(),!this.shouldBlockScrollUpdate(0,e,!0)&&(this.animationFrameService.setScrollTop(e),this.nextScrollTop=e,t===0?this.ctrlsService.get("fakeVScrollComp").setScrollPosition(e):this.eBodyViewport.scrollTop=e,this.gos.get("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())}doHorizontalScroll(t){const e=this.ctrlsService.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===t&&t===e||(this.scrollLeft=t,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(t),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(t){const e={type:x.EVENT_BODY_SCROLL,direction:t===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(e),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(()=>{const n=Dt(me({},e),{type:x.EVENT_BODY_SCROLL_END});this.eventService.dispatchEvent(n)},100)}shouldBlockScrollUpdate(t,e,n=!1){return n&&!Ho()?!1:t===0?this.shouldBlockVerticalScroll(e):this.shouldBlockHorizontalScroll(e)}shouldBlockVerticalScroll(t){const e=xm(this.eBodyViewport),{scrollHeight:n}=this.eBodyViewport;return t<0||t+e>n}shouldBlockHorizontalScroll(t){const e=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:n}=this.centerRowsCtrl.getViewportElement();if(this.enableRtl&&ig()){if(t>0)return!0}else if(t<0)return!0;return Math.abs(t)+e>n}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){this.scrollLeft!==this.centerRowsCtrl.getCenterViewportScrollLeft()&&this.onHScrollCommon(0)}scrollGridIfNeeded(){const t=this.scrollTop!=this.nextScrollTop;return t&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),t}setHorizontalScrollPosition(t,e=!1){const r=this.centerRowsCtrl.getViewportElement().scrollWidth-this.centerRowsCtrl.getCenterWidth();!e&&this.shouldBlockScrollUpdate(1,t)&&(this.enableRtl&&ig()?t=t>0?0:r:t=Math.min(Math.max(t,0),r)),og(this.centerRowsCtrl.getViewportElement(),Math.abs(t),this.enableRtl),this.doHorizontalScroll(t)}setVerticalScrollPosition(t){this.eBodyViewport.scrollTop=t}getVScrollPosition(){return this.lastScrollTop=this.eBodyViewport.scrollTop,this.lastOffsetHeight=this.eBodyViewport.offsetHeight,{top:this.lastScrollTop,bottom:this.lastScrollTop+this.lastOffsetHeight}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowsCtrl.isHorizontalScrollShowing()}scrollHorizontally(t){const e=this.centerRowsCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(e+t),this.centerRowsCtrl.getViewportElement().scrollLeft-e}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(t,e=null){const n=this.rowModel.getRowCount();let r=-1;for(let i=0;i<n;i++){const s=this.rowModel.getRow(i);if(typeof t=="function"){if(s&&t(s)){r=i;break}}else if(t===s||t===s.data){r=i;break}}r>=0&&this.ensureIndexVisible(r,e)}ensureIndexVisible(t,e){if(this.gos.isDomLayout("print"))return;const n=this.paginationProxy.getRowCount();if(typeof t!="number"||t<0||t>=n){console.warn("AG Grid: Invalid row index for ensureIndexVisible: "+t);return}const i=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.getFrameworkOverrides().wrapIncoming(()=>{i||this.paginationProxy.goToPageWithIndex(t);const s=this.ctrlsService.getGridBodyCtrl(),o=s.getStickyTopHeight(),a=s.getStickyBottomHeight(),l=this.paginationProxy.getRow(t);let u;do{const c=l.rowTop,d=l.rowHeight,h=this.paginationProxy.getPixelOffset(),f=l.rowTop-h,g=f+l.rowHeight,m=this.getVScrollPosition(),v=this.heightScaler.getDivStretchOffset(),C=m.top+v,y=m.bottom+v,S=y-C,_=this.heightScaler.getScrollPositionForPixel(f),E=this.heightScaler.getScrollPositionForPixel(g-S),R=Math.min((_+E)/2,f),b=C+o>f,A=y-a<g;let P=null;e==="top"?P=_:e==="bottom"?P=E:e==="middle"?P=R:b?P=_-o:A&&(P=E+a),P!==null&&(this.setVerticalScrollPosition(P),this.rowRenderer.redraw({afterScroll:!0})),u=c!==l.rowTop||d!==l.rowHeight}while(u);this.animationFrameService.flushAllFrames()})}ensureColumnVisible(t,e="auto"){const n=this.columnModel.getGridColumn(t);if(!n||n.isPinned()||!this.columnModel.isColumnDisplayed(n))return;const r=this.getPositionedHorizontalScroll(n,e);this.getFrameworkOverrides().wrapIncoming(()=>{r!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(r),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()})}setScrollPosition(t,e){this.getFrameworkOverrides().wrapIncoming(()=>{this.centerRowsCtrl.setCenterViewportScrollLeft(e),this.setVerticalScrollPosition(t),this.rowRenderer.redraw({afterScroll:!0}),this.animationFrameService.flushAllFrames()})}getPositionedHorizontalScroll(t,e){const{columnBeforeStart:n,columnAfterEnd:r}=this.isColumnOutsideViewport(t),i=this.centerRowsCtrl.getCenterWidth()<t.getActualWidth(),s=this.centerRowsCtrl.getCenterWidth(),o=this.enableRtl;let a=(o?n:r)||i,l=o?r:n;e!=="auto"&&(a=e==="start",l=e==="end");const u=e==="middle";if(a||l||u){const{colLeft:c,colMiddle:d,colRight:h}=this.getColumnBounds(t);return u?d-s/2:a?o?h:c:o?c-s:h-s}return null}isColumnOutsideViewport(t){const{start:e,end:n}=this.getViewportBounds(),{colLeft:r,colRight:i}=this.getColumnBounds(t),s=this.enableRtl,o=s?e>i:n<i,a=s?n<r:e>r;return{columnBeforeStart:o,columnAfterEnd:a}}getColumnBounds(t){const e=this.enableRtl,n=this.columnModel.getBodyContainerWidth(),r=t.getActualWidth(),i=t.getLeft(),s=e?-1:1,o=e?n-i:i,a=o+r*s,l=o+r/2*s;return{colLeft:o,colMiddle:l,colRight:a}}getViewportBounds(){const t=this.centerRowsCtrl.getCenterWidth(),e=this.centerRowsCtrl.getCenterViewportScrollLeft(),n=e,r=t+e;return{start:n,end:r,width:t}}};w([O("ctrlsService")],Wo.prototype,"ctrlsService",2);w([O("animationFrameService")],Wo.prototype,"animationFrameService",2);w([O("paginationProxy")],Wo.prototype,"paginationProxy",2);w([O("rowModel")],Wo.prototype,"rowModel",2);w([O("rowContainerHeightService")],Wo.prototype,"heightScaler",2);w([O("rowRenderer")],Wo.prototype,"rowRenderer",2);w([O("columnModel")],Wo.prototype,"columnModel",2);w([te],Wo.prototype,"postConstruct",1);var hz="ag-force-vertical-scroll",are="ag-selectable",lre="ag-column-moving",pr=class extends ee{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}getScrollFeature(){return this.bodyScrollFeature}getBodyViewportElement(){return this.eBodyViewport}setComp(t,e,n,r,i,s,o){this.comp=t,this.eGridBody=e,this.eBodyViewport=n,this.eTop=r,this.eBottom=i,this.eStickyTop=s,this.eStickyBottom=o,this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",a=>this.setCellTextSelection(a.currentValue)),this.createManagedBean(new wE(this.comp)),this.bodyScrollFeature=this.createManagedBean(new Wo(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([r,n,i,s,o]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.filterManager.setupAdvancedFilterHeaderComp(r),this.ctrlsService.register("gridBodyCtrl",this)}getComp(){return this.comp}addEventListeners(){this.addManagedListener(this.eventService,x.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))}addFocusListeners(t){t.forEach(e=>{this.addManagedListener(e,"focusin",n=>{const{target:r}=n,i=tu(r,"ag-root",e);e.classList.toggle("ag-has-focus",!i)}),this.addManagedListener(e,"focusout",n=>{const{target:r,relatedTarget:i}=n,s=e.contains(i),o=tu(i,"ag-root",e);tu(r,"ag-root",e)||(!s||o)&&e.classList.remove("ag-has-focus")})})}setColumnMovingCss(t){this.comp.setColumnMovingCss(lre,t)}setCellTextSelection(t=!1){this.comp.setCellSelectableCss(are,t)}onScrollVisibilityChanged(){const t=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(t),this.setStickyWidth(t),this.setStickyBottomOffsetBottom();const e=t&&this.gos.getScrollbarWidth()||0,n=RI()?16:0,r=`calc(100% + ${e+n}px)`;this.animationFrameService.requestAnimationFrame(()=>this.comp.setBodyViewportWidth(r))}onGridColumnsChanged(){const t=this.columnModel.getAllGridColumns();this.comp.setColumnCount(t.length)}disableBrowserDragging(){this.addManagedListener(this.eGridBody,"dragstart",t=>{if(t.target instanceof HTMLImageElement)return t.preventDefault(),!1})}addStopEditingWhenGridLosesFocus(){if(!this.gos.get("stopEditingWhenCellsLoseFocus"))return;const t=n=>{const r=n.relatedTarget;if(WC(r)===null){this.rowRenderer.stopEditing();return}let i=e.some(s=>s.contains(r))&&this.mouseEventService.isElementInThisGrid(r);if(!i){const s=this.popupService;i=s.getActivePopups().some(o=>o.contains(r))||s.isElementWithinCustomPopup(r)}i||this.rowRenderer.stopEditing()},e=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom];e.forEach(n=>this.addManagedListener(n,"focusout",t))}updateRowCount(){const t=this.headerNavigationService.getHeaderRowCount()+this.filterManager.getHeaderRowCount(),e=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,n=e===-1?-1:t+e;this.comp.setRowCount(n)}registerBodyViewportResizeListener(t){this.comp.registerBodyViewportResizeListener(t)}setVerticalScrollPaddingVisible(t){const e=t?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(e)}isVerticalScrollShowing(){const t=this.gos.get("alwaysShowVerticalScroll"),e=t?hz:null,n=this.gos.isDomLayout("normal");return this.comp.setAlwaysVerticalScrollClass(e,t),t||n&&lU(this.eBodyViewport)}setupRowAnimationCssClass(){const t=()=>{const e=this.gos.isAnimateRows()&&!this.rowContainerHeightService.isStretching(),n=e?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(n,e)};t(),this.addManagedListener(this.eventService,x.EVENT_HEIGHT_SCALE_CHANGED,t),this.addManagedPropertyListener("animateRows",t)}getGridBodyElement(){return this.eGridBody}addBodyViewportListener(){const t=this.onBodyViewportContextMenu.bind(this);this.addManagedListener(this.eBodyViewport,"contextmenu",t),this.mockContextMenuForIPad(t),this.addManagedListener(this.eBodyViewport,"wheel",this.onBodyViewportWheel.bind(this)),this.addManagedListener(this.eStickyTop,"wheel",this.onStickyWheel.bind(this)),this.addManagedListener(this.eStickyBottom,"wheel",this.onStickyWheel.bind(this)),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){const t=this.eBodyViewport.querySelector(".ag-full-width-container"),e=this.eBodyViewport.querySelector(".ag-center-cols-viewport");t&&e&&this.addManagedListener(t,"wheel",n=>this.onFullWidthContainerWheel(n,e))}onFullWidthContainerWheel(t,e){!t.deltaX||Math.abs(t.deltaY)>Math.abs(t.deltaX)||!this.mouseEventService.isEventFromThisGrid(t)||(t.preventDefault(),e.scrollBy({left:t.deltaX}))}onBodyViewportContextMenu(t,e,n){if(!t&&!n)return;this.gos.get("preventDefaultOnContextMenu")&&(t||n).preventDefault();const{target:r}=t||e;(r===this.eBodyViewport||r===this.ctrlsService.get("center").getViewportElement())&&this.menuService.showContextMenu({mouseEvent:t,touchEvent:n,value:null,anchorToElement:this.eGridBody})}mockContextMenuForIPad(t){if(!Ho())return;const e=new Dn(this.eBodyViewport),n=r=>{t(void 0,r.touchStart,r.touchEvent)};this.addManagedListener(e,Dn.EVENT_LONG_TAP,n),this.addDestroyFunc(()=>e.destroy())}onBodyViewportWheel(t){this.gos.get("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&t.preventDefault()}onStickyWheel(t){t.preventDefault(),t.offsetY&&this.scrollVertically(t.deltaY)}getGui(){return this.eGridBody}scrollVertically(t){const e=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(e+t),this.eBodyViewport.scrollTop-e}addRowDragListener(){this.rowDragFeature=this.createManagedBean(new Ri(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature)}getRowDragFeature(){return this.rowDragFeature}onPinnedRowDataChanged(){this.setFloatingHeights()}setFloatingHeights(){const{pinnedRowModel:t}=this;let e=t.getPinnedTopTotalHeight(),n=t.getPinnedBottomTotalHeight();this.comp.setTopHeight(e),this.comp.setBottomHeight(n),this.comp.setTopDisplay(e?"inherit":"none"),this.comp.setBottomDisplay(n?"inherit":"none"),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(t=0){this.comp.setStickyTopHeight(`${t}px`),this.stickyTopHeight=t}getStickyTopHeight(){return this.stickyTopHeight}setStickyBottomHeight(t=0){this.comp.setStickyBottomHeight(`${t}px`),this.stickyBottomHeight=t}getStickyBottomHeight(){return this.stickyBottomHeight}setStickyWidth(t){if(!t)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{const e=this.gos.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${e}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${e}px)`)}}onHeaderHeightChanged(){this.setStickyTopOffsetTop()}setStickyTopOffsetTop(){const e=this.ctrlsService.get("gridHeaderCtrl").getHeaderHeight()+this.filterManager.getHeaderHeight(),n=this.pinnedRowModel.getPinnedTopTotalHeight();let r=0;e>0&&(r+=e),n>0&&(r+=n),r>0&&(r+=1),this.comp.setStickyTopTop(`${r}px`)}setStickyBottomOffsetBottom(){const t=this.pinnedRowModel.getPinnedBottomTotalHeight(),n=this.scrollVisibleService.isHorizontalScrollShowing()&&this.gos.getScrollbarWidth()||0,r=t+n;this.comp.setStickyBottomBottom(`${r}px`)}sizeColumnsToFit(t,e){const r=this.isVerticalScrollShowing()?this.gos.getScrollbarWidth():0,s=Bu(this.eGridBody)-r;if(s>0){this.columnModel.sizeColumnsToFit(s,"sizeColumnsToFit",!1,t);return}e===void 0?window.setTimeout(()=>{this.sizeColumnsToFit(t,100)},0):e===100?window.setTimeout(()=>{this.sizeColumnsToFit(t,500)},100):e===500?window.setTimeout(()=>{this.sizeColumnsToFit(t,-1)},500):console.warn("AG Grid: tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")}addScrollEventListener(t){this.eBodyViewport.addEventListener("scroll",t,{passive:!0})}removeScrollEventListener(t){this.eBodyViewport.removeEventListener("scroll",t)}};w([O("animationFrameService")],pr.prototype,"animationFrameService",2);w([O("rowContainerHeightService")],pr.prototype,"rowContainerHeightService",2);w([O("ctrlsService")],pr.prototype,"ctrlsService",2);w([O("columnModel")],pr.prototype,"columnModel",2);w([O("scrollVisibleService")],pr.prototype,"scrollVisibleService",2);w([O("menuService")],pr.prototype,"menuService",2);w([O("headerNavigationService")],pr.prototype,"headerNavigationService",2);w([O("dragAndDropService")],pr.prototype,"dragAndDropService",2);w([O("pinnedRowModel")],pr.prototype,"pinnedRowModel",2);w([O("rowRenderer")],pr.prototype,"rowRenderer",2);w([O("popupService")],pr.prototype,"popupService",2);w([O("mouseEventService")],pr.prototype,"mouseEventService",2);w([O("rowModel")],pr.prototype,"rowModel",2);w([O("filterManager")],pr.prototype,"filterManager",2);var Ep="ag-cell-range-selected",ure="ag-cell-range-chart",cre="ag-cell-range-single-cell",dre="ag-cell-range-chart-category",hre="ag-cell-range-handle",pre="ag-cell-range-top",fre="ag-cell-range-right",gre="ag-cell-range-bottom",mre="ag-cell-range-left",vre=class{constructor(t,e){this.beans=t,this.rangeService=t.rangeService,this.selectionHandleFactory=t.selectionHandleFactory,this.cellCtrl=e}setComp(t,e){this.cellComp=t,this.eGui=e,this.onRangeSelectionChanged()}onRangeSelectionChanged(){this.cellComp&&(this.rangeCount=this.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(Ep,this.rangeCount!==0),this.cellComp.addOrRemoveCssClass(`${Ep}-1`,this.rangeCount===1),this.cellComp.addOrRemoveCssClass(`${Ep}-2`,this.rangeCount===2),this.cellComp.addOrRemoveCssClass(`${Ep}-3`,this.rangeCount===3),this.cellComp.addOrRemoveCssClass(`${Ep}-4`,this.rangeCount>=4),this.cellComp.addOrRemoveCssClass(ure,this.hasChartRange),Rd(this.eGui,this.rangeCount>0?!0:void 0),this.cellComp.addOrRemoveCssClass(cre,this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())}updateRangeBorders(){const t=this.getRangeBorders(),e=this.isSingleCell(),n=!e&&t.top,r=!e&&t.right,i=!e&&t.bottom,s=!e&&t.left;this.cellComp.addOrRemoveCssClass(pre,n),this.cellComp.addOrRemoveCssClass(fre,r),this.cellComp.addOrRemoveCssClass(gre,i),this.cellComp.addOrRemoveCssClass(mre,s)}isSingleCell(){const{rangeService:t}=this.beans;return this.rangeCount===1&&!!t&&!t.isMoreThanOneCell()}getHasChartRange(){const{rangeService:t}=this.beans;if(!this.rangeCount||!t)return!1;const e=t.getCellRanges();return e.length>0&&e.every(n=>vi([1,0],n.type))}updateRangeBordersIfRangeCount(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())}getRangeBorders(){const t=this.beans.gos.get("enableRtl");let e=!1,n=!1,r=!1,i=!1;const s=this.cellCtrl.getCellPosition().column,o=this.beans.columnModel;let a,l;t?(a=o.getDisplayedColAfter(s),l=o.getDisplayedColBefore(s)):(a=o.getDisplayedColBefore(s),l=o.getDisplayedColAfter(s));const u=this.rangeService.getCellRanges().filter(c=>this.rangeService.isCellInSpecificRange(this.cellCtrl.getCellPosition(),c));a||(i=!0),l||(n=!0);for(let c=0;c<u.length&&!(e&&n&&r&&i);c++){const d=u[c],h=this.rangeService.getRangeStartRow(d),f=this.rangeService.getRangeEndRow(d);!e&&this.beans.rowPositionUtils.sameRow(h,this.cellCtrl.getCellPosition())&&(e=!0),!r&&this.beans.rowPositionUtils.sameRow(f,this.cellCtrl.getCellPosition())&&(r=!0),!i&&a&&d.columns.indexOf(a)<0&&(i=!0),!n&&l&&d.columns.indexOf(l)<0&&(n=!0)}return{top:e,right:n,bottom:r,left:i}}refreshHandle(){if(this.beans.context.isDestroyed())return;const t=this.shouldHaveSelectionHandle();this.selectionHandle&&!t&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),t&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass(hre,!!this.selectionHandle)}shouldHaveSelectionHandle(){const t=this.beans.gos,e=this.rangeService.getCellRanges(),n=e.length;if(this.rangeCount<1||n<1)return!1;const r=Je(e),i=this.cellCtrl.getCellPosition(),s=t.get("enableFillHandle")&&!this.cellCtrl.isSuppressFillHandle(),o=t.get("enableRangeHandle");let a=n===1&&!this.cellCtrl.isEditing()&&(s||o);if(this.hasChartRange){const u=e[0].type===1&&this.rangeService.isCellInSpecificRange(i,e[0]);this.cellComp.addOrRemoveCssClass(dre,u),a=r.type===0}return a&&r.endRow!=null&&this.rangeService.isContiguousRange(r)&&this.rangeService.isBottomRightCell(r,i)}addSelectionHandle(){const t=this.beans.gos,e=Je(this.rangeService.getCellRanges()).type,r=t.get("enableFillHandle")&&Te(e)?0:1;this.selectionHandle&&this.selectionHandle.getType()!==r&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.selectionHandleFactory.createSelectionHandle(r)),this.selectionHandle.refresh(this.cellCtrl)}destroy(){this.beans.context.destroyBean(this.selectionHandle)}},yre=class extends ee{constructor(t,e){super(),this.cellCtrl=t,this.beans=e,this.column=t.getColumn(),this.rowNode=t.getRowNode()}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListener(this.beans.eventService,x.EVENT_NEW_COLUMNS_LOADED,()=>this.onNewColumnsLoaded())}setComp(t){this.eGui=t,this.setupColSpan(),this.setupRowSpan(),this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()}onNewColumnsLoaded(){const t=this.column.getRowSpan(this.rowNode);this.rowSpan!==t&&(this.rowSpan=t,this.applyRowSpan(!0))}onDisplayColumnsChanged(){const t=this.getColSpanningList();Os(this.colsSpanning,t)||(this.colsSpanning=t,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListener(this.beans.eventService,x.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayColumnsChanged.bind(this)),this.addManagedListener(this.beans.eventService,x.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onWidthChanged.bind(this)))}onWidthChanged(){if(!this.eGui)return;const t=this.getCellWidth();this.eGui.style.width=`${t}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((t,e)=>t+e.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){const t=this.column.getColSpan(this.rowNode),e=[];if(t===1)e.push(this.column);else{let n=this.column;const r=this.column.getPinned();for(let i=0;n&&i<t&&(e.push(n),n=this.beans.columnModel.getDisplayedColAfter(n),!(!n||Te(n)||r!==n.getPinned()));i++);}return e}onLeftChanged(){if(!this.eGui)return;const t=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=t+"px"}getCellLeft(){let t;return this.beans.gos.get("enableRtl")&&this.colsSpanning?t=Je(this.colsSpanning):t=this.column,t.getLeft()}modifyLeftForPrintLayout(t){if(!this.cellCtrl.isPrintLayout()||this.column.getPinned()==="left")return t;const e=this.beans.columnModel.getDisplayedColumnsLeftWidth();if(this.column.getPinned()==="right"){const n=this.beans.columnModel.getBodyContainerWidth();return e+n+(t||0)}return e+(t||0)}applyRowSpan(t){if(this.rowSpan===1&&!t)return;const n=this.beans.gos.getRowHeightAsNumber()*this.rowSpan;this.eGui.style.height=`${n}px`,this.eGui.style.zIndex="1"}destroy(){super.destroy()}},Cre=class extends ee{constructor(t,e){super(),this.staticClasses=[],this.cellCtrl=t,this.beans=e,this.column=t.getColumn(),this.rowNode=t.getRowNode()}setComp(t){this.cellComp=t,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const t=this.column.getColDef(),{cellClassRules:e}=t,n=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:t,column:this.column,rowIndex:this.rowNode.rowIndex});this.beans.stylingService.processClassRules(e===this.cellClassRules?void 0:this.cellClassRules,e,n,r=>this.cellComp.addOrRemoveCssClass(r,!0),r=>this.cellComp.addOrRemoveCssClass(r,!1)),this.cellClassRules=e}applyUserStyles(){const t=this.column.getColDef();if(!t.cellStyle)return;let e;if(typeof t.cellStyle=="function"){const n=this.beans.gos.addGridCommonParams({column:this.column,value:this.cellCtrl.getValue(),colDef:t,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex}),r=t.cellStyle;e=r(n)}else e=t.cellStyle;e&&this.cellComp.setUserStyles(e)}applyClassesFromColDef(){const t=this.column.getColDef(),e=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:t,rowIndex:this.rowNode.rowIndex});this.staticClasses.length&&this.staticClasses.forEach(n=>this.cellComp.addOrRemoveCssClass(n,!1)),this.staticClasses=this.beans.stylingService.getStaticCellClasses(t,e),this.staticClasses.length&&this.staticClasses.forEach(n=>this.cellComp.addOrRemoveCssClass(n,!0))}destroy(){super.destroy()}},Ne=class{postConstruct(){this.gos.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.gos.isRowModelType("serverSide")&&(this.serverSideRowModel=this.rowModel)}};w([O("resizeObserverService")],Ne.prototype,"resizeObserverService",2);w([O("paginationProxy")],Ne.prototype,"paginationProxy",2);w([O("context")],Ne.prototype,"context",2);w([O("gridOptionsService")],Ne.prototype,"gos",2);w([O("environment")],Ne.prototype,"environment",2);w([O("rowRenderer")],Ne.prototype,"rowRenderer",2);w([O("valueService")],Ne.prototype,"valueService",2);w([O("eventService")],Ne.prototype,"eventService",2);w([O("columnModel")],Ne.prototype,"columnModel",2);w([O("headerNavigationService")],Ne.prototype,"headerNavigationService",2);w([O("navigationService")],Ne.prototype,"navigationService",2);w([O("columnAnimationService")],Ne.prototype,"columnAnimationService",2);w([O("focusService")],Ne.prototype,"focusService",2);w([O("popupService")],Ne.prototype,"popupService",2);w([O("stylingService")],Ne.prototype,"stylingService",2);w([O("columnHoverService")],Ne.prototype,"columnHoverService",2);w([O("userComponentFactory")],Ne.prototype,"userComponentFactory",2);w([O("userComponentRegistry")],Ne.prototype,"userComponentRegistry",2);w([O("animationFrameService")],Ne.prototype,"animationFrameService",2);w([O("dragService")],Ne.prototype,"dragService",2);w([O("dragAndDropService")],Ne.prototype,"dragAndDropService",2);w([O("sortController")],Ne.prototype,"sortController",2);w([O("filterManager")],Ne.prototype,"filterManager",2);w([O("rowContainerHeightService")],Ne.prototype,"rowContainerHeightService",2);w([O("frameworkOverrides")],Ne.prototype,"frameworkOverrides",2);w([O("cellPositionUtils")],Ne.prototype,"cellPositionUtils",2);w([O("rowPositionUtils")],Ne.prototype,"rowPositionUtils",2);w([O("selectionService")],Ne.prototype,"selectionService",2);w([O("rowCssClassCalculator")],Ne.prototype,"rowCssClassCalculator",2);w([O("rowModel")],Ne.prototype,"rowModel",2);w([O("ctrlsService")],Ne.prototype,"ctrlsService",2);w([O("ctrlsFactory")],Ne.prototype,"ctrlsFactory",2);w([O("agStackComponentsRegistry")],Ne.prototype,"agStackComponentsRegistry",2);w([O("valueCache")],Ne.prototype,"valueCache",2);w([O("rowNodeEventThrottle")],Ne.prototype,"rowNodeEventThrottle",2);w([O("localeService")],Ne.prototype,"localeService",2);w([O("syncService")],Ne.prototype,"syncService",2);w([O("ariaAnnouncementService")],Ne.prototype,"ariaAnnouncementService",2);w([ut("rangeService")],Ne.prototype,"rangeService",2);w([ut("selectionHandleFactory")],Ne.prototype,"selectionHandleFactory",2);w([te],Ne.prototype,"postConstruct",1);Ne=w([ce("beans")],Ne);var wre=class extends Ne{constructor(t,e,n){super(),this.cellCtrl=t,this.beans=e,this.column=n}onMouseEvent(t,e){if(!ps(e))switch(t){case"click":this.onCellClicked(e);break;case"mousedown":case"touchstart":this.onMouseDown(e);break;case"dblclick":this.onCellDoubleClicked(e);break;case"mouseout":this.onMouseOut(e);break;case"mouseover":this.onMouseOver(e);break}}onCellClicked(t){if(this.isDoubleClickOnIPad()){this.onCellDoubleClicked(t),t.preventDefault();return}const{eventService:e,rangeService:n,gos:r}=this.beans,i=t.ctrlKey||t.metaKey;n&&i&&n.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&n.intersectLastRange(!0);const s=this.cellCtrl.createEvent(t,x.EVENT_CELL_CLICKED);e.dispatchEvent(s);const o=this.column.getColDef();o.onCellClicked&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{o.onCellClicked(s)})},0),(r.get("singleClickEdit")||o.singleClickEdit)&&!r.get("suppressClickEdit")&&!(t.shiftKey&&(n==null?void 0:n.getCellRanges().length)!=0)&&this.cellCtrl.startRowOrCellEdit()}isDoubleClickOnIPad(){if(!Ho()||pI("dblclick"))return!1;const t=new Date().getTime(),e=t-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=t,e}onCellDoubleClicked(t){const e=this.column.getColDef(),n=this.cellCtrl.createEvent(t,x.EVENT_CELL_DOUBLE_CLICKED);this.beans.eventService.dispatchEvent(n),typeof e.onCellDoubleClicked=="function"&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{e.onCellDoubleClicked(n)})},0),!this.beans.gos.get("singleClickEdit")&&!this.beans.gos.get("suppressClickEdit")&&this.cellCtrl.startRowOrCellEdit(null,t)}onMouseDown(t){const{ctrlKey:e,metaKey:n,shiftKey:r}=t,i=t.target,{cellCtrl:s,beans:o}=this,{eventService:a,rangeService:l,focusService:u}=o;if(this.isRightClickInExistingRange(t))return;const c=l&&l.getCellRanges().length!=0;if(!r||!c){const d=js()&&!s.isEditing()&&!xI(i);s.focusCell(d)}if(r&&c&&!u.isCellFocused(s.getCellPosition())){t.preventDefault();const d=u.getFocusedCell();if(d){const{column:h,rowIndex:f,rowPinned:g}=d,m=o.rowRenderer.getRowByPosition({rowIndex:f,rowPinned:g}),v=m==null?void 0:m.getCellCtrl(h);v!=null&&v.isEditing()&&v.stopEditing(),u.setFocusedCell({column:h,rowIndex:f,rowPinned:g,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(i)){if(l){const d=this.cellCtrl.getCellPosition();if(r)l.extendLatestRangeToCell(d);else{const h=e||n;l.setRangeToCell(d,h)}}a.dispatchEvent(this.cellCtrl.createEvent(t,x.EVENT_CELL_MOUSE_DOWN))}}isRightClickInExistingRange(t){const{rangeService:e}=this.beans;if(e){const n=e.isCellInAnyRange(this.cellCtrl.getCellPosition()),r=t.button===2||t.ctrlKey&&this.beans.gos.get("allowContextMenuWithControlKey");if(n&&r)return!0}return!1}containsWidget(t){return tu(t,"ag-selection-checkbox",3)}onMouseOut(t){if(this.mouseStayingInsideCell(t))return;const e=this.cellCtrl.createEvent(t,x.EVENT_CELL_MOUSE_OUT);this.beans.eventService.dispatchEvent(e),this.beans.columnHoverService.clearMouseOver()}onMouseOver(t){if(this.mouseStayingInsideCell(t))return;const e=this.cellCtrl.createEvent(t,x.EVENT_CELL_MOUSE_OVER);this.beans.eventService.dispatchEvent(e),this.beans.columnHoverService.setMouseOver([this.column])}mouseStayingInsideCell(t){if(!t.target||!t.relatedTarget)return!1;const e=this.cellCtrl.getGui(),n=e.contains(t.target),r=e.contains(t.relatedTarget);return n&&r}destroy(){}},Sre=class extends ee{constructor(t,e,n,r,i){super(),this.cellCtrl=t,this.beans=e,this.rowNode=r,this.rowCtrl=i}setComp(t){this.eGui=t}onKeyDown(t){const e=t.key;switch(e){case H.ENTER:this.onEnterKeyDown(t);break;case H.F2:this.onF2KeyDown(t);break;case H.ESCAPE:this.onEscapeKeyDown(t);break;case H.TAB:this.onTabKeyDown(t);break;case H.BACKSPACE:case H.DELETE:this.onBackspaceOrDeleteKeyDown(e,t);break;case H.DOWN:case H.UP:case H.RIGHT:case H.LEFT:this.onNavigationKeyDown(t,e);break}}onNavigationKeyDown(t,e){this.cellCtrl.isEditing()||(t.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(t):this.beans.navigationService.navigateToNextCell(t,e,this.cellCtrl.getCellPosition(),!0),t.preventDefault())}onShiftRangeSelect(t){if(!this.beans.rangeService)return;const e=this.beans.rangeService.extendLatestRangeInDirection(t);e&&this.beans.navigationService.ensureCellVisible(e)}onTabKeyDown(t){this.beans.navigationService.onTabKeyDown(this.cellCtrl,t)}onBackspaceOrDeleteKeyDown(t,e){var n;const{cellCtrl:r,beans:i,rowNode:s}=this,{gos:o,rangeService:a,eventService:l}=i;if(!r.isEditing()){if(l.dispatchEvent({type:x.EVENT_KEY_SHORTCUT_CHANGED_CELL_START}),yU(t,o.get("enableCellEditingOnBackspace"))){if(a&&o.get("enableRangeSelection"))a.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(r.isCellEditable()){const u=r.getColumn(),c=(n=this.beans.valueService.parseValue(u,s,"",s.getValueFromValueService(u)))!=null?n:null;s.setDataValue(u,c,"cellClear")}}else r.startRowOrCellEdit(t,e);l.dispatchEvent({type:x.EVENT_KEY_SHORTCUT_CHANGED_CELL_END})}}onEnterKeyDown(t){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,t.shiftKey);else if(this.beans.gos.get("enterNavigatesVertically")){const e=t.shiftKey?H.UP:H.DOWN;this.beans.navigationService.navigateToNextCell(null,e,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(H.ENTER,t),this.cellCtrl.isEditing()&&t.preventDefault()}onF2KeyDown(t){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(H.F2,t)}onEscapeKeyDown(t){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))}processCharacter(t){if(t.target!==this.eGui||this.cellCtrl.isEditing())return;const r=t.key;r===" "?this.onSpaceKeyDown(t):(this.cellCtrl.startRowOrCellEdit(r,t),t.preventDefault())}onSpaceKeyDown(t){const{gos:e}=this.beans;if(!this.cellCtrl.isEditing()&&e.isRowSelection()){const n=this.rowNode.isSelected(),r=!n;if(r||!e.get("suppressRowDeselection")){const i=this.beans.gos.get("groupSelectsFiltered"),s=this.rowNode.setSelectedParams({newValue:r,rangeSelect:t.shiftKey,groupSelectsFiltered:i,event:t,source:"spaceKey"});n===void 0&&s===0&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:t.shiftKey,groupSelectsFiltered:i,event:t,source:"spaceKey"})}}t.preventDefault()}destroy(){super.destroy()}},pz=class extends Ae{constructor(t,e,n){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=t,this.column=e,this.eCell=n}postConstruct(){this.getGui().appendChild(Bt("rowDrag",this.gos,null)),this.addGuiEventListener("mousedown",e=>{e.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(t){const e=this.column.getColDef().dndSourceOnRowDrag;t.dataTransfer.setDragImage(this.eCell,0,0);const n=()=>{try{const r=JSON.stringify(this.rowNode.data);t.dataTransfer.setData("application/json",r),t.dataTransfer.setData("text/plain",r)}catch{}};if(e){const r=this.gos.addGridCommonParams({rowNode:this.rowNode,dragEvent:t});e(r)}else n()}checkVisibility(){const t=this.column.isDndSource(this.rowNode);this.setDisplayed(t)}};w([te],pz.prototype,"postConstruct",1);var Ere="ag-column-first",bre="ag-column-last",SE=class{static getHeaderClassesFromColDef(t,e,n,r){return Te(t)?[]:this.getColumnClassesFromCollDef(t.headerClass,t,e,n,r)}static getToolPanelClassesFromColDef(t,e,n,r){return Te(t)?[]:this.getColumnClassesFromCollDef(t.toolPanelClass,t,e,n,r)}static refreshFirstAndLastStyles(t,e,n){t.addOrRemoveCssClass(Ere,n.isColumnAtEdge(e,"first")),t.addOrRemoveCssClass(bre,n.isColumnAtEdge(e,"last"))}static getClassParams(t,e,n,r){return e.addGridCommonParams({colDef:t,column:n,columnGroup:r})}static getColumnClassesFromCollDef(t,e,n,r,i){if(Te(t))return[];let s;if(typeof t=="function"){const o=this.getClassParams(e,n,r,i);s=t(o)}else s=t;return typeof s=="string"?[s]:Array.isArray(s)?[...s]:[]}},Tre="ag-cell",Rre="ag-cell-auto-height",_re="ag-cell-normal-height",Are="ag-cell-focus",xre="ag-cell-first-right-pinned",Pre="ag-cell-last-left-pinned",Ire="ag-cell-not-inline-editing",Dre="ag-column-hover",Ore="ag-cell-wrap-text",Mre=0,fz=class C_ extends ee{constructor(e,n,r,i){super(),this.cellRangeFeature=null,this.cellPositionFeature=null,this.cellCustomStyleFeature=null,this.tooltipFeature=null,this.cellMouseListenerFeature=null,this.cellKeyboardListenerFeature=null,this.suppressRefreshCell=!1,this.onCellCompAttachedFuncs=[],this.column=e,this.rowNode=n,this.beans=r,this.rowCtrl=i,this.instanceId=e.getId()+"-"+Mre++,this.colIdSanitised=sn(this.column.getId()),r.gos.get("suppressCellFocus")||(this.tabIndex=-1),this.createCellPosition(),this.addFeatures(),this.updateAndFormatValue(!1)}shouldRestoreFocus(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)}addFeatures(){this.cellPositionFeature=new yre(this,this.beans),this.addDestroyFunc(()=>{var n;(n=this.cellPositionFeature)==null||n.destroy(),this.cellPositionFeature=null}),this.cellCustomStyleFeature=new Cre(this,this.beans),this.addDestroyFunc(()=>{var n;(n=this.cellCustomStyleFeature)==null||n.destroy(),this.cellCustomStyleFeature=null}),this.cellMouseListenerFeature=new wre(this,this.beans,this.column),this.addDestroyFunc(()=>{var n;(n=this.cellMouseListenerFeature)==null||n.destroy(),this.cellMouseListenerFeature=null}),this.cellKeyboardListenerFeature=new Sre(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.addDestroyFunc(()=>{var n;(n=this.cellKeyboardListenerFeature)==null||n.destroy(),this.cellKeyboardListenerFeature=null}),this.column.isTooltipEnabled()&&(this.enableTooltipFeature(),this.addDestroyFunc(()=>{this.disableTooltipFeature()})),this.beans.rangeService&&this.beans.gos.get("enableRangeSelection")&&(this.cellRangeFeature=new vre(this.beans,this),this.addDestroyFunc(()=>{var n;(n=this.cellRangeFeature)==null||n.destroy(),this.cellRangeFeature=null}))}enableTooltipFeature(e,n){const r=()=>{const o=this.column.getColDef(),a=this.rowNode.data;if(o.tooltipField&&J(a))return ed(a,o.tooltipField,this.column.isTooltipFieldContainsDots());const l=o.tooltipValueGetter;return l?l(this.beans.gos.addGridCommonParams({location:"cell",colDef:this.column.getColDef(),column:this.column,rowIndex:this.cellPosition.rowIndex,node:this.rowNode,data:this.rowNode.data,value:this.value,valueFormatted:this.valueFormatted})):null},i=this.beans.gos.get("tooltipShowMode")==="whenTruncated";!n&&i&&!this.isCellRenderer()&&(n=()=>{const o=this.getGui(),a=o.children.length===0?o:o.querySelector(".ag-cell-value");return a?a.scrollWidth>a.clientWidth:!0});const s={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getRowIndex:()=>this.cellPosition.rowIndex,getRowNode:()=>this.rowNode,getGui:()=>this.getGui(),getLocation:()=>"cell",getTooltipValue:e!=null?()=>e:r,getValueFormatted:()=>this.valueFormatted,shouldDisplayTooltip:n};this.tooltipFeature=new Bo(s,this.beans)}disableTooltipFeature(){this.tooltipFeature&&(this.tooltipFeature.destroy(),this.tooltipFeature=null)}setComp(e,n,r,i,s){var o,a,l,u;this.cellComp=e,this.eGui=n,this.printLayout=i,this.addDomData(),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(r),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),(o=this.cellPositionFeature)==null||o.setComp(n),(a=this.cellCustomStyleFeature)==null||a.setComp(e),(l=this.tooltipFeature)==null||l.refreshToolTip(),(u=this.cellKeyboardListenerFeature)==null||u.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(e,n),s&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach(c=>c()),this.onCellCompAttachedFuncs=[])}setupAutoHeight(e){if(this.isAutoHeight=this.column.isAutoHeight(),!this.isAutoHeight||!e)return;const n=e.parentElement,r=this.beans.gos.getRowHeightForNode(this.rowNode).height,i=a=>{if(this.editing||!this.isAlive())return;const{paddingTop:l,paddingBottom:u,borderBottomWidth:c,borderTopWidth:d}=rl(n),h=l+u+c+d,g=e.offsetHeight+h;if(a<5){const v=this.beans.gos.getDocument(),C=!v||!v.contains(e),y=g==0;if(C||y){window.setTimeout(()=>i(a+1),0);return}}const m=Math.max(g,r);this.rowNode.setRowAutoHeight(m,this.column)},s=()=>i(0);s();const o=this.beans.resizeObserverService.observeResize(e,s);this.addDestroyFunc(()=>{o(),this.rowNode.setRowAutoHeight(void 0,this.column)})}getCellAriaRole(){var e;return(e=this.column.getColDef().cellAriaRole)!=null?e:"gridcell"}getInstanceId(){return this.instanceId}getColumnIdSanitised(){return this.colIdSanitised}getTabIndex(){return this.tabIndex}isCellRenderer(){const e=this.column.getColDef();return e.cellRenderer!=null||e.cellRendererSelector!=null}getValueToDisplay(){var e;return(e=this.valueFormatted)!=null?e:this.value}showValue(e=!1){var n;const r=this.getValueToDisplay();let i;if(this.rowNode.stub){const s=this.createCellRendererParams();i=this.beans.userComponentFactory.getLoadingCellRendererDetails(this.column.getColDef(),s)}else if(this.isCellRenderer()){const s=this.createCellRendererParams();i=this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(),s)}this.cellComp.setRenderDetails(i,r,e),(n=this.cellRangeFeature)==null||n.refreshHandle()}setupControlComps(){const e=this.column.getColDef();this.includeSelection=this.isIncludeControl(e.checkboxSelection),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(e){return this.rowNode.rowPinned!=null?!1:typeof e=="function"||e===!0}refreshShouldDestroy(){const e=this.column.getColDef(),n=this.includeSelection!=this.isIncludeControl(e.checkboxSelection),r=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),i=this.includeDndSource!=this.isIncludeControl(e.dndSource),s=this.isAutoHeight!=this.column.isAutoHeight();return n||r||i||s}startEditing(e=null,n=!1,r=null){if(!this.isCellEditable()||this.editing)return;if(!this.cellComp){this.onCellCompAttachedFuncs.push(()=>{this.startEditing(e,n,r)});return}const i=this.createCellEditorParams(e,n),s=this.column.getColDef(),o=this.beans.userComponentFactory.getCellEditorDetails(s,i);this.editCompDetails=o;const a=(o==null?void 0:o.popupFromSelector)!=null?o.popupFromSelector:!!s.cellEditorPopup,l=(o==null?void 0:o.popupPositionFromSelector)!=null?o.popupPositionFromSelector:s.cellEditorPopupPosition;this.setEditing(!0),this.cellComp.setEditDetails(o,a,l,this.beans.gos.get("reactiveCustomComponents"));const u=this.createEvent(r,x.EVENT_CELL_EDITING_STARTED);this.beans.eventService.dispatchEvent(u)}setEditing(e){var n;this.editing!==e&&(this.editing=e,(n=this.cellRangeFeature)==null||n.refreshHandle())}stopRowOrCellEdit(e=!1){this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.stopEditing(e):this.stopEditing(e)}onPopupEditorClosed(){this.isEditing()&&this.stopEditingAndFocus()}takeValueFromCellEditor(e){const n={newValueExists:!1};if(e)return n;const r=this.cellComp.getCellEditor();return!r||r.isCancelAfterEnd&&r.isCancelAfterEnd()?n:{newValue:r.getValue(),newValueExists:!0}}saveNewValue(e,n){if(n===e)return!1;this.suppressRefreshCell=!0;const r=this.rowNode.setDataValue(this.column,n,"edit");return this.suppressRefreshCell=!1,r}stopEditing(e=!1){if(!this.editing)return!1;const{newValue:n,newValueExists:r}=this.takeValueFromCellEditor(e),i=this.rowNode.getValueFromValueService(this.column);let s=!1;return r&&(s=this.saveNewValue(i,n)),this.setEditing(!1),this.cellComp.setEditDetails(),this.editCompDetails=void 0,this.updateAndFormatValue(!1),this.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.dispatchEditingStoppedEvent(i,n,!e&&!!s),s}dispatchEditingStoppedEvent(e,n,r){const i=Dt(me({},this.createEvent(null,x.EVENT_CELL_EDITING_STOPPED)),{oldValue:e,newValue:n,valueChanged:r});this.beans.eventService.dispatchEvent(i)}createCellEditorParams(e,n){return this.beans.gos.addGridCommonParams({value:this.rowNode.getValueFromValueService(this.column),eventKey:e,column:this.column,colDef:this.column.getColDef(),rowIndex:this.getCellPosition().rowIndex,node:this.rowNode,data:this.rowNode.data,cellStartedEdit:n,onKeyDown:this.onKeyDown.bind(this),stopEditing:this.stopEditingAndFocus.bind(this),eGridCell:this.getGui(),parseValue:this.parseValue.bind(this),formatValue:this.formatValue.bind(this)})}createCellRendererParams(){return this.beans.gos.addGridCommonParams({value:this.value,valueFormatted:this.valueFormatted,getValue:()=>this.rowNode.getValueFromValueService(this.column),setValue:n=>this.beans.valueService.setValue(this.rowNode,this.column,n),formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,rowIndex:this.getCellPosition().rowIndex,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:(n,r,i,s)=>this.registerRowDragger(n,r,s),setTooltip:(n,r)=>{var i;this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(n,r),(i=this.tooltipFeature)==null||i.refreshToolTip()}})}parseValue(e){return this.beans.valueService.parseValue(this.column,this.rowNode,e,this.getValue())}setFocusOutOnEditor(){if(!this.editing)return;const e=this.cellComp.getCellEditor();e&&e.focusOut&&e.focusOut()}setFocusInOnEditor(){if(!this.editing)return;const e=this.cellComp.getCellEditor();e&&e.focusIn?e.focusIn():this.focusCell(!0)}onCellChanged(e){e.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(e){var n;this.refreshShouldDestroy()?(n=this.rowCtrl)==null||n.recreateCell(this):this.refreshCell(e)}refreshCell(e){var n,r,i,s;if(this.suppressRefreshCell||this.editing)return;const o=this.column.getColDef(),a=e!=null&&!!e.newData,l=e!=null&&!!e.suppressFlash||!!o.suppressCellFlash,u=o.field==null&&o.valueGetter==null&&o.showRowGroup==null,c=e&&e.forceRefresh||u||a,d=!!this.cellComp,h=this.updateAndFormatValue(d),f=c||h;if(d){if(f){this.showValue(a);const g=this.beans.filterManager.isSuppressFlashingCellsBecauseFiltering();!l&&!g&&(this.beans.gos.get("enableCellChangeFlash")||o.enableCellChangeFlash)&&this.flashCell(),(n=this.cellCustomStyleFeature)==null||n.applyUserStyles(),(r=this.cellCustomStyleFeature)==null||r.applyClassesFromColDef()}(i=this.tooltipFeature)==null||i.refreshToolTip(),(s=this.cellCustomStyleFeature)==null||s.applyCellClassRules()}}stopEditingAndFocus(e=!1,n=!1){this.stopRowOrCellEdit(),this.focusCell(!0),e||this.navigateAfterEdit(n)}navigateAfterEdit(e){if(this.beans.gos.get("enterNavigatesVerticallyAfterEdit")){const r=e?H.UP:H.DOWN;this.beans.navigationService.navigateToNextCell(null,r,this.getCellPosition(),!1)}}flashCell(e){var n,r;const i=(n=e==null?void 0:e.flashDuration)!=null?n:e==null?void 0:e.flashDelay,s=(r=e==null?void 0:e.fadeDuration)!=null?r:e==null?void 0:e.fadeDelay;this.animateCell("data-changed",i,s)}animateCell(e,n,r){if(!this.cellComp)return;const i=`ag-cell-${e}`,s=`ag-cell-${e}-animation`,{gos:o}=this.beans;n||(n=o.get("cellFlashDuration")),J(r)||(r=o.get("cellFadeDuration")),this.cellComp.addOrRemoveCssClass(i,!0),this.cellComp.addOrRemoveCssClass(s,!1),this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(i,!1),this.cellComp.addOrRemoveCssClass(s,!0),this.eGui.style.transition=`background-color ${r}ms`,window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(s,!1),this.eGui.style.transition="")},r))},n)})}onFlashCells(e){if(!this.cellComp)return;const n=this.beans.cellPositionUtils.createId(this.getCellPosition());e.cells[n]&&this.animateCell("highlight")}isCellEditable(){return this.column.isCellEditable(this.rowNode)}isSuppressFillHandle(){return this.column.isSuppressFillHandle()}formatValue(e){var n;return(n=this.callValueFormatter(e))!=null?n:e}callValueFormatter(e){return this.beans.valueService.formatValue(this.column,this.rowNode,e)}updateAndFormatValue(e){const n=this.value,r=this.valueFormatted;return this.value=this.rowNode.getValueFromValueService(this.column),this.valueFormatted=this.callValueFormatter(this.value),e?!this.valuesAreEqual(n,this.value)||this.valueFormatted!=r:!0}valuesAreEqual(e,n){const r=this.column.getColDef();return r.equals?r.equals(e,n):e===n}getComp(){return this.cellComp}getValue(){return this.value}addDomData(){const e=this.getGui();this.beans.gos.setDomData(e,C_.DOM_DATA_KEY_CELL_CTRL,this),this.addDestroyFunc(()=>this.beans.gos.setDomData(e,C_.DOM_DATA_KEY_CELL_CTRL,null))}createEvent(e,n){return this.beans.gos.addGridCommonParams({type:n,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),rowPinned:this.rowNode.rowPinned,event:e,rowIndex:this.rowNode.rowIndex})}processCharacter(e){var n;(n=this.cellKeyboardListenerFeature)==null||n.processCharacter(e)}onKeyDown(e){var n;(n=this.cellKeyboardListenerFeature)==null||n.onKeyDown(e)}onMouseEvent(e,n){var r;(r=this.cellMouseListenerFeature)==null||r.onMouseEvent(e,n)}getGui(){return this.eGui}getColSpanningList(){return this.cellPositionFeature.getColSpanningList()}onLeftChanged(){var e;this.cellComp&&((e=this.cellPositionFeature)==null||e.onLeftChanged())}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{cellComp:e,column:n,beans:r}=this;SE.refreshFirstAndLastStyles(e,n,r.columnModel)}refreshAriaColIndex(){const e=this.beans.columnModel.getAriaColumnIndex(this.column);CI(this.getGui(),e)}isSuppressNavigable(){return this.column.isSuppressNavigable(this.rowNode)}onWidthChanged(){var e;return(e=this.cellPositionFeature)==null?void 0:e.onWidthChanged()}getColumn(){return this.column}getRowNode(){return this.rowNode}isPrintLayout(){return this.printLayout}getCellPosition(){return this.cellPosition}isEditing(){return this.editing}startRowOrCellEdit(e,n=null){if(!this.cellComp){this.onCellCompAttachedFuncs.push(()=>{this.startRowOrCellEdit(e,n)});return}this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.startRowEditing(e,this):this.startEditing(e,!0,n)}getRowCtrl(){return this.rowCtrl}getRowPosition(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}}updateRangeBordersIfRangeCount(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()}onRangeSelectionChanged(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}isRangeSelectionEnabled(){return this.cellRangeFeature!=null}focusCell(e=!1){this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:e})}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}onFirstRightPinnedChanged(){if(!this.cellComp)return;const e=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass(xre,e)}onLastLeftPinnedChanged(){if(!this.cellComp)return;const e=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass(Pre,e)}onCellFocused(e){if(this.beans.gos.get("suppressCellFocus"))return;const n=this.beans.focusService.isCellFocused(this.cellPosition);if(!this.cellComp){n&&(e!=null&&e.forceBrowserFocus)&&(this.focusEventToRestore=e);return}this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass(Are,n),n&&e&&e.forceBrowserFocus&&this.cellComp.getFocusableElement().focus({preventScroll:!!e.preventScrollOnBrowserFocus});const r=this.beans.gos.get("editType")==="fullRow";!n&&!r&&this.editing&&this.stopRowOrCellEdit(),n&&this.rowCtrl.announceDescription()}createCellPosition(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:Vs(this.rowNode.rowPinned),column:this.column}}applyStaticCssClasses(){this.cellComp.addOrRemoveCssClass(Tre,!0),this.cellComp.addOrRemoveCssClass(Ire,!0);const e=this.column.isAutoHeight()==!0;this.cellComp.addOrRemoveCssClass(Rre,e),this.cellComp.addOrRemoveCssClass(_re,!e)}onColumnHover(){if(!this.cellComp||!this.beans.gos.get("columnHoverHighlight"))return;const e=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass(Dre,e)}onColDefChanged(){if(!this.cellComp)return;if(this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),!this.editing)this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0});else{const n=this.getCellEditor();if(n!=null&&n.refresh){const{eventKey:r,cellStartedEdit:i}=this.editCompDetails.params,s=this.createCellEditorParams(r,i),o=this.column.getColDef(),a=this.beans.userComponentFactory.getCellEditorDetails(o,s);n.refresh(a.params)}}}setWrapText(){const e=this.column.getColDef().wrapText==!0;this.cellComp.addOrRemoveCssClass(Ore,e)}dispatchCellContextMenuEvent(e){const n=this.column.getColDef(),r=this.createEvent(e,x.EVENT_CELL_CONTEXT_MENU);this.beans.eventService.dispatchEvent(r),n.onCellContextMenu&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{n.onCellContextMenu(r)})},0)}getCellRenderer(){return this.cellComp?this.cellComp.getCellRenderer():null}getCellEditor(){return this.cellComp?this.cellComp.getCellEditor():null}destroy(){this.onCellCompAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){const e=new vE;return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e}createDndSource(){const e=new pz(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(e),e}registerRowDragger(e,n,r){if(this.customRowDragComp){this.customRowDragComp.setDragElement(e,n);return}const i=this.createRowDragComp(e,n,r);i&&(this.customRowDragComp=i,this.addDestroyFunc(()=>{this.beans.context.destroyBean(i),this.customRowDragComp=null}))}createRowDragComp(e,n,r){const i=this.beans.gos.get("pagination"),s=this.beans.gos.get("rowDragManaged"),o=this.beans.gos.isRowModelType("clientSide");if(s){if(!o){we("managed row dragging is only allowed in the Client Side Row Model");return}if(i){we("managed row dragging is not possible when doing pagination");return}}const a=new Su(()=>this.value,this.rowNode,this.column,e,n,r);return this.beans.context.createBean(a),a}};fz.DOM_DATA_KEY_CELL_CTRL="cellCtrl";var ru=fz,Fre=0,gz=class w_ extends ee{constructor(e,n,r,i,s){super(),this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKeySanitised=null,this.beans=n,this.gos=n.gos,this.rowNode=e,this.paginationPage=n.paginationProxy.getCurrentPage(),this.useAnimationFrameForCreate=i,this.printLayout=s,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=e.id+"-"+Fre++,this.rowId=sn(e.id),this.initRowBusinessKey(),this.rowFocused=n.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=n.rowCssClassCalculator.calculateRowLevel(this.rowNode),this.setRowType(),this.setAnimateFlags(r),this.rowStyles=this.processStylesFromGridOptions(),this.isFullWidth()&&!this.gos.get("suppressCellFocus")&&(this.tabIndex=-1),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;const e=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=sn(e)}getRowId(){return this.rowId}getRowStyles(){return this.rowStyles}getTabIndex(){return this.tabIndex}isSticky(){return this.rowNode.sticky}getInstanceId(){return this.instanceId}setComp(e,n,r){const i={rowComp:e,element:n,containerType:r};this.allRowGuis.push(i),r==="left"?this.leftGui=i:r==="right"?this.rightGui=i:r==="fullWidth"?this.fullWidthGui=i:this.centerGui=i,this.initialiseRowComp(i),this.rowType!=="FullWidthLoading"&&!this.rowNode.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(e){switch(this.allRowGuis=this.allRowGuis.filter(n=>n.containerType!==e),e){case"left":this.leftGui=void 0;break;case"right":this.rightGui=void 0;break;case"fullWidth":this.fullWidthGui=void 0;break;case"center":this.centerGui=void 0;break}}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(e){const n=e?"none":"";this.allRowGuis.forEach(r=>r.element.style.display=n)}initialiseRowComp(e){const n=this.gos;this.listenOnDomOrder(e),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights(),this.onRowHeightChanged(e),this.updateRowIndexes(e),this.setFocusedClasses(e),this.setStylesFromGridOptions(!1,e),n.isRowSelection()&&this.rowNode.selectable&&this.onRowSelected(e),this.updateColumnLists(!this.useAnimationFrameForCreate);const r=e.rowComp;this.getInitialRowClasses(e.containerType).forEach(s=>r.addOrRemoveCssClass(s,!0)),this.executeSlideAndFadeAnimations(e),this.rowNode.group&&Io(e.element,this.rowNode.expanded==!0),this.setRowCompRowId(r),this.setRowCompRowBusinessKey(r),n.setDomData(e.element,w_.DOM_DATA_KEY_ROW_CTRL,this),this.addDestroyFunc(()=>n.setDomData(e.element,w_.DOM_DATA_KEY_ROW_CTRL,null)),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,e.element),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(e.element),this.isFullWidth()&&this.setupFullWidth(e),n.get("rowDragEntireRow")&&this.addRowDraggerToRow(e),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask(()=>{this.isAlive()&&e.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(e){this.businessKeySanitised!=null&&e.setRowBusinessKey(this.businessKeySanitised)}getBusinessKey(){return this.businessKeySanitised}setRowCompRowId(e){this.rowId=sn(this.rowNode.id),this.rowId!=null&&e.setRowId(this.rowId)}executeSlideAndFadeAnimations(e){const{containerType:n}=e;this.slideInAnimation[n]&&(s_(()=>{this.onTopChanged()}),this.slideInAnimation[n]=!1),this.fadeInAnimation[n]&&(s_(()=>{e.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[n]=!1)}addRowDraggerToRow(e){if(this.gos.get("enableRangeSelection")){we("Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `enableRangeSelection: true`");return}const n=this.beans.localeService.getLocaleTextFunc(),r=new Su(()=>`1 ${n("rowDragRow","row")}`,this.rowNode,void 0,e.element,void 0,!0),i=this.createBean(r,this.beans.context);this.rowDragComps.push(i)}setupFullWidth(e){const n=this.getPinnedForContainer(e.containerType);if(this.rowType=="FullWidthDetail"&&!nt.__assertRegistered("@ag-grid-enterprise/master-detail","cell renderer 'agDetailCellRenderer' (for master detail)",this.beans.context.getGridId()))return;const r=this.createFullWidthCompDetails(e.element,n);e.rowComp.showFullWidth(r)}isPrintLayout(){return this.printLayout}getFullWidthCellRenderers(){var e,n;return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(r=>{var i;return(i=r==null?void 0:r.rowComp)==null?void 0:i.getFullWidthCellRenderer()}):[(n=(e=this.fullWidthGui)==null?void 0:e.rowComp)==null?void 0:n.getFullWidthCellRenderer()]}getCellElement(e){const n=this.getCellCtrl(e);return n?n.getGui():null}executeProcessRowPostCreateFunc(){const e=this.gos.getCallback("processRowPostCreate");if(!e||!this.areAllContainersReady())return;const n={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};e(n)}areAllContainersReady(){const e=!!this.leftGui||!this.beans.columnModel.isPinningLeft(),n=!!this.centerGui,r=!!this.rightGui||!this.beans.columnModel.isPinningRight();return e&&n&&r}setRowType(){const e=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow"),n=this.rowNode.isFullWidthCell(),r=this.gos.get("masterDetail")&&this.rowNode.detail,i=this.beans.columnModel.isPivotMode(),o=!!this.rowNode.group&&!this.rowNode.footer&&this.gos.isGroupUseEntireRow(i);e?this.rowType="FullWidthLoading":r?this.rowType="FullWidthDetail":n?this.rowType="FullWidth":o?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(e=!1,n=!1){if(this.isFullWidth())return;if(e||this.gos.get("suppressAnimationFrame")||this.printLayout){this.updateColumnListsImpl(n);return}this.updateColumnListsPending||(this.beans.animationFrameService.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}createCellCtrls(e,n,r=null){const i={list:[],map:{}},s=(o,a)=>{i.list.push(a),i.map[o]=a};return n.forEach(o=>{const a=o.getInstanceId();let l=e.map[a];l||(l=new ru(o,this.rowNode,this.beans,this)),s(a,l)}),e.list.forEach(o=>{if(i.map[o.getColumn().getInstanceId()]!=null)return;if(!this.isCellEligibleToBeRemoved(o,r)){s(o.getColumn().getInstanceId(),o);return}o.destroy()}),i}updateColumnListsImpl(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)}setCellCtrls(e){this.allRowGuis.forEach(n=>{const r=this.getCellCtrlsForContainer(n.containerType);n.rowComp.setCellCtrls(r,e)})}getCellCtrlsForContainer(e){switch(e){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list;default:const n=e;throw new Error(`Unhandled case: ${n}`)}}createAllCellCtrls(){const e=this.beans.columnModel;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,e.getAllDisplayedColumns()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const n=e.getViewportCenterColumnsForRow(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,n);const r=e.getDisplayedLeftColumnsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,r,"left");const i=e.getDisplayedRightColumnsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,i,"right")}}isCellEligibleToBeRemoved(e,n){if(e.getColumn().getPinned()!=n)return!0;const o=e.isEditing(),a=this.beans.focusService.isCellFocused(e.getCellPosition());if(o||a){const u=e.getColumn();return!(this.beans.columnModel.getAllDisplayedColumns().indexOf(u)>=0)}return!0}getDomOrder(){return this.gos.get("ensureDomOrder")||this.gos.isDomLayout("print")}listenOnDomOrder(e){const n=()=>{e.rowComp.setDomOrder(this.getDomOrder())};this.addManagedPropertyListener("domLayout",n),this.addManagedPropertyListener("ensureDomOrder",n)}setAnimateFlags(e){if(this.isSticky()||!e)return;const n=J(this.rowNode.oldRowTop),r=this.beans.columnModel.isPinningLeft(),i=this.beans.columnModel.isPinningRight();if(n){if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.slideInAnimation.fullWidth=!0;return}this.slideInAnimation.center=!0,this.slideInAnimation.left=r,this.slideInAnimation.right=i}else{if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.fadeInAnimation.fullWidth=!0;return}this.fadeInAnimation.center=!0,this.fadeInAnimation.left=r,this.fadeInAnimation.right=i}}isEditing(){return this.editingRow}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){const e=(a,l)=>a?a.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(a.element,l).params):!0,n=e(this.fullWidthGui,null),r=e(this.centerGui,null),i=e(this.leftGui,"left"),s=e(this.rightGui,"right");return n&&r&&i&&s}addListeners(){this.addManagedListener(this.rowNode,Ge.EVENT_HEIGHT_CHANGED,()=>this.onRowHeightChanged()),this.addManagedListener(this.rowNode,Ge.EVENT_ROW_SELECTED,()=>this.onRowSelected()),this.addManagedListener(this.rowNode,Ge.EVENT_ROW_INDEX_CHANGED,this.onRowIndexChanged.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_TOP_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_EXPANDED_CHANGED,this.updateExpandedCss.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_HAS_CHILDREN_CHANGED,this.updateExpandedCss.bind(this)),this.rowNode.detail&&this.addManagedListener(this.rowNode.parent,Ge.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_CELL_CHANGED,this.postProcessCss.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_HIGHLIGHT_CHANGED,this.onRowNodeHighlightChanged.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_DRAGGING_CHANGED,this.postProcessRowDragging.bind(this)),this.addManagedListener(this.rowNode,Ge.EVENT_UI_LEVEL_CHANGED,this.onUiLevelChanged.bind(this));const e=this.beans.eventService;this.addManagedListener(e,x.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,this.onPaginationPixelOffsetChanged.bind(this)),this.addManagedListener(e,x.EVENT_HEIGHT_SCALE_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(e,x.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(e,x.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addManagedListener(e,x.EVENT_CELL_FOCUSED,this.onCellFocusChanged.bind(this)),this.addManagedListener(e,x.EVENT_CELL_FOCUS_CLEARED,this.onCellFocusChanged.bind(this)),this.addManagedListener(e,x.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),this.addManagedListener(e,x.EVENT_MODEL_UPDATED,this.refreshFirstAndLastRowStyles.bind(this)),this.addManagedListener(e,x.EVENT_COLUMN_MOVED,this.updateColumnLists.bind(this)),this.addDestroyFunc(()=>{this.destroyBeans(this.rowDragComps,this.beans.context),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature,this.beans.context))}),this.addManagedPropertyListeners(["rowDragEntireRow"],()=>{if(this.gos.get("rowDragEntireRow")){this.allRowGuis.forEach(r=>{this.addRowDraggerToRow(r)});return}this.destroyBeans(this.rowDragComps,this.beans.context),this.rowDragComps=[]}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListener(this.rowNode,Ge.EVENT_ROW_INDEX_CHANGED,()=>{this.getAllCellCtrls().forEach(e=>e.onRowIndexChanged())}),this.addManagedListener(this.rowNode,Ge.EVENT_CELL_CHANGED,e=>{this.getAllCellCtrls().forEach(n=>n.onCellChanged(e))})}onRowNodeDataChanged(e){if(this.isFullWidth()!==!!this.rowNode.isFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(r=>r.refreshCell({suppressFlash:!e.update,newData:!e.update})),this.allRowGuis.forEach(r=>{this.setRowCompRowId(r.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(r.rowComp)}),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const e=this.rowNode.highlighted;this.allRowGuis.forEach(n=>{const r=e===0,i=e===1;n.rowComp.addOrRemoveCssClass("ag-row-highlight-above",r),n.rowComp.addOrRemoveCssClass("ag-row-highlight-below",i)})}postProcessRowDragging(){const e=this.rowNode.dragging;this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass("ag-row-dragging",e))}updateExpandedCss(){const e=this.rowNode.isExpandable(),n=this.rowNode.expanded==!0;this.allRowGuis.forEach(r=>{r.rowComp.addOrRemoveCssClass("ag-row-group",e),r.rowComp.addOrRemoveCssClass("ag-row-group-expanded",e&&n),r.rowComp.addOrRemoveCssClass("ag-row-group-contracted",e&&!n),Io(r.element,e&&n)})}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:Vs(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(e){const n=this.allRowGuis.find(l=>l.element.contains(e.target));if(!((n?n.element:null)===e.target))return;const s=this.rowNode,o=this.beans.focusService.getFocusedCell(),a={rowIndex:s.rowIndex,rowPinned:s.rowPinned,column:o&&o.column};this.beans.navigationService.navigateToNextCell(e,e.key,a,!0),e.preventDefault()}onTabKeyDown(e){if(e.defaultPrevented||ps(e))return;const n=this.allRowGuis.find(o=>o.element.contains(e.target)),r=n?n.element:null,i=r===e.target;let s=null;i||(s=this.beans.focusService.findNextFocusableElement(r,!1,e.shiftKey)),(this.isFullWidth()&&i||!s)&&this.beans.navigationService.onTabKeyDown(this,e)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){var e;const n=(e=this.allRowGuis.find(r=>Yr(r.element)))==null?void 0:e.element;return n?n.getBoundingClientRect().top:0}onFullWidthRowFocused(e){var n;const r=this.rowNode,i=e?this.isFullWidth()&&e.rowIndex===r.rowIndex&&e.rowPinned==r.rowPinned:!1,s=this.fullWidthGui?this.fullWidthGui.element:(n=this.centerGui)==null?void 0:n.element;s&&(s.classList.toggle("ag-full-width-focus",i),i&&s.focus({preventScroll:!0}))}recreateCell(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),e.destroy(),this.updateColumnLists()}removeCellCtrl(e,n){const r={list:[],map:{}};return e.list.forEach(i=>{i!==n&&(r.list.push(i),r.map[i.getColumn().getInstanceId()]=i)}),r}onMouseEvent(e,n){switch(e){case"dblclick":this.onRowDblClick(n);break;case"click":this.onRowClick(n);break;case"touchstart":case"mousedown":this.onRowMouseDown(n);break}}createRowEvent(e,n){return this.gos.addGridCommonParams({type:e,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,event:n})}createRowEventWithSource(e,n){const r=this.createRowEvent(e,n);return r.source=this,r}onRowDblClick(e){if(ps(e))return;const n=this.createRowEventWithSource(x.EVENT_ROW_DOUBLE_CLICKED,e);this.beans.eventService.dispatchEvent(n)}onRowMouseDown(e){if(this.lastMouseDownOnDragger=tu(e.target,"ag-row-drag",3),!this.isFullWidth())return;const n=this.rowNode,r=this.beans.columnModel;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges(),this.beans.focusService.setFocusedCell({rowIndex:n.rowIndex,column:r.getAllDisplayedColumns()[0],rowPinned:n.rowPinned,forceBrowserFocus:!0})}onRowClick(e){if(ps(e)||this.lastMouseDownOnDragger)return;const r=this.createRowEventWithSource(x.EVENT_ROW_CLICKED,e);this.beans.eventService.dispatchEvent(r);const i=e.ctrlKey||e.metaKey,s=e.shiftKey;if(this.gos.get("groupSelectsChildren")&&this.rowNode.group||this.isRowSelectionBlocked()||this.gos.get("suppressRowClickSelection"))return;const a=this.gos.get("rowMultiSelectWithClick"),l=!this.gos.get("suppressRowDeselection"),u="rowClicked";if(this.rowNode.isSelected())a?this.rowNode.setSelectedParams({newValue:!1,event:e,source:u}):i?l&&this.rowNode.setSelectedParams({newValue:!1,event:e,source:u}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!s,rangeSelect:s,event:e,source:u});else{const c=a?!1:!i;this.rowNode.setSelectedParams({newValue:!0,clearSelection:c,rangeSelect:s,event:e,source:u})}}isRowSelectionBlocked(){return!this.rowNode.selectable||!!this.rowNode.rowPinned||!this.gos.isRowSelection()}setupDetailRowAutoHeight(e){if(this.rowType!=="FullWidthDetail"||!this.gos.get("detailRowAutoHeight"))return;const n=()=>{const i=e.clientHeight;if(i!=null&&i>0){const s=()=>{this.rowNode.setRowHeight(i),this.beans.clientSideRowModel?this.beans.clientSideRowModel.onRowHeightChanged():this.beans.serverSideRowModel&&this.beans.serverSideRowModel.onRowHeightChanged()};window.setTimeout(s,0)}},r=this.beans.resizeObserverService.observeResize(e,n);this.addDestroyFunc(r),n()}createFullWidthCompDetails(e,n){const r=this.gos.addGridCommonParams({fullWidth:!0,data:this.rowNode.data,node:this.rowNode,value:this.rowNode.key,valueFormatted:this.rowNode.key,rowIndex:this.rowNode.rowIndex,eGridCell:e,eParentOfValue:e,pinned:n,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(i,s,o,a)=>this.addFullWidthRowDragging(i,s,o,a),setTooltip:(i,s)=>this.refreshRowTooltip(i,s)});switch(this.rowType){case"FullWidthDetail":return this.beans.userComponentFactory.getFullWidthDetailCellRendererDetails(r);case"FullWidthGroup":return this.beans.userComponentFactory.getFullWidthGroupCellRendererDetails(r);case"FullWidthLoading":return this.beans.userComponentFactory.getFullWidthLoadingCellRendererDetails(r);default:return this.beans.userComponentFactory.getFullWidthCellRendererDetails(r)}}refreshRowTooltip(e,n){if(!this.fullWidthGui)return;const r={getGui:()=>this.fullWidthGui.element,getTooltipValue:()=>e,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:n};this.tooltipFeature&&this.destroyBean(this.tooltipFeature,this.beans.context),this.tooltipFeature=this.createBean(new Bo(r,this.beans))}addFullWidthRowDragging(e,n,r="",i){if(!this.isFullWidth())return;const s=new Su(()=>r,this.rowNode,void 0,e,n,i);this.createBean(s,this.beans.context),this.addDestroyFunc(()=>{this.destroyBean(s,this.beans.context)})}onUiLevelChanged(){const e=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=e){const n="ag-row-level-"+e,r="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(i=>{i.rowComp.addOrRemoveCssClass(n,!0),i.rowComp.addOrRemoveCssClass(r,!1)})}this.rowLevel=e}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageLastRow()}refreshFirstAndLastRowStyles(){const e=this.isFirstRowOnPage(),n=this.isLastRowOnPage();this.firstRowOnPage!==e&&(this.firstRowOnPage=e,this.allRowGuis.forEach(r=>r.rowComp.addOrRemoveCssClass("ag-row-first",e))),this.lastRowOnPage!==n&&(this.lastRowOnPage=n,this.allRowGuis.forEach(r=>r.rowComp.addOrRemoveCssClass("ag-row-last",n)))}stopEditing(e=!1){if(this.stoppingRowEdit)return;const n=this.getAllCellCtrls(),r=this.editingRow;this.stoppingRowEdit=!0;let i=!1;for(const s of n){const o=s.stopEditing(e);r&&!e&&!i&&o&&(i=!0)}if(i){const s=this.createRowEvent(x.EVENT_ROW_VALUE_CHANGED);this.beans.eventService.dispatchEvent(s)}r&&this.setEditingRow(!1),this.stoppingRowEdit=!1}setInlineEditingCss(e){this.allRowGuis.forEach(n=>{n.rowComp.addOrRemoveCssClass("ag-row-inline-editing",e),n.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!e)})}setEditingRow(e){this.editingRow=e,this.allRowGuis.forEach(r=>r.rowComp.addOrRemoveCssClass("ag-row-editing",e));const n=e?this.createRowEvent(x.EVENT_ROW_EDITING_STARTED):this.createRowEvent(x.EVENT_ROW_EDITING_STOPPED);this.beans.eventService.dispatchEvent(n)}startRowEditing(e=null,n=null,r=null){if(this.editingRow)return;this.getAllCellCtrls().reduce((s,o)=>{const a=o===n;return a?o.startEditing(e,a,r):o.startEditing(null,a,r),s?!0:o.isEditing()},!1)&&this.setEditingRow(!0)}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){const e=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);!e||!e.length||e.forEach(n=>{this.allRowGuis.forEach(r=>r.rowComp.addOrRemoveCssClass(n,!0))})}postProcessRowClassRules(){this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,e=>{this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass(e,!0))},e=>{this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass(e,!1))})}setStylesFromGridOptions(e,n){e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(n,r=>r.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(e){return e==="left"?"left":e==="right"?"right":null}getInitialRowClasses(e){const n=this.getPinnedForContainer(e),r={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[e],rowIsEven:this.rowNode.rowIndex%2===0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:n};return this.beans.rowCssClassCalculator.getInitialRowClasses(r)}processStylesFromGridOptions(){const e=this.gos.get("rowStyle");if(e&&typeof e=="function"){console.warn("AG Grid: rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");return}const n=this.gos.getCallback("getRowStyle");let r;if(n){const i={data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex};r=n(i)}return r||e?Object.assign({},e,r):this.emptyStyle}onRowSelected(e){const n=!!this.rowNode.isSelected();this.forEachGui(e,r=>{r.rowComp.addOrRemoveCssClass("ag-row-selected",n),Rd(r.element,n),r.element.contains(this.beans.gos.getActiveDomElement())&&(r===this.centerGui||r===this.fullWidthGui)&&this.announceDescription()})}announceDescription(){if(this.isRowSelectionBlocked())return;const e=this.rowNode.isSelected();if(e&&this.beans.gos.get("suppressRowDeselection"))return;const r=this.beans.localeService.getLocaleTextFunc()(e?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${e?"deselect":"select"} this row.`);this.beans.ariaAnnouncementService.announceValue(r)}addHoverFunctionality(e){this.active&&(this.addManagedListener(e,"mouseenter",()=>this.rowNode.onMouseEnter()),this.addManagedListener(e,"mouseleave",()=>this.rowNode.onMouseLeave()),this.addManagedListener(this.rowNode,Ge.EVENT_MOUSE_ENTER,()=>{!this.beans.dragService.isDragging()&&!this.gos.get("suppressRowHoverHighlight")&&(e.classList.add("ag-row-hover"),this.rowNode.setHovered(!0))}),this.addManagedListener(this.rowNode,Ge.EVENT_MOUSE_LEAVE,()=>{e.classList.remove("ag-row-hover"),this.rowNode.setHovered(!1)}))}roundRowTopToBounds(e){const n=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getApproximateVScollPosition(),r=this.applyPaginationOffset(n.top,!0)-100,i=this.applyPaginationOffset(n.bottom,!0)+100;return Math.min(Math.max(r,e),i)}getFrameworkOverrides(){return this.beans.frameworkOverrides}forEachGui(e,n){e?n(e):this.allRowGuis.forEach(n)}onRowHeightChanged(e){if(this.rowNode.rowHeight==null)return;const n=this.rowNode.rowHeight,r=this.beans.environment.getDefaultRowHeight(),s=this.gos.isGetRowHeightFunction()?this.gos.getRowHeightForNode(this.rowNode).height:void 0,o=s?`${Math.min(r,s)-2}px`:void 0;this.forEachGui(e,a=>{a.element.style.height=`${n}px`,o&&a.element.style.setProperty("--ag-line-height",o)})}addEventListener(e,n){super.addEventListener(e,n)}removeEventListener(e,n){super.removeEventListener(e,n)}destroyFirstPass(e=!1){if(this.active=!1,!e&&this.gos.isAnimateRows()&&!this.isSticky())if(this.rowNode.rowTop!=null){const i=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(i)}else this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0));this.rowNode.setHovered(!1);const n=this.createRowEvent(x.EVENT_VIRTUAL_ROW_REMOVED);this.dispatchEvent(n),this.beans.eventService.dispatchEvent(n),super.destroy()}destroySecondPass(){this.allRowGuis.length=0,this.stopEditing();const e=n=>(n.list.forEach(r=>r.destroy()),{list:[],map:{}});this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)}setFocusedClasses(e){this.forEachGui(e,n=>{n.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),n.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){const e=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);e!==this.rowFocused&&(this.rowFocused=e,this.setFocusedClasses()),!e&&this.editingRow&&this.stopEditing(!1)}onPaginationChanged(){const e=this.beans.paginationProxy.getCurrentPage();this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(e,n=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return e;const r=this.beans.paginationProxy.getPixelOffset();return e+r*(n?1:-1)}setRowTop(e){if(!this.printLayout&&J(e)){const n=this.applyPaginationOffset(e),s=`${this.rowNode.isRowPinned()||this.rowNode.sticky?n:this.beans.rowContainerHeightService.getRealPixelPosition(n)}px`;this.setRowTopStyle(s)}}getInitialRowTop(e){return this.suppressRowTransform?this.getInitialRowTopShared(e):void 0}getInitialTransform(e){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(e)})`}getInitialRowTopShared(e){if(this.printLayout)return"";let n;if(this.isSticky())n=this.rowNode.stickyRowTop;else{const r=this.slideInAnimation[e]?this.roundRowTopToBounds(this.rowNode.oldRowTop):this.rowNode.rowTop,i=this.applyPaginationOffset(r);n=this.rowNode.isRowPinned()?i:this.beans.rowContainerHeightService.getRealPixelPosition(i)}return n+"px"}setRowTopStyle(e){this.allRowGuis.forEach(n=>this.suppressRowTransform?n.rowComp.setTop(e):n.rowComp.setTransform(`translateY(${e})`))}getRowNode(){return this.rowNode}getCellCtrl(e){let n=null;return this.getAllCellCtrls().forEach(r=>{r.getColumn()==e&&(n=r)}),n!=null||this.getAllCellCtrls().forEach(r=>{r.getColSpanningList().indexOf(e)>=0&&(n=r)}),n}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}getRowIndex(){return this.rowNode.getRowIndexString()}updateRowIndexes(e){const n=this.rowNode.getRowIndexString(),r=this.beans.headerNavigationService.getHeaderRowCount()+this.beans.filterManager.getHeaderRowCount(),i=this.rowNode.rowIndex%2===0,s=r+this.rowNode.rowIndex+1;this.forEachGui(e,o=>{o.rowComp.setRowIndex(n),o.rowComp.addOrRemoveCssClass("ag-row-even",i),o.rowComp.addOrRemoveCssClass("ag-row-odd",!i),yI(o.element,s)})}};gz.DOM_DATA_KEY_ROW_CTRL="renderedRow";var iu=gz,Qr=class extends ee{constructor(t){super(),this.element=t}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()}addKeyboardListeners(){const t="keydown",e=this.processKeyboardEvent.bind(this,t);this.addManagedListener(this.element,t,e)}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",pI("touchstart")?"touchstart":"mousedown"].forEach(n=>{const r=this.processMouseEvent.bind(this,n);this.addManagedListener(this.element,n,r)})}processMouseEvent(t,e){if(!this.mouseEventService.isEventFromThisGrid(e)||ps(e))return;const n=this.getRowForEvent(e),r=this.mouseEventService.getRenderedCellForEvent(e);t==="contextmenu"?this.handleContextMenuMouseEvent(e,void 0,n,r):(r&&r.onMouseEvent(t,e),n&&n.onMouseEvent(t,e))}mockContextMenuForIPad(){if(!Ho())return;const t=new Dn(this.element),e=n=>{const r=this.getRowForEvent(n.touchEvent),i=this.mouseEventService.getRenderedCellForEvent(n.touchEvent);this.handleContextMenuMouseEvent(void 0,n.touchEvent,r,i)};this.addManagedListener(t,Dn.EVENT_LONG_TAP,e),this.addDestroyFunc(()=>t.destroy())}getRowForEvent(t){let e=t.target;for(;e;){const n=this.gos.getDomData(e,iu.DOM_DATA_KEY_ROW_CTRL);if(n)return n;e=e.parentElement}return null}handleContextMenuMouseEvent(t,e,n,r){const i=n?n.getRowNode():null,s=r?r.getColumn():null;let o=null;if(s){const u=t||e;r.dispatchCellContextMenuEvent(u??null),o=this.valueService.getValue(s,i)}const a=this.ctrlsService.getGridBodyCtrl(),l=r?r.getGui():a.getGridBodyElement();this.menuService.showContextMenu({mouseEvent:t,touchEvent:e,rowNode:i,column:s,value:o,anchorToElement:l})}getControlsForEventTarget(t){return{cellCtrl:HC(this.gos,t,ru.DOM_DATA_KEY_CELL_CTRL),rowCtrl:HC(this.gos,t,iu.DOM_DATA_KEY_ROW_CTRL)}}processKeyboardEvent(t,e){const{cellCtrl:n,rowCtrl:r}=this.getControlsForEventTarget(e.target);e.defaultPrevented||(n?this.processCellKeyboardEvent(n,t,e):r&&r.isFullWidth()&&this.processFullWidthRowKeyboardEvent(r,t,e))}processCellKeyboardEvent(t,e,n){const r=t.getRowNode(),i=t.getColumn(),s=t.isEditing();if(!jC(this.gos,n,r,i,s)&&e==="keydown"&&(!s&&this.navigationService.handlePageScrollingKey(n)||t.onKeyDown(n),this.doGridOperations(n,t.isEditing()),uE(n)&&t.processCharacter(n)),e==="keydown"){const a=t.createEvent(n,x.EVENT_CELL_KEY_DOWN);this.eventService.dispatchEvent(a)}}processFullWidthRowKeyboardEvent(t,e,n){const r=t.getRowNode(),i=this.focusService.getFocusedCell(),s=i&&i.column;if(!jC(this.gos,n,r,s,!1)){const a=n.key;if(e==="keydown")switch(a){case H.PAGE_HOME:case H.PAGE_END:case H.PAGE_UP:case H.PAGE_DOWN:this.navigationService.handlePageScrollingKey(n,!0);break;case H.UP:case H.DOWN:t.onKeyboardNavigate(n);break;case H.TAB:t.onTabKeyDown(n);break}}if(e==="keydown"){const a=t.createRowEvent(x.EVENT_CELL_KEY_DOWN,n);this.eventService.dispatchEvent(a)}}doGridOperations(t,e){if(!t.ctrlKey&&!t.metaKey||e||!this.mouseEventService.isEventFromThisGrid(t))return;const n=vU(t);if(n===H.A)return this.onCtrlAndA(t);if(n===H.C)return this.onCtrlAndC(t);if(n===H.D)return this.onCtrlAndD(t);if(n===H.V)return this.onCtrlAndV(t);if(n===H.X)return this.onCtrlAndX(t);if(n===H.Y)return this.onCtrlAndY();if(n===H.Z)return this.onCtrlAndZ(t)}onCtrlAndA(t){const{pinnedRowModel:e,paginationProxy:n,rangeService:r}=this;if(r&&n.isRowsToRender()){const[i,s]=[e.isEmpty("top"),e.isEmpty("bottom")],o=i?null:"top";let a,l;s?(a=null,l=this.paginationProxy.getRowCount()-1):(a="bottom",l=e.getPinnedBottomRowData().length-1);const u=this.columnModel.getAllDisplayedColumns();if(Mi(u))return;r.setCellRange({rowStartIndex:0,rowStartPinned:o,rowEndIndex:l,rowEndPinned:a,columnStart:u[0],columnEnd:Je(u)})}t.preventDefault()}onCtrlAndC(t){if(!this.clipboardService||this.gos.get("enableCellTextSelection"))return;const{cellCtrl:e,rowCtrl:n}=this.getControlsForEventTarget(t.target);e!=null&&e.isEditing()||n!=null&&n.isEditing()||(t.preventDefault(),this.clipboardService.copyToClipboard())}onCtrlAndX(t){if(!this.clipboardService||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;const{cellCtrl:e,rowCtrl:n}=this.getControlsForEventTarget(t.target);e!=null&&e.isEditing()||n!=null&&n.isEditing()||(t.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}onCtrlAndV(t){const{cellCtrl:e,rowCtrl:n}=this.getControlsForEventTarget(t.target);e!=null&&e.isEditing()||n!=null&&n.isEditing()||this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()}onCtrlAndD(t){this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),t.preventDefault()}onCtrlAndZ(t){this.gos.get("undoRedoCellEditing")&&(t.preventDefault(),t.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))}onCtrlAndY(){this.undoRedoService.redo("ui")}};w([O("mouseEventService")],Qr.prototype,"mouseEventService",2);w([O("valueService")],Qr.prototype,"valueService",2);w([O("menuService")],Qr.prototype,"menuService",2);w([O("ctrlsService")],Qr.prototype,"ctrlsService",2);w([O("navigationService")],Qr.prototype,"navigationService",2);w([O("focusService")],Qr.prototype,"focusService",2);w([O("undoRedoService")],Qr.prototype,"undoRedoService",2);w([O("columnModel")],Qr.prototype,"columnModel",2);w([O("paginationProxy")],Qr.prototype,"paginationProxy",2);w([O("pinnedRowModel")],Qr.prototype,"pinnedRowModel",2);w([ut("rangeService")],Qr.prototype,"rangeService",2);w([ut("clipboardService")],Qr.prototype,"clipboardService",2);w([te],Qr.prototype,"postConstruct",1);var Th=class extends ee{constructor(t){super(),this.centerContainerCtrl=t}postConstruct(){this.ctrlsService.whenReady(t=>{this.gridBodyCtrl=t.gridBodyCtrl,this.listenForResize()}),this.addManagedListener(this.eventService,x.EVENT_SCROLLBAR_WIDTH_CHANGED,this.onScrollbarWidthChanged.bind(this)),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){const t=()=>this.onCenterViewportResized();this.centerContainerCtrl.registerViewportResizeListener(t),this.gridBodyCtrl.registerBodyViewportResizeListener(t)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.centerContainerCtrl.isViewportInTheDOMTree()){this.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const t=this.centerContainerCtrl.getCenterWidth();t!==this.centerWidth&&(this.centerWidth=t,this.columnModel.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}keepPinnedColumnsNarrowerThanViewport(){const t=this.gridBodyCtrl.getBodyViewportElement(),e=Bu(t);if(e<=50)return;let n=this.getPinnedColumnsOverflowingViewport(e-50);const r=this.gos.getCallback("processUnpinnedColumns");n.length&&(r&&(n=r({columns:n,viewportWidth:e})),this.columnModel.setColumnsPinned(n,null,"viewportSizeFeature"))}getPinnedColumnsOverflowingViewport(t){const e=this.pinnedWidthService.getPinnedRightWidth(),n=this.pinnedWidthService.getPinnedLeftWidth(),r=e+n;if(r<t)return[];const i=[...this.columnModel.getDisplayedLeftColumns()],s=[...this.columnModel.getDisplayedRightColumns()];let o=0,a=0,l=0;const u=[];let c=r-l-t;for(;(a<i.length||o<s.length)&&c>0;){if(o<s.length){const d=s[o++];c-=d.getActualWidth(),u.push(d)}if(a<i.length&&c>0){const d=i[a++];c-=d.getActualWidth(),u.push(d)}}return u}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const t=this.gridBodyCtrl.getBodyViewportElement(),e=xm(t);if(this.bodyHeight!==e){this.bodyHeight=e;const n={type:x.EVENT_BODY_HEIGHT_CHANGED};this.eventService.dispatchEvent(n)}}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){const t={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(t)}isHorizontalScrollShowing(){return this.centerContainerCtrl.isHorizontalScrollShowing()}onHorizontalViewportChanged(){const t=this.centerContainerCtrl.getCenterWidth(),e=this.centerContainerCtrl.getViewportScrollLeft();this.columnModel.setViewportPosition(t,e)}};w([O("ctrlsService")],Th.prototype,"ctrlsService",2);w([O("pinnedWidthService")],Th.prototype,"pinnedWidthService",2);w([O("columnModel")],Th.prototype,"columnModel",2);w([O("scrollVisibleService")],Th.prototype,"scrollVisibleService",2);w([te],Th.prototype,"postConstruct",1);var XI=class extends ee{constructor(t){super(),this.element=t}postConstruct(){this.addManagedListener(this.eventService,x.EVENT_LEFT_PINNED_WIDTH_CHANGED,this.onPinnedLeftWidthChanged.bind(this))}onPinnedLeftWidthChanged(){const t=this.pinnedWidthService.getPinnedLeftWidth(),e=t>0;Ue(this.element,e),Bi(this.element,t)}getWidth(){return this.pinnedWidthService.getPinnedLeftWidth()}};w([O("pinnedWidthService")],XI.prototype,"pinnedWidthService",2);w([te],XI.prototype,"postConstruct",1);var JI=class extends ee{constructor(t){super(),this.element=t}postConstruct(){this.addManagedListener(this.eventService,x.EVENT_RIGHT_PINNED_WIDTH_CHANGED,this.onPinnedRightWidthChanged.bind(this))}onPinnedRightWidthChanged(){const t=this.pinnedWidthService.getPinnedRightWidth(),e=t>0;Ue(this.element,e),Bi(this.element,t)}getWidth(){return this.pinnedWidthService.getPinnedRightWidth()}};w([O("pinnedWidthService")],JI.prototype,"pinnedWidthService",2);w([te],JI.prototype,"postConstruct",1);var EE=class extends ee{constructor(t,e){super(),this.eContainer=t,this.eViewport=e}postConstruct(){this.addManagedListener(this.eventService,x.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onHeightChanged.bind(this))}onHeightChanged(){const t=this.maxDivHeightScaler.getUiContainerHeight(),e=t!=null?`${t}px`:"";this.eContainer.style.height=e,this.eViewport&&(this.eViewport.style.height=e)}};w([O("rowContainerHeightService")],EE.prototype,"maxDivHeightScaler",2);w([te],EE.prototype,"postConstruct",1);var bE=class extends ee{constructor(t){super(),this.eContainer=t}postConstruct(){if(!this.rangeService)return;this.params={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)},this.addManagedPropertyListener("enableRangeSelection",e=>{if(e.currentValue){this.enableFeature();return}this.disableFeature()}),this.addDestroyFunc(()=>this.disableFeature()),this.gos.get("enableRangeSelection")&&this.enableFeature()}enableFeature(){this.dragService.addDragSource(this.params)}disableFeature(){this.dragService.removeDragSource(this.params)}};w([O("dragService")],bE.prototype,"dragService",2);w([ut("rangeService")],bE.prototype,"rangeService",2);w([te],bE.prototype,"postConstruct",1);var Rh=class extends ee{constructor(t,e=!1){super(),this.callback=t,this.addSpacer=e}postConstruct(){const t=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",t),this.addManagedListener(this.eventService,x.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED,t),this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_CHANGED,t),this.addManagedListener(this.eventService,x.EVENT_LEFT_PINNED_WIDTH_CHANGED,t),this.addSpacer&&(this.addManagedListener(this.eventService,x.EVENT_RIGHT_PINNED_WIDTH_CHANGED,t),this.addManagedListener(this.eventService,x.EVENT_SCROLL_VISIBILITY_CHANGED,t),this.addManagedListener(this.eventService,x.EVENT_SCROLLBAR_WIDTH_CHANGED,t)),this.setWidth()}setWidth(){const{columnModel:t}=this,e=this.gos.isDomLayout("print"),n=t.getBodyContainerWidth(),r=t.getDisplayedColumnsLeftWidth(),i=t.getDisplayedColumnsRightWidth();let s;e?s=n+r+i:(s=n,this.addSpacer&&(this.gos.get("enableRtl")?r:i)===0&&this.scrollVisibleService.isVerticalScrollShowing()&&(s+=this.gos.getScrollbarWidth())),this.callback(s)}};w([O("columnModel")],Rh.prototype,"columnModel",2);w([O("scrollVisibleService")],Rh.prototype,"scrollVisibleService",2);w([te],Rh.prototype,"postConstruct",1);var Rt=(t=>(t.LEFT="left",t.RIGHT="right",t.CENTER="center",t.FULL_WIDTH="fullWidth",t.TOP_LEFT="topLeft",t.TOP_RIGHT="topRight",t.TOP_CENTER="topCenter",t.TOP_FULL_WIDTH="topFullWidth",t.STICKY_TOP_LEFT="stickyTopLeft",t.STICKY_TOP_RIGHT="stickyTopRight",t.STICKY_TOP_CENTER="stickyTopCenter",t.STICKY_TOP_FULL_WIDTH="stickyTopFullWidth",t.STICKY_BOTTOM_LEFT="stickyBottomLeft",t.STICKY_BOTTOM_RIGHT="stickyBottomRight",t.STICKY_BOTTOM_CENTER="stickyBottomCenter",t.STICKY_BOTTOM_FULL_WIDTH="stickyBottomFullWidth",t.BOTTOM_LEFT="bottomLeft",t.BOTTOM_RIGHT="bottomRight",t.BOTTOM_CENTER="bottomCenter",t.BOTTOM_FULL_WIDTH="bottomFullWidth",t))(Rt||{});function mz(t){switch(t){case"center":case"topCenter":case"stickyTopCenter":case"bottomCenter":case"stickyBottomCenter":return"center";case"left":case"topLeft":case"stickyTopLeft":case"bottomLeft":case"stickyBottomLeft":return"left";case"right":case"topRight":case"stickyTopRight":case"bottomRight":case"stickyBottomRight":return"right";case"fullWidth":case"topFullWidth":case"stickyTopFullWidth":case"bottomFullWidth":case"stickyBottomFullWidth":return"fullWidth";default:throw Error("Invalid Row Container Type")}}var Nre=fa([["center","ag-center-cols-container"],["left","ag-pinned-left-cols-container"],["right","ag-pinned-right-cols-container"],["fullWidth","ag-full-width-container"],["topCenter","ag-floating-top-container"],["topLeft","ag-pinned-left-floating-top"],["topRight","ag-pinned-right-floating-top"],["topFullWidth","ag-floating-top-full-width-container"],["stickyTopCenter","ag-sticky-top-container"],["stickyTopLeft","ag-pinned-left-sticky-top"],["stickyTopRight","ag-pinned-right-sticky-top"],["stickyTopFullWidth","ag-sticky-top-full-width-container"],["stickyBottomCenter","ag-sticky-bottom-container"],["stickyBottomLeft","ag-pinned-left-sticky-bottom"],["stickyBottomRight","ag-pinned-right-sticky-bottom"],["stickyBottomFullWidth","ag-sticky-bottom-full-width-container"],["bottomCenter","ag-floating-bottom-container"],["bottomLeft","ag-pinned-left-floating-bottom"],["bottomRight","ag-pinned-right-floating-bottom"],["bottomFullWidth","ag-floating-bottom-full-width-container"]]),Lre=fa([["center","ag-center-cols-viewport"],["topCenter","ag-floating-top-viewport"],["stickyTopCenter","ag-sticky-top-viewport"],["bottomCenter","ag-floating-bottom-viewport"],["stickyBottomCenter","ag-sticky-bottom-viewport"]]),qu=class vz extends ee{constructor(e){super(),this.visible=!0,this.EMPTY_CTRLS=[],this.name=e,this.isFullWithContainer=this.name==="topFullWidth"||this.name==="stickyTopFullWidth"||this.name==="stickyBottomFullWidth"||this.name==="bottomFullWidth"||this.name==="fullWidth"}static getRowContainerCssClasses(e){const n=Nre.get(e),r=Lre.get(e);return{container:n,viewport:r}}static getPinned(e){switch(e){case"bottomLeft":case"topLeft":case"stickyTopLeft":case"stickyBottomLeft":case"left":return"left";case"bottomRight":case"topRight":case"stickyTopRight":case"stickyBottomRight":case"right":return"right";default:return null}}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>this.viewportSizeFeature=this.createManagedBean(new Th(this)))}registerWithCtrlsService(){switch(this.name){case"fullWidth":case"topFullWidth":case"stickyTopFullWidth":case"bottomFullWidth":case"stickyBottomFullWidth":return;default:this.ctrlsService.register(this.name,this)}}forContainers(e,n){e.indexOf(this.name)>=0&&n()}getContainerElement(){return this.eContainer}getViewportSizeFeature(){return this.viewportSizeFeature}setComp(e,n,r){this.comp=e,this.eContainer=n,this.eViewport=r,this.createManagedBean(new Qr(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder(),this.stopHScrollOnPinnedRows();const i=["topCenter","topLeft","topRight"],s=["stickyTopCenter","stickyTopLeft","stickyTopRight"],o=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],a=["bottomCenter","bottomLeft","bottomRight"],l=["center","left","right"],u=[...i,...a,...l,...s,...o],c=["center","left","right","fullWidth"],d=["center","topCenter","stickyTopCenter","bottomCenter","stickyBottomCenter"],h=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],f=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"];this.forContainers(h,()=>{this.pinnedWidthFeature=this.createManagedBean(new XI(this.eContainer)),this.addManagedListener(this.eventService,x.EVENT_LEFT_PINNED_WIDTH_CHANGED,()=>this.onPinnedWidthChanged())}),this.forContainers(f,()=>{this.pinnedWidthFeature=this.createManagedBean(new JI(this.eContainer)),this.addManagedListener(this.eventService,x.EVENT_RIGHT_PINNED_WIDTH_CHANGED,()=>this.onPinnedWidthChanged())}),this.forContainers(c,()=>this.createManagedBean(new EE(this.eContainer,this.name==="center"?r:void 0))),this.forContainers(u,()=>this.createManagedBean(new bE(this.eContainer))),this.forContainers(d,()=>this.createManagedBean(new Rh(g=>this.comp.setContainerWidth(`${g}px`)))),this.addListeners(),this.registerWithCtrlsService()}addListeners(){this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_CHANGED,()=>this.onDisplayedColumnsChanged()),this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,()=>this.onDisplayedColumnsWidthChanged()),this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_ROWS_CHANGED,e=>this.onDisplayedRowsChanged(e.afterScroll)),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()}listenOnDomOrder(){if(["stickyTopCenter","stickyTopLeft","stickyTopRight","stickyTopFullWidth","stickyBottomCenter","stickyBottomLeft","stickyBottomRight","stickyBottomFullWidth"].indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}const r=()=>{const i=this.gos.get("ensureDomOrder"),s=this.gos.isDomLayout("print");this.comp.setDomOrder(i||s)};this.addManagedPropertyListener("domLayout",r),r()}stopHScrollOnPinnedRows(){this.forContainers(["topCenter","stickyTopCenter","bottomCenter","stickyBottomCenter"],()=>{const e=()=>this.eViewport.scrollLeft=0;this.addManagedListener(this.eViewport,"scroll",e)})}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}onDisplayedColumnsWidthChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){const e=n=>{this.dragService.isDragging()&&n.cancelable&&n.preventDefault()};this.eContainer.addEventListener("touchmove",e,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",e))}onHorizontalViewportChanged(e=!1){const n=this.getCenterWidth(),r=this.getCenterViewportScrollLeft();this.columnModel.setViewportPosition(n,r,e)}getCenterWidth(){return Bu(this.eViewport)}getCenterViewportScrollLeft(){return sg(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const n=this.resizeObserverService.observeResize(this.eViewport,e);this.addDestroyFunc(()=>n())}isViewportInTheDOMTree(){return DI(this.eViewport)}getViewportScrollLeft(){return sg(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||aU(this.eViewport)}getViewportElement(){return this.eViewport}setContainerTranslateX(e){this.eContainer.style.transform=`translateX(${e}px)`}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){og(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!vz.getPinned(this.name)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){const n=this.getRowCtrls();if(!this.visible||n.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}const r=this.gos.isDomLayout("print"),s=this.gos.get("embedFullWidthRows")||r,o=n.filter(a=>{const l=a.isFullWidth();return this.isFullWithContainer?!s&&l:s||!l});this.comp.setRowCtrls({rowCtrls:o,useFlushSync:e})}getRowCtrls(){switch(this.name){case"topCenter":case"topLeft":case"topRight":case"topFullWidth":return this.rowRenderer.getTopRowCtrls();case"stickyTopCenter":case"stickyTopLeft":case"stickyTopRight":case"stickyTopFullWidth":return this.rowRenderer.getStickyTopRowCtrls();case"stickyBottomCenter":case"stickyBottomLeft":case"stickyBottomRight":case"stickyBottomFullWidth":return this.rowRenderer.getStickyBottomRowCtrls();case"bottomCenter":case"bottomLeft":case"bottomRight":case"bottomFullWidth":return this.rowRenderer.getBottomRowCtrls();default:return this.rowRenderer.getCentreRowCtrls()}}};w([O("dragService")],qu.prototype,"dragService",2);w([O("ctrlsService")],qu.prototype,"ctrlsService",2);w([O("columnModel")],qu.prototype,"columnModel",2);w([O("resizeObserverService")],qu.prototype,"resizeObserverService",2);w([O("rowRenderer")],qu.prototype,"rowRenderer",2);w([te],qu.prototype,"postConstruct",1);var KC=qu,kre=`<div class="ag-root ag-unselectable" role="treegrid">
        <ag-header-root ref="gridHeader"></ag-header-root>
        <div class="ag-floating-top" ref="eTop" role="presentation">
            <ag-row-container ref="topLeftContainer" name="topLeft"></ag-row-container>
            <ag-row-container ref="topCenterContainer" name="topCenter"></ag-row-container>
            <ag-row-container ref="topRightContainer" name="topRight"></ag-row-container>
            <ag-row-container ref="topFullWidthContainer" name="topFullWidth"></ag-row-container>
        </div>
        <div class="ag-body" ref="eBody" role="presentation">
            <div class="ag-body-viewport" ref="eBodyViewport" role="presentation">
                <ag-row-container ref="leftContainer" name="left"></ag-row-container>
                <ag-row-container ref="centerContainer" name="center"></ag-row-container>
                <ag-row-container ref="rightContainer" name="right"></ag-row-container>
                <ag-row-container ref="fullWidthContainer" name="fullWidth"></ag-row-container>
            </div>
            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>
        </div>
        <div class="ag-sticky-top" ref="eStickyTop" role="presentation">
            <ag-row-container ref="stickyTopLeftContainer" name="stickyTopLeft"></ag-row-container>
            <ag-row-container ref="stickyTopCenterContainer" name="stickyTopCenter"></ag-row-container>
            <ag-row-container ref="stickyTopRightContainer" name="stickyTopRight"></ag-row-container>
            <ag-row-container ref="stickyTopFullWidthContainer" name="stickyTopFullWidth"></ag-row-container>
        </div>
        <div class="ag-sticky-bottom" ref="eStickyBottom" role="presentation">
            <ag-row-container ref="stickyBottomLeftContainer" name="stickyBottomLeft"></ag-row-container>
            <ag-row-container ref="stickyBottomCenterContainer" name="stickyBottomCenter"></ag-row-container>
            <ag-row-container ref="stickyBottomRightContainer" name="stickyBottomRight"></ag-row-container>
            <ag-row-container ref="stickyBottomFullWidthContainer" name="stickyBottomFullWidth"></ag-row-container>
        </div>
        <div class="ag-floating-bottom" ref="eBottom" role="presentation">
            <ag-row-container ref="bottomLeftContainer" name="bottomLeft"></ag-row-container>
            <ag-row-container ref="bottomCenterContainer" name="bottomCenter"></ag-row-container>
            <ag-row-container ref="bottomRightContainer" name="bottomRight"></ag-row-container>
            <ag-row-container ref="bottomFullWidthContainer" name="bottomFullWidth"></ag-row-container>
        </div>
        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>
        <ag-overlay-wrapper></ag-overlay-wrapper>
    </div>`,ws=class extends Ae{constructor(){super(kre)}init(){const e=(r,i)=>{const s=`${r}px`;i.style.minHeight=s,i.style.height=s},n={setRowAnimationCssOnBodyViewport:(r,i)=>this.setRowAnimationCssOnBodyViewport(r,i),setColumnCount:r=>jj(this.getGui(),r),setRowCount:r=>Wj(this.getGui(),r),setTopHeight:r=>e(r,this.eTop),setBottomHeight:r=>e(r,this.eBottom),setTopDisplay:r=>this.eTop.style.display=r,setBottomDisplay:r=>this.eBottom.style.display=r,setStickyTopHeight:r=>this.eStickyTop.style.height=r,setStickyTopTop:r=>this.eStickyTop.style.top=r,setStickyTopWidth:r=>this.eStickyTop.style.width=r,setStickyBottomHeight:r=>this.eStickyBottom.style.height=r,setStickyBottomBottom:r=>this.eStickyBottom.style.bottom=r,setStickyBottomWidth:r=>this.eStickyBottom.style.width=r,setColumnMovingCss:(r,i)=>this.addOrRemoveCssClass(r,i),updateLayoutClasses:(r,i)=>{[this.eBodyViewport.classList,this.eBody.classList].forEach(o=>{o.toggle("ag-layout-auto-height",i.autoHeight),o.toggle("ag-layout-normal",i.normal),o.toggle("ag-layout-print",i.print)}),this.addOrRemoveCssClass("ag-layout-auto-height",i.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",i.normal),this.addOrRemoveCssClass("ag-layout-print",i.print)},setAlwaysVerticalScrollClass:(r,i)=>this.eBodyViewport.classList.toggle(hz,i),registerBodyViewportResizeListener:r=>{const i=this.resizeObserverService.observeResize(this.eBodyViewport,r);this.addDestroyFunc(()=>i())},setPinnedTopBottomOverflowY:r=>this.eTop.style.overflowY=this.eBottom.style.overflowY=r,setCellSelectableCss:(r,i)=>{[this.eTop,this.eBodyViewport,this.eBottom].forEach(s=>s.classList.toggle(r,i))},setBodyViewportWidth:r=>this.eBodyViewport.style.width=r};this.ctrl=this.createManagedBean(new pr),this.ctrl.setComp(n,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop,this.eStickyBottom),(this.rangeService&&this.gos.get("enableRangeSelection")||this.gos.get("rowSelection")==="multiple")&&$j(this.getGui(),!0)}setRowAnimationCssOnBodyViewport(e,n){const r=this.eBodyViewport.classList;r.toggle("ag-row-animation",n),r.toggle("ag-row-no-animation",!n)}getFloatingTopBottom(){return[this.eTop,this.eBottom]}};w([O("resizeObserverService")],ws.prototype,"resizeObserverService",2);w([ut("rangeService")],ws.prototype,"rangeService",2);w([ne("eBodyViewport")],ws.prototype,"eBodyViewport",2);w([ne("eStickyTop")],ws.prototype,"eStickyTop",2);w([ne("eStickyBottom")],ws.prototype,"eStickyBottom",2);w([ne("eTop")],ws.prototype,"eTop",2);w([ne("eBottom")],ws.prototype,"eBottom",2);w([ne("gridHeader")],ws.prototype,"headerRootComp",2);w([ne("eBody")],ws.prototype,"eBody",2);w([te],ws.prototype,"init",1);var xd=class extends ee{postConstruct(){this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this))}onDisplayedColumnsChanged(){this.update()}onDisplayedColumnsWidthChanged(){this.update()}update(){this.columnAnimationService.isActive()?this.columnAnimationService.executeLaterVMTurn(()=>{this.columnAnimationService.executeLaterVMTurn(()=>this.updateImpl())}):this.updateImpl()}updateImpl(){const t=this.ctrlsService.get("center");if(!t||this.columnAnimationService.isActive())return;const e={horizontalScrollShowing:t.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(e)}setScrollsVisible(t){if(this.horizontalScrollShowing!==t.horizontalScrollShowing||this.verticalScrollShowing!==t.verticalScrollShowing){this.horizontalScrollShowing=t.horizontalScrollShowing,this.verticalScrollShowing=t.verticalScrollShowing;const n={type:x.EVENT_SCROLL_VISIBILITY_CHANGED};this.eventService.dispatchEvent(n)}}isHorizontalScrollShowing(){return this.horizontalScrollShowing}isVerticalScrollShowing(){return this.verticalScrollShowing}};w([O("ctrlsService")],xd.prototype,"ctrlsService",2);w([O("columnAnimationService")],xd.prototype,"columnAnimationService",2);w([te],xd.prototype,"postConstruct",1);xd=w([ce("scrollVisibleService")],xd);var Co=class extends ee{constructor(){super(...arguments),this.gridInstanceId=Co.gridInstanceSequence.next()}stampTopLevelGridCompWithGridInstance(t){t[Co.GRID_DOM_KEY]=this.gridInstanceId}getRenderedCellForEvent(t){return HC(this.gos,t.target,ru.DOM_DATA_KEY_CELL_CTRL)}isEventFromThisGrid(t){return this.isElementInThisGrid(t.target)}isElementInThisGrid(t){let e=t;for(;e;){const n=e[Co.GRID_DOM_KEY];if(J(n))return n===this.gridInstanceId;e=e.parentElement}return!1}getCellPositionForEvent(t){const e=this.getRenderedCellForEvent(t);return e?e.getCellPosition():null}getNormalisedPosition(t){const e=this.gos.isDomLayout("normal"),n=t;let r,i;if(n.clientX!=null||n.clientY!=null?(r=n.clientX,i=n.clientY):(r=n.x,i=n.y),e){const s=this.ctrlsService.getGridBodyCtrl(),o=s.getScrollFeature().getVScrollPosition(),a=s.getScrollFeature().getHScrollPosition();r+=a.left,i+=o.top}return{x:r,y:i}}};Co.gridInstanceSequence=new Ad;Co.GRID_DOM_KEY="__ag_grid_instance";w([O("ctrlsService")],Co.prototype,"ctrlsService",2);Co=w([ce("mouseEventService")],Co);var dr=class extends ee{constructor(){super(),this.onPageDown=o_(this.onPageDown,100),this.onPageUp=o_(this.onPageUp,100)}postConstruct(){this.ctrlsService.whenReady(t=>{this.gridBodyCon=t.gridBodyCtrl})}handlePageScrollingKey(t,e=!1){const n=t.key,r=t.altKey,i=t.ctrlKey||t.metaKey,s=!!this.rangeService&&t.shiftKey,o=this.mouseEventService.getCellPositionForEvent(t);let a=!1;switch(n){case H.PAGE_HOME:case H.PAGE_END:!i&&!r&&(this.onHomeOrEndKey(n),a=!0);break;case H.LEFT:case H.RIGHT:case H.UP:case H.DOWN:if(!o)return!1;i&&!r&&!s&&(this.onCtrlUpDownLeftRight(n,o),a=!0);break;case H.PAGE_DOWN:case H.PAGE_UP:!i&&!r&&(a=this.handlePageUpDown(n,o,e));break}return a&&t.preventDefault(),a}handlePageUpDown(t,e,n){return n&&(e=this.focusService.getFocusedCell()),e?(t===H.PAGE_UP?this.onPageUp(e):this.onPageDown(e),!0):!1}navigateTo(t){var e;const{scrollIndex:n,scrollType:r,scrollColumn:i,focusIndex:s,focusColumn:o}=t;J(i)&&!i.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(i),J(n)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(n,r),t.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(s),this.focusService.setFocusedCell({rowIndex:s,column:o,rowPinned:null,forceBrowserFocus:!0}),(e=this.rangeService)==null||e.setRangeToCell({rowIndex:s,rowPinned:null,column:o})}onPageDown(t){const n=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),r=this.getViewportHeight(),i=this.paginationProxy.getPixelOffset(),s=n.top+r,o=this.paginationProxy.getRowIndexAtPixel(s+i);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(t,o):this.navigateToNextPage(t,o)}onPageUp(t){const n=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),r=this.paginationProxy.getPixelOffset(),i=n.top,s=this.paginationProxy.getRowIndexAtPixel(i+r);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(t,s,!0):this.navigateToNextPage(t,s,!0)}navigateToNextPage(t,e,n=!1){const r=this.getViewportHeight(),i=this.paginationProxy.getPageFirstRow(),s=this.paginationProxy.getPageLastRow(),o=this.paginationProxy.getPixelOffset(),a=this.paginationProxy.getRow(t.rowIndex),l=n?(a==null?void 0:a.rowHeight)-r-o:r-o,u=(a==null?void 0:a.rowTop)+l;let c=this.paginationProxy.getRowIndexAtPixel(u+o);if(c===t.rowIndex){const h=n?-1:1;e=c=t.rowIndex+h}let d;n?(d="bottom",c<i&&(c=i),e<i&&(e=i)):(d="top",c>s&&(c=s),e>s&&(e=s)),this.isRowTallerThanView(c)&&(e=c,d="top"),this.navigateTo({scrollIndex:e,scrollType:d,scrollColumn:null,focusIndex:c,focusColumn:t.column})}navigateToNextPageWithAutoHeight(t,e,n=!1){this.navigateTo({scrollIndex:e,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:e,focusColumn:t.column}),setTimeout(()=>{const r=this.getNextFocusIndexForAutoHeight(t,n);this.navigateTo({scrollIndex:e,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:r,focusColumn:t.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(t,e=!1){var n;const r=e?-1:1,i=this.getViewportHeight(),s=this.paginationProxy.getPageLastRow();let o=0,a=t.rowIndex;for(;a>=0&&a<=s;){const l=this.paginationProxy.getRow(a);if(l){const u=(n=l.rowHeight)!=null?n:0;if(o+u>i)break;o+=u}a+=r}return Math.max(0,Math.min(a,s))}getViewportHeight(){const{gridBodyCtrl:t,center:e}=this.ctrlsService.getParams(),n=t.getScrollFeature().getVScrollPosition(),r=this.gos.getScrollbarWidth();let i=n.bottom-n.top;return e.isHorizontalScrollShowing()&&(i-=r),i}isRowTallerThanView(t){const e=this.paginationProxy.getRow(t);if(!e)return!1;const n=e.rowHeight;return typeof n!="number"?!1:n>this.getViewportHeight()}onCtrlUpDownLeftRight(t,e){const n=this.cellNavigationService.getNextCellToFocus(t,e,!0),{rowIndex:r,column:i}=n;this.navigateTo({scrollIndex:r,scrollType:null,scrollColumn:i,focusIndex:r,focusColumn:i})}onHomeOrEndKey(t){const e=t===H.PAGE_HOME,n=this.columnModel.getAllDisplayedColumns(),r=e?n[0]:Je(n),i=e?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow();this.navigateTo({scrollIndex:i,scrollType:null,scrollColumn:r,focusIndex:i,focusColumn:r})}onTabKeyDown(t,e){const n=e.shiftKey,r=this.tabToNextCellCommon(t,n,e);if(r!==!1){r&&e.preventDefault();return}if(n){const{rowIndex:i,rowPinned:s}=t.getRowPosition();(s?i===0:i===this.paginationProxy.getPageFirstRow())&&(this.gos.get("headerHeight")===0||this.gos.get("suppressHeaderFocus")?this.focusService.focusNextGridCoreContainer(!0,!0):(e.preventDefault(),this.focusService.focusPreviousFromFirstCell(e)))}else t instanceof ru&&t.focusCell(!0),this.focusService.focusNextGridCoreContainer(n)&&e.preventDefault()}tabToNextCell(t,e){const n=this.focusService.getFocusedCell();if(!n)return!1;let r=this.getCellByPosition(n);return!r&&(r=this.rowRenderer.getRowByPosition(n),!r||!r.isFullWidth())?!1:!!this.tabToNextCellCommon(r,t,e)}tabToNextCellCommon(t,e,n){let r=t.isEditing();if(!r&&t instanceof ru){const o=t.getRowCtrl();o&&(r=o.isEditing())}let i;return r?this.gos.get("editType")==="fullRow"?i=this.moveToNextEditingRow(t,e,n):i=this.moveToNextEditingCell(t,e,n):i=this.moveToNextCellNotEditing(t,e),i===null?i:i||!!this.focusService.getFocusedHeader()}moveToNextEditingCell(t,e,n=null){const r=t.getCellPosition();t.getGui().focus(),t.stopEditing();const i=this.findNextCellToFocusOn(r,e,!0);return i===!1?null:i==null?!1:(i.startEditing(null,!0,n),i.focusCell(!1),!0)}moveToNextEditingRow(t,e,n=null){const r=t.getCellPosition(),i=this.findNextCellToFocusOn(r,e,!0);if(i===!1)return null;if(i==null)return!1;const s=i.getCellPosition(),o=this.isCellEditable(r),a=this.isCellEditable(s),l=s&&r.rowIndex===s.rowIndex&&r.rowPinned===s.rowPinned;return o&&t.setFocusOutOnEditor(),l||(t.getRowCtrl().stopEditing(),i.getRowCtrl().startRowEditing(void 0,void 0,n)),a?(i.setFocusInOnEditor(),i.focusCell()):i.focusCell(!0),!0}moveToNextCellNotEditing(t,e){const n=this.columnModel.getAllDisplayedColumns();let r;t instanceof iu?r=Dt(me({},t.getRowPosition()),{column:e?n[0]:Je(n)}):r=t.getCellPosition();const i=this.findNextCellToFocusOn(r,e,!1);if(i===!1)return null;if(i instanceof ru)i.focusCell(!0);else if(i)return this.tryToFocusFullWidthRow(i.getRowPosition(),e);return J(i)}findNextCellToFocusOn(t,e,n){var r;let i=t;for(;;){t!==i&&(t=i),e||(i=this.getLastCellOfColSpan(i)),i=this.cellNavigationService.getNextTabbedCell(i,e);const s=this.gos.getCallback("tabToNextCell");if(J(s)){const u=s({backwards:e,editing:n,previousCellPosition:t,nextCellPosition:i||null});if(u===!0||u===null)u===null&&we("Returning `null` from tabToNextCell is deprecated. Return `true` to stay on the current cell, or `false` to let the browser handle the tab behaviour."),i=t;else{if(u===!1)return!1;u.floating&&(we("tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?"),u.rowPinned=u.floating),i={rowIndex:u.rowIndex,column:u.column,rowPinned:u.rowPinned}}}if(!i)return null;if(i.rowIndex<0){const l=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:l+i.rowIndex,column:i.column},fromCell:!0}),null}const o=this.gos.get("editType")==="fullRow";if(n&&!o&&!this.isCellEditable(i))continue;this.ensureCellVisible(i);const a=this.getCellByPosition(i);if(!a){const l=this.rowRenderer.getRowByPosition(i);if(!l||!l.isFullWidth()||n)continue;return l}if(!a.isSuppressNavigable())return(r=this.rangeService)==null||r.setRangeToCell(i),a}}isCellEditable(t){const e=this.lookupRowNodeForCell(t);return e?t.column.isCellEditable(e):!1}getCellByPosition(t){const e=this.rowRenderer.getRowByPosition(t);return e?e.getCellCtrl(t.column):null}lookupRowNodeForCell(t){return t.rowPinned==="top"?this.pinnedRowModel.getPinnedTopRow(t.rowIndex):t.rowPinned==="bottom"?this.pinnedRowModel.getPinnedBottomRow(t.rowIndex):this.paginationProxy.getRow(t.rowIndex)}navigateToNextCell(t,e,n,r){let i=n,s=!1;for(;i&&(i===n||!this.isValidNavigateCell(i));)this.gos.get("enableRtl")?e===H.LEFT&&(i=this.getLastCellOfColSpan(i)):e===H.RIGHT&&(i=this.getLastCellOfColSpan(i)),i=this.cellNavigationService.getNextCellToFocus(e,i),s=Te(i);if(s&&t&&t.key===H.UP&&(i={rowIndex:-1,rowPinned:null,column:n.column}),r){const a=this.gos.getCallback("navigateToNextCell");if(J(a)){const u=a({key:e,previousCellPosition:n,nextCellPosition:i||null,event:t});J(u)?(u.floating&&(we("tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?"),u.rowPinned=u.floating),i={rowPinned:u.rowPinned,rowIndex:u.rowIndex,column:u.column}):i=null}}if(!i)return;if(i.rowIndex<0){const a=this.headerNavigationService.getHeaderRowCount();this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a+i.rowIndex,column:n.column},event:t||void 0,fromCell:!0});return}const o=this.getNormalisedPosition(i);o?this.focusPosition(o):this.tryToFocusFullWidthRow(i)}getNormalisedPosition(t){this.ensureCellVisible(t);const e=this.getCellByPosition(t);return e?(t=e.getCellPosition(),this.ensureCellVisible(t),t):null}tryToFocusFullWidthRow(t,e=!1){const n=this.columnModel.getAllDisplayedColumns(),r=this.rowRenderer.getRowByPosition(t);if(!r||!r.isFullWidth())return!1;const i=this.focusService.getFocusedCell(),s={rowIndex:t.rowIndex,rowPinned:t.rowPinned,column:t.column||(e?Je(n):n[0])};this.focusPosition(s);const o=i!=null?this.rowPositionUtils.before(s,i):!1,a={type:x.EVENT_FULL_WIDTH_ROW_FOCUSED,rowIndex:s.rowIndex,rowPinned:s.rowPinned,column:s.column,isFullWidthCell:!0,floating:s.rowPinned,fromBelow:o};return this.eventService.dispatchEvent(a),!0}focusPosition(t){var e;this.focusService.setFocusedCell({rowIndex:t.rowIndex,column:t.column,rowPinned:t.rowPinned,forceBrowserFocus:!0}),(e=this.rangeService)==null||e.setRangeToCell(t)}isValidNavigateCell(t){return!!this.rowPositionUtils.getRowNode(t)}getLastCellOfColSpan(t){const e=this.getCellByPosition(t);if(!e)return t;const n=e.getColSpanningList();return n.length===1?t:{rowIndex:t.rowIndex,column:Je(n),rowPinned:t.rowPinned}}ensureCellVisible(t){const e=this.gos.isGroupRowsSticky(),n=this.rowModel.getRow(t.rowIndex);!(e&&(n==null?void 0:n.sticky))&&Te(t.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(t.rowIndex),t.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(t.column)}};w([O("mouseEventService")],dr.prototype,"mouseEventService",2);w([O("paginationProxy")],dr.prototype,"paginationProxy",2);w([O("focusService")],dr.prototype,"focusService",2);w([O("columnModel")],dr.prototype,"columnModel",2);w([O("rowModel")],dr.prototype,"rowModel",2);w([O("ctrlsService")],dr.prototype,"ctrlsService",2);w([O("rowRenderer")],dr.prototype,"rowRenderer",2);w([O("headerNavigationService")],dr.prototype,"headerNavigationService",2);w([O("rowPositionUtils")],dr.prototype,"rowPositionUtils",2);w([O("cellNavigationService")],dr.prototype,"cellNavigationService",2);w([O("pinnedRowModel")],dr.prototype,"pinnedRowModel",2);w([ut("rangeService")],dr.prototype,"rangeService",2);w([te],dr.prototype,"postConstruct",1);dr=w([ce("navigationService")],dr);var ZI=class yz extends ju{constructor(e){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=e}postConstruct(){this.gos.setDomData(this.getGui(),yz.DOM_KEY_POPUP_EDITOR_WRAPPER,!0),this.addKeyDownListener()}addKeyDownListener(){const e=this.getGui(),n=this.params,r=i=>{jC(this.gos,i,n.node,n.column,!0)||n.onKeyDown(i)};this.addManagedListener(e,"keydown",r)}};ZI.DOM_KEY_POPUP_EDITOR_WRAPPER="popupEditorWrapper";w([te],ZI.prototype,"postConstruct",1);var Cz=ZI,Gre=class extends Ae{constructor(e,n,r,i,s){super(),this.rendererVersion=0,this.editorVersion=0,this.beans=e,this.column=n.getColumn(),this.rowNode=n.getRowNode(),this.rowCtrl=n.getRowCtrl(),this.eRow=i,this.cellCtrl=n;const o=document.createElement("div");o.setAttribute("comp-id",`${this.getCompId()}`),this.setTemplateFromElement(o);const a=this.getGui();this.forceWrapper=n.isForceWrapper(),this.refreshWrapper(!1);const l=(d,h)=>{h!=null&&h!=""?a.setAttribute(d,h):a.removeAttribute(d)};Ut(a,n.getCellAriaRole()),l("col-id",n.getColumnIdSanitised());const u=n.getTabIndex();u!==void 0&&l("tabindex",u.toString());const c={addOrRemoveCssClass:(d,h)=>this.addOrRemoveCssClass(d,h),setUserStyles:d=>FI(a,d),getFocusableElement:()=>this.getFocusableElement(),setIncludeSelection:d=>this.includeSelection=d,setIncludeRowDrag:d=>this.includeRowDrag=d,setIncludeDndSource:d=>this.includeDndSource=d,setRenderDetails:(d,h,f)=>this.setRenderDetails(d,h,f),setEditDetails:(d,h,f)=>this.setEditDetails(d,h,f),getCellEditor:()=>this.cellEditor||null,getCellRenderer:()=>this.cellRenderer||null,getParentOfValue:()=>this.getParentOfValue()};n.setComp(c,this.getGui(),this.eCellWrapper,r,s)}getParentOfValue(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.getGui()}setRenderDetails(e,n,r){if(this.cellEditor&&!this.cellEditorPopupWrapper)return;this.firstRender=this.firstRender==null;const s=this.refreshWrapper(!1);this.refreshEditStyles(!1),e?!(r||s)&&this.refreshCellRenderer(e)||(this.destroyRenderer(),this.createCellRendererInstance(e)):(this.destroyRenderer(),this.insertValueWithoutCellRenderer(n))}setEditDetails(e,n,r){e?this.createCellEditorInstance(e,n,r):this.destroyEditor()}removeControls(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)}refreshWrapper(e){const n=this.includeRowDrag||this.includeDndSource||this.includeSelection,r=n||this.forceWrapper,i=r&&this.eCellWrapper==null;if(i){const c=document.createElement("div");c.setAttribute("role","presentation"),c.setAttribute("class","ag-cell-wrapper"),this.eCellWrapper=c,this.getGui().appendChild(this.eCellWrapper)}const s=!r&&this.eCellWrapper!=null;s&&(us(this.eCellWrapper),this.eCellWrapper=void 0),this.addOrRemoveCssClass("ag-cell-value",!r);const o=!e&&r,a=o&&this.eCellValue==null;if(a){const c=document.createElement("span");c.setAttribute("role","presentation"),c.setAttribute("class","ag-cell-value"),this.eCellValue=c,this.eCellWrapper.appendChild(this.eCellValue)}const l=!o&&this.eCellValue!=null;l&&(us(this.eCellValue),this.eCellValue=void 0);const u=i||s||a||l;return u&&this.removeControls(),e||n&&this.addControls(),u}addControls(){this.includeRowDrag&&this.rowDraggingComp==null&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&this.dndSourceComp==null&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&this.checkboxSelectionComp==null&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue))}createCellEditorInstance(e,n,r){const i=this.editorVersion,s=e.newAgStackInstance();if(!s)return;const{params:o}=e;s.then(l=>this.afterCellEditorCreated(i,l,o,n,r)),Te(this.cellEditor)&&o.cellStartedEdit&&this.cellCtrl.focusCell(!0)}insertValueWithoutCellRenderer(e){const n=this.getParentOfValue();en(n);const r=e!=null?sn(e,!0):null;r!=null&&(n.textContent=r)}destroyEditorAndRenderer(){this.destroyRenderer(),this.destroyEditor()}destroyRenderer(){const{context:e}=this.beans;this.cellRenderer=e.destroyBean(this.cellRenderer),us(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++}destroyEditor(){const{context:e}=this.beans;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=e.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=e.destroyBean(this.cellEditorPopupWrapper),us(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++}refreshCellRenderer(e){if(this.cellRenderer==null||this.cellRenderer.refresh==null||this.cellRendererClass!==e.componentClass)return!1;const n=this.cellRenderer.refresh(e.params);return n===!0||n===void 0}createCellRendererInstance(e){const r=!this.beans.gos.get("suppressAnimationFrame"),i=this.rendererVersion,{componentClass:s}=e,o=()=>{if(this.rendererVersion!==i||!this.isAlive())return;const l=e.newAgStackInstance(),u=this.afterCellRendererCreated.bind(this,i,s);l&&l.then(u)};r&&this.firstRender?this.beans.animationFrameService.createTask(o,this.rowNode.rowIndex,"createTasksP2"):o()}getCtrl(){return this.cellCtrl}getRowCtrl(){return this.rowCtrl}getCellRenderer(){return this.cellRenderer}getCellEditor(){return this.cellEditor}afterCellRendererCreated(e,n,r){if(!this.isAlive()||e!==this.rendererVersion){this.beans.context.destroyBean(r);return}if(this.cellRenderer=r,this.cellRendererClass=n,this.cellRendererGui=this.cellRenderer.getGui(),this.cellRendererGui!=null){const s=this.getParentOfValue();en(s),s.appendChild(this.cellRendererGui)}}afterCellEditorCreated(e,n,r,i,s){if(e!==this.editorVersion){this.beans.context.destroyBean(n);return}if(n.isCancelBeforeStart&&n.isCancelBeforeStart()){this.beans.context.destroyBean(n),this.cellCtrl.stopEditing(!0);return}if(!n.getGui){console.warn(`AG Grid: cellEditor for column ${this.column.getId()} is missing getGui() method`),this.beans.context.destroyBean(n);return}this.cellEditor=n,this.cellEditorGui=n.getGui();const l=i||n.isPopup!==void 0&&n.isPopup();l?this.addPopupCellEditor(r,s):this.addInCellEditor(),this.refreshEditStyles(!0,l),n.afterGuiAttached&&n.afterGuiAttached()}refreshEditStyles(e,n){var r;this.addOrRemoveCssClass("ag-cell-inline-editing",e&&!n),this.addOrRemoveCssClass("ag-cell-popup-editing",e&&!!n),this.addOrRemoveCssClass("ag-cell-not-inline-editing",!e||!!n),(r=this.rowCtrl)==null||r.setInlineEditingCss(e)}addInCellEditor(){const e=this.getGui();e.contains(this.beans.gos.getActiveDomElement())&&e.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui&&this.getParentOfValue().appendChild(this.cellEditorGui)}addPopupCellEditor(e,n){this.beans.gos.get("editType")==="fullRow"&&console.warn("AG Grid: popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");const r=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(new Cz(e));const i=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&i.appendChild(this.cellEditorGui);const s=this.beans.popupService,o=this.beans.gos.get("stopEditingWhenCellsLoseFocus"),a=n??(r.getPopupPosition?r.getPopupPosition():"over"),l=this.beans.gos.get("enableRtl"),u={ePopup:i,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),position:a,alignSide:l?"right":"left",keepWithinBounds:!0},c=s.positionPopupByComponent.bind(s,u),d=this.beans.localeService.getLocaleTextFunc(),h=s.addPopup({modal:o,eChild:i,closeOnEsc:!0,closedCallback:()=>{this.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback:c,ariaLabel:d("ariaLabelCellEditor","Cell Editor")});h&&(this.hideEditorPopup=h.hideFunc)}detach(){this.eRow.removeChild(this.getGui())}destroy(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),super.destroy()}clearParentOfValue(){const e=this.getGui();e.contains(this.beans.gos.getActiveDomElement())&&TI()&&e.focus({preventScroll:!0}),en(this.getParentOfValue())}},Vre=class extends Ae{constructor(e,n,r){super(),this.cellComps={},this.beans=n,this.rowCtrl=e;const i=document.createElement("div");i.setAttribute("comp-id",`${this.getCompId()}`),i.setAttribute("style",this.getInitialStyle(r)),this.setTemplateFromElement(i);const s=this.getGui(),o=s.style;this.domOrder=this.rowCtrl.getDomOrder(),Ut(s,"row");const a=this.rowCtrl.getTabIndex();a!=null&&s.setAttribute("tabindex",a.toString());const l={setDomOrder:u=>this.domOrder=u,setCellCtrls:u=>this.setCellCtrls(u),showFullWidth:u=>this.showFullWidth(u),getFullWidthCellRenderer:()=>this.getFullWidthCellRenderer(),addOrRemoveCssClass:(u,c)=>this.addOrRemoveCssClass(u,c),setUserStyles:u=>FI(s,u),setTop:u=>o.top=u,setTransform:u=>o.transform=u,setRowIndex:u=>s.setAttribute("row-index",u),setRowId:u=>s.setAttribute("row-id",u),setRowBusinessKey:u=>s.setAttribute("row-business-key",u),refreshFullWidth:u=>this.refreshFullWidth(u)};e.setComp(l,this.getGui(),r),this.addDestroyFunc(()=>{e.unsetComp(r)})}getInitialStyle(e){const n=this.rowCtrl.getInitialTransform(e);return n?`transform: ${n}`:`top: ${this.rowCtrl.getInitialRowTop(e)}`}showFullWidth(e){const n=i=>{if(this.isAlive()){const s=i.getGui();this.getGui().appendChild(s),this.rowCtrl.setupDetailRowAutoHeight(s),this.setFullWidthRowComp(i)}else this.beans.context.destroyBean(i)},r=e.newAgStackInstance();r&&r.then(n)}setCellCtrls(e){const n=Object.assign({},this.cellComps);e.forEach(i=>{const s=i.getInstanceId();this.cellComps[s]==null?this.newCellComp(i):n[s]=null});const r=Ua(n).filter(i=>i!=null);this.destroyCells(r),this.ensureDomOrder(e)}ensureDomOrder(e){if(!this.domOrder)return;const n=[];e.forEach(r=>{const i=this.cellComps[r.getInstanceId()];i&&n.push(i.getGui())}),MI(this.getGui(),n)}newCellComp(e){const n=new Gre(this.beans,e,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[e.getInstanceId()]=n,this.getGui().appendChild(n.getGui())}destroy(){super.destroy(),this.destroyAllCells()}destroyAllCells(){const e=Ua(this.cellComps).filter(n=>n!=null);this.destroyCells(e)}setFullWidthRowComp(e){this.fullWidthCellRenderer&&console.error("AG Grid - should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=e,this.addDestroyFunc(()=>{this.fullWidthCellRenderer=this.beans.context.destroyBean(this.fullWidthCellRenderer)})}getFullWidthCellRenderer(){return this.fullWidthCellRenderer}destroyCells(e){e.forEach(n=>{if(!n)return;const r=n.getCtrl().getInstanceId();this.cellComps[r]===n&&(n.detach(),n.destroy(),this.cellComps[r]=null)})}refreshFullWidth(e){const{fullWidthCellRenderer:n}=this;if(!n||!n.refresh)return!1;const r=e();return n.refresh(r)}};function Hre(){const t=Ae.elementGettingCreated.getAttribute("name"),e=KC.getRowContainerCssClasses(t);let n;return t==="center"||t==="topCenter"||t==="stickyTopCenter"||t==="bottomCenter"||t==="stickyBottomCenter"?n=`<div class="${e.viewport}" ref="eViewport" role="presentation">
                <div class="${e.container}" ref="eContainer"></div>
            </div>`:n=`<div class="${e.container}" ref="eContainer"></div>`,n}var _h=class extends Ae{constructor(){super(Hre()),this.rowComps={},this.name=Ae.elementGettingCreated.getAttribute("name"),this.type=mz(this.name)}postConstruct(){const e={setViewportHeight:r=>this.eViewport.style.height=r,setRowCtrls:({rowCtrls:r})=>this.setRowCtrls(r),setDomOrder:r=>{this.domOrder=r},setContainerWidth:r=>this.eContainer.style.width=r};this.createManagedBean(new KC(this.name)).setComp(e,this.eContainer,this.eViewport)}preDestroy(){this.setRowCtrls([])}setRowCtrls(e){const n=me({},this.rowComps);this.rowComps={},this.lastPlacedElement=null;const r=i=>{const s=i.getInstanceId(),o=n[s];if(o)this.rowComps[s]=o,delete n[s],this.ensureDomOrder(o.getGui());else{if(!i.getRowNode().displayed)return;const a=new Vre(i,this.beans,this.type);this.rowComps[s]=a,this.appendRow(a.getGui())}};e.forEach(r),Ua(n).forEach(i=>{this.eContainer.removeChild(i.getGui()),i.destroy()}),Ut(this.eContainer,"rowgroup")}appendRow(e){this.domOrder?oU(this.eContainer,e,this.lastPlacedElement):this.eContainer.appendChild(e),this.lastPlacedElement=e}ensureDomOrder(e){this.domOrder&&(OI(this.eContainer,e,this.lastPlacedElement),this.lastPlacedElement=e)}};w([O("beans")],_h.prototype,"beans",2);w([ne("eViewport")],_h.prototype,"eViewport",2);w([ne("eContainer")],_h.prototype,"eContainer",2);w([te],_h.prototype,"postConstruct",1);w([Pr],_h.prototype,"preDestroy",1);var eD=class{constructor(t){this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=t}onDragEnter(t){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;const e=t.dragItem.columns;e&&e.forEach(n=>{n.isPrimary()&&(n.isAnyFunctionActive()||(n.isAllowValue()?this.columnsToAggregate.push(n):n.isAllowRowGroup()?this.columnsToGroup.push(n):n.isAllowPivot()&&this.columnsToPivot.push(n)))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?Ie.ICON_PINNED:Ie.ICON_MOVE:null}onDragLeave(t){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(t){}onDragStop(t){this.columnsToAggregate.length>0&&this.columnModel.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.columnModel.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.columnModel.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")}};w([O("columnModel")],eD.prototype,"columnModel",2);w([O("gridOptionsService")],eD.prototype,"gos",2);var su=class{static attemptMoveColumns(t){const{isFromHeader:e,hDirection:n,xPosition:r,fromEnter:i,fakeEvent:s,pinned:o,gos:a,columnModel:l}=t,u=n===0,c=n===1;let{allMovingColumns:d}=t;if(e){let _=[];d.forEach(E=>{var R;let b=null,A=E.getParent();for(;A!=null&&A.getDisplayedLeafColumns().length===1;)b=A,A=A.getParent();b!=null?(!!((R=b.getColGroupDef())!=null&&R.marryChildren)?b.getProvidedColumnGroup().getLeafColumns():b.getLeafColumns()).forEach(k=>{_.includes(k)||_.push(k)}):_.includes(E)||_.push(E)}),d=_}const h=d.slice();l.sortColumnsLikeGridColumns(h);const f=this.calculateValidMoves({movingCols:h,draggingRight:c,xPosition:r,pinned:o,gos:a,columnModel:l}),g=this.calculateOldIndex(h,l);if(f.length===0)return;const m=f[0];let v=g!==null&&!i;if(e&&(v=g!==null),v&&!s&&(u&&m>=g||c&&m<=g))return;const C=l.getAllDisplayedColumns();let y=[],S=null;for(let _=0;_<f.length;_++){const E=f[_],R=l.getProposedColumnOrder(h,E);if(!l.doesOrderPassRules(R))continue;const b=R.filter(P=>C.includes(P));if(S===null)S=b;else if(!Os(b,S))break;const A=this.groupFragCount(R);y.push({move:E,fragCount:A})}if(y.length!==0)return y.sort((_,E)=>_.fragCount-E.fragCount),this.moveColumns(d,y[0].move,"uiColumnMoved",!1,l)}static moveColumns(t,e,n,r,i){return i.moveColumns(t,e,n,r),r?null:{columns:t,toIndex:e}}static calculateOldIndex(t,e){const n=e.getAllGridColumns(),r=Cj(t.map(l=>n.indexOf(l))),i=r[0];return Je(r)-i!==r.length-1?null:i}static groupFragCount(t){function e(r){let i=[],s=r.getOriginalParent();for(;s!=null;)i.push(s),s=s.getOriginalParent();return i}let n=0;for(let r=0;r<t.length-1;r++){let i=e(t[r]),s=e(t[r+1]);[i,s]=i.length>s.length?[i,s]:[s,i],i.forEach(o=>{s.indexOf(o)===-1&&n++})}return n}static getDisplayedColumns(t,e){switch(e){case"left":return t.getDisplayedLeftColumns();case"right":return t.getDisplayedRightColumns();default:return t.getDisplayedCenterColumns()}}static calculateValidMoves(t){const{movingCols:e,draggingRight:n,xPosition:r,pinned:i,gos:s,columnModel:o}=t;if(s.get("suppressMovableColumns")||e.some(y=>y.getColDef().suppressMovable))return[];const l=this.getDisplayedColumns(o,i),u=o.getAllGridColumns(),c=l.filter(y=>vi(e,y)),d=l.filter(y=>!vi(e,y)),h=u.filter(y=>!vi(e,y));let f=0,g=r;if(n){let y=0;c.forEach(S=>y+=S.getActualWidth()),g-=y}if(g>0){for(let y=0;y<d.length;y++){const S=d[y];if(g-=S.getActualWidth(),g<0)break;f++}n&&f++}let m;if(f>0){const y=d[f-1];m=h.indexOf(y)+1}else m=h.indexOf(d[0]),m===-1&&(m=0);const v=[m],C=(y,S)=>y-S;if(n){let y=m+1;const S=u.length-1;for(;y<=S;)v.push(y),y++;v.sort(C)}else{let y=m;const S=u.length-1;let _=u[y];for(;y<=S&&l.indexOf(_)<0;)y++,v.push(y),_=u[y];y=m-1;const E=0;for(;y>=E;)v.push(y),y--;v.sort(C).reverse()}return v}static normaliseX(t,e,n,r,i){const s=i.getHeaderRowContainerCtrl(e).getViewport();return n&&(t-=s.getBoundingClientRect().left),r.get("enableRtl")&&(t=s.clientWidth-t),e==null&&(t+=i.get("center").getCenterViewportScrollLeft()),t}},Ah=class{constructor(t){this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=t,this.isCenterContainer=!J(t)}init(){this.ctrlsService.whenReady(t=>{this.gridBodyCon=t.gridBodyCtrl})}getIconName(){return this.pinned?Ie.ICON_PINNED:Ie.ICON_MOVE}onDragEnter(t){const e=t.dragItem.columns;if(t.dragSource.type===0)this.setColumnsVisible(e,!0,"uiColumnDragged");else{const r=t.dragItem.visibleState,i=(e||[]).filter(s=>r[s.getId()]);this.setColumnsVisible(i,!0,"uiColumnDragged")}this.setColumnsPinned(e,this.pinned,"uiColumnDragged"),this.onDragging(t,!0,!0)}onDragLeave(){this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(t,e,n){if(t){const r=t.filter(i=>!i.getColDef().lockVisible);this.columnModel.setColumnsVisible(r,e,n)}}setColumnsPinned(t,e,n){if(t){const r=t.filter(i=>!i.getColDef().lockPinned);this.columnModel.setColumnsPinned(r,e,n)}}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}checkCenterForScrolling(t){if(this.isCenterContainer){const e=this.ctrlsService.get("center"),n=e.getCenterViewportScrollLeft(),r=n+e.getCenterWidth();this.gos.get("enableRtl")?(this.needToMoveRight=t<n+50,this.needToMoveLeft=t>r-50):(this.needToMoveLeft=t<n+50,this.needToMoveRight=t>r-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}}onDragging(t=this.lastDraggingEvent,e=!1,n=!1,r=!1){var i;if(r){if(this.lastMovedInfo){const{columns:c,toIndex:d}=this.lastMovedInfo;su.moveColumns(c,d,"uiColumnMoved",!0,this.columnModel)}return}if(this.lastDraggingEvent=t,Te(t.hDirection))return;const s=su.normaliseX(t.x,this.pinned,!1,this.gos,this.ctrlsService);e||this.checkCenterForScrolling(s);const o=this.normaliseDirection(t.hDirection),a=t.dragSource.type,l=((i=t.dragSource.getDragItem().columns)==null?void 0:i.filter(c=>c.getColDef().lockPinned?c.getPinned()==this.pinned:!0))||[],u=su.attemptMoveColumns({allMovingColumns:l,isFromHeader:a===1,hDirection:o,xPosition:s,pinned:this.pinned,fromEnter:e,fakeEvent:n,gos:this.gos,columnModel:this.columnModel});u&&(this.lastMovedInfo=u)}normaliseDirection(t){if(this.gos.get("enableRtl"))switch(t){case 0:return 1;case 1:return 0;default:console.error(`AG Grid: Unknown direction ${t}`)}else return t}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.needToMoveLeft?this.dragAndDropService.setGhostIcon(Ie.ICON_LEFT,!0):this.dragAndDropService.setGhostIcon(Ie.ICON_RIGHT,!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.dragAndDropService.setGhostIcon(Ie.ICON_MOVE))}moveInterval(){let t;this.intervalCount++,t=10+this.intervalCount*5,t>100&&(t=100);let e=null;const n=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?e=n.scrollHorizontally(-t):this.needToMoveRight&&(e=n.scrollHorizontally(t)),e!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;const i=this.lastDraggingEvent.dragItem.columns.filter(s=>!s.getColDef().lockPinned);if(i.length>0&&(this.dragAndDropService.setGhostIcon(Ie.ICON_PINNED),this.failedMoveAttempts>7)){const s=this.needToMoveLeft?"left":"right";this.setColumnsPinned(i,s,"uiColumnDragged"),this.dragAndDropService.nudge()}}}};w([O("columnModel")],Ah.prototype,"columnModel",2);w([O("dragAndDropService")],Ah.prototype,"dragAndDropService",2);w([O("gridOptionsService")],Ah.prototype,"gos",2);w([O("ctrlsService")],Ah.prototype,"ctrlsService",2);w([te],Ah.prototype,"init",1);var xh=class extends ee{constructor(t,e){super(),this.pinned=t,this.eContainer=e}postConstruct(){this.ctrlsService.whenReady(t=>{switch(this.pinned){case"left":this.eSecondaryContainers=[[t.gridBodyCtrl.getBodyViewportElement(),t.left.getContainerElement()],[t.bottomLeft.getContainerElement()],[t.topLeft.getContainerElement()]];break;case"right":this.eSecondaryContainers=[[t.gridBodyCtrl.getBodyViewportElement(),t.right.getContainerElement()],[t.bottomRight.getContainerElement()],[t.topRight.getContainerElement()]];break;default:this.eSecondaryContainers=[[t.gridBodyCtrl.getBodyViewportElement(),t.center.getViewportElement()],[t.bottomCenter.getViewportElement()],[t.topCenter.getViewportElement()]];break}})}isInterestedIn(t){return t===1||t===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}init(){this.moveColumnFeature=this.createManagedBean(new Ah(this.pinned)),this.bodyDropPivotTarget=this.createManagedBean(new eD(this.pinned)),this.dragAndDropService.addDropTarget(this)}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(t){return this.columnModel.isPivotMode()&&t.dragSource.type===0}onDragEnter(t){this.currentDropListener=this.isDropColumnInPivotMode(t)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(t)}onDragLeave(t){this.currentDropListener.onDragLeave(t)}onDragging(t){this.currentDropListener.onDragging(t)}onDragStop(t){this.currentDropListener.onDragStop(t)}};w([O("dragAndDropService")],xh.prototype,"dragAndDropService",2);w([O("columnModel")],xh.prototype,"columnModel",2);w([O("ctrlsService")],xh.prototype,"ctrlsService",2);w([te],xh.prototype,"postConstruct",1);w([te],xh.prototype,"init",1);var Ph=class wz extends QI{constructor(e){super(wz.TEMPLATE,e),this.headerCompVersion=0,this.column=e.getColumnGroupChild(),this.pinned=e.getPinned()}postConstruct(){const e=this.getGui();((s,o)=>{o!=null&&o!=""?e.setAttribute(s,o):e.removeAttribute(s)})("col-id",this.column.getColId());const r={setWidth:s=>e.style.width=s,addOrRemoveCssClass:(s,o)=>this.addOrRemoveCssClass(s,o),setAriaSort:s=>s?zj(e,s):Kj(e),setUserCompDetails:s=>this.setUserCompDetails(s),getUserCompInstance:()=>this.headerComp};this.ctrl.setComp(r,this.getGui(),this.eResize,this.eHeaderCompWrapper);const i=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",i)}destroyHeaderComp(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)}setUserCompDetails(e){this.headerCompVersion++;const n=this.headerCompVersion;e.newAgStackInstance().then(r=>this.afterCompCreated(n,r))}afterCompCreated(e,n){if(e!=this.headerCompVersion||!this.isAlive()){this.destroyBean(n);return}this.destroyHeaderComp(),this.headerComp=n,this.headerCompGui=n.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())}};Ph.TEMPLATE=`<div class="ag-header-cell" role="columnheader">
            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
            <div ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>
        </div>`;w([ne("eResize")],Ph.prototype,"eResize",2);w([ne("eHeaderCompWrapper")],Ph.prototype,"eHeaderCompWrapper",2);w([te],Ph.prototype,"postConstruct",1);w([Pr],Ph.prototype,"destroyHeaderComp",1);var Bre=Ph,TE=class Sz extends QI{constructor(e){super(Sz.TEMPLATE,e)}postConstruct(){const e=this.getGui(),n=(i,s)=>s!=null?e.setAttribute(i,s):e.removeAttribute(i);e.setAttribute("col-id",this.ctrl.getColId());const r={addOrRemoveCssClass:(i,s)=>this.addOrRemoveCssClass(i,s),setResizableDisplayed:i=>Ue(this.eResize,i),setWidth:i=>e.style.width=i,setAriaExpanded:i=>n("aria-expanded",i),setUserCompDetails:i=>this.setUserCompDetails(i),getUserCompInstance:()=>this.headerGroupComp};this.ctrl.setComp(r,e,this.eResize)}setUserCompDetails(e){e.newAgStackInstance().then(n=>this.afterHeaderCompCreated(n))}afterHeaderCompCreated(e){const n=()=>this.destroyBean(e);if(!this.isAlive()){n();return}const r=this.getGui(),i=e.getGui();r.appendChild(i),this.addDestroyFunc(n),this.headerGroupComp=e,this.ctrl.setDragSource(r)}};TE.TEMPLATE=`<div class="ag-header-group-cell" role="columnheader">
            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
        </div>`;w([ne("eResize")],TE.prototype,"eResize",2);w([te],TE.prototype,"postConstruct",1);var $re=TE,S_=(t=>(t.COLUMN_GROUP="group",t.COLUMN="column",t.FLOATING_FILTER="filter",t))(S_||{}),tD=class extends Ae{constructor(e){super(),this.headerComps={},this.ctrl=e,this.setTemplate(`<div class="${this.ctrl.getHeaderRowClass()}" role="row"></div>`)}init(){yI(this.getGui(),this.ctrl.getAriaRowIndex());const e={setHeight:n=>this.getGui().style.height=n,setTop:n=>this.getGui().style.top=n,setHeaderCtrls:(n,r)=>this.setHeaderCtrls(n,r),setWidth:n=>this.getGui().style.width=n};this.ctrl.setComp(e)}destroyHeaderCtrls(){this.setHeaderCtrls([],!1)}setHeaderCtrls(e,n){if(!this.isAlive())return;const r=this.headerComps;if(this.headerComps={},e.forEach(i=>{const s=i.getInstanceId();let o=r[s];delete r[s],o==null&&(o=this.createHeaderComp(i),this.getGui().appendChild(o.getGui())),this.headerComps[s]=o}),lr(r,(i,s)=>{this.getGui().removeChild(s.getGui()),this.destroyBean(s)}),n){const i=Ua(this.headerComps);i.sort((o,a)=>{const l=o.getCtrl().getColumnGroupChild().getLeft(),u=a.getCtrl().getColumnGroupChild().getLeft();return l-u});const s=i.map(o=>o.getGui());MI(this.getGui(),s)}}createHeaderComp(e){let n;switch(this.ctrl.getType()){case"group":n=new $re(e);break;case"filter":n=new ore(e);break;default:n=new Bre(e);break}return this.createBean(n),n.setParentComponent(this),n}};w([te],tD.prototype,"init",1);w([Pr],tD.prototype,"destroyHeaderCtrls",1);var Wre=0,jo=class Ez extends ee{constructor(e,n,r){super(),this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.columnGroupChild=e,this.parentRowCtrl=r,this.beans=n,this.instanceId=e.getUniqueId()+"-"+Wre++}postConstruct(){this.addManagedPropertyListeners(["suppressHeaderFocus"],()=>this.refreshTabIndex())}shouldStopEventPropagation(e){const{headerRowIndex:n,column:r}=this.focusService.getFocusedHeader();return mU(this.gos,e,n,r)}getWrapperHasFocus(){return this.gos.getActiveDomElement()===this.eGui}setGui(e){this.eGui=e,this.addDomData(),this.addManagedListener(this.beans.eventService,x.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}onDisplayedColumnsChanged(){!this.comp||!this.column||(this.refreshFirstAndLastStyles(),this.refreshAriaColIndex())}refreshFirstAndLastStyles(){const{comp:e,column:n,beans:r}=this;SE.refreshFirstAndLastStyles(e,n,r.columnModel)}refreshAriaColIndex(){const{beans:e,column:n}=this,r=e.columnModel.getAriaColumnIndex(n);CI(this.eGui,r)}addResizeAndMoveKeyboardListeners(){this.resizeFeature&&(this.addManagedListener(this.eGui,"keydown",this.onGuiKeyDown.bind(this)),this.addManagedListener(this.eGui,"keyup",this.onGuiKeyUp.bind(this)))}refreshTabIndex(){this.gos.get("suppressHeaderFocus")?this.eGui.removeAttribute("tabindex"):this.eGui.setAttribute("tabindex","-1")}onGuiKeyDown(e){var n;const r=this.gos.getActiveDomElement(),i=e.key===H.LEFT||e.key===H.RIGHT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),r!==this.eGui||!e.shiftKey&&!e.altKey||((this.isResizing||i)&&(e.preventDefault(),e.stopImmediatePropagation()),!i))return;const s=e.key===H.LEFT!==this.gos.get("enableRtl"),o=KU[s?"Left":"Right"];if(e.altKey){this.isResizing=!0,this.resizeMultiplier+=1;const a=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(a,e.shiftKey),(n=this.resizeFeature)==null||n.toggleColumnResizing(!0)}else this.moveHeader(o)}getViewportAdjustedResizeDiff(e){let n=this.getResizeDiff(e);if(this.column.getPinned()){const i=this.pinnedWidthService.getPinnedLeftWidth(),s=this.pinnedWidthService.getPinnedRightWidth(),o=Bu(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(i+s+n>o)if(o>i+s)n=o-i-s;else return 0}return n}getResizeDiff(e){let n=e.key===H.LEFT!==this.gos.get("enableRtl");const r=this.column.getPinned(),i=this.gos.get("enableRtl");return r&&i!==(r==="right")&&(n=!n),(n?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=setTimeout(()=>{var e;(e=this.resizeFeature)==null||e.toggleColumnResizing(!1)},150))}handleKeyDown(e){const n=this.getWrapperHasFocus();switch(e.key){case H.PAGE_DOWN:case H.PAGE_UP:case H.PAGE_HOME:case H.PAGE_END:n&&e.preventDefault()}}addDomData(){const e=Ez.DOM_DATA_KEY_HEADER_CTRL;this.gos.setDomData(this.eGui,e,this),this.addDestroyFunc(()=>this.gos.setDomData(this.eGui,e,null))}getGui(){return this.eGui}focus(e){return this.eGui?(this.lastFocusEvent=e||null,this.eGui.focus(),!0):!1}getRowIndex(){return this.parentRowCtrl.getRowIndex()}getParentRowCtrl(){return this.parentRowCtrl}getPinned(){return this.parentRowCtrl.getPinned()}getInstanceId(){return this.instanceId}getColumnGroupChild(){return this.columnGroupChild}removeDragSource(){this.dragSource&&(this.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(e,n,r){const i=e??n;this.gos.get("preventDefaultOnContextMenu")&&i.preventDefault();const s=r instanceof ft?r:void 0;this.menuService.isHeaderContextMenuEnabled(s)&&this.menuService.showHeaderContextMenu(s,e,n),this.dispatchColumnMouseEvent(x.EVENT_COLUMN_HEADER_CONTEXT_MENU,r)}dispatchColumnMouseEvent(e,n){const r={type:e,column:n};this.eventService.dispatchEvent(r)}destroy(){super.destroy(),this.removeDragSource(),this.comp=null,this.column=null,this.resizeFeature=null,this.lastFocusEvent=null,this.columnGroupChild=null,this.parentRowCtrl=null,this.eGui=null}};jo.DOM_DATA_KEY_HEADER_CTRL="headerCtrl";w([O("pinnedWidthService")],jo.prototype,"pinnedWidthService",2);w([O("focusService")],jo.prototype,"focusService",2);w([O("userComponentFactory")],jo.prototype,"userComponentFactory",2);w([O("ctrlsService")],jo.prototype,"ctrlsService",2);w([O("dragAndDropService")],jo.prototype,"dragAndDropService",2);w([O("menuService")],jo.prototype,"menuService",2);w([te],jo.prototype,"postConstruct",1);var RE=jo,_E=class extends ee{constructor(t,e,n,r){super(),this.columnOrGroup=t,this.eCell=e,this.ariaEl=this.eCell.querySelector("[role=columnheader]")||this.eCell,this.colsSpanning=r,this.beans=n}setColsSpanning(t){this.colsSpanning=t,this.onLeftChanged()}getColumnOrGroup(){return this.beans.gos.get("enableRtl")&&this.colsSpanning?Je(this.colsSpanning):this.columnOrGroup}postConstruct(){this.addManagedListener(this.columnOrGroup,ft.EVENT_LEFT_CHANGED,this.onLeftChanged.bind(this)),this.setLeftFirstTime(),this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onLeftChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onLeftChanged.bind(this))}setLeftFirstTime(){const t=this.beans.gos.get("suppressColumnMoveAnimation"),e=J(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&e&&!t?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const t=this.getColumnOrGroup(),e=t.getLeft(),n=t.getOldLeft(),r=this.modifyLeftForPrintLayout(t,n),i=this.modifyLeftForPrintLayout(t,e);this.setLeft(r),this.actualLeft=i,this.beans.columnAnimationService.executeNextVMTurn(()=>{this.actualLeft===i&&this.setLeft(i)})}onLeftChanged(){const t=this.getColumnOrGroup(),e=t.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(t,e),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(t,e){if(!this.beans.gos.isDomLayout("print")||t.getPinned()==="left")return e;const r=this.beans.columnModel.getDisplayedColumnsLeftWidth();if(t.getPinned()==="right"){const i=this.beans.columnModel.getBodyContainerWidth();return r+i+e}return r+e}setLeft(t){if(J(t)&&(this.eCell.style.left=`${t}px`),this.columnOrGroup instanceof ft)this.columnOrGroup;else{const n=this.columnOrGroup.getLeafColumns();if(!n.length)return;n.length>1&&Uj(this.ariaEl,n.length),n[0]}}};w([te],_E.prototype,"postConstruct",1);var km=class extends ee{constructor(t,e){super(),this.columns=t,this.element=e}postConstruct(){this.gos.get("columnHoverHighlight")&&this.addMouseHoverListeners()}addMouseHoverListeners(){this.addManagedListener(this.element,"mouseout",this.onMouseOut.bind(this)),this.addManagedListener(this.element,"mouseover",this.onMouseOver.bind(this))}onMouseOut(){this.columnHoverService.clearMouseOver()}onMouseOver(){this.columnHoverService.setMouseOver(this.columns)}};w([O("columnHoverService")],km.prototype,"columnHoverService",2);w([te],km.prototype,"postConstruct",1);var jre=class extends RE{constructor(t,e,n){super(t,e,n),this.iconCreated=!1,this.column=t}setComp(t,e,n,r){this.comp=t,this.eButtonShowMainFilter=n,this.eFloatingFilterBody=r,this.setGui(e),this.setupActive(),this.setupWidth(),this.setupLeft(),this.setupHover(),this.setupFocus(),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(),this.setupUi(),this.addManagedListener(this.eButtonShowMainFilter,"click",this.showParentFilter.bind(this)),this.setupFilterChangedListener(),this.addManagedListener(this.column,ft.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this))}resizeHeader(){}moveHeader(){}setupActive(){const t=this.column.getColDef(),e=!!t.filter,n=!!t.floatingFilter;this.active=e&&n}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const t=Bt("filter",this.gos,this.column);t&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(t))}setupFocus(){this.createManagedBean(new il(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const t=this.localeService.getLocaleTextFunc();Si(this.eButtonShowMainFilter,t("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(t){if(this.gos.getActiveDomElement()===this.eGui)return;const r=this.focusService.findNextFocusableElement(this.eGui,null,t.shiftKey);if(r){this.beans.headerNavigationService.scrollToColumn(this.column),t.preventDefault(),r.focus();return}const i=this.findNextColumnWithFloatingFilter(t.shiftKey);i&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:i},event:t})&&t.preventDefault()}findNextColumnWithFloatingFilter(t){const e=this.beans.columnModel;let n=this.column;do if(n=t?e.getDisplayedColBefore(n):e.getDisplayedColAfter(n),!n)break;while(!n.getColDef().filter||!n.getColDef().floatingFilter);return n}handleKeyDown(t){super.handleKeyDown(t);const e=this.getWrapperHasFocus();switch(t.key){case H.UP:case H.DOWN:e||t.preventDefault();case H.LEFT:case H.RIGHT:if(e)return;t.stopPropagation();case H.ENTER:e&&this.focusService.focusInto(this.eGui)&&t.preventDefault();break;case H.ESCAPE:e||this.eGui.focus()}}onFocusIn(t){if(this.eGui.contains(t.relatedTarget))return;const n=!!t.relatedTarget&&!t.relatedTarget.classList.contains("ag-floating-filter"),r=!!t.relatedTarget&&tu(t.relatedTarget,"ag-floating-filter");if(n&&r&&t.target===this.eGui){const s=this.lastFocusEvent,o=!!(s&&s.key===H.TAB);if(s&&o){const a=s.shiftKey;this.focusService.focusInto(this.eGui,a)}}const i=this.getRowIndex();this.beans.focusService.setFocusedHeader(i,this.column)}setupHover(){this.createManagedBean(new km([this.column],this.eGui));const t=()=>{if(!this.gos.get("columnHoverHighlight"))return;const e=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",e)};this.addManagedListener(this.eventService,x.EVENT_COLUMN_HOVER_CHANGED,t),t()}setupLeft(){const t=new _E(this.column,this.eGui,this.beans);this.createManagedBean(t)}setupFilterButton(){this.suppressFilterButton=!this.menuService.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!this.menuService.isLegacyMenuEnabled()}setupUserComp(){if(!this.active)return;const t=this.beans.filterManager.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());t&&this.setCompDetails(t)}setCompDetails(t){this.userCompDetails=t,this.comp.setCompDetails(t)}showParentFilter(){const t=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuService.showFilterMenu({column:this.column,buttonElement:t,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(){if(!this.active)return;const{filterManager:t}=this.beans,e=n=>{if((n==null?void 0:n.source)==="filterDestroyed"&&this.context.isDestroyed())return;const r=this.comp.getFloatingFilterComp();r&&r.then(i=>{var s;if(i){const o=t.getCurrentFloatingFilterParentModel(this.column);i.onParentModelChanged(o,n?this.gos.addGridCommonParams({columns:(s=n.columns)!=null?s:[],type:x.EVENT_FILTER_CHANGED,source:n.source==="api"?"api":"columnFilter"}):null)}})};this.destroySyncListener=this.addManagedListener(this.column,ft.EVENT_FILTER_CHANGED,e),t.isFilterActive(this.column)&&e(null)}setupWidth(){const t=()=>{const e=`${this.column.getActualWidth()}px`;this.comp.setWidth(e)};this.addManagedListener(this.column,ft.EVENT_WIDTH_CHANGED,t),t()}setupFilterChangedListener(){this.active&&(this.destroyFilterChangedListener=this.addManagedListener(this.column,ft.EVENT_FILTER_CHANGED,this.updateFilterButton.bind(this)),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){const t=this.beans.filterManager.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(t),this.highlightFilterButtonWhenActive&&t&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(){var t,e;const n=this.active;this.setupActive();const r=!n&&this.active;n&&!this.active&&((t=this.destroySyncListener)==null||t.call(this),(e=this.destroyFilterChangedListener)==null||e.call(this));const i=this.active?this.beans.filterManager.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,s=this.comp.getFloatingFilterComp();!s||!i?this.updateCompDetails(i,r):s.then(o=>{var a;!o||this.beans.filterManager.areFilterCompsDifferent((a=this.userCompDetails)!=null?a:null,i)?this.updateCompDetails(i,r):this.updateFloatingFilterParams(i)})}updateCompDetails(t,e){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),e&&(this.setupSyncWithFilter(),this.setupFilterChangedListener()))}updateFloatingFilterParams(t){var e;if(!t)return;const n=t.params;(e=this.comp.getFloatingFilterComp())==null||e.then(r=>{let i=!1;r!=null&&r.refresh&&typeof r.refresh=="function"&&r.refresh(n)!==null&&(i=!0),!i&&(r!=null&&r.onParamsUpdated)&&typeof r.onParamsUpdated=="function"&&r.onParamsUpdated(n)!==null&&we("Custom floating filter method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")})}destroy(){super.destroy(),this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.destroySyncListener=null,this.destroyFilterChangedListener=null}},Ih=class extends ee{constructor(t,e,n,r,i){super(),this.pinned=t,this.column=e,this.eResize=n,this.comp=r,this.ctrl=i}postConstruct(){const t=[];let e,n;const r=()=>{if(Ue(this.eResize,e),!e)return;const o=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(t.push(o),n){const a=this.gos.get("skipHeaderOnAutoSize"),l=()=>{this.columnModel.autoSizeColumn(this.column,"uiColumnResized",a)};this.eResize.addEventListener("dblclick",l);const u=new Dn(this.eResize);u.addEventListener(Dn.EVENT_DOUBLE_TAP,l),t.push(()=>{this.eResize.removeEventListener("dblclick",l),u.removeEventListener(Dn.EVENT_DOUBLE_TAP,l),u.destroy()})}},i=()=>{t.forEach(o=>o()),t.length=0},s=()=>{const o=this.column.isResizable(),a=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(o!==e||a!==n)&&(e=o,n=a,i(),r())};s(),this.addDestroyFunc(i),this.ctrl.addRefreshFunction(s)}onResizing(t,e){const{column:n,lastResizeAmount:r,resizeStartWidth:i}=this,s=this.normaliseResizeAmount(e),o=i+s,a=[{key:n,newWidth:o}];if(this.column.getPinned()){const l=this.pinnedWidthService.getPinnedLeftWidth(),u=this.pinnedWidthService.getPinnedRightWidth(),c=Bu(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(l+u+(s-r)>c)return}this.lastResizeAmount=s,this.columnModel.setColumnWidths(a,this.resizeWithShiftKey,t,"uiColumnResized"),t&&this.toggleColumnResizing(!1)}onResizeStart(t){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=t,this.toggleColumnResizing(!0)}toggleColumnResizing(t){this.comp.addOrRemoveCssClass("ag-column-resizing",t)}normaliseResizeAmount(t){let e=t;const n=this.pinned!=="left",r=this.pinned==="right";return this.gos.get("enableRtl")?n&&(e*=-1):r&&(e*=-1),e}};w([O("horizontalResizeService")],Ih.prototype,"horizontalResizeService",2);w([O("pinnedWidthService")],Ih.prototype,"pinnedWidthService",2);w([O("ctrlsService")],Ih.prototype,"ctrlsService",2);w([O("columnModel")],Ih.prototype,"columnModel",2);w([te],Ih.prototype,"postConstruct",1);var nD=class extends ee{constructor(t){super(),this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1,this.column=t}onSpaceKeyDown(t){const e=this.cbSelectAll;e.isDisplayed()&&!e.getGui().contains(this.gos.getActiveDomElement())&&(t.preventDefault(),e.setValue(!e.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(t){this.headerCellCtrl=t,this.cbSelectAll=this.createManagedBean(new fE),this.cbSelectAll.addCssClass("ag-header-select-all"),Ut(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedListener(this.eventService,x.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_SELECTION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_PAGINATION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_MODEL_UPDATED,this.onModelChanged.bind(this)),this.addManagedListener(this.cbSelectAll,x.EVENT_FIELD_VALUE_CHANGED,this.onCbSelectAll.bind(this)),Am(this.cbSelectAll.getGui(),!0),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onNewColumnsLoaded(){this.showOrHideSelectAll()}onDisplayedColumnsChanged(){this.isAlive()&&this.showOrHideSelectAll()}showOrHideSelectAll(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible,{skipAriaHidden:!0}),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()}onModelChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}onSelectionChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const t=this.selectionService.getSelectAllState(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setValue(t);const e=this.selectionService.hasNodesToSelect(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setDisabled(!e),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(){const t=this.localeService.getLocaleTextFunc(),n=this.cbSelectAll.getValue()?t("ariaChecked","checked"):t("ariaUnchecked","unchecked"),r=t("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll",`${r} (${n})`):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel(`${r} (${n})`),this.headerCellCtrl.announceAriaDescription()}checkSelectionType(t){return this.gos.get("rowSelection")==="multiple"?!0:(console.warn(`AG Grid: ${t} is only available if using 'multiple' rowSelection.`),!1)}checkRightRowModelType(t){const e=this.rowModel.getType();return e==="clientSide"||e==="serverSide"?!0:(console.warn(`AG Grid: ${t} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${e}.`),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;const t=this.cbSelectAll.getValue(),e=this.isFilteredOnly(),n=this.isCurrentPageOnly();let r="uiSelectAll";n?r="uiSelectAllCurrentPage":e&&(r="uiSelectAllFiltered");const i={source:r,justFiltered:e,justCurrentPage:n};t?this.selectionService.selectAllRowNodes(i):this.selectionService.deselectAllRowNodes(i)}isCheckboxSelection(){let t=this.column.getColDef().headerCheckboxSelection;if(typeof t=="function"){const e=t,n=this.gos.addGridCommonParams({column:this.column,colDef:this.column.getColDef()});t=e(n)}return t?this.checkRightRowModelType("headerCheckboxSelection")&&this.checkSelectionType("headerCheckboxSelection"):!1}isFilteredOnly(){return!!this.column.getColDef().headerCheckboxSelectionFilteredOnly}isCurrentPageOnly(){return!!this.column.getColDef().headerCheckboxSelectionCurrentPageOnly}};w([O("rowModel")],nD.prototype,"rowModel",2);w([O("selectionService")],nD.prototype,"selectionService",2);var Ure=class extends RE{constructor(t,e,n){super(t,e,n),this.refreshFunctions=[],this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map,this.column=t}setComp(t,e,n,r){this.comp=t,this.setGui(e),this.updateState(),this.setupWidth(),this.setupMovingCss(),this.setupMenuClass(),this.setupSortableClass(),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight(r),this.addColumnHoverListener(),this.setupFilterClass(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(),this.setupSelectAll(),this.setupUserComp(),this.refreshAria(),this.resizeFeature=this.createManagedBean(new Ih(this.getPinned(),this.column,n,t,this)),this.createManagedBean(new km([this.column],e)),this.createManagedBean(new _E(this.column,e,this.beans)),this.createManagedBean(new il(e,{shouldStopEventPropagation:i=>this.shouldStopEventPropagation(i),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(),this.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader"],this.refresh.bind(this)),this.addManagedListener(this.column,ft.EVENT_COL_DEF_CHANGED,this.refresh.bind(this)),this.addManagedListener(this.eventService,x.EVENT_COLUMN_VALUE_CHANGED,this.onColumnValueChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onColumnRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_COLUMN_PIVOT_CHANGED,this.onColumnPivotChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))}resizeHeader(t,e){var n,r;if(!this.column.isResizable())return;const i=this.column.getActualWidth(),s=(n=this.column.getMinWidth())!=null?n:0,o=(r=this.column.getMaxWidth())!=null?r:Number.MAX_SAFE_INTEGER,a=Math.min(Math.max(i+t,s),o);this.beans.columnModel.setColumnWidths([{key:this.column,newWidth:a}],e,!0,"uiColumnResized")}moveHeader(t){const{eGui:e,column:n,gos:r,ctrlsService:i}=this,s=this.getPinned(),o=e.getBoundingClientRect().left,a=n.getActualWidth(),l=r.get("enableRtl"),u=t===0!==l,c=su.normaliseX(u?o-20:o+a+20,s,!0,r,i);su.attemptMoveColumns({allMovingColumns:[n],isFromHeader:!0,hDirection:t,xPosition:c,pinned:s,fromEnter:!1,fakeEvent:!1,gos:r,columnModel:this.beans.columnModel}),i.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(n,"auto")}setupUserComp(){const t=this.lookupUserCompDetails();this.setCompDetails(t)}setCompDetails(t){this.userCompDetails=t,this.comp.setUserCompDetails(t)}lookupUserCompDetails(){const t=this.createParams(),e=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(e,t)}createParams(){return this.gos.addGridCommonParams({column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&this.menuService.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!this.openFilterEnabled||this.menuService.isLegacyMenuEnabled(),showColumnMenu:e=>{this.menuService.showColumnMenu({column:this.column,buttonElement:e,positionBy:"button"})},showColumnMenuAfterMouseClick:e=>{this.menuService.showColumnMenu({column:this.column,mouseEvent:e,positionBy:"mouse"})},showFilter:e=>{this.menuService.showFilterMenu({column:this.column,buttonElement:e,containerType:"columnFilter",positionBy:"button"})},progressSort:e=>{this.beans.sortController.progressSort(this.column,!!e,"uiColumnSorted")},setSort:(e,n)=>{this.beans.sortController.setSortForColumn(this.column,e,!!n,"uiColumnSorted")},eGridHeader:this.getGui(),setTooltip:(e,n)=>{this.setupTooltip(e,n)}})}setupSelectAll(){this.selectAllFeature=this.createManagedBean(new nD(this.column)),this.selectAllFeature.setComp(this)}getSelectAllGui(){return this.selectAllFeature.getCheckboxGui()}handleKeyDown(t){super.handleKeyDown(t),t.key===H.SPACE&&this.selectAllFeature.onSpaceKeyDown(t),t.key===H.ENTER&&this.onEnterKeyDown(t),t.key===H.DOWN&&t.altKey&&this.showMenuOnKeyPress(t,!1)}onEnterKeyDown(t){if(t.ctrlKey||t.metaKey)this.showMenuOnKeyPress(t,!0);else if(this.sortable){const e=t.shiftKey;this.beans.sortController.progressSort(this.column,e,"uiColumnSorted")}}showMenuOnKeyPress(t,e){const n=this.comp.getUserCompInstance();!n||!(n instanceof v_)||n.onMenuKeyboardShortcut(e)&&t.preventDefault()}onFocusIn(t){if(!this.getGui().contains(t.relatedTarget)){const e=this.getRowIndex();this.focusService.setFocusedHeader(e,this.column),this.announceAriaDescription()}this.focusService.isKeyboardMode()&&this.setActiveHeader(!0)}onFocusOut(t){this.getGui().contains(t.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(t,e){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const n=this.gos.get("tooltipShowMode")==="whenTruncated",r=this.eGui,i=this.column.getColDef();!e&&n&&!i.headerComponent&&(e=()=>{const a=r.querySelector(".ag-header-cell-text");return a?a.scrollWidth>a.clientWidth:!0});const s={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getGui:()=>r,getLocation:()=>"header",getTooltipValue:()=>t??this.column.getColDef().headerTooltip,shouldDisplayTooltip:e},o=this.createManagedBean(new Bo(s));this.refreshFunctions.push(()=>o.refreshToolTip())}setupClassesFromColDef(){const t=()=>{const e=this.column.getColDef(),n=SE.getHeaderClassesFromColDef(e,this.gos,this.column,null),r=this.userHeaderClasses;this.userHeaderClasses=new Set(n),n.forEach(i=>{r.has(i)?r.delete(i):this.comp.addOrRemoveCssClass(i,!0)}),r.forEach(i=>this.comp.addOrRemoveCssClass(i,!1))};this.refreshFunctions.push(t),t()}setDragSource(t){if(this.dragSourceElement=t,this.removeDragSource(),!t||!this.draggable)return;const{column:e,beans:n,displayName:r,dragAndDropService:i,gos:s}=this,{columnModel:o}=n;let a=!this.gos.get("suppressDragLeaveHidesColumns");const l=this.dragSource={type:1,eElement:t,getDefaultIconName:()=>a?Ie.ICON_HIDE:Ie.ICON_NOT_ALLOWED,getDragItem:()=>this.createDragItem(e),dragItemName:r,onDragStarted:()=>{a=!s.get("suppressDragLeaveHidesColumns"),e.setMoving(!0,"uiColumnMoved")},onDragStopped:()=>e.setMoving(!1,"uiColumnMoved"),onGridEnter:u=>{var c;if(a){const d=((c=u==null?void 0:u.columns)==null?void 0:c.filter(h=>!h.getColDef().lockVisible))||[];o.setColumnsVisible(d,!0,"uiColumnMoved")}},onGridExit:u=>{var c;if(a){const d=((c=u==null?void 0:u.columns)==null?void 0:c.filter(h=>!h.getColDef().lockVisible))||[];o.setColumnsVisible(d,!1,"uiColumnMoved")}}};i.addDragSource(l,!0)}createDragItem(t){const e={};return e[t.getId()]=t.isVisible(),{columns:[t],visibleState:e}}updateState(){this.menuEnabled=this.menuService.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=this.menuService.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}addRefreshFunction(t){this.refreshFunctions.push(t)}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),this.refreshFunctions.forEach(t=>t())}refreshHeaderComp(){const t=this.lookupUserCompDetails();(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==t.componentClass?this.attemptHeaderCompRefresh(t.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(t)}attemptHeaderCompRefresh(t){const e=this.comp.getUserCompInstance();return!e||!e.refresh?!1:e.refresh(t)}calculateDisplayName(){return this.beans.columnModel.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){const t=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!t.suppressMovable&&!t.lockPosition)||!!t.enableRowGroup||!!t.enablePivot}onColumnRowGroupChanged(){this.checkDisplayName()}onColumnPivotChanged(){this.checkDisplayName()}onColumnValueChanged(){this.checkDisplayName()}setupWidth(){const t=()=>{const e=this.column.getActualWidth();this.comp.setWidth(`${e}px`)};this.addManagedListener(this.column,ft.EVENT_WIDTH_CHANGED,t),t()}setupMovingCss(){const t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};this.addManagedListener(this.column,ft.EVENT_MOVING_CHANGED,t),t()}setupMenuClass(){const t=()=>{this.comp.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};this.addManagedListener(this.column,ft.EVENT_MENU_VISIBLE_CHANGED,t),t()}setupSortableClass(){const t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};t(),this.addRefreshFunction(t),this.addManagedListener(this.eventService,ft.EVENT_SORT_CHANGED,this.refreshAriaSort.bind(this))}setupFilterClass(){const t=()=>{const e=this.column.isFilterActive();this.comp.addOrRemoveCssClass("ag-header-cell-filtered",e),this.refreshAria()};this.addManagedListener(this.column,ft.EVENT_FILTER_ACTIVE_CHANGED,t),t()}setupWrapTextClass(){const t=()=>{const e=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",e)};t(),this.addRefreshFunction(t)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){const{eGui:t,column:e,comp:n,beans:r}=this;if(!e.isSpanHeaderHeight()){t.style.removeProperty("top"),t.style.removeProperty("height"),n.addOrRemoveCssClass("ag-header-span-height",!1),n.addOrRemoveCssClass("ag-header-span-total",!1);return}const{numberOfParents:i,isSpanningTotal:s}=this.column.getColumnGroupPaddingInfo();n.addOrRemoveCssClass("ag-header-span-height",i>0);const{columnModel:o}=r,a=o.getColumnHeaderRowHeight();if(i===0){n.addOrRemoveCssClass("ag-header-span-total",!1),t.style.setProperty("top","0px"),t.style.setProperty("height",`${a}px`);return}n.addOrRemoveCssClass("ag-header-span-total",s);const u=o.isPivotMode()?o.getPivotGroupHeaderHeight():o.getGroupHeaderHeight(),c=i*u;t.style.setProperty("top",`${-c}px`),t.style.setProperty("height",`${a+c}px`)}setupAutoHeight(t){const{columnModel:e,resizeObserverService:n}=this.beans,r=u=>{if(!this.isAlive())return;const{paddingTop:c,paddingBottom:d,borderBottomWidth:h,borderTopWidth:f}=rl(this.getGui()),g=c+d+h+f,v=t.offsetHeight+g;if(u<5){const C=this.beans.gos.getDocument(),y=!C||!C.contains(t),S=v==0;if(y||S){window.setTimeout(()=>r(u+1),0);return}}e.setColumnHeaderHeight(this.column,v)};let i=!1,s;const o=()=>{const u=this.column.isAutoHeaderHeight();u&&!i&&a(),!u&&i&&l()},a=()=>{i=!0,r(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),s=n.observeResize(t,()=>r(0))},l=()=>{i=!1,s&&s(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),s=void 0};o(),this.addDestroyFunc(()=>l()),this.addManagedListener(this.column,ft.EVENT_WIDTH_CHANGED,()=>i&&r(0)),this.addManagedListener(this.eventService,ft.EVENT_SORT_CHANGED,()=>{i&&window.setTimeout(()=>r(0))}),this.addRefreshFunction(o)}refreshAriaSort(){if(this.sortable){const t=this.localeService.getLocaleTextFunc(),e=this.beans.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(Nj(e)),this.setAriaDescriptionProperty("sort",t("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){const t=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",t("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!this.menuService.isLegacyMenuEnabled()){const t=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",t("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){const t=this.localeService.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",t("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(t,e){e!=null?this.ariaDescriptionProperties.set(t,e):this.ariaDescriptionProperties.delete(t)}announceAriaDescription(){if(!this.eGui.contains(this.beans.gos.getActiveDomElement()))return;const t=Array.from(this.ariaDescriptionProperties.keys()).sort((e,n)=>e==="filter"?-1:n.charCodeAt(0)-e.charCodeAt(0)).map(e=>this.ariaDescriptionProperties.get(e)).join(". ");this.beans.ariaAnnouncementService.announceValue(t)}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(){const t=()=>{if(!this.gos.get("columnHoverHighlight"))return;const e=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",e)};this.addManagedListener(this.eventService,x.EVENT_COLUMN_HOVER_CHANGED,t),t()}getColId(){return this.column.getColId()}addActiveHeaderMouseListeners(){const t=r=>this.handleMouseOverChange(r.type==="mouseenter"),e=()=>this.dispatchColumnMouseEvent(x.EVENT_COLUMN_HEADER_CLICKED,this.column),n=r=>this.handleContextMenuMouseEvent(r,void 0,this.column);this.addManagedListener(this.getGui(),"mouseenter",t),this.addManagedListener(this.getGui(),"mouseleave",t),this.addManagedListener(this.getGui(),"click",e),this.addManagedListener(this.getGui(),"contextmenu",n)}handleMouseOverChange(t){this.setActiveHeader(t);const n={type:t?x.EVENT_COLUMN_HEADER_MOUSE_OVER:x.EVENT_COLUMN_HEADER_MOUSE_LEAVE,column:this.column};this.eventService.dispatchEvent(n)}setActiveHeader(t){this.comp.addOrRemoveCssClass("ag-header-active",t)}getAnchorElementForMenu(t){const e=this.comp.getUserCompInstance();return e instanceof v_?e.getAnchorElementForMenu(t):this.getGui()}destroy(){super.destroy(),this.refreshFunctions=null,this.selectAllFeature=null,this.dragSourceElement=null,this.userCompDetails=null,this.userHeaderClasses=null,this.ariaDescriptionProperties=null}},Gm=class extends ee{constructor(t,e,n,r){super(),this.eResize=e,this.comp=t,this.pinned=n,this.columnGroup=r}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}const t=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(t),!this.gos.get("suppressAutoSize")){const e=this.gos.get("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",()=>{const n=[];this.columnGroup.getDisplayedLeafColumns().forEach(i=>{i.getColDef().suppressAutoSize||n.push(i.getColId())}),n.length>0&&this.columnModel.autoSizeColumns({columns:n,skipHeader:e,stopAtGroup:this.columnGroup,source:"uiColumnResized"}),this.resizeLeafColumnsToFit("uiColumnResized")})}}onResizeStart(t){const e=this.getInitialValues(t);this.storeLocalValues(e),this.toggleColumnResizing(!0)}onResizing(t,e,n="uiColumnResized"){const r=this.normaliseDragChange(e),i=this.resizeStartWidth+r;this.resizeColumnsFromLocalValues(i,n,t)}getInitialValues(t){const e=this.getColumnsToResize(),n=this.getInitialSizeOfColumns(e),r=this.getSizeRatiosOfColumns(e,n),i={columnsToResize:e,resizeStartWidth:n,resizeRatios:r};let s=null;if(t&&(s=this.columnModel.getDisplayedGroupAtDirection(this.columnGroup,"After")),s){const o=s.getDisplayedLeafColumns(),a=i.groupAfterColumns=o.filter(u=>u.isResizable()),l=i.groupAfterStartWidth=this.getInitialSizeOfColumns(a);i.groupAfterRatios=this.getSizeRatiosOfColumns(a,l)}else i.groupAfterColumns=void 0,i.groupAfterStartWidth=void 0,i.groupAfterRatios=void 0;return i}storeLocalValues(t){const{columnsToResize:e,resizeStartWidth:n,resizeRatios:r,groupAfterColumns:i,groupAfterStartWidth:s,groupAfterRatios:o}=t;this.resizeCols=e,this.resizeStartWidth=n,this.resizeRatios=r,this.resizeTakeFromCols=i,this.resizeTakeFromStartWidth=s,this.resizeTakeFromRatios=o}clearLocalValues(){this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}resizeLeafColumnsToFit(t){const e=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup),n=this.getInitialValues();e>n.resizeStartWidth&&this.resizeColumns(n,e,t,!0)}resizeColumnsFromLocalValues(t,e,n=!0){var r,i,s;if(!this.resizeCols||!this.resizeRatios)return;const o={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:(r=this.resizeTakeFromCols)!=null?r:void 0,groupAfterStartWidth:(i=this.resizeTakeFromStartWidth)!=null?i:void 0,groupAfterRatios:(s=this.resizeTakeFromRatios)!=null?s:void 0};this.resizeColumns(o,t,e,n)}resizeColumns(t,e,n,r=!0){const{columnsToResize:i,resizeStartWidth:s,resizeRatios:o,groupAfterColumns:a,groupAfterStartWidth:l,groupAfterRatios:u}=t,c=[];if(c.push({columns:i,ratios:o,width:e}),a){const d=e-s;c.push({columns:a,ratios:u,width:l-d})}this.columnModel.resizeColumnSets({resizeSets:c,finished:r,source:n}),r&&this.toggleColumnResizing(!1)}toggleColumnResizing(t){this.comp.addOrRemoveCssClass("ag-column-resizing",t)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(e=>e.isResizable())}getInitialSizeOfColumns(t){return t.reduce((e,n)=>e+n.getActualWidth(),0)}getSizeRatiosOfColumns(t,e){return t.map(n=>n.getActualWidth()/e)}normaliseDragChange(t){let e=t;return this.gos.get("enableRtl")?this.pinned!=="left"&&(e*=-1):this.pinned==="right"&&(e*=-1),e}destroy(){super.destroy(),this.clearLocalValues()}};w([O("horizontalResizeService")],Gm.prototype,"horizontalResizeService",2);w([O("autoWidthCalculator")],Gm.prototype,"autoWidthCalculator",2);w([O("columnModel")],Gm.prototype,"columnModel",2);w([te],Gm.prototype,"postConstruct",1);var bz=class extends ee{constructor(t,e){super(),this.removeChildListenersFuncs=[],this.columnGroup=e,this.comp=t}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListener(this.columnGroup,Sn.EVENT_DISPLAYED_CHILDREN_CHANGED,this.onDisplayedChildrenChanged.bind(this)),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const t=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(e=>{e.addEventListener("widthChanged",t),e.addEventListener("visibleChanged",t),this.removeChildListenersFuncs.push(()=>{e.removeEventListener("widthChanged",t),e.removeEventListener("visibleChanged",t)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(t=>t()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const t=this.columnGroup.getActualWidth();this.comp.setWidth(`${t}px`),this.comp.addOrRemoveCssClass("ag-hidden",t===0)}};w([te],bz.prototype,"postConstruct",1);var zre=class extends RE{constructor(t,e,n){super(t,e,n),this.onSuppressColMoveChange=()=>{if(!this.isAlive()||this.isSuppressMoving())this.removeDragSource();else if(!this.dragSource){const r=this.getGui();this.setDragSource(r)}},this.column=t}setComp(t,e,n){this.comp=t,this.setGui(e),this.displayName=this.beans.columnModel.getDisplayNameForColumnGroup(this.column,"header"),this.addClasses(),this.setupMovingCss(),this.setupExpandable(),this.setupTooltip(),this.addDestroyFunc(()=>{this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature))}),this.setupUserComp(),this.addHeaderMouseListeners();const r=this.getParentRowCtrl().getPinned(),i=this.column.getProvidedColumnGroup().getLeafColumns();this.createManagedBean(new km(i,e)),this.createManagedBean(new _E(this.column,e,this.beans)),this.createManagedBean(new bz(t,this.column)),this.resizeFeature=this.createManagedBean(new Gm(t,n,r,this.column)),this.createManagedBean(new il(e,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addManagedPropertyListener(x.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED,this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners()}resizeHeader(t,e){if(!this.resizeFeature)return;const n=this.resizeFeature.getInitialValues(e);this.resizeFeature.resizeColumns(n,n.resizeStartWidth+t,"uiColumnResized",!0)}moveHeader(t){const{beans:e,eGui:n,column:r,gos:i,ctrlsService:s}=this,o=i.get("enableRtl"),a=t===0,l=this.getPinned(),u=n.getBoundingClientRect(),c=u.left,d=u.width,h=su.normaliseX(a!==o?c-20:c+d+20,l,!0,i,s),f=r.getGroupId(),g=this.focusService.getFocusedHeader();su.attemptMoveColumns({allMovingColumns:this.column.getLeafColumns(),isFromHeader:!0,hDirection:t,xPosition:h,pinned:l,fromEnter:!1,fakeEvent:!1,gos:i,columnModel:e.columnModel});const m=r.getDisplayedLeafColumns(),v=a?m[0]:Je(m);this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(v,"auto"),!this.isAlive()&&g&&this.restoreFocus(f,r,g)}restoreFocus(t,e,n){const r=e.getLeafColumns();if(!r.length)return;const i=r[0].getParent();if(!i)return;const s=this.findGroupWidthId(i,t);s&&this.focusService.focusHeaderPosition({headerPosition:Dt(me({},n),{column:s})})}findGroupWidthId(t,e){for(;t;){if(t.getGroupId()===e)return t;t=t.getParent()}return null}resizeLeafColumnsToFit(t){this.resizeFeature&&this.resizeFeature.resizeLeafColumnsToFit(t)}setupUserComp(){const t=this.gos.addGridCommonParams({displayName:this.displayName,columnGroup:this.column,setExpanded:n=>{this.beans.columnModel.setColumnGroupOpened(this.column.getProvidedColumnGroup(),n,"gridInitializing")},setTooltip:(n,r)=>{this.setupTooltip(n,r)}}),e=this.userComponentFactory.getHeaderGroupCompDetails(t);this.comp.setUserCompDetails(e)}addHeaderMouseListeners(){const t=r=>this.handleMouseOverChange(r.type==="mouseenter"),e=()=>this.dispatchColumnMouseEvent(x.EVENT_COLUMN_HEADER_CLICKED,this.column.getProvidedColumnGroup()),n=r=>this.handleContextMenuMouseEvent(r,void 0,this.column.getProvidedColumnGroup());this.addManagedListener(this.getGui(),"mouseenter",t),this.addManagedListener(this.getGui(),"mouseleave",t),this.addManagedListener(this.getGui(),"click",e),this.addManagedListener(this.getGui(),"contextmenu",n)}handleMouseOverChange(t){const n={type:t?x.EVENT_COLUMN_HEADER_MOUSE_OVER:x.EVENT_COLUMN_HEADER_MOUSE_LEAVE,column:this.column.getProvidedColumnGroup()};this.eventService.dispatchEvent(n)}setupTooltip(t,e){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const n=this.column.getColGroupDef(),r=this.gos.get("tooltipShowMode")==="whenTruncated",i=this.eGui;!e&&r&&!(n!=null&&n.headerGroupComponent)&&(e=()=>{const o=i.querySelector(".ag-header-group-text");return o?o.scrollWidth>o.clientWidth:!0});const s={getColumn:()=>this.column,getGui:()=>i,getLocation:()=>"headerGroup",getTooltipValue:()=>t??(n&&n.headerTooltip),shouldDisplayTooltip:e};n&&(s.getColDef=()=>n),this.createBean(new Bo(s))}setupExpandable(){const t=this.column.getProvidedColumnGroup();this.refreshExpanded(),this.addManagedListener(t,tn.EVENT_EXPANDABLE_CHANGED,this.refreshExpanded.bind(this)),this.addManagedListener(t,tn.EVENT_EXPANDED_CHANGED,this.refreshExpanded.bind(this))}refreshExpanded(){const t=this.column;this.expandable=t.isExpandable();const e=t.isExpanded();this.expandable?this.comp.setAriaExpanded(e?"true":"false"):this.comp.setAriaExpanded(void 0)}getColId(){return this.column.getUniqueId()}addClasses(){const t=this.column.getColGroupDef(),e=SE.getHeaderClassesFromColDef(t,this.gos,null,this.column);this.column.isPadding()?(e.push("ag-header-group-cell-no-group"),this.column.getLeafColumns().every(r=>r.isSpanHeaderHeight())&&e.push("ag-header-span-height")):e.push("ag-header-group-cell-with-group"),e.forEach(n=>this.comp.addOrRemoveCssClass(n,!0))}setupMovingCss(){const e=this.column.getProvidedColumnGroup().getLeafColumns(),n=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving());e.forEach(r=>{this.addManagedListener(r,ft.EVENT_MOVING_CHANGED,n)}),n()}onFocusIn(t){if(!this.eGui.contains(t.relatedTarget)){const e=this.getRowIndex();this.beans.focusService.setFocusedHeader(e,this.column)}}handleKeyDown(t){super.handleKeyDown(t);const e=this.getWrapperHasFocus();if(!(!this.expandable||!e)&&t.key===H.ENTER){const n=this.column,r=!n.isExpanded();this.beans.columnModel.setColumnGroupOpened(n.getProvidedColumnGroup(),r,"uiColumnExpanded")}}setDragSource(t){if(!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),!t))return;const{beans:e,column:n,displayName:r,gos:i,dragAndDropService:s}=this,{columnModel:o}=e,a=n.getProvidedColumnGroup().getLeafColumns();let l=!i.get("suppressDragLeaveHidesColumns");const u=this.dragSource={type:1,eElement:t,getDefaultIconName:()=>l?Ie.ICON_HIDE:Ie.ICON_NOT_ALLOWED,dragItemName:r,getDragItem:()=>this.getDragItemForGroup(n),onDragStarted:()=>{l=!i.get("suppressDragLeaveHidesColumns"),a.forEach(c=>c.setMoving(!0,"uiColumnDragged"))},onDragStopped:()=>a.forEach(c=>c.setMoving(!1,"uiColumnDragged")),onGridEnter:c=>{var d;if(l){const h=((d=c==null?void 0:c.columns)==null?void 0:d.filter(f=>!f.getColDef().lockVisible))||[];o.setColumnsVisible(h,!0,"uiColumnMoved")}},onGridExit:c=>{var d;if(l){const h=((d=c==null?void 0:c.columns)==null?void 0:d.filter(f=>!f.getColDef().lockVisible))||[];o.setColumnsVisible(h,!1,"uiColumnMoved")}}};s.addDragSource(u,!0)}getDragItemForGroup(t){const e=t.getProvidedColumnGroup().getLeafColumns(),n={};e.forEach(i=>n[i.getId()]=i.isVisible());const r=[];return this.beans.columnModel.getAllDisplayedColumns().forEach(i=>{e.indexOf(i)>=0&&(r.push(i),Gr(e,i))}),e.forEach(i=>r.push(i)),{columns:r,visibleState:n}}isSuppressMoving(){let t=!1;return this.column.getLeafColumns().forEach(n=>{(n.getColDef().suppressMovable||n.getColDef().lockPosition)&&(t=!0)}),t||this.gos.get("suppressMovableColumns")}},Kre=0,gf=class extends ee{constructor(t,e,n){super(),this.instanceId=Kre++,this.rowIndex=t,this.pinned=e,this.type=n;const r=n=="group"?"ag-header-row-column-group":n=="filter"?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass=`ag-header-row ${r}`}postConstruct(){this.isPrintLayout=this.gos.isDomLayout("print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}getInstanceId(){return this.instanceId}setComp(t,e=!0){this.comp=t,e&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners()}getHeaderRowClass(){return this.headerRowClass}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(){this.addManagedListener(this.eventService,x.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this)),this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_VIRTUAL_COLUMNS_CHANGED,t=>this.onVirtualColumnsChanged(t.afterScroll)),this.addManagedListener(this.eventService,x.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_GRID_STYLES_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),this.addManagedPropertyListener("ensureDomOrder",t=>this.isEnsureDomOrder=t.currentValue),this.addManagedPropertyListener("headerHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("groupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotGroupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("floatingFiltersHeight",this.onRowHeightChanged.bind(this))}getHeaderCellCtrl(t){if(this.headerCellCtrls)return eu(this.headerCellCtrls).find(e=>e.getColumnGroupChild()===t)}onDisplayedColumnsChanged(){this.isPrintLayout=this.gos.isDomLayout("print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}getType(){return this.type}onColumnResized(){this.setWidth()}setWidth(){const t=this.getWidthForRow();this.comp.setWidth(`${t}px`)}getWidthForRow(){const{columnModel:t}=this.beans;return this.isPrintLayout?this.pinned!=null?0:t.getContainerWidth("right")+t.getContainerWidth("left")+t.getContainerWidth(null):t.getContainerWidth(this.pinned)}onRowHeightChanged(){var{topOffset:t,rowHeight:e}=this.getTopAndHeight();this.comp.setTop(t+"px"),this.comp.setHeight(e+"px")}getTopAndHeight(){const{columnModel:t,filterManager:e}=this.beans;let n=t.getHeaderRowCount();const r=[];let i=0;e.hasFloatingFilters()&&(n++,i=1);const s=t.getColumnGroupHeaderRowHeight(),o=t.getColumnHeaderRowHeight(),a=1+i,l=n-a;for(let d=0;d<l;d++)r.push(s);r.push(o);for(let d=0;d<i;d++)r.push(t.getFloatingFiltersHeight());let u=0;for(let d=0;d<this.rowIndex;d++)u+=r[d];const c=r[this.rowIndex];return{topOffset:u,rowHeight:c}}getPinned(){return this.pinned}getRowIndex(){return this.rowIndex}onVirtualColumnsChanged(t=!1){const e=this.getHeaderCtrls(),n=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(e,n,t)}getHeaderCtrls(){const t=this.headerCellCtrls;this.headerCellCtrls=new Map;const e=this.getColumnsInViewport();for(const i of e)this.recycleAndCreateHeaderCtrls(i,t);const n=i=>{const{focusService:s,columnModel:o}=this.beans;return s.isHeaderWrapperFocused(i)?o.isDisplayed(i.getColumnGroupChild()):!1};if(t)for(const[i,s]of t)n(s)?this.headerCellCtrls.set(i,s):this.destroyBean(s);return Array.from(this.headerCellCtrls.values())}recycleAndCreateHeaderCtrls(t,e){if(!this.headerCellCtrls||t.isEmptyGroup())return;const n=t.getUniqueId();let r;if(e&&(r=e.get(n),e.delete(n)),r&&r.getColumnGroupChild()!=t&&(this.destroyBean(r),r=void 0),r==null)switch(this.type){case"filter":r=this.createBean(new jre(t,this.beans,this));break;case"group":r=this.createBean(new zre(t,this.beans,this));break;default:r=this.createBean(new Ure(t,this.beans,this));break}this.headerCellCtrls.set(n,r)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(this.pinned!=null)return[];let t=[];const e=this.getActualDepth(),{columnModel:n}=this.beans;return["left",null,"right"].forEach(r=>{const i=n.getVirtualHeaderGroupRow(r,e);t=t.concat(i)}),t}getActualDepth(){return this.type=="filter"?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.columnModel.getVirtualHeaderGroupRow(this.pinned,this.getActualDepth())}focusHeader(t,e){if(!this.headerCellCtrls)return!1;const r=Array.from(this.headerCellCtrls.values()).find(i=>i.getColumnGroupChild()==t);return r?r.focus(e):!1}destroy(){this.headerCellCtrls&&this.headerCellCtrls.forEach(t=>{this.destroyBean(t)}),this.headerCellCtrls=void 0,super.destroy()}};w([O("beans")],gf.prototype,"beans",2);w([te],gf.prototype,"postConstruct",1);var sl=class extends ee{constructor(t){super(),this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[],this.pinned=t}setComp(t,e){this.comp=t,this.eViewport=e,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport),this.addManagedListener(this.eventService,x.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.ctrlsService.registerHeaderContainer(this,this.pinned),this.columnModel.isReady()&&this.refresh()}setupDragAndDrop(t){const e=new xh(this.pinned,t);this.createManagedBean(e)}refresh(t=!1){const e=new Ad,n=this.focusService.getFocusHeaderToUseAfterRefresh(),r=()=>{const a=this.columnModel.getHeaderRowCount()-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let l=0;l<a;l++){const u=this.createBean(new gf(e.next(),this.pinned,"group"));this.groupsRowCtrls.push(u)}},i=()=>{const a=e.next(),l=!this.hidden&&(this.columnsRowCtrl==null||!t||this.columnsRowCtrl.getRowIndex()!==a);(l||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),l&&(this.columnsRowCtrl=this.createBean(new gf(a,this.pinned,"column")))},s=()=>{this.includeFloatingFilter=this.filterManager.hasFloatingFilters()&&!this.hidden;const a=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){a();return}const l=e.next();if(this.filtersRowCtrl){const u=this.filtersRowCtrl.getRowIndex()!==l;(!t||u)&&a()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new gf(l,this.pinned,"filter")))};r(),i(),s();const o=this.getAllCtrls();this.comp.setCtrls(o),this.restoreFocusOnHeader(n)}restoreFocusOnHeader(t){t==null||t.column.getPinned()!=this.pinned||this.focusService.focusHeaderPosition({headerPosition:t})}getAllCtrls(){const t=[...this.groupsRowCtrls];return this.columnsRowCtrl&&t.push(this.columnsRowCtrl),this.filtersRowCtrl&&t.push(this.filtersRowCtrl),t}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(){const t=this.filterManager.hasFloatingFilters()&&!this.hidden;this.includeFloatingFilter!==t&&this.refresh(!0)}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new Rh(t=>this.comp.setCenterWidth(`${t}px`),!0))}setHorizontalScroll(t){this.comp.setViewportScrollLeft(t)}setupPinnedWidth(){if(this.pinned==null)return;const t=this.pinned==="left",e=this.pinned==="right";this.hidden=!0;const n=()=>{const r=t?this.pinnedWidthService.getPinnedLeftWidth():this.pinnedWidthService.getPinnedRightWidth();if(r==null)return;const i=r==0,s=this.hidden!==i,o=this.gos.get("enableRtl"),a=this.gos.getScrollbarWidth(),u=this.scrollVisibleService.isVerticalScrollShowing()&&(o&&t||!o&&e)?r+a:r;this.comp.setPinnedContainerWidth(`${u}px`),this.comp.setDisplayed(!i),s&&(this.hidden=i,this.refresh())};this.addManagedListener(this.eventService,x.EVENT_LEFT_PINNED_WIDTH_CHANGED,n),this.addManagedListener(this.eventService,x.EVENT_RIGHT_PINNED_WIDTH_CHANGED,n),this.addManagedListener(this.eventService,x.EVENT_SCROLL_VISIBILITY_CHANGED,n),this.addManagedListener(this.eventService,x.EVENT_SCROLLBAR_WIDTH_CHANGED,n)}getHeaderCtrlForColumn(t){if(t instanceof ft)return this.columnsRowCtrl?this.columnsRowCtrl.getHeaderCellCtrl(t):void 0;if(this.groupsRowCtrls.length!==0)for(let e=0;e<this.groupsRowCtrls.length;e++){const n=this.groupsRowCtrls[e].getHeaderCellCtrl(t);if(n)return n}}getHtmlElementForColumnHeader(t){const e=this.getHeaderCtrlForColumn(t);return e?e.getGui():null}getRowType(t){const n=this.getAllCtrls()[t];return n?n.getType():void 0}focusHeader(t,e,n){const i=this.getAllCtrls()[t];return i?i.focusHeader(e,n):!1}getViewport(){return this.eViewport}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}destroy(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),super.destroy()}};w([O("ctrlsService")],sl.prototype,"ctrlsService",2);w([O("scrollVisibleService")],sl.prototype,"scrollVisibleService",2);w([O("pinnedWidthService")],sl.prototype,"pinnedWidthService",2);w([O("columnModel")],sl.prototype,"columnModel",2);w([O("focusService")],sl.prototype,"focusService",2);w([O("filterManager")],sl.prototype,"filterManager",2);var Yu=class Ly extends Ae{constructor(e){super(),this.headerRowComps={},this.rowCompsList=[],this.pinned=e}init(){this.selectAndSetTemplate();const e={setDisplayed:r=>this.setDisplayed(r),setCtrls:r=>this.setCtrls(r),setCenterWidth:r=>this.eCenterContainer.style.width=r,setViewportScrollLeft:r=>this.getGui().scrollLeft=r,setPinnedContainerWidth:r=>{const i=this.getGui();i.style.width=r,i.style.maxWidth=r,i.style.minWidth=r}};this.createManagedBean(new sl(this.pinned)).setComp(e,this.getGui())}selectAndSetTemplate(){const e=this.pinned=="left",n=this.pinned=="right",r=e?Ly.PINNED_LEFT_TEMPLATE:n?Ly.PINNED_RIGHT_TEMPLATE:Ly.CENTER_TEMPLATE;this.setTemplate(r),this.eRowContainer=this.eCenterContainer?this.eCenterContainer:this.getGui()}destroyRowComps(){this.setCtrls([])}destroyRowComp(e){this.destroyBean(e),this.eRowContainer.removeChild(e.getGui())}setCtrls(e){const n=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];let r;const i=s=>{const o=s.getGui();o.parentElement!=this.eRowContainer&&this.eRowContainer.appendChild(o),r&&OI(this.eRowContainer,o,r),r=o};e.forEach(s=>{const o=s.getInstanceId(),a=n[o];delete n[o];const l=a||this.createBean(new tD(s));this.headerRowComps[o]=l,this.rowCompsList.push(l),i(l)}),Ua(n).forEach(s=>this.destroyRowComp(s))}};Yu.PINNED_LEFT_TEMPLATE='<div class="ag-pinned-left-header" role="rowgroup"></div>';Yu.PINNED_RIGHT_TEMPLATE='<div class="ag-pinned-right-header" role="rowgroup"></div>';Yu.CENTER_TEMPLATE=`<div class="ag-header-viewport" role="presentation">
            <div class="ag-header-container" ref="eCenterContainer" role="rowgroup"></div>
        </div>`;w([ne("eCenterContainer")],Yu.prototype,"eCenterContainer",2);w([te],Yu.prototype,"init",1);w([Pr],Yu.prototype,"destroyRowComps",1);var WT=Yu,Eu=class extends ee{constructor(){super(...arguments),this.currentHeaderRowWithoutSpan=-1}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridBodyCon=e.gridBodyCtrl});const t=this.gos.getDocument();this.addManagedListener(t,"mousedown",()=>this.setCurrentHeaderRowWithoutSpan(-1))}getHeaderRowCount(){const t=this.ctrlsService.getHeaderRowContainerCtrl();return t?t.getRowCount():0}navigateVertically(t,e,n){if(e||(e=this.focusService.getFocusedHeader()),!e)return!1;const{headerRowIndex:r,column:i}=e,s=this.getHeaderRowCount(),o=t===0;let{headerRowIndex:a,column:l,headerRowIndexWithoutSpan:u}=o?this.headerPositionUtils.getColumnVisibleParent(i,r):this.headerPositionUtils.getColumnVisibleChild(i,r),c=!1;return a<0&&(a=0,l=i,c=!0),a>=s?(a=-1,this.setCurrentHeaderRowWithoutSpan(-1)):u!==void 0&&(this.currentHeaderRowWithoutSpan=u),!c&&!l?!1:this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a,column:l},allowUserOverride:!0,event:n})}setCurrentHeaderRowWithoutSpan(t){this.currentHeaderRowWithoutSpan=t}navigateHorizontally(t,e=!1,n){const r=this.focusService.getFocusedHeader(),i=t===2,s=this.gos.get("enableRtl");let o,a;if(this.currentHeaderRowWithoutSpan!==-1?r.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=r.headerRowIndex,i!==s?(a="Before",o=this.headerPositionUtils.findHeader(r,a)):(a="After",o=this.headerPositionUtils.findHeader(r,a)),o||!e)return this.focusService.focusHeaderPosition({headerPosition:o,direction:a,fromTab:e,allowUserOverride:!0,event:n});if(e){const l=this.gos.getCallback("tabToNextHeader");if(l)return this.focusService.focusHeaderPositionFromUserFunc({userFunc:l,headerPosition:o,direction:a})}return this.focusNextHeaderRow(r,a,n)}focusNextHeaderRow(t,e,n){const r=t.headerRowIndex;let i=null,s;if(e==="Before"?r>0&&(s=r-1,this.currentHeaderRowWithoutSpan-=1,i=this.headerPositionUtils.findColAtEdgeForHeaderRow(s,"end")):(s=r+1,this.currentHeaderRowWithoutSpan<this.getHeaderRowCount()?this.currentHeaderRowWithoutSpan+=1:this.setCurrentHeaderRowWithoutSpan(-1),i=this.headerPositionUtils.findColAtEdgeForHeaderRow(s,"start")),!i)return!1;const{column:o,headerRowIndex:a}=this.headerPositionUtils.getHeaderIndexToFocus(i.column,i==null?void 0:i.headerRowIndex);return this.focusService.focusHeaderPosition({headerPosition:{column:o,headerRowIndex:a},direction:e,fromTab:!0,allowUserOverride:!0,event:n})}scrollToColumn(t,e="After"){if(t.getPinned())return;let n;if(t instanceof Sn){const r=t.getDisplayedLeafColumns();n=e==="Before"?Je(r):r[0]}else n=t;this.gridBodyCon.getScrollFeature().ensureColumnVisible(n)}};w([O("focusService")],Eu.prototype,"focusService",2);w([O("headerPositionUtils")],Eu.prototype,"headerPositionUtils",2);w([O("ctrlsService")],Eu.prototype,"ctrlsService",2);w([te],Eu.prototype,"postConstruct",1);Eu=w([ce("headerNavigationService")],Eu);var ol=class extends ee{setComp(t,e,n){this.comp=t,this.eGui=e,this.createManagedBean(new il(n,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedListener(this.eventService,x.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.onPivotModeChanged(),this.setupHeaderHeight();const r=this.onHeaderContextMenu.bind(this);this.addManagedListener(this.eGui,"contextmenu",r),this.mockContextMenuForIPad(r),this.ctrlsService.register("gridHeaderCtrl",this)}setupHeaderHeight(){const t=this.setHeaderHeight.bind(this);t(),this.addManagedPropertyListener("headerHeight",t),this.addManagedPropertyListener("pivotHeaderHeight",t),this.addManagedPropertyListener("groupHeaderHeight",t),this.addManagedPropertyListener("pivotGroupHeaderHeight",t),this.addManagedPropertyListener("floatingFiltersHeight",t),this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_CHANGED,t),this.addManagedListener(this.eventService,x.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,t),this.addManagedListener(this.eventService,x.EVENT_GRID_STYLES_CHANGED,t),this.addManagedListener(this.eventService,x.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,t)}getHeaderHeight(){return this.headerHeight}setHeaderHeight(){const{columnModel:t}=this;let e=0,n=t.getHeaderRowCount(),r;this.filterManager.hasFloatingFilters()&&(n++,e=1);const s=this.columnModel.getColumnGroupHeaderRowHeight(),o=this.columnModel.getColumnHeaderRowHeight(),a=1+e,l=n-a;if(r=e*t.getFloatingFiltersHeight(),r+=l*s,r+=o,this.headerHeight===r)return;this.headerHeight=r;const u=`${r+1}px`;this.comp.setHeightAndMinHeight(u),this.eventService.dispatchEvent({type:x.EVENT_HEADER_HEIGHT_CHANGED})}onPivotModeChanged(){const t=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",t),this.comp.addOrRemoveCssClass("ag-pivot-off",!t)}onDisplayedColumnsChanged(){const e=this.columnModel.getAllDisplayedColumns().some(n=>n.isSpanHeaderHeight());this.comp.addOrRemoveCssClass("ag-header-allow-overflow",e)}onTabKeyDown(t){const e=this.gos.get("enableRtl"),n=t.shiftKey!==e?2:3;(this.headerNavigationService.navigateHorizontally(n,!0,t)||this.focusService.focusNextGridCoreContainer(t.shiftKey))&&t.preventDefault()}handleKeyDown(t){let e=null;switch(t.key){case H.LEFT:e=2;case H.RIGHT:J(e)||(e=3),this.headerNavigationService.navigateHorizontally(e,!1,t);break;case H.UP:e=0;case H.DOWN:J(e)||(e=1),this.headerNavigationService.navigateVertically(e,null,t)&&t.preventDefault();break;default:return}}onFocusOut(t){const{relatedTarget:e}=t;!e&&this.eGui.contains(this.gos.getActiveDomElement())||this.eGui.contains(e)||this.focusService.clearFocusedHeader()}onHeaderContextMenu(t,e,n){if(!t&&!n||!this.menuService.isHeaderContextMenuEnabled())return;const{target:r}=t??e;(r===this.eGui||r===this.ctrlsService.getHeaderRowContainerCtrl().getViewport())&&this.menuService.showHeaderContextMenu(void 0,t,n)}mockContextMenuForIPad(t){if(!Ho())return;const e=new Dn(this.eGui),n=r=>{t(void 0,r.touchStart,r.touchEvent)};this.addManagedListener(e,Dn.EVENT_LONG_TAP,n),this.addDestroyFunc(()=>e.destroy())}};w([O("headerNavigationService")],ol.prototype,"headerNavigationService",2);w([O("focusService")],ol.prototype,"focusService",2);w([O("columnModel")],ol.prototype,"columnModel",2);w([O("ctrlsService")],ol.prototype,"ctrlsService",2);w([O("filterManager")],ol.prototype,"filterManager",2);w([O("menuService")],ol.prototype,"menuService",2);var rD=class Tz extends Ae{constructor(){super(Tz.TEMPLATE)}postConstruct(){const e={addOrRemoveCssClass:(i,s)=>this.addOrRemoveCssClass(i,s),setHeightAndMinHeight:i=>{this.getGui().style.height=i,this.getGui().style.minHeight=i}};this.createManagedBean(new ol).setComp(e,this.getGui(),this.getFocusableElement());const r=i=>{this.createManagedBean(i),this.appendChild(i)};r(new WT("left")),r(new WT(null)),r(new WT("right"))}};rD.TEMPLATE='<div class="ag-header" role="presentation"/>';w([te],rD.prototype,"postConstruct",1);var qre=rD,ug=class extends ee{addResizeBar(t){const e={dragStartPixels:t.dragStartPixels||0,eElement:t.eResizeBar,onDragStart:this.onDragStart.bind(this,t),onDragStop:this.onDragStop.bind(this,t),onDragging:this.onDragging.bind(this,t),includeTouch:!0,stopPropagationForTouch:!0};return this.dragService.addDragSource(e),()=>this.dragService.removeDragSource(e)}onDragStart(t,e){this.dragStartX=e.clientX,this.setResizeIcons();const n=e instanceof MouseEvent&&e.shiftKey===!0;t.onResizeStart(n)}setResizeIcons(){const t=this.ctrlsService.get("gridCtrl");t.setResizeCursor(!0),t.disableUserSelect(!0)}onDragStop(t,e){t.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const t=this.ctrlsService.get("gridCtrl");t.setResizeCursor(!1),t.disableUserSelect(!1)}onDragging(t,e){this.resizeAmount=e.clientX-this.dragStartX,t.onResizing(this.resizeAmount)}};w([O("dragService")],ug.prototype,"dragService",2);w([O("ctrlsService")],ug.prototype,"ctrlsService",2);ug=w([ce("horizontalResizeService")],ug);var Ka=class extends ee{hideActiveMenu(){this.hidePopup&&this.hidePopup()}showMenuAfterMouseEvent(t,e,n){this.showPopup(t,r=>{this.popupService.positionPopupUnderMouseEvent({column:t,type:n,mouseEvent:e,ePopup:r})},n,e.target,this.menuService.isLegacyMenuEnabled())}showMenuAfterButtonClick(t,e,n){let r=-1,i="left";const s=this.menuService.isLegacyMenuEnabled();!s&&this.gos.get("enableRtl")&&(r=1,i="right");let o=s?void 0:4*r,a=s?void 0:4;this.showPopup(t,l=>{this.popupService.positionPopupByComponent({type:n,eventSource:e,ePopup:l,nudgeX:o,nudgeY:a,alignSide:i,keepWithinBounds:!0,position:"under",column:t})},n,e,s)}showPopup(t,e,n,r,i){const s=t?this.createBean(new CE(t,"COLUMN_MENU")):void 0;if(this.activeMenu=s,!(s!=null&&s.hasFilter())||!t)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");const o=document.createElement("div");Ut(o,"presentation"),o.classList.add("ag-menu"),i||o.classList.add("ag-filter-menu"),this.tabListener=this.addManagedListener(o,"keydown",g=>this.trapFocusWithin(g,o)),o.appendChild(s==null?void 0:s.getGui());let a;const l=()=>s==null?void 0:s.afterGuiDetached(),u=this.menuService.isColumnMenuAnchoringEnabled()?r??this.ctrlsService.getGridBodyCtrl().getGui():void 0,c=g=>{t.setMenuVisible(!1,"contextMenu");const m=g instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),m&&r&&Yr(r)){const v=this.focusService.findTabbableParent(r);v&&v.focus()}l(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,n,t)},d=this.localeService.getLocaleTextFunc(),h=i&&n!=="columnFilter"?d("ariaLabelColumnMenu","Column Menu"):d("ariaLabelColumnFilter","Column Filter"),f=this.popupService.addPopup({modal:!0,eChild:o,closeOnEsc:!0,closedCallback:c,positionCallback:()=>e(o),anchorToElement:u,ariaLabel:h});f&&(this.hidePopup=a=f.hideFunc),s.afterInit().then(()=>{e(o),s.afterGuiAttached({container:n,hidePopup:a})}),t.setMenuVisible(!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,n,t)}trapFocusWithin(t,e){t.key!==H.TAB||t.defaultPrevented||this.focusService.findNextFocusableElement(e,!1,t.shiftKey)||(t.preventDefault(),this.focusService.focusInto(e,t.shiftKey))}dispatchVisibleChangedEvent(t,e,n){const r={type:x.EVENT_COLUMN_MENU_VISIBLE_CHANGED,visible:t,switchingTab:!1,key:e,column:n??null};this.eventService.dispatchEvent(r)}isMenuEnabled(t){var e;return t.isFilterAllowed()&&((e=t.getColDef().menuTabs)!=null?e:["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}};w([O("filterManager")],Ka.prototype,"filterManager",2);w([O("popupService")],Ka.prototype,"popupService",2);w([O("focusService")],Ka.prototype,"focusService",2);w([O("ctrlsService")],Ka.prototype,"ctrlsService",2);w([O("menuService")],Ka.prototype,"menuService",2);Ka=w([ce("filterMenuFactory")],Ka);var ky=(t=>(t.TAB_GUARD="ag-tab-guard",t.TAB_GUARD_TOP="ag-tab-guard-top",t.TAB_GUARD_BOTTOM="ag-tab-guard-bottom",t))(ky||{}),AE=class extends ee{constructor(t){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1;const{comp:e,eTopGuard:n,eBottomGuard:r,focusTrapActive:i,forceFocusOutWhenTabGuardsAreEmpty:s,focusInnerElement:o,onFocusIn:a,onFocusOut:l,shouldStopEventPropagation:u,onTabKeyDown:c,handleKeyDown:d,eFocusableElement:h}=t;this.comp=e,this.eTopGuard=n,this.eBottomGuard=r,this.providedFocusInnerElement=o,this.eFocusableElement=h,this.focusTrapActive=!!i,this.forceFocusOutWhenTabGuardsAreEmpty=!!s,this.providedFocusIn=a,this.providedFocusOut=l,this.providedShouldStopEventPropagation=u,this.providedOnTabKeyDown=c,this.providedHandleKeyDown=d}postConstruct(){this.createManagedBean(new il(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:t=>this.onTabKeyDown(t),handleKeyDown:t=>this.handleKeyDown(t),onFocusIn:t=>this.onFocusIn(t),onFocusOut:t=>this.onFocusOut(t)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(t=>this.addManagedListener(t,"focus",this.onFocus.bind(this)))}handleKeyDown(t){this.providedHandleKeyDown&&this.providedHandleKeyDown(t)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;const t=this.gos.get("tabIndex");this.comp.setTabIndex(t.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(t){if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&this.focusService.findFocusableElements(this.eFocusableElement,".ag-tab-guard").length===0){this.findNextElementOutsideAndFocus(t.target===this.eBottomGuard);return}const e=t.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(e):this.focusInnerElement(e)}findNextElementOutsideAndFocus(t){const e=this.gos.getDocument(),n=this.focusService.findFocusableElements(e.body,null,!0),r=n.indexOf(t?this.eTopGuard:this.eBottomGuard);if(r===-1)return;let i,s;t?(i=0,s=r):(i=r+1,s=n.length);const o=n.slice(i,s),a=this.gos.get("tabIndex");o.sort((l,u)=>{const c=parseInt(l.getAttribute("tabindex")||"0"),d=parseInt(u.getAttribute("tabindex")||"0");return d===a?1:c===a?-1:c===0?1:d===0?-1:c-d}),o[t?o.length-1:0].focus()}onFocusIn(t){this.focusTrapActive||(this.providedFocusIn&&this.providedFocusIn(t),this.deactivateTabGuards())}onFocusOut(t){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(t),this.eFocusableElement.contains(t.relatedTarget)||this.activateTabGuards())}onTabKeyDown(t){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(t);return}if(this.focusTrapActive||t.defaultPrevented)return;const e=this.tabGuardsAreActive();e&&this.deactivateTabGuards();const n=this.getNextFocusableElement(t.shiftKey);e&&setTimeout(()=>this.activateTabGuards(),0),n&&(n.focus(),t.preventDefault())}focusInnerElement(t=!1){const e=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(e.splice(0,1),e.splice(e.length-1,1)),e.length&&e[t?e.length-1:0].focus({preventScroll:!0})}getNextFocusableElement(t){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,t)}forceFocusOutOfContainer(t=!1){if(this.forcingFocusOut)return;const e=t?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,e.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(t){return t===this.eTopGuard||t===this.eBottomGuard}};w([O("focusService")],AE.prototype,"focusService",2);w([te],AE.prototype,"postConstruct",1);var Vm=class extends Ae{initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.getFocusableElement();const n=[this.eTopGuard,this.eBottomGuard],r={setTabIndex:i=>{n.forEach(s=>i!=null?s.setAttribute("tabindex",i):s.removeAttribute("tabindex"))}};this.addTabGuards(this.eTopGuard,this.eBottomGuard),this.tabGuardCtrl=this.createManagedBean(new AE({comp:r,focusTrapActive:!!e.focusTrapActive,eTopGuard:this.eTopGuard,eBottomGuard:this.eBottomGuard,eFocusableElement:this.eFocusableElement,onFocusIn:e.onFocusIn,onFocusOut:e.onFocusOut,focusInnerElement:e.focusInnerElement,handleKeyDown:e.handleKeyDown,onTabKeyDown:e.onTabKeyDown,shouldStopEventPropagation:e.shouldStopEventPropagation,forceFocusOutWhenTabGuardsAreEmpty:e.forceFocusOutWhenTabGuardsAreEmpty}))}createTabGuard(e){const n=document.createElement("div"),r=e==="top"?"ag-tab-guard-top":"ag-tab-guard-bottom";return n.classList.add("ag-tab-guard",r),Ut(n,"presentation"),n}addTabGuards(e,n){this.eFocusableElement.insertAdjacentElement("afterbegin",e),this.eFocusableElement.insertAdjacentElement("beforeend",n)}removeAllChildrenExceptTabGuards(){const e=[this.eTopGuard,this.eBottomGuard];en(this.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,n){Pm(e)||(e=e.getGui());const{eBottomGuard:r}=this;r?r.insertAdjacentElement("beforebegin",e):super.appendChild(e,n)}},xE=class Rz extends Vm{constructor(e){super(Rz.getTemplate(e.cssClass)),this.items=[],this.tabbedItemScrollMap=new Map,this.params=e}postConstruct(){this.setupHeader(),this.params.items&&this.params.items.forEach(e=>this.addItem(e)),this.initialiseTabGuard({onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),focusInnerElement:this.focusInnerElement.bind(this),focusTrapActive:!0}),this.addDestroyFunc(()=>{var e,n,r;return(r=(n=(e=this.activeItem)==null?void 0:e.tabbedItem)==null?void 0:n.afterDetachedCallback)==null?void 0:r.call(n)})}static getTemplate(e){return`<div class="ag-tabs ${e}">
            <div ref="eHeader"></div>
            <div ref="eBody" role="presentation" class="ag-tabs-body ${e?`${e}-body`:""}"></div>
        </div>`}setupHeader(){const{enableCloseButton:e,cssClass:n}=this.params,r=(i,s)=>{i.classList.add(`ag-tabs-${s}`),n&&i.classList.add(`${n}-${s}`)};e?(this.setupCloseButton(r),this.eTabHeader=this.gos.getDocument().createElement("div"),r(this.eHeader,"header-wrapper"),Ut(this.eHeader,"presentation"),this.eHeader.appendChild(this.eTabHeader)):this.eTabHeader=this.eHeader,Ut(this.eTabHeader,"tablist"),r(this.eTabHeader,"header")}setupCloseButton(e){const n=this.gos.getDocument(),r=n.createElement("button");e(r,"close-button");const i=Bt("close",this.gos,void 0,!0);Si(r,this.params.closeButtonAriaLabel),r.appendChild(i),this.addManagedListener(r,"click",()=>{var o,a;return(a=(o=this.params).onCloseClicked)==null?void 0:a.call(o)});const s=n.createElement("div");e(s,"close-button-wrapper"),Ut(s,"presentation"),s.appendChild(r),this.eHeader.appendChild(s),this.eCloseButton=r}handleKeyDown(e){switch(e.key){case H.RIGHT:case H.LEFT:if(!this.eTabHeader.contains(this.gos.getActiveDomElement()))return;const n=e.key===H.RIGHT,r=this.gos.get("enableRtl"),i=this.items.indexOf(this.activeItem),s=n!==r?Math.min(i+1,this.items.length-1):Math.max(i-1,0);if(i===s)return;e.preventDefault();const o=this.items[s];this.showItemWrapper(o),o.eHeaderButton.focus();break;case H.UP:case H.DOWN:e.stopPropagation();break}}onTabKeyDown(e){var n,r,i,s;if(e.defaultPrevented)return;const{focusService:o,eHeader:a,eBody:l,activeItem:u,params:c}=this,{suppressTrapFocus:d,enableCloseButton:h}=c,f=this.gos.getActiveDomElement(),g=e.target,m=e.shiftKey;if(a.contains(f)){e.preventDefault(),h&&m&&!((n=this.eCloseButton)!=null&&n.contains(f))?(r=this.eCloseButton)==null||r.focus():d&&m?(i=this.focusService.findFocusableElementBeforeTabGuard(this.gos.getDocument().body,g))==null||i.focus():this.focusBody(e.shiftKey);return}let v=null;if(o.isTargetUnderManagedComponent(l,g)&&(m&&(v=this.focusService.findFocusableElementBeforeTabGuard(l,g)),!v&&!d&&(v=u.eHeaderButton)),!v&&l.contains(f)&&(v=o.findNextFocusableElement(l,!1,m),!v)){e.preventDefault(),d&&!m?this.forceFocusOutOfContainer(m):h&&!m?(s=this.eCloseButton)==null||s.focus():this.focusHeader();return}v&&(e.preventDefault(),v.focus())}focusInnerElement(e){e?this.focusHeader():this.focusBody(!0)}focusHeader(e){this.activeItem.eHeaderButton.focus({preventScroll:e})}focusBody(e){this.focusService.focusInto(this.eBody,e)}setAfterAttachedParams(e){this.afterAttachedParams=e}showFirstItem(){this.items.length>0&&this.showItemWrapper(this.items[0])}addItem(e){const n=document.createElement("span");Ut(n,"tab"),n.setAttribute("tabindex","-1"),n.appendChild(e.title),n.classList.add("ag-tab"),this.eTabHeader.appendChild(n),Si(n,e.titleLabel);const r={tabbedItem:e,eHeaderButton:n};this.items.push(r),n.addEventListener("click",this.showItemWrapper.bind(this,r))}showItem(e){const n=this.items.find(r=>r.tabbedItem===e);n&&this.showItemWrapper(n)}showItemWrapper(e){var n,r,i,s,o,a;const{tabbedItem:l,eHeaderButton:u}=e;if((r=(n=this.params).onItemClicked)==null||r.call(n,{item:l}),this.activeItem===e){(s=(i=this.params).onActiveItemClicked)==null||s.call(i);return}this.lastScrollListener&&(this.lastScrollListener=this.lastScrollListener()),en(this.eBody),l.bodyPromise.then(c=>{this.eBody.appendChild(c);const d=!this.focusService.isKeyboardMode();if(this.params.suppressFocusBodyOnOpen||this.focusService.focusInto(this.eBody,!1,d),l.afterAttachedCallback&&l.afterAttachedCallback(this.afterAttachedParams),this.params.keepScrollPosition){const h=l.getScrollableContainer&&l.getScrollableContainer()||c;this.lastScrollListener=this.addManagedListener(h,"scroll",()=>{this.tabbedItemScrollMap.set(l.name,h.scrollTop)});const f=this.tabbedItemScrollMap.get(l.name);f!==void 0&&setTimeout(()=>{h.scrollTop=f},0)}}),this.activeItem&&(this.activeItem.eHeaderButton.classList.remove("ag-tab-selected"),(a=(o=this.activeItem.tabbedItem).afterDetachedCallback)==null||a.call(o)),u.classList.add("ag-tab-selected"),this.activeItem=e}};w([O("focusService")],xE.prototype,"focusService",2);w([ne("eHeader")],xE.prototype,"eHeader",2);w([ne("eBody")],xE.prototype,"eBody",2);w([te],xE.prototype,"postConstruct",1);var Yre=50,E_=class extends ee{constructor(){super(...arguments),this.polyfillFunctions=[]}observeResize(t,e){const n=this.gos.getWindow(),r=()=>{const a=new n.ResizeObserver(e);return a.observe(t),()=>a.disconnect()},i=()=>{var a,l;let u=(a=t==null?void 0:t.clientWidth)!=null?a:0,c=(l=t==null?void 0:t.clientHeight)!=null?l:0,d=!0;const h=()=>{var f,g;if(d){const m=(f=t==null?void 0:t.clientWidth)!=null?f:0,v=(g=t==null?void 0:t.clientHeight)!=null?g:0;(m!==u||v!==c)&&(u=m,c=v,e()),this.doNextPolyfillTurn(h)}};return h(),()=>d=!1},s=this.gos.get("suppressBrowserResizeObserver");return!!n.ResizeObserver&&!s?r():this.getFrameworkOverrides().wrapIncoming(()=>i(),"resize-observer")}doNextPolyfillTurn(t){this.polyfillFunctions.push(t),this.schedulePolyfill()}schedulePolyfill(){if(this.polyfillScheduled)return;const t=()=>{const e=this.polyfillFunctions;this.polyfillScheduled=!1,this.polyfillFunctions=[],e.forEach(n=>n())};this.polyfillScheduled=!0,window.setTimeout(t,Yre)}};E_=w([ce("resizeObserverService")],E_);var Pd=class extends ee{constructor(){super(...arguments),this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}setScrollTop(t){const e=this.gos.get("pagination");if(this.scrollGoingDown=t>=this.lastScrollTop,e&&t===0){const n=this.paginationProxy.getCurrentPage();n!==this.lastPage&&(this.lastPage=n,this.scrollGoingDown=!0)}this.lastScrollTop=t}init(){this.useAnimationFrame=!this.gos.get("suppressAnimationFrame")}isOn(){return this.useAnimationFrame}verifyAnimationFrameOn(t){this.useAnimationFrame===!1&&console.warn(`AG Grid: AnimationFrameService.${t} called but animation frames are off`)}createTask(t,e,n){this.verifyAnimationFrameOn(n);const r={task:t,index:e,createOrder:++this.taskCount};this.addTaskToList(this[n],r),this.schedule()}cancelTask(t){this.cancelledTasks.add(t)}addTaskToList(t,e){t.list.push(e),t.sorted=!1}sortTaskList(t){if(t.sorted)return;const e=this.scrollGoingDown?1:-1;t.list.sort((n,r)=>n.index!==r.index?e*(r.index-n.index):r.createOrder-n.createOrder),t.sorted=!0}addDestroyTask(t){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(t),this.schedule()}executeFrame(t){this.verifyAnimationFrameOn("executeFrame");const e=this.createTasksP1,n=e.list,r=this.createTasksP2,i=r.list,s=this.destroyTasks,o=new Date().getTime();let a=new Date().getTime()-o;const l=t<=0,u=this.ctrlsService.getGridBodyCtrl();for(;l||a<t;){if(!u.getScrollFeature().scrollGridIfNeeded()){let d;if(n.length)this.sortTaskList(e),d=n.pop().task;else if(i.length)this.sortTaskList(r),d=i.pop().task;else if(s.length)d=s.pop();else{this.cancelledTasks.clear();break}this.cancelledTasks.has(d)||d()}a=new Date().getTime()-o}n.length||i.length||s.length?this.requestFrame():this.stopTicking()}stopTicking(){this.ticking=!1}flushAllFrames(){this.useAnimationFrame&&this.executeFrame(-1)}schedule(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const t=this.executeFrame.bind(this,60);this.requestAnimationFrame(t)}requestAnimationFrame(t){const e=this.gos.getWindow();e.requestAnimationFrame?e.requestAnimationFrame(t):e.webkitRequestAnimationFrame?e.webkitRequestAnimationFrame(t):e.setTimeout(t,0)}isQueueEmpty(){return!this.ticking}debounce(t){let e=!1;return()=>{if(!this.isOn()){window.setTimeout(t,0);return}e||(e=!0,this.addDestroyTask(()=>{e=!1,t()}))}}};w([O("ctrlsService")],Pd.prototype,"ctrlsService",2);w([O("paginationProxy")],Pd.prototype,"paginationProxy",2);w([te],Pd.prototype,"init",1);Pd=w([ce("animationFrameService")],Pd);var cg=class extends ee{postConstruct(){this.isClientSideRowModel=this.rowModel.getType()==="clientSide"}expandRows(t){if(!this.isClientSideRowModel)return;const e=new Set(t);this.rowModel.forEachNode(n=>{n.id&&e.has(n.id)&&(n.expanded=!0)}),this.onGroupExpandedOrCollapsed()}getExpandedRows(){const t=[];return this.rowModel.forEachNode(({expanded:e,id:n})=>{e&&n&&t.push(n)}),t}expandAll(t){this.isClientSideRowModel&&this.rowModel.expandOrCollapseAll(t)}setRowNodeExpanded(t,e,n,r){t&&(n&&t.parent&&t.parent.level!==-1&&this.setRowNodeExpanded(t.parent,e,n,r),t.setExpanded(e,void 0,r))}onGroupExpandedOrCollapsed(){this.isClientSideRowModel&&this.rowModel.refreshModel({step:"map"})}};w([O("rowModel")],cg.prototype,"rowModel",2);w([te],cg.prototype,"postConstruct",1);cg=w([ce("expansionService")],cg);var Ui=class extends ee{postConstruct(){var t;this.activeMenuFactory=(t=this.enterpriseMenuFactory)!=null?t:this.filterMenuFactory}showColumnMenu(t){this.showColumnMenuCommon(this.activeMenuFactory,t,"columnMenu")}showFilterMenu(t){const e=this.enterpriseMenuFactory&&this.isLegacyMenuEnabled()?this.enterpriseMenuFactory:this.filterMenuFactory;this.showColumnMenuCommon(e,t,t.containerType,!0)}showHeaderContextMenu(t,e,n){this.activeMenuFactory.showMenuAfterContextMenuEvent(t,e,n)}getContextMenuPosition(t,e){const n=this.getRowCtrl(t),r=this.getCellGui(n,e);if(!r)return n?{x:0,y:n.getRowYPosition()}:{x:0,y:0};const i=r.getBoundingClientRect();return{x:i.x+i.width/2,y:i.y+i.height/2}}showContextMenu(t){var e,n,r;const{column:i,rowNode:s}=t;let{anchorToElement:o,value:a}=t;s&&i&&a==null&&(a=s.getValueFromValueService(i)),o==null&&(o=this.getContextMenuAnchorElement(s,i)),(r=this.contextMenuFactory)==null||r.onContextMenu((e=t.mouseEvent)!=null?e:null,(n=t.touchEvent)!=null?n:null,s??null,i??null,a,o)}showColumnChooser(t){var e;(e=this.columnChooserFactory)==null||e.showColumnChooser(t)}hidePopupMenu(){var t;(t=this.contextMenuFactory)==null||t.hideActiveMenu(),this.activeMenuFactory.hideActiveMenu()}hideColumnChooser(){var t;(t=this.columnChooserFactory)==null||t.hideActiveColumnChooser()}isColumnMenuInHeaderEnabled(t){const{suppressMenu:e,suppressHeaderMenuButton:n}=t.getColDef();return!(n??e)&&this.activeMenuFactory.isMenuEnabled(t)&&(this.isLegacyMenuEnabled()||!!this.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(t){return!t.getColDef().suppressHeaderFilterButton&&this.filterManager.isFilterAllowed(t)}isHeaderContextMenuEnabled(t){return!(t!=null&&t.getColDef().suppressHeaderContextMenu)&&this.getColumnMenuType()==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const t=!this.isSuppressMenuHide();return!(Ho()&&t)}isHeaderFilterButtonEnabled(t){return this.isFilterMenuInHeaderEnabled(t)&&!this.isLegacyMenuEnabled()&&!this.isFloatingFilterButtonDisplayed(t)}isFilterMenuItemEnabled(t){return this.filterManager.isFilterAllowed(t)&&!this.isLegacyMenuEnabled()&&!this.isFilterMenuInHeaderEnabled(t)&&!this.isFloatingFilterButtonDisplayed(t)}isColumnMenuAnchoringEnabled(){return!this.isLegacyMenuEnabled()}areAdditionalColumnMenuItemsEnabled(){return this.getColumnMenuType()==="new"}isLegacyMenuEnabled(){return this.getColumnMenuType()==="legacy"}isFloatingFilterButtonEnabled(t){var e;const n=t.getColDef(),r=(e=n.floatingFilterComponentParams)==null?void 0:e.suppressFilterButton;return r!=null&&we("As of v31.1, 'colDef.floatingFilterComponentParams.suppressFilterButton' is deprecated. Use 'colDef.suppressFloatingFilterButton' instead."),n.suppressFloatingFilterButton==null?!r:!n.suppressFloatingFilterButton}getColumnMenuType(){var t;return(t=this.gos.get("columnMenu"))!=null?t:"legacy"}isFloatingFilterButtonDisplayed(t){return!!t.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(t)}isSuppressMenuHide(){const t=this.gos.get("suppressMenuHide");return this.isLegacyMenuEnabled()||this.gos.exists("suppressMenuHide")?t:!0}showColumnMenuCommon(t,e,n,r){const{column:i,positionBy:s}=e;if(s==="button"){const{buttonElement:o}=e;t.showMenuAfterButtonClick(i,o,n,r)}else if(s==="mouse"){const{mouseEvent:o}=e;t.showMenuAfterMouseEvent(i,o,n,r)}else i&&(this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(i,"auto"),this.animationFrameService.requestAnimationFrame(()=>{const o=this.ctrlsService.getHeaderRowContainerCtrl(i.getPinned()).getHeaderCtrlForColumn(i);t.showMenuAfterButtonClick(i,o.getAnchorElementForMenu(r),n,!0)}))}getRowCtrl(t){const{rowIndex:e,rowPinned:n}=t||{};if(e!=null)return this.rowRenderer.getRowByPosition({rowIndex:e,rowPinned:n})||void 0}getCellGui(t,e){if(!t||!e)return;const n=t.getCellCtrl(e);return(n==null?void 0:n.getGui())||void 0}getContextMenuAnchorElement(t,e){const n=this.ctrlsService.getGridBodyCtrl().getGridBodyElement(),r=this.getRowCtrl(t);if(!r)return n;const i=this.getCellGui(r,e);return i||(r.isFullWidth()?r.getFullWidthElement():n)}};w([O("filterMenuFactory")],Ui.prototype,"filterMenuFactory",2);w([O("ctrlsService")],Ui.prototype,"ctrlsService",2);w([O("animationFrameService")],Ui.prototype,"animationFrameService",2);w([O("filterManager")],Ui.prototype,"filterManager",2);w([O("rowRenderer")],Ui.prototype,"rowRenderer",2);w([ut("columnChooserFactory")],Ui.prototype,"columnChooserFactory",2);w([ut("contextMenuFactory")],Ui.prototype,"contextMenuFactory",2);w([ut("enterpriseMenuFactory")],Ui.prototype,"enterpriseMenuFactory",2);w([te],Ui.prototype,"postConstruct",1);Ui=w([ce("menuService")],Ui);var bu=class extends ee{postConstruct(){this.ctrlsService.whenReady(t=>{this.centerRowContainerCtrl=t.center})}getPreferredWidthForColumn(t,e){const n=this.getHeaderCellForColumn(t);if(!n)return-1;const r=this.rowRenderer.getAllCellsForColumn(t);return e||r.push(n),this.addElementsToContainerAndGetWidth(r)}getPreferredWidthForColumnGroup(t){const e=this.getHeaderCellForColumn(t);return e?this.addElementsToContainerAndGetWidth([e]):-1}addElementsToContainerAndGetWidth(t){const e=document.createElement("form");e.style.position="fixed";const n=this.centerRowContainerCtrl.getContainerElement();t.forEach(s=>this.cloneItemIntoDummy(s,e)),n.appendChild(e);const r=e.offsetWidth;n.removeChild(e);const i=this.getAutoSizePadding();return r+i}getAutoSizePadding(){return this.gos.get("autoSizePadding")}getHeaderCellForColumn(t){let e=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(n=>{const r=n.getHtmlElementForColumnHeader(t);r!=null&&(e=r)}),e}cloneItemIntoDummy(t,e){const n=t.cloneNode(!0);n.style.width="",n.style.position="static",n.style.left="";const r=document.createElement("div"),i=r.classList;["ag-header-cell","ag-header-group-cell"].some(a=>n.classList.contains(a))?(i.add("ag-header","ag-header-row"),r.style.position="static"):i.add("ag-row");let o=t.parentElement;for(;o;){if(["ag-header-row","ag-row"].some(l=>o.classList.contains(l))){for(let l=0;l<o.classList.length;l++){const u=o.classList[l];u!="ag-row-position-absolute"&&i.add(u)}break}o=o.parentElement}r.appendChild(n),e.appendChild(r)}};w([O("rowRenderer")],bu.prototype,"rowRenderer",2);w([O("ctrlsService")],bu.prototype,"ctrlsService",2);w([O("rowCssClassCalculator")],bu.prototype,"rowCssClassCalculator",2);w([te],bu.prototype,"postConstruct",1);bu=w([ce("autoWidthCalculator")],bu);var Hm=class extends ee{constructor(t,e){super(),this.createRowCon=t,this.destroyRowCtrls=e,this.stickyTopRowCtrls=[],this.stickyBottomRowCtrls=[],this.topContainerHeight=0,this.bottomContainerHeight=0}postConstruct(){this.isClientSide=this.rowModel.getType()==="clientSide",this.ctrlsService.whenReady(t=>{this.gridBodyCtrl=t.gridBodyCtrl})}getStickyTopRowCtrls(){return this.stickyTopRowCtrls}getStickyBottomRowCtrls(){return this.stickyBottomRowCtrls}getLastPixelOfGroup(t){return this.isClientSide?this.getClientSideLastPixelOfGroup(t):this.getServerSideLastPixelOfGroup(t)}getFirstPixelOfGroup(t){return t.footer?t.sibling.rowTop+t.sibling.rowHeight-1:t.hasChildren()?t.rowTop-1:0}getServerSideLastPixelOfGroup(t){var e,n,r,i;if(this.isClientSide)throw new Error("This func should only be called in server side row model.");if(t.isExpandable()||t.footer){if(t.master)return t.detailNode.rowTop+t.detailNode.rowHeight;if(!t.sibling||Math.abs(t.sibling.rowIndex-t.rowIndex)===1){let o=(e=t.childStore)==null?void 0:e.getStoreBounds();return t.footer&&(o=(n=t.sibling.childStore)==null?void 0:n.getStoreBounds()),((r=o==null?void 0:o.heightPx)!=null?r:0)+((i=o==null?void 0:o.topPx)!=null?i:0)}return t.footer?t.rowTop+t.rowHeight:t.sibling.rowTop+t.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}getClientSideLastPixelOfGroup(t){if(!this.isClientSide)throw new Error("This func should only be called in client side row model.");if(t.isExpandable()||t.footer){const e=t.footer&&t.rowIndex===0,n=!t.sibling||Math.abs(t.sibling.rowIndex-t.rowIndex)===1;if(e||n){let r=t.footer?t.sibling:t;for(;r.isExpandable()&&r.expanded;)if(r.master)r=r.detailNode;else if(r.childrenAfterSort){if(r.childrenAfterSort.length===0)break;r=Je(r.childrenAfterSort)}return r.rowTop+r.rowHeight}return t.footer?t.rowTop+t.rowHeight:t.sibling.rowTop+t.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}updateStickyRows(t){const e=t==="top";let n=0;if(!this.canRowsBeSticky())return this.refreshNodesAndContainerHeight(t,new Set,n);const r=e?this.rowRenderer.getFirstVisibleVerticalPixel():this.rowRenderer.getLastVisibleVerticalPixel(),i=new Set,s=u=>{if(i.add(u),e){const c=this.getLastPixelOfGroup(u),d=r+n+u.rowHeight;c<d?u.stickyRowTop=n+(c-d):u.stickyRowTop=n}else{const c=this.getFirstPixelOfGroup(u),d=r-(n+u.rowHeight);c>d?u.stickyRowTop=n-(c-d):u.stickyRowTop=n}n=0,i.forEach(c=>{const d=c.stickyRowTop+c.rowHeight;n<d&&(n=d)})},o=this.areFooterRowsStickySuppressed(),a=this.gos.get("suppressGroupRowsSticky"),l=u=>u.displayed?u.footer?o===!0||o==="grand"&&u.level===-1||o==="group"&&u.level>-1?!1:!i.has(u):u.isExpandable()?a===!0?!1:!i.has(u)&&u.expanded:!1:!1;for(let u=0;u<100;u++){let c=r+n;e||(c=r-n);const d=this.rowModel.getRowIndexAtPixel(c),h=this.rowModel.getRow(d);if(h==null)break;const g=this.getStickyAncestors(h).find(v=>(e?v.rowIndex<d:v.rowIndex>d)&&l(v));if(g){s(g);continue}if((e?h.rowTop<c:h.rowTop+h.rowHeight>c)&&l(h)){s(h);continue}break}return e||i.forEach(u=>{u.stickyRowTop=n-(u.stickyRowTop+u.rowHeight)}),this.refreshNodesAndContainerHeight(t,i,n)}areFooterRowsStickySuppressed(){const t=this.gos.get("suppressStickyTotalRow");if(t===!0)return!0;const e=!!this.gos.get("groupIncludeFooter")||t==="group",n=!!this.gos.get("groupIncludeTotalFooter")||t==="grand";return e&&n?!0:n?"grand":e?"group":!1}canRowsBeSticky(){const t=this.gos.isGroupRowsSticky(),e=this.areFooterRowsStickySuppressed(),n=this.gos.get("suppressGroupRowsSticky");return t&&(!e||!n)}getStickyAncestors(t){const e=[];let n=t.footer?t.sibling:t.parent;for(;n;)n.sibling&&e.push(n.sibling),e.push(n),n=n.parent;return e.reverse()}checkStickyRows(){const t=this.updateStickyRows("top"),e=this.updateStickyRows("bottom");return t||e}destroyStickyCtrls(){this.refreshNodesAndContainerHeight("top",new Set,0),this.refreshNodesAndContainerHeight("bottom",new Set,0)}refreshStickyNode(t){const e=new Set;if(this.stickyTopRowCtrls.some(n=>n.getRowNode()===t)){for(let n=0;n<this.stickyTopRowCtrls.length;n++){const r=this.stickyTopRowCtrls[n].getRowNode();r!==t&&e.add(r)}this.refreshNodesAndContainerHeight("top",e,this.topContainerHeight)&&this.checkStickyRows();return}for(let n=0;n<this.stickyBottomRowCtrls.length;n++){const r=this.stickyBottomRowCtrls[n].getRowNode();r!==t&&e.add(r)}this.refreshNodesAndContainerHeight("bottom",e,this.bottomContainerHeight)&&this.checkStickyRows()}refreshNodesAndContainerHeight(t,e,n){const r=t==="top",i=r?this.stickyTopRowCtrls:this.stickyBottomRowCtrls,s={},o=[];for(let d=0;d<i.length;d++){const h=i[d].getRowNode();if(!e.has(h)){s[h.id]=i[d],h.sticky=!1;continue}o.push(i[d])}const a=new Set;for(let d=0;d<o.length;d++)a.add(o[d].getRowNode());const l=[];e.forEach(d=>{a.has(d)||(d.sticky=!0,l.push(this.createRowCon(d,!1,!1)))});let u=!!l.length||o.length!==i.length;r?this.topContainerHeight!==n&&(this.topContainerHeight=n,this.gridBodyCtrl.setStickyTopHeight(n),u=!0):this.bottomContainerHeight!==n&&(this.bottomContainerHeight=n,this.gridBodyCtrl.setStickyBottomHeight(n),u=!0),this.destroyRowCtrls(s,!1);const c=[...o,...l];return c.sort((d,h)=>h.getRowNode().rowIndex-d.getRowNode().rowIndex),r||c.reverse(),c.forEach(d=>d.setRowTop(d.getRowNode().stickyRowTop)),u?(r?this.stickyTopRowCtrls=c:this.stickyBottomRowCtrls=c,!0):!1}};w([O("rowModel")],Hm.prototype,"rowModel",2);w([O("rowRenderer")],Hm.prototype,"rowRenderer",2);w([O("ctrlsService")],Hm.prototype,"ctrlsService",2);w([te],Hm.prototype,"postConstruct",1);var Ei=class extends ee{constructor(){super(...arguments),this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const t=()=>{this.getAllCellCtrls().forEach(s=>s.onRangeSelectionChanged())},e=()=>{this.getAllCellCtrls().forEach(s=>s.updateRangeBordersIfRangeCount())},n=()=>{this.eventService.addEventListener(x.EVENT_RANGE_SELECTION_CHANGED,t),this.eventService.addEventListener(x.EVENT_COLUMN_MOVED,e),this.eventService.addEventListener(x.EVENT_COLUMN_PINNED,e),this.eventService.addEventListener(x.EVENT_COLUMN_VISIBLE,e)},r=()=>{this.eventService.removeEventListener(x.EVENT_RANGE_SELECTION_CHANGED,t),this.eventService.removeEventListener(x.EVENT_COLUMN_MOVED,e),this.eventService.removeEventListener(x.EVENT_COLUMN_PINNED,e),this.eventService.removeEventListener(x.EVENT_COLUMN_VISIBLE,e)};this.addDestroyFunc(()=>r()),this.addManagedPropertyListener("enableRangeSelection",s=>{s.currentValue?n():r()}),this.gos.get("enableRangeSelection")&&n()}}postConstruct(){this.ctrlsService.whenReady(t=>{this.gridBodyCtrl=t.gridBodyCtrl,this.initialise()})}initialise(){if(this.addManagedListener(this.eventService,x.EVENT_PAGINATION_CHANGED,this.onPageLoaded.bind(this)),this.addManagedListener(this.eventService,x.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_BODY_SCROLL,this.onBodyScroll.bind(this)),this.addManagedListener(this.eventService,x.EVENT_BODY_HEIGHT_CHANGED,this.redraw.bind(this)),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListeners(["suppressCellFocus","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],()=>this.redrawRows()),this.gos.isGroupRowsSticky()){const t=this.rowModel.getType();(t==="clientSide"||t==="serverSide")&&(this.stickyRowFeature=this.createManagedBean(new Hm(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this))))}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=this.gos.isDomLayout("print"),this.embedFullWidthRows=this.printLayout||this.gos.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const t=this.getKeepDetailRowsCount(),e=t??3;this.cachedRowCtrls=new Qre(e)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyTopRowCtrls():[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyBottomRowCtrls():[]}updateAllRowCtrls(){const t=Ua(this.rowCtrlsByRowIndex),e=Ua(this.zombieRowCtrls),n=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];e.length>0||n.length>0?this.allRowCtrls=[...t,...e,...n]:this.allRowCtrls=t}onCellFocusChanged(t){this.getAllCellCtrls().forEach(e=>e.onCellFocused(t)),this.getFullWidthRowCtrls().forEach(e=>e.onFullWidthRowFocused(t))}registerCellEventListeners(){this.addManagedListener(this.eventService,x.EVENT_CELL_FOCUSED,t=>{this.onCellFocusChanged(t)}),this.addManagedListener(this.eventService,x.EVENT_CELL_FOCUS_CLEARED,()=>{this.onCellFocusChanged()}),this.addManagedListener(this.eventService,x.EVENT_FLASH_CELLS,t=>{this.getAllCellCtrls().forEach(e=>e.onFlashCells(t))}),this.addManagedListener(this.eventService,x.EVENT_COLUMN_HOVER_CHANGED,()=>{this.getAllCellCtrls().forEach(t=>t.onColumnHover())}),this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_CHANGED,()=>{this.getAllCellCtrls().forEach(t=>t.onDisplayedColumnsChanged())}),this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,()=>{this.printLayout&&this.getAllCellCtrls().forEach(t=>t.onLeftChanged())}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedListener(this.eventService,x.EVENT_GRID_COLUMNS_CHANGED,this.refreshListenersToColumnsForCellComps.bind(this)),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(t=>t()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners(),this.columnModel.getAllGridColumns().forEach(e=>{const n=l=>{this.getAllCellCtrls().forEach(u=>{u.getColumn()===e&&l(u)})},r=()=>{n(l=>l.onLeftChanged())},i=()=>{n(l=>l.onWidthChanged())},s=()=>{n(l=>l.onFirstRightPinnedChanged())},o=()=>{n(l=>l.onLastLeftPinnedChanged())},a=()=>{n(l=>l.onColDefChanged())};e.addEventListener("leftChanged",r),e.addEventListener("widthChanged",i),e.addEventListener("firstRightPinnedChanged",s),e.addEventListener("lastLeftPinnedChanged",o),e.addEventListener("colDefChanged",a),this.destroyFuncsForColumnListeners.push(()=>{e.removeEventListener("leftChanged",r),e.removeEventListener("widthChanged",i),e.removeEventListener("firstRightPinnedChanged",s),e.removeEventListener("lastLeftPinnedChanged",o),e.removeEventListener("colDefChanged",a)})})}onDomLayoutChanged(){const t=this.gos.isDomLayout("print"),e=t||this.gos.get("embedFullWidthRows"),n=e!==this.embedFullWidthRows||this.printLayout!==t;this.printLayout=t,this.embedFullWidthRows=e,n&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t)}onPageLoaded(t){const e={recycleRows:t.keepRenderedRows,animate:t.animate,newData:t.newData,newPage:t.newPage,onlyBody:!0};this.redrawAfterModelUpdate(e)}getAllCellsForColumn(t){const e=[];return this.getAllRowCtrls().forEach(n=>{const r=n.getCellElement(t);r&&e.push(r)}),e}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,this.pinnedRowModel.getPinnedTopRowData()),this.refreshFloatingRows(this.bottomRowCtrls,this.pinnedRowModel.getPinnedBottomRowData())}getTopRowCtrls(){return this.topRowCtrls}getCentreRowCtrls(){return this.allRowCtrls}getBottomRowCtrls(){return this.bottomRowCtrls}refreshFloatingRows(t,e){t.forEach(n=>{n.destroyFirstPass(),n.destroySecondPass()}),t.length=0,e&&e.forEach(n=>{const r=new iu(n,this.beans,!1,!1,this.printLayout);t.push(r)})}onPinnedRowDataChanged(){const t={recycleRows:!0};this.redrawAfterModelUpdate(t)}redrawRow(t,e=!1){var n;if(t.sticky)this.stickyRowFeature.refreshStickyNode(t);else if((n=this.cachedRowCtrls)!=null&&n.has(t)){this.cachedRowCtrls.removeRow(t);return}else{const r=i=>{const s=i[t.rowIndex];s&&s.getRowNode()===t&&(s.destroyFirstPass(),s.destroySecondPass(),i[t.rowIndex]=this.createRowCon(t,!1,!1))};switch(t.rowPinned){case"top":r(this.topRowCtrls);break;case"bottom":r(this.bottomRowCtrls);break;default:r(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}e||this.dispatchDisplayedRowsChanged(!1)}redrawRows(t){if(t!=null){t==null||t.forEach(n=>this.redrawRow(n,!0)),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(t){const e=t!=null&&t.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(e==null)return null;const n=this.gos.getActiveDomElement(),r=this.gos.getDomData(n,ru.DOM_DATA_KEY_CELL_CTRL),i=this.gos.getDomData(n,iu.DOM_DATA_KEY_ROW_CTRL);return r||i?e:null}redrawAfterModelUpdate(t={}){this.getLockOnRefresh();const e=this.getCellToRestoreFocusToAfterRefresh(t);this.updateContainerHeights(),this.scrollToTopIfNewData(t);const n=!t.domLayoutChanged&&!!t.recycleRows,r=t.animate&&this.gos.isAnimateRows(),i=n?this.getRowsToRecycle():null;n||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature&&this.stickyRowFeature.checkStickyRows(),this.recycleRows(i,r),this.gridBodyCtrl.updateRowCount(),t.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),e!=null&&this.restoreFocusedCell(e),this.releaseLockOnRefresh()}scrollToTopIfNewData(t){const e=t.newData||t.newPage,n=this.gos.get("suppressScrollOnNewData");e&&!n&&this.gridBodyCtrl.getScrollFeature().scrollToTop()}updateContainerHeights(){if(this.printLayout){this.rowContainerHeightService.setModelHeight(null);return}let t=this.paginationProxy.getCurrentPageHeight();t===0&&(t=1),this.rowContainerHeightService.setModelHeight(t)}getLockOnRefresh(){if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0}releaseLockOnRefresh(){this.refreshInProgress=!1}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(t){t&&(this.focusService.setRestoreFocusedCell(t),this.onCellFocusChanged(this.beans.gos.addGridCommonParams({rowIndex:t.rowIndex,column:t.column,rowPinned:t.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"mock"})))}stopEditing(t=!1){this.getAllRowCtrls().forEach(e=>{e.stopEditing(t)})}getAllCellCtrls(){const t=[],e=this.getAllRowCtrls(),n=e.length;for(let r=0;r<n;r++){const i=e[r].getAllCellCtrls(),s=i.length;for(let o=0;o<s;o++)t.push(i[o])}return t}getAllRowCtrls(){const t=this.stickyRowFeature&&this.stickyRowFeature.getStickyTopRowCtrls()||[],e=this.stickyRowFeature&&this.stickyRowFeature.getStickyBottomRowCtrls()||[],n=[...this.topRowCtrls,...this.bottomRowCtrls,...t,...e];for(const r in this.rowCtrlsByRowIndex)n.push(this.rowCtrlsByRowIndex[r]);return n}addRenderedRowListener(t,e,n){const r=this.rowCtrlsByRowIndex[e];r&&r.addEventListener(t,n)}flashCells(t={}){this.getCellCtrls(t.rowNodes,t.columns).forEach(e=>e.flashCell(t))}refreshCells(t={}){const e={forceRefresh:t.force,newData:!1,suppressFlash:t.suppressFlash};this.getCellCtrls(t.rowNodes,t.columns).forEach(n=>n.refreshOrDestroyCell(e)),t.rowNodes&&(this.getRowCtrls(t.rowNodes).forEach(n=>{if(!n.isFullWidth())return;n.refreshFullWidth()||this.redrawRow(n.getRowNode(),!0)}),this.dispatchDisplayedRowsChanged(!1))}getCellRendererInstances(t){var e;const n=this.getCellCtrls(t.rowNodes,t.columns).map(s=>s.getCellRenderer()).filter(s=>s!=null);if((e=t.columns)!=null&&e.length)return n;const r=[],i=this.mapRowNodes(t.rowNodes);return this.getAllRowCtrls().forEach(s=>{if(i&&!this.isRowInMap(s.getRowNode(),i)||!s.isFullWidth())return;const o=s.getFullWidthCellRenderers();for(let a=0;a<o.length;a++){const l=o[a];l!=null&&r.push(l)}}),[...r,...n]}getCellEditorInstances(t){const e=[];return this.getCellCtrls(t.rowNodes,t.columns).forEach(n=>{const r=n.getCellEditor();r&&e.push(r)}),e}getEditingCells(){const t=[];return this.getAllCellCtrls().forEach(e=>{if(e.isEditing()){const n=e.getCellPosition();t.push(n)}}),t}mapRowNodes(t){if(!t)return;const e={top:{},bottom:{},normal:{}};return t.forEach(n=>{const r=n.id;switch(n.rowPinned){case"top":e.top[r]=n;break;case"bottom":e.bottom[r]=n;break;default:e.normal[r]=n;break}}),e}isRowInMap(t,e){const n=t.id;switch(t.rowPinned){case"top":return e.top[n]!=null;case"bottom":return e.bottom[n]!=null;default:return e.normal[n]!=null}}getRowCtrls(t){const e=this.mapRowNodes(t),n=this.getAllRowCtrls();return!t||!e?n:n.filter(r=>{const i=r.getRowNode();return this.isRowInMap(i,e)})}getCellCtrls(t,e){let n;J(e)&&(n={},e.forEach(i=>{const s=this.columnModel.getGridColumn(i);J(s)&&(n[s.getId()]=!0)}));const r=[];return this.getRowCtrls(t).forEach(i=>{i.getAllCellCtrls().forEach(s=>{const o=s.getColumn().getId();n&&!n[o]||r.push(s)})}),r}destroy(){this.removeAllRowComps(),super.destroy()}removeAllRowComps(){const t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t),this.stickyRowFeature&&this.stickyRowFeature.destroyStickyCtrls()}getRowsToRecycle(){const t=[];lr(this.rowCtrlsByRowIndex,(n,r)=>{r.getRowNode().id==null&&t.push(n)}),this.removeRowCtrls(t);const e={};return lr(this.rowCtrlsByRowIndex,(n,r)=>{const i=r.getRowNode();e[i.id]=r}),this.rowCtrlsByRowIndex={},e}removeRowCtrls(t,e=!1){t.forEach(n=>{const r=this.rowCtrlsByRowIndex[n];r&&(r.destroyFirstPass(e),r.destroySecondPass()),delete this.rowCtrlsByRowIndex[n]})}onBodyScroll(t){t.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(t={}){const{afterScroll:e}=t;let n;this.stickyRowFeature&&TI()&&(n=this.getCellToRestoreFocusToAfterRefresh()||void 0);const r=this.firstRenderedRow,i=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let s=!1;this.stickyRowFeature&&(s=this.stickyRowFeature.checkStickyRows());const o=this.firstRenderedRow!==r||this.lastRenderedRow!==i;if(!(e&&!s&&!o)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,e),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(e&&!s),n!=null)){const a=this.getCellToRestoreFocusToAfterRefresh();n!=null&&a==null&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(n))}}removeRowCompsNotToDraw(t,e){const n={};t.forEach(s=>n[s]=!0);const i=Object.keys(this.rowCtrlsByRowIndex).filter(s=>!n[s]);this.removeRowCtrls(i,e)}calculateIndexesToDraw(t){let e=nU(this.firstRenderedRow,this.lastRenderedRow);const n=(i,s)=>{const o=s.getRowNode().rowIndex;o!=null&&(o<this.firstRenderedRow||o>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(s)&&e.push(o)};lr(this.rowCtrlsByRowIndex,n),lr(t,n),e.sort((i,s)=>i-s);const r=[];for(let i=0;i<e.length;i++){const s=e[i],o=this.paginationProxy.getRow(s);o&&!o.sticky&&r.push(s)}return r}recycleRows(t,e=!1,n=!1){const r=this.calculateIndexesToDraw(t);(this.printLayout||n)&&(e=!1),this.removeRowCompsNotToDraw(r,!e),r.forEach(i=>{this.createOrUpdateRowCtrl(i,t,e,n)}),t&&(n&&!this.gos.get("suppressAnimationFrame")&&!this.printLayout?this.beans.animationFrameService.addDestroyTask(()=>{this.destroyRowCtrls(t,e),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(t,e)),this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(t=!1){const e={type:x.EVENT_DISPLAYED_ROWS_CHANGED,afterScroll:t};this.eventService.dispatchEvent(e)}onDisplayedColumnsChanged(){const t=this.columnModel.isPinningLeft(),e=this.columnModel.isPinningRight();(this.pinningLeft!==t||e!==this.pinningRight)&&(this.pinningLeft=t,this.pinningRight=e,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const t=[];this.getFullWidthRowCtrls().forEach(e=>{const n=e.getRowNode().rowIndex;t.push(n.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(t),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(t){const e=this.mapRowNodes(t);return this.getAllRowCtrls().filter(n=>{if(!n.isFullWidth())return!1;const r=n.getRowNode();return!(e!=null&&!this.isRowInMap(r,e))})}createOrUpdateRowCtrl(t,e,n,r){let i,s=this.rowCtrlsByRowIndex[t];if(s||(i=this.paginationProxy.getRow(t),J(i)&&J(e)&&e[i.id]&&i.alreadyRendered&&(s=e[i.id],e[i.id]=null)),!s)if(i||(i=this.paginationProxy.getRow(t)),J(i))s=this.createRowCon(i,n,r);else return;return i&&(i.alreadyRendered=!0),this.rowCtrlsByRowIndex[t]=s,s}destroyRowCtrls(t,e){const n=[];lr(t,(r,i)=>{if(i){if(this.cachedRowCtrls&&i.isCacheable()){this.cachedRowCtrls.addRow(i);return}i.destroyFirstPass(!e),e?(this.zombieRowCtrls[i.getInstanceId()]=i,n.push(()=>{i.destroySecondPass(),delete this.zombieRowCtrls[i.getInstanceId()]})):i.destroySecondPass()}}),e&&(n.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),uj(n))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){const t=this.getRowBuffer(),e=this.gos.getRowHeightAsNumber();return t*e}workOutFirstAndLastRowsToRender(){this.rowContainerHeightService.updateOffset();let t,e;if(!this.paginationProxy.isRowsToRender())t=0,e=-1;else if(this.printLayout)this.environment.refreshRowHeightVariable(),t=this.paginationProxy.getPageFirstRow(),e=this.paginationProxy.getPageLastRow();else{const a=this.getRowBufferInPixels(),l=this.ctrlsService.getGridBodyCtrl(),u=this.gos.get("suppressRowVirtualisation");let c=!1,d,h;do{const C=this.paginationProxy.getPixelOffset(),{pageFirstPixel:y,pageLastPixel:S}=this.paginationProxy.getCurrentPagePixelRange(),_=this.rowContainerHeightService.getDivStretchOffset(),E=l.getScrollFeature().getVScrollPosition(),R=E.top,b=E.bottom;u?(d=y+_,h=S+_):(d=Math.max(R+C-a,y)+_,h=Math.min(b+C+a,S)+_),this.firstVisibleVPixel=Math.max(R+C,y)+_,this.lastVisibleVPixel=Math.min(b+C,S)+_,c=this.ensureAllRowsInRangeHaveHeightsCalculated(d,h)}while(c);let f=this.paginationProxy.getRowIndexAtPixel(d),g=this.paginationProxy.getRowIndexAtPixel(h);const m=this.paginationProxy.getPageFirstRow(),v=this.paginationProxy.getPageLastRow();f<m&&(f=m),g>v&&(g=v),t=f,e=g}const n=this.gos.isDomLayout("normal"),r=this.gos.get("suppressMaxRenderedRowRestriction"),i=Math.max(this.getRowBuffer(),500);n&&!r&&e-t>i&&(e=t+i);const s=t!==this.firstRenderedRow,o=e!==this.lastRenderedRow;if(s||o){this.firstRenderedRow=t,this.lastRenderedRow=e;const a={type:x.EVENT_VIEWPORT_CHANGED,firstRow:t,lastRow:e};this.eventService.dispatchEvent(a)}}dispatchFirstDataRenderedEvent(){if(this.dataFirstRenderedFired)return;this.dataFirstRenderedFired=!0;const t={type:x.EVENT_FIRST_DATA_RENDERED,firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow};window.requestAnimationFrame(()=>{this.beans.eventService.dispatchEvent(t)})}ensureAllRowsInRangeHaveHeightsCalculated(t,e){const n=this.paginationProxy.ensureRowHeightsValid(t,e,-1,-1);return n&&this.updateContainerHeights(),n}getFirstVisibleVerticalPixel(){return this.firstVisibleVPixel}getLastVisibleVerticalPixel(){return this.lastVisibleVPixel}getFirstVirtualRenderedRow(){return this.firstRenderedRow}getLastVirtualRenderedRow(){return this.lastRenderedRow}doNotUnVirtualiseRow(t){const r=t.getRowNode(),i=this.focusService.isRowNodeFocused(r),s=t.isEditing(),o=r.detail;return i||s||o?!!this.paginationProxy.isRowPresent(r):!1}createRowCon(t,e,n){const r=this.cachedRowCtrls?this.cachedRowCtrls.getRow(t):null;if(r)return r;const i=this.gos.get("suppressAnimationFrame"),s=n&&!i&&!this.printLayout;return new iu(t,this.beans,e,s,this.printLayout)}getRenderedNodes(){const t=this.rowCtrlsByRowIndex;return Object.values(t).map(e=>e.getRowNode())}getRowByPosition(t){let e;const{rowIndex:n}=t;switch(t.rowPinned){case"top":e=this.topRowCtrls[n];break;case"bottom":e=this.bottomRowCtrls[n];break;default:e=this.rowCtrlsByRowIndex[n],e||(e=this.getStickyTopRowCtrls().find(r=>r.getRowNode().rowIndex===n)||null,e||(e=this.getStickyBottomRowCtrls().find(r=>r.getRowNode().rowIndex===n)||null));break}return e}isRangeInRenderedViewport(t,e){if(t==null||e==null)return!1;const r=t>this.lastRenderedRow;return!(e<this.firstRenderedRow)&&!r}};w([O("animationFrameService")],Ei.prototype,"animationFrameService",2);w([O("paginationProxy")],Ei.prototype,"paginationProxy",2);w([O("columnModel")],Ei.prototype,"columnModel",2);w([O("pinnedRowModel")],Ei.prototype,"pinnedRowModel",2);w([O("rowModel")],Ei.prototype,"rowModel",2);w([O("focusService")],Ei.prototype,"focusService",2);w([O("beans")],Ei.prototype,"beans",2);w([O("rowContainerHeightService")],Ei.prototype,"rowContainerHeightService",2);w([O("ctrlsService")],Ei.prototype,"ctrlsService",2);w([te],Ei.prototype,"postConstruct",1);Ei=w([ce("rowRenderer")],Ei);var Qre=class{constructor(t){this.entriesMap={},this.entriesList=[],this.maxCount=t}addRow(t){if(this.entriesMap[t.getRowNode().id]=t,this.entriesList.push(t),t.setCached(!0),this.entriesList.length>this.maxCount){const e=this.entriesList[0];e.destroyFirstPass(),e.destroySecondPass(),this.removeFromCache(e)}}getRow(t){if(t==null||t.id==null)return null;const e=this.entriesMap[t.id];return e?(this.removeFromCache(e),e.setCached(!1),e.getRowNode()!=t?null:e):null}has(t){return this.entriesMap[t.id]!=null}removeRow(t){const e=t.id,n=this.entriesMap[e];delete this.entriesMap[e],Gr(this.entriesList,n)}removeFromCache(t){const e=t.getRowNode().id;delete this.entriesMap[e],Gr(this.entriesList,t)}getEntries(){return this.entriesList}},dg=class extends ee{init(){this.setPinnedTopRowData(),this.setPinnedBottomRowData(),this.addManagedPropertyListener("pinnedTopRowData",()=>this.setPinnedTopRowData()),this.addManagedPropertyListener("pinnedBottomRowData",()=>this.setPinnedBottomRowData())}isEmpty(t){const e=t==="top"?this.pinnedTopRows:this.pinnedBottomRows;return Mi(e)}isRowsToRender(t){return!this.isEmpty(t)}getRowAtPixel(t,e){const n=e==="top"?this.pinnedTopRows:this.pinnedBottomRows;if(Mi(n))return 0;for(let r=0;r<n.length;r++){const i=n[r];if(i.rowTop+i.rowHeight-1>=t)return r}return n.length-1}setPinnedTopRowData(){const t=this.gos.get("pinnedTopRowData");this.pinnedTopRows=this.createNodesFromData(t,!0);const e={type:x.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(e)}setPinnedBottomRowData(){const t=this.gos.get("pinnedBottomRowData");this.pinnedBottomRows=this.createNodesFromData(t,!1);const e={type:x.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(e)}createNodesFromData(t,e){const n=[];if(t){let r=0;t.forEach((i,s)=>{const o=new Ge(this.beans);o.data=i;const a=e?Ge.ID_PREFIX_TOP_PINNED:Ge.ID_PREFIX_BOTTOM_PINNED;o.id=a+s,o.rowPinned=e?"top":"bottom",o.setRowTop(r),o.setRowHeight(this.gos.getRowHeightForNode(o).height),o.setRowIndex(s),r+=o.rowHeight,n.push(o)})}return n}getPinnedTopRowData(){return this.pinnedTopRows}getPinnedBottomRowData(){return this.pinnedBottomRows}getPinnedTopTotalHeight(){return this.getTotalHeight(this.pinnedTopRows)}getPinnedTopRowCount(){return this.pinnedTopRows?this.pinnedTopRows.length:0}getPinnedBottomRowCount(){return this.pinnedBottomRows?this.pinnedBottomRows.length:0}getPinnedTopRow(t){return this.pinnedTopRows[t]}getPinnedBottomRow(t){return this.pinnedBottomRows[t]}forEachPinnedTopRow(t){Mi(this.pinnedTopRows)||this.pinnedTopRows.forEach(t)}forEachPinnedBottomRow(t){Mi(this.pinnedBottomRows)||this.pinnedBottomRows.forEach(t)}getPinnedBottomTotalHeight(){return this.getTotalHeight(this.pinnedBottomRows)}getTotalHeight(t){if(!t||t.length===0)return 0;const e=Je(t);return e.rowTop+e.rowHeight}};w([O("beans")],dg.prototype,"beans",2);w([te],dg.prototype,"init",1);dg=w([ce("pinnedRowModel")],dg);var PE=class{constructor(t,e){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=t,this.pathRoot={rowNode:e,children:null},this.mapToItems[e.id]=this.pathRoot}setInactive(){this.active=!1}isActive(){return this.active}depthFirstSearchChangedPath(t,e){if(t.children)for(let n=0;n<t.children.length;n++)this.depthFirstSearchChangedPath(t.children[n],e);e(t.rowNode)}depthFirstSearchEverything(t,e,n){if(t.childrenAfterGroup)for(let r=0;r<t.childrenAfterGroup.length;r++){const i=t.childrenAfterGroup[r];i.childrenAfterGroup?this.depthFirstSearchEverything(t.childrenAfterGroup[r],e,n):n&&e(i)}e(t)}forEachChangedNodeDepthFirst(t,e=!1,n=!1){this.active&&!n?this.depthFirstSearchChangedPath(this.pathRoot,t):this.depthFirstSearchEverything(this.pathRoot.rowNode,t,e)}executeFromRootNode(t){t(this.pathRoot.rowNode)}createPathItems(t){let e=t,n=0;for(;!this.mapToItems[e.id];){const r={rowNode:e,children:null};this.mapToItems[e.id]=r,n++,e=e.parent}return n}populateColumnsMap(t,e){if(!this.keepingColumns||!e)return;let n=t;for(;n;)this.nodeIdsToColumns[n.id]||(this.nodeIdsToColumns[n.id]={}),e.forEach(r=>this.nodeIdsToColumns[n.id][r.getId()]=!0),n=n.parent}linkPathItems(t,e){let n=t;for(let r=0;r<e;r++){const i=this.mapToItems[n.id],s=this.mapToItems[n.parent.id];s.children||(s.children=[]),s.children.push(i),n=n.parent}}addParentNode(t,e){if(!t||t.isRowPinned())return;const n=this.createPathItems(t);this.linkPathItems(t,n),this.populateColumnsMap(t,e)}canSkip(t){return this.active&&!this.mapToItems[t.id]}getValueColumnsForNode(t,e){if(!this.keepingColumns)return e;const n=this.nodeIdsToColumns[t.id];return e.filter(i=>n[i.getId()])}getNotValueColumnsForNode(t,e){if(!this.keepingColumns)return null;const n=this.nodeIdsToColumns[t.id];return e.filter(i=>!n[i.getId()])}},Dh=class Pl extends ee{constructor(e){super(),this.state=Pl.STATE_WAITING_TO_LOAD,this.version=0,this.id=e}getId(){return this.id}load(){this.state=Pl.STATE_LOADING,this.loadFromDatasource()}getVersion(){return this.version}setStateWaitingToLoad(){this.version++,this.state=Pl.STATE_WAITING_TO_LOAD}getState(){return this.state}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state=Pl.STATE_FAILED,this.processServerFail()),this.dispatchLoadCompleted(!1)}success(e,n){this.successCommon(e,n)}pageLoaded(e,n,r){this.successCommon(e,{rowData:n,rowCount:r})}isRequestMostRecentAndLive(e){const n=e===this.version,r=this.isAlive();return n&&r}successCommon(e,n){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(e)&&(this.state=Pl.STATE_LOADED,this.processServerResult(n))}dispatchLoadCompleted(e=!0){const n={type:Pl.EVENT_LOAD_COMPLETE,success:e,block:this};this.dispatchEvent(n)}};Dh.EVENT_LOAD_COMPLETE="loadComplete";Dh.STATE_WAITING_TO_LOAD="needsLoading";Dh.STATE_LOADING="loading";Dh.STATE_LOADED="loaded";Dh.STATE_FAILED="failed";var b_=Dh,Us=class extends ee{constructor(){super(...arguments),this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}postConstruct(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();const t=this.gos.get("blockLoadDebounceMillis");t&&t>0&&(this.checkBlockToLoadDebounce=be.debounce(this.performCheckBlocksToLoad.bind(this),t))}setBeans(t){this.logger=t.create("RowNodeBlockLoader")}getMaxConcurrentDatasourceRequests(){const t=this.gos.get("maxConcurrentDatasourceRequests");if(t==null)return 2;if(!(t<=0))return t}addBlock(t){this.blocks.push(t),t.addEventListener(b_.EVENT_LOAD_COMPLETE,this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(t){be.removeFromArray(this.blocks,t)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchEvent({type:Us.BLOCK_LOADED_EVENT}),this.activeBlockLoadsCount==0&&this.dispatchEvent({type:Us.BLOCK_LOADER_FINISHED_EVENT})}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){this.logger.log("checkBlockToLoad: max loads exceeded");return}const t=this.getAvailableLoadingCount(),e=this.blocks.filter(n=>n.getState()===b_.STATE_WAITING_TO_LOAD).slice(0,t);this.registerLoads(e.length),e.forEach(n=>n.load()),this.printCacheStatus()}getBlockState(){if(this.gos.isRowModelType("serverSide"))return this.rowModel.getBlockStates();const t={};return this.blocks.forEach(e=>{const{id:n,state:r}=e.getBlockStateJson();t[n]=r}),t}printCacheStatus(){this.logger.isLogging()&&this.logger.log(`printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}isLoading(){return this.activeBlockLoadsCount>0}registerLoads(t){this.activeBlockLoadsCount+=t}getAvailableLoadingCount(){return this.maxConcurrentRequests!==void 0?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0}};Us.BLOCK_LOADED_EVENT="blockLoaded";Us.BLOCK_LOADER_FINISHED_EVENT="blockLoaderFinished";w([O("rowModel")],Us.prototype,"rowModel",2);w([te],Us.prototype,"postConstruct",1);w([ls(0,Li("loggerFactory"))],Us.prototype,"setBeans",1);Us=w([ce("rowNodeBlockLoader")],Us);var hg=class extends ee{constructor(){super(...arguments),this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.pixelOffset=0,this.masterRowCount=0}postConstruct(){this.active=this.gos.get("pagination"),this.pageSizeFromGridOptions=this.gos.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedListener(this.eventService,x.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this)),this.onModelUpdated()}ensureRowHeightsValid(t,e,n,r){const i=this.rowModel.ensureRowHeightsValid(t,e,this.getPageFirstRow(),this.getPageLastRow());return i&&this.calculatePages(),i}isPaginateChildRows(){return this.gos.get("groupRemoveSingleChildren")||this.gos.get("groupRemoveLowestSingleChildren")?!0:this.gos.get("paginateChildRows")}onModelUpdated(t){this.calculatePages();const e={type:x.EVENT_PAGINATION_CHANGED,animate:t?t.animate:!1,newData:t?t.newData:!1,newPage:t?t.newPage:!1,newPageSize:t?t.newPageSize:!1,keepRenderedRows:t?t.keepRenderedRows:!1};this.eventService.dispatchEvent(e)}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages();const t={type:x.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,newPageSize:!1,keepRenderedRows:!0};this.eventService.dispatchEvent(t)}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(t){if(!this.active||this.currentPage===t||typeof this.currentPage!="number")return;this.currentPage=t,this.calculatePages();const e={type:x.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!0,newPageSize:!1,keepRenderedRows:!1};this.eventService.dispatchEvent(e)}getPixelOffset(){return this.pixelOffset}getRow(t){return this.rowModel.getRow(t)}getRowNode(t){return this.rowModel.getRowNode(t)}getRowIndexAtPixel(t){return this.rowModel.getRowIndexAtPixel(t)}getCurrentPageHeight(){return Te(this.topRowBounds)||Te(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)}getCurrentPagePixelRange(){const t=this.topRowBounds?this.topRowBounds.rowTop:0,e=this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0;return{pageFirstPixel:t,pageLastPixel:e}}isRowPresent(t){return this.rowModel.isRowPresent(t)?t.rowIndex>=this.topDisplayedRowIndex&&t.rowIndex<=this.bottomDisplayedRowIndex:!1}isEmpty(){return this.rowModel.isEmpty()}isRowsToRender(){return this.rowModel.isRowsToRender()}forEachNode(t){return this.rowModel.forEachNode(t)}forEachNodeOnPage(t){const e=this.getPageFirstRow(),n=this.getPageLastRow();for(let r=e;r<=n;r++){const i=this.getRow(r);i&&t(i)}}getType(){return this.rowModel.getType()}getRowBounds(t){const e=this.rowModel.getRowBounds(t);return e.rowIndex=t,e}getPageFirstRow(){return this.topRowBounds?this.topRowBounds.rowIndex:-1}getPageLastRow(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1}getRowCount(){return this.rowModel.getRowCount()}getPageForIndex(t){return Math.floor(t/this.pageSize)}goToPageWithIndex(t){if(!this.active)return;const e=this.getPageForIndex(t);this.goToPage(e)}isRowInPage(t){return this.active?this.getPageForIndex(t.rowIndex)===this.currentPage:!0}isLastPageFound(){return this.rowModel.isLastRowIndexKnown()}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const t=this.rowModel.getRowCount(),e=Math.floor(t/this.pageSize);this.goToPage(e)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(t){this.currentPage=t}get pageSize(){return J(this.pageSizeAutoCalculated)?this.pageSizeAutoCalculated:J(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:J(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:J(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;const t=this.pageSizeAutoCalculated;if(this.pageSizeAutoCalculated=void 0,this.pageSize===t)return;this.calculatePages();const e={type:x.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,newPageSize:!0,keepRenderedRows:!1};this.eventService.dispatchEvent(e)}setPageSize(t,e){const n=this.pageSize;switch(e){case"autoCalculated":this.pageSizeAutoCalculated=t;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=t,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=t;break;case"gridOptions":this.pageSizeFromGridOptions=t,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}if(n!==this.pageSize){this.calculatePages();const r={type:x.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,newPageSize:!0,keepRenderedRows:!0};this.eventService.dispatchEvent(r)}}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.topRowBounds=this.rowModel.getRowBounds(this.topDisplayedRowIndex),this.topRowBounds&&(this.topRowBounds.rowIndex=this.topDisplayedRowIndex),this.bottomRowBounds=this.rowModel.getRowBounds(this.bottomDisplayedRowIndex),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=this.bottomDisplayedRowIndex),this.setPixelOffset(J(this.topRowBounds)?this.topRowBounds.rowTop:0)}setPixelOffset(t){this.pixelOffset!==t&&(this.pixelOffset=t,this.eventService.dispatchEvent({type:x.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0){this.setZeroRows();return}const t=this.masterRowCount-1;this.totalPages=Math.floor(t/this.pageSize)+1,this.adjustCurrentPageIfInvalid();const e=this.pageSize*this.currentPage;let n=this.pageSize*(this.currentPage+1)-1;if(n>t&&(n=t),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(e),n===t)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{const r=this.rowModel.getTopLevelRowDisplayedIndex(n+1);this.bottomDisplayedRowIndex=r-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){if(this.masterRowCount=this.rowModel.getRowCount(),this.masterRowCount===0){this.setZeroRows();return}const t=this.masterRowCount-1;this.totalPages=Math.floor(t/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>t&&(this.bottomDisplayedRowIndex=t)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1}};w([O("rowModel")],hg.prototype,"rowModel",2);w([te],hg.prototype,"postConstruct",1);hg=w([ce("paginationProxy")],hg);var qC=class extends ee{processAllCellClasses(t,e,n,r){this.processClassRules(void 0,t.cellClassRules,e,n,r),this.processStaticCellClasses(t,e,n)}processClassRules(t,e,n,r,i){if(e==null&&t==null)return;const s={},o={},a=(l,u)=>{l.split(" ").forEach(c=>{c.trim()!=""&&u(c)})};if(e){const l=Object.keys(e);for(let u=0;u<l.length;u++){const c=l[u],d=e[c];let h;typeof d=="string"?h=this.expressionService.evaluate(d,n):typeof d=="function"&&(h=d(n)),a(c,f=>{h?s[f]=!0:o[f]=!0})}}t&&i&&Object.keys(t).forEach(l=>a(l,u=>{s[u]||(o[u]=!0)})),i&&Object.keys(o).forEach(i),Object.keys(s).forEach(r)}getStaticCellClasses(t,e){const{cellClass:n}=t;if(!n)return[];let r;return typeof n=="function"?r=n(e):r=n,typeof r=="string"&&(r=[r]),r||[]}processStaticCellClasses(t,e,n){this.getStaticCellClasses(t,e).forEach(i=>{n(i)})}};w([O("expressionService")],qC.prototype,"expressionService",2);qC=w([ce("stylingService")],qC);var _z=class extends fE{constructor(t){super(t,"ag-toggle-button")}setValue(t,e){return super.setValue(t,e),this.addOrRemoveCssClass("ag-selected",this.getValue()),this}},Xre=class extends cs{constructor(t){super(t,"ag-text-area",null,"textarea")}setValue(t,e){const n=super.setValue(t,e);return this.eInput.value=t,n}setCols(t){return this.eInput.cols=t,this}setRows(t){return this.eInput.rows=t,this}},Jre=class extends Wu{constructor(t){super(t,"ag-date-field","date")}postConstruct(){super.postConstruct(),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this));const t=js();this.addManagedListener(this.eInput,"mousedown",()=>{this.isDisabled()||t||this.eInput.focus()}),this.eInput.step="any"}onWheel(t){this.gos.getActiveDomElement()===this.eInput&&t.preventDefault()}setMin(t){var e;const n=t instanceof Date?(e=Hi(t??null,!1))!=null?e:void 0:t;return this.min===n?this:(this.min=n,Hs(this.eInput,"min",n),this)}setMax(t){var e;const n=t instanceof Date?(e=Hi(t??null,!1))!=null?e:void 0:t;return this.max===n?this:(this.max=n,Hs(this.eInput,"max",n),this)}setStep(t){return this.step===t?this:(this.step=t,Hs(this.eInput,"step",t),this)}getDate(){var t;if(this.eInput.validity.valid)return(t=$r(this.getValue()))!=null?t:void 0}setDate(t,e){this.setValue(Hi(t??null,!1),e)}},Zre=class extends cs{constructor(t){super(t,"ag-range-field","range")}postConstruct(){super.postConstruct();const{min:t,max:e,step:n}=this.config;t!=null&&this.setMinValue(t),e!=null&&this.setMaxValue(e),this.setStep(n||1)}addInputListeners(){this.addManagedListener(this.eInput,"input",t=>{const e=t.target.value;this.setValue(e)})}setMinValue(t){return this.min=t,this.eInput.setAttribute("min",t.toString()),this}setMaxValue(t){return this.max=t,this.eInput.setAttribute("max",t.toString()),this}setStep(t){return this.eInput.setAttribute("step",t.toString()),this}setValue(t,e){this.min!=null&&(t=Math.max(parseFloat(t),this.min).toString()),this.max!=null&&(t=Math.min(parseFloat(t),this.max).toString());const n=super.setValue(t,e);return this.eInput.value=t,n}},iD=class extends Ae{constructor(t,e){super('<div class="ag-rich-select-row" role="presentation"></div>'),this.params=t,this.wrapperEl=e}postConstruct(){this.addManagedListener(this.getGui(),"click",this.onClick.bind(this))}setState(t){let e="";this.params.valueFormatter&&(e=this.params.valueFormatter(t)),this.populateWithRenderer(t,e)||this.populateWithoutRenderer(t,e),this.value=t}highlightString(t){const{parsedValue:e}=this;if(this.params.cellRenderer||!J(e))return;let n=J(t);if(n){const r=e==null?void 0:e.toLocaleLowerCase().indexOf(t.toLocaleLowerCase());if(r>=0){const i=r+t.length,s=sn(e.slice(0,r),!0),o=sn(e.slice(r,i),!0),a=sn(e.slice(i));this.renderValueWithoutRenderer(`${s}<span class="ag-rich-select-row-text-highlight">${o}</span>${a}`)}else n=!1}n||this.renderValueWithoutRenderer(e)}updateHighlighted(t){var e;const n=this.getGui(),r=`ag-rich-select-row-${this.getCompId()}`;if((e=n.parentElement)==null||e.setAttribute("id",r),t){const i=this.getParentComponent().getAriaElement();vI(i,r),this.wrapperEl.setAttribute("data-active-option",r)}Rd(n.parentElement,t),this.addOrRemoveCssClass("ag-rich-select-row-selected",t)}populateWithoutRenderer(t,e){const n=this.gos.getDocument(),r=this.getGui(),i=n.createElement("span");i.style.overflow="hidden",i.style.textOverflow="ellipsis";const s=sn(J(e)?e:t,!0);this.parsedValue=J(s)?s:null,r.appendChild(i),this.renderValueWithoutRenderer(s),this.setTooltip({newTooltipText:this.parsedValue,shouldDisplayTooltip:()=>i.scrollWidth>i.clientWidth})}renderValueWithoutRenderer(t){const e=this.getGui().querySelector("span");e&&(e.innerHTML=J(t)?t:"&nbsp;")}populateWithRenderer(t,e){let n,r;return this.params.cellRenderer&&(r=this.userComponentFactory.getCellRendererDetails(this.params,{value:t,valueFormatted:e,setTooltip:(i,s)=>{this.setTooltip({newTooltipText:i,shouldDisplayTooltip:s})}})),r&&(n=r.newAgStackInstance()),n&&LI(n,this.getGui()),n?(n.then(i=>{this.addDestroyFunc(()=>{this.getContext().destroyBean(i)})}),!0):!1}onClick(){const t=this.getParentComponent(),e={type:x.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey:!1,value:this.value};t==null||t.dispatchEvent(e)}};w([O("userComponentFactory")],iD.prototype,"userComponentFactory",2);w([te],iD.prototype,"postConstruct",1);var Bm=class Az extends Vm{constructor(e){super(Az.getTemplate((e==null?void 0:e.cssIdentifier)||"default")),this.renderedRows=new Map,this.rowHeight=20,this.pageSize=-1,this.isScrolling=!1,this.isHeightFromTheme=!0;const{cssIdentifier:n="default",ariaRole:r="listbox",listName:i}=e||{};this.cssIdentifier=n,this.ariaRole=r,this.listName=i}postConstruct(){this.addScrollListener(),this.rowHeight=this.getItemHeight(),this.addResizeObserver(),this.initialiseTabGuard({onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e),focusInnerElement:e=>this.focusInnerElement(e),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e)}),this.setAriaProperties(),this.addManagedListener(this.eventService,x.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanged.bind(this))}onGridStylesChanged(){this.rowHeight=this.getItemHeight(),this.refresh()}setAriaProperties(){const n=this.localeService.getLocaleTextFunc()("ariaDefaultListName",this.listName||"List"),r=this.eContainer;Ut(r,this.ariaRole),Si(r,n)}addResizeObserver(){const e=()=>this.animationFrameService.requestAnimationFrame(()=>this.drawVirtualRows()),n=this.resizeObserverService.observeResize(this.getGui(),e);this.addDestroyFunc(n)}focusInnerElement(e){this.focusRow(e?this.model.getRowCount()-1:0)}onFocusIn(e){const n=e.target;n.classList.contains("ag-virtual-list-item")&&(this.lastFocusedRowIndex=Lj(n)-1)}onFocusOut(e){this.getFocusableElement().contains(e.relatedTarget)||(this.lastFocusedRowIndex=null)}handleKeyDown(e){switch(e.key){case H.UP:case H.DOWN:this.navigate(e.key===H.UP)&&e.preventDefault();break;case H.PAGE_HOME:case H.PAGE_END:case H.PAGE_UP:case H.PAGE_DOWN:this.navigateToPage(e.key)!==null&&e.preventDefault();break}}onTabKeyDown(e){this.navigate(e.shiftKey)?e.preventDefault():(Cs(e),this.forceFocusOutOfContainer(e.shiftKey))}navigate(e){if(this.lastFocusedRowIndex==null)return!1;const n=this.lastFocusedRowIndex+(e?-1:1);return n<0||n>=this.model.getRowCount()?!1:(this.focusRow(n),!0)}navigateToPage(e,n="focused"){let r=!1;n==="focused"&&(n=this.getLastFocusedRow(),r=!0);const i=this.model.getRowCount()-1;let s=-1;return e===H.PAGE_HOME?s=0:e===H.PAGE_END?s=i:e===H.PAGE_DOWN?s=Math.min(n+this.pageSize,i):e===H.PAGE_UP&&(s=Math.max(n-this.pageSize,0)),s===-1?null:(r?this.focusRow(s):this.ensureIndexVisible(s),s)}getLastFocusedRow(){return this.lastFocusedRowIndex}focusRow(e){this.isScrolling||(this.isScrolling=!0,this.ensureIndexVisible(e),this.animationFrameService.requestAnimationFrame(()=>{if(this.isScrolling=!1,!this.isAlive())return;const n=this.renderedRows.get(e);n&&n.eDiv.focus()}))}getComponentAt(e){const n=this.renderedRows.get(e);return n&&n.rowComponent}forEachRenderedRow(e){this.renderedRows.forEach((n,r)=>e(n.rowComponent,r))}static getTemplate(e){return`<div class="ag-virtual-list-viewport ag-${e}-virtual-list-viewport" role="presentation">
                <div class="ag-virtual-list-container ag-${e}-virtual-list-container" ref="eContainer"></div>
            </div>`}getItemHeight(){return this.isHeightFromTheme?this.environment.getListItemHeight():this.rowHeight}ensureIndexVisible(e,n=!0){const r=this.model.getRowCount();if(typeof e!="number"||e<0||e>=r)return console.warn("AG Grid: invalid row index for ensureIndexVisible: "+e),!1;const i=e*this.rowHeight,s=i+this.rowHeight,o=this.getGui(),a=o.scrollTop,l=o.offsetHeight,u=a+l,c=n?0:this.rowHeight,d=a>i+c,h=u<s-c;if(d)return o.scrollTop=i,!0;if(h){const f=s-l;return o.scrollTop=f,!0}return!1}setComponentCreator(e){this.componentCreator=e}setComponentUpdater(e){this.componentUpdater=e}getRowHeight(){return this.rowHeight}getScrollTop(){return this.getGui().scrollTop}setRowHeight(e){this.isHeightFromTheme=!1,this.rowHeight=e,this.refresh()}refresh(e){if(this.model==null||!this.isAlive())return;const n=this.model.getRowCount();this.eContainer.style.height=`${n*this.rowHeight}px`,cI(()=>this.eContainer.clientHeight>=n*this.rowHeight,()=>{this.isAlive()&&(this.canSoftRefresh(e)?this.drawVirtualRows(!0):(this.clearVirtualRows(),this.drawVirtualRows()))})}canSoftRefresh(e){return!!(e&&this.renderedRows.size&&typeof this.model.areRowsEqual=="function"&&this.componentUpdater)}clearVirtualRows(){this.renderedRows.forEach((e,n)=>this.removeRow(n))}drawVirtualRows(e){if(!this.isAlive()||!this.model)return;const n=this.getGui(),r=n.scrollTop,i=r+n.offsetHeight,s=Math.floor(r/this.rowHeight),o=Math.floor(i/this.rowHeight);this.pageSize=Math.floor((i-r)/this.rowHeight),this.ensureRowsRendered(s,o,e)}ensureRowsRendered(e,n,r){this.renderedRows.forEach((i,s)=>{(s<e||s>n)&&s!==this.lastFocusedRowIndex&&this.removeRow(s)}),r&&this.refreshRows();for(let i=e;i<=n;i++)this.renderedRows.has(i)||i<this.model.getRowCount()&&this.insertRow(i)}insertRow(e){const n=this.model.getRow(e),r=document.createElement("div");r.classList.add("ag-virtual-list-item",`ag-${this.cssIdentifier}-virtual-list-item`),Ut(r,this.ariaRole==="tree"?"treeitem":"option"),iE(r,this.model.getRowCount()),sE(r,e+1),r.setAttribute("tabindex","-1"),r.style.height=`${this.rowHeight}px`,r.style.top=`${this.rowHeight*e}px`;const i=this.componentCreator(n,r);i.addGuiEventListener("focusin",()=>this.lastFocusedRowIndex=e),r.appendChild(i.getGui()),this.renderedRows.has(e-1)?this.renderedRows.get(e-1).eDiv.insertAdjacentElement("afterend",r):this.renderedRows.has(e+1)?this.renderedRows.get(e+1).eDiv.insertAdjacentElement("beforebegin",r):this.eContainer.appendChild(r),this.renderedRows.set(e,{rowComponent:i,eDiv:r,value:n})}removeRow(e){const n=this.renderedRows.get(e);this.eContainer.removeChild(n.eDiv),this.destroyBean(n.rowComponent),this.renderedRows.delete(e)}refreshRows(){const e=this.model.getRowCount();this.renderedRows.forEach((n,r)=>{var i,s;if(r>=e)this.removeRow(r);else{const o=this.model.getRow(r);(s=(i=this.model).areRowsEqual)!=null&&s.call(i,n.value,o)?this.componentUpdater(o,n.rowComponent):this.removeRow(r)}})}addScrollListener(){this.addGuiEventListener("scroll",()=>this.drawVirtualRows(),{passive:!0})}setModel(e){this.model=e}getAriaElement(){return this.eContainer}destroy(){this.isAlive()&&(this.clearVirtualRows(),super.destroy())}};w([O("resizeObserverService")],Bm.prototype,"resizeObserverService",2);w([O("animationFrameService")],Bm.prototype,"animationFrameService",2);w([ne("eContainer")],Bm.prototype,"eContainer",2);w([te],Bm.prototype,"postConstruct",1);var xz=Bm,eie=`
    <div class="ag-picker-field" role="presentation">
        <div ref="eLabel"></div>
            <div ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-rich-select-value ag-picker-collapsed">
            <div ref="eDisplayField" class="ag-picker-field-display"></div>
            <ag-input-text-field ref="eInput" class="ag-rich-select-field-input"></ag-input-text-field>
            <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
        </div>
    </div>`,IE=class extends $u{constructor(t){var e,n;super(Dt(me({pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"ag-list",className:"ag-rich-select",pickerIcon:"smallDown",ariaRole:"combobox",template:(e=t==null?void 0:t.template)!=null?e:eie,modalPicker:!1},t),{maxPickerHeight:(n=t==null?void 0:t.maxPickerHeight)!=null?n:"calc(var(--ag-row-height) * 6.5)"})),this.searchString="",this.highlightedItem=-1,this.lastRowHovered=-1,this.searchStringCreator=null;const{cellRowHeight:r,value:i,valueList:s,searchStringCreator:o}=t||{};r!=null&&(this.cellRowHeight=r),i!==void 0&&(this.value=i),s!=null&&(this.values=s),o&&(this.searchStringCreator=o)}postConstruct(){super.postConstruct(),this.createLoadingElement(),this.createListComponent();const{allowTyping:t,placeholder:e}=this.config;t?(this.eInput.setAutoComplete(!1).setInputPlaceholder(e),this.eDisplayField.classList.add("ag-hidden")):this.eInput.setDisplayed(!1),this.eWrapper.tabIndex=this.gos.get("tabIndex");const{searchDebounceDelay:n=300}=this.config;this.clearSearchString=yr(this.clearSearchString,n),this.renderSelectedValue(),t&&(this.eInput.onValueChange(r=>this.searchTextFromString(r)),this.addManagedListener(this.eWrapper,"focus",this.onWrapperFocus.bind(this))),this.addManagedListener(this.eWrapper,"focusout",this.onWrapperFocusOut.bind(this))}createLoadingElement(){const t=this.gos.getDocument(),e=this.localeService.getLocaleTextFunc(),n=t.createElement("div");n.classList.add("ag-loading-text"),n.innerText=e("loadingOoo","Loading..."),this.eLoading=n}createListComponent(){this.listComponent=this.createBean(new xz({cssIdentifier:"rich-select"})),this.listComponent.setComponentCreator(this.createRowComponent.bind(this));const t=(a,l)=>{};this.listComponent.setComponentUpdater(t),this.listComponent.setParentComponent(this),this.addManagedListener(this.listComponent,x.EVENT_FIELD_PICKER_VALUE_SELECTED,a=>{this.onListValueSelected(a.value,a.fromEnterKey)});const{cellRowHeight:e}=this;e&&this.listComponent.setRowHeight(e);const n=this.listComponent.getGui(),r=this.listComponent.getAriaElement();this.addManagedListener(n,"mousemove",this.onPickerMouseMove.bind(this)),this.addManagedListener(n,"mousedown",a=>a.preventDefault()),n.classList.add("ag-rich-select-list");const i=`ag-rich-select-list-${this.listComponent.getCompId()}`;r.setAttribute("id",i);const o=this.localeService.getLocaleTextFunc()(this.config.pickerAriaLabelKey,this.config.pickerAriaLabelValue);Si(r,o),wI(this.eWrapper,r)}renderSelectedValue(){const{value:t,eDisplayField:e,config:n}=this,{allowTyping:r,initialInputValue:i}=this.config,s=this.config.valueFormatter?this.config.valueFormatter(t):t;if(r){this.eInput.setValue(i??s);return}let o;n.cellRenderer&&(o=this.userComponentFactory.getCellRendererDetails(this.config,{value:t,valueFormatted:s}));let a;if(o&&(a=o.newAgStackInstance()),a)en(e),LI(a,e),a.then(l=>{this.addDestroyFunc(()=>this.getContext().destroyBean(l))});else{if(J(this.value))e.innerText=s,e.classList.remove("ag-display-as-placeholder");else{const{placeholder:l}=n;J(l)?(e.innerHTML=`${sn(l)}`,e.classList.add("ag-display-as-placeholder")):en(e)}this.setTooltip({newTooltipText:s??null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth})}}getCurrentValueIndex(){const{currentList:t,value:e}=this;if(e==null||!t)return-1;for(let n=0;n<t.length;n++)if(t[n]===e)return n;return-1}highlightFilterMatch(){var t;(t=this.listComponent)==null||t.forEachRenderedRow((e,n)=>{e.highlightString(this.searchString)})}highlightSelectedValue(t){var e;t==null&&(t=this.getCurrentValueIndex()),this.highlightedItem=t,(e=this.listComponent)==null||e.forEachRenderedRow((n,r)=>{const i=t===-1?!1:this.highlightedItem===r;n.updateHighlighted(i)})}setRowHeight(t){t!==this.cellRowHeight&&(this.cellRowHeight=t),this.listComponent&&this.listComponent.setRowHeight(t)}createPickerComponent(){const{values:t}=this;return t&&this.setValueList({valueList:t}),this.listComponent}setSearchStringCreator(t){this.searchStringCreator=t}setValueList(t){const{valueList:e,refresh:n}=t;this.listComponent&&this.currentList!==e&&(this.currentList=e,this.listComponent.setModel({getRowCount:()=>e.length,getRow:r=>e[r],areRowsEqual:(r,i)=>r===i}),n&&(this.values?this.listComponent.refresh(!0):(this.values=e,this.isPickerDisplayed&&this.showCurrentValueInPicker())))}showPicker(){super.showPicker(),this.showCurrentValueInPicker(),this.displayOrHidePicker()}showCurrentValueInPicker(){var t,e;if(!this.listComponent)return;if(!this.currentList){this.isPickerDisplayed&&this.eLoading&&this.listComponent.appendChild(this.eLoading);return}(t=this.eLoading)!=null&&t.offsetParent&&((e=this.eLoading.parentElement)==null||e.removeChild(this.eLoading));const n=this.getCurrentValueIndex();n!==-1?(this.listComponent.refresh(),this.listComponent.ensureIndexVisible(n),this.listComponent.refresh(!0),this.highlightSelectedValue(n)):this.listComponent.refresh()}beforeHidePicker(){this.highlightedItem=-1,super.beforeHidePicker()}onWrapperFocus(){if(!this.eInput)return;const t=this.eInput.getFocusableElement();t.focus(),t.select()}onWrapperFocusOut(t){this.eWrapper.contains(t.relatedTarget)||this.hidePicker()}buildSearchStringFromKeyboardEvent(t){let{key:e}=t;if(e===H.BACKSPACE)this.searchString=this.searchString.slice(0,-1),e="";else if(!uE(t))return;t.preventDefault(),this.searchTextFromCharacter(e)}searchTextFromCharacter(t){this.searchString+=t,this.runSearch(),this.clearSearchString()}searchTextFromString(t){t==null&&(t=""),this.searchString=t,this.runSearch()}buildSearchStrings(t){const{valueFormatter:e=r=>r}=this.config;let n;return typeof t[0]=="number"||typeof t[0]=="string"?n=t.map(r=>e(r)):typeof t[0]=="object"&&this.searchStringCreator&&(n=this.searchStringCreator(t)),n}getSuggestionsAndFilteredValues(t,e){let n=[],r=[];if(!t.length)return{suggestions:n,filteredValues:r};const{searchType:i="fuzzy",filterList:s}=this.config;if(i==="fuzzy"){const o=Im(this.searchString,e,!0);n=o.values;const a=o.indices;if(s&&a.length)for(let l=0;l<a.length;l++)r.push(this.values[a[l]])}else n=e.filter((o,a)=>{const l=o.toLocaleLowerCase(),u=this.searchString.toLocaleLowerCase(),c=i==="match"?l.startsWith(u):l.indexOf(u)!==-1;return s&&c&&r.push(this.values[a]),c});return{suggestions:n,filteredValues:r}}filterListModel(t){const{filterList:e}=this.config;e&&(this.setValueList({valueList:t,refresh:!0}),this.alignPickerToComponent())}runSearch(){var t,e;const{values:n}=this,r=this.buildSearchStrings(n);if(!r){this.highlightSelectedValue(-1);return}const{suggestions:i,filteredValues:s}=this.getSuggestionsAndFilteredValues(this.searchString,r),{filterList:o,highlightMatch:a,searchType:l="fuzzy"}=this.config,u=s.length,c=!!(o&&this.searchString!=="");if(this.filterListModel(c?s:n),i.length){const d=c?0:r.indexOf(i[0]);this.selectListItem(d)}else if(this.highlightSelectedValue(-1),!c||u)(t=this.listComponent)==null||t.ensureIndexVisible(0);else if(c){this.getAriaElement().removeAttribute("data-active-option");const d=(e=this.listComponent)==null?void 0:e.getAriaElement();d&&vI(d,null)}a&&l!=="fuzzy"&&this.highlightFilterMatch(),this.displayOrHidePicker()}displayOrHidePicker(){var t;const e=(t=this.listComponent)==null?void 0:t.getGui(),n=this.currentList?this.currentList.length===0:!1;e==null||e.classList.toggle("ag-hidden",n)}clearSearchString(){this.searchString=""}selectListItem(t,e){if(!this.isPickerDisplayed||!this.currentList||!this.listComponent||t<0||t>=this.currentList.length)return;this.listComponent.ensureIndexVisible(t,!e)&&!e&&this.listComponent.refresh(!0),this.highlightSelectedValue(t)}setValue(t,e,n){const r=this.currentList?this.currentList.indexOf(t):-1;return r===-1?this:(this.value=t,n||this.selectListItem(r),this.renderSelectedValue(),super.setValue(t,e))}createRowComponent(t){const e=new iD(this.config,this.eWrapper);e.setParentComponent(this.listComponent),this.getContext().createBean(e),e.setState(t);const{highlightMatch:n,searchType:r="fuzzy"}=this.config;return n&&r!=="fuzzy"&&e.highlightString(this.searchString),e}getRowForMouseEvent(t){const{listComponent:e}=this;if(!e)return-1;const r=(e==null?void 0:e.getGui()).getBoundingClientRect(),i=e.getScrollTop(),s=t.clientY-r.top+i;return Math.floor(s/e.getRowHeight())}onPickerMouseMove(t){if(!this.listComponent)return;const e=this.getRowForMouseEvent(t);e!==-1&&e!=this.lastRowHovered&&(this.lastRowHovered=e,this.selectListItem(e,!0))}onNavigationKeyDown(t,e){t.preventDefault();const n=e===H.DOWN;if(!this.isPickerDisplayed&&n){this.showPicker();return}const r=this.highlightedItem,s=r===-1?0:r+(n?1:-1);this.selectListItem(s)}onPageNavigation(t){var e;if(!this.isPickerDisplayed)return;const n=(e=this.listComponent)==null?void 0:e.navigateToPage(t,this.highlightedItem);n!=null&&this.animationFrameService.requestAnimationFrame(()=>{if(!this.isAlive())return null;this.highlightSelectedValue(n)})}onEnterKeyDown(t){this.isPickerDisplayed&&(t.preventDefault(),this.currentList&&this.onListValueSelected(this.currentList[this.highlightedItem],!0))}onTabKeyDown(){!this.isPickerDisplayed||!this.currentList||this.setValue(this.currentList[this.highlightedItem],!1,!0)}onListValueSelected(t,e){this.setValue(t,!1,!0),this.dispatchPickerEvent(t,e),this.hidePicker()}dispatchPickerEvent(t,e){const n={type:x.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey:e,value:t};this.dispatchEvent(n)}getFocusableElement(){const{allowTyping:t}=this.config;return t?this.eInput.getFocusableElement():super.getFocusableElement()}onKeyDown(t){const e=t.key,{allowTyping:n}=this.config;switch(e){case H.LEFT:case H.RIGHT:n||t.preventDefault();break;case H.PAGE_HOME:case H.PAGE_END:if(n){t.preventDefault();const r=this.eInput.getInputElement(),i=e===H.PAGE_HOME?0:r.value.length;r.setSelectionRange(i,i);break}case H.PAGE_UP:case H.PAGE_DOWN:t.preventDefault(),this.onPageNavigation(e);break;case H.DOWN:case H.UP:this.onNavigationKeyDown(t,e);break;case H.ESCAPE:this.isPickerDisplayed&&(Yr(this.listComponent.getGui())&&(t.preventDefault(),Cs(t)),this.hidePicker());break;case H.ENTER:this.onEnterKeyDown(t);break;case H.TAB:this.onTabKeyDown();break;default:n||this.buildSearchStringFromKeyboardEvent(t)}}destroy(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),this.eLoading=void 0,super.destroy()}};w([O("userComponentFactory")],IE.prototype,"userComponentFactory",2);w([O("animationFrameService")],IE.prototype,"animationFrameService",2);w([ne("eInput")],IE.prototype,"eInput",2);var Oh=class Pz extends HI{constructor(e){super(e,Pz.TEMPLATE),this.labelAlignment="top"}init(){this.eSlider.addCssClass("ag-slider-field");const{minValue:e,maxValue:n,textFieldWidth:r,step:i,value:s,onValueChange:o}=this.config;e!=null&&this.setMinValue(e),n!=null&&this.setMaxValue(n),r!=null&&this.setTextFieldWidth(r),i!=null&&this.setStep(i),s!=null&&this.setValue(s),o!=null&&this.onValueChange(o)}onValueChange(e){const n=x.EVENT_FIELD_VALUE_CHANGED;return this.addManagedListener(this.eText,n,()=>{const r=parseFloat(this.eText.getValue());this.eSlider.setValue(r.toString(),!0),e(r||0)}),this.addManagedListener(this.eSlider,n,()=>{const r=this.eSlider.getValue();this.eText.setValue(r,!0),e(parseFloat(r))}),this}setSliderWidth(e){return this.eSlider.setWidth(e),this}setTextFieldWidth(e){return this.eText.setWidth(e),this}setMinValue(e){return this.eSlider.setMinValue(e),this.eText.setMin(e),this}setMaxValue(e){return this.eSlider.setMaxValue(e),this.eText.setMax(e),this}getValue(){return this.eText.getValue()}setValue(e,n){return this.getValue()===e?this:(this.eText.setValue(e,!0),this.eSlider.setValue(e,!0),n||this.dispatchEvent({type:x.EVENT_FIELD_VALUE_CHANGED}),this)}setStep(e){return this.eSlider.setStep(e),this.eText.setStep(e),this}};Oh.TEMPLATE=`<div class="ag-slider">
            <label ref="eLabel"></label>
            <div class="ag-wrapper ag-slider-wrapper">
                <ag-input-range ref="eSlider"></ag-input-range>
                <ag-input-number-field ref="eText"></ag-input-number-field>
            </div>
        </div>`;w([ne("eLabel")],Oh.prototype,"eLabel",2);w([ne("eSlider")],Oh.prototype,"eSlider",2);w([ne("eText")],Oh.prototype,"eText",2);w([te],Oh.prototype,"init",1);var tie=Oh,al=class yc extends Ae{constructor(e={}){super(yc.getTemplate(e)),this.params=e,this.suppressEnabledCheckbox=!0,this.suppressToggleExpandOnEnableChange=!1;const{enabled:n,items:r,suppressEnabledCheckbox:i,expanded:s,suppressToggleExpandOnEnableChange:o,useToggle:a}=e;this.cssIdentifier=e.cssIdentifier||"default",this.enabled=n??!0,this.items=r||[],this.useToggle=a??!1,this.alignItems=e.alignItems||"center",this.expanded=s??!0,i!=null&&(this.suppressEnabledCheckbox=i),o!=null&&(this.suppressToggleExpandOnEnableChange=o)}static getTemplate(e){const n=e.cssIdentifier||"default",r=e.direction||"vertical";return`
            <div class="ag-group ag-${n}-group" role="presentation">
                <div ref="eToolbar" class="ag-group-toolbar ag-${n}-group-toolbar">
                    <ag-checkbox ref="cbGroupEnabled"></ag-checkbox>
                </div>
                <div ref="eContainer" class="ag-group-container ag-group-container-${r} ag-${n}-group-container"></div>
            </div>
        `}postConstruct(){if(this.setupTitleBar(),this.items.length){const i=this.items;this.items=[],this.addItems(i)}const e=this.localeService.getLocaleTextFunc();this.cbGroupEnabled.setLabel(e("enabled","Enabled")),this.enabled&&this.setEnabled(this.enabled,void 0,!0),this.setAlignItems(this.alignItems);const{onEnableChange:n,suppressOpenCloseIcons:r}=this.params;this.hideEnabledCheckbox(this.suppressEnabledCheckbox),this.hideOpenCloseIcons(r??!1),this.refreshChildDisplay(),Ue(this.eContainer,this.expanded),this.cbGroupEnabled.onValueChange(i=>{this.setEnabled(i,!0,this.suppressToggleExpandOnEnableChange),this.dispatchEnableChangeEvent(i)}),n!=null&&this.onEnableChange(n)}refreshChildDisplay(){var e;Ue(this.eToolbar,this.expanded&&!this.suppressEnabledCheckbox),(e=this.eTitleBar)==null||e.refreshOnExpand(this.expanded)}isExpanded(){return this.expanded}setAlignItems(e){this.alignItems!==e&&this.removeCssClass(`ag-group-item-alignment-${this.alignItems}`),this.alignItems=e;const n=`ag-group-item-alignment-${this.alignItems}`;return this.addCssClass(n),this}toggleGroupExpand(e){var n;let r=!1;if((n=this.eTitleBar)!=null&&n.isSuppressCollapse()&&!this.useToggle)e=!0,r=!0;else if(e=e??!this.expanded,this.expanded===e)return this;return this.expanded=e,this.refreshChildDisplay(),Ue(this.eContainer,e),r||this.dispatchEvent({type:e?yc.EVENT_EXPANDED:yc.EVENT_COLLAPSED}),this}addItems(e){e.forEach(n=>this.addItem(n))}prependItem(e){this.insertItem(e,!0)}addItem(e){this.insertItem(e,!1)}insertItem(e,n){const r=this.eContainer,i=e instanceof Ae?e.getGui():e;i.classList.add("ag-group-item",`ag-${this.cssIdentifier}-group-item`),n?(r.insertAdjacentElement("afterbegin",i),this.items.unshift(i)):(r.appendChild(i),this.items.push(i))}hideItem(e,n){const r=this.items[n];Ue(r,!e)}getItemIndex(e){const n=e instanceof Ae?e.getGui():e;return this.items.indexOf(n)}setTitle(e){var n;return(n=this.eTitleBar)==null||n.setTitle(e),this}addTitleBarWidget(e){var n;return(n=this.eTitleBar)==null||n.addWidget(e),this}addCssClassToTitleBar(e){var n;(n=this.eTitleBar)==null||n.addCssClass(e)}dispatchEnableChangeEvent(e){const n={type:yc.EVENT_ENABLE_CHANGE,enabled:e};this.dispatchEvent(n)}setEnabled(e,n,r){var i;return this.enabled=e,this.refreshDisabledStyles(),r||this.toggleGroupExpand(e),n||(this.cbGroupEnabled.setValue(e),(i=this.eToggle)==null||i.setValue(e)),this}isEnabled(){return this.enabled}onEnableChange(e){return this.addManagedListener(this,yc.EVENT_ENABLE_CHANGE,n=>e(n.enabled)),this}hideEnabledCheckbox(e){return this.suppressEnabledCheckbox=e,this.refreshChildDisplay(),this.refreshDisabledStyles(),this}hideOpenCloseIcons(e){var n;return(n=this.eTitleBar)==null||n.hideOpenCloseIcons(e),this}refreshDisabledStyles(){var e;const n=!this.enabled;this.eContainer.classList.toggle("ag-disabled",n),(e=this.eTitleBar)==null||e.refreshDisabledStyles(this.suppressEnabledCheckbox&&n),this.eContainer.classList.toggle("ag-disabled-group-container",n)}setupTitleBar(){const e=this.useToggle?this.createToggleTitleBar():this.createDefaultTitleBar();this.eToolbar.insertAdjacentElement("beforebegin",e.getGui())}createDefaultTitleBar(){const e=this.createManagedBean(new PL(this.params));return this.eTitleBar=e,e.refreshOnExpand(this.expanded),this.addManagedListener(e,PL.EVENT_EXPAND_CHANGED,n=>this.toggleGroupExpand(n.expanded)),e}createToggleTitleBar(){var e;const n=this.createManagedBean(new _z({value:this.enabled,label:this.params.title,labelAlignment:"left",labelWidth:"flex",onValueChange:r=>{this.setEnabled(r,!0),this.dispatchEnableChangeEvent(r)}}));return n.addCssClass("ag-group-title-bar"),n.addCssClass(`ag-${(e=this.params.cssIdentifier)!=null?e:"default"}-group-title-bar ag-unselectable`),this.eToggle=n,this.toggleGroupExpand(this.enabled),n}};al.EVENT_EXPANDED="expanded";al.EVENT_COLLAPSED="collapsed";al.EVENT_ENABLE_CHANGE="enableChange";w([ne("eToolbar")],al.prototype,"eToolbar",2);w([ne("cbGroupEnabled")],al.prototype,"cbGroupEnabled",2);w([ne("eContainer")],al.prototype,"eContainer",2);w([te],al.prototype,"postConstruct",1);var nie=al,jT="ag-disabled-group-title-bar",Mh=class T_ extends Ae{constructor(e={}){super(T_.getTemplate(e)),this.suppressOpenCloseIcons=!1;const{title:n,suppressOpenCloseIcons:r}=e;n&&n.length>0&&(this.title=n),r!=null&&(this.suppressOpenCloseIcons=r)}static getTemplate(e){var n;const r=(n=e.cssIdentifier)!=null?n:"default";return`
            <div class="ag-group-title-bar ag-${r}-group-title-bar ag-unselectable" role="button">
                <span class="ag-group-title-bar-icon ag-${r}-group-title-bar-icon" ref="eGroupOpenedIcon" role="presentation"></span>
                <span class="ag-group-title-bar-icon ag-${r}-group-title-bar-icon" ref="eGroupClosedIcon" role="presentation"></span>
                <span ref="eTitle" class="ag-group-title ag-${r}-group-title"></span>
            </div>
        `}postConstruct(){this.setTitle(this.title),this.hideOpenCloseIcons(this.suppressOpenCloseIcons),this.setupExpandContract()}setupExpandContract(){this.eGroupClosedIcon.appendChild(Pi("columnSelectClosed",this.gos,null)),this.eGroupOpenedIcon.appendChild(Pi("columnSelectOpen",this.gos,null)),this.addManagedListener(this.getGui(),"click",()=>this.dispatchExpandChanged()),this.addManagedListener(this.getGui(),"keydown",e=>{switch(e.key){case H.ENTER:case H.SPACE:e.preventDefault(),this.dispatchExpandChanged();break;case H.RIGHT:case H.LEFT:e.preventDefault(),this.dispatchExpandChanged(e.key===H.RIGHT);break}})}refreshOnExpand(e){this.refreshAriaStatus(e),this.refreshOpenCloseIcons(e)}refreshAriaStatus(e){this.suppressOpenCloseIcons||Io(this.getGui(),e)}refreshOpenCloseIcons(e){const n=!this.suppressOpenCloseIcons;Ue(this.eGroupOpenedIcon,n&&e),Ue(this.eGroupClosedIcon,n&&!e)}isSuppressCollapse(){return this.suppressOpenCloseIcons}dispatchExpandChanged(e){const n={type:T_.EVENT_EXPAND_CHANGED,expanded:e};this.dispatchEvent(n)}setTitle(e){const n=this.getGui(),r=!!e&&e.length>0;e=r?e:void 0,this.eTitle.textContent=e??"",Ue(n,r),e!==this.title&&(this.title=e);const i=n.classList.contains(jT);return this.refreshDisabledStyles(i),this}addWidget(e){return this.getGui().appendChild(e),this}hideOpenCloseIcons(e){return this.suppressOpenCloseIcons=e,e&&this.dispatchExpandChanged(!0),this}refreshDisabledStyles(e){const n=this.getGui();e?(n.classList.add(jT),n.removeAttribute("tabindex")):(n.classList.remove(jT),typeof this.title=="string"?n.setAttribute("tabindex","0"):n.removeAttribute("tabindex"))}};Mh.EVENT_EXPAND_CHANGED="expandedChanged";w([ne("eGroupOpenedIcon")],Mh.prototype,"eGroupOpenedIcon",2);w([ne("eGroupClosedIcon")],Mh.prototype,"eGroupClosedIcon",2);w([ne("eTitle")],Mh.prototype,"eTitle",2);w([te],Mh.prototype,"postConstruct",1);var PL=Mh,sD=class extends Vm{constructor(t=0,e){super('<div class="ag-menu-list" role="tree"></div>'),this.level=t,this.menuItems=[],this.params=e??{column:null,node:null,value:null}}postConstruct(){this.initialiseTabGuard({onTabKeyDown:t=>this.onTabKeyDown(t),handleKeyDown:t=>this.handleKeyDown(t),onFocusIn:t=>this.handleFocusIn(t),onFocusOut:t=>this.handleFocusOut(t)})}onTabKeyDown(t){const e=this.getParentComponent(),n=e&&e.getGui();n&&n.classList.contains("ag-focus-managed")||t.preventDefault(),t.shiftKey&&this.closeIfIsChild(t)}handleKeyDown(t){switch(t.key){case H.UP:case H.RIGHT:case H.DOWN:case H.LEFT:t.preventDefault(),this.handleNavKey(t.key);break;case H.ESCAPE:this.closeIfIsChild()&&Cs(t);break}}handleFocusIn(t){var e,n;const r=t.relatedTarget;!this.tabGuardCtrl.isTabGuard(r)&&(this.getGui().contains(r)||(n=(e=this.activeMenuItem)==null?void 0:e.getSubMenuGui())!=null&&n.contains(r))||(this.activeMenuItem?this.activeMenuItem.activate():this.activateFirstItem())}handleFocusOut(t){var e;const n=t.relatedTarget;!this.activeMenuItem||this.getGui().contains(n)||(e=this.activeMenuItem.getSubMenuGui())!=null&&e.contains(n)||this.activeMenuItem.isSubMenuOpening()||this.activeMenuItem.deactivate()}clearActiveItem(){this.activeMenuItem&&(this.activeMenuItem.deactivate(),this.activeMenuItem=null)}addMenuItems(t){t!=null&&an.all(t.map(e=>e==="separator"?an.resolve({eGui:this.createSeparator()}):typeof e=="string"?(console.warn(`AG Grid: unrecognised menu item ${e}`),an.resolve({eGui:null})):this.addItem(e))).then(e=>{e.forEach(n=>{n!=null&&n.eGui&&(this.appendChild(n.eGui),n.comp&&this.menuItems.push(n.comp))})})}addItem(t){const e=this.createManagedBean(new jv);return e.init({menuItemDef:t,isAnotherSubMenuOpen:()=>this.menuItems.some(n=>n.isSubMenuOpen()),level:this.level,contextParams:this.params}).then(()=>(e.setParentComponent(this),this.addManagedListener(e,jv.EVENT_CLOSE_MENU,n=>{this.dispatchEvent(n)}),this.addManagedListener(e,jv.EVENT_MENU_ITEM_ACTIVATED,n=>{this.activeMenuItem&&this.activeMenuItem!==n.menuItem&&this.activeMenuItem.deactivate(),this.activeMenuItem=n.menuItem}),{comp:e,eGui:e.getGui()}))}activateFirstItem(){const t=this.menuItems.filter(e=>!e.isDisabled())[0];t&&t.activate()}createSeparator(){return Wr(`
            <div class="ag-menu-separator" aria-hidden="true">
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
            </div>`)}handleNavKey(t){switch(t){case H.UP:case H.DOWN:const n=this.findNextItem(t===H.UP);n&&n!==this.activeMenuItem&&n.activate();return}const e=this.gos.get("enableRtl")?H.RIGHT:H.LEFT;t===e?this.closeIfIsChild():this.openChild()}closeIfIsChild(t){const e=this.getParentComponent();return e&&e instanceof jv?(t&&t.preventDefault(),e.closeSubMenu(),e.getGui().focus(),!0):!1}openChild(){this.activeMenuItem&&this.activeMenuItem.openSubMenu(!0)}findNextItem(t){const e=this.menuItems.filter(i=>!i.isDisabled());if(!e.length)return;if(!this.activeMenuItem)return t?Je(e):e[0];t&&e.reverse();let n,r=!1;for(let i=0;i<e.length;i++){const s=e[i];if(!r){s===this.activeMenuItem&&(r=!0);continue}n=s;break}return r&&!n?e[0]:n||this.activeMenuItem}destroy(){this.clearActiveItem(),super.destroy()}};w([O("focusService")],sD.prototype,"focusService",2);w([te],sD.prototype,"postConstruct",1);var Iz=class extends Vm{constructor(t){super(),this.wrappedComponent=t,this.setTemplateFromElement(t.getGui())}postConstruct(){this.initialiseTabGuard({onTabKeyDown:t=>this.onTabKeyDown(t),handleKeyDown:t=>this.handleKeyDown(t)})}handleKeyDown(t){t.key===H.ESCAPE&&this.closePanel()}onTabKeyDown(t){t.defaultPrevented||(this.closePanel(),t.preventDefault())}closePanel(){const t=this.parentComponent;t.closeSubMenu(),setTimeout(()=>t.getGui().focus(),0)}};w([te],Iz.prototype,"postConstruct",1);var Fh=class Cc extends ee{constructor(){super(...arguments),this.isActive=!1,this.subMenuIsOpen=!1,this.subMenuIsOpening=!1,this.suppressRootStyles=!0,this.suppressAria=!0,this.suppressFocus=!0}init(e){var n,r;const{menuItemDef:i,isAnotherSubMenuOpen:s,level:o,childComponent:a,contextParams:l}=e;return this.params=e.menuItemDef,this.level=o,this.isAnotherSubMenuOpen=s,this.childComponent=a,this.contextParams=l,this.cssClassPrefix=(r=(n=this.params.menuItemParams)==null?void 0:n.cssClassPrefix)!=null?r:"ag-menu-option",this.userComponentFactory.getMenuItemCompDetails(this.params,Dt(me({},i),{level:o,isAnotherSubMenuOpen:s,openSubMenu:c=>this.openSubMenu(c),closeSubMenu:()=>this.closeSubMenu(),closeMenu:c=>this.closeMenu(c),updateTooltip:(c,d)=>this.refreshTooltip(c,d),onItemActivated:()=>this.onItemActivated()})).newAgStackInstance().then(c=>{var d;this.menuItemComp=c;const h=(d=c.configureDefaults)==null?void 0:d.call(c);h&&this.configureDefaults(h===!0?void 0:h)})}addListeners(e,n){n!=null&&n.suppressClick||this.addManagedListener(e,"click",r=>this.onItemSelected(r)),n!=null&&n.suppressKeyboardSelect||this.addManagedListener(e,"keydown",r=>{(r.key===H.ENTER||r.key===H.SPACE)&&(r.preventDefault(),this.onItemSelected(r))}),n!=null&&n.suppressMouseDown||this.addManagedListener(e,"mousedown",r=>{r.stopPropagation(),r.preventDefault()}),n!=null&&n.suppressMouseOver||(this.addManagedListener(e,"mouseenter",()=>this.onMouseEnter()),this.addManagedListener(e,"mouseleave",()=>this.onMouseLeave()))}isDisabled(){return!!this.params.disabled}openSubMenu(e=!1){var n,r;if(this.closeSubMenu(),!this.params.subMenu)return;this.subMenuIsOpening=!0;const i=Wr('<div class="ag-menu" role="presentation"></div>');this.eSubMenuGui=i;let s,o=()=>{this.subMenuIsOpening=!1};if(this.childComponent){const c=this.createBean(new Iz(this.childComponent));c.setParentComponent(this);const d=c.getGui(),h="mouseenter",f=()=>this.cancelDeactivate();d.addEventListener(h,f),s=()=>d.removeEventListener(h,f),i.appendChild(d),this.childComponent.afterGuiAttached&&(o=()=>{this.childComponent.afterGuiAttached(),this.subMenuIsOpening=!1})}else if(this.params.subMenu){const c=this.createBean(new sD(this.level+1,this.contextParams));c.setParentComponent(this),c.addMenuItems(this.params.subMenu),i.appendChild(c.getGui()),this.addManagedListener(c,Cc.EVENT_CLOSE_MENU,d=>this.dispatchEvent(d)),c.addGuiEventListener("mouseenter",()=>this.cancelDeactivate()),s=()=>this.destroyBean(c),e&&(o=()=>{c.activateFirstItem(),this.subMenuIsOpening=!1})}const a=this.popupService.positionPopupForMenu.bind(this.popupService,{eventSource:this.eGui,ePopup:i}),l=this.localeService.getLocaleTextFunc(),u=this.popupService.addPopup({modal:!0,eChild:i,positionCallback:a,anchorToElement:this.eGui,ariaLabel:l("ariaLabelSubMenu","SubMenu"),afterGuiAttached:o});this.subMenuIsOpen=!0,this.setAriaExpanded(!0),this.hideSubMenu=()=>{var c,d;u&&u.hideFunc(),this.subMenuIsOpen=!1,this.setAriaExpanded(!1),s(),(d=(c=this.menuItemComp).setExpanded)==null||d.call(c,!1),this.eSubMenuGui=void 0},(r=(n=this.menuItemComp).setExpanded)==null||r.call(n,!0)}setAriaExpanded(e){this.suppressAria||Io(this.eGui,e)}closeSubMenu(){this.hideSubMenu&&(this.hideSubMenu(),this.hideSubMenu=null,this.setAriaExpanded(!1))}isSubMenuOpen(){return this.subMenuIsOpen}isSubMenuOpening(){return this.subMenuIsOpening}activate(e){var n,r;this.cancelActivate(),!this.params.disabled&&(this.isActive=!0,this.suppressRootStyles||this.eGui.classList.add(`${this.cssClassPrefix}-active`),(r=(n=this.menuItemComp).setActive)==null||r.call(n,!0),this.suppressFocus||this.eGui.focus({preventScroll:!0}),e&&this.params.subMenu&&window.setTimeout(()=>{this.isAlive()&&this.isActive&&this.openSubMenu()},300),this.onItemActivated())}deactivate(){var e,n;this.cancelDeactivate(),this.suppressRootStyles||this.eGui.classList.remove(`${this.cssClassPrefix}-active`),(n=(e=this.menuItemComp).setActive)==null||n.call(e,!1),this.isActive=!1,this.subMenuIsOpen&&this.hideSubMenu()}getGui(){return this.menuItemComp.getGui()}getParentComponent(){return this.parentComponent}setParentComponent(e){this.parentComponent=e}getSubMenuGui(){return this.eSubMenuGui}onItemSelected(e){var n,r;(r=(n=this.menuItemComp).select)==null||r.call(n),this.params.action?this.getFrameworkOverrides().wrapOutgoing(()=>this.params.action(this.gos.addGridCommonParams(me({},this.contextParams)))):this.openSubMenu(e&&e.type==="keydown"),!(this.params.subMenu&&!this.params.action||this.params.suppressCloseOnSelect)&&this.closeMenu(e)}closeMenu(e){const n={type:Cc.EVENT_CLOSE_MENU};e&&(e instanceof MouseEvent?n.mouseEvent=e:n.keyboardEvent=e),this.dispatchEvent(n)}onItemActivated(){const e={type:Cc.EVENT_MENU_ITEM_ACTIVATED,menuItem:this};this.dispatchEvent(e)}cancelActivate(){this.activateTimeoutId&&(window.clearTimeout(this.activateTimeoutId),this.activateTimeoutId=0)}cancelDeactivate(){this.deactivateTimeoutId&&(window.clearTimeout(this.deactivateTimeoutId),this.deactivateTimeoutId=0)}onMouseEnter(){this.cancelDeactivate(),this.isAnotherSubMenuOpen()?this.activateTimeoutId=window.setTimeout(()=>this.activate(!0),Cc.ACTIVATION_DELAY):this.activate(!0)}onMouseLeave(){this.cancelActivate(),this.isSubMenuOpen()?this.deactivateTimeoutId=window.setTimeout(()=>this.deactivate(),Cc.ACTIVATION_DELAY):this.deactivate()}configureDefaults(e){var n,r,i;if(!this.menuItemComp){setTimeout(()=>this.configureDefaults(e));return}let s=this.menuItemComp.getGui();const o=(r=(n=this.menuItemComp).getRootElement)==null?void 0:r.call(n);o&&(e!=null&&e.suppressRootStyles||s.classList.add("ag-menu-option-custom"),s=o),this.eGui=s,this.suppressRootStyles=!!(e!=null&&e.suppressRootStyles),this.suppressRootStyles||(s.classList.add(this.cssClassPrefix),(i=this.params.cssClasses)==null||i.forEach(a=>s.classList.add(a)),this.params.disabled&&s.classList.add(`${this.cssClassPrefix}-disabled`)),e!=null&&e.suppressTooltip||this.refreshTooltip(this.params.tooltip),this.suppressAria=!!(e!=null&&e.suppressAria),this.suppressAria||(Ut(s,"treeitem"),Hj(s,this.level+1),this.params.disabled&&mI(s,!0)),e!=null&&e.suppressTabIndex||s.setAttribute("tabindex","-1"),this.params.disabled||this.addListeners(s,e),this.suppressFocus=!!(e!=null&&e.suppressFocus)}refreshTooltip(e,n){this.tooltip=e,this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),!(!e||!this.menuItemComp)&&(this.tooltipFeature=this.createBean(new Bo({getGui:()=>this.getGui(),getTooltipValue:()=>this.tooltip,getLocation:()=>"menu",shouldDisplayTooltip:n})))}destroy(){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),super.destroy()}};Fh.EVENT_CLOSE_MENU="closeMenu";Fh.EVENT_MENU_ITEM_ACTIVATED="menuItemActivated";Fh.ACTIVATION_DELAY=80;w([O("popupService")],Fh.prototype,"popupService",2);w([O("userComponentFactory")],Fh.prototype,"userComponentFactory",2);var jv=Fh,Qu=class R_ extends Ae{constructor(e){super(R_.getTemplate(e)),this.config=e,this.closable=!0}static getTemplate(e){const n=e.cssIdentifier||"default";return`<div class="ag-panel ag-${n}-panel" tabindex="-1">
            <div ref="eTitleBar" class="ag-panel-title-bar ag-${n}-panel-title-bar ag-unselectable">
                <span ref="eTitle" class="ag-panel-title-bar-title ag-${n}-panel-title-bar-title"></span>
                <div ref="eTitleBarButtons" class="ag-panel-title-bar-buttons ag-${n}-panel-title-bar-buttons"></div>
            </div>
            <div ref="eContentWrapper" class="ag-panel-content-wrapper ag-${n}-panel-content-wrapper"></div>
        </div>`}postConstruct(){const{component:e,closable:n,hideTitleBar:r,title:i,minWidth:s=250,width:o,minHeight:a=250,height:l,centered:u,popup:c,x:d,y:h}=this.config;this.positionableFeature=new bh(this.getGui(),{minWidth:s,width:o,minHeight:a,height:l,centered:u,x:d,y:h,popup:c,calculateTopBuffer:()=>this.positionableFeature.getHeight()-this.getBodyHeight()}),this.createManagedBean(this.positionableFeature);const f=this.getGui();e&&this.setBodyComponent(e),r?Ue(this.eTitleBar,!1):(i&&this.setTitle(i),this.setClosable(n??this.closable)),this.addManagedListener(this.eTitleBar,"mousedown",g=>{if(f.contains(g.relatedTarget)||f.contains(this.gos.getActiveDomElement())||this.eTitleBarButtons.contains(g.target)){g.preventDefault();return}const m=this.eContentWrapper.querySelector("button, [href], input, select, textarea, [tabindex]");m&&m.focus()}),!(c&&this.positionableFeature.isPositioned())&&(this.renderComponent&&this.renderComponent(),this.positionableFeature.initialisePosition(),this.eContentWrapper.style.height="0")}renderComponent(){const e=this.getGui();e.focus(),this.close=()=>{e.parentElement.removeChild(e),this.destroy()}}getHeight(){return this.positionableFeature.getHeight()}setHeight(e){this.positionableFeature.setHeight(e)}getWidth(){return this.positionableFeature.getWidth()}setWidth(e){this.positionableFeature.setWidth(e)}setClosable(e){if(e!==this.closable&&(this.closable=e),e){const n=this.closeButtonComp=new Ae(R_.CLOSE_BTN_TEMPLATE);this.getContext().createBean(n);const r=n.getGui(),i=Bt("close",this.gos);i.classList.add("ag-panel-title-bar-button-icon"),r.appendChild(i),this.addTitleBarButton(n),n.addManagedListener(r,"click",this.onBtClose.bind(this))}else if(this.closeButtonComp){const n=this.closeButtonComp.getGui();n.parentElement.removeChild(n),this.closeButtonComp=this.destroyBean(this.closeButtonComp)}}setBodyComponent(e){e.setParentComponent(this),this.eContentWrapper.appendChild(e.getGui())}addTitleBarButton(e,n){const r=this.eTitleBarButtons,i=r.children,s=i.length;n==null&&(n=s),n=Math.max(0,Math.min(n,s)),e.addCssClass("ag-panel-title-bar-button");const o=e.getGui();n===0?r.insertAdjacentElement("afterbegin",o):n===s?r.insertAdjacentElement("beforeend",o):i[n-1].insertAdjacentElement("afterend",o),e.setParentComponent(this)}getBodyHeight(){return xm(this.eContentWrapper)}getBodyWidth(){return Bu(this.eContentWrapper)}setTitle(e){this.eTitle.innerText=e}onBtClose(){this.close()}destroy(){this.closeButtonComp&&(this.closeButtonComp=this.destroyBean(this.closeButtonComp));const e=this.getGui();e&&Yr(e)&&this.close(),super.destroy()}};Qu.CLOSE_BTN_TEMPLATE='<div class="ag-button"></div>';w([ne("eContentWrapper")],Qu.prototype,"eContentWrapper",2);w([ne("eTitleBar")],Qu.prototype,"eTitleBar",2);w([ne("eTitleBarButtons")],Qu.prototype,"eTitleBarButtons",2);w([ne("eTitle")],Qu.prototype,"eTitle",2);w([te],Qu.prototype,"postConstruct",1);var rie=Qu,iie=class extends rie{constructor(t){super(Dt(me({},t),{popup:!0})),this.isMaximizable=!1,this.isMaximized=!1,this.maximizeListeners=[],this.resizeListenerDestroy=null,this.lastPosition={x:0,y:0,width:0,height:0}}postConstruct(){const t=this.getGui(),{movable:e,resizable:n,maximizable:r}=this.config;this.addCssClass("ag-dialog"),super.postConstruct(),this.addManagedListener(t,"focusin",i=>{this.popupService.bringPopupToFront(t)}),e&&this.setMovable(e),r&&this.setMaximizable(r),n&&this.setResizable(n)}renderComponent(){const t=this.getGui(),{alwaysOnTop:e,modal:n,title:r,afterGuiAttached:i}=this.config,s=this.localeService.getLocaleTextFunc(),o=this.popupService.addPopup({modal:n,eChild:t,closeOnEsc:!0,closedCallback:this.onClosed.bind(this),alwaysOnTop:e,ariaLabel:r||s("ariaLabelDialog","Dialog"),afterGuiAttached:i});o&&(this.close=o.hideFunc)}onClosed(t){var e,n;this.destroy(),(n=(e=this.config).closedCallback)==null||n.call(e,t)}toggleMaximize(){const t=this.positionableFeature.getPosition();if(this.isMaximized){const{x:e,y:n,width:r,height:i}=this.lastPosition;this.setWidth(r),this.setHeight(i),this.positionableFeature.offsetElement(e,n)}else this.lastPosition.width=this.getWidth(),this.lastPosition.height=this.getHeight(),this.lastPosition.x=t.x,this.lastPosition.y=t.y,this.positionableFeature.offsetElement(0,0),this.setHeight("100%"),this.setWidth("100%");this.isMaximized=!this.isMaximized,this.refreshMaximizeIcon()}refreshMaximizeIcon(){Ue(this.maximizeIcon,!this.isMaximized),Ue(this.minimizeIcon,this.isMaximized)}clearMaximizebleListeners(){this.maximizeListeners.length&&(this.maximizeListeners.forEach(t=>t()),this.maximizeListeners.length=0),this.resizeListenerDestroy&&(this.resizeListenerDestroy(),this.resizeListenerDestroy=null)}destroy(){this.maximizeButtonComp=this.destroyBean(this.maximizeButtonComp),this.clearMaximizebleListeners(),super.destroy()}setResizable(t){this.positionableFeature.setResizable(t)}setMovable(t){this.positionableFeature.setMovable(t,this.eTitleBar)}setMaximizable(t){if(!t){this.clearMaximizebleListeners(),this.maximizeButtonComp&&(this.destroyBean(this.maximizeButtonComp),this.maximizeButtonComp=this.maximizeIcon=this.minimizeIcon=void 0);return}const e=this.eTitleBar;if(!e||t===this.isMaximizable)return;const n=this.buildMaximizeAndMinimizeElements();this.refreshMaximizeIcon(),n.addManagedListener(n.getGui(),"click",this.toggleMaximize.bind(this)),this.addTitleBarButton(n,0),this.maximizeListeners.push(this.addManagedListener(e,"dblclick",this.toggleMaximize.bind(this))),this.resizeListenerDestroy=this.addManagedListener(this,"resize",()=>{this.isMaximized=!1,this.refreshMaximizeIcon()})}buildMaximizeAndMinimizeElements(){const t=this.maximizeButtonComp=this.createBean(new Ae('<div class="ag-dialog-button"></span>')),e=t.getGui();return this.maximizeIcon=Bt("maximize",this.gos),e.appendChild(this.maximizeIcon),this.maximizeIcon.classList.add("ag-panel-title-bar-button-icon"),this.minimizeIcon=Bt("minimize",this.gos),e.appendChild(this.minimizeIcon),this.minimizeIcon.classList.add("ag-panel-title-bar-button-icon"),t}};w([O("popupService")],iie.prototype,"popupService",2);var sie=0,Do=class extends ee{constructor(){super(...arguments),this.popupList=[]}postConstruct(){this.ctrlsService.whenReady(t=>{this.gridCtrl=t.gridCtrl}),this.addManagedListener(this.eventService,x.EVENT_GRID_STYLES_CHANGED,this.handleThemeChange.bind(this))}getPopupParent(){const t=this.gos.get("popupParent");return t||this.gridCtrl.getGui()}positionPopupForMenu(t){const{eventSource:e,ePopup:n}=t,r=this.getPopupIndex(n);if(r!==-1){const f=this.popupList[r];f.alignedToElement=e}const i=e.getBoundingClientRect(),s=this.getParentRect(),o=this.keepXYWithinBounds(n,i.top-s.top,0),a=n.clientWidth>0?n.clientWidth:200;n.style.minWidth=`${a}px`;const u=s.right-s.left-a;let c;this.gos.get("enableRtl")?(c=h(),c<0&&(c=d(),this.setAlignedStyles(n,"left")),c>u&&(c=0,this.setAlignedStyles(n,"right"))):(c=d(),c>u&&(c=h(),this.setAlignedStyles(n,"right")),c<0&&(c=0,this.setAlignedStyles(n,"left"))),n.style.left=`${c}px`,n.style.top=`${o}px`;function d(){return i.right-s.left-2}function h(){return i.left-s.left-a}}positionPopupUnderMouseEvent(t){const{ePopup:e,nudgeX:n,nudgeY:r,skipObserver:i}=t;this.positionPopup({ePopup:e,nudgeX:n,nudgeY:r,keepWithinBounds:!0,skipObserver:i,updatePosition:()=>this.calculatePointerAlign(t.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(t.type,t.ePopup,null,t.mouseEvent,t.column,t.rowNode)})}calculatePointerAlign(t){const e=this.getParentRect();return{x:t.clientX-e.left,y:t.clientY-e.top}}positionPopupByComponent(t){const{ePopup:e,nudgeX:n,nudgeY:r,keepWithinBounds:i,eventSource:s,alignSide:o="left",position:a="over",column:l,rowNode:u,type:c}=t,d=s.getBoundingClientRect(),h=this.getParentRect(),f=this.getPopupIndex(e);if(f!==-1){const m=this.popupList[f];m.alignedToElement=s}const g=()=>{let m=d.left-h.left;o==="right"&&(m-=e.offsetWidth-d.width);let v;return a==="over"?(v=d.top-h.top,this.setAlignedStyles(e,"over")):(this.setAlignedStyles(e,"under"),this.shouldRenderUnderOrAbove(e,d,h,t.nudgeY||0)==="under"?v=d.top-h.top+d.height:v=d.top-e.offsetHeight-(r||0)*2-h.top),{x:m,y:v}};this.positionPopup({ePopup:e,nudgeX:n,nudgeY:r,keepWithinBounds:i,updatePosition:g,postProcessCallback:()=>this.callPostProcessPopup(c,e,s,null,l,u)})}shouldRenderUnderOrAbove(t,e,n,r){const i=n.bottom-e.bottom,s=e.top-n.top,o=t.offsetHeight+r;return i>o?"under":s>o||s>i?"above":"under"}setAlignedStyles(t,e){const n=this.getPopupIndex(t);if(n===-1)return;const r=this.popupList[n],{alignedToElement:i}=r;!i||(["right","left","over","above","under"].forEach(o=>{i.classList.remove(`ag-has-popup-positioned-${o}`),t.classList.remove(`ag-popup-positioned-${o}`)}),!e)||(i.classList.add(`ag-has-popup-positioned-${e}`),t.classList.add(`ag-popup-positioned-${e}`))}callPostProcessPopup(t,e,n,r,i,s){const o=this.gos.getCallback("postProcessPopup");o&&o({column:i,rowNode:s,ePopup:e,type:t,eventSource:n,mouseEvent:r})}positionPopup(t){const{ePopup:e,keepWithinBounds:n,nudgeX:r,nudgeY:i,skipObserver:s,updatePosition:o}=t,a={width:0,height:0},l=(u=!1)=>{let{x:c,y:d}=o();u&&e.clientWidth===a.width&&e.clientHeight===a.height||(a.width=e.clientWidth,a.height=e.clientHeight,r&&(c+=r),i&&(d+=i),n&&(c=this.keepXYWithinBounds(e,c,1),d=this.keepXYWithinBounds(e,d,0)),e.style.left=`${c}px`,e.style.top=`${d}px`,t.postProcessCallback&&t.postProcessCallback())};if(l(),!s){const u=this.resizeObserverService.observeResize(e,()=>l(!0));setTimeout(()=>u(),Do.WAIT_FOR_POPUP_CONTENT_RESIZE)}}getActivePopups(){return this.popupList.map(t=>t.element)}getPopupList(){return this.popupList}getParentRect(){const t=this.gos.getDocument();let e=this.getPopupParent();return e===t.body?e=t.documentElement:getComputedStyle(e).position==="static"&&(e=e.offsetParent),II(e)}keepXYWithinBounds(t,e,n){const r=n===0,i=r?"clientHeight":"clientWidth",s=r?"top":"left",o=r?"offsetHeight":"offsetWidth",a=r?"scrollTop":"scrollLeft",l=this.gos.getDocument(),u=l.documentElement,c=this.getPopupParent(),d=c.getBoundingClientRect(),h=l.documentElement.getBoundingClientRect(),f=c===l.body,g=t[o];let v=f?(r?PI:rg)(u)+u[a]:c[i];f&&(v-=Math.abs(h[s]-d[s]));const C=v-g;return Math.min(Math.max(e,0),Math.abs(C))}addPopup(t){const e=this.gos.getDocument(),{eChild:n,ariaLabel:r,alwaysOnTop:i,positionCallback:s,anchorToElement:o}=t;if(!e)return console.warn("AG Grid: could not find the document, document is empty"),{hideFunc:()=>{}};const a=this.getPopupIndex(n);if(a!==-1)return{hideFunc:this.popupList[a].hideFunc};this.initialisePopupPosition(n);const l=this.createPopupWrapper(n,r,!!i),u=this.addEventListenersToPopup(Dt(me({},t),{wrapperEl:l}));return s&&s(),this.addPopupToPopupList(n,l,u,o),{hideFunc:u}}initialisePopupPosition(t){const n=this.getPopupParent().getBoundingClientRect();J(t.style.top)||(t.style.top=`${n.top*-1}px`),J(t.style.left)||(t.style.left=`${n.left*-1}px`)}createPopupWrapper(t,e,n){const r=this.getPopupParent(),i=document.createElement("div"),{allThemes:s}=this.environment.getTheme();return s.length&&i.classList.add(...s),i.classList.add("ag-popup"),t.classList.add(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),t.hasAttribute("role")||Ut(t,"dialog"),Si(t,e),i.appendChild(t),r.appendChild(i),n?this.setAlwaysOnTop(t,!0):this.bringPopupToFront(t),i}handleThemeChange(){const{allThemes:t}=this.environment.getTheme();for(const e of this.popupList){for(const n of Array.from(e.wrapper.classList))n.startsWith("ag-theme-")&&e.wrapper.classList.remove(n);t.length&&e.wrapper.classList.add(...t)}}addEventListenersToPopup(t){const e=this.gos.getDocument(),n=this.getPopupParent(),{wrapperEl:r,eChild:i,closedCallback:s,afterGuiAttached:o,closeOnEsc:a,modal:l}=t;let u=!1;const c=g=>{if(!r.contains(this.gos.getActiveDomElement()))return;g.key===H.ESCAPE&&!ps(g)&&f({keyboardEvent:g})},d=g=>f({mouseEvent:g}),h=g=>f({touchEvent:g}),f=(g={})=>{const{mouseEvent:m,touchEvent:v,keyboardEvent:C,forceHide:y}=g;!y&&(this.isEventFromCurrentPopup({mouseEvent:m,touchEvent:v},i)||u)||(u=!0,n.removeChild(r),e.removeEventListener("keydown",c),e.removeEventListener("mousedown",d),e.removeEventListener("touchstart",h),e.removeEventListener("contextmenu",d),this.eventService.removeEventListener(x.EVENT_DRAG_STARTED,d),s&&s(m||v||C),this.removePopupFromPopupList(i))};return o&&o({hidePopup:f}),window.setTimeout(()=>{a&&e.addEventListener("keydown",c),l&&(e.addEventListener("mousedown",d),this.eventService.addEventListener(x.EVENT_DRAG_STARTED,d),e.addEventListener("touchstart",h),e.addEventListener("contextmenu",d))},0),f}addPopupToPopupList(t,e,n,r){this.popupList.push({element:t,wrapper:e,hideFunc:n,instanceId:sie++,isAnchored:!!r}),r&&this.setPopupPositionRelatedToElement(t,r)}getPopupIndex(t){return this.popupList.findIndex(e=>e.element===t)}setPopupPositionRelatedToElement(t,e){const n=this.getPopupIndex(t);if(n===-1)return;const r=this.popupList[n];if(r.stopAnchoringPromise&&r.stopAnchoringPromise.then(s=>s&&s()),r.stopAnchoringPromise=void 0,r.isAnchored=!1,!e)return;const i=this.keepPopupPositionedRelativeTo({element:e,ePopup:t,hidePopup:r.hideFunc});return r.stopAnchoringPromise=i,r.isAnchored=!0,i}removePopupFromPopupList(t){this.setAlignedStyles(t,null),this.setPopupPositionRelatedToElement(t,null),this.popupList=this.popupList.filter(e=>e.element!==t)}keepPopupPositionedRelativeTo(t){const e=this.getPopupParent(),n=e.getBoundingClientRect(),{element:r,ePopup:i}=t,s=r.getBoundingClientRect(),o=n.top-s.top,a=n.left-s.left;let l=o,u=a;const c=i.style.top,d=parseInt(c.substring(0,c.length-1),10),h=i.style.left,f=parseInt(h.substring(0,h.length-1),10);return new an(g=>{this.getFrameworkOverrides().setInterval(()=>{const m=e.getBoundingClientRect(),v=r.getBoundingClientRect();if(v.top==0&&v.left==0&&v.height==0&&v.width==0){t.hidePopup();return}const y=m.top-v.top;if(y!=l){const _=this.keepXYWithinBounds(i,d+o-y,0);i.style.top=`${_}px`}l=y;const S=m.left-v.left;if(S!=u){const _=this.keepXYWithinBounds(i,f+a-S,1);i.style.left=`${_}px`}u=S},200).then(m=>{g(()=>{m!=null&&window.clearInterval(m)})})})}hasAnchoredPopup(){return this.popupList.some(t=>t.isAnchored)}isEventFromCurrentPopup(t,e){const{mouseEvent:n,touchEvent:r}=t,i=n||r;if(!i)return!1;const s=this.getPopupIndex(e);if(s===-1)return!1;for(let o=s;o<this.popupList.length;o++){const a=this.popupList[o];if(BC(a.element,i))return!0}return this.isElementWithinCustomPopup(i.target)}isElementWithinCustomPopup(t){const e=this.gos.getDocument();for(;t&&t!==e.body;){if(t.classList.contains("ag-custom-component-popup")||t.parentElement===null)return!0;t=t.parentElement}return!1}getWrapper(t){for(;!t.classList.contains("ag-popup")&&t.parentElement;)t=t.parentElement;return t.classList.contains("ag-popup")?t:null}setAlwaysOnTop(t,e){const n=this.getWrapper(t);n&&(n.classList.toggle("ag-always-on-top",!!e),e&&this.bringPopupToFront(n))}bringPopupToFront(t){const e=this.getPopupParent(),n=Array.prototype.slice.call(e.querySelectorAll(".ag-popup")),r=n.length,i=Array.prototype.slice.call(e.querySelectorAll(".ag-popup.ag-always-on-top")),s=i.length,o=this.getWrapper(t);if(!o||r<=1||!e.contains(t))return;const a=n.indexOf(o),l=o.querySelectorAll("div"),u=[];for(l.forEach(c=>{c.scrollTop!==0&&u.push([c,c.scrollTop])}),s?o.classList.contains("ag-always-on-top")?a!==r-1&&Je(i).insertAdjacentElement("afterend",o):a!==r-s-1&&i[0].insertAdjacentElement("beforebegin",o):a!==r-1&&Je(n).insertAdjacentElement("afterend",o);u.length;){const c=u.pop();c[0].scrollTop=c[1]}}};Do.WAIT_FOR_POPUP_CONTENT_RESIZE=200;w([O("focusService")],Do.prototype,"focusService",2);w([O("ctrlsService")],Do.prototype,"ctrlsService",2);w([O("resizeObserverService")],Do.prototype,"resizeObserverService",2);w([te],Do.prototype,"postConstruct",1);Do=w([ce("popupService")],Do);var oie=class extends Ae{constructor(){super(`
        <div class="ag-autocomplete-row" role="presentation">
            <div class="ag-autocomplete-row-label"></div>
        </div>`),this.hasHighlighting=!1}setState(t,e){this.value=t,this.render(),this.updateSelected(e)}updateSelected(t){this.addOrRemoveCssClass("ag-autocomplete-row-selected",t)}setSearchString(t){var e;let n=!1;if(J(t)){const r=(e=this.value)==null?void 0:e.toLocaleLowerCase().indexOf(t.toLocaleLowerCase());if(r>=0){n=!0,this.hasHighlighting=!0;const i=r+t.length,s=sn(this.value.slice(0,r)),o=sn(this.value.slice(r,i)),a=sn(this.value.slice(i));this.getGui().lastElementChild.innerHTML=`${s}<b>${o}</b>${a}`}}!n&&this.hasHighlighting&&(this.hasHighlighting=!1,this.render())}render(){var t;this.getGui().lastElementChild.innerHTML=(t=sn(this.value))!=null?t:"&nbsp;"}},DE=class Dz extends ju{constructor(e){super(Dz.TEMPLATE),this.params=e,this.searchString=""}destroy(){super.destroy()}init(){this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList=this.createManagedBean(new xz({cssIdentifier:"autocomplete"})),this.virtualList.setComponentCreator(this.createRowComponent.bind(this)),this.eList.appendChild(this.virtualList.getGui()),this.virtualList.setModel({getRowCount:()=>this.autocompleteEntries.length,getRow:n=>this.autocompleteEntries[n]});const e=this.virtualList.getGui();this.addManagedListener(e,"click",()=>this.params.onConfirmed()),this.addManagedListener(e,"mousemove",this.onMouseMove.bind(this)),this.addManagedListener(e,"mousedown",n=>n.preventDefault()),this.setSelectedValue(0)}onNavigationKeyDown(e,n){e.preventDefault();const r=this.autocompleteEntries.indexOf(this.selectedValue),i=n===H.UP?r-1:r+1;this.checkSetSelectedValue(i)}setSearch(e){this.searchString=e,J(e)?this.runSearch():(this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList.refresh(),this.checkSetSelectedValue(0)),this.updateSearchInList()}runContainsSearch(e,n){let r,i=!1;const s=e.toLocaleLowerCase(),o=n.filter(a=>{const u=a.toLocaleLowerCase().indexOf(s),c=u===0,d=u>=0;return d&&(!r||!i&&c||i===c&&a.length<r.length)&&(r=a,i=c),d});return!r&&o.length&&(r=o[0]),{topMatch:r,allMatches:o}}runSearch(){var e,n;const{autocompleteEntries:r}=this.params,i=r.map(u=>{var c;return(c=u.displayValue)!=null?c:u.key});let s,o;if(this.params.useFuzzySearch)s=Im(this.searchString,i,!0).values,o=s.length?s[0]:void 0;else{const u=this.runContainsSearch(this.searchString,i);s=u.allMatches,o=u.topMatch}let a=r.filter(({key:u,displayValue:c})=>s.includes(c??u));if(!a.length&&this.selectedValue&&((n=(e=this.params)==null?void 0:e.forceLastSelection)!=null&&n.call(e,this.selectedValue,this.searchString))&&(a=[this.selectedValue]),this.autocompleteEntries=a,this.virtualList.refresh(),!o)return;const l=s.indexOf(o);this.checkSetSelectedValue(l)}updateSearchInList(){this.virtualList.forEachRenderedRow(e=>e.setSearchString(this.searchString))}checkSetSelectedValue(e){e>=0&&e<this.autocompleteEntries.length&&this.setSelectedValue(e)}setSelectedValue(e){const n=this.autocompleteEntries[e];this.selectedValue!==n&&(this.selectedValue=n,this.virtualList.ensureIndexVisible(e),this.virtualList.forEachRenderedRow((r,i)=>{r.updateSelected(e===i)}))}createRowComponent(e){var n;const r=new oie;return this.getContext().createBean(r),r.setState((n=e.displayValue)!=null?n:e.key,e===this.selectedValue),r}onMouseMove(e){const n=this.virtualList.getGui().getBoundingClientRect(),r=this.virtualList.getScrollTop(),i=e.clientY-n.top+r,s=Math.floor(i/this.virtualList.getRowHeight());this.checkSetSelectedValue(s)}afterGuiAttached(){this.virtualList.refresh()}getSelectedValue(){var e;return this.autocompleteEntries.length&&(e=this.selectedValue)!=null?e:null}};DE.TEMPLATE=`<div class="ag-autocomplete-list-popup">
            <div ref="eList" class="ag-autocomplete-list"></div>
        <div>`;w([ne("eList")],DE.prototype,"eList",2);w([te],DE.prototype,"init",1);var aie=DE,ll=class zp extends Ae{constructor(){super(`
            <div class="ag-autocomplete" role="presentation">
                <ag-input-text-field ref="eAutocompleteInput"></ag-input-text-field>
            </div>`),this.isListOpen=!1,this.lastPosition=0,this.valid=!0}postConstruct(){this.eAutocompleteInput.onValueChange(e=>this.onValueChanged(e)),this.eAutocompleteInput.getInputElement().setAttribute("autocomplete","off"),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.addGuiEventListener("click",this.updatePositionAndList.bind(this)),this.addDestroyFunc(()=>{this.destroyBean(this.autocompleteList)}),this.addGuiEventListener("focusout",()=>this.onFocusOut())}onValueChanged(e){const n=Vs(e);this.updateValue(n),this.updateAutocompleteList(n)}updateValue(e){this.updateLastPosition(),this.dispatchEvent({type:zp.EVENT_VALUE_CHANGED,value:e}),this.validate(e)}updateAutocompleteList(e){var n,r,i,s;const o=(r=(n=this.listGenerator)==null?void 0:n.call(this,e,this.lastPosition))!=null?r:{enabled:!1};if((!o.type||o.type!==((i=this.autocompleteListParams)==null?void 0:i.type))&&this.isListOpen&&this.closeList(),this.autocompleteListParams=o,(s=this.autocompleteListParams)!=null&&s.enabled){this.isListOpen||this.openList();const{searchString:a}=this.autocompleteListParams;this.autocompleteList.setSearch(a??"")}else this.isListOpen&&this.closeList()}onKeyDown(e){const n=e.key;switch(this.updateLastPosition(),n){case H.ENTER:this.onEnterKeyDown(e);break;case H.TAB:this.onTabKeyDown(e);break;case H.DOWN:case H.UP:this.onUpDownKeyDown(e,n);break;case H.LEFT:case H.RIGHT:case H.PAGE_HOME:case H.PAGE_END:setTimeout(()=>{this.updatePositionAndList()});break;case H.ESCAPE:this.onEscapeKeyDown(e);break;case H.SPACE:e.ctrlKey&&!this.isListOpen&&(e.preventDefault(),this.forceOpenList());break}}confirmSelection(){var e;const n=(e=this.autocompleteList)==null?void 0:e.getSelectedValue();n&&(this.closeList(),this.dispatchEvent({type:zp.EVENT_OPTION_SELECTED,value:this.getValue(),position:this.lastPosition,updateEntry:n,autocompleteType:this.autocompleteListParams.type}))}onTabKeyDown(e){this.isListOpen&&(e.preventDefault(),e.stopPropagation(),this.confirmSelection())}onEnterKeyDown(e){e.preventDefault(),this.isListOpen?this.confirmSelection():this.onCompleted()}onUpDownKeyDown(e,n){var r;e.preventDefault(),this.isListOpen?(r=this.autocompleteList)==null||r.onNavigationKeyDown(e,n):this.forceOpenList()}onEscapeKeyDown(e){this.isListOpen&&(e.preventDefault(),e.stopPropagation(),this.closeList(),this.setCaret(this.lastPosition,!0))}onFocusOut(){this.isListOpen&&this.closeList()}updatePositionAndList(){var e;this.updateLastPosition(),this.updateAutocompleteList((e=this.eAutocompleteInput.getValue())!=null?e:null)}setCaret(e,n){const r=this.gos.getDocument(),i=this.gos.getActiveDomElement();n&&(!i||i===r.body)&&this.eAutocompleteInput.getFocusableElement().focus();const s=this.eAutocompleteInput.getInputElement();s.setSelectionRange(e,e),e===s.value.length&&(s.scrollLeft=s.scrollWidth)}forceOpenList(){this.onValueChanged(this.eAutocompleteInput.getValue())}updateLastPosition(){var e;this.lastPosition=(e=this.eAutocompleteInput.getInputElement().selectionStart)!=null?e:0}validate(e){var n;this.validator&&(this.validationMessage=this.validator(e),this.eAutocompleteInput.getInputElement().setCustomValidity((n=this.validationMessage)!=null?n:""),this.valid=!this.validationMessage,this.dispatchEvent({type:zp.EVENT_VALID_CHANGED,isValid:this.valid,validationMessage:this.validationMessage}))}openList(){this.isListOpen=!0,this.autocompleteList=this.createBean(new aie({autocompleteEntries:this.autocompleteListParams.entries,onConfirmed:()=>this.confirmSelection(),forceLastSelection:this.forceLastSelection}));const e=this.autocompleteList.getGui(),n={ePopup:e,type:"autocomplete",eventSource:this.getGui(),position:"under",alignSide:this.gos.get("enableRtl")?"right":"left",keepWithinBounds:!0},r=this.popupService.addPopup({eChild:e,anchorToElement:this.getGui(),positionCallback:()=>this.popupService.positionPopupByComponent(n),ariaLabel:this.listAriaLabel});this.hidePopup=r.hideFunc,this.autocompleteList.afterGuiAttached()}closeList(){this.isListOpen=!1,this.hidePopup(),this.destroyBean(this.autocompleteList),this.autocompleteList=null}onCompleted(){this.isListOpen&&this.closeList(),this.dispatchEvent({type:zp.EVENT_VALUE_CONFIRMED,value:this.getValue(),isValid:this.isValid()})}getValue(){return Vs(this.eAutocompleteInput.getValue())}setInputPlaceholder(e){return this.eAutocompleteInput.setInputPlaceholder(e),this}setInputAriaLabel(e){return this.eAutocompleteInput.setInputAriaLabel(e),this}setListAriaLabel(e){return this.listAriaLabel=e,this}setListGenerator(e){return this.listGenerator=e,this}setValidator(e){return this.validator=e,this}isValid(){return this.valid}setValue(e){const{value:n,position:r,silent:i,updateListOnlyIfOpen:s,restoreFocus:o}=e;this.eAutocompleteInput.setValue(n,!0),this.setCaret(r??this.lastPosition,o),i||this.updateValue(n),(!s||this.isListOpen)&&this.updateAutocompleteList(n)}setForceLastSelection(e){return this.forceLastSelection=e,this}setInputDisabled(e){return this.eAutocompleteInput.setDisabled(e),this}};ll.EVENT_VALUE_CHANGED="eventValueChanged";ll.EVENT_VALUE_CONFIRMED="eventValueConfirmed";ll.EVENT_OPTION_SELECTED="eventOptionSelected";ll.EVENT_VALID_CHANGED="eventValidChanged";w([O("popupService")],ll.prototype,"popupService",2);w([ne("eAutocompleteInput")],ll.prototype,"eAutocompleteInput",2);w([te],ll.prototype,"postConstruct",1);var lie=ll,ul=class Gy extends Ae{constructor(e,n,r,i){super(),this.dragSourceDropTarget=e,this.ghost=n,this.horizontal=r,this.template=i}init(){var e;this.setTemplate((e=this.template)!=null?e:Gy.TEMPLATE);const n=this.getGui();this.addElementClasses(n),this.addElementClasses(this.eDragHandle,"drag-handle"),this.addElementClasses(this.eText,"text"),this.addElementClasses(this.eButton,"button"),this.eDragHandle.appendChild(Bt("columnDrag",this.gos)),this.eButton.appendChild(Bt("cancel",this.gos)),this.setupComponents(),!this.ghost&&this.isDraggable()&&this.addDragSource(),this.setupAria(),this.setupTooltip(),this.activateTabIndex(),this.refreshDraggable()}isDraggable(){return!0}refreshDraggable(){this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!this.isDraggable())}setupAria(){const e=this.localeService.getLocaleTextFunc(),n=[this.getAriaDisplayName()];this.addAdditionalAriaInstructions(n,e),Si(this.getGui(),n.join(". "))}addAdditionalAriaInstructions(e,n){if(this.isRemovable()){const r=n("ariaDropZoneColumnComponentDescription","Press DELETE to remove");e.push(r)}}setupTooltip(){const e=()=>{const n=this.getTooltip();this.setTooltip({newTooltipText:n})};e(),this.addManagedListener(this.eventService,x.EVENT_NEW_COLUMNS_LOADED,e)}getDragSourceId(){}getDefaultIconName(){return Ie.ICON_NOT_ALLOWED}addDragSource(){const{dragAndDropService:e,eDragHandle:n}=this,r=this.createGetDragItem(),i=this.getDefaultIconName(),s={type:this.getDragSourceType(),sourceId:this.getDragSourceId(),eElement:n,getDefaultIconName:()=>i,getDragItem:r,dragItemName:this.getDisplayName()};e.addDragSource(s,!0),this.addDestroyFunc(()=>e.removeDragSource(s))}setupComponents(){this.setTextValue(),this.setupRemove(),this.ghost&&this.addCssClass("ag-column-drop-cell-ghost")}isRemovable(){return!0}refreshRemove(){Ue(this.eButton,this.isRemovable())}setupRemove(){this.refreshRemove();const e={type:Gy.EVENT_COLUMN_REMOVE};this.addGuiEventListener("keydown",r=>this.onKeyDown(r)),this.addManagedListener(this.eButton,"click",r=>{this.dispatchEvent(e),r.stopPropagation()});const n=new Dn(this.eButton);this.addManagedListener(n,Dn.EVENT_TAP,()=>{this.dispatchEvent(e)}),this.addDestroyFunc(n.destroy.bind(n))}onKeyDown(e){e.key===H.DELETE&&this.isRemovable()&&(e.preventDefault(),this.dispatchEvent({type:Gy.EVENT_COLUMN_REMOVE}))}getDisplayValue(){return this.getDisplayName()}setTextValue(){const e=this.getDisplayValue(),n=sn(e);this.eText.innerHTML=n}addElementClasses(e,n){n=n?`-${n}`:"";const r=this.horizontal?"horizontal":"vertical";e.classList.add(`ag-column-drop-cell${n}`,`ag-column-drop-${r}-cell${n}`)}destroy(){super.destroy(),this.dragSourceDropTarget=null}};ul.EVENT_COLUMN_REMOVE="columnRemove";ul.TEMPLATE=`<span role="option">
          <span ref="eDragHandle" class="ag-drag-handle ag-column-drop-cell-drag-handle" role="presentation"></span>
          <span ref="eText" class="ag-column-drop-cell-text" aria-hidden="true"></span>
          <span ref="eButton" class="ag-column-drop-cell-button" role="presentation"></span>
        </span>`;w([O("dragAndDropService")],ul.prototype,"dragAndDropService",2);w([ne("eText")],ul.prototype,"eText",2);w([ne("eDragHandle")],ul.prototype,"eDragHandle",2);w([ne("eButton")],ul.prototype,"eButton",2);w([te],ul.prototype,"init",1);var uie=ul,$m=class Rs extends Ae{constructor(e){super('<div class="ag-unselectable" role="presentation"></div>'),this.horizontal=e,this.state=Rs.STATE_NOT_DRAGGING,this.guiDestroyFunctions=[],this.childPillComponents=[],this.resizeEnabled=!1,this.addElementClasses(this.getGui()),this.ePillDropList=document.createElement("div"),this.addElementClasses(this.ePillDropList,"list"),Ut(this.ePillDropList,"listbox")}isHorizontal(){return this.horizontal}toggleResizable(e){this.positionableFeature.setResizable(e?{bottom:!0}:!1),this.resizeEnabled=e}isSourceEventFromTarget(e){const{dropZoneTarget:n,dragSource:r}=e;return n.contains(r.eElement)}destroy(){this.destroyGui(),super.destroy()}destroyGui(){this.guiDestroyFunctions.forEach(e=>e()),this.guiDestroyFunctions.length=0,this.childPillComponents.length=0,en(this.getGui()),en(this.ePillDropList)}init(e){this.params=e??{},this.createManagedBean(new il(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.setupDropTarget(),this.positionableFeature=new bh(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature),this.refreshGui(),Si(this.ePillDropList,this.getAriaLabel())}handleKeyDown(e){const n=!this.horizontal;let r=e.key===H.DOWN,i=e.key===H.UP;if(!n){const o=this.gos.get("enableRtl");r=!o&&e.key===H.RIGHT||o&&e.key===H.LEFT,i=!o&&e.key===H.LEFT||o&&e.key===H.RIGHT}if(!r&&!i)return;const s=this.focusService.findNextFocusableElement(this.getFocusableElement(),!1,i);s&&(e.preventDefault(),s.focus())}addElementClasses(e,n){n=n?`-${n}`:"";const r=this.horizontal?"horizontal":"vertical";e.classList.add(`ag-column-drop${n}`,`ag-column-drop-${r}${n}`)}setupDropTarget(){this.dropTarget={getContainer:this.getGui.bind(this),getIconName:this.getIconName.bind(this),onDragging:this.onDragging.bind(this),onDragEnter:this.onDragEnter.bind(this),onDragLeave:this.onDragLeave.bind(this),onDragStop:this.onDragStop.bind(this),isInterestedIn:this.isInterestedIn.bind(this)},this.dragAndDropService.addDropTarget(this.dropTarget)}minimumAllowedNewInsertIndex(){return 0}checkInsertIndex(e){const n=this.getNewInsertIndex(e);if(n<0)return!1;const r=this.minimumAllowedNewInsertIndex(),i=Math.max(r,n),s=i!==this.insertIndex;return s&&(this.insertIndex=i),s}getNewInsertIndex(e){const n=e.event,r=this.horizontal?n.clientX:n.clientY,i=this.childPillComponents.map(o=>o.getGui().getBoundingClientRect()),s=i.findIndex(o=>this.horizontal?o.right>r&&o.left<r:o.top<r&&o.bottom>r);if(s===-1){const o=this.gos.get("enableRtl");return i.every(u=>r>(this.horizontal?u.right:u.bottom))?o&&this.horizontal?0:this.childPillComponents.length:i.every(u=>r<(this.horizontal?u.left:u.top))?o&&this.horizontal?this.childPillComponents.length:0:this.insertIndex}return this.insertIndex<=s?s+1:s}checkDragStartedBySelf(e){this.state===Rs.STATE_NOT_DRAGGING&&(this.state=Rs.STATE_REARRANGE_ITEMS,this.potentialDndItems=this.getItems(e.dragSource.getDragItem()),this.refreshGui(),this.checkInsertIndex(e),this.refreshGui())}onDragging(e){this.checkDragStartedBySelf(e),this.checkInsertIndex(e)&&this.refreshGui()}handleDragEnterEnd(e){}onDragEnter(e){const n=this.getItems(e.dragSource.getDragItem());this.state=Rs.STATE_NEW_ITEMS_IN;const r=n.filter(s=>this.isItemDroppable(s,e)),i=r.every(s=>this.childPillComponents.map(o=>o.getItem()).indexOf(s)!==-1);if(r.length!==0){if(this.potentialDndItems=r,i){this.state=Rs.STATE_NOT_DRAGGING;return}this.handleDragEnterEnd(e),this.checkInsertIndex(e),this.refreshGui()}}isPotentialDndItems(){return yj(this.potentialDndItems)}handleDragLeaveEnd(e){}onDragLeave(e){if(this.state===Rs.STATE_REARRANGE_ITEMS){const n=this.getItems(e.dragSource.getDragItem());this.removeItems(n)}this.isPotentialDndItems()&&(this.handleDragLeaveEnd(e),this.potentialDndItems=[],this.refreshGui()),this.state=Rs.STATE_NOT_DRAGGING}refreshOnDragStop(){return!0}onDragStop(){if(this.isPotentialDndItems()){let e=!1;this.state===Rs.STATE_NEW_ITEMS_IN?(this.addItems(this.potentialDndItems),e=!0):e=this.rearrangeItems(this.potentialDndItems),this.potentialDndItems=[],(this.refreshOnDragStop()||!e)&&this.refreshGui()}this.state=Rs.STATE_NOT_DRAGGING}removeItems(e){const n=this.getExistingItems().filter(r=>!vi(e,r));this.updateItems(n)}addItems(e){if(!e)return;const n=this.getExistingItems().slice(),r=e.filter(i=>n.indexOf(i)<0);a_(n,r,this.insertIndex),this.updateItems(n)}addItem(e){this.insertIndex=this.getExistingItems().length,this.addItems([e]),this.refreshGui()}rearrangeItems(e){const n=this.getNonGhostItems().slice();return a_(n,e,this.insertIndex),Os(n,this.getExistingItems())?!1:(this.updateItems(n),!0)}refreshGui(){const e=this.ePillDropList.scrollTop,n=this.resizeEnabled,r=this.getFocusedItem();let i=this.focusService.findNextFocusableElement();i||(i=this.focusService.findNextFocusableElement(void 0,!1,!0)),this.toggleResizable(!1),this.destroyGui(),this.addIconAndTitleToGui(),this.addEmptyMessageToGui(),this.addItemsToGui(),this.isHorizontal()||(this.ePillDropList.scrollTop=e),n&&this.toggleResizable(n),this.focusService.isKeyboardMode()&&this.restoreFocus(r,i)}getFocusedItem(){const e=this.getGui(),n=this.gos.getActiveDomElement();return e.contains(n)?Array.from(e.querySelectorAll(".ag-column-drop-cell")).indexOf(n):-1}restoreFocus(e,n){const r=this.getGui(),i=Array.from(r.querySelectorAll(".ag-column-drop-cell"));if(e===-1)return;i.length===0&&n.focus();const s=Math.min(i.length-1,e),o=i[s];o&&o.focus()}focusList(e){const n=e?this.childPillComponents.length-1:0;this.restoreFocus(n,this.getFocusableElement())}getNonGhostItems(){const e=this.getExistingItems();return this.isPotentialDndItems()?e.filter(n=>!vi(this.potentialDndItems,n)):e}addItemsToGui(){const n=this.getNonGhostItems().map(r=>this.createItemComponent(r,!1));if(this.isPotentialDndItems()){const r=this.potentialDndItems.map(i=>this.createItemComponent(i,!0));this.insertIndex>=n.length?n.push(...r):n.splice(this.insertIndex,0,...r)}this.appendChild(this.ePillDropList),n.forEach((r,i)=>{i>0&&this.addArrow(this.ePillDropList),this.ePillDropList.appendChild(r.getGui())}),this.addAriaLabelsToComponents()}addAriaLabelsToComponents(){this.childPillComponents.forEach((e,n)=>{const r=e.getGui();sE(r,n+1),iE(r,this.childPillComponents.length)})}createItemComponent(e,n){const r=this.createPillComponent(e,this.dropTarget,n,this.horizontal);return r.addEventListener(uie.EVENT_COLUMN_REMOVE,this.removeItems.bind(this,[e])),this.context.createBean(r),this.guiDestroyFunctions.push(()=>this.destroyBean(r)),n||this.childPillComponents.push(r),r}addIconAndTitleToGui(){const{title:e,icon:n}=this.params;if(!e||!n)return;const r=document.createElement("div");if(Am(r,!0),this.addElementClasses(r,"title-bar"),this.addElementClasses(n,"icon"),this.addOrRemoveCssClass("ag-column-drop-empty",this.isExistingItemsEmpty()),r.appendChild(n),!this.horizontal){const i=document.createElement("span");this.addElementClasses(i,"title"),i.innerHTML=e,r.appendChild(i)}this.appendChild(r)}isExistingItemsEmpty(){return this.getExistingItems().length===0}addEmptyMessageToGui(){const{emptyMessage:e}=this.params;if(!e||!this.isExistingItemsEmpty()||this.isPotentialDndItems())return;const n=document.createElement("span");n.innerHTML=e,this.addElementClasses(n,"empty-message"),this.ePillDropList.appendChild(n)}addArrow(e){if(this.horizontal){const n=this.gos.get("enableRtl"),r=Bt(n?"smallLeft":"smallRight",this.gos);this.addElementClasses(r,"cell-separator"),e.appendChild(r)}}};$m.STATE_NOT_DRAGGING="notDragging";$m.STATE_NEW_ITEMS_IN="newItemsIn";$m.STATE_REARRANGE_ITEMS="rearrangeItems";w([O("focusService")],$m.prototype,"focusService",2);w([O("dragAndDropService")],$m.prototype,"dragAndDropService",2);var cie=["touchstart","touchend","touchmove","touchcancel"],Oz=class{constructor(t="javascript"){this.frameworkName=t,this.renderingEngine="vanilla",this.wrapIncoming=e=>e(),this.wrapOutgoing=e=>e()}setInterval(t,e){return new an(n=>{n(window.setInterval(t,e))})}addEventListener(t,e,n,r){const i=vi(cie,e);t.addEventListener(e,n,{capture:!!r,passive:i})}get shouldWrapOutgoing(){return!1}frameworkComponent(t){return null}isFrameworkComponent(t){return!1}getDocLink(t){return`https://www.ag-grid.com/${this.frameworkName==="solid"?"react":this.frameworkName}-data-grid${t?`/${t}`:""}`}},qa=class extends ee{getNextCellToFocus(t,e,n=!1){return n?this.getNextCellToFocusWithCtrlPressed(t,e):this.getNextCellToFocusWithoutCtrlPressed(t,e)}getNextCellToFocusWithCtrlPressed(t,e){const n=t===H.UP,r=t===H.DOWN,i=t===H.LEFT;let s,o;if(n||r)o=n?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow(),s=e.column;else{const a=this.columnModel.getAllDisplayedColumns(),l=this.gos.get("enableRtl");o=e.rowIndex,s=i!==l?a[0]:Je(a)}return{rowIndex:o,rowPinned:null,column:s}}getNextCellToFocusWithoutCtrlPressed(t,e){let n=e,r=!1;for(;!r;){switch(t){case H.UP:n=this.getCellAbove(n);break;case H.DOWN:n=this.getCellBelow(n);break;case H.RIGHT:this.gos.get("enableRtl")?n=this.getCellToLeft(n):n=this.getCellToRight(n);break;case H.LEFT:this.gos.get("enableRtl")?n=this.getCellToRight(n):n=this.getCellToLeft(n);break;default:n=null,console.warn("AG Grid: unknown key for navigation "+t);break}n?r=this.isCellGoodToFocusOn(n):r=!0}return n}isCellGoodToFocusOn(t){const e=t.column;let n;switch(t.rowPinned){case"top":n=this.pinnedRowModel.getPinnedTopRow(t.rowIndex);break;case"bottom":n=this.pinnedRowModel.getPinnedBottomRow(t.rowIndex);break;default:n=this.rowModel.getRow(t.rowIndex);break}return n?!e.isSuppressNavigable(n):!1}getCellToLeft(t){if(!t)return null;const e=this.columnModel.getDisplayedColBefore(t.column);return e?{rowIndex:t.rowIndex,column:e,rowPinned:t.rowPinned}:null}getCellToRight(t){if(!t)return null;const e=this.columnModel.getDisplayedColAfter(t.column);return e?{rowIndex:t.rowIndex,column:e,rowPinned:t.rowPinned}:null}getRowBelow(t){const e=t.rowIndex,n=t.rowPinned;if(this.isLastRowInContainer(t))switch(n){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.paginationProxy.getPageFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}const r=this.rowModel.getRow(t.rowIndex),i=this.getNextStickyPosition(r);return i||{rowIndex:e+1,rowPinned:n}}getNextStickyPosition(t,e){if(!this.gos.isGroupRowsSticky()||!t||!t.sticky)return;const n=this.rowRenderer.getStickyTopRowCtrls().some(a=>a.getRowNode().rowIndex===t.rowIndex);let r=[];n?r=[...this.rowRenderer.getStickyTopRowCtrls()].sort((a,l)=>a.getRowNode().rowIndex-l.getRowNode().rowIndex):r=[...this.rowRenderer.getStickyBottomRowCtrls()].sort((a,l)=>l.getRowNode().rowIndex-a.getRowNode().rowIndex);const i=e?-1:1,s=r.findIndex(a=>a.getRowNode().rowIndex===t.rowIndex),o=r[s+i];if(o)return{rowIndex:o.getRowNode().rowIndex,rowPinned:null}}getCellBelow(t){if(!t)return null;const e=this.getRowBelow(t);return e?{rowIndex:e.rowIndex,column:t.column,rowPinned:e.rowPinned}:null}isLastRowInContainer(t){const e=t.rowPinned,n=t.rowIndex;return e==="top"?this.pinnedRowModel.getPinnedTopRowData().length-1<=n:e==="bottom"?this.pinnedRowModel.getPinnedBottomRowData().length-1<=n:this.paginationProxy.getPageLastRow()<=n}getRowAbove(t){const e=t.rowIndex,n=t.rowPinned;if(n?e===0:e===this.paginationProxy.getPageFirstRow())return n==="top"?null:n?this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null:this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;const i=this.rowModel.getRow(t.rowIndex),s=this.getNextStickyPosition(i,!0);return s||{rowIndex:e-1,rowPinned:n}}getCellAbove(t){if(!t)return null;const e=this.getRowAbove({rowIndex:t.rowIndex,rowPinned:t.rowPinned});return e?{rowIndex:e.rowIndex,column:t.column,rowPinned:e.rowPinned}:null}getLastBodyCell(){return{rowIndex:this.paginationProxy.getPageLastRow(),rowPinned:null}}getLastFloatingTopRow(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowData().length-1,rowPinned:"top"}}getNextTabbedCell(t,e){return e?this.getNextTabbedCellBackwards(t):this.getNextTabbedCellForwards(t)}getNextTabbedCellForwards(t){const e=this.columnModel.getAllDisplayedColumns();let n=t.rowIndex,r=t.rowPinned,i=this.columnModel.getDisplayedColAfter(t.column);if(!i){i=e[0];const s=this.getRowBelow(t);if(Te(s)||!s.rowPinned&&!this.paginationProxy.isRowInPage(s))return null;n=s?s.rowIndex:null,r=s?s.rowPinned:null}return{rowIndex:n,column:i,rowPinned:r}}getNextTabbedCellBackwards(t){const e=this.columnModel.getAllDisplayedColumns();let n=t.rowIndex,r=t.rowPinned,i=this.columnModel.getDisplayedColBefore(t.column);if(!i){i=Je(e);const s=this.getRowAbove({rowIndex:t.rowIndex,rowPinned:t.rowPinned});if(Te(s)||!s.rowPinned&&!this.paginationProxy.isRowInPage(s))return null;n=s?s.rowIndex:null,r=s?s.rowPinned:null}return{rowIndex:n,column:i,rowPinned:r}}};w([O("columnModel")],qa.prototype,"columnModel",2);w([O("rowModel")],qa.prototype,"rowModel",2);w([O("rowRenderer")],qa.prototype,"rowRenderer",2);w([O("pinnedRowModel")],qa.prototype,"pinnedRowModel",2);w([O("paginationProxy")],qa.prototype,"paginationProxy",2);qa=w([ce("cellNavigationService")],qa);var Tu=class extends ee{constructor(){super(...arguments),this.consuming=!1}setBeans(t){this.logger=t.create("AlignedGridsService")}getAlignedGridApis(){var t;let e=(t=this.gos.get("alignedGrids"))!=null?t:[];const n=typeof e=="function";typeof e=="function"&&(e=e());const r=()=>`See ${this.getFrameworkOverrides().getDocLink("aligned-grids")}`;return e.map(s=>{var o;if(!s){$l("alignedGrids contains an undefined option."),n||$l(`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`),$l(r());return}if(s instanceof We)return s;const a=s;return"current"in a?(o=a.current)==null?void 0:o.api:(a.api||$l(`alignedGrids - No api found on the linked grid. If you are passing gridOptions to alignedGrids since v31 this is no longer valid. ${r()}`),a.api)}).filter(s=>!!s&&!s.isDestroyed())}init(){this.addManagedListener(this.eventService,x.EVENT_COLUMN_MOVED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,x.EVENT_COLUMN_VISIBLE,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,x.EVENT_COLUMN_PINNED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,x.EVENT_COLUMN_GROUP_OPENED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,x.EVENT_COLUMN_RESIZED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,x.EVENT_BODY_SCROLL,this.fireScrollEvent.bind(this))}fireEvent(t){this.consuming||this.getAlignedGridApis().forEach(e=>{if(e.isDestroyed())return;const n=e.__getAlignedGridService();t(n)})}onEvent(t){this.consuming=!0,t(),this.consuming=!1}fireColumnEvent(t){this.fireEvent(e=>{e.onColumnEvent(t)})}fireScrollEvent(t){t.direction==="horizontal"&&this.fireEvent(e=>{e.onScrollEvent(t)})}onScrollEvent(t){this.onEvent(()=>{this.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(t.left,!0)})}getMasterColumns(t){const e=[];return t.columns?t.columns.forEach(n=>{e.push(n)}):t.column&&e.push(t.column),e}getColumnIds(t){const e=[];return t.columns?t.columns.forEach(n=>{e.push(n.getColId())}):t.column&&e.push(t.column.getColId()),e}onColumnEvent(t){this.onEvent(()=>{switch(t.type){case x.EVENT_COLUMN_MOVED:case x.EVENT_COLUMN_VISIBLE:case x.EVENT_COLUMN_PINNED:case x.EVENT_COLUMN_RESIZED:const e=t;this.processColumnEvent(e);break;case x.EVENT_COLUMN_GROUP_OPENED:const n=t;this.processGroupOpenedEvent(n);break;case x.EVENT_COLUMN_PIVOT_CHANGED:console.warn("AG Grid: pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.");break}})}processGroupOpenedEvent(t){t.columnGroups.forEach(e=>{let n=null;if(e){const r=e.getGroupId();n=this.columnModel.getProvidedColumnGroup(r)}e&&!n||(this.logger.log("onColumnEvent-> processing "+t+" expanded = "+e.isExpanded()),this.columnModel.setColumnGroupOpened(n,e.isExpanded(),"alignedGridChanged"))})}processColumnEvent(t){var e;const n=t.column;let r=null;if(n&&(r=this.columnModel.getPrimaryColumn(n.getColId())),n&&!r)return;const i=this.getMasterColumns(t);switch(t.type){case x.EVENT_COLUMN_MOVED:{const u=t,d=t.api.getColumnState().map(h=>({colId:h.colId}));this.columnModel.applyColumnState({state:d,applyOrder:!0},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${t.type} toIndex = ${u.toIndex}`)}break;case x.EVENT_COLUMN_VISIBLE:{const u=t,d=t.api.getColumnState().map(h=>({colId:h.colId,hide:h.hide}));this.columnModel.applyColumnState({state:d},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${t.type} visible = ${u.visible}`)}break;case x.EVENT_COLUMN_PINNED:{const u=t,d=t.api.getColumnState().map(h=>({colId:h.colId,pinned:h.pinned}));this.columnModel.applyColumnState({state:d},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${t.type} pinned = ${u.pinned}`)}break;case x.EVENT_COLUMN_RESIZED:const a=t,l={};i.forEach(u=>{this.logger.log(`onColumnEvent-> processing ${t.type} actualWidth = ${u.getActualWidth()}`),l[u.getId()]={key:u.getColId(),newWidth:u.getActualWidth()}}),(e=a.flexColumns)==null||e.forEach(u=>{l[u.getId()]&&delete l[u.getId()]}),this.columnModel.setColumnWidths(Object.values(l),!1,a.finished,"alignedGridChanged");break}const o=this.ctrlsService.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach(a=>{a.setGridOption("alwaysShowVerticalScroll",o)})}};w([O("columnModel")],Tu.prototype,"columnModel",2);w([O("ctrlsService")],Tu.prototype,"ctrlsService",2);w([ls(0,Li("loggerFactory"))],Tu.prototype,"setBeans",1);w([te],Tu.prototype,"init",1);Tu=w([ce("alignedGridsService")],Tu);var Ru=class extends ee{constructor(){super(...arguments),this.selectedNodes=new Map,this.lastRowNode=null}init(){this.rowSelection=this.gos.get("rowSelection"),this.groupSelectsChildren=this.gos.get("groupSelectsChildren"),this.addManagedPropertyListeners(["groupSelectsChildren","rowSelection"],()=>{this.groupSelectsChildren=this.gos.get("groupSelectsChildren"),this.rowSelection=this.gos.get("rowSelection"),this.deselectAllRowNodes({source:"api"})}),this.addManagedListener(this.eventService,x.EVENT_ROW_SELECTED,this.onRowSelected.bind(this))}destroy(){super.destroy(),this.resetNodes(),this.lastRowNode=null}isMultiselect(){return this.rowSelection==="multiple"}setNodesSelected(t){var e;const{newValue:n,clearSelection:r,suppressFinishActions:i,rangeSelect:s,nodes:o,event:a,source:l="api"}=t;if(o.length===0)return 0;if(o.length>1&&!this.isMultiselect())return console.warn("AG Grid: cannot multi select while rowSelection='single'"),0;const u=this.groupSelectsChildren&&t.groupSelectsFiltered===!0,c=o.map(h=>h.footer?h.sibling:h);if(s){if(o.length>1)return console.warn("AG Grid: cannot range select while selecting multiple rows"),0;let h=null;if(l==="checkboxSelected"&&n===!1&&this.lastRowNode&&(this.lastRowNode.id?h=this.lastRowNode:this.lastRowNode=null),h==null&&(h=this.getLastSelectedNode()),h){const f=c[0];if(f!==h&&this.isMultiselect())return this.selectRange(f,h,n,l)}}this.lastRowNode=n?null:c[0];let d=0;for(let h=0;h<c.length;h++){const f=c[h];u&&f.group||f.selectThisNode(n,a,l)&&d++,this.groupSelectsChildren&&((e=f.childrenAfterGroup)!=null&&e.length)&&(d+=this.selectChildren(f,n,u,l))}if(!i&&(n&&(r||!this.isMultiselect())&&(d+=this.clearOtherNodes(c[0],l)),d>0)){this.updateGroupsFromChildrenSelections(l);const f={type:x.EVENT_SELECTION_CHANGED,source:l};this.eventService.dispatchEvent(f)}return d}selectRange(t,e,n=!0,r){const i=this.rowModel.getNodesInRangeForSelection(t,e);let s=0;i.forEach(a=>{if(a.group&&this.groupSelectsChildren)return;a.selectThisNode(n,void 0,r)&&s++}),this.updateGroupsFromChildrenSelections(r);const o={type:x.EVENT_SELECTION_CHANGED,source:r};return this.eventService.dispatchEvent(o),s}selectChildren(t,e,n,r){const i=n?t.childrenAfterAggFilter:t.childrenAfterGroup;return Te(i)?0:this.setNodesSelected({newValue:e,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:n,source:r,nodes:i})}getLastSelectedNode(){const t=Array.from(this.selectedNodes.keys());if(t.length==0)return null;const e=this.selectedNodes.get(Je(t));return e||null}getSelectedNodes(){const t=[];return this.selectedNodes.forEach(e=>{e&&t.push(e)}),t}getSelectedRows(){const t=[];return this.selectedNodes.forEach(e=>{e&&e.data&&t.push(e.data)}),t}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(t){const e=new Map;this.selectedNodes.forEach((n,r)=>{n&&t(n)&&e.set(r,n)}),this.selectedNodes=e}updateGroupsFromChildrenSelections(t,e){if(!this.groupSelectsChildren||this.rowModel.getType()!=="clientSide")return!1;const r=this.rowModel.getRootNode();e||(e=new PE(!0,r),e.setInactive());let i=!1;return e.forEachChangedNodeDepthFirst(s=>{if(s!==r){const o=s.calculateSelectedFromChildren();i=s.selectThisNode(o===null?!1:o,void 0,t)||i}}),i}clearOtherNodes(t,e){const n=new Map;let r=0;return this.selectedNodes.forEach(i=>{if(i&&i.id!==t.id){const s=this.selectedNodes.get(i.id);r+=s.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:e}),this.groupSelectsChildren&&i.parent&&n.set(i.parent.id,i.parent)}}),n.forEach(i=>{const s=i.calculateSelectedFromChildren();i.selectThisNode(s===null?!1:s,void 0,e)}),r}onRowSelected(t){const e=t.node;this.groupSelectsChildren&&e.group||(e.isSelected()?this.selectedNodes.set(e.id,e):this.selectedNodes.delete(e.id))}syncInRowNode(t,e){this.syncInOldRowNode(t,e),this.syncInNewRowNode(t)}syncInOldRowNode(t,e){if(J(e)&&t.id!==e.id&&e){const r=e.id;this.selectedNodes.get(r)==t&&this.selectedNodes.set(e.id,e)}}syncInNewRowNode(t){this.selectedNodes.has(t.id)?(t.setSelectedInitialValue(!0),this.selectedNodes.set(t.id,t)):t.setSelectedInitialValue(!1)}reset(t){const e=this.getSelectionCount();if(this.resetNodes(),e){const n={type:x.EVENT_SELECTION_CHANGED,source:t};this.eventService.dispatchEvent(n)}}resetNodes(){var t;(t=this.selectedNodes)==null||t.clear()}getBestCostNodeSelection(){if(this.rowModel.getType()!=="clientSide")return;const e=this.rowModel.getTopLevelNodes();if(e===null)return;const n=[];function r(i){for(let s=0,o=i.length;s<o;s++){const a=i[s];if(a.isSelected())n.push(a);else{const l=a;l.group&&l.children&&r(l.children)}}}return r(e),n}isEmpty(){let t=0;return this.selectedNodes.forEach(e=>{e&&t++}),t===0}deselectAllRowNodes(t){const e=a=>a.selectThisNode(!1,void 0,r),n=this.rowModel.getType()==="clientSide",{source:r,justFiltered:i,justCurrentPage:s}=t;if(s||i){if(!n){console.error("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'");return}this.getNodesToSelect(i,s).forEach(e)}else this.selectedNodes.forEach(a=>{a&&e(a)}),this.reset(r);n&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(r);const o={type:x.EVENT_SELECTION_CHANGED,source:r};this.eventService.dispatchEvent(o)}getSelectedCounts(t,e){let n=0,r=0;const i=s=>{this.groupSelectsChildren&&s.group||(s.isSelected()?n++:s.selectable&&r++)};return this.getNodesToSelect(t,e).forEach(i),{selectedCount:n,notSelectedCount:r}}getSelectAllState(t,e){const{selectedCount:n,notSelectedCount:r}=this.getSelectedCounts(t,e);return n===0&&r===0?!1:n>0&&r>0?null:n>0}hasNodesToSelect(t=!1,e=!1){return this.getNodesToSelect(t,e).filter(n=>n.selectable).length>0}getNodesToSelect(t=!1,e=!1){if(this.rowModel.getType()!=="clientSide")throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`);const n=[];if(e)return this.paginationProxy.forEachNodeOnPage(i=>{if(!i.group){n.push(i);return}if(!i.expanded){const s=o=>{var a;n.push(o),(a=o.childrenAfterFilter)!=null&&a.length&&o.childrenAfterFilter.forEach(s)};s(i);return}this.groupSelectsChildren||n.push(i)}),n;const r=this.rowModel;return t?(r.forEachNodeAfterFilter(i=>{n.push(i)}),n):(r.forEachNode(i=>{n.push(i)}),n)}selectAllRowNodes(t){if(this.rowModel.getType()!=="clientSide")throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`);const{source:e,justFiltered:n,justCurrentPage:r}=t,i=o=>o.selectThisNode(!0,void 0,e);this.getNodesToSelect(n,r).forEach(i),this.rowModel.getType()==="clientSide"&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(e);const s={type:x.EVENT_SELECTION_CHANGED,source:e};this.eventService.dispatchEvent(s)}getSelectionState(){const t=[];return this.selectedNodes.forEach(e=>{e!=null&&e.id&&t.push(e.id)}),t.length?t:null}setSelectionState(t,e){if(!Array.isArray(t))return;const n=new Set(t),r=[];this.rowModel.forEachNode(i=>{n.has(i.id)&&r.push(i)}),this.setNodesSelected({newValue:!0,nodes:r,source:e})}};w([O("rowModel")],Ru.prototype,"rowModel",2);w([O("paginationProxy")],Ru.prototype,"paginationProxy",2);w([te],Ru.prototype,"init",1);Ru=w([ce("selectionService")],Ru);var Id=class{constructor(t){this.viaApi=(e,...n)=>(we(`Since v31, 'columnApi.${e}' is deprecated and moved to 'api.${e}'.`),this.api[e](...n)),this.api=t}sizeColumnsToFit(t){this.viaApi("sizeColumnsToFit",t)}setColumnGroupOpened(t,e){this.viaApi("setColumnGroupOpened",t,e)}getColumnGroup(t,e){return this.viaApi("getColumnGroup",t,e)}getProvidedColumnGroup(t){return this.viaApi("getProvidedColumnGroup",t)}getDisplayNameForColumn(t,e){return this.viaApi("getDisplayNameForColumn",t,e)}getDisplayNameForColumnGroup(t,e){return this.viaApi("getDisplayNameForColumnGroup",t,e)}getColumn(t){return this.viaApi("getColumn",t)}getColumns(){return this.viaApi("getColumns")}applyColumnState(t){return this.viaApi("applyColumnState",t)}getColumnState(){return this.viaApi("getColumnState")}resetColumnState(){this.viaApi("resetColumnState")}getColumnGroupState(){return this.viaApi("getColumnGroupState")}setColumnGroupState(t){this.viaApi("setColumnGroupState",t)}resetColumnGroupState(){this.viaApi("resetColumnGroupState")}isPinning(){return this.viaApi("isPinning")}isPinningLeft(){return this.viaApi("isPinningLeft")}isPinningRight(){return this.viaApi("isPinningRight")}getDisplayedColAfter(t){return this.viaApi("getDisplayedColAfter",t)}getDisplayedColBefore(t){return this.viaApi("getDisplayedColBefore",t)}setColumnVisible(t,e){this.viaApi("setColumnVisible",t,e)}setColumnsVisible(t,e){this.viaApi("setColumnsVisible",t,e)}setColumnPinned(t,e){this.viaApi("setColumnPinned",t,e)}setColumnsPinned(t,e){this.viaApi("setColumnsPinned",t,e)}getAllGridColumns(){return this.viaApi("getAllGridColumns")}getDisplayedLeftColumns(){return this.viaApi("getDisplayedLeftColumns")}getDisplayedCenterColumns(){return this.viaApi("getDisplayedCenterColumns")}getDisplayedRightColumns(){return this.viaApi("getDisplayedRightColumns")}getAllDisplayedColumns(){return this.viaApi("getAllDisplayedColumns")}getAllDisplayedVirtualColumns(){return this.viaApi("getAllDisplayedVirtualColumns")}moveColumn(t,e){this.viaApi("moveColumn",t,e)}moveColumnByIndex(t,e){this.viaApi("moveColumnByIndex",t,e)}moveColumns(t,e){this.viaApi("moveColumns",t,e)}moveRowGroupColumn(t,e){this.viaApi("moveRowGroupColumn",t,e)}setColumnAggFunc(t,e){this.viaApi("setColumnAggFunc",t,e)}setColumnWidth(t,e,n=!0,r){this.viaApi("setColumnWidth",t,e,n,r)}setColumnWidths(t,e=!0,n){this.viaApi("setColumnWidths",t,e,n)}setPivotMode(t){this.viaApi("setPivotMode",t)}isPivotMode(){return this.viaApi("isPivotMode")}getPivotResultColumn(t,e){return this.viaApi("getPivotResultColumn",t,e)}setValueColumns(t){this.viaApi("setValueColumns",t)}getValueColumns(){return this.viaApi("getValueColumns")}removeValueColumn(t){this.viaApi("removeValueColumn",t)}removeValueColumns(t){this.viaApi("removeValueColumns",t)}addValueColumn(t){this.viaApi("addValueColumn",t)}addValueColumns(t){this.viaApi("addValueColumns",t)}setRowGroupColumns(t){this.viaApi("setRowGroupColumns",t)}removeRowGroupColumn(t){this.viaApi("removeRowGroupColumn",t)}removeRowGroupColumns(t){this.viaApi("removeRowGroupColumns",t)}addRowGroupColumn(t){this.viaApi("addRowGroupColumn",t)}addRowGroupColumns(t){this.viaApi("addRowGroupColumns",t)}getRowGroupColumns(){return this.viaApi("getRowGroupColumns")}setPivotColumns(t){this.viaApi("setPivotColumns",t)}removePivotColumn(t){this.viaApi("removePivotColumn",t)}removePivotColumns(t){this.viaApi("removePivotColumns",t)}addPivotColumn(t){this.viaApi("addPivotColumn",t)}addPivotColumns(t){this.viaApi("addPivotColumns",t)}getPivotColumns(){return this.viaApi("getPivotColumns")}getLeftDisplayedColumnGroups(){return this.viaApi("getLeftDisplayedColumnGroups")}getCenterDisplayedColumnGroups(){return this.viaApi("getCenterDisplayedColumnGroups")}getRightDisplayedColumnGroups(){return this.viaApi("getRightDisplayedColumnGroups")}getAllDisplayedColumnGroups(){return this.viaApi("getAllDisplayedColumnGroups")}autoSizeColumn(t,e){return this.viaApi("autoSizeColumn",t,e)}autoSizeColumns(t,e){this.viaApi("autoSizeColumns",t,e)}autoSizeAllColumns(t){this.viaApi("autoSizeAllColumns",t)}setPivotResultColumns(t){this.viaApi("setPivotResultColumns",t)}getPivotResultColumns(){return this.viaApi("getPivotResultColumns")}};w([O("gridApi")],Id.prototype,"api",2);Id=w([ce("columnApi")],Id);var Ya=class extends ee{constructor(){super(...arguments),this.initialised=!1,this.isSsrm=!1}init(){this.isSsrm=this.gos.isRowModelType("serverSide"),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;const t=n=>this.callColumnCellValueChangedHandler(n),e=this.gos.useAsyncEvents();this.eventService.addEventListener(x.EVENT_CELL_VALUE_CHANGED,t,e),this.addDestroyFunc(()=>this.eventService.removeEventListener(x.EVENT_CELL_VALUE_CHANGED,t,e)),this.addManagedPropertyListener("treeData",n=>this.isTreeData=n.currentValue)}getValue(t,e,n=!1,r=!1){if(this.initialised||this.init(),!e)return;const i=t.getColDef(),s=i.field,o=t.getColId(),a=e.data;let l;const u=e.groupData&&e.groupData[o]!==void 0,c=!r&&e.aggData&&e.aggData[o]!==void 0,d=this.isSsrm&&r&&!!t.getColDef().aggFunc,h=this.isSsrm&&e.footer&&e.field&&(t.getColDef().showRowGroup===!0||t.getColDef().showRowGroup===e.field);if(n&&i.filterValueGetter?l=this.executeFilterValueGetter(i.filterValueGetter,a,t,e):this.isTreeData&&c?l=e.aggData[o]:this.isTreeData&&i.valueGetter?l=this.executeValueGetter(i.valueGetter,a,t,e):this.isTreeData&&s&&a?l=ed(a,s,t.isFieldContainsDots()):u?l=e.groupData[o]:c?l=e.aggData[o]:i.valueGetter?l=this.executeValueGetter(i.valueGetter,a,t,e):h?l=ed(a,e.field,t.isFieldContainsDots()):s&&a&&!d&&(l=ed(a,s,t.isFieldContainsDots())),this.cellExpressions&&typeof l=="string"&&l.indexOf("=")===0){const f=l.substring(1);l=this.executeValueGetter(f,a,t,e)}if(l==null){const f=this.getOpenedGroup(e,t);if(f!=null)return f}return l}parseValue(t,e,n,r){const i=t.getColDef(),s=this.gos.addGridCommonParams({node:e,data:e==null?void 0:e.data,oldValue:r,newValue:n,colDef:i,column:t}),o=i.valueParser;return J(o)?typeof o=="function"?o(s):this.expressionService.evaluate(o,s):n}formatValue(t,e,n,r,i=!0){let s=null,o;const a=t.getColDef();if(r?o=r:i&&(o=a.valueFormatter),o){const l=this.gos.addGridCommonParams({value:n,node:e,data:e?e.data:null,colDef:a,column:t});typeof o=="function"?s=o(l):s=this.expressionService.evaluate(o,l)}else if(a.refData)return a.refData[n]||"";return s==null&&Array.isArray(n)&&(s=n.join(", ")),s}getOpenedGroup(t,e){if(!this.gos.get("showOpenedGroup")||!e.getColDef().showRowGroup)return;const r=e.getColDef().showRowGroup;let i=t.parent;for(;i!=null;){if(i.rowGroupColumn&&(r===!0||r===i.rowGroupColumn.getColId()))return i.key;i=i.parent}}setValue(t,e,n,r){const i=this.columnModel.getPrimaryColumn(e);if(!t||!i)return!1;Te(t.data)&&(t.data={});const{field:s,valueSetter:o}=i.getColDef();if(Te(s)&&Te(o))return console.warn("AG Grid: you need either field or valueSetter set on colDef for editing to work"),!1;if(!this.dataTypeService.checkType(i,n))return console.warn("AG Grid: Data type of the new value does not match the cell data type of the column"),!1;const a=this.gos.addGridCommonParams({node:t,data:t.data,oldValue:this.getValue(i,t),newValue:n,colDef:i.getColDef(),column:i});a.newValue=n;let l;if(J(o)?typeof o=="function"?l=o(a):l=this.expressionService.evaluate(o,a):l=this.setValueUsingField(t.data,s,n,i.isFieldContainsDots()),l===void 0&&(l=!0),!l)return!1;t.resetQuickFilterAggregateText(),this.valueCache.onDataChanged(),a.newValue=this.getValue(i,t);const u={type:x.EVENT_CELL_VALUE_CHANGED,event:null,rowIndex:t.rowIndex,rowPinned:t.rowPinned,column:a.column,api:a.api,columnApi:a.columnApi,colDef:a.colDef,context:a.context,data:t.data,node:t,oldValue:a.oldValue,newValue:a.newValue,value:a.newValue,source:r};return this.eventService.dispatchEvent(u),!0}callColumnCellValueChangedHandler(t){const e=t.colDef.onCellValueChanged;typeof e=="function"&&this.getFrameworkOverrides().wrapOutgoing(()=>{e({node:t.node,data:t.data,oldValue:t.oldValue,newValue:t.newValue,colDef:t.colDef,column:t.column,api:t.api,columnApi:t.columnApi,context:t.context})})}setValueUsingField(t,e,n,r){if(!e)return!1;let i=!1;if(!r)i=t[e]===n,i||(t[e]=n);else{const s=e.split(".");let o=t;for(;s.length>0&&o;){const a=s.shift();s.length===0?(i=o[a]===n,i||(o[a]=n)):o=o[a]}}return!i}executeFilterValueGetter(t,e,n,r){const i=this.gos.addGridCommonParams({data:e,node:r,column:n,colDef:n.getColDef(),getValue:this.getValueCallback.bind(this,r)});return typeof t=="function"?t(i):this.expressionService.evaluate(t,i)}executeValueGetter(t,e,n,r){const i=n.getColId(),s=this.valueCache.getValue(r,i);if(s!==void 0)return s;const o=this.gos.addGridCommonParams({data:e,node:r,column:n,colDef:n.getColDef(),getValue:this.getValueCallback.bind(this,r)});let a;return typeof t=="function"?a=t(o):a=this.expressionService.evaluate(t,o),this.valueCache.setValue(r,i,a),a}getValueCallback(t,e){const n=this.columnModel.getPrimaryColumn(e);return n?this.getValue(n,t):null}getKeyForNode(t,e){const n=this.getValue(t,e),r=t.getColDef().keyCreator;let i=n;if(r){const s=this.gos.addGridCommonParams({value:n,colDef:t.getColDef(),column:t,node:e,data:e.data});i=r(s)}return typeof i=="string"||i==null||(i=String(i),i==="[object Object]"&&we("a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")),i}};w([O("expressionService")],Ya.prototype,"expressionService",2);w([O("columnModel")],Ya.prototype,"columnModel",2);w([O("valueCache")],Ya.prototype,"valueCache",2);w([O("dataTypeService")],Ya.prototype,"dataTypeService",2);w([te],Ya.prototype,"init",1);Ya=w([ce("valueService")],Ya);var YC=class extends ee{constructor(){super(...arguments),this.expressionToFunctionCache={}}setBeans(t){this.logger=t.create("ExpressionService")}evaluate(t,e){if(typeof t=="string")return this.evaluateExpression(t,e);console.error("AG Grid: value should be either a string or a function",t)}evaluateExpression(t,e){try{return this.createExpressionFunction(t)(e.value,e.context,e.oldValue,e.newValue,e.value,e.node,e.data,e.colDef,e.rowIndex,e.api,e.columnApi,e.getValue,e.column,e.columnGroup)}catch(n){return console.log("Processing of the expression failed"),console.log("Expression = "+t),console.log("Params =",e),console.log("Exception = "+n),null}}createExpressionFunction(t){if(this.expressionToFunctionCache[t])return this.expressionToFunctionCache[t];const e=this.createFunctionBody(t),n=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, columnApi, getValue, column, columnGroup",e);return this.expressionToFunctionCache[t]=n,n}createFunctionBody(t){return t.indexOf("return")>=0?t:"return "+t+";"}};w([ls(0,Li("loggerFactory"))],YC.prototype,"setBeans",1);YC=w([ce("expressionService")],YC);var QC=class extends ee{setBeans(t){this.logging=t.get("debug")}create(t){return new oD(t,this.isLogging.bind(this))}isLogging(){return this.logging}};w([ls(0,Li("gridOptionsService"))],QC.prototype,"setBeans",1);QC=w([ce("loggerFactory")],QC);var oD=class{constructor(t,e){this.name=t,this.isLoggingFunc=e}isLogging(){return this.isLoggingFunc()}log(t){this.isLoggingFunc()&&console.log("AG Grid."+this.name+": "+t)}},cl=class extends ee{setComp(t,e,n){this.view=t,this.eGridHostDiv=e,this.eGui=n,this.eGui.setAttribute("grid-id",this.context.getGridId()),this.dragAndDropService.addDropTarget({getContainer:()=>this.eGui,isInterestedIn:i=>i===1||i===0,getIconName:()=>Ie.ICON_NOT_ALLOWED}),this.mouseEventService.stampTopLevelGridCompWithGridInstance(e),this.createManagedBean(new wE(this.view)),this.addRtlSupport();const r=this.resizeObserverService.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>r()),this.ctrlsService.register("gridCtrl",this)}isDetailGrid(){var t;const e=this.focusService.findTabbableParent(this.getGui());return((t=e==null?void 0:e.getAttribute("row-id"))==null?void 0:t.startsWith("detail"))||!1}showDropZones(){return nt.__isRegistered("@ag-grid-enterprise/row-grouping",this.context.getGridId())}showSideBar(){return nt.__isRegistered("@ag-grid-enterprise/side-bar",this.context.getGridId())}showStatusBar(){return nt.__isRegistered("@ag-grid-enterprise/status-bar",this.context.getGridId())}showWatermark(){return nt.__isRegistered("@ag-grid-enterprise/core",this.context.getGridId())}onGridSizeChanged(){const t={type:x.EVENT_GRID_SIZE_CHANGED,clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight};this.eventService.dispatchEvent(t)}addRtlSupport(){const t=this.gos.get("enableRtl")?"ag-rtl":"ag-ltr";this.view.setRtlClass(t)}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(t){this.view.setCursor(t?"ew-resize":null)}disableUserSelect(t){this.view.setUserSelect(t?"none":null)}focusNextInnerContainer(t){const e=this.view.getFocusableContainers(),n=this.gos.getActiveDomElement(),i=e.findIndex(s=>s.contains(n))+(t?-1:1);return i<=0||i>=e.length?!1:this.focusService.focusInto(e[i])}focusInnerElement(t){const e=this.view.getFocusableContainers(),n=this.columnModel.getAllDisplayedColumns();if(t){if(e.length>1)return this.focusService.focusInto(Je(e),!0);const r=Je(n);if(this.focusService.focusGridView(r,!0))return!0}if(this.gos.get("headerHeight")===0||this.gos.get("suppressHeaderFocus")){if(this.focusService.focusGridView(n[0]))return!0;for(let r=1;r<e.length;r++)if(this.focusService.focusInto(e[r]))return!0;return!1}return this.focusService.focusFirstHeader()}forceFocusOutOfContainer(t=!1){this.view.forceFocusOutOfContainer(t)}};w([O("focusService")],cl.prototype,"focusService",2);w([O("resizeObserverService")],cl.prototype,"resizeObserverService",2);w([O("columnModel")],cl.prototype,"columnModel",2);w([O("ctrlsService")],cl.prototype,"ctrlsService",2);w([O("mouseEventService")],cl.prototype,"mouseEventService",2);w([O("dragAndDropService")],cl.prototype,"dragAndDropService",2);var Wm=class extends Vm{constructor(e){super(),this.eGridDiv=e}postConstruct(){this.logger=this.loggerFactory.create("GridComp");const e={destroyGridUi:()=>this.destroyBean(this),setRtlClass:r=>this.addCssClass(r),forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:r=>{this.getGui().style.userSelect=r??"",this.getGui().style.webkitUserSelect=r??""},setCursor:r=>{this.getGui().style.cursor=r??""}};this.ctrl=this.createManagedBean(new cl);const n=this.createTemplate();this.setTemplate(n),this.ctrl.setComp(e,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:r=>this.ctrl.focusInnerElement(r),forceFocusOutWhenTabGuardsAreEmpty:!0})}insertGridIntoDom(){const e=this.getGui();this.eGridDiv.appendChild(e),this.addDestroyFunc(()=>{this.eGridDiv.removeChild(e),this.logger.log("Grid removed from DOM")})}updateLayoutClasses(e,n){const r=this.eRootWrapperBody.classList;r.toggle("ag-layout-auto-height",n.autoHeight),r.toggle("ag-layout-normal",n.normal),r.toggle("ag-layout-print",n.print),this.addOrRemoveCssClass("ag-layout-auto-height",n.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",n.normal),this.addOrRemoveCssClass("ag-layout-print",n.print)}createTemplate(){const e=this.ctrl.showDropZones()?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"",n=this.ctrl.showSideBar()?'<ag-side-bar ref="sideBar"></ag-side-bar>':"",r=this.ctrl.showStatusBar()?'<ag-status-bar ref="statusBar"></ag-status-bar>':"",i=this.ctrl.showWatermark()?"<ag-watermark></ag-watermark>":"";return`<div class="ag-root-wrapper" role="presentation">
                ${e}
                <div class="ag-root-wrapper-body" ref="rootWrapperBody" role="presentation">
                    <ag-grid-body ref="gridBody"></ag-grid-body>
                    ${n}
                </div>
                ${r}
                <ag-pagination></ag-pagination>
                ${i}
            </div>`}getFocusableElement(){return this.eRootWrapperBody}getFocusableContainers(){const e=[this.gridBodyComp.getGui()];return this.sideBarComp&&e.push(this.sideBarComp.getGui()),e.filter(n=>Yr(n))}};w([O("loggerFactory")],Wm.prototype,"loggerFactory",2);w([ne("gridBody")],Wm.prototype,"gridBodyComp",2);w([ne("sideBar")],Wm.prototype,"sideBarComp",2);w([ne("rootWrapperBody")],Wm.prototype,"eRootWrapperBody",2);w([te],Wm.prototype,"postConstruct",1);var _u=class extends ee{progressSort(t,e,n){const r=this.getNextSortDirection(t);this.setSortForColumn(t,r,e,n)}setSortForColumn(t,e,n,r){e!=="asc"&&e!=="desc"&&(e=null);const i=this.gos.isColumnsSortingCoupledToGroup();let s=[t];if(i&&t.getColDef().showRowGroup){const l=this.columnModel.getSourceColumnsForGroupColumn(t),u=l==null?void 0:l.filter(c=>c.isSortable());u&&(s=[t,...u])}s.forEach(l=>l.setSort(e,r));const o=(n||this.gos.get("alwaysMultiSort"))&&!this.gos.get("suppressMultiSort"),a=[];if(!o){const l=this.clearSortBarTheseColumns(s,r);a.push(...l)}this.updateSortIndex(t),a.push(...s),this.dispatchSortChangedEvents(r,a)}updateSortIndex(t){const e=this.gos.isColumnsSortingCoupledToGroup(),n=this.columnModel.getGroupDisplayColumnForGroup(t.getId()),r=e&&n||t,i=this.getColumnsWithSortingOrdered();this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(a=>a.setSortIndex(null));const s=i.filter(a=>e&&a.getColDef().showRowGroup?!1:a!==r);(r.getSort()?[...s,r]:s).forEach((a,l)=>{a.setSortIndex(l)})}onSortChanged(t,e){this.dispatchSortChangedEvents(t,e)}isSortActive(){const e=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(n=>!!n.getSort());return e&&e.length>0}dispatchSortChangedEvents(t,e){const n={type:x.EVENT_SORT_CHANGED,source:t};e&&(n.columns=e),this.eventService.dispatchEvent(n)}clearSortBarTheseColumns(t,e){const n=[];return this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(r=>{t.includes(r)||(r.getSort()&&n.push(r),r.setSort(void 0,e))}),n}getNextSortDirection(t){let e;if(t.getColDef().sortingOrder?e=t.getColDef().sortingOrder:this.gos.get("sortingOrder")?e=this.gos.get("sortingOrder"):e=_u.DEFAULT_SORTING_ORDER,!Array.isArray(e)||e.length<=0)return console.warn(`AG Grid: sortingOrder must be an array with at least one element, currently it's ${e}`),null;const n=e.indexOf(t.getSort()),r=n<0,i=n==e.length-1;let s;return r||i?s=e[0]:s=e[n+1],_u.DEFAULT_SORTING_ORDER.indexOf(s)<0?(console.warn("AG Grid: invalid sort type "+s),null):s}getIndexedSortMap(){let t=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(s=>!!s.getSort());if(this.columnModel.isPivotMode()){const s=this.gos.isColumnsSortingCoupledToGroup();t=t.filter(o=>{const a=!!o.getAggFunc(),l=!o.isPrimary(),u=s?this.columnModel.getGroupDisplayColumnForGroup(o.getId()):o.getColDef().showRowGroup;return a||l||u})}const e=this.columnModel.getRowGroupColumns().filter(s=>!!s.getSort()),n={};t.forEach((s,o)=>n[s.getId()]=o),t.sort((s,o)=>{const a=s.getSortIndex(),l=o.getSortIndex();if(a!=null&&l!=null)return a-l;if(a==null&&l==null){const u=n[s.getId()],c=n[o.getId()];return u>c?1:-1}else return l==null?-1:1});const r=this.gos.isColumnsSortingCoupledToGroup()&&!!e.length;r&&(t=[...new Set(t.map(s=>{var o;return(o=this.columnModel.getGroupDisplayColumnForGroup(s.getId()))!=null?o:s}))]);const i=new Map;return t.forEach((s,o)=>i.set(s,o)),r&&e.forEach(s=>{const o=this.columnModel.getGroupDisplayColumnForGroup(s.getId());i.set(s,i.get(o))}),i}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([t,e],[n,r])=>e-r).map(([t])=>t)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(t=>t.getSort()).map(t=>({sort:t.getSort(),colId:t.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(t=>t.getSort()).map(t=>({sort:t.getSort(),column:t}))}canColumnDisplayMixedSort(t){const e=this.gos.isColumnsSortingCoupledToGroup(),n=!!t.getColDef().showRowGroup;return e&&n}getDisplaySortForColumn(t){const e=this.columnModel.getSourceColumnsForGroupColumn(t);if(!this.canColumnDisplayMixedSort(t)||!(e!=null&&e.length))return t.getSort();const r=t.getColDef().field!=null||!!t.getColDef().valueGetter?[t,...e]:e,i=r[0].getSort();return r.every(o=>o.getSort()==i)?i:"mixed"}getDisplaySortIndexForColumn(t){return this.getIndexedSortMap().get(t)}};_u.DEFAULT_SORTING_ORDER=["asc","desc",null];w([O("columnModel")],_u.prototype,"columnModel",2);_u=w([ce("sortController")],_u);var pt=class extends ee{static addKeyboardModeEvents(t){this.instanceCount>0||(t.addEventListener("keydown",pt.toggleKeyboardMode),t.addEventListener("mousedown",pt.toggleKeyboardMode))}static removeKeyboardModeEvents(t){this.instanceCount>0||(t.addEventListener("keydown",pt.toggleKeyboardMode),t.addEventListener("mousedown",pt.toggleKeyboardMode))}static toggleKeyboardMode(t){const e=pt.keyboardModeActive,n=t.type==="keydown";n&&(t.ctrlKey||t.metaKey||t.altKey)||e!==n&&(pt.keyboardModeActive=n)}static unregisterGridCompController(t){pt.removeKeyboardModeEvents(t)}init(){const t=this.clearFocusedCell.bind(this);this.addManagedListener(this.eventService,x.EVENT_COLUMN_PIVOT_MODE_CHANGED,t),this.addManagedListener(this.eventService,x.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverythingChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_COLUMN_GROUP_OPENED,t),this.addManagedListener(this.eventService,x.EVENT_COLUMN_ROW_GROUP_CHANGED,t),this.registerKeyboardFocusEvents(),this.ctrlsService.whenReady(e=>{this.gridCtrl=e.gridCtrl})}registerKeyboardFocusEvents(){const t=this.gos.getDocument();pt.addKeyboardModeEvents(t),pt.instanceCount++,this.addDestroyFunc(()=>{pt.instanceCount--,pt.unregisterGridCompController(t)})}onColumnEverythingChanged(){if(!this.focusedCellPosition)return;const t=this.focusedCellPosition.column,e=this.columnModel.getGridColumn(t.getId());t!==e&&this.clearFocusedCell()}isKeyboardMode(){return pt.keyboardModeActive}getFocusCellToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(this.gos.getActiveDomElement(),iu.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(this.gos.getActiveDomElement(),RE.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition}isDomDataMissingInHierarchy(t,e){let n=t;for(;n;){if(this.gos.getDomData(n,e))return!1;n=n.parentNode}return!0}getFocusedCell(){return this.focusedCellPosition}shouldRestoreFocus(t){return this.isCellRestoreFocused(t)?(setTimeout(()=>{this.restoredFocusedCellPosition=null},0),!0):!1}isCellRestoreFocused(t){return this.restoredFocusedCellPosition==null?!1:this.cellPositionUtils.equals(t,this.restoredFocusedCellPosition)}setRestoreFocusedCell(t){this.getFrameworkOverrides().renderingEngine==="react"&&(this.restoredFocusedCellPosition=t)}getFocusEventParams(){const{rowIndex:t,rowPinned:e,column:n}=this.focusedCellPosition,r={rowIndex:t,rowPinned:e,column:n,isFullWidthCell:!1},i=this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:e});return i&&(r.isFullWidthCell=i.isFullWidth()),r}clearFocusedCell(){if(this.restoredFocusedCellPosition=null,this.focusedCellPosition==null)return;const t=me({type:x.EVENT_CELL_FOCUS_CLEARED},this.getFocusEventParams());this.focusedCellPosition=null,this.eventService.dispatchEvent(t)}setFocusedCell(t){const{column:e,rowIndex:n,rowPinned:r,forceBrowserFocus:i=!1,preventScrollOnBrowserFocus:s=!1}=t,o=this.columnModel.getGridColumn(e);if(!o){this.focusedCellPosition=null;return}this.focusedCellPosition=o?{rowIndex:n,rowPinned:Vs(r),column:o}:null;const a=Dt(me({type:x.EVENT_CELL_FOCUSED},this.getFocusEventParams()),{forceBrowserFocus:i,preventScrollOnBrowserFocus:s,floating:null});this.eventService.dispatchEvent(a)}isCellFocused(t){return this.focusedCellPosition==null?!1:this.cellPositionUtils.equals(t,this.focusedCellPosition)}isRowNodeFocused(t){return this.isRowFocused(t.rowIndex,t.rowPinned)}isHeaderWrapperFocused(t){if(this.focusedHeaderPosition==null)return!1;const e=t.getColumnGroupChild(),n=t.getRowIndex(),r=t.getPinned(),{column:i,headerRowIndex:s}=this.focusedHeaderPosition;return e===i&&n===s&&r==i.getPinned()}clearFocusedHeader(){this.focusedHeaderPosition=null}getFocusedHeader(){return this.focusedHeaderPosition}setFocusedHeader(t,e){this.focusedHeaderPosition={headerRowIndex:t,column:e}}focusHeaderPosition(t){if(this.gos.get("suppressHeaderFocus"))return!1;const{direction:e,fromTab:n,allowUserOverride:r,event:i,fromCell:s,rowWithoutSpanValue:o}=t;let{headerPosition:a}=t;if(s&&this.filterManager.isAdvancedFilterHeaderActive())return this.focusAdvancedFilter(a);if(r){const l=this.getFocusedHeader(),u=this.headerNavigationService.getHeaderRowCount();if(n){const c=this.gos.getCallback("tabToNextHeader");c&&(a=this.getHeaderPositionFromUserFunc({userFunc:c,direction:e,currentPosition:l,headerPosition:a,headerRowCount:u}))}else{const c=this.gos.getCallback("navigateToNextHeader");if(c&&i){const d={key:i.key,previousHeaderPosition:l,nextHeaderPosition:a,headerRowCount:u,event:i};a=c(d)}}}return a?this.focusProvidedHeaderPosition({headerPosition:a,direction:e,event:i,fromCell:s,rowWithoutSpanValue:o}):!1}focusHeaderPositionFromUserFunc(t){if(this.gos.get("suppressHeaderFocus"))return!1;const{userFunc:e,headerPosition:n,direction:r,event:i}=t,s=this.getFocusedHeader(),o=this.headerNavigationService.getHeaderRowCount(),a=this.getHeaderPositionFromUserFunc({userFunc:e,direction:r,currentPosition:s,headerPosition:n,headerRowCount:o});return!!a&&this.focusProvidedHeaderPosition({headerPosition:a,direction:r,event:i})}getHeaderPositionFromUserFunc(t){const{userFunc:e,direction:n,currentPosition:r,headerPosition:i,headerRowCount:s}=t,a=e({backwards:n==="Before",previousHeaderPosition:r,nextHeaderPosition:i,headerRowCount:s});return a===!0||a===null?(a===null&&we("Returning `null` from tabToNextHeader is deprecated. Return `true` to stay on the current header, or `false` to let the browser handle the tab behaviour."),r):a===!1?null:a}focusProvidedHeaderPosition(t){const{headerPosition:e,direction:n,fromCell:r,rowWithoutSpanValue:i,event:s}=t;if(e.headerRowIndex===-1)return this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(e):this.focusGridView(e.column);this.headerNavigationService.scrollToColumn(e.column,n);const a=this.ctrlsService.getHeaderRowContainerCtrl(e.column.getPinned()).focusHeader(e.headerRowIndex,e.column,s);return a&&(i!=null||r)&&this.headerNavigationService.setCurrentHeaderRowWithoutSpan(i??-1),a}focusFirstHeader(){let t=this.columnModel.getAllDisplayedColumns()[0];if(!t)return!1;t.getParent()&&(t=this.columnModel.getColumnGroupAtLevel(t,0));const e=this.headerPositionUtils.getHeaderIndexToFocus(t,0);return this.focusHeaderPosition({headerPosition:e,rowWithoutSpanValue:0})}focusLastHeader(t){const e=this.headerNavigationService.getHeaderRowCount()-1,n=Je(this.columnModel.getAllDisplayedColumns());return this.focusHeaderPosition({headerPosition:{headerRowIndex:e,column:n},rowWithoutSpanValue:-1,event:t})}focusPreviousFromFirstCell(t){return this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(t)}isAnyCellFocused(){return!!this.focusedCellPosition}isRowFocused(t,e){return this.focusedCellPosition==null?!1:this.focusedCellPosition.rowIndex===t&&this.focusedCellPosition.rowPinned===Vs(e)}findFocusableElements(t,e,n=!1){const r=iU;let i=AI;e&&(i+=", "+e),n&&(i+=', [tabindex="-1"]');const s=Array.prototype.slice.apply(t.querySelectorAll(r)).filter(l=>Yr(l)),o=Array.prototype.slice.apply(t.querySelectorAll(i));return o.length?((l,u)=>l.filter(c=>u.indexOf(c)===-1))(s,o):s}focusInto(t,e=!1,n=!1){const r=this.findFocusableElements(t,null,n),i=e?Je(r):r[0];return i?(i.focus({preventScroll:!0}),!0):!1}findFocusableElementBeforeTabGuard(t,e){if(!e)return null;const n=this.findFocusableElements(t),r=n.indexOf(e);if(r===-1)return null;let i=-1;for(let s=r-1;s>=0;s--)if(n[s].classList.contains("ag-tab-guard-top")){i=s;break}return i<=0?null:n[i-1]}findNextFocusableElement(t=this.eGridDiv,e,n){const r=this.findFocusableElements(t,e?':not([tabindex="-1"])':null),i=this.gos.getActiveDomElement();let s;e?s=r.findIndex(a=>a.contains(i)):s=r.indexOf(i);const o=s+(n?-1:1);return o<0||o>=r.length?null:r[o]}isTargetUnderManagedComponent(t,e){if(!e)return!1;const n=t.querySelectorAll(`.${il.FOCUS_MANAGED_CLASS}`);if(!n.length)return!1;for(let r=0;r<n.length;r++)if(n[r].contains(e))return!0;return!1}findTabbableParent(t,e=5){let n=0;for(;t&&WC(t)===null&&++n<=e;)t=t.parentElement;return WC(t)===null?null:t}focusGridView(t,e){var n;if(this.gos.get("suppressCellFocus"))return e?this.gos.get("suppressHeaderFocus")?this.focusNextGridCoreContainer(!0,!0):this.focusLastHeader():this.focusNextGridCoreContainer(!1);const r=e?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(!r)return!1;const{rowIndex:i,rowPinned:s}=r,o=this.getFocusedHeader();return!t&&o&&(t=o.column),i==null||!t?!1:(this.navigationService.ensureCellVisible({rowIndex:i,column:t,rowPinned:s}),this.setFocusedCell({rowIndex:i,column:t,rowPinned:Vs(s),forceBrowserFocus:!0}),(n=this.rangeService)==null||n.setRangeToCell({rowIndex:i,rowPinned:s,column:t}),!0)}focusNextGridCoreContainer(t,e=!1){return!e&&this.gridCtrl.focusNextInnerContainer(t)?!0:((e||!t&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(t),!1)}focusAdvancedFilter(t){var e,n;return this.advancedFilterFocusColumn=t==null?void 0:t.column,(n=(e=this.advancedFilterService)==null?void 0:e.getCtrl().focusHeaderComp())!=null?n:!1}focusNextFromAdvancedFilter(t,e){var n,r;const i=(r=e?void 0:this.advancedFilterFocusColumn)!=null?r:(n=this.columnModel.getAllDisplayedColumns())==null?void 0:n[0];return t?this.focusHeaderPosition({headerPosition:{column:i,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(i)}clearAdvancedFilterColumn(){this.advancedFilterFocusColumn=void 0}};pt.keyboardModeActive=!1;pt.instanceCount=0;w([O("eGridDiv")],pt.prototype,"eGridDiv",2);w([O("columnModel")],pt.prototype,"columnModel",2);w([O("headerNavigationService")],pt.prototype,"headerNavigationService",2);w([O("headerPositionUtils")],pt.prototype,"headerPositionUtils",2);w([O("rowRenderer")],pt.prototype,"rowRenderer",2);w([O("rowPositionUtils")],pt.prototype,"rowPositionUtils",2);w([O("cellPositionUtils")],pt.prototype,"cellPositionUtils",2);w([O("navigationService")],pt.prototype,"navigationService",2);w([O("ctrlsService")],pt.prototype,"ctrlsService",2);w([O("filterManager")],pt.prototype,"filterManager",2);w([ut("rangeService")],pt.prototype,"rangeService",2);w([ut("advancedFilterService")],pt.prototype,"advancedFilterService",2);w([te],pt.prototype,"init",1);pt=w([ce("focusService")],pt);var __=class extends ee{setMouseOver(t){this.selectedColumns=t;const e={type:x.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(e)}clearMouseOver(){this.selectedColumns=null;const t={type:x.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(t)}isHovered(t){return!!this.selectedColumns&&this.selectedColumns.indexOf(t)>=0}};__=w([ce("columnHoverService")],__);var pg=class extends ee{constructor(){super(...arguments),this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.suppressAnimation=!1,this.animationThreadCount=0}postConstruct(){this.ctrlsService.whenReady(t=>this.gridBodyCtrl=t.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(t){this.suppressAnimation=t}start(){this.active||this.gos.get("suppressColumnMoveAnimation")||this.gos.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0)}finish(){this.active&&this.flush(()=>{this.active=!1})}executeNextVMTurn(t){this.active?this.executeNextFuncs.push(t):t()}executeLaterVMTurn(t){this.active?this.executeLaterFuncs.push(t):t()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const t=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===t&&this.gridBodyCtrl.setColumnMovingCss(!1)})}flush(t){if(this.executeNextFuncs.length===0&&this.executeLaterFuncs.length===0){t();return}const e=n=>{for(;n.length;){const r=n.pop();r&&r()}};this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>e(this.executeNextFuncs),0),window.setTimeout(()=>{t(),e(this.executeLaterFuncs)},200)})}};w([O("ctrlsService")],pg.prototype,"ctrlsService",2);w([te],pg.prototype,"postConstruct",1);pg=w([ce("columnAnimationService")],pg);var Dd=class extends ee{postConstruct(){this.ctrlsService.whenReady(t=>{this.centerRowsCtrl=t.center,this.addManagedListener(this.eventService,x.EVENT_BODY_HEIGHT_CHANGED,this.checkPageSize.bind(this)),this.addManagedListener(this.eventService,x.EVENT_SCROLL_VISIBILITY_CHANGED,this.checkPageSize.bind(this)),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||this.centerRowsCtrl==null}onPaginationAutoSizeChanged(){this.notActive()?this.paginationProxy.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;const t=this.centerRowsCtrl.getViewportSizeFeature().getBodyHeight();if(t>0){const e=()=>{const n=this.gos.getRowHeightAsNumber(),r=Math.floor(t/n);this.paginationProxy.setPageSize(r,"autoCalculated")};this.isBodyRendered?yr(()=>e(),50)():(e(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}};w([O("ctrlsService")],Dd.prototype,"ctrlsService",2);w([O("paginationProxy")],Dd.prototype,"paginationProxy",2);w([te],Dd.prototype,"postConstruct",1);Dd=w([ce("paginationAutoPageSizeService")],Dd);var XC=class extends ee{constructor(){super(...arguments),this.cacheVersion=0}init(){this.active=this.gos.get("valueCache"),this.neverExpires=this.gos.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(t,e,n){this.active&&(t.__cacheVersion!==this.cacheVersion&&(t.__cacheVersion=this.cacheVersion,t.__cacheData={}),t.__cacheData[e]=n)}getValue(t,e){if(!(!this.active||t.__cacheVersion!==this.cacheVersion))return t.__cacheData[e]}};w([te],XC.prototype,"init",1);XC=w([ce("valueCache")],XC);var die="paste",Od=class extends ee{init(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel),this.addManagedListener(this.eventService,x.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged.bind(this))}onCellValueChanged(t){t.source!==die&&this.doChangeDetection(t.node,t.column)}doChangeDetection(t,e){if(this.gos.get("suppressChangeDetection"))return;const n=[t];if(this.clientSideRowModel&&!t.isRowPinned()){const r=this.gos.get("aggregateOnlyChangedColumns"),i=new PE(r,this.clientSideRowModel.getRootNode());i.addParentNode(t.parent,[e]),this.clientSideRowModel.doAggregate(i),i.forEachChangedNodeDepthFirst(s=>{n.push(s)})}this.rowRenderer.refreshCells({rowNodes:n})}};w([O("rowModel")],Od.prototype,"rowModel",2);w([O("rowRenderer")],Od.prototype,"rowRenderer",2);w([te],Od.prototype,"init",1);Od=w([ce("changeDetectionService")],Od);var JC=class extends ee{adaptFunction(t,e){const n=this.componentMetadataProvider.retrieve(t);return n&&n.functionAdapter?n.functionAdapter(e):null}adaptCellRendererFunction(t){class e{refresh(r){return!1}getGui(){return this.eGui}init(r){const i=t(r),s=typeof i;if(s==="string"||s==="number"||s==="boolean"){this.eGui=Wr("<span>"+i+"</span>");return}if(i==null){this.eGui=Wr("<span></span>");return}this.eGui=i}}return e}doesImplementIComponent(t){return t?t.prototype&&"getGui"in t.prototype:!1}};w([O("componentMetadataProvider")],JC.prototype,"componentMetadataProvider",2);JC=w([ce("agComponentUtils")],JC);var fg=class extends ee{postConstruct(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","onParamsUpdated","refresh"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached","onParamsUpdated","refresh"]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["refresh"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","getState"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]},menuItem:{mandatoryMethodList:[],optionalMethodList:["setActive","select","setExpanded","configureDefaults"]}}}retrieve(t){return this.componentMetaData[t]}};w([O("agComponentUtils")],fg.prototype,"agComponentUtils",2);w([te],fg.prototype,"postConstruct",1);fg=w([ce("componentMetadataProvider")],fg);var hie=25,IL=10,UT=8,pie=4,zT=4,KT=6,fie=16,DL=14,qT=8,gie={"ag-theme-custom":{headerHeight:25,headerCellMinWidth:24,listItemHeight:pie*5,rowHeight:25,chartMenuPanelWidth:220},"ag-theme-material":{headerHeight:UT*7,headerCellMinWidth:48,listItemHeight:UT*4,rowHeight:UT*6,chartMenuPanelWidth:240},"ag-theme-balham":{headerHeight:zT*8,headerCellMinWidth:24,listItemHeight:zT*6,rowHeight:zT*7,chartMenuPanelWidth:220},"ag-theme-alpine":{headerHeight:KT*8,headerCellMinWidth:36,listItemHeight:KT*4,rowHeight:KT*7,chartMenuPanelWidth:240},"ag-theme-quartz":{headerHeight:DL+qT*4.25,headerCellMinWidth:36,listItemHeight:fie+qT,rowHeight:DL+qT*3.5,chartMenuPanelWidth:260}},OL={headerHeight:["ag-header-row"],headerCellMinWidth:["ag-header-cell"],listItemHeight:["ag-virtual-list-item"],rowHeight:["ag-row"],chartMenuPanelWidth:["ag-chart-docked-container"]},gg=class extends ee{constructor(){super(...arguments),this.calculatedSizes={},this.calculatedTheme=null}postConstruct(){var t;const e=(t=this.getTheme().el)!=null?t:this.eGridDiv;this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.mutationObserver=new MutationObserver(()=>{this.calculatedSizes={},this.calculatedTheme=null,this.calculatedTheme=this.getTheme(),this.fireGridStylesChangedEvent()}),this.mutationObserver.observe(e||this.eGridDiv,{attributes:!0,attributeFilter:["class"]})}fireGridStylesChangedEvent(){const t={type:x.EVENT_GRID_STYLES_CHANGED};this.eventService.dispatchEvent(t)}getSassVariable(t){const{themeFamily:e,el:n}=this.getTheme();if(!e||e.indexOf("ag-theme")!==0)return;this.calculatedSizes||(this.calculatedSizes={}),this.calculatedSizes[e]||(this.calculatedSizes[e]={});const r=this.calculatedSizes[e][t];return r??(this.calculatedSizes[e][t]=this.calculateValueForSassProperty(t,e,n),this.calculatedSizes[e][t])}calculateValueForSassProperty(t,e,n){const r="ag-theme-"+(e.match("material")?"material":e.match("balham")?"balham":e.match("alpine")?"alpine":"custom"),i=gie[r][t],s=this.gos.getDocument();if(n||(n=this.eGridDiv),!OL[t])return i;const o=OL[t],a=s.createElement("div"),l=Array.from(n.classList);a.classList.add(e,...l),a.style.position="absolute";const u=o.reduce((d,h)=>{const f=s.createElement("div");return f.style.position="static",f.classList.add(h),d.appendChild(f),f},a);let c=0;if(s.body){s.body.appendChild(a);const d=t.toLowerCase().indexOf("height")!==-1?"height":"width";c=parseInt(window.getComputedStyle(u)[d],10),s.body.removeChild(a)}return c||i}isThemeDark(){const{theme:t}=this.getTheme();return!!t&&t.indexOf("dark")>=0}chartMenuPanelWidth(){return this.getSassVariable("chartMenuPanelWidth")}getTheme(){if(this.calculatedTheme)return this.calculatedTheme;const t=/\bag-(material|(?:theme-([\w\-]*)))\b/g;let e=this.eGridDiv,n=null,r=[];for(;e;)if(n=t.exec(e.className),!n)e=e.parentElement||void 0;else{const s=e.className.match(t);s&&(r=s);break}if(!n)return{allThemes:r};const i=n[0];return this.calculatedTheme={theme:i,el:e,themeFamily:i.replace(/-dark$/,""),allThemes:r},this.calculatedTheme}getFromTheme(t,e){var n;return(n=this.getSassVariable(e))!=null?n:t}getDefaultRowHeight(){return this.getFromTheme(hie,"rowHeight")}getListItemHeight(){return this.getFromTheme(20,"listItemHeight")}refreshRowHeightVariable(){const t=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),e=this.gos.get("rowHeight");if(e==null||isNaN(e)||!isFinite(e))return t!==null&&this.eGridDiv.style.setProperty("--ag-line-height",null),-1;const n=`${e}px`;return t!=n?(this.eGridDiv.style.setProperty("--ag-line-height",n),e):t!=""?parseFloat(t):-1}getMinColWidth(){const t=this.getFromTheme(null,"headerCellMinWidth");return J(t)?Math.max(t,IL):IL}destroy(){this.calculatedSizes=null,this.mutationObserver&&this.mutationObserver.disconnect(),super.destroy()}};w([O("eGridDiv")],gg.prototype,"eGridDiv",2);w([te],gg.prototype,"postConstruct",1);gg=w([ce("environment")],gg);var Md=class extends ee{constructor(){super(...arguments),this.scrollY=0,this.uiBodyHeight=0}agWire(t){this.logger=t.create("RowContainerHeightService")}postConstruct(){this.addManagedListener(this.eventService,x.EVENT_BODY_HEIGHT_CHANGED,this.updateOffset.bind(this)),this.maxDivHeight=Yj(),this.logger.log("maxDivHeight = "+this.maxDivHeight)}isStretching(){return this.stretching}getDivStretchOffset(){return this.divStretchOffset}updateOffset(){if(!this.stretching)return;const e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,n=this.getUiBodyHeight();(e!==this.scrollY||n!==this.uiBodyHeight)&&(this.scrollY=e,this.uiBodyHeight=n,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const t=this.scrollY/this.maxScrollY,e=t*this.pixelsToShave;this.logger.log(`Div Stretch Offset = ${e} (${this.pixelsToShave} * ${t})`),this.setDivStretchOffset(e)}setUiContainerHeight(t){t!==this.uiContainerHeight&&(this.uiContainerHeight=t,this.eventService.dispatchEvent({type:x.EVENT_ROW_CONTAINER_HEIGHT_CHANGED}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(t){const e=typeof t=="number"?Math.floor(t):null;this.divStretchOffset!==e&&(this.divStretchOffset=e,this.eventService.dispatchEvent({type:x.EVENT_HEIGHT_SCALE_CHANGED}))}setModelHeight(t){this.modelHeight=t,this.stretching=t!=null&&this.maxDivHeight>0&&t>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getUiContainerHeight(){return this.uiContainerHeight}getRealPixelPosition(t){return t-this.divStretchOffset}getUiBodyHeight(){const e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return e.bottom-e.top}getScrollPositionForPixel(t){if(this.pixelsToShave<=0)return t;const e=this.modelHeight-this.getUiBodyHeight(),n=t/e;return this.maxScrollY*n}};w([O("ctrlsService")],Md.prototype,"ctrlsService",2);w([ls(0,Li("loggerFactory"))],Md.prototype,"agWire",1);w([te],Md.prototype,"postConstruct",1);Md=w([ce("rowContainerHeightService")],Md);var Fd=class extends ee{init(){this.addManagedPropertyListener("isRowSelectable",()=>this.updateSelectable())}updateSelectableAfterGrouping(){this.updateSelectable(!0)}updateSelectable(t=!1){const e=!!this.gos.get("rowSelection"),n=this.gos.get("isRowSelectable");if(!e||!n)return;const r=this.gos.get("groupSelectsChildren"),i=this.rowModel.getType()==="clientSide"&&r,s=[],o=a=>{if(t&&!a.group)return;if(i&&a.group){const u=a.childrenAfterGroup.some(c=>c.selectable===!0);a.setRowSelectable(u,!0);return}const l=n?n(a):!0;a.setRowSelectable(l,!0),!l&&a.isSelected()&&s.push(a)};if(i){const a=this.rowModel;new PE(!1,a.getRootNode()).forEachChangedNodeDepthFirst(o,!0,!0)}else this.rowModel.forEachNode(o);s.length&&this.selectionService.setNodesSelected({nodes:s,newValue:!1,source:"selectableChanged"}),i&&this.selectionService instanceof Ru&&this.selectionService.updateGroupsFromChildrenSelections("selectableChanged")}};w([O("rowModel")],Fd.prototype,"rowModel",2);w([O("selectionService")],Fd.prototype,"selectionService",2);w([te],Fd.prototype,"init",1);Fd=w([ce("selectableService")],Fd);var Xr=class extends Ae{constructor(){super(),this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1}postConstruct(){const t=this.gos.get("enableRtl");this.setTemplate(this.getTemplate());const{btFirst:e,btPrevious:n,btNext:r,btLast:i,pageSizeComp:s}=this;this.activateTabIndex([e,n,r,i]),e.insertAdjacentElement("afterbegin",Bt(t?"last":"first",this.gos)),n.insertAdjacentElement("afterbegin",Bt(t?"next":"previous",this.gos)),r.insertAdjacentElement("afterbegin",Bt(t?"previous":"next",this.gos)),i.insertAdjacentElement("afterbegin",Bt(t?"first":"last",this.gos)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.onPaginationChanged()}onPaginationChanged(){const e=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(e),e&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateRowLabels(),this.setCurrentPageLabel(),this.setTotalLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedListener(this.eventService,x.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(t=>{const{el:e,fn:n}=t;this.addManagedListener(e,"click",n),this.addManagedListener(e,"keydown",r=>{(r.key===H.ENTER||r.key===H.SPACE)&&(r.preventDefault(),n())})}),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToFirstPage()}setCurrentPageLabel(){const t=this.paginationProxy.getTotalPages()>0,e=this.paginationProxy.getCurrentPage(),n=t?e+1:0;this.lbCurrent.textContent=this.formatNumber(n)}formatNumber(t){const e=this.gos.getCallback("paginationNumberFormatter");if(e)return e({value:t});const n=this.localeService.getLocaleTextFunc(),r=n("thousandSeparator",","),i=n("decimalSeparator",".");return _I(t,r,i)}getTemplate(){const t=this.localeService.getLocaleTextFunc(),e=t("page","Page"),n=t("to","to"),r=t("of","of"),i=t("firstPage","First Page"),s=t("previousPage","Previous Page"),o=t("nextPage","Next Page"),a=t("lastPage","Last Page"),l=this.getCompId();return`<div class="ag-paging-panel ag-unselectable" id="ag-${l}">
                <ag-page-size-selector ref="pageSizeComp"></ag-page-size-selector>
                <span class="ag-paging-row-summary-panel" role="status">
                    <span id="ag-${l}-first-row" ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${l}-to">${n}</span>
                    <span id="ag-${l}-last-row" ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${l}-of">${r}</span>
                    <span id="ag-${l}-row-count" ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>
                </span>
                <span class="ag-paging-page-summary-panel" role="presentation">
                    <div ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="${i}"></div>
                    <div ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="${s}"></div>
                    <span class="ag-paging-description" role="status">
                        <span id="ag-${l}-start-page">${e}</span>
                        <span id="ag-${l}-start-page-number" ref="lbCurrent" class="ag-paging-number"></span>
                        <span id="ag-${l}-of-page">${r}</span>
                        <span id="ag-${l}-of-page-number" ref="lbTotal" class="ag-paging-number"></span>
                    </span>
                    <div ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="${o}"></div>
                    <div ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="${a}"></div>
                </span>
            </div>`}onBtNext(){this.nextButtonDisabled||this.paginationProxy.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.paginationProxy.goToLastPage()}enableOrDisableButtons(){const t=this.paginationProxy.getCurrentPage(),e=this.paginationProxy.isLastPageFound(),n=this.paginationProxy.getTotalPages();this.previousAndFirstButtonsDisabled=t===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const r=this.isZeroPagesToDisplay(),i=t===n-1;this.nextButtonDisabled=i||r,this.lastButtonDisabled=!e||r||t===n-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(t,e){mI(t,e),t.classList.toggle("ag-disabled",e)}updateRowLabels(){const t=this.paginationProxy.getCurrentPage(),e=this.paginationProxy.getPageSize(),n=this.paginationProxy.isLastPageFound(),r=this.paginationProxy.isLastPageFound()?this.paginationProxy.getMasterRowCount():null;let i,s;if(this.isZeroPagesToDisplay()?i=s=0:(i=e*t+1,s=i+e-1,n&&s>r&&(s=r)),this.lbFirstRowOnPage.textContent=this.formatNumber(i),this.rowNodeBlockLoader.isLoading()){const o=this.localeService.getLocaleTextFunc();this.lbLastRowOnPage.innerHTML=o("pageLastRowUnknown","?")}else this.lbLastRowOnPage.textContent=this.formatNumber(s)}isZeroPagesToDisplay(){const t=this.paginationProxy.isLastPageFound(),e=this.paginationProxy.getTotalPages();return t&&e===0}setTotalLabels(){const t=this.paginationProxy.isLastPageFound(),e=this.paginationProxy.getTotalPages(),n=t?this.paginationProxy.getMasterRowCount():null;if(n===1){const r=this.paginationProxy.getRow(0);if(r&&r.group&&!(r.groupData||r.aggData)){this.setTotalLabelsToZero();return}}if(t)this.lbTotal.textContent=this.formatNumber(e),this.lbRecordCount.textContent=this.formatNumber(n);else{const r=this.localeService.getLocaleTextFunc()("more","more");this.lbTotal.innerHTML=r,this.lbRecordCount.innerHTML=r}}setTotalLabelsToZero(){this.lbFirstRowOnPage.textContent=this.formatNumber(0),this.lbCurrent.textContent=this.formatNumber(0),this.lbLastRowOnPage.textContent=this.formatNumber(0),this.lbTotal.textContent=this.formatNumber(0),this.lbRecordCount.textContent=this.formatNumber(0)}};w([O("paginationProxy")],Xr.prototype,"paginationProxy",2);w([O("rowNodeBlockLoader")],Xr.prototype,"rowNodeBlockLoader",2);w([ne("btFirst")],Xr.prototype,"btFirst",2);w([ne("btPrevious")],Xr.prototype,"btPrevious",2);w([ne("btNext")],Xr.prototype,"btNext",2);w([ne("btLast")],Xr.prototype,"btLast",2);w([ne("lbRecordCount")],Xr.prototype,"lbRecordCount",2);w([ne("lbFirstRowOnPage")],Xr.prototype,"lbFirstRowOnPage",2);w([ne("lbLastRowOnPage")],Xr.prototype,"lbLastRowOnPage",2);w([ne("lbCurrent")],Xr.prototype,"lbCurrent",2);w([ne("lbTotal")],Xr.prototype,"lbTotal",2);w([ne("pageSizeComp")],Xr.prototype,"pageSizeComp",2);w([te],Xr.prototype,"postConstruct",1);var jm=class Mz extends Ae{constructor(){super(Mz.TEMPLATE),this.inProgress=!1,this.destroyRequested=!1}updateLayoutClasses(e,n){const r=this.eOverlayWrapper.classList;r.toggle("ag-layout-auto-height",n.autoHeight),r.toggle("ag-layout-normal",n.normal),r.toggle("ag-layout-print",n.print)}postConstruct(){this.createManagedBean(new wE(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.overlayService.registerOverlayWrapperComp(this)}setWrapperTypeClass(e){const n=this.eOverlayWrapper.classList;this.activeOverlayWrapperCssClass&&n.toggle(this.activeOverlayWrapperCssClass,!1),this.activeOverlayWrapperCssClass=e,n.toggle(e,!0)}showOverlay(e,n,r){this.inProgress||(this.setWrapperTypeClass(n),this.destroyActiveOverlay(),this.inProgress=!0,e&&e.then(i=>{this.inProgress=!1,this.eOverlayWrapper.appendChild(i.getGui()),this.activeOverlay=i,this.updateListenerDestroyFunc=r,this.destroyRequested&&(this.destroyRequested=!1,this.destroyActiveOverlay())}),this.setDisplayed(!0,{skipAriaHidden:!0}))}destroyActiveOverlay(){var e;if(this.inProgress){this.destroyRequested=!0;return}this.activeOverlay&&(this.activeOverlay=this.getContext().destroyBean(this.activeOverlay),(e=this.updateListenerDestroyFunc)==null||e.call(this),en(this.eOverlayWrapper))}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}destroy(){this.destroyActiveOverlay(),super.destroy()}};jm.TEMPLATE=`
        <div class="ag-overlay" role="presentation">
            <div class="ag-overlay-panel" role="presentation">
                <div class="ag-overlay-wrapper" ref="eOverlayWrapper" role="presentation"></div>
            </div>
        </div>`;w([O("overlayService")],jm.prototype,"overlayService",2);w([ne("eOverlayWrapper")],jm.prototype,"eOverlayWrapper",2);w([te],jm.prototype,"postConstruct",1);var mie=jm,Nd=class extends ee{getFirstRow(){let t=0,e;return this.pinnedRowModel.getPinnedTopRowCount()?e="top":this.rowModel.getRowCount()?(e=null,t=this.paginationProxy.getPageFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(e="bottom"),e===void 0?null:{rowIndex:t,rowPinned:e}}getLastRow(){let t,e=null;const n=this.pinnedRowModel.getPinnedBottomRowCount(),r=this.pinnedRowModel.getPinnedTopRowCount();return n?(e="bottom",t=n-1):this.rowModel.getRowCount()?(e=null,t=this.paginationProxy.getPageLastRow()):r&&(e="top",t=r-1),t===void 0?null:{rowIndex:t,rowPinned:e}}getRowNode(t){switch(t.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[t.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[t.rowIndex];default:return this.rowModel.getRow(t.rowIndex)}}sameRow(t,e){return!t&&!e?!0:t&&!e||!t&&e?!1:t.rowIndex===e.rowIndex&&t.rowPinned==e.rowPinned}before(t,e){switch(t.rowPinned){case"top":if(e.rowPinned!=="top")return!0;break;case"bottom":if(e.rowPinned!=="bottom")return!1;break;default:if(J(e.rowPinned))return e.rowPinned!=="top";break}return t.rowIndex<e.rowIndex}};w([O("rowModel")],Nd.prototype,"rowModel",2);w([O("pinnedRowModel")],Nd.prototype,"pinnedRowModel",2);w([O("paginationProxy")],Nd.prototype,"paginationProxy",2);Nd=w([ce("rowPositionUtils")],Nd);var A_=class extends ee{createId(t){const{rowIndex:e,rowPinned:n,column:r}=t;return this.createIdFromValues({rowIndex:e,column:r,rowPinned:n})}createIdFromValues(t){const{rowIndex:e,rowPinned:n,column:r}=t;return`${e}.${n??"null"}.${r.getId()}`}equals(t,e){const n=t.column===e.column,r=t.rowPinned===e.rowPinned,i=t.rowIndex===e.rowIndex;return n&&r&&i}};A_=w([ce("cellPositionUtils")],A_);var Kp=class{constructor(t){this.cellValueChanges=t}},YT=class extends Kp{constructor(t,e,n,r){super(t),this.initialRange=e,this.finalRange=n,this.ranges=r}},Fz=class Nz{constructor(e){this.actionStack=[],this.maxStackSize=e||Nz.DEFAULT_STACK_SIZE,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}};Fz.DEFAULT_STACK_SIZE=10;var ML=Fz,zs=class extends ee{constructor(){super(...arguments),this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=t=>{const e={column:t.column,rowIndex:t.rowIndex,rowPinned:t.rowPinned},n=this.activeCellEdit!==null&&this.cellPositionUtils.equals(this.activeCellEdit,e),r=this.activeRowEdit!==null&&this.rowPositionUtils.sameRow(this.activeRowEdit,e);if(!(n||r||this.isPasting||this.isRangeInAction))return;const{rowPinned:s,rowIndex:o,column:a,oldValue:l,value:u}=t,c={rowPinned:s,rowIndex:o,columnId:a.getColId(),newValue:u,oldValue:l};this.cellValueChanges.push(c)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}init(){if(!this.gos.get("undoRedoCellEditing"))return;const t=this.gos.get("undoRedoCellEditingLimit");t<=0||(this.undoStack=new ML(t),this.redoStack=new ML(t),this.addRowEditingListeners(),this.addCellEditingListeners(),this.addPasteListeners(),this.addFillListeners(),this.addCellKeyListeners(),this.addManagedListener(this.eventService,x.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged),this.addManagedListener(this.eventService,x.EVENT_MODEL_UPDATED,e=>{e.keepUndoRedoStack||this.clearStacks()}),this.addManagedListener(this.eventService,x.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,x.EVENT_NEW_COLUMNS_LOADED,this.clearStacks),this.addManagedListener(this.eventService,x.EVENT_COLUMN_GROUP_OPENED,this.clearStacks),this.addManagedListener(this.eventService,x.EVENT_COLUMN_ROW_GROUP_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,x.EVENT_COLUMN_MOVED,this.clearStacks),this.addManagedListener(this.eventService,x.EVENT_COLUMN_PINNED,this.clearStacks),this.addManagedListener(this.eventService,x.EVENT_COLUMN_VISIBLE,this.clearStacks),this.addManagedListener(this.eventService,x.EVENT_ROW_DRAG_END,this.clearStacks),this.ctrlsService.whenReady(e=>{this.gridBodyCtrl=e.gridBodyCtrl}))}getCurrentUndoStackSize(){return this.undoStack?this.undoStack.getCurrentStackSize():0}getCurrentRedoStackSize(){return this.redoStack?this.redoStack.getCurrentStackSize():0}undo(t){const e={type:x.EVENT_UNDO_STARTED,source:t};this.eventService.dispatchEvent(e);const n=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo"),r={type:x.EVENT_UNDO_ENDED,source:t,operationPerformed:n};this.eventService.dispatchEvent(r)}redo(t){const e={type:x.EVENT_REDO_STARTED,source:t};this.eventService.dispatchEvent(e);const n=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo"),r={type:x.EVENT_REDO_ENDED,source:t,operationPerformed:n};this.eventService.dispatchEvent(r)}undoRedo(t,e,n,r,i){if(!t)return!1;const s=t.pop();return!s||!s.cellValueChanges?!1:(this.processAction(s,o=>o[r],i),s instanceof YT?this.processRange(this.rangeService,s.ranges||[s[n]]):this.processCell(s.cellValueChanges),e.push(s),!0)}processAction(t,e,n){t.cellValueChanges.forEach(r=>{const{rowIndex:i,rowPinned:s,columnId:o}=r,a={rowIndex:i,rowPinned:s},l=this.rowPositionUtils.getRowNode(a);l.displayed&&l.setDataValue(o,e(r),n)})}processRange(t,e){let n;t.removeAllCellRanges(!0),e.forEach((r,i)=>{if(!r)return;const s=r.startRow,o=r.endRow;i===e.length-1&&(n={rowPinned:s.rowPinned,rowIndex:s.rowIndex,columnId:r.startColumn.getColId()},this.setLastFocusedCell(n));const a={rowStartIndex:s.rowIndex,rowStartPinned:s.rowPinned,rowEndIndex:o.rowIndex,rowEndPinned:o.rowPinned,columnStart:r.startColumn,columns:r.columns};t.addCellRange(a)})}processCell(t){const e=t[0],{rowIndex:n,rowPinned:r}=e,i={rowIndex:n,rowPinned:r},s=this.rowPositionUtils.getRowNode(i),o={rowPinned:e.rowPinned,rowIndex:s.rowIndex,columnId:e.columnId};this.setLastFocusedCell(o,this.rangeService)}setLastFocusedCell(t,e){const{rowIndex:n,columnId:r,rowPinned:i}=t,s=this.gridBodyCtrl.getScrollFeature(),o=this.columnModel.getGridColumn(r);if(!o)return;s.ensureIndexVisible(n),s.ensureColumnVisible(o);const a={rowIndex:n,column:o,rowPinned:i};this.focusService.setFocusedCell(Dt(me({},a),{forceBrowserFocus:!0})),e==null||e.setRangeToCell(a)}addRowEditingListeners(){this.addManagedListener(this.eventService,x.EVENT_ROW_EDITING_STARTED,t=>{this.activeRowEdit={rowIndex:t.rowIndex,rowPinned:t.rowPinned}}),this.addManagedListener(this.eventService,x.EVENT_ROW_EDITING_STOPPED,()=>{const t=new Kp(this.cellValueChanges);this.pushActionsToUndoStack(t),this.activeRowEdit=null})}addCellEditingListeners(){this.addManagedListener(this.eventService,x.EVENT_CELL_EDITING_STARTED,t=>{this.activeCellEdit={column:t.column,rowIndex:t.rowIndex,rowPinned:t.rowPinned}}),this.addManagedListener(this.eventService,x.EVENT_CELL_EDITING_STOPPED,t=>{if(this.activeCellEdit=null,t.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const n=new Kp(this.cellValueChanges);this.pushActionsToUndoStack(n)}})}addPasteListeners(){this.addManagedListener(this.eventService,x.EVENT_PASTE_START,()=>{this.isPasting=!0}),this.addManagedListener(this.eventService,x.EVENT_PASTE_END,()=>{const t=new Kp(this.cellValueChanges);this.pushActionsToUndoStack(t),this.isPasting=!1})}addFillListeners(){this.addManagedListener(this.eventService,x.EVENT_FILL_START,()=>{this.isRangeInAction=!0}),this.addManagedListener(this.eventService,x.EVENT_FILL_END,t=>{const e=new YT(this.cellValueChanges,t.initialRange,t.finalRange);this.pushActionsToUndoStack(e),this.isRangeInAction=!1})}addCellKeyListeners(){this.addManagedListener(this.eventService,x.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,()=>{this.isRangeInAction=!0}),this.addManagedListener(this.eventService,x.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,()=>{let t;this.rangeService&&this.gos.get("enableRangeSelection")?t=new YT(this.cellValueChanges,void 0,void 0,[...this.rangeService.getCellRanges()]):t=new Kp(this.cellValueChanges),this.pushActionsToUndoStack(t),this.isRangeInAction=!1})}pushActionsToUndoStack(t){this.undoStack.push(t),this.cellValueChanges=[],this.redoStack.clear()}};w([O("focusService")],zs.prototype,"focusService",2);w([O("ctrlsService")],zs.prototype,"ctrlsService",2);w([O("cellPositionUtils")],zs.prototype,"cellPositionUtils",2);w([O("rowPositionUtils")],zs.prototype,"rowPositionUtils",2);w([O("columnModel")],zs.prototype,"columnModel",2);w([ut("rangeService")],zs.prototype,"rangeService",2);w([te],zs.prototype,"init",1);zs=w([ce("undoRedoService")],zs);var mg=class extends ee{findHeader(t,e){let n,r;if(t.column instanceof Sn?n=this.columnModel.getDisplayedGroupAtDirection(t.column,e):(r=`getDisplayedCol${e}`,n=this.columnModel[r](t.column)),!n)return;let{headerRowIndex:i}=t;if(this.getHeaderRowType(i)!=="filter"){const a=[n];for(;n.getParent();)n=n.getParent(),a.push(n);n=a[a.length-1-i]}const{column:s,headerRowIndex:o}=this.getHeaderIndexToFocus(n,i);return{column:s,headerRowIndex:o}}getHeaderIndexToFocus(t,e){let n;if(t instanceof Sn&&this.isAnyChildSpanningHeaderHeight(t)&&t.isPadding()){const r=t;n=r.getLeafColumns()[0];let i=n;for(;i!==r;)e++,i=i.getParent()}return{column:n||t,headerRowIndex:e}}isAnyChildSpanningHeaderHeight(t){return t?t.getLeafColumns().some(e=>e.isSpanHeaderHeight()):!1}getColumnVisibleParent(t,e){const n=this.getHeaderRowType(e),r=n==="filter",i=n==="column";let s=r?t:t.getParent(),o=e-1,a=o;if(i&&this.isAnyChildSpanningHeaderHeight(t.getParent())){for(;s&&s.isPadding();)s=s.getParent(),o--;a=o,o<0&&(s=t,o=e,a=void 0)}return{column:s,headerRowIndex:o,headerRowIndexWithoutSpan:a}}getColumnVisibleChild(t,e,n="After"){const r=this.getHeaderRowType(e);let i=t,s=e+1,o=s;if(r==="group"){const a=t.getDisplayedLeafColumns(),l=n==="After"?a[0]:Je(a),u=[];let c=l;for(;c.getParent()!==t;)c=c.getParent(),u.push(c);if(i=l,l.isSpanHeaderHeight())for(let d=u.length-1;d>=0;d--){const h=u[d];if(!h.isPadding()){i=h;break}s++}else i=Je(u),i||(i=l)}return{column:i,headerRowIndex:s,headerRowIndexWithoutSpan:o}}getHeaderRowType(t){const e=this.ctrlsService.getHeaderRowContainerCtrl();if(e)return e.getRowType(t)}findColAtEdgeForHeaderRow(t,e){const n=this.columnModel.getAllDisplayedColumns(),r=n[e==="start"?0:n.length-1];if(!r)return;const s=this.ctrlsService.getHeaderRowContainerCtrl(r.getPinned()).getRowType(t);if(s=="group"){const o=this.columnModel.getColumnGroupAtLevel(r,t);return{headerRowIndex:t,column:o}}return{headerRowIndex:s==null?-1:t,column:r}}};w([O("columnModel")],mg.prototype,"columnModel",2);w([O("ctrlsService")],mg.prototype,"ctrlsService",2);mg=w([ce("headerPositionUtils")],mg);var x_=class{buildColumnDefs(t,e,n){const r=[],i={};return t.forEach(s=>{const o=this.createDefFromColumn(s,e,n);let a=!0,l=o,u=s.getOriginalParent(),c=null;for(;u;){let d=null;if(u.isPadding()){u=u.getOriginalParent();continue}const h=i[u.getGroupId()];if(h){h.children.push(l),a=!1;break}if(d=this.createDefFromGroup(u),d&&(d.children=[l],i[d.groupId]=d,l=d,u=u.getOriginalParent()),u!=null&&c===u){a=!1;break}c=u}a&&r.push(l)}),r}createDefFromGroup(t){const e=GC(t.getColGroupDef(),["children"]);return e&&(e.groupId=t.getGroupId()),e}createDefFromColumn(t,e,n){const r=GC(t.getColDef());return r.colId=t.getColId(),r.width=t.getActualWidth(),r.rowGroup=t.isRowGroupActive(),r.rowGroupIndex=t.isRowGroupActive()?e.indexOf(t):null,r.pivot=t.isPivotActive(),r.pivotIndex=t.isPivotActive()?n.indexOf(t):null,r.aggFunc=t.isValueActive()?t.getAggFunc():null,r.hide=t.isVisible()?void 0:!0,r.pinned=t.isPinned()?t.getPinned():null,r.sort=t.getSort()?t.getSort():null,r.sortIndex=t.getSortIndex()!=null?t.getSortIndex():null,r}};x_=w([ce("columnDefFactory")],x_);var vg=class{getInitialRowClasses(t){const e=[];return J(t.extraCssClass)&&e.push(t.extraCssClass),e.push("ag-row"),e.push(t.rowFocused?"ag-row-focus":"ag-row-no-focus"),t.fadeRowIn&&e.push("ag-opacity-zero"),e.push(t.rowIsEven?"ag-row-even":"ag-row-odd"),t.rowNode.isRowPinned()&&e.push("ag-row-pinned"),t.rowNode.isSelected()&&e.push("ag-row-selected"),t.rowNode.footer&&e.push("ag-row-footer"),e.push("ag-row-level-"+t.rowLevel),t.rowNode.stub&&e.push("ag-row-loading"),t.fullWidthRow&&e.push("ag-full-width-row"),t.expandable&&(e.push("ag-row-group"),e.push(t.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),t.rowNode.dragging&&e.push("ag-row-dragging"),u_(e,this.processClassesFromGridOptions(t.rowNode)),u_(e,this.preProcessRowClassRules(t.rowNode)),e.push(t.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),t.firstRowOnPage&&e.push("ag-row-first"),t.lastRowOnPage&&e.push("ag-row-last"),t.fullWidthRow&&(t.pinned==="left"&&e.push("ag-cell-last-left-pinned"),t.pinned==="right"&&e.push("ag-cell-first-right-pinned")),e}processClassesFromGridOptions(t){const e=[],n=s=>{typeof s=="string"?e.push(s):Array.isArray(s)&&s.forEach(o=>e.push(o))},r=this.gos.get("rowClass");if(r){if(typeof r=="function")return console.warn("AG Grid: rowClass should not be a function, please use getRowClass instead"),[];n(r)}const i=this.gos.getCallback("getRowClass");if(i){const s={data:t.data,node:t,rowIndex:t.rowIndex},o=i(s);n(o)}return e}preProcessRowClassRules(t){const e=[];return this.processRowClassRules(t,n=>{e.push(n)},n=>{}),e}processRowClassRules(t,e,n){const r=this.gos.addGridCommonParams({data:t.data,node:t,rowIndex:t.rowIndex});this.stylingService.processClassRules(void 0,this.gos.get("rowClassRules"),r,e,n)}calculateRowLevel(t){return t.group?t.level:t.parent?t.parent.level+1:0}};w([O("stylingService")],vg.prototype,"stylingService",2);w([O("gridOptionsService")],vg.prototype,"gos",2);vg=w([ce("rowCssClassCalculator")],vg);var Ld=class extends ee{init(){this.isAccentedSort=this.gos.get("accentedSort"),this.primaryColumnsSortGroups=this.gos.isColumnsSortingCoupledToGroup(),this.addManagedPropertyListener("accentedSort",t=>this.isAccentedSort=t.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=this.gos.isColumnsSortingCoupledToGroup())}doFullSort(t,e){const n=(i,s)=>({currentPos:s,rowNode:i}),r=t.map(n);return r.sort(this.compareRowNodes.bind(this,e)),r.map(i=>i.rowNode)}compareRowNodes(t,e,n){const r=e.rowNode,i=n.rowNode;for(let s=0,o=t.length;s<o;s++){const a=t[s],l=a.sort==="desc",u=this.getValue(r,a.column),c=this.getValue(i,a.column);let d;const h=this.getComparator(a,r);if(h?d=h(u,c,r,i,l):d=be.defaultComparator(u,c,this.isAccentedSort),!isNaN(d)&&d!==0)return a.sort==="asc"?d:d*-1}return e.currentPos-n.currentPos}getComparator(t,e){const n=t.column,r=n.getColDef().comparator;if(r!=null)return r;if(!n.getColDef().showRowGroup)return;const i=!e.group&&n.getColDef().field;if(!i)return;const s=this.columnModel.getPrimaryColumn(i);if(s)return s.getColDef().comparator}getValue(t,e){var n,r;if(!this.primaryColumnsSortGroups)return this.valueService.getValue(e,t,!1,!1);if(t.rowGroupColumn===e){if(this.gos.isGroupUseEntireRow(this.columnModel.isPivotActive())){const a=(n=t.allLeafChildren)==null?void 0:n[0];return a?this.valueService.getValue(e,a,!1,!1):void 0}const o=this.columnModel.getGroupDisplayColumnForGroup(e.getId());return o?(r=t.groupData)==null?void 0:r[o.getId()]:void 0}if(!(t.group&&e.getColDef().showRowGroup))return this.valueService.getValue(e,t,!1,!1)}};w([O("valueService")],Ld.prototype,"valueService",2);w([O("columnModel")],Ld.prototype,"columnModel",2);w([te],Ld.prototype,"init",1);Ld=w([ce("rowNodeSorter")],Ld);var ou=class extends ee{constructor(){super(...arguments),this.params={},this.ready=!1,this.readyCallbacks=[]}checkReady(){const t=this.params;this.ready=t.gridCtrl!=null&&t.gridBodyCtrl!=null&&t.center!=null&&t.left!=null&&t.right!=null&&t.bottomCenter!=null&&t.bottomLeft!=null&&t.bottomRight!=null&&t.topCenter!=null&&t.topLeft!=null&&t.topRight!=null&&t.stickyTopCenter!=null&&t.stickyTopLeft!=null&&t.stickyTopRight!=null&&t.stickyBottomCenter!=null&&t.stickyBottomLeft!=null&&t.stickyBottomRight!=null&&t.centerHeader!=null&&t.leftHeader!=null&&t.rightHeader!=null&&t.fakeHScrollComp!=null&&t.fakeVScrollComp!=null&&t.gridHeaderCtrl!=null,this.ready&&(this.readyCallbacks.forEach(e=>e(t)),this.readyCallbacks.length=0)}whenReady(t){this.ready?t(this.params):this.readyCallbacks.push(t)}register(t,e){this.params[t]=e,this.checkReady()}registerHeaderContainer(t,e){switch(e){case"left":this.params.leftHeader=t;break;case"right":this.params.rightHeader=t;break;default:this.params.centerHeader=t;break}this.checkReady()}get(t){return this.params[t]}getParams(){return this.params}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){return[this.params.leftHeader,this.params.rightHeader,this.params.centerHeader]}getHeaderRowContainerCtrl(t){switch(t){case"left":return this.params.leftHeader;case"right":return this.params.rightHeader;default:return this.params.centerHeader}}};ou.NAME="ctrlsService";ou=w([ce(ou.NAME)],ou);var P_=class extends ee{constructor(){super(...arguments),this.registry={}}register(t){this.registry[t.controllerName]=t.controllerClass}getInstance(t){const e=this.registry[t];if(e!=null)return new e}};P_=w([ce("ctrlsFactory")],P_);var Xu=class extends Ae{constructor(t,e){super(t),this.direction=e,this.hideTimeout=null}postConstruct(){this.addManagedListener(this.eventService,x.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",bI()||Ho())}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=RI(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const t=["mouseenter","mousedown","touchstart"],e=["mouseleave","touchend"],n=this.getGui();t.forEach(r=>this.addManagedListener(n,r,()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0))),e.forEach(r=>this.addManagedListener(n,r,()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1)))}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame(()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedListener(this.eventService,x.EVENT_BODY_SCROLL,t=>{t.direction===this.direction&&(this.hideTimeout!==null&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=null),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))}),this.addManagedListener(this.eventService,x.EVENT_BODY_SCROLL_END,()=>{this.hideTimeout=window.setTimeout(()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=null},400)})}attemptSettingScrollPosition(t){const e=this.getViewport();cI(()=>Yr(e),()=>this.setScrollPosition(t),100)}getViewport(){return this.eViewport}getContainer(){return this.eContainer}onScrollCallback(t){this.addManagedListener(this.getViewport(),"scroll",t)}};w([ne("eViewport")],Xu.prototype,"eViewport",2);w([ne("eContainer")],Xu.prototype,"eContainer",2);w([O("scrollVisibleService")],Xu.prototype,"scrollVisibleService",2);w([O("ctrlsService")],Xu.prototype,"ctrlsService",2);w([O("animationFrameService")],Xu.prototype,"animationFrameService",2);var Ju=class Lz extends Xu{constructor(){super(Lz.TEMPLATE,"horizontal")}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,e),this.addManagedListener(this.eventService,x.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedPropertyListener("domLayout",e),this.ctrlsService.register("fakeHScrollComp",this),this.createManagedBean(new Rh(n=>this.eContainer.style.width=`${n}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}onPinnedRowDataChanged(){this.refreshCompBottom()}refreshCompBottom(){if(!this.invisibleScrollbar)return;const e=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleService.isVerticalScrollShowing();let n=this.columnModel.getDisplayedColumnsRightWidth();const r=!this.enableRtl&&e,i=this.gos.getScrollbarWidth();r&&(n+=i),Bi(this.eRightSpacer,n),this.eRightSpacer.classList.toggle("ag-scroller-corner",n<=i);let s=this.columnModel.getDisplayedColumnsLeftWidth();this.enableRtl&&e&&(s+=i),Bi(this.eLeftSpacer,s),this.eLeftSpacer.classList.toggle("ag-scroller-corner",s<=i)}setScrollVisible(){const e=this.scrollVisibleService.isHorizontalScrollShowing(),n=this.invisibleScrollbar,r=this.gos.get("suppressHorizontalScroll"),i=e&&this.gos.getScrollbarWidth()||0,o=r?0:i===0&&n?16:i;this.addOrRemoveCssClass("ag-scrollbar-invisible",n),nu(this.getGui(),o),nu(this.eViewport,o),nu(this.eContainer,o),this.setDisplayed(e,{skipAriaHidden:!0})}getScrollPosition(){return sg(this.getViewport(),this.enableRtl)}setScrollPosition(e){Yr(this.getViewport())||this.attemptSettingScrollPosition(e),og(this.getViewport(),e,this.enableRtl)}};Ju.TEMPLATE=`<div class="ag-body-horizontal-scroll" aria-hidden="true">
            <div class="ag-horizontal-left-spacer" ref="eLeftSpacer"></div>
            <div class="ag-body-horizontal-scroll-viewport" ref="eViewport">
                <div class="ag-body-horizontal-scroll-container" ref="eContainer"></div>
            </div>
            <div class="ag-horizontal-right-spacer" ref="eRightSpacer"></div>
        </div>`;w([ne("eLeftSpacer")],Ju.prototype,"eLeftSpacer",2);w([ne("eRightSpacer")],Ju.prototype,"eRightSpacer",2);w([O("columnModel")],Ju.prototype,"columnModel",2);w([O("pinnedRowModel")],Ju.prototype,"pinnedRowModel",2);w([te],Ju.prototype,"postConstruct",1);var vie=Ju,yg=class extends ee{postConstruct(){const t=this.checkContainerWidths.bind(this);this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_CHANGED,t),this.addManagedListener(this.eventService,x.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,t),this.addManagedPropertyListener("domLayout",t)}checkContainerWidths(){const t=this.gos.isDomLayout("print"),e=t?0:this.columnModel.getDisplayedColumnsLeftWidth(),n=t?0:this.columnModel.getDisplayedColumnsRightWidth();e!=this.leftWidth&&(this.leftWidth=e,this.eventService.dispatchEvent({type:x.EVENT_LEFT_PINNED_WIDTH_CHANGED})),n!=this.rightWidth&&(this.rightWidth=n,this.eventService.dispatchEvent({type:x.EVENT_RIGHT_PINNED_WIDTH_CHANGED}))}getPinnedRightWidth(){return this.rightWidth}getPinnedLeftWidth(){return this.leftWidth}};w([O("columnModel")],yg.prototype,"columnModel",2);w([te],yg.prototype,"postConstruct",1);yg=w([ce("pinnedWidthService")],yg);var kd=class extends ee{constructor(){super(...arguments),this.events=[]}postConstruct(){this.rowModel.getType()=="clientSide"&&(this.clientSideRowModel=this.rowModel)}dispatchExpanded(t,e){if(this.clientSideRowModel==null){this.eventService.dispatchEvent(t);return}this.events.push(t);const n=()=>{this.clientSideRowModel&&this.clientSideRowModel.onRowGroupOpened(),this.events.forEach(r=>this.eventService.dispatchEvent(r)),this.events=[]};e?n():(this.dispatchExpandedDebounced==null&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(n)),this.dispatchExpandedDebounced())}};w([O("animationFrameService")],kd.prototype,"animationFrameService",2);w([O("rowModel")],kd.prototype,"rowModel",2);w([te],kd.prototype,"postConstruct",1);kd=w([ce("rowNodeEventThrottle")],kd);var yie={columnsMenuParams:{version:"31.1",message:"Use `columnChooserParams` instead."},suppressMenu:{version:"31.1",message:"Use `suppressHeaderMenuButton` instead."},suppressCellFlash:{version:"31.2",message:"Use `enableCellChangeFlash={false}` in the ColDef"},dndSource:{version:"31.2",message:"This feature has been replaced by `Row Dragging to an External DropZone`."},dndSourceOnRowDrag:{version:"31.2",message:"This feature has been replaced by `Row Dragging to an External DropZone`."}},ta=(t,e)=>{var n;return((n=e.rowModelType)!=null?n:"clientSide")==="clientSide"?{module:"@ag-grid-enterprise/row-grouping"}:null},Cie={enableRowGroup:ta,rowGroup:ta,rowGroupIndex:ta,enablePivot:ta,enableValue:ta,pivot:ta,pivotIndex:ta,aggFunc:ta,cellEditor:t=>t.cellEditor==="agRichSelect"||t.cellEditor==="agRichSelectCellEditor"?{module:"@ag-grid-enterprise/rich-select"}:null,menuTabs:t=>{var e;const n=["columnsMenuTab","generalMenuTab"];return(e=t.menuTabs)!=null&&e.some(r=>n.includes(r))?{module:"@ag-grid-enterprise/menu"}:null},columnsMenuParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},columnChooserParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],dependencies:(t,{rowSelection:e})=>e==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],dependencies:(t,{rowSelection:e})=>e==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],dependencies:(t,{rowSelection:e})=>e==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},children:()=>Nc},wie={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0},Sie=Object.keys(wie),Nc={objectName:"colDef",allProperties:Sie,docsUrl:"column-properties/",deprecations:yie,validations:Cie},Eie={enableChartToolPanelsButton:{version:"29"},functionsPassive:{version:"29.2"},onColumnRowGroupChangeRequest:{version:"29.2"},onColumnPivotChangeRequest:{version:"29.2"},onColumnValueChangeRequest:{version:"29.2"},onColumnAggFuncChangeRequest:{version:"29.2"},serverSideFilterAllLevels:{version:"30",message:"All server-side group levels are now filtered by default. This can be toggled using `serverSideOnlyRefreshFilteredGroups`."},suppressAggAtRootLevel:{version:"30",message:"The root level aggregation is now suppressed by default. This can be toggled using  `alwaysAggregateAtRootLevel`."},excludeHiddenColumnsFromQuickFilter:{version:"30",message:"Hidden columns are now excluded from the Quick Filter by default. This can be toggled using `includeHiddenColumnsInQuickFilter`."},enterMovesDown:{version:"30",renamed:"enterNavigatesVertically"},enterMovesDownAfterEdit:{version:"30",renamed:"enterNavigatesVerticallyAfterEdit"},suppressParentsInRowNodes:{version:"30.2",message:"Using suppressParentsInRowNodes is no longer recommended. To serialize nodes it is now recommended to instead remove the parent node reference before serialization."},advancedFilterModel:{version:"31",message:"Use `initialState.filter.advancedFilterModel` instead."},suppressAsyncEvents:{version:"31",message:"Events should be handled asynchronously."},cellFadeDelay:{version:"31.1",renamed:"cellFadeDuration"},cellFlashDelay:{version:"31.1",renamed:"cellFlashDuration"},suppressServerSideInfiniteScroll:{version:"31.1"},serverSideSortOnServer:{version:"31.1"},serverSideFilterOnServer:{version:"31.1"},enableCellChangeFlash:{version:"31.2",message:"Use `enableCellChangeFlash` in the `ColDef` or `defaultColDef` for all columns."},groupIncludeFooter:{version:"31.3",message:"Use `groupTotalRow` instead."},groupIncludeTotalFooter:{version:"31.3",message:"Use `grandTotalRow` instead."}},bie={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!1,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,suppressChartToolPanelsButton:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressAsyncEvents:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,enableCellChangeFlash:!1,cellFlashDelay:500,cellFlashDuration:500,cellFadeDelay:1e3,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupIncludeTotalFooter:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,suppressServerSideInfiniteScroll:!1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSideSortOnServer:!1,serverSideFilterOnServer:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,suppressGroupMaintainValueType:!1,functionsPassive:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1},Tie={sideBar:{module:"@ag-grid-enterprise/side-bar"},statusBar:{module:"@ag-grid-enterprise/status-bar"},enableCharts:{module:"@ag-grid-enterprise/charts"},getMainMenuItems:{module:"@ag-grid-enterprise/menu"},getContextMenuItems:{module:"@ag-grid-enterprise/menu"},allowContextMenuWithControlKey:{module:"@ag-grid-enterprise/menu"},enableAdvancedFilter:{module:"@ag-grid-enterprise/advanced-filter"},treeData:{supportedRowModels:["clientSide","serverSide"],module:"@ag-grid-enterprise/row-grouping",dependencies:t=>{var e;const n=(e=t.rowModelType)!=null?e:"clientSide";switch(n){case"clientSide":const r=`treeData requires 'getDataPath' in the ${n} row model.`;return t.getDataPath?null:r;case"serverSide":const i=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${n} row model.`;return t.isServerSideGroup&&t.getServerSideGroupKey?null:i}return null}},masterDetail:{module:"@ag-grid-enterprise/master-detail"},enableRangeSelection:{module:"@ag-grid-enterprise/range-selection"},enableRangeHandle:{dependencies:{enableRangeSelection:[!0]}},enableFillHandle:{dependencies:{enableRangeSelection:[!0]}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupIncludeFooter:{supportedRowModels:["clientSide","serverSide"],dependencies:t=>{var e;switch((e=t.rowModelType)!=null?e:"clientSide"){case"clientSide":return null;case"serverSide":return t.suppressServerSideInfiniteScroll?"groupIncludeFooter is not supported alongside suppressServerSideInfiniteScroll":null}return null}},groupIncludeTotalFooter:{supportedRowModels:["clientSide"]},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveLowestSingleChildren:[void 0,!1]}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveSingleChildren:[void 0,!1]}},groupSelectsChildren:{dependencies:{rowSelection:["multiple"]}},suppressParentsInRowNodes:{dependencies:{groupSelectsChildren:[void 0,!1]}},viewportDatasource:{supportedRowModels:["viewport"],module:"@ag-grid-enterprise/viewport-row-model"},serverSideDatasource:{supportedRowModels:["serverSide"],module:"@ag-grid-enterprise/server-side-row-model"},cacheBlockSize:{supportedRowModels:["serverSide","infinite"]},datasource:{supportedRowModels:["infinite"],module:"@ag-grid-community/infinite-row-model"},rowData:{supportedRowModels:["clientSide"],module:"@ag-grid-community/client-side-row-model"},columnDefs:()=>Nc,defaultColDef:()=>Nc,defaultColGroupDef:()=>Nc,autoGroupColumnDef:()=>Nc},Rie={objectName:"gridOptions",allProperties:[...ng.ALL_PROPERTIES,...$C.EVENT_CALLBACKS],propertyExceptions:["api","columnApi"],docsUrl:"grid-options/",deprecations:Eie,validations:Tie},rt=class{constructor(){this.destroyed=!1,this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new ys,this.globalEventHandlerFactory=t=>(e,n)=>{if(this.destroyed)return;const r=Oy.has(e);if(r&&!t||!r&&t)return;const i=$C.getCallbackForEvent(e),s=this.gridOptions[i];typeof s=="function"&&this.frameworkOverrides.wrapOutgoing(()=>{s(n)})}}get context(){return this.gridOptions.context}init(){this.columnApi=new Id(this.api);const t=!this.get("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),t),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propertyEventService.setFrameworkOverrides(this.frameworkOverrides),this.getScrollbarWidth()}destroy(){this.destroyed=!0,this.columnApi=void 0}get(t){var e;return(e=this.gridOptions[t])!=null?e:bie[t]}getCallback(t){return this.mergeGridCommonParams(this.gridOptions[t])}exists(t){return J(this.gridOptions[t])}mergeGridCommonParams(t){return t&&(n=>{const r=n;return r.api=this.api,r.columnApi=this.columnApi,r.context=this.context,t(r)})}static toBoolean(t){return typeof t=="boolean"?t:typeof t=="string"?t.toUpperCase()==="TRUE"||t=="":!1}static toNumber(t){if(typeof t=="number")return t;if(typeof t=="string"){const e=parseInt(t);return isNaN(e)?void 0:e}}static toConstrainedNum(t,e){return n=>{const r=rt.toNumber(n);if(!(r==null||r<t||r>e))return r}}static getCoercedValue(t,e){const n=rt.PROPERTY_COERCIONS.get(t);return n?n(e):e}static getCoercedGridOptions(t){const e={};return Object.entries(t).forEach(([n,r])=>{const i=rt.getCoercedValue(n,r);e[n]=i}),e}updateGridOptions({options:t,force:e,source:n="api"}){const r={id:rt.changeSetId++,properties:[]},i=[];Object.entries(t).forEach(([s,o])=>{n==="api"&&Zte[s]&&we(`${s} is an initial property and cannot be updated.`);const a=rt.getCoercedValue(s,o),l=e||typeof a=="object"&&n==="api",u=this.gridOptions[s];if(l||u!==a){this.gridOptions[s]=a;const c={type:s,currentValue:a,previousValue:u,changeSet:r,source:n};i.push(c)}}),this.validationService.processGridOptions(this.gridOptions),r.properties=i.map(s=>s.type),i.forEach(s=>{this.gridOptions.debug&&console.log(`AG Grid: Updated property ${s.type} from `,s.previousValue," to  ",s.currentValue),this.propertyEventService.dispatchEvent(s)})}addEventListener(t,e){this.propertyEventService.addEventListener(t,e)}removeEventListener(t,e){this.propertyEventService.removeEventListener(t,e)}getScrollbarWidth(){if(this.scrollbarWidth==null){const e=typeof this.gridOptions.scrollbarWidth=="number"&&this.gridOptions.scrollbarWidth>=0?this.gridOptions.scrollbarWidth:Jj();e!=null&&(this.scrollbarWidth=e,this.eventService.dispatchEvent({type:x.EVENT_SCROLLBAR_WIDTH_CHANGED}))}return this.scrollbarWidth}isRowModelType(t){return this.gridOptions.rowModelType===t||t==="clientSide"&&Te(this.gridOptions.rowModelType)}isDomLayout(t){var e;return((e=this.gridOptions.domLayout)!=null?e:"normal")===t}isRowSelection(){return this.gridOptions.rowSelection==="single"||this.gridOptions.rowSelection==="multiple"}useAsyncEvents(){return!this.get("suppressAsyncEvents")}isGetRowHeightFunction(){return typeof this.gridOptions.getRowHeight=="function"}getRowHeightForNode(t,e=!1,n){if(n==null&&(n=this.environment.getDefaultRowHeight()),this.isGetRowHeightFunction()){if(e)return{height:n,estimated:!0};const i={node:t,data:t.data},s=this.getCallback("getRowHeight")(i);if(this.isNumeric(s))return s===0&&we("The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead."),{height:Math.max(1,s),estimated:!1}}return t.detail&&this.get("masterDetail")?this.getMasterDetailRowHeight():{height:this.gridOptions.rowHeight&&this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:n,estimated:!1}}getMasterDetailRowHeight(){return this.get("detailRowAutoHeight")?{height:1,estimated:!1}:this.isNumeric(this.gridOptions.detailRowHeight)?{height:this.gridOptions.detailRowHeight,estimated:!1}:{height:300,estimated:!1}}getRowHeightAsNumber(){if(!this.gridOptions.rowHeight||Te(this.gridOptions.rowHeight))return this.environment.getDefaultRowHeight();const t=this.environment.refreshRowHeightVariable();return t!==-1?t:(console.warn("AG Grid row height must be a number if not using standard row model"),this.environment.getDefaultRowHeight())}isNumeric(t){return!isNaN(t)&&typeof t=="number"&&isFinite(t)}getDomDataKey(){return this.domDataKey}getDomData(t,e){const n=t[this.getDomDataKey()];return n?n[e]:void 0}setDomData(t,e,n){const r=this.getDomDataKey();let i=t[r];Te(i)&&(i={},t[r]=i),i[e]=n}getDocument(){let t=null;return this.gridOptions.getDocument&&J(this.gridOptions.getDocument)?t=this.gridOptions.getDocument():this.eGridDiv&&(t=this.eGridDiv.ownerDocument),t&&J(t)?t:document}getWindow(){return this.getDocument().defaultView||window}getRootNode(){return this.eGridDiv.getRootNode()}getActiveDomElement(){return this.getRootNode().activeElement}getAsyncTransactionWaitMillis(){return J(this.gridOptions.asyncTransactionWaitMillis)?this.gridOptions.asyncTransactionWaitMillis:50}isAnimateRows(){return this.get("ensureDomOrder")?!1:this.get("animateRows")}isGroupRowsSticky(){return!(this.get("paginateChildRows")||this.get("groupHideOpenParents")||this.isDomLayout("print"))}isColumnsSortingCoupledToGroup(){const t=this.gridOptions.autoGroupColumnDef;return!(t!=null&&t.comparator)&&!this.get("treeData")}getGroupAggFiltering(){const t=this.gridOptions.groupAggFiltering;if(typeof t=="function")return this.getCallback("groupAggFiltering");if(t===!0)return()=>!0}getGrandTotalRow(){const t=this.gridOptions.grandTotalRow;if(t)return t;if(this.gridOptions.groupIncludeTotalFooter)return"bottom"}getGroupTotalRowCallback(){const t=this.get("groupTotalRow");if(typeof t=="function")return this.getCallback("groupTotalRow");if(t)return()=>t;const e=this.get("groupIncludeFooter");if(typeof e=="function"){const n=this.getCallback("groupIncludeFooter");return r=>n(r)?"bottom":void 0}return()=>e?"bottom":void 0}isGroupMultiAutoColumn(){return this.gridOptions.groupDisplayType?this.gridOptions.groupDisplayType==="multipleColumns":this.get("groupHideOpenParents")}isGroupUseEntireRow(t){return t?!1:this.gridOptions.groupDisplayType==="groupRows"}getGridCommonParams(){return{api:this.api,columnApi:this.columnApi,context:this.context}}addGridCommonParams(t){const e=t;return e.api=this.api,e.columnApi=this.columnApi,e.context=this.context,e}};rt.PROPERTY_COERCIONS=new Map([...ng.BOOLEAN_PROPERTIES.map(t=>[t,rt.toBoolean]),...ng.NUMBER_PROPERTIES.map(t=>[t,rt.toNumber]),["groupAggFiltering",t=>typeof t=="function"?t:rt.toBoolean(t)],["pageSize",rt.toConstrainedNum(1,Number.MAX_VALUE)],["autoSizePadding",rt.toConstrainedNum(0,Number.MAX_VALUE)],["keepDetailRowsCount",rt.toConstrainedNum(1,Number.MAX_VALUE)],["rowBuffer",rt.toConstrainedNum(0,Number.MAX_VALUE)],["infiniteInitialRowCount",rt.toConstrainedNum(1,Number.MAX_VALUE)],["cacheOverflowSize",rt.toConstrainedNum(1,Number.MAX_VALUE)],["cacheBlockSize",rt.toConstrainedNum(1,Number.MAX_VALUE)],["serverSideInitialRowCount",rt.toConstrainedNum(1,Number.MAX_VALUE)],["viewportRowModelPageSize",rt.toConstrainedNum(1,Number.MAX_VALUE)],["viewportRowModelBufferSize",rt.toConstrainedNum(0,Number.MAX_VALUE)]]);rt.changeSetId=0;w([O("gridOptions")],rt.prototype,"gridOptions",2);w([O("eventService")],rt.prototype,"eventService",2);w([O("environment")],rt.prototype,"environment",2);w([O("frameworkOverrides")],rt.prototype,"frameworkOverrides",2);w([O("eGridDiv")],rt.prototype,"eGridDiv",2);w([O("validationService")],rt.prototype,"validationService",2);w([O("gridApi")],rt.prototype,"api",2);w([te],rt.prototype,"init",1);w([Pr],rt.prototype,"destroy",1);rt=w([ce("gridOptionsService")],rt);var I_=class extends ee{getLocaleTextFunc(){const t=this.gos.getCallback("getLocaleText");if(t)return(n,r,i)=>t({key:n,defaultValue:r,variableValues:i});const e=this.gos.get("localeText");return(n,r,i)=>{let s=e&&e[n];if(s&&i&&i.length){let o=0;for(;!(o>=i.length||s.indexOf("${variable}")===-1);)s=s.replace("${variable}",i[o++])}return s??r}}};I_=w([ce("localeService")],I_);var aD=class kz extends Xu{constructor(){super(kz.TEMPLATE,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new EE(this.eContainer)),this.ctrlsService.register("fakeVScrollComp",this),this.addManagedListener(this.eventService,x.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onRowContainerHeightChanged.bind(this))}setScrollVisible(){const e=this.scrollVisibleService.isVerticalScrollShowing(),n=this.invisibleScrollbar,r=e&&this.gos.getScrollbarWidth()||0,i=r===0&&n?16:r;this.addOrRemoveCssClass("ag-scrollbar-invisible",n),Bi(this.getGui(),i),Bi(this.eViewport,i),Bi(this.eContainer,i),this.setDisplayed(e,{skipAriaHidden:!0})}onRowContainerHeightChanged(){const{ctrlsService:e}=this,r=e.getGridBodyCtrl().getBodyViewportElement(),i=this.getScrollPosition(),s=r.scrollTop;i!=s&&this.setScrollPosition(s,!0)}getScrollPosition(){return this.getViewport().scrollTop}setScrollPosition(e,n){!n&&!Yr(this.getViewport())&&this.attemptSettingScrollPosition(e),this.getViewport().scrollTop=e}};aD.TEMPLATE=`<div class="ag-body-vertical-scroll" aria-hidden="true">
            <div class="ag-body-vertical-scroll-viewport" ref="eViewport">
                <div class="ag-body-vertical-scroll-container" ref="eContainer"></div>
            </div>
        </div>`;w([te],aD.prototype,"postConstruct",1);var _ie=aD,FL={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},NL=["january","february","march","april","may","june","july","august","september","october","november","december"],Au=class extends ee{constructor(){super(...arguments),this.dataTypeDefinitions={},this.isWaitingForRowData=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}init(){this.groupHideOpenParents=this.gos.get("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",()=>{this.groupHideOpenParents=this.gos.get("groupHideOpenParents")}),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",t=>{this.processDataTypeDefinitions(),this.columnModel.recreateColumnDefs(Fc(t.source))})}processDataTypeDefinitions(){var t;const e=this.getDefaultDataTypes();this.dataTypeDefinitions={},Object.entries(e).forEach(([r,i])=>{this.dataTypeDefinitions[r]=Dt(me({},i),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(i)})});const n=(t=this.gos.get("dataTypeDefinitions"))!=null?t:{};this.dataTypeMatchers={},Object.entries(n).forEach(([r,i])=>{const s=this.processDataTypeDefinition(i,n,[r],e);s&&(this.dataTypeDefinitions[r]=s,i.dataTypeMatcher&&(this.dataTypeMatchers[r]=i.dataTypeMatcher))}),this.checkObjectValueHandlers(e),["dateString","text","number","boolean","date"].forEach(r=>{const i=this.dataTypeMatchers[r];i&&delete this.dataTypeMatchers[r],this.dataTypeMatchers[r]=i??e[r].dataTypeMatcher})}mergeDataTypeDefinitions(t,e){const n=me(me({},t),e);return t.columnTypes&&e.columnTypes&&e.appendColumnTypes&&(n.columnTypes=[...this.convertColumnTypes(t.columnTypes),...this.convertColumnTypes(e.columnTypes)]),n}processDataTypeDefinition(t,e,n,r){let i;const s=t.extendsDataType;if(t.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),t.extendsDataType===t.baseDataType){let o=r[s];const a=e[s];if(o&&a&&(o=a),!this.validateDataTypeDefinition(t,o,s))return;i=this.mergeDataTypeDefinitions(o,t)}else{if(n.includes(s)){we('Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.');return}const o=e[s];if(!this.validateDataTypeDefinition(t,o,s))return;const a=this.processDataTypeDefinition(o,e,[...n,s],r);if(!a)return;i=this.mergeDataTypeDefinitions(a,t)}return Dt(me({},i),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(i)})}validateDataTypeDefinition(t,e,n){return e?e.baseDataType!==t.baseDataType?(we('The "baseDataType" property of a data type definition must match that of its parent.'),!1):!0:(we(`The data type definition ${n} does not exist.`),!1)}createGroupSafeValueFormatter(t){if(t.valueFormatter)return e=>{var n,r;if((n=e.node)!=null&&n.group){const i=e.column.getAggFunc();if(i){if(i==="first"||i==="last")return t.valueFormatter(e);if(t.baseDataType==="number"&&i!=="count"){if(typeof e.value=="number")return t.valueFormatter(e);if(typeof e.value=="object"){if(!e.value)return;if("toNumber"in e.value)return t.valueFormatter(Dt(me({},e),{value:e.value.toNumber()}));if("value"in e.value)return t.valueFormatter(Dt(me({},e),{value:e.value.value}))}}}if(!this.gos.get("suppressGroupMaintainValueType"))return}else if(this.groupHideOpenParents&&e.column.isRowGroupActive()){if(typeof e.value!="string"||(r=t.dataTypeMatcher)!=null&&r.call(t,e.value))return t.valueFormatter(e);if(!this.gos.get("suppressGroupMaintainValueType"))return}return t.valueFormatter(e)}}updateColDefAndGetDataTypeDefinitionColumnType(t,e,n){let{cellDataType:r}=e;const{field:i}=e;if(r===void 0&&(r=t.cellDataType),(r==null||r===!0)&&(r=this.canInferCellDataType(t,e)?this.inferCellDataType(i,n):!1),!r){t.cellDataType=!1;return}const s=this.dataTypeDefinitions[r];if(!s){we(`Missing data type definition - "${r}"`);return}return t.cellDataType=r,s.groupSafeValueFormatter&&(t.valueFormatter=s.groupSafeValueFormatter),s.valueParser&&(t.valueParser=s.valueParser),s.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(t,s,n),s.columnTypes}updateColDefAndGetColumnType(t,e,n){var r,i;const s=this.updateColDefAndGetDataTypeDefinitionColumnType(t,e,n),o=(i=(r=e.type)!=null?r:s)!=null?i:t.type;return t.type=o,o?this.convertColumnTypes(o):void 0}addColumnListeners(t){if(!this.isWaitingForRowData)return;const e=this.columnStateUpdatesPendingInference[t.getColId()];if(!e)return;const n=r=>{e.add(r.key)};t.addEventListener(ft.EVENT_STATE_UPDATED,n),this.columnStateUpdateListenerDestroyFuncs.push(()=>t.removeEventListener(ft.EVENT_STATE_UPDATED,n))}canInferCellDataType(t,e){var n;if(this.rowModel.getType()!=="clientSide")return!1;const r={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(e,r))return!1;const i=e.type===null?t.type:e.type;if(i){const s=(n=this.gos.get("columnTypes"))!=null?n:{};if(this.convertColumnTypes(i).some(a=>{const l=s[a.trim()];return l&&this.doColDefPropsPreventInference(l,r)}))return!1}return!this.doColDefPropsPreventInference(t,r)}doColDefPropsPreventInference(t,e){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([n,r])=>this.doesColDefPropPreventInference(t,e,n,r))}doesColDefPropPreventInference(t,e,n,r){if(!e[n])return!1;const i=t[n];return i===null?(e[n]=!1,!1):r===void 0?!!i:i===r}inferCellDataType(t,e){var n;if(!t)return;let r;const i=this.getInitialData();if(i){const o=t.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");r=ed(i,t,o)}else this.initWaitForRowData(e);if(r==null)return;const[s]=(n=Object.entries(this.dataTypeMatchers).find(([o,a])=>a(r)))!=null?n:["object"];return s}getInitialData(){const t=this.gos.get("rowData");if(t!=null&&t.length)return t[0];if(this.initialData)return this.initialData;{const e=this.rowModel.getRootNode().allLeafChildren;if(e!=null&&e.length)return e[0].data}return null}initWaitForRowData(t){if(this.columnStateUpdatesPendingInference[t]=new Set,this.isWaitingForRowData)return;this.isWaitingForRowData=!0;const e=this.isColumnTypeOverrideInDataTypeDefinitions;e&&this.columnModel.queueResizeOperations();const n=this.addManagedListener(this.eventService,x.EVENT_ROW_DATA_UPDATE_STARTED,r=>{const{firstRowData:i}=r;if(!i)return;n==null||n(),this.isWaitingForRowData=!1,this.processColumnsPendingInference(i,e),this.columnStateUpdatesPendingInference={},e&&this.columnModel.processResizeOperations();const s={type:x.EVENT_DATA_TYPES_INFERRED};this.eventService.dispatchEvent(s)})}isPendingInference(){return this.isWaitingForRowData}processColumnsPendingInference(t,e){this.initialData=t;const n=[];this.columnStateUpdateListenerDestroyFuncs.forEach(s=>s()),this.columnStateUpdateListenerDestroyFuncs=[];const r={},i={};Object.entries(this.columnStateUpdatesPendingInference).forEach(([s,o])=>{const a=this.columnModel.getGridColumn(s);if(!a)return;const l=a.getColDef();if(!this.columnModel.resetColumnDefIntoColumn(a,"cellDataTypeInferred"))return;const u=a.getColDef();if(e&&u.type&&u.type!==l.type){const c=this.getUpdatedColumnState(a,o);c.rowGroup&&c.rowGroupIndex==null&&(r[s]=c),c.pivot&&c.pivotIndex==null&&(i[s]=c),n.push(c)}}),e&&n.push(...this.columnModel.generateColumnStateForRowGroupAndPivotIndexes(r,i)),n.length&&this.columnModel.applyColumnState({state:n},"cellDataTypeInferred"),this.initialData=null}getUpdatedColumnState(t,e){const n=this.columnModel.getColumnStateFromColDef(t);return e.forEach(r=>{delete n[r],r==="rowGroup"?delete n.rowGroupIndex:r==="pivot"&&delete n.pivotIndex}),n}checkObjectValueHandlers(t){const e=this.dataTypeDefinitions.object,n=t.object;this.hasObjectValueParser=e.valueParser!==n.valueParser,this.hasObjectValueFormatter=e.valueFormatter!==n.valueFormatter}convertColumnTypes(t){let e=[];return t instanceof Array?t.some(r=>typeof r!="string")?console.warn("if colDef.type is supplied an array it should be of type 'string[]'"):e=t:typeof t=="string"?e=t.split(","):console.warn("colDef.type should be of type 'string' | 'string[]'"),e}getDateStringTypeDefinition(t){var e;return t?(e=this.getDataTypeDefinition(t))!=null?e:this.dataTypeDefinitions.dateString:this.dataTypeDefinitions.dateString}getDateParserFunction(t){return this.getDateStringTypeDefinition(t).dateParser}getDateFormatterFunction(t){return this.getDateStringTypeDefinition(t).dateFormatter}getDataTypeDefinition(t){const e=t.getColDef();if(e.cellDataType)return this.dataTypeDefinitions[e.cellDataType]}getBaseDataType(t){var e;return(e=this.getDataTypeDefinition(t))==null?void 0:e.baseDataType}checkType(t,e){var n;if(e==null)return!0;const r=(n=this.getDataTypeDefinition(t))==null?void 0:n.dataTypeMatcher;return r?r(e):!0}validateColDef(t){t.cellDataType==="object"&&(t.valueFormatter===this.dataTypeDefinitions.object.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&we('Cell data type is "object" but no value formatter has been provided. Please either provide an object data type definition with a value formatter, or set "colDef.valueFormatter"'),t.editable&&t.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&we('Cell data type is "object" but no value parser has been provided. Please either provide an object data type definition with a value parser, or set "colDef.valueParser"'))}setColDefPropertiesForBaseDataType(t,e,n){const r=(a,l,u)=>{let c=a.getColDef().valueFormatter;return c===e.groupSafeValueFormatter&&(c=e.valueFormatter),this.valueService.formatValue(a,l,u,c)},i=nt.__isRegistered("@ag-grid-enterprise/set-filter",this.context.getGridId()),s=this.localeService.getLocaleTextFunc(),o=a=>{const{filterParams:l}=t;t.filterParams=typeof l=="object"?me(me({},l),a):a};switch(e.baseDataType){case"number":{t.cellEditor="agNumberCellEditor",i&&o({comparator:(a,l)=>{const u=a==null?0:parseInt(a),c=l==null?0:parseInt(l);return u===c?0:u>c?1:-1}});break}case"boolean":{t.cellEditor="agCheckboxCellEditor",t.cellRenderer="agCheckboxCellRenderer",t.suppressKeyboardEvent=a=>!!a.colDef.editable&&a.event.key===H.SPACE,o(i?{valueFormatter:a=>J(a.value)?s(String(a.value),a.value?"True":"False"):s("blanks","(Blanks)")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(a,l)=>l,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(a,l)=>l===!1,numberOfInputs:0}]});break}case"date":{t.cellEditor="agDateCellEditor",t.keyCreator=a=>r(a.column,a.node,a.value),i&&o({valueFormatter:a=>{const l=r(a.column,a.node,a.value);return J(l)?l:s("blanks","(Blanks)")},treeList:!0,treeListFormatter:(a,l)=>{if(l===1&&a!=null){const u=NL[Number(a)-1];return s(u,FL[u])}return a??s("blanks","(Blanks)")}});break}case"dateString":{t.cellEditor="agDateStringCellEditor",t.keyCreator=l=>r(l.column,l.node,l.value);const a=e.dateParser;o(i?{valueFormatter:l=>{const u=r(l.column,l.node,l.value);return J(u)?u:s("blanks","(Blanks)")},treeList:!0,treeListPathGetter:l=>{const u=a(l??void 0);return u?[String(u.getFullYear()),String(u.getMonth()+1),String(u.getDate())]:null},treeListFormatter:(l,u)=>{if(u===1&&l!=null){const c=NL[Number(l)-1];return s(c,FL[c])}return l??s("blanks","(Blanks)")}}:{comparator:(l,u)=>{const c=a(u);return u==null||c<l?-1:c>l?1:0}});break}case"object":{t.cellEditorParams={useFormatter:!0},t.comparator=(a,l)=>{const u=this.columnModel.getPrimaryColumn(n),c=u==null?void 0:u.getColDef();if(!u||!c)return 0;const d=a==null?"":r(u,null,a),h=l==null?"":r(u,null,l);return d===h?0:d>h?1:-1},t.keyCreator=a=>r(a.column,a.node,a.value),i?o({valueFormatter:a=>{const l=r(a.column,a.node,a.value);return J(l)?l:s("blanks","(Blanks)")}}):t.filterValueGetter=a=>r(a.column,a.node,this.valueService.getValue(a.column,a.node));break}}}getDefaultDataTypes(){const t=n=>!!n.match("^\\d{4}-\\d{2}-\\d{2}$"),e=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:n=>{var r,i;return((i=(r=n.newValue)==null?void 0:r.trim)==null?void 0:i.call(r))===""?null:Number(n.newValue)},valueFormatter:n=>n.value==null?"":typeof n.value!="number"||isNaN(n.value)?e("invalidNumber","Invalid Number"):String(n.value),dataTypeMatcher:n=>typeof n=="number"},text:{baseDataType:"text",valueParser:n=>n.newValue===""?null:Jf(n.newValue),dataTypeMatcher:n=>typeof n=="string"},boolean:{baseDataType:"boolean",valueParser:n=>{var r,i;return n.newValue==null?n.newValue:((i=(r=n.newValue)==null?void 0:r.trim)==null?void 0:i.call(r))===""?null:String(n.newValue).toLowerCase()==="true"},valueFormatter:n=>n.value==null?"":String(n.value),dataTypeMatcher:n=>typeof n=="boolean"},date:{baseDataType:"date",valueParser:n=>$r(n.newValue==null?null:String(n.newValue)),valueFormatter:n=>{var r;return n.value==null?"":!(n.value instanceof Date)||isNaN(n.value.getTime())?e("invalidDate","Invalid Date"):(r=Hi(n.value,!1))!=null?r:""},dataTypeMatcher:n=>n instanceof Date},dateString:{baseDataType:"dateString",dateParser:n=>{var r;return(r=$r(n))!=null?r:void 0},dateFormatter:n=>{var r;return(r=Hi(n??null,!1))!=null?r:void 0},valueParser:n=>t(String(n.newValue))?n.newValue:null,valueFormatter:n=>t(String(n.value))?n.value:"",dataTypeMatcher:n=>typeof n=="string"&&t(n)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:n=>{var r;return(r=Jf(n.value))!=null?r:""}}}}};w([O("rowModel")],Au.prototype,"rowModel",2);w([O("columnModel")],Au.prototype,"columnModel",2);w([O("valueService")],Au.prototype,"valueService",2);w([te],Au.prototype,"init",1);Au=w([ce("dataTypeService")],Au);var xu=class extends ee{constructor(){super(...arguments),this.waitingForColumns=!1}postConstruct(){this.addManagedPropertyListener("columnDefs",t=>this.setColumnDefs(t))}start(){this.ctrlsService.whenReady(()=>{const t=this.gos.get("columnDefs");t?this.setColumnsAndData(t):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(t){this.columnModel.setColumnDefs(t??[],"gridInitializing"),this.rowModel.start()}gridReady(){this.dispatchGridReadyEvent();const t=nt.__isRegistered("@ag-grid-enterprise/core",this.context.getGridId());new oD("AG Grid",()=>this.gos.get("debug")).log(`initialised successfully, enterprise = ${t}`)}dispatchGridReadyEvent(){const t={type:x.EVENT_GRID_READY};this.eventService.dispatchEvent(t)}setColumnDefs(t){const e=this.gos.get("columnDefs");if(e){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(e);return}this.columnModel.setColumnDefs(e,Fc(t.source))}}};w([O("ctrlsService")],xu.prototype,"ctrlsService",2);w([O("columnModel")],xu.prototype,"columnModel",2);w([O("rowModel")],xu.prototype,"rowModel",2);w([te],xu.prototype,"postConstruct",1);xu=w([ce("syncService")],xu);var Pu=class extends ee{constructor(){super(...arguments),this.manuallyDisplayed=!1}postConstruct(){this.addManagedListener(this.eventService,x.EVENT_ROW_DATA_UPDATED,()=>this.onRowDataUpdated()),this.addManagedListener(this.eventService,x.EVENT_NEW_COLUMNS_LOADED,()=>this.onNewColumnsLoaded())}registerOverlayWrapperComp(t){this.overlayWrapperComp=t,(!this.gos.get("columnDefs")||this.gos.isRowModelType("clientSide")&&!this.gos.get("rowData"))&&this.showLoadingOverlay()}showLoadingOverlay(){if(this.gos.get("suppressLoadingOverlay"))return;const t={},e=this.userComponentFactory.getLoadingOverlayCompDetails(t);this.showOverlay(e,"ag-overlay-loading-wrapper","loadingOverlayComponentParams")}showNoRowsOverlay(){if(this.gos.get("suppressNoRowsOverlay"))return;const t={},e=this.userComponentFactory.getNoRowsOverlayCompDetails(t);this.showOverlay(e,"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams")}showOverlay(t,e,n){const r=t.newAgStackInstance(),i=this.addManagedPropertyListener(n,({currentValue:s})=>{r.then(o=>{o.refresh&&o.refresh(this.gos.addGridCommonParams(me({},s??{})))})});this.manuallyDisplayed=this.columnModel.isReady()&&!this.paginationProxy.isEmpty(),this.overlayWrapperComp.showOverlay(r,e,i)}hideOverlay(){this.manuallyDisplayed=!1,this.overlayWrapperComp.hideOverlay()}showOrHideOverlay(){const t=this.paginationProxy.isEmpty(),e=this.gos.get("suppressNoRowsOverlay");t&&!e?this.showNoRowsOverlay():this.hideOverlay()}onRowDataUpdated(){this.showOrHideOverlay()}onNewColumnsLoaded(){this.columnModel.isReady()&&!this.paginationProxy.isEmpty()&&!this.manuallyDisplayed&&this.hideOverlay()}};w([O("userComponentFactory")],Pu.prototype,"userComponentFactory",2);w([O("paginationProxy")],Pu.prototype,"paginationProxy",2);w([O("columnModel")],Pu.prototype,"columnModel",2);w([te],Pu.prototype,"postConstruct",1);Pu=w([ce("overlayService")],Pu);var Tr=class extends ee{constructor(){super(...arguments),this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=yr(()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=yr(()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),0),this.onRowSelectedDebounced=yr(()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}postConstruct(){var t;this.isClientSideRowModel=this.rowModel.getType()==="clientSide",this.cachedState=(t=this.gos.get("initialState"))!=null?t:{},this.ctrlsService.whenReady(()=>this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnGridReady()));const e=this.addManagedListener(this.eventService,x.EVENT_NEW_COLUMNS_LOADED,({source:i})=>{i==="gridInitializing"&&(e==null||e(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnColumnsInitialised()))}),n=this.addManagedListener(this.eventService,x.EVENT_ROW_COUNT_READY,()=>{n==null||n(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnRowCountReady())}),r=this.addManagedListener(this.eventService,x.EVENT_FIRST_DATA_RENDERED,()=>{r==null||r(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnFirstDataRendered())})}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setupStateOnGridReady(){this.updateCachedState("sideBar",this.getSideBarState()),this.addManagedListener(this.eventService,x.EVENT_TOOL_PANEL_VISIBLE_CHANGED,()=>this.updateCachedState("sideBar",this.getSideBarState())),this.addManagedListener(this.eventService,x.EVENT_SIDE_BAR_UPDATED,()=>this.updateCachedState("sideBar",this.getSideBarState()))}setupStateOnColumnsInitialised(){var t;const e=(t=this.gos.get("initialState"))!=null?t:{};this.setColumnState(e),this.setColumnGroupState(e),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState()),this.addManagedListener(this.eventService,x.EVENT_COLUMN_VALUE_CHANGED,()=>this.updateColumnState(["aggregation"])),this.addManagedListener(this.eventService,x.EVENT_COLUMN_MOVED,()=>this.updateColumnState(["columnOrder"])),this.addManagedListener(this.eventService,x.EVENT_COLUMN_PINNED,()=>this.updateColumnState(["columnPinning"])),this.addManagedListener(this.eventService,x.EVENT_COLUMN_RESIZED,()=>this.updateColumnState(["columnSizing"])),this.addManagedListener(this.eventService,x.EVENT_COLUMN_VISIBLE,()=>this.updateColumnState(["columnVisibility"])),this.addManagedListener(this.eventService,x.EVENT_COLUMN_PIVOT_CHANGED,()=>this.updateColumnState(["pivot"])),this.addManagedListener(this.eventService,x.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>this.updateColumnState(["pivot"])),this.addManagedListener(this.eventService,x.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.updateColumnState(["rowGroup"])),this.addManagedListener(this.eventService,x.EVENT_SORT_CHANGED,()=>this.updateColumnState(["sort"])),this.addManagedListener(this.eventService,x.EVENT_NEW_COLUMNS_LOADED,()=>this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"])),this.addManagedListener(this.eventService,x.EVENT_COLUMN_GROUP_OPENED,()=>this.updateCachedState("columnGroup",this.getColumnGroupState()))}setupStateOnRowCountReady(){var t;const{filter:e,rowGroupExpansion:n,rowSelection:r,pagination:i}=(t=this.gos.get("initialState"))!=null?t:{},s=this.gos.get("advancedFilterModel");(e||s)&&this.setFilterState(e,s),n&&this.setRowGroupExpansionState(n),r&&this.setRowSelectionState(r),i&&this.setPaginationState(i),this.updateCachedState("filter",this.getFilterState()),this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowSelection",this.getRowSelectionState()),this.updateCachedState("pagination",this.getPaginationState()),this.addManagedListener(this.eventService,x.EVENT_FILTER_CHANGED,()=>this.updateCachedState("filter",this.getFilterState())),this.addManagedListener(this.eventService,x.EVENT_ROW_GROUP_OPENED,()=>this.onRowGroupOpenedDebounced()),this.addManagedListener(this.eventService,x.EVENT_EXPAND_COLLAPSE_ALL,()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState())),this.addManagedListener(this.eventService,x.EVENT_SELECTION_CHANGED,()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()}),this.addManagedListener(this.eventService,x.EVENT_PAGINATION_CHANGED,o=>{(o.newPage||o.newPageSize)&&this.updateCachedState("pagination",this.getPaginationState())})}setupStateOnFirstDataRendered(){var t;const{scroll:e,rangeSelection:n,focusedCell:r,columnOrder:i}=(t=this.gos.get("initialState"))!=null?t:{};r&&this.setFocusedCellState(r),n&&this.setRangeSelectionState(n),e&&this.setScrollState(e),this.setColumnPivotState(!!(i!=null&&i.orderedColIds)),this.updateCachedState("sideBar",this.getSideBarState()),this.updateCachedState("focusedCell",this.getFocusedCellState()),this.updateCachedState("rangeSelection",this.getRangeSelectionState()),this.updateCachedState("scroll",this.getScrollState()),this.addManagedListener(this.eventService,x.EVENT_CELL_FOCUSED,()=>this.updateCachedState("focusedCell",this.getFocusedCellState())),this.addManagedListener(this.eventService,x.EVENT_RANGE_SELECTION_CHANGED,s=>{s.finished&&this.updateCachedState("rangeSelection",this.getRangeSelectionState())}),this.addManagedListener(this.eventService,x.EVENT_BODY_SCROLL_END,()=>this.updateCachedState("scroll",this.getScrollState()))}getColumnState(){const t=this.columnModel.isPivotMode(),e=[],n=[],r=[],i=[],s=[],o=[],a=[],l=[],u=[],c=this.columnModel.getColumnState();for(let d=0;d<c.length;d++){const{colId:h,sort:f,sortIndex:g,rowGroup:m,rowGroupIndex:v,aggFunc:C,pivot:y,pivotIndex:S,pinned:_,hide:E,width:R,flex:b}=c[d];u.push(h),f&&(e[g??0]={colId:h,sort:f}),m&&(n[v??0]=h),typeof C=="string"&&r.push({colId:h,aggFunc:C}),y&&(i[S??0]=h),_&&(_==="right"?o:s).push(h),E&&a.push(h),(b||R)&&l.push({colId:h,flex:b??void 0,width:R})}return{sort:e.length?{sortModel:e}:void 0,rowGroup:n.length?{groupColIds:n}:void 0,aggregation:r.length?{aggregationModel:r}:void 0,pivot:i.length||t?{pivotMode:t,pivotColIds:i}:void 0,columnPinning:s.length||o.length?{leftColIds:s,rightColIds:o}:void 0,columnVisibility:a.length?{hiddenColIds:a}:void 0,columnSizing:l.length?{columnSizingModel:l}:void 0,columnOrder:u.length?{orderedColIds:u}:void 0}}setColumnState(t){const{sort:e,rowGroup:n,aggregation:r,pivot:i,columnPinning:s,columnVisibility:o,columnSizing:a,columnOrder:l}=t,u={},c=g=>{let m=u[g];return m||(m={colId:g},u[g]=m,m)};e&&e.sortModel.forEach(({colId:g,sort:m},v)=>{const C=c(g);C.sort=m,C.sortIndex=v}),n&&n.groupColIds.forEach((g,m)=>{const v=c(g);v.rowGroup=!0,v.rowGroupIndex=m}),r&&r.aggregationModel.forEach(({colId:g,aggFunc:m})=>{c(g).aggFunc=m}),i&&(i.pivotColIds.forEach((g,m)=>{const v=c(g);v.pivot=!0,v.pivotIndex=m}),this.gos.updateGridOptions({options:{pivotMode:i.pivotMode},source:"gridInitializing"})),s&&(s.leftColIds.forEach(g=>{c(g).pinned="left"}),s.rightColIds.forEach(g=>{c(g).pinned="right"})),o&&o.hiddenColIds.forEach(g=>{c(g).hide=!0}),a&&a.columnSizingModel.forEach(({colId:g,flex:m,width:v})=>{const C=c(g);C.flex=m??null,C.width=v});const d=l==null?void 0:l.orderedColIds,h=!!(d!=null&&d.length),f=h?d.map(g=>c(g)):Object.values(u);if(f.length){this.columnStates=f;const g={sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null};this.columnModel.applyColumnState({state:f,applyOrder:h,defaultState:g},"gridInitializing")}}setColumnPivotState(t){const e=this.columnStates;this.columnStates=void 0;const n=this.columnGroupStates;if(this.columnGroupStates=void 0,!!this.columnModel.isSecondaryColumnsPresent()){if(e){let r=[];for(const i of e)this.columnModel.getSecondaryColumn(i.colId)&&r.push(i);this.columnModel.applyColumnState({state:r,applyOrder:t},"gridInitializing")}n&&this.columnModel.setColumnGroupState(n,"gridInitializing")}}getColumnGroupState(){const t=this.columnModel.getColumnGroupState(),e=[];return t.forEach(({groupId:n,open:r})=>{r&&e.push(n)}),e.length?{openColumnGroupIds:e}:void 0}setColumnGroupState(t){var e;if(!t.hasOwnProperty("columnGroup"))return;const n=new Set((e=t.columnGroup)==null?void 0:e.openColumnGroupIds),i=this.columnModel.getColumnGroupState().map(({groupId:s})=>{const o=n.has(s);return o&&n.delete(s),{groupId:s,open:o}});n.forEach(s=>{i.push({groupId:s,open:!0})}),i.length&&(this.columnGroupStates=i),this.columnModel.setColumnGroupState(i,"gridInitializing")}getFilterState(){var t;let e=this.filterManager.getFilterModel();e&&Object.keys(e).length===0&&(e=void 0);const n=(t=this.filterManager.getAdvancedFilterModel())!=null?t:void 0;return e||n?{filterModel:e,advancedFilterModel:n}:void 0}setFilterState(t,e){const{filterModel:n,advancedFilterModel:r}=t??{advancedFilterModel:e};n&&this.filterManager.setFilterModel(n,"columnFilter"),r&&this.filterManager.setAdvancedFilterModel(r)}getRangeSelectionState(){var t;const e=(t=this.rangeService)==null?void 0:t.getCellRanges().map(n=>{const{id:r,type:i,startRow:s,endRow:o,columns:a,startColumn:l}=n;return{id:r,type:i,startRow:s,endRow:o,colIds:a.map(u=>u.getColId()),startColId:l.getColId()}});return e!=null&&e.length?{cellRanges:e}:void 0}setRangeSelectionState(t){if(!this.gos.get("enableRangeSelection")||!this.rangeService)return;const e=[];t.cellRanges.forEach(n=>{const r=[];if(n.colIds.forEach(s=>{const o=this.columnModel.getGridColumn(s);o&&r.push(o)}),!r.length)return;let i=this.columnModel.getGridColumn(n.startColId);if(!i){const s=this.columnModel.getAllDisplayedColumns(),o=new Set(r);i=s.find(a=>o.has(a))}e.push(Dt(me({},n),{columns:r,startColumn:i}))}),this.rangeService.setCellRanges(e)}getScrollState(){var t,e,n;if(!this.isClientSideRowModel)return;const r=(t=this.ctrlsService.getGridBodyCtrl())==null?void 0:t.getScrollFeature(),{left:i}=(e=r==null?void 0:r.getHScrollPosition())!=null?e:{left:0},{top:s}=(n=r==null?void 0:r.getVScrollPosition())!=null?n:{top:0};return s||i?{top:s,left:i}:void 0}setScrollState(t){var e;if(!this.isClientSideRowModel)return;const{top:n,left:r}=t;(e=this.ctrlsService.getGridBodyCtrl())==null||e.getScrollFeature().setScrollPosition(n,r)}getSideBarState(){var t,e;return(e=(t=this.sideBarService)==null?void 0:t.getSideBarComp())==null?void 0:e.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;const t=this.focusService.getFocusedCell();if(t){const{column:e,rowIndex:n,rowPinned:r}=t;return{colId:e.getColId(),rowIndex:n,rowPinned:r}}}setFocusedCellState(t){if(!this.isClientSideRowModel)return;const{colId:e,rowIndex:n,rowPinned:r}=t;this.focusService.setFocusedCell({column:this.columnModel.getGridColumn(e),rowIndex:n,rowPinned:r,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){const t=this.paginationProxy.getCurrentPage(),e=this.gos.get("paginationAutoPageSize")?void 0:this.paginationProxy.getPageSize();if(!(!t&&!e))return{page:t,pageSize:e}}setPaginationState(t){t.pageSize&&!this.gos.get("paginationAutoPageSize")&&this.paginationProxy.setPageSize(t.pageSize,"initialState"),typeof t.page=="number"&&this.paginationProxy.setPage(t.page)}getRowSelectionState(){var t;const e=this.selectionService.getSelectionState();return!e||!Array.isArray(e)&&(e.selectAll===!1||e.selectAllChildren===!1)&&!((t=e==null?void 0:e.toggledNodes)!=null&&t.length)?void 0:e}setRowSelectionState(t){this.selectionService.setSelectionState(t,"gridInitializing")}getRowGroupExpansionState(){const t=this.expansionService.getExpandedRows();return t.length?{expandedRowGroupIds:t}:void 0}setRowGroupExpansionState(t){this.expansionService.expandRows(t.expandedRowGroupIds)}updateColumnState(t){const e=this.getColumnState();let n=!1;Object.entries(e).forEach(([r,i])=>{i_(i,this.cachedState[r])||(n=!0)}),this.cachedState=me(me({},this.cachedState),e),n&&this.dispatchStateUpdateEvent(t)}updateCachedState(t,e){const n=this.cachedState[t];this.setCachedStateValue(t,e),i_(e,n)||this.dispatchStateUpdateEvent([t])}setCachedStateValue(t,e){this.cachedState=Dt(me({},this.cachedState),{[t]:e})}refreshStaleState(){this.staleStateKeys.forEach(t=>{switch(t){case"rowSelection":this.setCachedStateValue(t,this.getRowSelectionState());break}}),this.staleStateKeys.clear()}dispatchStateUpdateEvent(t){this.suppressEvents||(t.forEach(e=>this.queuedUpdateSources.add(e)),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){const t=Array.from(this.queuedUpdateSources);this.queuedUpdateSources.clear();const e={type:x.EVENT_STATE_UPDATED,sources:t,state:this.cachedState};this.eventService.dispatchEvent(e)}suppressEventsAndDispatchInitEvent(t){this.suppressEvents=!0,this.columnAnimationService.setSuppressAnimation(!0),t(),setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.columnAnimationService.setSuppressAnimation(!1),this.dispatchStateUpdateEvent(["gridInitializing"]))})}};w([O("filterManager")],Tr.prototype,"filterManager",2);w([O("ctrlsService")],Tr.prototype,"ctrlsService",2);w([O("focusService")],Tr.prototype,"focusService",2);w([O("columnModel")],Tr.prototype,"columnModel",2);w([O("paginationProxy")],Tr.prototype,"paginationProxy",2);w([O("rowModel")],Tr.prototype,"rowModel",2);w([O("selectionService")],Tr.prototype,"selectionService",2);w([O("expansionService")],Tr.prototype,"expansionService",2);w([O("columnAnimationService")],Tr.prototype,"columnAnimationService",2);w([ut("sideBarService")],Tr.prototype,"sideBarService",2);w([ut("rangeService")],Tr.prototype,"rangeService",2);w([te],Tr.prototype,"postConstruct",1);Tr=w([ce("stateService")],Tr);var Cg=class extends ee{init(){this.processGridOptions(this.gridOptions)}processGridOptions(t){this.processOptions(t,Rie)}processColumnDefs(t){this.processOptions(t,Nc)}processOptions(t,e){const{validations:n,deprecations:r,allProperties:i,propertyExceptions:s,objectName:o,docsUrl:a}=e;i&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(t,[...s??[],...Object.keys(r)],i,o,a);const l=new Set;Object.keys(t).forEach(c=>{var d;const h=r[c];if(h)if("renamed"in h){const{renamed:S,version:_}=h;l.add(`As of v${_}, ${String(c)} is deprecated. Please use ${String(S)} instead.`),t[S]=t[c]}else{const{message:S,version:_}=h;l.add(`As of v${_}, ${String(c)} is deprecated. ${S??""}`)}const f=t[c];if(f==null||f===!1)return;const g=n[c];let m;if(g)if(typeof g=="function"){const S=g(t,this.gridOptions);if(!S)return;if("objectName"in S){const _=t[c];if(Array.isArray(_)){_.forEach(E=>{this.processOptions(E,S)});return}this.processOptions(t[c],S);return}m=S}else m=g;else return;const{module:v,dependencies:C,supportedRowModels:y}=m;if(y){const S=(d=this.gridOptions.rowModelType)!=null?d:"clientSide";if(!y.includes(S)){l.add(`${String(c)} is not supported with the '${S}' row model.`);return}}if(v){const S=Array.isArray(v)?v:[v];let _=!0;if(S.forEach(E=>{nt.__assertRegistered(E,String(c),this.context.getGridId())||(_=!1,l.add(`${String(c)} is only available when ${E} is loaded.`))}),!_)return}if(C){const S=this.checkForWarning(c,C,t);if(S){l.add(S);return}}}),l.size>0&&l.forEach(c=>{we(c)})}checkForWarning(t,e,n){if(typeof e=="function")return e(n,this.gridOptions);const i=Object.entries(e).find(([a,l])=>{const u=n[a];return!l.includes(u)});if(!i)return null;const[s,o]=i;return o.length>1?`'${String(t)}' requires '${s}' to be one of [${o.join(", ")}].`:`'${String(t)}' requires '${s}' to be ${o[0]}.`}checkProperties(t,e,n,r,i){const s=["__ob__","__v_skip","__metadata__"],o=hU(Object.getOwnPropertyNames(t),[...s,...e,...n],n);if(lr(o,(a,l)=>{we(`invalid ${r} property '${a}' did you mean any of these: ${l.slice(0,8).join(", ")}`)}),Object.keys(o).length>0&&i){const a=this.getFrameworkOverrides().getDocLink(i);we(`to see all the valid ${r} properties please check: ${a}`)}}};w([O("gridOptions")],Cg.prototype,"gridOptions",2);w([te],Cg.prototype,"init",1);Cg=w([ce("validationService")],Cg);var ZC=class extends ee{constructor(){super(...arguments),this.syncEventListeners=new Map,this.asyncEventListeners=new Map,this.syncGlobalEventListeners=new Set,this.globalEventListenerPairs=new Map}postConstruct(){this.frameworkEventWrappingService=new dI(this.getFrameworkOverrides())}addEventListener(t,e){const n=this.frameworkEventWrappingService.wrap(e),r=this.gos.useAsyncEvents()&&!Oy.has(t),i=r?this.asyncEventListeners:this.syncEventListeners;i.has(t)||i.set(t,new Set),i.get(t).add(n),this.eventService.addEventListener(t,n,r)}removeEventListener(t,e){var n;const r=this.frameworkEventWrappingService.unwrap(e),i=this.asyncEventListeners.get(t),s=!!(i!=null&&i.delete(r));s||(n=this.syncEventListeners.get(t))==null||n.delete(r),this.eventService.removeEventListener(t,r,s)}addGlobalListener(t){const e=this.frameworkEventWrappingService.wrapGlobal(t);if(this.gos.useAsyncEvents()){const r=(s,o)=>{Oy.has(s)&&e(s,o)},i=(s,o)=>{Oy.has(s)||e(s,o)};this.globalEventListenerPairs.set(t,{syncListener:r,asyncListener:i}),this.eventService.addGlobalListener(r,!1),this.eventService.addGlobalListener(i,!0)}else this.syncGlobalEventListeners.add(e),this.eventService.addGlobalListener(e,!1)}removeGlobalListener(t){const e=this.frameworkEventWrappingService.unwrapGlobal(t);if(this.globalEventListenerPairs.has(e)){const{syncListener:r,asyncListener:i}=this.globalEventListenerPairs.get(e);this.eventService.removeGlobalListener(r,!1),this.eventService.removeGlobalListener(i,!0),this.globalEventListenerPairs.delete(t)}else this.syncGlobalEventListeners.delete(e),this.eventService.removeGlobalListener(e,!1)}destroyEventListeners(t,e){t.forEach((n,r)=>{n.forEach(i=>this.eventService.removeEventListener(r,i,e)),n.clear()}),t.clear()}destroyGlobalListeners(t,e){t.forEach(n=>this.eventService.removeGlobalListener(n,e)),t.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncEventListeners,!1),this.destroyEventListeners(this.asyncEventListeners,!0),this.destroyGlobalListeners(this.syncGlobalEventListeners,!1),this.globalEventListenerPairs.forEach(({syncListener:t,asyncListener:e})=>{this.eventService.removeGlobalListener(t,!1),this.eventService.removeGlobalListener(e,!0)}),this.globalEventListenerPairs.clear()}};w([te],ZC.prototype,"postConstruct",1);ZC=w([ce("apiEventService")],ZC);var lD=class extends Ae{constructor(){super('<span class="ag-paging-page-size"></span>'),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;const t=this.selectPageSizeComp.getValue();if(!t)return;const e=Number(t);isNaN(e)||e<1||e===this.paginationProxy.getPageSize()||(this.paginationProxy.setPageSize(e,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}init(){this.addManagedPropertyListener("paginationPageSizeSelector",()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedListener(this.eventService,x.EVENT_PAGINATION_CHANGED,t=>this.handlePaginationChanged(t))}handlePaginationChanged(t){if(!this.selectPageSizeComp||!(t!=null&&t.newPageSize))return;const e=this.paginationProxy.getPageSize();this.getPageSizeSelectorValues().includes(e)?this.selectPageSizeComp.setValue(e.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(t){this.selectPageSizeComp&&this.reset(),t&&(this.reloadPageSizesSelector(),this.selectPageSizeComp&&this.appendChild(this.selectPageSizeComp))}reset(){en(this.getGui()),this.selectPageSizeComp&&(this.destroyBean(this.selectPageSizeComp),this.selectPageSizeComp=void 0)}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&this.gos.get("paginationPageSizeSelector")!==!1}reloadPageSizesSelector(){const t=this.getPageSizeSelectorValues(),e=this.paginationProxy.getPageSize(),n=!e||!t.includes(e);n&&(t.unshift(""),we(`The paginationPageSize grid option is set to a value that is not in the list of page size options.
                Please make sure that the paginationPageSize grid option is set to one of the values in the 
                paginationPageSizeSelector array, or set the paginationPageSizeSelector to false to hide the page size selector.`)),this.selectPageSizeComp&&(this.destroyBean(this.selectPageSizeComp),this.selectPageSizeComp=void 0);const r=this.localeService.getLocaleTextFunc(),i=r("pageSizeSelectorLabel","Page Size:"),s=t.map(a=>({value:String(a),text:String(a)})),o=r("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new pE).addOptions(s).setValue(String(n?"":e)).setAriaLabel(o).setLabel(i).onValueChange(()=>this.handlePageSizeItemSelected()),this.hasEmptyOption=n}getPageSizeSelectorValues(){const t=[20,50,100],e=this.gos.get("paginationPageSizeSelector");return!Array.isArray(e)||!this.validateValues(e)?t:[...e].sort((n,r)=>n-r)}validateValues(t){if(!t.length)return we(`The paginationPageSizeSelector grid option is an empty array. This is most likely a mistake.
                If you want to hide the page size selector, please set the paginationPageSizeSelector to false.`),!1;for(let e=0;e<t.length;e++){const n=t[e],r=typeof n=="number",i=n>0;if(!r)return we(`The paginationPageSizeSelector grid option contains a non-numeric value.
                    Please make sure that all values in the paginationPageSizeSelector array are numbers.`),!1;if(!i)return we(`The paginationPageSizeSelector grid option contains a negative number or zero.
                    Please make sure that all values in the paginationPageSizeSelector array are positive.`),!1}return!0}destroy(){this.toggleSelectDisplay(!1),super.destroy()}};w([O("paginationProxy")],lD.prototype,"paginationProxy",2);w([te],lD.prototype,"init",1);var wg=class extends ee{constructor(){super(),this.descriptionContainer=null,this.announceValue=yr(this.announceValue.bind(this),200)}postConstruct(){const t=this.gos.getDocument(),e=this.descriptionContainer=t.createElement("div");e.classList.add("ag-aria-description-container"),gI(e,"polite"),Vj(e,"additions text"),Gj(e,!0),this.eGridDiv.appendChild(e)}announceValue(t){this.descriptionContainer&&(this.descriptionContainer.textContent="",setTimeout(()=>{this.isAlive()&&this.descriptionContainer&&(this.descriptionContainer.textContent=t)},50))}destroy(){super.destroy();const{descriptionContainer:t}=this;t&&(en(t),t.parentElement&&t.parentElement.removeChild(t)),this.descriptionContainer=null,this.eGridDiv=null}};w([O("eGridDiv")],wg.prototype,"eGridDiv",2);w([te],wg.prototype,"postConstruct",1);wg=w([ce("ariaAnnouncementService")],wg);var D_=class{};D_.gridOptions=void 0;var Aie=1,xie=class{create(t,e,n,r,i){var s;let o={};D_.gridOptions?(Br(o,D_.gridOptions,!0,!0),o=me(me({},o),e)):o=e;const a=rt.getCoercedGridOptions(o),l=!!a.debug,u=(s=a.gridId)!=null?s:String(Aie++),c=this.getRegisteredModules(i,u),d=this.createBeansList(a.rowModelType,c,u),h=this.createProvidedBeans(t,a,i);if(!d){$l("Failed to create grid.");return}const f={providedBeanInstances:h,beanClasses:d,debug:l,gridId:u},g=new oD("Context",()=>f.debug),m=new Gte(f,g),v=m.getBean("beans");return this.registerModuleUserComponents(v,c),this.registerStackComponents(v,c),this.registerControllers(v,c),n(m),v.syncService.start(),r&&r(m),m.getBean("gridApi")}registerControllers(t,e){e.forEach(n=>{n.controllers&&n.controllers.forEach(r=>t.ctrlsFactory.register(r))})}registerStackComponents(t,e){const n=this.createAgStackComponentsList(e);t.agStackComponentsRegistry.setupComponents(n)}getRegisteredModules(t,e){const n=t?t.modules:null,r=nt.__getRegisteredModules(e),i=[],s={},o=(a,l,u)=>{(d=>{s[d.moduleName]||(s[d.moduleName]=!0,i.push(d),nt.__register(d,a,u))})(l),l.dependantModules&&l.dependantModules.forEach(d=>o(a,d,u))};return n&&n.forEach(a=>o(!0,a,e)),r&&r.forEach(a=>o(!nt.__isPackageBased(),a,void 0)),i}registerModuleUserComponents(t,e){this.extractModuleEntity(e,r=>r.userComponents?r.userComponents:[]).forEach(r=>{t.userComponentRegistry.registerDefaultComponent(r.componentName,r.componentClass)})}createProvidedBeans(t,e,n){let r=n?n.frameworkOverrides:null;Te(r)&&(r=new Oz);const i={gridOptions:e,eGridDiv:t,globalEventListener:n?n.globalEventListener:null,globalSyncEventListener:n?n.globalSyncEventListener:null,frameworkOverrides:r};return n&&n.providedBeanInstances&&Object.assign(i,n.providedBeanInstances),i}createAgStackComponentsList(t){let e=[{componentName:"AgCheckbox",componentClass:fE},{componentName:"AgRadioButton",componentClass:IU},{componentName:"AgToggleButton",componentClass:_z},{componentName:"AgInputTextField",componentClass:Wu},{componentName:"AgInputTextArea",componentClass:Xre},{componentName:"AgInputNumberField",componentClass:jI},{componentName:"AgInputDateField",componentClass:Jre},{componentName:"AgInputRange",componentClass:Zre},{componentName:"AgRichSelect",componentClass:IE},{componentName:"AgSelect",componentClass:pE},{componentName:"AgSlider",componentClass:tie},{componentName:"AgGridBody",componentClass:ws},{componentName:"AgHeaderRoot",componentClass:qre},{componentName:"AgSortIndicator",componentClass:zI},{componentName:"AgPagination",componentClass:Xr},{componentName:"AgPageSizeSelector",componentClass:lD},{componentName:"AgOverlayWrapper",componentClass:mie},{componentName:"AgGroupComponent",componentClass:nie},{componentName:"AgRowContainer",componentClass:_h},{componentName:"AgFakeHorizontalScroll",componentClass:vie},{componentName:"AgFakeVerticalScroll",componentClass:_ie},{componentName:"AgAutocomplete",componentClass:lie}];const n=this.extractModuleEntity(t,r=>r.agStackComponents?r.agStackComponents:[]);return e=e.concat(n),e}createBeansList(t="clientSide",e,n){const r=e.filter(l=>!l.rowModel||l.rowModel===t),i={clientSide:"@ag-grid-community/client-side-row-model",infinite:"@ag-grid-community/infinite-row-model",serverSide:"@ag-grid-enterprise/server-side-row-model",viewport:"@ag-grid-enterprise/viewport-row-model"};if(!i[t]){$l("Could not find row model for rowModelType = "+t);return}if(!nt.__assertRegistered(i[t],`rowModelType = '${t}'`,n))return;const s=[Ne,Nd,A_,mg,Dd,We,zC,JC,fg,E_,za,Md,ug,I_,Cg,dg,lg,c_,ys,rt,Do,Ru,ji,Fn,Eu,hg,Ei,YC,eg,Tu,dr,XC,Ya,QC,bu,Ka,Ie,Id,pt,Co,gg,qa,qC,xd,_u,__,pg,Fd,tg,Od,Pd,zs,d_,x_,vg,Us,Ld,ou,yg,kd,P_,Au,jr,xu,Pu,Tr,cg,ZC,wg,Ui],o=this.extractModuleEntity(r,l=>l.beans?l.beans:[]);s.push(...o);const a=[];return s.forEach(l=>{a.indexOf(l)<0&&a.push(l)}),a}extractModuleEntity(t,e){return[].concat(...t.map(e))}},Pie=class{wrap(t,e,n=[],r){const i=this.createWrapper(t,r);return e.forEach(s=>{this.createMethod(i,s,!0)}),n.forEach(s=>{this.createMethod(i,s,!1)}),i}unwrap(t){return t}createMethod(t,e,n){t.addMethod(e,this.createMethodProxy(t,e,n))}createMethodProxy(t,e,n){return function(){return t.hasMethod(e)?t.callMethod(e,arguments):(n&&console.warn("AG Grid: Framework component is missing the method "+e+"()"),null)}}},Nh=typeof global>"u"?{}:global;Nh.HTMLElement=typeof HTMLElement>"u"?{}:HTMLElement;Nh.HTMLButtonElement=typeof HTMLButtonElement>"u"?{}:HTMLButtonElement;Nh.HTMLSelectElement=typeof HTMLSelectElement>"u"?{}:HTMLSelectElement;Nh.HTMLInputElement=typeof HTMLInputElement>"u"?{}:HTMLInputElement;Nh.Node=typeof Node>"u"?{}:Node;Nh.MouseEvent=typeof MouseEvent>"u"?{}:MouseEvent;var uD=class qp{constructor(e,n,r,i,s,o){this.nextId=0,this.rowCountReady=!1,this.allNodesMap={},this.rootNode=e,this.gos=n,this.eventService=r,this.columnModel=i,this.beans=o,this.selectionService=s,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=qp.ROOT_NODE_ID,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[]}getCopyOfNodesMap(){return be.cloneObject(this.allNodesMap)}getRowNode(e){return this.allNodesMap[e]}setRowData(e){if(typeof e=="string"){console.warn("AG Grid: rowData must be an array.");return}this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e);const n=this.rootNode,r=this.rootNode.sibling;n.childrenAfterFilter=null,n.childrenAfterGroup=null,n.childrenAfterAggFilter=null,n.childrenAfterSort=null,n.childrenMapped=null,n.updateHasChildren(),this.nextId=0,this.allNodesMap={},e?n.allLeafChildren=e.map(i=>this.createNode(i,this.rootNode,qp.TOP_LEVEL)):(n.allLeafChildren=[],n.childrenAfterGroup=[]),r&&(r.childrenAfterFilter=n.childrenAfterFilter,r.childrenAfterGroup=n.childrenAfterGroup,r.childrenAfterAggFilter=n.childrenAfterAggFilter,r.childrenAfterSort=n.childrenAfterSort,r.childrenMapped=n.childrenMapped,r.allLeafChildren=n.allLeafChildren)}updateRowData(e,n){this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e.add);const r={remove:[],update:[],add:[]},i=[];return this.executeRemove(e,r,i),this.executeUpdate(e,r,i),this.executeAdd(e,r),this.updateSelection(i,"rowDataChanged"),n&&be.sortRowNodesByOrder(this.rootNode.allLeafChildren,n),r}isRowCountReady(){return this.rowCountReady}dispatchRowDataUpdateStartedEvent(e){const n={type:x.EVENT_ROW_DATA_UPDATE_STARTED,firstRowData:e!=null&&e.length?e[0]:null};this.eventService.dispatchEvent(n)}updateSelection(e,n){const r=e.length>0;if(r&&this.selectionService.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:n}),this.selectionService.updateGroupsFromChildrenSelections(n),r){const i={type:x.EVENT_SELECTION_CHANGED,source:n};this.eventService.dispatchEvent(i)}}executeAdd(e,n){var r;const{add:i,addIndex:s}=e;if(be.missingOrEmpty(i))return;const o=i.map(a=>this.createNode(a,this.rootNode,qp.TOP_LEVEL));if(typeof s=="number"&&s>=0){const{allLeafChildren:a}=this.rootNode,l=a.length;let u=s;if(this.gos.get("treeData")&&s>0&&l>0){for(let f=0;f<l;f++)if(((r=a[f])==null?void 0:r.rowIndex)==s-1){u=f+1;break}}const d=a.slice(0,u),h=a.slice(u,a.length);this.rootNode.allLeafChildren=[...d,...o,...h]}else this.rootNode.allLeafChildren=[...this.rootNode.allLeafChildren,...o];this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren),n.add=o}executeRemove(e,n,r){const{remove:i}=e;if(be.missingOrEmpty(i))return;const s={};i.forEach(o=>{const a=this.lookupRowNode(o);a&&(a.isSelected()&&r.push(a),a.clearRowTopAndRowIndex(),s[a.id]=!0,delete this.allNodesMap[a.id],n.remove.push(a))}),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren.filter(o=>!s[o.id]),this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren)}executeUpdate(e,n,r){const{update:i}=e;be.missingOrEmpty(i)||i.forEach(s=>{const o=this.lookupRowNode(s);o&&(o.updateData(s),!o.selectable&&o.isSelected()&&r.push(o),this.setMasterForRow(o,s,qp.TOP_LEVEL,!1),n.update.push(o))})}lookupRowNode(e){const n=this.gos.getCallback("getRowId");let r;if(n){const i=n({data:e,level:0});if(r=this.allNodesMap[i],!r)return console.error(`AG Grid: could not find row id=${i}, data item was not found for this id`),null}else if(r=this.rootNode.allLeafChildren.find(i=>i.data===e),!r)return console.error("AG Grid: could not find data item as object was not found",e),console.error("Consider using getRowId to help the Grid find matching row data"),null;return r||null}createNode(e,n,r){const i=new Ge(this.beans);i.group=!1,this.setMasterForRow(i,e,r,!0);const s=this.gos.get("suppressParentsInRowNodes");return n&&!s&&(i.parent=n),i.level=r,i.setDataAndId(e,this.nextId.toString()),this.allNodesMap[i.id]&&console.warn(`AG Grid: duplicate node id '${i.id}' detected from getRowId callback, this could cause issues in your grid.`),this.allNodesMap[i.id]=i,this.nextId++,i}setMasterForRow(e,n,r,i){if(this.gos.get("treeData"))e.setMaster(!1),i&&(e.expanded=!1);else{if(this.gos.get("masterDetail")){const a=this.gos.get("isRowMaster");a?e.setMaster(a(n)):e.setMaster(!0)}else e.setMaster(!1);if(i){const a=this.columnModel.getRowGroupColumns(),l=a?a.length:0,u=r+l;e.expanded=e.master?this.isExpanded(u):!1}}}isExpanded(e){const n=this.gos.get("groupDefaultExpanded");return n===-1?!0:e<n}};uD.TOP_LEVEL=0;uD.ROOT_NODE_ID="ROOT_NODE_ID";var Iie=uD,Rr=class extends ee{constructor(){super(...arguments),this.onRowHeightChanged_debounced=be.debounce(this.onRowHeightChanged.bind(this),100),this.rowsToDisplay=[],this.hasStarted=!1,this.shouldSkipSettingDataOnStart=!1,this.isRefreshingModel=!1,this.rowCountReady=!1}init(){const t=this.refreshModel.bind(this,{step:"group"}),e=!this.gos.get("suppressAnimationFrame"),n=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:e});this.addManagedListener(this.eventService,x.EVENT_NEW_COLUMNS_LOADED,n),this.addManagedListener(this.eventService,x.EVENT_COLUMN_ROW_GROUP_CHANGED,t),this.addManagedListener(this.eventService,x.EVENT_COLUMN_VALUE_CHANGED,this.onValueChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_COLUMN_PIVOT_CHANGED,this.refreshModel.bind(this,{step:"pivot"})),this.addManagedListener(this.eventService,x.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_COLUMN_PIVOT_MODE_CHANGED,t),this.addManagedListener(this.eventService,x.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanges.bind(this)),this.addManagedListener(this.eventService,x.EVENT_GRID_READY,()=>this.onGridReady()),this.addPropertyListeners(),this.rootNode=new Ge(this.beans),this.nodeManager=new Iie(this.rootNode,this.gos,this.eventService,this.columnModel,this.selectionService,this.beans)}addPropertyListeners(){const t=new Set(["treeData","masterDetail"]),e=new Set(["suppressParentsInRowNodes","groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType"]),n=new Set(["excludeChildrenWhenTreeDataFiltering"]),r=new Set(["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"]),i=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","groupIncludeTotalFooter","suppressAggFilteredOnly","grandTotalRow"]),s=new Set(["postSortRows","groupDisplayType","accentedSort"]),o=new Set([]),a=new Set(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter","groupTotalRow"]),l=[...t,...e,...n,...r,...r,...i,...s,...o,...a];this.addManagedPropertyListeners(l,u=>{var c;const d=(c=u.changeSet)==null?void 0:c.properties;if(!d)return;const h=f=>d.some(g=>f.has(g));if(h(t)){this.setRowData(this.rootNode.allLeafChildren.map(f=>f.data));return}if(h(e)){this.refreshModel({step:"group"});return}if(h(n)){this.refreshModel({step:"filter"});return}if(h(r)){this.refreshModel({step:"pivot"});return}if(h(i)){this.refreshModel({step:"aggregate"});return}if(h(s)){this.refreshModel({step:"sort"});return}if(h(o)){this.refreshModel({step:"filter_aggregates"});return}h(a)&&this.refreshModel({step:"map"})}),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.hasStarted=!0,this.shouldSkipSettingDataOnStart?this.dispatchUpdateEventsAndRefresh():this.setInitialData()}setInitialData(){const t=this.gos.get("rowData");t&&(this.shouldSkipSettingDataOnStart=!0,this.setRowData(t))}ensureRowHeightsValid(t,e,n,r){let i,s=!1;do{i=!1;const o=this.getRowIndexAtPixel(t),a=this.getRowIndexAtPixel(e),l=Math.max(o,n),u=Math.min(a,r);for(let c=l;c<=u;c++){const d=this.getRow(c);if(d.rowHeightEstimated){const h=this.gos.getRowHeightForNode(d);d.setRowHeight(h.height),i=!0,s=!0}}i&&this.setRowTopAndRowIndex()}while(i);return s}setRowTopAndRowIndex(){const t=this.environment.getDefaultRowHeight();let e=0;const n=new Set,r=this.gos.isDomLayout("normal");for(let i=0;i<this.rowsToDisplay.length;i++){const s=this.rowsToDisplay[i];if(s.id!=null&&n.add(s.id),s.rowHeight==null){const o=this.gos.getRowHeightForNode(s,r,t);s.setRowHeight(o.height,o.estimated)}s.setRowTop(e),s.setRowIndex(i),e+=s.rowHeight}return n}clearRowTopAndRowIndex(t,e){const n=t.isActive(),r=s=>{s&&s.id!=null&&!e.has(s.id)&&s.clearRowTopAndRowIndex()},i=s=>{if(r(s),r(s.detailNode),r(s.sibling),s.hasChildren()&&s.childrenAfterGroup){const o=s.level==-1;n&&!o&&!s.expanded||s.childrenAfterGroup.forEach(i)}};i(this.rootNode)}ensureRowsAtPixel(t,e,n=0){const r=this.getRowIndexAtPixel(e),i=this.getRow(r),s=!this.gos.get("suppressAnimationFrame");return i===t[0]?!1:(t.forEach(o=>{be.removeFromArray(this.rootNode.allLeafChildren,o)}),t.forEach((o,a)=>{be.insertIntoArray(this.rootNode.allLeafChildren,o,Math.max(r+n,0)+a)}),this.refreshModel({step:"group",keepRenderedRows:!0,keepEditingRows:!0,animate:s}),!0)}highlightRowAtPixel(t,e){const n=e!=null?this.getRowIndexAtPixel(e):null,r=n!=null?this.getRow(n):null;if(!r||!t||r===t||e==null){this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null);return}const i=this.getHighlightPosition(e,r);this.lastHighlightedRow&&this.lastHighlightedRow!==r&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),r.setHighlighted(i),this.lastHighlightedRow=r}getHighlightPosition(t,e){if(!e){const i=this.getRowIndexAtPixel(t);if(e=this.getRow(i||0),!e)return 1}const{rowTop:n,rowHeight:r}=e;return t-n<r/2?0:1}getLastHighlightedRowNode(){return this.lastHighlightedRow}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;const e=this.rootNode.childrenAfterAggFilter;return e?e.length:0}getTopLevelRowDisplayedIndex(t){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return t;let n=this.rootNode.childrenAfterSort[t];if(this.gos.get("groupHideOpenParents"))for(;n.expanded&&n.childrenAfterSort&&n.childrenAfterSort.length>0;)n=n.childrenAfterSort[0];return n.rowIndex}getRowBounds(t){if(be.missing(this.rowsToDisplay))return null;const e=this.rowsToDisplay[t];return e?{rowTop:e.rowTop,rowHeight:e.rowHeight}:null}onRowGroupOpened(){const t=this.gos.isAnimateRows();this.refreshModel({step:"map",keepRenderedRows:!0,animate:t})}onFilterChanged(t){if(t.afterDataChange)return;const e=this.gos.isAnimateRows(),r=t.columns.length===0||t.columns.some(i=>i.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:r,keepRenderedRows:!0,animate:e})}onSortChanged(){const t=this.gos.isAnimateRows();this.refreshModel({step:"sort",keepRenderedRows:!0,animate:t,keepEditingRows:!0})}getType(){return"clientSide"}onValueChanged(){this.columnModel.isPivotActive()?this.refreshModel({step:"pivot"}):this.refreshModel({step:"aggregate"})}createChangePath(t){const e=be.missingOrEmpty(t),n=new PE(!1,this.rootNode);return(e||this.gos.get("treeData"))&&n.setInactive(),n}isSuppressModelUpdateAfterUpdateTransaction(t){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction")||t.rowNodeTransactions==null)return!1;const e=t.rowNodeTransactions.filter(r=>r.add!=null&&r.add.length>0||r.remove!=null&&r.remove.length>0);return e==null||e.length==0}buildRefreshModelParams(t){let e="group";const n={everything:"group",group:"group",filter:"filter",map:"map",aggregate:"aggregate",sort:"sort",pivot:"pivot"};if(be.exists(t)&&(e=n[t]),be.missing(e)){console.error(`AG Grid: invalid step ${t}, available steps are ${Object.keys(n).join(", ")}`);return}const r=!this.gos.get("suppressAnimationFrame");return{step:e,keepRenderedRows:!0,keepEditingRows:!0,animate:r}}refreshModel(t){if(!this.hasStarted||this.isRefreshingModel||this.columnModel.shouldRowModelIgnoreRefresh())return;let e=typeof t=="object"&&"step"in t?t:this.buildRefreshModelParams(t);if(!e||this.isSuppressModelUpdateAfterUpdateTransaction(e))return;const n=this.createChangePath(e.rowNodeTransactions);switch(this.isRefreshingModel=!0,e.step){case"group":this.doRowGrouping(e.rowNodeTransactions,e.rowNodeOrder,n,!!e.afterColumnsChanged);case"filter":this.doFilter(n);case"pivot":this.doPivot(n);case"aggregate":this.doAggregate(n);case"filter_aggregates":this.doFilterAggregates(n);case"sort":this.doSort(e.rowNodeTransactions,n);case"map":this.doRowsToDisplay()}const r=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(n,r),this.isRefreshingModel=!1;const i={type:x.EVENT_MODEL_UPDATED,animate:e.animate,keepRenderedRows:e.keepRenderedRows,newData:e.newData,newPage:!1,keepUndoRedoStack:e.keepUndoRedoStack};this.eventService.dispatchEvent(i)}isEmpty(){const t=be.missing(this.rootNode.allLeafChildren)||this.rootNode.allLeafChildren.length===0;return be.missing(this.rootNode)||t||!this.columnModel.isReady()}isRowsToRender(){return be.exists(this.rowsToDisplay)&&this.rowsToDisplay.length>0}getNodesInRangeForSelection(t,e){let n=!e,r=!1;const i=[],s=this.gos.get("groupSelectsChildren");return this.forEachNodeAfterFilterAndSort(o=>{if(r)return;if(n&&(o===e||o===t)&&(r=!0,o.group&&s)){i.push(...o.allLeafChildren);return}if(!n){if(o!==e&&o!==t)return;n=!0}if(!o.group||!s){i.push(o);return}}),i}setDatasource(t){console.error("AG Grid: should never call setDatasource on clientSideRowController")}getTopLevelNodes(){return this.rootNode?this.rootNode.childrenAfterGroup:null}getRootNode(){return this.rootNode}getRow(t){return this.rowsToDisplay[t]}isRowPresent(t){return this.rowsToDisplay.indexOf(t)>=0}getRowIndexAtPixel(t){if(this.isEmpty()||this.rowsToDisplay.length===0)return-1;let e=0,n=this.rowsToDisplay.length-1;if(t<=0)return 0;if(be.last(this.rowsToDisplay).rowTop<=t)return this.rowsToDisplay.length-1;let i=-1,s=-1;for(;;){const o=Math.floor((e+n)/2),a=this.rowsToDisplay[o];if(this.isRowInPixel(a,t)||(a.rowTop<t?e=o+1:a.rowTop>t&&(n=o-1),i===e&&s===n))return o;i=e,s=n}}isRowInPixel(t,e){const n=t.rowTop,r=t.rowTop+t.rowHeight;return n<=e&&r>e}forEachLeafNode(t){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach((e,n)=>t(e,n))}forEachNode(t,e=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterGroup||[]],callback:t,recursionType:0,index:0,includeFooterNodes:e})}forEachNodeAfterFilter(t,e=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterAggFilter||[]],callback:t,recursionType:1,index:0,includeFooterNodes:e})}forEachNodeAfterFilterAndSort(t,e=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterSort||[]],callback:t,recursionType:2,index:0,includeFooterNodes:e})}forEachPivotNode(t,e=!1){this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:t,recursionType:3,index:0,includeFooterNodes:e})}recursivelyWalkNodesAndCallback(t){const{nodes:e,callback:n,recursionType:r,includeFooterNodes:i}=t;let{index:s}=t;const o=a=>{var l;const u=(l=e[0])==null?void 0:l.parent;if(!u)return;const c=i&&this.gos.getGrandTotalRow(),d=this.gos.getGroupTotalRowCallback(),h=i&&d({node:u});if(u===this.rootNode){c===a&&(u.createFooter(),n(u.sibling,s++));return}h===a&&(u.createFooter(),n(u.sibling,s++))};o("top");for(let a=0;a<e.length;a++){const l=e[a];if(n(l,s++),l.hasChildren()&&!l.footer){let u=null;switch(r){case 0:u=l.childrenAfterGroup;break;case 1:u=l.childrenAfterAggFilter;break;case 2:u=l.childrenAfterSort;break;case 3:u=l.leafGroup?null:l.childrenAfterSort;break}u&&(s=this.recursivelyWalkNodesAndCallback({nodes:[...u],callback:n,recursionType:r,index:s,includeFooterNodes:i}))}}return o("bottom"),s}doAggregate(t){var e;(e=this.aggregationStage)==null||e.execute({rowNode:this.rootNode,changedPath:t})}doFilterAggregates(t){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:t}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter}expandOrCollapseAll(t){const e=this.gos.get("treeData"),n=this.columnModel.isPivotActive(),r=o=>{o&&o.forEach(a=>{const l=()=>{a.expanded=t,r(a.childrenAfterGroup)};if(e){be.exists(a.childrenAfterGroup)&&l();return}if(n){!a.leafGroup&&l();return}a.group&&l()})};this.rootNode&&r(this.rootNode.childrenAfterGroup),this.refreshModel({step:"map"});const i=t?"expandAll":"collapseAll",s={type:x.EVENT_EXPAND_COLLAPSE_ALL,source:i};this.eventService.dispatchEvent(s)}doSort(t,e){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:t,changedPath:e})}doRowGrouping(t,e,n,r){if(this.groupStage){if(t?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:t,rowNodeOrder:e,changedPath:n}):this.groupStage.execute({rowNode:this.rootNode,changedPath:n,afterColumnsChanged:r}),this.gos.get("groupSelectsChildren")&&this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",n)){const s={type:x.EVENT_SELECTION_CHANGED,source:"rowGroupChanged"};this.eventService.dispatchEvent(s)}}else this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren,this.rootNode.sibling&&(this.rootNode.sibling.childrenAfterGroup=this.rootNode.childrenAfterGroup),this.rootNode.updateHasChildren();this.nodeManager.isRowCountReady()&&(this.rowCountReady=!0,this.eventService.dispatchEventOnce({type:x.EVENT_ROW_COUNT_READY}))}doFilter(t){this.filterStage.execute({rowNode:this.rootNode,changedPath:t})}doPivot(t){var e;(e=this.pivotStage)==null||e.execute({rowNode:this.rootNode,changedPath:t})}getCopyOfNodesMap(){return this.nodeManager.getCopyOfNodesMap()}getRowNode(t){if(typeof t=="string"&&t.indexOf(Ge.ID_PREFIX_ROW_GROUP)==0){let n;return this.forEachNode(r=>{r.id===t&&(n=r)}),n}return this.nodeManager.getRowNode(t)}setRowData(t){this.selectionService.reset("rowDataChanged"),this.nodeManager.setRowData(t),this.hasStarted&&this.dispatchUpdateEventsAndRefresh()}dispatchUpdateEventsAndRefresh(){const t={type:x.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(t),this.refreshModel({step:"group",newData:!0})}batchUpdateRowData(t,e){if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];const n=this.gos.getAsyncTransactionWaitMillis();this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.executeBatchUpdateRowData()},n)}this.rowDataTransactionBatch.push({rowDataTransaction:t,callback:e})}flushAsyncTransactions(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){this.valueCache.onDataChanged();const t=[],e=[];let n=!1;if(this.rowDataTransactionBatch&&this.rowDataTransactionBatch.forEach(r=>{const i=this.nodeManager.updateRowData(r.rowDataTransaction,void 0);e.push(i),r.callback&&t.push(r.callback.bind(null,i)),typeof r.rowDataTransaction.addIndex=="number"&&(n=!0)}),this.commonUpdateRowData(e,void 0,n),t.length>0&&window.setTimeout(()=>{t.forEach(r=>r())},0),e.length>0){const r={type:x.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:e};this.eventService.dispatchEvent(r)}this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(t,e){this.valueCache.onDataChanged();const n=this.nodeManager.updateRowData(t,e),r=typeof t.addIndex=="number";return this.commonUpdateRowData([n],e,r),n}createRowNodeOrder(){if(this.gos.get("suppressMaintainUnsortedOrder"))return;const e={};if(this.rootNode&&this.rootNode.allLeafChildren)for(let n=0;n<this.rootNode.allLeafChildren.length;n++){const r=this.rootNode.allLeafChildren[n];e[r.id]=n}return e}commonUpdateRowData(t,e,n){if(!this.hasStarted)return;const r=!this.gos.get("suppressAnimationFrame");n&&(e=this.createRowNodeOrder());const i={type:x.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(i),this.refreshModel({step:"group",rowNodeTransactions:t,rowNodeOrder:e,keepRenderedRows:!0,keepEditingRows:!0,animate:r})}doRowsToDisplay(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}resetRowHeights(){const t=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),t&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let t=!1;return this.forEachNode(e=>{e.setRowHeight(e.rowHeight,!0);const n=e.detailNode;n&&n.setRowHeight(n.rowHeight,!0),e.sibling&&e.sibling.setRowHeight(e.sibling.rowHeight,!0),t=!0}),t}onGridStylesChanges(){this.columnModel.isAutoRowHeightActive()||this.resetRowHeights()}onGridReady(){this.hasStarted||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}};w([O("columnModel")],Rr.prototype,"columnModel",2);w([O("selectionService")],Rr.prototype,"selectionService",2);w([O("valueCache")],Rr.prototype,"valueCache",2);w([O("beans")],Rr.prototype,"beans",2);w([O("filterStage")],Rr.prototype,"filterStage",2);w([O("sortStage")],Rr.prototype,"sortStage",2);w([O("flattenStage")],Rr.prototype,"flattenStage",2);w([ut("groupStage")],Rr.prototype,"groupStage",2);w([ut("aggregationStage")],Rr.prototype,"aggregationStage",2);w([ut("pivotStage")],Rr.prototype,"pivotStage",2);w([ut("filterAggregatesStage")],Rr.prototype,"filterAggregatesStage",2);w([te],Rr.prototype,"init",1);Rr=w([ce("rowModel")],Rr);var ew=class extends ee{execute(t){const{changedPath:e}=t;this.filterService.filter(e)}};w([O("filterService")],ew.prototype,"filterService",2);ew=w([ce("filterStage")],ew);var Sg=class extends ee{execute(t){const e=this.sortController.getSortOptions(),n=be.exists(e)&&e.length>0,r=n&&be.exists(t.rowNodeTransactions)&&this.gos.get("deltaSort"),i=e.some(s=>this.gos.isColumnsSortingCoupledToGroup()?s.column.isPrimary()&&s.column.isRowGroupActive():!!s.column.getColDef().showRowGroup);this.sortService.sort(e,n,r,t.rowNodeTransactions,t.changedPath,i)}};w([O("sortService")],Sg.prototype,"sortService",2);w([O("sortController")],Sg.prototype,"sortController",2);Sg=w([ce("sortStage")],Sg);var tw=class extends ee{execute(t){const e=t.rowNode,n=[],r=this.beans.columnModel.isPivotMode(),i=r&&e.leafGroup,s=i?[e]:e.childrenAfterSort,o=this.getFlattenDetails();this.recursivelyAddToRowsToDisplay(o,s,n,r,0);const a=n.length>0;if(!i&&a&&o.grandTotalRow){e.createFooter();const u=o.grandTotalRow==="top";this.addRowNodeToRowsToDisplay(o,e.sibling,n,0,u)}return n}getFlattenDetails(){const t=this.gos.get("groupRemoveSingleChildren");return{groupRemoveLowestSingleChildren:!t&&this.gos.get("groupRemoveLowestSingleChildren"),groupRemoveSingleChildren:t,isGroupMultiAutoColumn:this.gos.isGroupMultiAutoColumn(),hideOpenParents:this.gos.get("groupHideOpenParents"),grandTotalRow:this.gos.getGrandTotalRow(),groupTotalRow:this.gos.getGroupTotalRowCallback()}}recursivelyAddToRowsToDisplay(t,e,n,r,i){if(!be.missingOrEmpty(e))for(let s=0;s<e.length;s++){const o=e[s],a=o.hasChildren(),l=r&&!a,u=t.groupRemoveSingleChildren&&a&&o.childrenAfterGroup.length===1,c=t.groupRemoveLowestSingleChildren&&a&&o.leafGroup&&o.childrenAfterGroup.length===1,d=r&&o.leafGroup,h=t.hideOpenParents&&o.expanded&&!o.master&&!d;if(!l&&!h&&!u&&!c&&this.addRowNodeToRowsToDisplay(t,o,n,i),!(r&&o.leafGroup)){if(a){const g=u||c;if(o.expanded||g){const m=t.groupTotalRow({node:o});m||o.destroyFooter();const v=g?i:i+1;m==="top"&&(o.createFooter(),this.addRowNodeToRowsToDisplay(t,o.sibling,n,v)),this.recursivelyAddToRowsToDisplay(t,o.childrenAfterSort,n,r,v),m==="bottom"&&(o.createFooter(),this.addRowNodeToRowsToDisplay(t,o.sibling,n,v))}}else if(o.master&&o.expanded){const g=this.createDetailNode(o);this.addRowNodeToRowsToDisplay(t,g,n,i)}}}}addRowNodeToRowsToDisplay(t,e,n,r,i){i?n.unshift(e):n.push(e),e.setUiLevel(t.isGroupMultiAutoColumn?0:r)}createDetailNode(t){if(be.exists(t.detailNode))return t.detailNode;const e=new Ge(this.beans);return e.detail=!0,e.selectable=!1,e.parent=t,be.exists(t.id)&&(e.id="detail_"+t.id),e.data=t.data,e.level=t.level+1,t.detailNode=e,e}};w([O("beans")],tw.prototype,"beans",2);tw=w([ce("flattenStage")],tw);var Eg=class extends ee{sort(t,e,n,r,i,s){const o=this.gos.get("groupMaintainOrder"),a=this.columnModel.getAllGridColumns().some(h=>h.isRowGroupActive());let l={};n&&r&&(l=this.calculateDirtyNodes(r));const u=this.columnModel.isPivotMode(),c=this.gos.getCallback("postSortRows"),d=h=>{var f;this.pullDownGroupDataForHideOpenParents(h.childrenAfterAggFilter,!0);const g=u&&h.leafGroup;if(o&&a&&!h.leafGroup&&!s){const v=(f=this.columnModel.getRowGroupColumns())==null?void 0:f[h.level+1],C=(v==null?void 0:v.getSort())===null,y=h.childrenAfterAggFilter.slice(0);if(h.childrenAfterSort&&!C){const S={};h.childrenAfterSort.forEach((_,E)=>{S[_.id]=E}),y.sort((_,E)=>{var R,b;return((R=S[_.id])!=null?R:0)-((b=S[E.id])!=null?b:0)})}h.childrenAfterSort=y}else!e||g?h.childrenAfterSort=h.childrenAfterAggFilter.slice(0):n?h.childrenAfterSort=this.doDeltaSort(h,l,i,t):h.childrenAfterSort=this.rowNodeSorter.doFullSort(h.childrenAfterAggFilter,t);if(h.sibling&&(h.sibling.childrenAfterSort=h.childrenAfterSort),this.updateChildIndexes(h),c){const v={nodes:h.childrenAfterSort};c(v)}};i&&i.forEachChangedNodeDepthFirst(d),this.updateGroupDataForHideOpenParents(i)}calculateDirtyNodes(t){const e={},n=r=>{r&&r.forEach(i=>e[i.id]=!0)};return t&&t.forEach(r=>{n(r.add),n(r.update),n(r.remove)}),e}doDeltaSort(t,e,n,r){const i=t.childrenAfterAggFilter,s=t.childrenAfterSort;if(!s)return this.rowNodeSorter.doFullSort(i,r);const o={},a=[];i.forEach(d=>{e[d.id]||!n.canSkip(d)?a.push(d):o[d.id]=!0});const l=s.filter(d=>o[d.id]),u=(d,h)=>({currentPos:h,rowNode:d}),c=a.map(u).sort((d,h)=>this.rowNodeSorter.compareRowNodes(r,d,h));return this.mergeSortedArrays(r,c,l.map(u)).map(({rowNode:d})=>d)}mergeSortedArrays(t,e,n){const r=[];let i=0,s=0;for(;i<e.length&&s<n.length;)this.rowNodeSorter.compareRowNodes(t,e[i],n[s])<0?r.push(e[i++]):r.push(n[s++]);for(;i<e.length;)r.push(e[i++]);for(;s<n.length;)r.push(n[s++]);return r}updateChildIndexes(t){if(be.missing(t.childrenAfterSort))return;const e=t.childrenAfterSort;for(let n=0;n<e.length;n++){const r=e[n],i=n===0,s=n===t.childrenAfterSort.length-1;r.setFirstChild(i),r.setLastChild(s),r.setChildIndex(n)}}updateGroupDataForHideOpenParents(t){if(!this.gos.get("groupHideOpenParents"))return;if(this.gos.get("treeData"))return be.warnOnce("The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them."),!1;const e=n=>{this.pullDownGroupDataForHideOpenParents(n.childrenAfterSort,!1),n.childrenAfterSort.forEach(r=>{r.hasChildren()&&e(r)})};t&&t.executeFromRootNode(n=>e(n))}pullDownGroupDataForHideOpenParents(t,e){!this.gos.get("groupHideOpenParents")||be.missing(t)||t.forEach(n=>{this.columnModel.getGroupDisplayColumns().forEach(i=>{const s=i.getColDef().showRowGroup;if(typeof s!="string"){console.error("AG Grid: groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");return}const o=s,a=this.columnModel.getPrimaryColumn(o);if(a!==n.rowGroupColumn)if(e)n.setGroupValue(i.getId(),void 0);else{const u=n.getFirstChildOfFirstChild(a);u&&n.setGroupValue(i.getId(),u.key)}})})}};w([O("columnModel")],Eg.prototype,"columnModel",2);w([O("rowNodeSorter")],Eg.prototype,"rowNodeSorter",2);Eg=w([ce("sortService")],Eg);var nw=class extends ee{filter(t){const e=this.filterManager.isChildFilterPresent();this.filterNodes(e,t)}filterNodes(t,e){const n=(r,i)=>{r.hasChildren()&&t&&!i?r.childrenAfterFilter=r.childrenAfterGroup.filter(s=>{const o=s.childrenAfterFilter&&s.childrenAfterFilter.length>0,a=s.data&&this.filterManager.doesRowPassFilter({rowNode:s});return o||a}):r.childrenAfterFilter=r.childrenAfterGroup,r.sibling&&(r.sibling.childrenAfterFilter=r.childrenAfterFilter)};if(this.doingTreeDataFiltering()){const r=(s,o)=>{if(s.childrenAfterGroup)for(let a=0;a<s.childrenAfterGroup.length;a++){const l=s.childrenAfterGroup[a],u=o||this.filterManager.doesRowPassFilter({rowNode:l});l.childrenAfterGroup?r(s.childrenAfterGroup[a],u):n(l,u)}n(s,o)},i=s=>r(s,!1);e.executeFromRootNode(i)}else{const r=i=>n(i,!1);e.forEachChangedNodeDepthFirst(r,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}};w([O("filterManager")],nw.prototype,"filterManager",2);nw=w([ce("filterService")],nw);var Iu=class extends ee{postConstruct(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel,this.addManagedPropertyListener("rowData",()=>this.onRowDataUpdated()))}isActive(){const t=this.gos.exists("getRowId");return this.gos.get("resetRowDataOnUpdate")?!1:t}setRowData(t){const e=this.createTransactionForRowData(t);if(!e)return;const[n,r]=e;this.clientSideRowModel.updateRowData(n,r)}createTransactionForRowData(t){if(be.missing(this.clientSideRowModel)){console.error("AG Grid: ImmutableService only works with ClientSideRowModel");return}const e=this.gos.getCallback("getRowId");if(e==null){console.error("AG Grid: ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!");return}const n={remove:[],update:[],add:[]},r=this.clientSideRowModel.getCopyOfNodesMap(),s=this.gos.get("suppressMaintainUnsortedOrder")?void 0:{};return be.exists(t)&&t.forEach((o,a)=>{const l=e({data:o,level:0}),u=r[l];s&&(s[l]=a),u?(u.data!==o&&n.update.push(o),r[l]=void 0):n.add.push(o)}),be.iterateObject(r,(o,a)=>{a&&n.remove.push(a.data)}),[n,s]}onRowDataUpdated(){const t=this.gos.get("rowData");t&&(this.isActive()?this.setRowData(t):(this.selectionService.reset("rowDataChanged"),this.clientSideRowModel.setRowData(t)))}};w([O("rowModel")],Iu.prototype,"rowModel",2);w([O("rowRenderer")],Iu.prototype,"rowRenderer",2);w([O("selectionService")],Iu.prototype,"selectionService",2);w([te],Iu.prototype,"postConstruct",1);Iu=w([ce("immutableService")],Iu);var Die="31.3.4",Oie={version:Die,moduleName:"@ag-grid-community/client-side-row-model",rowModel:"clientSide",beans:[Rr,ew,Sg,tw,Eg,nw,Iu]},Mie=Object.defineProperty,Fie=Object.getOwnPropertyDescriptor,Dr=(t,e,n,r)=>{for(var i=r>1?void 0:r?Fie(e,n):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(r?o(e,n,i):o(i))||i);return r&&i&&Mie(e,n,i),i},Nie=(t,e)=>(n,r)=>e(n,r,t),bg=class extends b_{constructor(t,e,n){super(t),this.parentCache=e,this.params=n,this.startRow=t*n.blockSize,this.endRow=this.startRow+n.blockSize}postConstruct(){this.createRowNodes()}getBlockStateJson(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}}setDataAndId(t,e,n){be.exists(e)?t.setDataAndId(e,n.toString()):t.setDataAndId(void 0,void 0)}loadFromDatasource(){const t=this.createLoadParams();if(be.missing(this.params.datasource.getRows)){console.warn("AG Grid: datasource is missing getRows method");return}window.setTimeout(()=>{this.params.datasource.getRows(t)},0)}processServerFail(){}createLoadParams(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gos.getGridCommonParams().context}}forEachNode(t,e,n){this.rowNodes.forEach((r,i)=>{this.startRow+i<n&&t(r,e.next())})}getLastAccessed(){return this.lastAccessed}getRow(t,e=!1){e||(this.lastAccessed=this.params.lastAccessedSequence.next());const n=t-this.startRow;return this.rowNodes[n]}getStartRow(){return this.startRow}getEndRow(){return this.endRow}createRowNodes(){this.rowNodes=[];for(let t=0;t<this.params.blockSize;t++){const e=this.startRow+t,n=new Ge(this.beans);n.setRowHeight(this.params.rowHeight),n.uiLevel=0,n.setRowIndex(e),n.setRowTop(this.params.rowHeight*e),this.rowNodes.push(n)}}processServerResult(t){this.rowNodes.forEach((n,r)=>{const i=t.rowData?t.rowData[r]:void 0;!n.id&&n.alreadyRendered&&i&&(this.rowNodes[r]=new Ge(this.beans),this.rowNodes[r].setRowIndex(n.rowIndex),this.rowNodes[r].setRowTop(n.rowTop),this.rowNodes[r].setRowHeight(n.rowHeight),n.clearRowTopAndRowIndex()),this.setDataAndId(this.rowNodes[r],i,this.startRow+r)});const e=t.rowCount!=null&&t.rowCount>=0?t.rowCount:void 0;this.parentCache.pageLoaded(this,e)}destroyRowNodes(){this.rowNodes.forEach(t=>{t.clearRowTopAndRowIndex()})}};Dr([O("beans")],bg.prototype,"beans",2);Dr([te],bg.prototype,"postConstruct",1);Dr([Pr],bg.prototype,"destroyRowNodes",1);var Lh=class Gz extends ee{constructor(e){super(),this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount,this.params=e}setBeans(e){this.logger=e.create("InfiniteCache")}getRow(e,n=!1){const r=Math.floor(e/this.params.blockSize);let i=this.blocks[r];if(!i){if(n)return;i=this.createBlock(r)}return i.getRow(e)}createBlock(e){const n=this.createBean(new bg(e,this,this.params));return this.blocks[n.getId()]=n,this.blockCount++,this.purgeBlocksIfNeeded(n),this.params.rowNodeBlockLoader.addBlock(n),n}refreshCache(){if(this.blockCount==0){this.purgeCache();return}this.getBlocksInOrder().forEach(n=>n.setStateWaitingToLoad()),this.params.rowNodeBlockLoader.checkBlockToLoad()}destroyAllBlocks(){this.getBlocksInOrder().forEach(e=>this.destroyBlock(e))}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,n){this.isAlive()&&(this.logger.log(`onPageLoaded: page = ${e.getId()}, lastRow = ${n}`),this.checkRowCount(e,n),this.onCacheUpdated())}purgeBlocksIfNeeded(e){const n=this.getBlocksInOrder().filter(a=>a!=e),r=(a,l)=>l.getLastAccessed()-a.getLastAccessed();n.sort(r);const i=this.params.maxBlocksInCache>0,s=i?this.params.maxBlocksInCache-1:null,o=Gz.MAX_EMPTY_BLOCKS_TO_KEEP-1;n.forEach((a,l)=>{const u=a.getState()===bg.STATE_WAITING_TO_LOAD&&l>=o,c=i?l>=s:!1;if(u||c){if(this.isBlockCurrentlyDisplayed(a)||this.isBlockFocused(a))return;this.removeBlockFromCache(a)}})}isBlockFocused(e){const n=this.focusService.getFocusCellToUseAfterRefresh();if(!n||n.rowPinned!=null)return!1;const r=e.getStartRow(),i=e.getEndRow();return n.rowIndex>=r&&n.rowIndex<i}isBlockCurrentlyDisplayed(e){const n=e.getStartRow(),r=e.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(n,r)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,n){if(typeof n=="number"&&n>=0)this.rowCount=n,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){const i=(e.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<i&&(this.rowCount=i)}}setRowCount(e,n){this.rowCount=e,be.exists(n)&&(this.lastRowIndexKnown=n),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){const n=new Ad;this.getBlocksInOrder().forEach(r=>r.forEachNode(e,n,this.rowCount))}getBlocksInOrder(){const e=(r,i)=>r.getId()-i.getId();return be.getAllValuesInObject(this.blocks).sort(e)}destroyBlock(e){delete this.blocks[e.getId()],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){if(this.isAlive()){this.destroyAllBlocksPastVirtualRowCount();const e={type:x.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(e)}}destroyAllBlocksPastVirtualRowCount(){const e=[];this.getBlocksInOrder().forEach(n=>{n.getId()*this.params.blockSize>=this.rowCount&&e.push(n)}),e.length>0&&e.forEach(n=>this.destroyBlock(n))}purgeCache(){this.getBlocksInOrder().forEach(e=>this.removeBlockFromCache(e)),this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,n){const r=[];let i=-1,s=!1;const o=new Ad;be.missing(e)&&(s=!0);let a=!1;return this.getBlocksInOrder().forEach(u=>{if(!a){if(s&&i+1!==u.getId()){a=!0;return}i=u.getId(),u.forEachNode(c=>{const d=c===e||c===n;(s||d)&&r.push(c),d&&(s=!s)},o,this.rowCount)}}),a||s?[]:r}};Lh.MAX_EMPTY_BLOCKS_TO_KEEP=2;Dr([O("rowRenderer")],Lh.prototype,"rowRenderer",2);Dr([O("focusService")],Lh.prototype,"focusService",2);Dr([Nie(0,Li("loggerFactory"))],Lh.prototype,"setBeans",1);Dr([Pr],Lh.prototype,"destroyAllBlocks",1);var Lie=Lh,Ks=class extends ee{getRowBounds(t){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*t}}ensureRowHeightsValid(t,e,n,r){return!1}init(){this.gos.isRowModelType("infinite")&&(this.rowHeight=this.gos.getRowHeightAsNumber(),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache()),this.verifyProps())}verifyProps(){this.gos.exists("initialGroupOrderComparator")&&be.warnOnce("initialGroupOrderComparator cannot be used with Infinite Row Model as sorting is done on the server side")}start(){this.setDatasource(this.gos.get("datasource"))}destroyDatasource(){this.datasource&&(this.getContext().destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedListener(this.eventService,x.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,x.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,x.EVENT_STORE_UPDATED,this.onCacheUpdated.bind(this)),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=this.gos.getRowHeightAsNumber(),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onFilterChanged(){this.reset()}onSortChanged(){this.reset()}onColumnEverything(){let t;this.cacheParams?t=this.isSortModelDifferent():t=!0,t&&this.reset()}isSortModelDifferent(){return!be.jsonEquals(this.cacheParams.sortModel,this.sortController.getSortModel())}getType(){return"infinite"}setDatasource(t){this.destroyDatasource(),this.datasource=t,t&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(t,e){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(t,e):[]}reset(){if(!this.datasource)return;this.gos.getCallback("getRowId")!=null||this.selectionService.reset("rowDataChanged"),this.resetCache()}createModelUpdatedEvent(){return{type:x.EVENT_MODEL_UPDATED,newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1}}resetCache(){this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:this.filterManager.getFilterModel(),sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.gos.get("infiniteInitialRowCount"),maxBlocksInCache:this.gos.get("maxBlocksInCache"),rowHeight:this.gos.getRowHeightAsNumber(),overflowSize:this.gos.get("cacheOverflowSize"),blockSize:this.gos.get("cacheBlockSize"),lastAccessedSequence:new Ad},this.infiniteCache=this.createBean(new Lie(this.cacheParams)),this.eventService.dispatchEventOnce({type:x.EVENT_ROW_COUNT_READY});const t=this.createModelUpdatedEvent();this.eventService.dispatchEvent(t)}updateRowHeights(){this.forEachNode(e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)});const t=this.createModelUpdatedEvent();this.eventService.dispatchEvent(t)}destroyCache(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))}onCacheUpdated(){const t=this.createModelUpdatedEvent();this.eventService.dispatchEvent(t)}getRow(t){if(this.infiniteCache&&!(t>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(t)}getRowNode(t){let e;return this.forEachNode(n=>{n.id===t&&(e=n)}),e}forEachNode(t){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(t)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(t){return t}getRowIndexAtPixel(t){if(this.rowHeight!==0){const e=Math.floor(t/this.rowHeight),n=this.getRowCount()-1;return e>n?n:e}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(t){return!!this.getRowNode(t.id)}refreshCache(){this.infiniteCache&&this.infiniteCache.refreshCache()}purgeCache(){this.infiniteCache&&this.infiniteCache.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?this.infiniteCache.isLastRowIndexKnown():!1}setRowCount(t,e){this.infiniteCache&&this.infiniteCache.setRowCount(t,e)}};Dr([O("filterManager")],Ks.prototype,"filterManager",2);Dr([O("sortController")],Ks.prototype,"sortController",2);Dr([O("selectionService")],Ks.prototype,"selectionService",2);Dr([O("rowRenderer")],Ks.prototype,"rowRenderer",2);Dr([O("rowNodeBlockLoader")],Ks.prototype,"rowNodeBlockLoader",2);Dr([te],Ks.prototype,"init",1);Dr([Pr],Ks.prototype,"destroyDatasource",1);Ks=Dr([ce("rowModel")],Ks);var kie="31.3.4",Gie={version:kie,moduleName:"@ag-grid-community/infinite-row-model",rowModel:"infinite",beans:[Ks]},Vie=Object.defineProperty,Hie=Object.getOwnPropertyDescriptor,Jr=(t,e,n,r)=>{for(var i=r>1?void 0:r?Hie(e,n):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(r?o(e,n,i):o(i))||i);return r&&i&&Vie(e,n,i),i},Bie=class{setBeans(t){this.beans=t}getFileName(t){const e=this.getDefaultFileExtension();return(t==null||!t.length)&&(t=this.getDefaultFileName()),t.indexOf(".")===-1?`${t}.${e}`:t}getData(t){const e=this.createSerializingSession(t);return this.beans.gridSerializer.serialize(e,t)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},$ie=class{constructor(t){this.groupColumns=[];const{columnModel:e,valueService:n,gos:r,processCellCallback:i,processHeaderCallback:s,processGroupHeaderCallback:o,processRowGroupCallback:a}=t;this.columnModel=e,this.valueService=n,this.gos=r,this.processCellCallback=i,this.processHeaderCallback=s,this.processGroupHeaderCallback=o,this.processRowGroupCallback=a}prepare(t){this.groupColumns=t.filter(e=>!!e.getColDef().showRowGroup)}extractHeaderValue(t){const e=this.getHeaderName(this.processHeaderCallback,t);return e??""}extractRowCellValue(t,e,n,r,i){const o=(!this.gos.get("groupHideOpenParents")||i.footer)&&this.shouldRenderGroupSummaryCell(i,t,e)?this.createValueForGroupNode(t,i):this.valueService.getValue(t,i);return this.processCell({accumulatedRowIndex:n,rowNode:i,column:t,value:o,processCellCallback:this.processCellCallback,type:r})}shouldRenderGroupSummaryCell(t,e,n){var r;if(!(t&&t.group))return!1;if(this.groupColumns.indexOf(e)!==-1){if(((r=t.groupData)==null?void 0:r[e.getId()])!=null||this.gos.isRowModelType("serverSide")&&t.group)return!0;if(t.footer&&t.level===-1){const a=e.getColDef();return a==null||a.showRowGroup===!0||a.showRowGroup===this.columnModel.getRowGroupColumns()[0].getId()}}const o=this.gos.isGroupUseEntireRow(this.columnModel.isPivotMode());return n===0&&o}getHeaderName(t,e){return t?t(this.gos.addGridCommonParams({column:e})):this.columnModel.getDisplayNameForColumn(e,"csv",!0)}createValueForGroupNode(t,e){if(this.processRowGroupCallback)return this.processRowGroupCallback(this.gos.addGridCommonParams({column:t,node:e}));const n=this.gos.get("treeData"),r=this.gos.get("suppressGroupMaintainValueType"),i=l=>{var u,c;if(n||r)return l.key;const d=(u=l.groupData)==null?void 0:u[t.getId()];return!d||!l.rowGroupColumn||l.rowGroupColumn.getColDef().useValueFormatterForExport===!1?d:(c=this.valueService.formatValue(l.rowGroupColumn,l,d))!=null?c:d},s=e.footer,o=[i(e)];if(!this.gos.isGroupMultiAutoColumn())for(;e.parent;)e=e.parent,o.push(i(e));const a=o.reverse().join(" -> ");return s?`Total ${a}`:a}processCell(t){var e;const{accumulatedRowIndex:n,rowNode:r,column:i,value:s,processCellCallback:o,type:a}=t;return o?{value:(e=o(this.gos.addGridCommonParams({accumulatedRowIndex:n,column:i,node:r,value:s,type:a,parseValue:l=>this.valueService.parseValue(i,r,l,this.valueService.getValue(i,r)),formatValue:l=>{var u;return(u=this.valueService.formatValue(i,r,l))!=null?u:l}})))!=null?e:""}:i.getColDef().useValueFormatterForExport!==!1?{value:s??"",valueFormatted:this.valueService.formatValue(i,r,s)}:{value:s??""}}},Wie=class{static download(t,e){const n=document.defaultView||window;if(!n){console.warn("AG Grid: There is no `window` associated with the current `document`");return}const r=document.createElement("a"),i=n.URL.createObjectURL(e);r.setAttribute("href",i),r.setAttribute("download",t),r.style.display="none",document.body.appendChild(r),r.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:n})),document.body.removeChild(r),n.setTimeout(()=>{n.URL.revokeObjectURL(i)},0)}},LL=`\r
`,jie=class extends $ie{constructor(t){super(t),this.isFirstLine=!0,this.result="";const{suppressQuotes:e,columnSeparator:n}=t;this.suppressQuotes=e,this.columnSeparator=n}addCustomContent(t){t&&(typeof t=="string"?(/^\s*\n/.test(t)||this.beginNewLine(),t=t.replace(/\r?\n/g,LL),this.result+=t):t.forEach(e=>{this.beginNewLine(),e.forEach((n,r)=>{r!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(n.data.value||""),n.mergeAcross&&this.appendEmptyCells(n.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(t,e,n,r){n!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(e),this.appendEmptyCells(r)}appendEmptyCells(t){for(let e=1;e<=t;e++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(t,e){e!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(t))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(t,e,n){var r;e!=0&&(this.result+=this.columnSeparator);const i=this.extractRowCellValue(t,e,e,"csv",n);this.result+=this.putInQuotes((r=i.valueFormatted)!=null?r:i.value)}putInQuotes(t){if(this.suppressQuotes)return t;if(t==null)return'""';let e;return typeof t=="string"?e=t:typeof t.toString=="function"?e=t.toString():(console.warn("AG Grid: unknown value type during csv conversion"),e=""),'"'+e.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=LL),this.isFirstLine=!1}},Qa=class extends Bie{postConstruct(){this.setBeans({gridSerializer:this.gridSerializer,gos:this.gos})}getMergedParams(t){const e=this.gos.get("defaultCsvExportParams");return Object.assign({},e,t)}export(t){if(this.isExportSuppressed()){console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration.");return}const e=this.getMergedParams(t),n=this.getData(e),r=new Blob(["\uFEFF",n],{type:"text/plain"}),i=typeof e.fileName=="function"?e.fileName(this.gos.getGridCommonParams()):e.fileName;Wie.download(this.getFileName(i),r)}exportDataAsCsv(t){this.export(t)}getDataAsCsv(t,e=!1){const n=e?Object.assign({},t):this.getMergedParams(t);return this.getData(n)}getDefaultFileExtension(){return"csv"}createSerializingSession(t){const{columnModel:e,valueService:n,gos:r}=this,{processCellCallback:i,processHeaderCallback:s,processGroupHeaderCallback:o,processRowGroupCallback:a,suppressQuotes:l,columnSeparator:u}=t;return new jie({columnModel:e,valueService:n,gos:r,processCellCallback:i||void 0,processHeaderCallback:s||void 0,processGroupHeaderCallback:o||void 0,processRowGroupCallback:a||void 0,suppressQuotes:l||!1,columnSeparator:u||","})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}};Jr([O("columnModel")],Qa.prototype,"columnModel",2);Jr([O("valueService")],Qa.prototype,"valueService",2);Jr([O("gridSerializer")],Qa.prototype,"gridSerializer",2);Jr([O("gridOptionsService")],Qa.prototype,"gos",2);Jr([te],Qa.prototype,"postConstruct",1);Qa=Jr([ce("csvCreator")],Qa);var qs=class extends ee{serialize(t,e={}){const{allColumns:n,columnKeys:r,skipRowGroups:i}=e,s=this.getColumnsToExport(n,i,r);return be.compose(this.prepareSession(s),this.prependContent(e),this.exportColumnGroups(e,s),this.exportHeaders(e,s),this.processPinnedTopRows(e,s),this.processRows(e,s),this.processPinnedBottomRows(e,s),this.appendContent(e))(t).parse()}processRow(t,e,n,r){const i=e.shouldRowBeSkipped||(()=>!1),s=this.gos.get("groupRemoveSingleChildren"),o=this.gos.get("groupRemoveLowestSingleChildren"),l=e.rowPositions!=null||!!e.onlySelected,u=this.gos.get("groupHideOpenParents")&&!l,c=this.columnModel.isPivotMode()?r.leafGroup:!r.group,d=!!r.footer;e.skipRowGroups;const h=o&&r.leafGroup,f=r.allChildrenCount===1&&(s||h);if(!c&&!d&&(e.skipRowGroups||f||u)||e.onlySelected&&!r.isSelected()||e.skipPinnedTop&&r.rowPinned==="top"||e.skipPinnedBottom&&r.rowPinned==="bottom"||r.level===-1&&!c&&!d||i(this.gos.addGridCommonParams({node:r})))return;const v=t.onNewBodyRow(r);if(n.forEach((C,y)=>{v.onColumn(C,y,r)}),e.getCustomContentBelowRow){const C=e.getCustomContentBelowRow(this.gos.addGridCommonParams({node:r}));C&&t.addCustomContent(C)}}appendContent(t){return e=>{const n=t.appendContent;return n&&e.addCustomContent(n),e}}prependContent(t){return e=>{const n=t.prependContent;return n&&e.addCustomContent(n),e}}prepareSession(t){return e=>(e.prepare(t),e)}exportColumnGroups(t,e){return n=>{if(!t.skipColumnGroupHeaders){const r=new xj,i=this.displayedGroupCreator.createDisplayedGroups(e,r,null);this.recursivelyAddHeaderGroups(i,n,t.processGroupHeaderCallback)}return n}}exportHeaders(t,e){return n=>{if(!t.skipColumnHeaders){const r=n.onNewHeaderRow();e.forEach((i,s)=>{r.onColumn(i,s,void 0)})}return n}}processPinnedTopRows(t,e){return n=>{const r=this.processRow.bind(this,n,t,e);return t.rowPositions?t.rowPositions.filter(i=>i.rowPinned==="top").sort((i,s)=>i.rowIndex-s.rowIndex).map(i=>this.pinnedRowModel.getPinnedTopRow(i.rowIndex)).forEach(r):this.pinnedRowModel.forEachPinnedTopRow(r),n}}processRows(t,e){return n=>{const r=this.rowModel,i=r.getType(),s=i==="clientSide",o=i==="serverSide",a=!s&&t.onlySelected,l=this.processRow.bind(this,n,t,e),{exportedRows:u="filteredAndSorted"}=t;if(t.rowPositions)t.rowPositions.filter(c=>c.rowPinned==null).sort((c,d)=>c.rowIndex-d.rowIndex).map(c=>r.getRow(c.rowIndex)).forEach(l);else if(this.columnModel.isPivotMode())s?r.forEachPivotNode(l,!0):o?r.forEachNodeAfterFilterAndSort(l,!0):r.forEachNode(l);else if(t.onlySelectedAllPages||a){const c=this.selectionService.getSelectedNodes();this.replicateSortedOrder(c),c.forEach(l)}else u==="all"?r.forEachNode(l):s||o?r.forEachNodeAfterFilterAndSort(l,!0):r.forEachNode(l);return n}}replicateSortedOrder(t){const e=this.sortController.getSortOptions(),n=(r,i)=>{var s,o,a,l;return r.rowIndex!=null&&i.rowIndex!=null?r.rowIndex-i.rowIndex:r.level===i.level?((s=r.parent)==null?void 0:s.id)===((o=i.parent)==null?void 0:o.id)?this.rowNodeSorter.compareRowNodes(e,{rowNode:r,currentPos:(a=r.rowIndex)!=null?a:-1},{rowNode:i,currentPos:(l=i.rowIndex)!=null?l:-1}):n(r.parent,i.parent):r.level>i.level?n(r.parent,i):n(r,i.parent)};t.sort(n)}processPinnedBottomRows(t,e){return n=>{const r=this.processRow.bind(this,n,t,e);return t.rowPositions?t.rowPositions.filter(i=>i.rowPinned==="bottom").sort((i,s)=>i.rowIndex-s.rowIndex).map(i=>this.pinnedRowModel.getPinnedBottomRow(i.rowIndex)).forEach(r):this.pinnedRowModel.forEachPinnedBottomRow(r),n}}getColumnsToExport(t=!1,e=!1,n){const r=this.columnModel.isPivotMode();if(n&&n.length)return this.columnModel.getGridColumns(n);const i=this.gos.get("treeData");let s=[];return t&&!r?s=this.columnModel.getAllGridColumns():s=this.columnModel.getAllDisplayedColumns(),e&&!i&&(s=s.filter(o=>o.getColId()!==bd)),s}recursivelyAddHeaderGroups(t,e,n){const r=[];t.forEach(i=>{const s=i;s.getChildren&&s.getChildren().forEach(o=>r.push(o))}),t.length>0&&t[0]instanceof Sn&&this.doAddHeaderHeader(e,t,n),r&&r.length>0&&this.recursivelyAddHeaderGroups(r,e,n)}doAddHeaderHeader(t,e,n){const r=t.onNewHeaderGroupingRow();let i=0;e.forEach(s=>{const o=s;let a;n?a=n(this.gos.addGridCommonParams({columnGroup:o})):a=this.columnModel.getDisplayNameForColumnGroup(o,"header");const l=o.getLeafColumns().reduce((u,c,d,h)=>{let f=be.last(u);return c.getColumnGroupShow()==="open"?(!f||f[1]!=null)&&(f=[d],u.push(f)):f&&f[1]==null&&(f[1]=d-1),d===h.length-1&&f&&f[1]==null&&(f[1]=d),u},[]);r.onColumn(o,a||"",i++,o.getLeafColumns().length-1,l)})}};Jr([O("displayedGroupCreator")],qs.prototype,"displayedGroupCreator",2);Jr([O("columnModel")],qs.prototype,"columnModel",2);Jr([O("rowModel")],qs.prototype,"rowModel",2);Jr([O("pinnedRowModel")],qs.prototype,"pinnedRowModel",2);Jr([O("selectionService")],qs.prototype,"selectionService",2);Jr([O("rowNodeSorter")],qs.prototype,"rowNodeSorter",2);Jr([O("sortController")],qs.prototype,"sortController",2);qs=Jr([ce("gridSerializer")],qs);var Uie="31.3.4",zie={version:Uie,moduleName:"@ag-grid-community/csv-export",beans:[Qa,qs]},{utf8_encode:RLe}=be;nt.__registerModules([Oie,Gie,zie],!1,void 0);var kh={};/**
 * @license React
 * react-dom-server-legacy.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vz=I;function He(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Lr=Object.prototype.hasOwnProperty,Kie=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,kL={},GL={};function Hz(t){return Lr.call(GL,t)?!0:Lr.call(kL,t)?!1:Kie.test(t)?GL[t]=!0:(kL[t]=!0,!1)}function Or(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var qn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){qn[t]=new Or(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];qn[e]=new Or(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){qn[t]=new Or(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){qn[t]=new Or(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){qn[t]=new Or(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){qn[t]=new Or(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){qn[t]=new Or(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){qn[t]=new Or(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){qn[t]=new Or(t,5,!1,t.toLowerCase(),null,!1,!1)});var cD=/[\-:]([a-z])/g;function dD(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(cD,dD);qn[e]=new Or(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(cD,dD);qn[e]=new Or(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(cD,dD);qn[e]=new Or(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){qn[t]=new Or(t,1,!1,t.toLowerCase(),null,!1,!1)});qn.xlinkHref=new Or("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){qn[t]=new Or(t,1,!1,t.toLowerCase(),null,!0,!0)});var Vy={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qie=["Webkit","ms","Moz","O"];Object.keys(Vy).forEach(function(t){qie.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Vy[e]=Vy[t]})});var Yie=/["'&<>]/;function vr(t){if(typeof t=="boolean"||typeof t=="number")return""+t;t=""+t;var e=Yie.exec(t);if(e){var n="",r,i=0;for(r=e.index;r<t.length;r++){switch(t.charCodeAt(r)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#x27;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}i!==r&&(n+=t.substring(i,r)),i=r+1,n+=e}t=i!==r?n+t.substring(i,r):n}return t}var Qie=/([A-Z])/g,Xie=/^ms-/,O_=Array.isArray;function no(t,e){return{insertionMode:t,selectedValue:e}}function Jie(t,e,n){switch(e){case"select":return no(1,n.value!=null?n.value:n.defaultValue);case"svg":return no(2,null);case"math":return no(3,null);case"foreignObject":return no(1,null);case"table":return no(4,null);case"thead":case"tbody":case"tfoot":return no(5,null);case"colgroup":return no(7,null);case"tr":return no(6,null)}return 4<=t.insertionMode||t.insertionMode===0?no(1,null):t}var VL=new Map;function Bz(t,e,n){if(typeof n!="object")throw Error(He(62));e=!0;for(var r in n)if(Lr.call(n,r)){var i=n[r];if(i!=null&&typeof i!="boolean"&&i!==""){if(r.indexOf("--")===0){var s=vr(r);i=vr((""+i).trim())}else{s=r;var o=VL.get(s);o!==void 0||(o=vr(s.replace(Qie,"-$1").toLowerCase().replace(Xie,"-ms-")),VL.set(s,o)),s=o,i=typeof i=="number"?i===0||Lr.call(Vy,r)?""+i:i+"px":vr((""+i).trim())}e?(e=!1,t.push(' style="',s,":",i)):t.push(";",s,":",i)}}e||t.push('"')}function ni(t,e,n,r){switch(n){case"style":Bz(t,e,r);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N"){if(e=qn.hasOwnProperty(n)?qn[n]:null,e!==null){switch(typeof r){case"function":case"symbol":return;case"boolean":if(!e.acceptsBooleans)return}switch(n=e.attributeName,e.type){case 3:r&&t.push(" ",n,'=""');break;case 4:r===!0?t.push(" ",n,'=""'):r!==!1&&t.push(" ",n,'="',vr(r),'"');break;case 5:isNaN(r)||t.push(" ",n,'="',vr(r),'"');break;case 6:!isNaN(r)&&1<=r&&t.push(" ",n,'="',vr(r),'"');break;default:e.sanitizeURL&&(r=""+r),t.push(" ",n,'="',vr(r),'"')}}else if(Hz(n)){switch(typeof r){case"function":case"symbol":return;case"boolean":if(e=n.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-")return}t.push(" ",n,'="',vr(r),'"')}}}function Hy(t,e,n){if(e!=null){if(n!=null)throw Error(He(60));if(typeof e!="object"||!("__html"in e))throw Error(He(61));e=e.__html,e!=null&&t.push(""+e)}}function Zie(t){var e="";return Vz.Children.forEach(t,function(n){n!=null&&(e+=n)}),e}function QT(t,e,n,r){t.push(_s(n));var i=n=null,s;for(s in e)if(Lr.call(e,s)){var o=e[s];if(o!=null)switch(s){case"children":n=o;break;case"dangerouslySetInnerHTML":i=o;break;default:ni(t,r,s,o)}}return t.push(">"),Hy(t,i,n),typeof n=="string"?(t.push(vr(n)),null):n}var ese=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,HL=new Map;function _s(t){var e=HL.get(t);if(e===void 0){if(!ese.test(t))throw Error(He(65,t));e="<"+t,HL.set(t,e)}return e}function tse(t,e,n,r,i){switch(e){case"select":t.push(_s("select"));var s=null,o=null;for(c in n)if(Lr.call(n,c)){var a=n[c];if(a!=null)switch(c){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;case"defaultValue":case"value":break;default:ni(t,r,c,a)}}return t.push(">"),Hy(t,o,s),s;case"option":o=i.selectedValue,t.push(_s("option"));var l=a=null,u=null,c=null;for(s in n)if(Lr.call(n,s)){var d=n[s];if(d!=null)switch(s){case"children":a=d;break;case"selected":u=d;break;case"dangerouslySetInnerHTML":c=d;break;case"value":l=d;default:ni(t,r,s,d)}}if(o!=null)if(n=l!==null?""+l:Zie(a),O_(o)){for(r=0;r<o.length;r++)if(""+o[r]===n){t.push(' selected=""');break}}else""+o===n&&t.push(' selected=""');else u&&t.push(' selected=""');return t.push(">"),Hy(t,c,a),a;case"textarea":t.push(_s("textarea")),c=o=s=null;for(a in n)if(Lr.call(n,a)&&(l=n[a],l!=null))switch(a){case"children":c=l;break;case"value":s=l;break;case"defaultValue":o=l;break;case"dangerouslySetInnerHTML":throw Error(He(91));default:ni(t,r,a,l)}if(s===null&&o!==null&&(s=o),t.push(">"),c!=null){if(s!=null)throw Error(He(92));if(O_(c)&&1<c.length)throw Error(He(93));s=""+c}return typeof s=="string"&&s[0]===`
`&&t.push(`
`),s!==null&&t.push(vr(""+s)),null;case"input":t.push(_s("input")),l=c=a=s=null;for(o in n)if(Lr.call(n,o)&&(u=n[o],u!=null))switch(o){case"children":case"dangerouslySetInnerHTML":throw Error(He(399,"input"));case"defaultChecked":l=u;break;case"defaultValue":a=u;break;case"checked":c=u;break;case"value":s=u;break;default:ni(t,r,o,u)}return c!==null?ni(t,r,"checked",c):l!==null&&ni(t,r,"checked",l),s!==null?ni(t,r,"value",s):a!==null&&ni(t,r,"value",a),t.push("/>"),null;case"menuitem":t.push(_s("menuitem"));for(var h in n)if(Lr.call(n,h)&&(s=n[h],s!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(He(400));default:ni(t,r,h,s)}return t.push(">"),null;case"title":t.push(_s("title")),s=null;for(d in n)if(Lr.call(n,d)&&(o=n[d],o!=null))switch(d){case"children":s=o;break;case"dangerouslySetInnerHTML":throw Error(He(434));default:ni(t,r,d,o)}return t.push(">"),s;case"listing":case"pre":t.push(_s(e)),o=s=null;for(l in n)if(Lr.call(n,l)&&(a=n[l],a!=null))switch(l){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;default:ni(t,r,l,a)}if(t.push(">"),o!=null){if(s!=null)throw Error(He(60));if(typeof o!="object"||!("__html"in o))throw Error(He(61));n=o.__html,n!=null&&(typeof n=="string"&&0<n.length&&n[0]===`
`?t.push(`
`,n):t.push(""+n))}return typeof s=="string"&&s[0]===`
`&&t.push(`
`),s;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":t.push(_s(e));for(var f in n)if(Lr.call(n,f)&&(s=n[f],s!=null))switch(f){case"children":case"dangerouslySetInnerHTML":throw Error(He(399,e));default:ni(t,r,f,s)}return t.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return QT(t,n,e,r);case"html":return i.insertionMode===0&&t.push("<!DOCTYPE html>"),QT(t,n,e,r);default:if(e.indexOf("-")===-1&&typeof n.is!="string")return QT(t,n,e,r);t.push(_s(e)),o=s=null;for(u in n)if(Lr.call(n,u)&&(a=n[u],a!=null))switch(u){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;case"style":Bz(t,r,a);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:Hz(u)&&typeof a!="function"&&typeof a!="symbol"&&t.push(" ",u,'="',vr(a),'"')}return t.push(">"),Hy(t,o,s),s}}function BL(t,e,n){if(t.push('<!--$?--><template id="'),n===null)throw Error(He(395));return t.push(n),t.push('"></template>')}function nse(t,e,n,r){switch(n.insertionMode){case 0:case 1:return t.push('<div hidden id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 2:return t.push('<svg aria-hidden="true" style="display:none" id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 3:return t.push('<math aria-hidden="true" style="display:none" id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 4:return t.push('<table hidden id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 5:return t.push('<table hidden><tbody id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 6:return t.push('<table hidden><tr id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 7:return t.push('<table hidden><colgroup id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');default:throw Error(He(397))}}function rse(t,e){switch(e.insertionMode){case 0:case 1:return t.push("</div>");case 2:return t.push("</svg>");case 3:return t.push("</math>");case 4:return t.push("</table>");case 5:return t.push("</tbody></table>");case 6:return t.push("</tr></table>");case 7:return t.push("</colgroup></table>");default:throw Error(He(397))}}var ise=/[<\u2028\u2029]/g;function XT(t){return JSON.stringify(t).replace(ise,function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}function sse(t,e){return e=e===void 0?"":e,{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:e+"P:",segmentPrefix:e+"S:",boundaryPrefix:e+"B:",idPrefix:e,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:t}}function $L(t,e,n,r){return n.generateStaticMarkup?(t.push(vr(e)),!1):(e===""?t=r:(r&&t.push("<!-- -->"),t.push(vr(e)),t=!0),t)}var mf=Object.assign,ose=Symbol.for("react.element"),$z=Symbol.for("react.portal"),Wz=Symbol.for("react.fragment"),jz=Symbol.for("react.strict_mode"),Uz=Symbol.for("react.profiler"),zz=Symbol.for("react.provider"),Kz=Symbol.for("react.context"),qz=Symbol.for("react.forward_ref"),Yz=Symbol.for("react.suspense"),Qz=Symbol.for("react.suspense_list"),Xz=Symbol.for("react.memo"),hD=Symbol.for("react.lazy"),ase=Symbol.for("react.scope"),lse=Symbol.for("react.debug_trace_mode"),use=Symbol.for("react.legacy_hidden"),cse=Symbol.for("react.default_value"),WL=Symbol.iterator;function M_(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Wz:return"Fragment";case $z:return"Portal";case Uz:return"Profiler";case jz:return"StrictMode";case Yz:return"Suspense";case Qz:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Kz:return(t.displayName||"Context")+".Consumer";case zz:return(t._context.displayName||"Context")+".Provider";case qz:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Xz:return e=t.displayName||null,e!==null?e:M_(t.type)||"Memo";case hD:e=t._payload,t=t._init;try{return M_(t(e))}catch{}}return null}var Jz={};function jL(t,e){if(t=t.contextTypes,!t)return Jz;var n={},r;for(r in t)n[r]=e[r];return n}var jl=null;function OE(t,e){if(t!==e){t.context._currentValue2=t.parentValue,t=t.parent;var n=e.parent;if(t===null){if(n!==null)throw Error(He(401))}else{if(n===null)throw Error(He(401));OE(t,n)}e.context._currentValue2=e.value}}function Zz(t){t.context._currentValue2=t.parentValue,t=t.parent,t!==null&&Zz(t)}function e4(t){var e=t.parent;e!==null&&e4(e),t.context._currentValue2=t.value}function t4(t,e){if(t.context._currentValue2=t.parentValue,t=t.parent,t===null)throw Error(He(402));t.depth===e.depth?OE(t,e):t4(t,e)}function n4(t,e){var n=e.parent;if(n===null)throw Error(He(402));t.depth===n.depth?OE(t,n):n4(t,n),e.context._currentValue2=e.value}function rw(t){var e=jl;e!==t&&(e===null?e4(t):t===null?Zz(e):e.depth===t.depth?OE(e,t):e.depth>t.depth?t4(e,t):n4(e,t),jl=t)}var UL={isMounted:function(){return!1},enqueueSetState:function(t,e){t=t._reactInternals,t.queue!==null&&t.queue.push(e)},enqueueReplaceState:function(t,e){t=t._reactInternals,t.replace=!0,t.queue=[e]},enqueueForceUpdate:function(){}};function zL(t,e,n,r){var i=t.state!==void 0?t.state:null;t.updater=UL,t.props=n,t.state=i;var s={queue:[],replace:!1};t._reactInternals=s;var o=e.contextType;if(t.context=typeof o=="object"&&o!==null?o._currentValue2:r,o=e.getDerivedStateFromProps,typeof o=="function"&&(o=o(n,i),i=o==null?i:mf({},i,o),t.state=i),typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function"&&(typeof t.UNSAFE_componentWillMount=="function"||typeof t.componentWillMount=="function"))if(e=t.state,typeof t.componentWillMount=="function"&&t.componentWillMount(),typeof t.UNSAFE_componentWillMount=="function"&&t.UNSAFE_componentWillMount(),e!==t.state&&UL.enqueueReplaceState(t,t.state,null),s.queue!==null&&0<s.queue.length)if(e=s.queue,o=s.replace,s.queue=null,s.replace=!1,o&&e.length===1)t.state=e[0];else{for(s=o?e[0]:t.state,i=!0,o=o?1:0;o<e.length;o++){var a=e[o];a=typeof a=="function"?a.call(t,s,n,r):a,a!=null&&(i?(i=!1,s=mf({},s,a)):mf(s,a))}t.state=s}else s.queue=null}var dse={id:1,overflow:""};function F_(t,e,n){var r=t.id;t=t.overflow;var i=32-By(r)-1;r&=~(1<<i),n+=1;var s=32-By(e)+i;if(30<s){var o=i-i%5;return s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,{id:1<<32-By(e)+i|n<<i|r,overflow:s+t}}return{id:1<<s|n<<i|r,overflow:t}}var By=Math.clz32?Math.clz32:fse,hse=Math.log,pse=Math.LN2;function fse(t){return t>>>=0,t===0?32:31-(hse(t)/pse|0)|0}function gse(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mse=typeof Object.is=="function"?Object.is:gse,Oo=null,pD=null,$y=null,xt=null,Yp=!1,iw=!1,Tg=0,Sa=null,ME=0;function Ml(){if(Oo===null)throw Error(He(321));return Oo}function KL(){if(0<ME)throw Error(He(312));return{memoizedState:null,queue:null,next:null}}function fD(){return xt===null?$y===null?(Yp=!1,$y=xt=KL()):(Yp=!0,xt=$y):xt.next===null?(Yp=!1,xt=xt.next=KL()):(Yp=!0,xt=xt.next),xt}function gD(){pD=Oo=null,iw=!1,$y=null,ME=0,xt=Sa=null}function r4(t,e){return typeof e=="function"?e(t):e}function qL(t,e,n){if(Oo=Ml(),xt=fD(),Yp){var r=xt.queue;if(e=r.dispatch,Sa!==null&&(n=Sa.get(r),n!==void 0)){Sa.delete(r),r=xt.memoizedState;do r=t(r,n.action),n=n.next;while(n!==null);return xt.memoizedState=r,[r,e]}return[xt.memoizedState,e]}return t=t===r4?typeof e=="function"?e():e:n!==void 0?n(e):e,xt.memoizedState=t,t=xt.queue={last:null,dispatch:null},t=t.dispatch=vse.bind(null,Oo,t),[xt.memoizedState,t]}function YL(t,e){if(Oo=Ml(),xt=fD(),e=e===void 0?null:e,xt!==null){var n=xt.memoizedState;if(n!==null&&e!==null){var r=n[1];e:if(r===null)r=!1;else{for(var i=0;i<r.length&&i<e.length;i++)if(!mse(e[i],r[i])){r=!1;break e}r=!0}if(r)return n[0]}}return t=t(),xt.memoizedState=[t,e],t}function vse(t,e,n){if(25<=ME)throw Error(He(301));if(t===Oo)if(iw=!0,t={action:n,next:null},Sa===null&&(Sa=new Map),n=Sa.get(e),n===void 0)Sa.set(e,t);else{for(e=n;e.next!==null;)e=e.next;e.next=t}}function yse(){throw Error(He(394))}function Uv(){}var QL={readContext:function(t){return t._currentValue2},useContext:function(t){return Ml(),t._currentValue2},useMemo:YL,useReducer:qL,useRef:function(t){Oo=Ml(),xt=fD();var e=xt.memoizedState;return e===null?(t={current:t},xt.memoizedState=t):e},useState:function(t){return qL(r4,t)},useInsertionEffect:Uv,useLayoutEffect:function(){},useCallback:function(t,e){return YL(function(){return t},e)},useImperativeHandle:Uv,useEffect:Uv,useDebugValue:Uv,useDeferredValue:function(t){return Ml(),t},useTransition:function(){return Ml(),[!1,yse]},useId:function(){var t=pD.treeContext,e=t.overflow;t=t.id,t=(t&~(1<<32-By(t)-1)).toString(32)+e;var n=Wy;if(n===null)throw Error(He(404));return e=Tg++,t=":"+n.idPrefix+"R"+t,0<e&&(t+="H"+e.toString(32)),t+":"},useMutableSource:function(t,e){return Ml(),e(t._source)},useSyncExternalStore:function(t,e,n){if(n===void 0)throw Error(He(407));return n()}},Wy=null,JT=Vz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function Cse(t){return console.error(t),null}function Qp(){}function wse(t,e,n,r,i,s,o,a,l){var u=[],c=new Set;return e={destination:null,responseState:e,progressiveChunkSize:r===void 0?12800:r,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:c,pingedTasks:u,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:i===void 0?Cse:i,onAllReady:Qp,onShellReady:o===void 0?Qp:o,onShellError:Qp,onFatalError:Qp},n=sw(e,0,null,n,!1,!1),n.parentFlushed=!0,t=mD(e,t,null,n,c,Jz,null,dse),u.push(t),e}function mD(t,e,n,r,i,s,o,a){t.allPendingTasks++,n===null?t.pendingRootTasks++:n.pendingTasks++;var l={node:e,ping:function(){var u=t.pingedTasks;u.push(l),u.length===1&&o4(t)},blockedBoundary:n,blockedSegment:r,abortSet:i,legacyContext:s,context:o,treeContext:a};return i.add(l),l}function sw(t,e,n,r,i,s){return{status:0,id:-1,index:e,parentFlushed:!1,chunks:[],children:[],formatContext:r,boundary:n,lastPushedText:i,textEmbedded:s}}function Rg(t,e){if(t=t.onError(e),t!=null&&typeof t!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof t+'" instead');return t}function ow(t,e){var n=t.onShellError;n(e),n=t.onFatalError,n(e),t.destination!==null?(t.status=2,t.destination.destroy(e)):(t.status=1,t.fatalError=e)}function XL(t,e,n,r,i){for(Oo={},pD=e,Tg=0,t=n(r,i);iw;)iw=!1,Tg=0,ME+=1,xt=null,t=n(r,i);return gD(),t}function JL(t,e,n,r){var i=n.render(),s=r.childContextTypes;if(s!=null){var o=e.legacyContext;if(typeof n.getChildContext!="function")r=o;else{n=n.getChildContext();for(var a in n)if(!(a in s))throw Error(He(108,M_(r)||"Unknown",a));r=mf({},o,n)}e.legacyContext=r,ai(t,e,i),e.legacyContext=o}else ai(t,e,i)}function ZL(t,e){if(t&&t.defaultProps){e=mf({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function N_(t,e,n,r,i){if(typeof n=="function")if(n.prototype&&n.prototype.isReactComponent){i=jL(n,e.legacyContext);var s=n.contextType;s=new n(r,typeof s=="object"&&s!==null?s._currentValue2:i),zL(s,n,r,i),JL(t,e,s,n)}else{s=jL(n,e.legacyContext),i=XL(t,e,n,r,s);var o=Tg!==0;if(typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0)zL(i,n,r,s),JL(t,e,i,n);else if(o){r=e.treeContext,e.treeContext=F_(r,1,0);try{ai(t,e,i)}finally{e.treeContext=r}}else ai(t,e,i)}else if(typeof n=="string"){switch(i=e.blockedSegment,s=tse(i.chunks,n,r,t.responseState,i.formatContext),i.lastPushedText=!1,o=i.formatContext,i.formatContext=Jie(o,n,r),L_(t,e,s),i.formatContext=o,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:i.chunks.push("</",n,">")}i.lastPushedText=!1}else{switch(n){case use:case lse:case jz:case Uz:case Wz:ai(t,e,r.children);return;case Qz:ai(t,e,r.children);return;case ase:throw Error(He(343));case Yz:e:{n=e.blockedBoundary,i=e.blockedSegment,s=r.fallback,r=r.children,o=new Set;var a={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:o,errorDigest:null},l=sw(t,i.chunks.length,a,i.formatContext,!1,!1);i.children.push(l),i.lastPushedText=!1;var u=sw(t,0,null,i.formatContext,!1,!1);u.parentFlushed=!0,e.blockedBoundary=a,e.blockedSegment=u;try{if(L_(t,e,r),t.responseState.generateStaticMarkup||u.lastPushedText&&u.textEmbedded&&u.chunks.push("<!-- -->"),u.status=1,aw(a,u),a.pendingTasks===0)break e}catch(c){u.status=4,a.forceClientRender=!0,a.errorDigest=Rg(t,c)}finally{e.blockedBoundary=n,e.blockedSegment=i}e=mD(t,s,n,l,o,e.legacyContext,e.context,e.treeContext),t.pingedTasks.push(e)}return}if(typeof n=="object"&&n!==null)switch(n.$$typeof){case qz:if(r=XL(t,e,n.render,r,i),Tg!==0){n=e.treeContext,e.treeContext=F_(n,1,0);try{ai(t,e,r)}finally{e.treeContext=n}}else ai(t,e,r);return;case Xz:n=n.type,r=ZL(n,r),N_(t,e,n,r,i);return;case zz:if(i=r.children,n=n._context,r=r.value,s=n._currentValue2,n._currentValue2=r,o=jl,jl=r={parent:o,depth:o===null?0:o.depth+1,context:n,parentValue:s,value:r},e.context=r,ai(t,e,i),t=jl,t===null)throw Error(He(403));r=t.parentValue,t.context._currentValue2=r===cse?t.context._defaultValue:r,t=jl=t.parent,e.context=t;return;case Kz:r=r.children,r=r(n._currentValue2),ai(t,e,r);return;case hD:i=n._init,n=i(n._payload),r=ZL(n,r),N_(t,e,n,r,void 0);return}throw Error(He(130,n==null?n:typeof n,""))}}function ai(t,e,n){if(e.node=n,typeof n=="object"&&n!==null){switch(n.$$typeof){case ose:N_(t,e,n.type,n.props,n.ref);return;case $z:throw Error(He(257));case hD:var r=n._init;n=r(n._payload),ai(t,e,n);return}if(O_(n)){ek(t,e,n);return}if(n===null||typeof n!="object"?r=null:(r=WL&&n[WL]||n["@@iterator"],r=typeof r=="function"?r:null),r&&(r=r.call(n))){if(n=r.next(),!n.done){var i=[];do i.push(n.value),n=r.next();while(!n.done);ek(t,e,i)}return}throw t=Object.prototype.toString.call(n),Error(He(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}typeof n=="string"?(r=e.blockedSegment,r.lastPushedText=$L(e.blockedSegment.chunks,n,t.responseState,r.lastPushedText)):typeof n=="number"&&(r=e.blockedSegment,r.lastPushedText=$L(e.blockedSegment.chunks,""+n,t.responseState,r.lastPushedText))}function ek(t,e,n){for(var r=n.length,i=0;i<r;i++){var s=e.treeContext;e.treeContext=F_(s,r,i);try{L_(t,e,n[i])}finally{e.treeContext=s}}}function L_(t,e,n){var r=e.blockedSegment.formatContext,i=e.legacyContext,s=e.context;try{return ai(t,e,n)}catch(l){if(gD(),typeof l=="object"&&l!==null&&typeof l.then=="function"){n=l;var o=e.blockedSegment,a=sw(t,o.chunks.length,null,o.formatContext,o.lastPushedText,!0);o.children.push(a),o.lastPushedText=!1,t=mD(t,e.node,e.blockedBoundary,a,e.abortSet,e.legacyContext,e.context,e.treeContext).ping,n.then(t,t),e.blockedSegment.formatContext=r,e.legacyContext=i,e.context=s,rw(s)}else throw e.blockedSegment.formatContext=r,e.legacyContext=i,e.context=s,rw(s),l}}function Sse(t){var e=t.blockedBoundary;t=t.blockedSegment,t.status=3,s4(this,e,t)}function i4(t,e,n){var r=t.blockedBoundary;t.blockedSegment.status=3,r===null?(e.allPendingTasks--,e.status!==2&&(e.status=2,e.destination!==null&&e.destination.push(null))):(r.pendingTasks--,r.forceClientRender||(r.forceClientRender=!0,t=n===void 0?Error(He(432)):n,r.errorDigest=e.onError(t),r.parentFlushed&&e.clientRenderedBoundaries.push(r)),r.fallbackAbortableTasks.forEach(function(i){return i4(i,e,n)}),r.fallbackAbortableTasks.clear(),e.allPendingTasks--,e.allPendingTasks===0&&(r=e.onAllReady,r()))}function aw(t,e){if(e.chunks.length===0&&e.children.length===1&&e.children[0].boundary===null){var n=e.children[0];n.id=e.id,n.parentFlushed=!0,n.status===1&&aw(t,n)}else t.completedSegments.push(e)}function s4(t,e,n){if(e===null){if(n.parentFlushed){if(t.completedRootSegment!==null)throw Error(He(389));t.completedRootSegment=n}t.pendingRootTasks--,t.pendingRootTasks===0&&(t.onShellError=Qp,e=t.onShellReady,e())}else e.pendingTasks--,e.forceClientRender||(e.pendingTasks===0?(n.parentFlushed&&n.status===1&&aw(e,n),e.parentFlushed&&t.completedBoundaries.push(e),e.fallbackAbortableTasks.forEach(Sse,t),e.fallbackAbortableTasks.clear()):n.parentFlushed&&n.status===1&&(aw(e,n),e.completedSegments.length===1&&e.parentFlushed&&t.partialBoundaries.push(e)));t.allPendingTasks--,t.allPendingTasks===0&&(t=t.onAllReady,t())}function o4(t){if(t.status!==2){var e=jl,n=JT.current;JT.current=QL;var r=Wy;Wy=t.responseState;try{var i=t.pingedTasks,s;for(s=0;s<i.length;s++){var o=i[s],a=t,l=o.blockedSegment;if(l.status===0){rw(o.context);try{ai(a,o,o.node),a.responseState.generateStaticMarkup||l.lastPushedText&&l.textEmbedded&&l.chunks.push("<!-- -->"),o.abortSet.delete(o),l.status=1,s4(a,o.blockedBoundary,l)}catch(g){if(gD(),typeof g=="object"&&g!==null&&typeof g.then=="function"){var u=o.ping;g.then(u,u)}else{o.abortSet.delete(o),l.status=4;var c=o.blockedBoundary,d=g,h=Rg(a,d);if(c===null?ow(a,d):(c.pendingTasks--,c.forceClientRender||(c.forceClientRender=!0,c.errorDigest=h,c.parentFlushed&&a.clientRenderedBoundaries.push(c))),a.allPendingTasks--,a.allPendingTasks===0){var f=a.onAllReady;f()}}}finally{}}}i.splice(0,s),t.destination!==null&&vD(t,t.destination)}catch(g){Rg(t,g),ow(t,g)}finally{Wy=r,JT.current=n,n===QL&&rw(e)}}}function zv(t,e,n){switch(n.parentFlushed=!0,n.status){case 0:var r=n.id=t.nextSegmentId++;return n.lastPushedText=!1,n.textEmbedded=!1,t=t.responseState,e.push('<template id="'),e.push(t.placeholderPrefix),t=r.toString(16),e.push(t),e.push('"></template>');case 1:n.status=2;var i=!0;r=n.chunks;var s=0;n=n.children;for(var o=0;o<n.length;o++){for(i=n[o];s<i.index;s++)e.push(r[s]);i=FE(t,e,i)}for(;s<r.length-1;s++)e.push(r[s]);return s<r.length&&(i=e.push(r[s])),i;default:throw Error(He(390))}}function FE(t,e,n){var r=n.boundary;if(r===null)return zv(t,e,n);if(r.parentFlushed=!0,r.forceClientRender)return t.responseState.generateStaticMarkup||(r=r.errorDigest,e.push("<!--$!-->"),e.push("<template"),r&&(e.push(' data-dgst="'),r=vr(r),e.push(r),e.push('"')),e.push("></template>")),zv(t,e,n),t=t.responseState.generateStaticMarkup?!0:e.push("<!--/$-->"),t;if(0<r.pendingTasks){r.rootSegmentID=t.nextSegmentId++,0<r.completedSegments.length&&t.partialBoundaries.push(r);var i=t.responseState,s=i.nextSuspenseID++;return i=i.boundaryPrefix+s.toString(16),r=r.id=i,BL(e,t.responseState,r),zv(t,e,n),e.push("<!--/$-->")}if(r.byteSize>t.progressiveChunkSize)return r.rootSegmentID=t.nextSegmentId++,t.completedBoundaries.push(r),BL(e,t.responseState,r.id),zv(t,e,n),e.push("<!--/$-->");if(t.responseState.generateStaticMarkup||e.push("<!--$-->"),n=r.completedSegments,n.length!==1)throw Error(He(391));return FE(t,e,n[0]),t=t.responseState.generateStaticMarkup?!0:e.push("<!--/$-->"),t}function tk(t,e,n){return nse(e,t.responseState,n.formatContext,n.id),FE(t,e,n),rse(e,n.formatContext)}function nk(t,e,n){for(var r=n.completedSegments,i=0;i<r.length;i++)a4(t,e,n,r[i]);if(r.length=0,t=t.responseState,r=n.id,n=n.rootSegmentID,e.push(t.startInlineScript),t.sentCompleteBoundaryFunction?e.push('$RC("'):(t.sentCompleteBoundaryFunction=!0,e.push('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),r===null)throw Error(He(395));return n=n.toString(16),e.push(r),e.push('","'),e.push(t.segmentPrefix),e.push(n),e.push('")<\/script>')}function a4(t,e,n,r){if(r.status===2)return!0;var i=r.id;if(i===-1){if((r.id=n.rootSegmentID)===-1)throw Error(He(392));return tk(t,e,r)}return tk(t,e,r),t=t.responseState,e.push(t.startInlineScript),t.sentCompleteSegmentFunction?e.push('$RS("'):(t.sentCompleteSegmentFunction=!0,e.push('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),e.push(t.segmentPrefix),i=i.toString(16),e.push(i),e.push('","'),e.push(t.placeholderPrefix),e.push(i),e.push('")<\/script>')}function vD(t,e){try{var n=t.completedRootSegment;if(n!==null&&t.pendingRootTasks===0){FE(t,e,n),t.completedRootSegment=null;var r=t.responseState.bootstrapChunks;for(n=0;n<r.length-1;n++)e.push(r[n]);n<r.length&&e.push(r[n])}var i=t.clientRenderedBoundaries,s;for(s=0;s<i.length;s++){var o=i[s];r=e;var a=t.responseState,l=o.id,u=o.errorDigest,c=o.errorMessage,d=o.errorComponentStack;if(r.push(a.startInlineScript),a.sentClientRenderFunction?r.push('$RX("'):(a.sentClientRenderFunction=!0,r.push('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("')),l===null)throw Error(He(395));if(r.push(l),r.push('"'),u||c||d){r.push(",");var h=XT(u||"");r.push(h)}if(c||d){r.push(",");var f=XT(c||"");r.push(f)}if(d){r.push(",");var g=XT(d);r.push(g)}if(!r.push(")<\/script>")){t.destination=null,s++,i.splice(0,s);return}}i.splice(0,s);var m=t.completedBoundaries;for(s=0;s<m.length;s++)if(!nk(t,e,m[s])){t.destination=null,s++,m.splice(0,s);return}m.splice(0,s);var v=t.partialBoundaries;for(s=0;s<v.length;s++){var C=v[s];e:{i=t,o=e;var y=C.completedSegments;for(a=0;a<y.length;a++)if(!a4(i,o,C,y[a])){a++,y.splice(0,a);var S=!1;break e}y.splice(0,a),S=!0}if(!S){t.destination=null,s++,v.splice(0,s);return}}v.splice(0,s);var _=t.completedBoundaries;for(s=0;s<_.length;s++)if(!nk(t,e,_[s])){t.destination=null,s++,_.splice(0,s);return}_.splice(0,s)}finally{t.allPendingTasks===0&&t.pingedTasks.length===0&&t.clientRenderedBoundaries.length===0&&t.completedBoundaries.length===0&&e.push(null)}}function Ese(t,e){try{var n=t.abortableTasks;n.forEach(function(r){return i4(r,t,e)}),n.clear(),t.destination!==null&&vD(t,t.destination)}catch(r){Rg(t,r),ow(t,r)}}function bse(){}function l4(t,e,n,r){var i=!1,s=null,o="",a={push:function(u){return u!==null&&(o+=u),!0},destroy:function(u){i=!0,s=u}},l=!1;if(t=wse(t,sse(n,e?e.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,bse,void 0,function(){l=!0}),o4(t),Ese(t,r),t.status===1)t.status=2,a.destroy(t.fatalError);else if(t.status!==2&&t.destination===null){t.destination=a;try{vD(t,a)}catch(u){Rg(t,u),ow(t,u)}}if(i)throw s;if(!l)throw Error(He(426));return o}kh.renderToNodeStream=function(){throw Error(He(207))};kh.renderToStaticMarkup=function(t,e){return l4(t,e,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};kh.renderToStaticNodeStream=function(){throw Error(He(208))};kh.renderToString=function(t,e){return l4(t,e,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};kh.version="18.3.1";var yD={};/**
 * @license React
 * react-dom-server.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u4=I;function je(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var li=null,ui=0;function Se(t,e){if(e.length!==0)if(512<e.length)0<ui&&(t.enqueue(new Uint8Array(li.buffer,0,ui)),li=new Uint8Array(512),ui=0),t.enqueue(e);else{var n=li.length-ui;n<e.length&&(n===0?t.enqueue(li):(li.set(e.subarray(0,n),ui),t.enqueue(li),e=e.subarray(n)),li=new Uint8Array(512),ui=0),li.set(e,ui),ui+=e.length}}function Gt(t,e){return Se(t,e),!0}function rk(t){li&&0<ui&&(t.enqueue(new Uint8Array(li.buffer,0,ui)),li=null,ui=0)}var c4=new TextEncoder;function ze(t){return c4.encode(t)}function he(t){return c4.encode(t)}function d4(t,e){typeof t.error=="function"?t.error(e):t.close()}var kr=Object.prototype.hasOwnProperty,Tse=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ik={},sk={};function h4(t){return kr.call(sk,t)?!0:kr.call(ik,t)?!1:Tse.test(t)?sk[t]=!0:(ik[t]=!0,!1)}function Mr(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Yn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Yn[t]=new Mr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Yn[e]=new Mr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Yn[t]=new Mr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Yn[t]=new Mr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Yn[t]=new Mr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Yn[t]=new Mr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Yn[t]=new Mr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Yn[t]=new Mr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Yn[t]=new Mr(t,5,!1,t.toLowerCase(),null,!1,!1)});var CD=/[\-:]([a-z])/g;function wD(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(CD,wD);Yn[e]=new Mr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(CD,wD);Yn[e]=new Mr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(CD,wD);Yn[e]=new Mr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Yn[t]=new Mr(t,1,!1,t.toLowerCase(),null,!1,!1)});Yn.xlinkHref=new Mr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Yn[t]=new Mr(t,1,!1,t.toLowerCase(),null,!0,!0)});var jy={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rse=["Webkit","ms","Moz","O"];Object.keys(jy).forEach(function(t){Rse.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),jy[e]=jy[t]})});var _se=/["'&<>]/;function $n(t){if(typeof t=="boolean"||typeof t=="number")return""+t;t=""+t;var e=_se.exec(t);if(e){var n="",r,i=0;for(r=e.index;r<t.length;r++){switch(t.charCodeAt(r)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#x27;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}i!==r&&(n+=t.substring(i,r)),i=r+1,n+=e}t=i!==r?n+t.substring(i,r):n}return t}var Ase=/([A-Z])/g,xse=/^ms-/,k_=Array.isArray,Pse=he("<script>"),Ise=he("<\/script>"),Dse=he('<script src="'),Ose=he('<script type="module" src="'),ok=he('" async=""><\/script>'),Mse=/(<\/|<)(s)(cript)/gi;function Fse(t,e,n,r){return""+e+(n==="s"?"\\u0073":"\\u0053")+r}function Nse(t,e,n,r,i){t=t===void 0?"":t,e=e===void 0?Pse:he('<script nonce="'+$n(e)+'">');var s=[];if(n!==void 0&&s.push(e,ze((""+n).replace(Mse,Fse)),Ise),r!==void 0)for(n=0;n<r.length;n++)s.push(Dse,ze($n(r[n])),ok);if(i!==void 0)for(r=0;r<i.length;r++)s.push(Ose,ze($n(i[r])),ok);return{bootstrapChunks:s,startInlineScript:e,placeholderPrefix:he(t+"P:"),segmentPrefix:he(t+"S:"),boundaryPrefix:t+"B:",idPrefix:t,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}function As(t,e){return{insertionMode:t,selectedValue:e}}function Lse(t){return As(t==="http://www.w3.org/2000/svg"?2:t==="http://www.w3.org/1998/Math/MathML"?3:0,null)}function kse(t,e,n){switch(e){case"select":return As(1,n.value!=null?n.value:n.defaultValue);case"svg":return As(2,null);case"math":return As(3,null);case"foreignObject":return As(1,null);case"table":return As(4,null);case"thead":case"tbody":case"tfoot":return As(5,null);case"colgroup":return As(7,null);case"tr":return As(6,null)}return 4<=t.insertionMode||t.insertionMode===0?As(1,null):t}var SD=he("<!-- -->");function ak(t,e,n,r){return e===""?r:(r&&t.push(SD),t.push(ze($n(e))),!0)}var lk=new Map,Gse=he(' style="'),uk=he(":"),Vse=he(";");function p4(t,e,n){if(typeof n!="object")throw Error(je(62));e=!0;for(var r in n)if(kr.call(n,r)){var i=n[r];if(i!=null&&typeof i!="boolean"&&i!==""){if(r.indexOf("--")===0){var s=ze($n(r));i=ze($n((""+i).trim()))}else{s=r;var o=lk.get(s);o!==void 0||(o=he($n(s.replace(Ase,"-$1").toLowerCase().replace(xse,"-ms-"))),lk.set(s,o)),s=o,i=typeof i=="number"?i===0||kr.call(jy,r)?ze(""+i):ze(i+"px"):ze($n((""+i).trim()))}e?(e=!1,t.push(Gse,s,uk,i)):t.push(Vse,s,uk,i)}}e||t.push(Fl)}var ra=he(" "),wc=he('="'),Fl=he('"'),ck=he('=""');function ri(t,e,n,r){switch(n){case"style":p4(t,e,r);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N"){if(e=Yn.hasOwnProperty(n)?Yn[n]:null,e!==null){switch(typeof r){case"function":case"symbol":return;case"boolean":if(!e.acceptsBooleans)return}switch(n=ze(e.attributeName),e.type){case 3:r&&t.push(ra,n,ck);break;case 4:r===!0?t.push(ra,n,ck):r!==!1&&t.push(ra,n,wc,ze($n(r)),Fl);break;case 5:isNaN(r)||t.push(ra,n,wc,ze($n(r)),Fl);break;case 6:!isNaN(r)&&1<=r&&t.push(ra,n,wc,ze($n(r)),Fl);break;default:e.sanitizeURL&&(r=""+r),t.push(ra,n,wc,ze($n(r)),Fl)}}else if(h4(n)){switch(typeof r){case"function":case"symbol":return;case"boolean":if(e=n.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-")return}t.push(ra,ze(n),wc,ze($n(r)),Fl)}}}var ia=he(">"),dk=he("/>");function Uy(t,e,n){if(e!=null){if(n!=null)throw Error(je(60));if(typeof e!="object"||!("__html"in e))throw Error(je(61));e=e.__html,e!=null&&t.push(ze(""+e))}}function Hse(t){var e="";return u4.Children.forEach(t,function(n){n!=null&&(e+=n)}),e}var ZT=he(' selected=""');function e0(t,e,n,r){t.push(xs(n));var i=n=null,s;for(s in e)if(kr.call(e,s)){var o=e[s];if(o!=null)switch(s){case"children":n=o;break;case"dangerouslySetInnerHTML":i=o;break;default:ri(t,r,s,o)}}return t.push(ia),Uy(t,i,n),typeof n=="string"?(t.push(ze($n(n))),null):n}var t0=he(`
`),Bse=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,hk=new Map;function xs(t){var e=hk.get(t);if(e===void 0){if(!Bse.test(t))throw Error(je(65,t));e=he("<"+t),hk.set(t,e)}return e}var $se=he("<!DOCTYPE html>");function Wse(t,e,n,r,i){switch(e){case"select":t.push(xs("select"));var s=null,o=null;for(c in n)if(kr.call(n,c)){var a=n[c];if(a!=null)switch(c){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;case"defaultValue":case"value":break;default:ri(t,r,c,a)}}return t.push(ia),Uy(t,o,s),s;case"option":o=i.selectedValue,t.push(xs("option"));var l=a=null,u=null,c=null;for(s in n)if(kr.call(n,s)){var d=n[s];if(d!=null)switch(s){case"children":a=d;break;case"selected":u=d;break;case"dangerouslySetInnerHTML":c=d;break;case"value":l=d;default:ri(t,r,s,d)}}if(o!=null)if(n=l!==null?""+l:Hse(a),k_(o)){for(r=0;r<o.length;r++)if(""+o[r]===n){t.push(ZT);break}}else""+o===n&&t.push(ZT);else u&&t.push(ZT);return t.push(ia),Uy(t,c,a),a;case"textarea":t.push(xs("textarea")),c=o=s=null;for(a in n)if(kr.call(n,a)&&(l=n[a],l!=null))switch(a){case"children":c=l;break;case"value":s=l;break;case"defaultValue":o=l;break;case"dangerouslySetInnerHTML":throw Error(je(91));default:ri(t,r,a,l)}if(s===null&&o!==null&&(s=o),t.push(ia),c!=null){if(s!=null)throw Error(je(92));if(k_(c)&&1<c.length)throw Error(je(93));s=""+c}return typeof s=="string"&&s[0]===`
`&&t.push(t0),s!==null&&t.push(ze($n(""+s))),null;case"input":t.push(xs("input")),l=c=a=s=null;for(o in n)if(kr.call(n,o)&&(u=n[o],u!=null))switch(o){case"children":case"dangerouslySetInnerHTML":throw Error(je(399,"input"));case"defaultChecked":l=u;break;case"defaultValue":a=u;break;case"checked":c=u;break;case"value":s=u;break;default:ri(t,r,o,u)}return c!==null?ri(t,r,"checked",c):l!==null&&ri(t,r,"checked",l),s!==null?ri(t,r,"value",s):a!==null&&ri(t,r,"value",a),t.push(dk),null;case"menuitem":t.push(xs("menuitem"));for(var h in n)if(kr.call(n,h)&&(s=n[h],s!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(je(400));default:ri(t,r,h,s)}return t.push(ia),null;case"title":t.push(xs("title")),s=null;for(d in n)if(kr.call(n,d)&&(o=n[d],o!=null))switch(d){case"children":s=o;break;case"dangerouslySetInnerHTML":throw Error(je(434));default:ri(t,r,d,o)}return t.push(ia),s;case"listing":case"pre":t.push(xs(e)),o=s=null;for(l in n)if(kr.call(n,l)&&(a=n[l],a!=null))switch(l){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;default:ri(t,r,l,a)}if(t.push(ia),o!=null){if(s!=null)throw Error(je(60));if(typeof o!="object"||!("__html"in o))throw Error(je(61));n=o.__html,n!=null&&(typeof n=="string"&&0<n.length&&n[0]===`
`?t.push(t0,ze(n)):t.push(ze(""+n)))}return typeof s=="string"&&s[0]===`
`&&t.push(t0),s;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":t.push(xs(e));for(var f in n)if(kr.call(n,f)&&(s=n[f],s!=null))switch(f){case"children":case"dangerouslySetInnerHTML":throw Error(je(399,e));default:ri(t,r,f,s)}return t.push(dk),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return e0(t,n,e,r);case"html":return i.insertionMode===0&&t.push($se),e0(t,n,e,r);default:if(e.indexOf("-")===-1&&typeof n.is!="string")return e0(t,n,e,r);t.push(xs(e)),o=s=null;for(u in n)if(kr.call(n,u)&&(a=n[u],a!=null))switch(u){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;case"style":p4(t,r,a);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:h4(u)&&typeof a!="function"&&typeof a!="symbol"&&t.push(ra,ze(u),wc,ze($n(a)),Fl)}return t.push(ia),Uy(t,o,s),s}}var jse=he("</"),Use=he(">"),zse=he('<template id="'),Kse=he('"></template>'),qse=he("<!--$-->"),Yse=he('<!--$?--><template id="'),Qse=he('"></template>'),Xse=he("<!--$!-->"),Jse=he("<!--/$-->"),Zse=he("<template"),eoe=he('"'),toe=he(' data-dgst="');he(' data-msg="');he(' data-stck="');var noe=he("></template>");function pk(t,e,n){if(Se(t,Yse),n===null)throw Error(je(395));return Se(t,n),Gt(t,Qse)}var roe=he('<div hidden id="'),ioe=he('">'),soe=he("</div>"),ooe=he('<svg aria-hidden="true" style="display:none" id="'),aoe=he('">'),loe=he("</svg>"),uoe=he('<math aria-hidden="true" style="display:none" id="'),coe=he('">'),doe=he("</math>"),hoe=he('<table hidden id="'),poe=he('">'),foe=he("</table>"),goe=he('<table hidden><tbody id="'),moe=he('">'),voe=he("</tbody></table>"),yoe=he('<table hidden><tr id="'),Coe=he('">'),woe=he("</tr></table>"),Soe=he('<table hidden><colgroup id="'),Eoe=he('">'),boe=he("</colgroup></table>");function Toe(t,e,n,r){switch(n.insertionMode){case 0:case 1:return Se(t,roe),Se(t,e.segmentPrefix),Se(t,ze(r.toString(16))),Gt(t,ioe);case 2:return Se(t,ooe),Se(t,e.segmentPrefix),Se(t,ze(r.toString(16))),Gt(t,aoe);case 3:return Se(t,uoe),Se(t,e.segmentPrefix),Se(t,ze(r.toString(16))),Gt(t,coe);case 4:return Se(t,hoe),Se(t,e.segmentPrefix),Se(t,ze(r.toString(16))),Gt(t,poe);case 5:return Se(t,goe),Se(t,e.segmentPrefix),Se(t,ze(r.toString(16))),Gt(t,moe);case 6:return Se(t,yoe),Se(t,e.segmentPrefix),Se(t,ze(r.toString(16))),Gt(t,Coe);case 7:return Se(t,Soe),Se(t,e.segmentPrefix),Se(t,ze(r.toString(16))),Gt(t,Eoe);default:throw Error(je(397))}}function Roe(t,e){switch(e.insertionMode){case 0:case 1:return Gt(t,soe);case 2:return Gt(t,loe);case 3:return Gt(t,doe);case 4:return Gt(t,foe);case 5:return Gt(t,voe);case 6:return Gt(t,woe);case 7:return Gt(t,boe);default:throw Error(je(397))}}var _oe=he('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),Aoe=he('$RS("'),xoe=he('","'),Poe=he('")<\/script>'),Ioe=he('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),Doe=he('$RC("'),Ooe=he('","'),Moe=he('")<\/script>'),Foe=he('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("'),Noe=he('$RX("'),Loe=he('"'),koe=he(")<\/script>"),n0=he(","),Goe=/[<\u2028\u2029]/g;function r0(t){return JSON.stringify(t).replace(Goe,function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var vf=Object.assign,Voe=Symbol.for("react.element"),f4=Symbol.for("react.portal"),g4=Symbol.for("react.fragment"),m4=Symbol.for("react.strict_mode"),v4=Symbol.for("react.profiler"),y4=Symbol.for("react.provider"),C4=Symbol.for("react.context"),w4=Symbol.for("react.forward_ref"),S4=Symbol.for("react.suspense"),E4=Symbol.for("react.suspense_list"),b4=Symbol.for("react.memo"),ED=Symbol.for("react.lazy"),Hoe=Symbol.for("react.scope"),Boe=Symbol.for("react.debug_trace_mode"),$oe=Symbol.for("react.legacy_hidden"),Woe=Symbol.for("react.default_value"),fk=Symbol.iterator;function G_(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case g4:return"Fragment";case f4:return"Portal";case v4:return"Profiler";case m4:return"StrictMode";case S4:return"Suspense";case E4:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case C4:return(t.displayName||"Context")+".Consumer";case y4:return(t._context.displayName||"Context")+".Provider";case w4:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case b4:return e=t.displayName||null,e!==null?e:G_(t.type)||"Memo";case ED:e=t._payload,t=t._init;try{return G_(t(e))}catch{}}return null}var T4={};function gk(t,e){if(t=t.contextTypes,!t)return T4;var n={},r;for(r in t)n[r]=e[r];return n}var Ul=null;function NE(t,e){if(t!==e){t.context._currentValue=t.parentValue,t=t.parent;var n=e.parent;if(t===null){if(n!==null)throw Error(je(401))}else{if(n===null)throw Error(je(401));NE(t,n)}e.context._currentValue=e.value}}function R4(t){t.context._currentValue=t.parentValue,t=t.parent,t!==null&&R4(t)}function _4(t){var e=t.parent;e!==null&&_4(e),t.context._currentValue=t.value}function A4(t,e){if(t.context._currentValue=t.parentValue,t=t.parent,t===null)throw Error(je(402));t.depth===e.depth?NE(t,e):A4(t,e)}function x4(t,e){var n=e.parent;if(n===null)throw Error(je(402));t.depth===n.depth?NE(t,n):x4(t,n),e.context._currentValue=e.value}function lw(t){var e=Ul;e!==t&&(e===null?_4(t):t===null?R4(e):e.depth===t.depth?NE(e,t):e.depth>t.depth?A4(e,t):x4(e,t),Ul=t)}var mk={isMounted:function(){return!1},enqueueSetState:function(t,e){t=t._reactInternals,t.queue!==null&&t.queue.push(e)},enqueueReplaceState:function(t,e){t=t._reactInternals,t.replace=!0,t.queue=[e]},enqueueForceUpdate:function(){}};function vk(t,e,n,r){var i=t.state!==void 0?t.state:null;t.updater=mk,t.props=n,t.state=i;var s={queue:[],replace:!1};t._reactInternals=s;var o=e.contextType;if(t.context=typeof o=="object"&&o!==null?o._currentValue:r,o=e.getDerivedStateFromProps,typeof o=="function"&&(o=o(n,i),i=o==null?i:vf({},i,o),t.state=i),typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function"&&(typeof t.UNSAFE_componentWillMount=="function"||typeof t.componentWillMount=="function"))if(e=t.state,typeof t.componentWillMount=="function"&&t.componentWillMount(),typeof t.UNSAFE_componentWillMount=="function"&&t.UNSAFE_componentWillMount(),e!==t.state&&mk.enqueueReplaceState(t,t.state,null),s.queue!==null&&0<s.queue.length)if(e=s.queue,o=s.replace,s.queue=null,s.replace=!1,o&&e.length===1)t.state=e[0];else{for(s=o?e[0]:t.state,i=!0,o=o?1:0;o<e.length;o++){var a=e[o];a=typeof a=="function"?a.call(t,s,n,r):a,a!=null&&(i?(i=!1,s=vf({},s,a)):vf(s,a))}t.state=s}else s.queue=null}var joe={id:1,overflow:""};function V_(t,e,n){var r=t.id;t=t.overflow;var i=32-zy(r)-1;r&=~(1<<i),n+=1;var s=32-zy(e)+i;if(30<s){var o=i-i%5;return s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,{id:1<<32-zy(e)+i|n<<i|r,overflow:s+t}}return{id:1<<s|n<<i|r,overflow:t}}var zy=Math.clz32?Math.clz32:Koe,Uoe=Math.log,zoe=Math.LN2;function Koe(t){return t>>>=0,t===0?32:31-(Uoe(t)/zoe|0)|0}function qoe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yoe=typeof Object.is=="function"?Object.is:qoe,Mo=null,bD=null,Ky=null,Pt=null,Xp=!1,uw=!1,_g=0,Ea=null,LE=0;function Nl(){if(Mo===null)throw Error(je(321));return Mo}function yk(){if(0<LE)throw Error(je(312));return{memoizedState:null,queue:null,next:null}}function TD(){return Pt===null?Ky===null?(Xp=!1,Ky=Pt=yk()):(Xp=!0,Pt=Ky):Pt.next===null?(Xp=!1,Pt=Pt.next=yk()):(Xp=!0,Pt=Pt.next),Pt}function RD(){bD=Mo=null,uw=!1,Ky=null,LE=0,Pt=Ea=null}function P4(t,e){return typeof e=="function"?e(t):e}function Ck(t,e,n){if(Mo=Nl(),Pt=TD(),Xp){var r=Pt.queue;if(e=r.dispatch,Ea!==null&&(n=Ea.get(r),n!==void 0)){Ea.delete(r),r=Pt.memoizedState;do r=t(r,n.action),n=n.next;while(n!==null);return Pt.memoizedState=r,[r,e]}return[Pt.memoizedState,e]}return t=t===P4?typeof e=="function"?e():e:n!==void 0?n(e):e,Pt.memoizedState=t,t=Pt.queue={last:null,dispatch:null},t=t.dispatch=Qoe.bind(null,Mo,t),[Pt.memoizedState,t]}function wk(t,e){if(Mo=Nl(),Pt=TD(),e=e===void 0?null:e,Pt!==null){var n=Pt.memoizedState;if(n!==null&&e!==null){var r=n[1];e:if(r===null)r=!1;else{for(var i=0;i<r.length&&i<e.length;i++)if(!Yoe(e[i],r[i])){r=!1;break e}r=!0}if(r)return n[0]}}return t=t(),Pt.memoizedState=[t,e],t}function Qoe(t,e,n){if(25<=LE)throw Error(je(301));if(t===Mo)if(uw=!0,t={action:n,next:null},Ea===null&&(Ea=new Map),n=Ea.get(e),n===void 0)Ea.set(e,t);else{for(e=n;e.next!==null;)e=e.next;e.next=t}}function Xoe(){throw Error(je(394))}function Kv(){}var Sk={readContext:function(t){return t._currentValue},useContext:function(t){return Nl(),t._currentValue},useMemo:wk,useReducer:Ck,useRef:function(t){Mo=Nl(),Pt=TD();var e=Pt.memoizedState;return e===null?(t={current:t},Pt.memoizedState=t):e},useState:function(t){return Ck(P4,t)},useInsertionEffect:Kv,useLayoutEffect:function(){},useCallback:function(t,e){return wk(function(){return t},e)},useImperativeHandle:Kv,useEffect:Kv,useDebugValue:Kv,useDeferredValue:function(t){return Nl(),t},useTransition:function(){return Nl(),[!1,Xoe]},useId:function(){var t=bD.treeContext,e=t.overflow;t=t.id,t=(t&~(1<<32-zy(t)-1)).toString(32)+e;var n=qy;if(n===null)throw Error(je(404));return e=_g++,t=":"+n.idPrefix+"R"+t,0<e&&(t+="H"+e.toString(32)),t+":"},useMutableSource:function(t,e){return Nl(),e(t._source)},useSyncExternalStore:function(t,e,n){if(n===void 0)throw Error(je(407));return n()}},qy=null,i0=u4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function Joe(t){return console.error(t),null}function Jp(){}function Zoe(t,e,n,r,i,s,o,a,l){var u=[],c=new Set;return e={destination:null,responseState:e,progressiveChunkSize:r===void 0?12800:r,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:c,pingedTasks:u,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:i===void 0?Joe:i,onAllReady:s===void 0?Jp:s,onShellReady:o===void 0?Jp:o,onShellError:a===void 0?Jp:a,onFatalError:l===void 0?Jp:l},n=cw(e,0,null,n,!1,!1),n.parentFlushed=!0,t=_D(e,t,null,n,c,T4,null,joe),u.push(t),e}function _D(t,e,n,r,i,s,o,a){t.allPendingTasks++,n===null?t.pendingRootTasks++:n.pendingTasks++;var l={node:e,ping:function(){var u=t.pingedTasks;u.push(l),u.length===1&&O4(t)},blockedBoundary:n,blockedSegment:r,abortSet:i,legacyContext:s,context:o,treeContext:a};return i.add(l),l}function cw(t,e,n,r,i,s){return{status:0,id:-1,index:e,parentFlushed:!1,chunks:[],children:[],formatContext:r,boundary:n,lastPushedText:i,textEmbedded:s}}function Ag(t,e){if(t=t.onError(e),t!=null&&typeof t!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof t+'" instead');return t}function dw(t,e){var n=t.onShellError;n(e),n=t.onFatalError,n(e),t.destination!==null?(t.status=2,d4(t.destination,e)):(t.status=1,t.fatalError=e)}function Ek(t,e,n,r,i){for(Mo={},bD=e,_g=0,t=n(r,i);uw;)uw=!1,_g=0,LE+=1,Pt=null,t=n(r,i);return RD(),t}function bk(t,e,n,r){var i=n.render(),s=r.childContextTypes;if(s!=null){var o=e.legacyContext;if(typeof n.getChildContext!="function")r=o;else{n=n.getChildContext();for(var a in n)if(!(a in s))throw Error(je(108,G_(r)||"Unknown",a));r=vf({},o,n)}e.legacyContext=r,ci(t,e,i),e.legacyContext=o}else ci(t,e,i)}function Tk(t,e){if(t&&t.defaultProps){e=vf({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function H_(t,e,n,r,i){if(typeof n=="function")if(n.prototype&&n.prototype.isReactComponent){i=gk(n,e.legacyContext);var s=n.contextType;s=new n(r,typeof s=="object"&&s!==null?s._currentValue:i),vk(s,n,r,i),bk(t,e,s,n)}else{s=gk(n,e.legacyContext),i=Ek(t,e,n,r,s);var o=_g!==0;if(typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0)vk(i,n,r,s),bk(t,e,i,n);else if(o){r=e.treeContext,e.treeContext=V_(r,1,0);try{ci(t,e,i)}finally{e.treeContext=r}}else ci(t,e,i)}else if(typeof n=="string"){switch(i=e.blockedSegment,s=Wse(i.chunks,n,r,t.responseState,i.formatContext),i.lastPushedText=!1,o=i.formatContext,i.formatContext=kse(o,n,r),B_(t,e,s),i.formatContext=o,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:i.chunks.push(jse,ze(n),Use)}i.lastPushedText=!1}else{switch(n){case $oe:case Boe:case m4:case v4:case g4:ci(t,e,r.children);return;case E4:ci(t,e,r.children);return;case Hoe:throw Error(je(343));case S4:e:{n=e.blockedBoundary,i=e.blockedSegment,s=r.fallback,r=r.children,o=new Set;var a={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:o,errorDigest:null},l=cw(t,i.chunks.length,a,i.formatContext,!1,!1);i.children.push(l),i.lastPushedText=!1;var u=cw(t,0,null,i.formatContext,!1,!1);u.parentFlushed=!0,e.blockedBoundary=a,e.blockedSegment=u;try{if(B_(t,e,r),u.lastPushedText&&u.textEmbedded&&u.chunks.push(SD),u.status=1,hw(a,u),a.pendingTasks===0)break e}catch(c){u.status=4,a.forceClientRender=!0,a.errorDigest=Ag(t,c)}finally{e.blockedBoundary=n,e.blockedSegment=i}e=_D(t,s,n,l,o,e.legacyContext,e.context,e.treeContext),t.pingedTasks.push(e)}return}if(typeof n=="object"&&n!==null)switch(n.$$typeof){case w4:if(r=Ek(t,e,n.render,r,i),_g!==0){n=e.treeContext,e.treeContext=V_(n,1,0);try{ci(t,e,r)}finally{e.treeContext=n}}else ci(t,e,r);return;case b4:n=n.type,r=Tk(n,r),H_(t,e,n,r,i);return;case y4:if(i=r.children,n=n._context,r=r.value,s=n._currentValue,n._currentValue=r,o=Ul,Ul=r={parent:o,depth:o===null?0:o.depth+1,context:n,parentValue:s,value:r},e.context=r,ci(t,e,i),t=Ul,t===null)throw Error(je(403));r=t.parentValue,t.context._currentValue=r===Woe?t.context._defaultValue:r,t=Ul=t.parent,e.context=t;return;case C4:r=r.children,r=r(n._currentValue),ci(t,e,r);return;case ED:i=n._init,n=i(n._payload),r=Tk(n,r),H_(t,e,n,r,void 0);return}throw Error(je(130,n==null?n:typeof n,""))}}function ci(t,e,n){if(e.node=n,typeof n=="object"&&n!==null){switch(n.$$typeof){case Voe:H_(t,e,n.type,n.props,n.ref);return;case f4:throw Error(je(257));case ED:var r=n._init;n=r(n._payload),ci(t,e,n);return}if(k_(n)){Rk(t,e,n);return}if(n===null||typeof n!="object"?r=null:(r=fk&&n[fk]||n["@@iterator"],r=typeof r=="function"?r:null),r&&(r=r.call(n))){if(n=r.next(),!n.done){var i=[];do i.push(n.value),n=r.next();while(!n.done);Rk(t,e,i)}return}throw t=Object.prototype.toString.call(n),Error(je(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}typeof n=="string"?(r=e.blockedSegment,r.lastPushedText=ak(e.blockedSegment.chunks,n,t.responseState,r.lastPushedText)):typeof n=="number"&&(r=e.blockedSegment,r.lastPushedText=ak(e.blockedSegment.chunks,""+n,t.responseState,r.lastPushedText))}function Rk(t,e,n){for(var r=n.length,i=0;i<r;i++){var s=e.treeContext;e.treeContext=V_(s,r,i);try{B_(t,e,n[i])}finally{e.treeContext=s}}}function B_(t,e,n){var r=e.blockedSegment.formatContext,i=e.legacyContext,s=e.context;try{return ci(t,e,n)}catch(l){if(RD(),typeof l=="object"&&l!==null&&typeof l.then=="function"){n=l;var o=e.blockedSegment,a=cw(t,o.chunks.length,null,o.formatContext,o.lastPushedText,!0);o.children.push(a),o.lastPushedText=!1,t=_D(t,e.node,e.blockedBoundary,a,e.abortSet,e.legacyContext,e.context,e.treeContext).ping,n.then(t,t),e.blockedSegment.formatContext=r,e.legacyContext=i,e.context=s,lw(s)}else throw e.blockedSegment.formatContext=r,e.legacyContext=i,e.context=s,lw(s),l}}function eae(t){var e=t.blockedBoundary;t=t.blockedSegment,t.status=3,D4(this,e,t)}function I4(t,e,n){var r=t.blockedBoundary;t.blockedSegment.status=3,r===null?(e.allPendingTasks--,e.status!==2&&(e.status=2,e.destination!==null&&e.destination.close())):(r.pendingTasks--,r.forceClientRender||(r.forceClientRender=!0,t=n===void 0?Error(je(432)):n,r.errorDigest=e.onError(t),r.parentFlushed&&e.clientRenderedBoundaries.push(r)),r.fallbackAbortableTasks.forEach(function(i){return I4(i,e,n)}),r.fallbackAbortableTasks.clear(),e.allPendingTasks--,e.allPendingTasks===0&&(r=e.onAllReady,r()))}function hw(t,e){if(e.chunks.length===0&&e.children.length===1&&e.children[0].boundary===null){var n=e.children[0];n.id=e.id,n.parentFlushed=!0,n.status===1&&hw(t,n)}else t.completedSegments.push(e)}function D4(t,e,n){if(e===null){if(n.parentFlushed){if(t.completedRootSegment!==null)throw Error(je(389));t.completedRootSegment=n}t.pendingRootTasks--,t.pendingRootTasks===0&&(t.onShellError=Jp,e=t.onShellReady,e())}else e.pendingTasks--,e.forceClientRender||(e.pendingTasks===0?(n.parentFlushed&&n.status===1&&hw(e,n),e.parentFlushed&&t.completedBoundaries.push(e),e.fallbackAbortableTasks.forEach(eae,t),e.fallbackAbortableTasks.clear()):n.parentFlushed&&n.status===1&&(hw(e,n),e.completedSegments.length===1&&e.parentFlushed&&t.partialBoundaries.push(e)));t.allPendingTasks--,t.allPendingTasks===0&&(t=t.onAllReady,t())}function O4(t){if(t.status!==2){var e=Ul,n=i0.current;i0.current=Sk;var r=qy;qy=t.responseState;try{var i=t.pingedTasks,s;for(s=0;s<i.length;s++){var o=i[s],a=t,l=o.blockedSegment;if(l.status===0){lw(o.context);try{ci(a,o,o.node),l.lastPushedText&&l.textEmbedded&&l.chunks.push(SD),o.abortSet.delete(o),l.status=1,D4(a,o.blockedBoundary,l)}catch(g){if(RD(),typeof g=="object"&&g!==null&&typeof g.then=="function"){var u=o.ping;g.then(u,u)}else{o.abortSet.delete(o),l.status=4;var c=o.blockedBoundary,d=g,h=Ag(a,d);if(c===null?dw(a,d):(c.pendingTasks--,c.forceClientRender||(c.forceClientRender=!0,c.errorDigest=h,c.parentFlushed&&a.clientRenderedBoundaries.push(c))),a.allPendingTasks--,a.allPendingTasks===0){var f=a.onAllReady;f()}}}finally{}}}i.splice(0,s),t.destination!==null&&AD(t,t.destination)}catch(g){Ag(t,g),dw(t,g)}finally{qy=r,i0.current=n,n===Sk&&lw(e)}}}function qv(t,e,n){switch(n.parentFlushed=!0,n.status){case 0:var r=n.id=t.nextSegmentId++;return n.lastPushedText=!1,n.textEmbedded=!1,t=t.responseState,Se(e,zse),Se(e,t.placeholderPrefix),t=ze(r.toString(16)),Se(e,t),Gt(e,Kse);case 1:n.status=2;var i=!0;r=n.chunks;var s=0;n=n.children;for(var o=0;o<n.length;o++){for(i=n[o];s<i.index;s++)Se(e,r[s]);i=kE(t,e,i)}for(;s<r.length-1;s++)Se(e,r[s]);return s<r.length&&(i=Gt(e,r[s])),i;default:throw Error(je(390))}}function kE(t,e,n){var r=n.boundary;if(r===null)return qv(t,e,n);if(r.parentFlushed=!0,r.forceClientRender)r=r.errorDigest,Gt(e,Xse),Se(e,Zse),r&&(Se(e,toe),Se(e,ze($n(r))),Se(e,eoe)),Gt(e,noe),qv(t,e,n);else if(0<r.pendingTasks){r.rootSegmentID=t.nextSegmentId++,0<r.completedSegments.length&&t.partialBoundaries.push(r);var i=t.responseState,s=i.nextSuspenseID++;i=he(i.boundaryPrefix+s.toString(16)),r=r.id=i,pk(e,t.responseState,r),qv(t,e,n)}else if(r.byteSize>t.progressiveChunkSize)r.rootSegmentID=t.nextSegmentId++,t.completedBoundaries.push(r),pk(e,t.responseState,r.id),qv(t,e,n);else{if(Gt(e,qse),n=r.completedSegments,n.length!==1)throw Error(je(391));kE(t,e,n[0])}return Gt(e,Jse)}function _k(t,e,n){return Toe(e,t.responseState,n.formatContext,n.id),kE(t,e,n),Roe(e,n.formatContext)}function Ak(t,e,n){for(var r=n.completedSegments,i=0;i<r.length;i++)M4(t,e,n,r[i]);if(r.length=0,t=t.responseState,r=n.id,n=n.rootSegmentID,Se(e,t.startInlineScript),t.sentCompleteBoundaryFunction?Se(e,Doe):(t.sentCompleteBoundaryFunction=!0,Se(e,Ioe)),r===null)throw Error(je(395));return n=ze(n.toString(16)),Se(e,r),Se(e,Ooe),Se(e,t.segmentPrefix),Se(e,n),Gt(e,Moe)}function M4(t,e,n,r){if(r.status===2)return!0;var i=r.id;if(i===-1){if((r.id=n.rootSegmentID)===-1)throw Error(je(392));return _k(t,e,r)}return _k(t,e,r),t=t.responseState,Se(e,t.startInlineScript),t.sentCompleteSegmentFunction?Se(e,Aoe):(t.sentCompleteSegmentFunction=!0,Se(e,_oe)),Se(e,t.segmentPrefix),i=ze(i.toString(16)),Se(e,i),Se(e,xoe),Se(e,t.placeholderPrefix),Se(e,i),Gt(e,Poe)}function AD(t,e){li=new Uint8Array(512),ui=0;try{var n=t.completedRootSegment;if(n!==null&&t.pendingRootTasks===0){kE(t,e,n),t.completedRootSegment=null;var r=t.responseState.bootstrapChunks;for(n=0;n<r.length-1;n++)Se(e,r[n]);n<r.length&&Gt(e,r[n])}var i=t.clientRenderedBoundaries,s;for(s=0;s<i.length;s++){var o=i[s];r=e;var a=t.responseState,l=o.id,u=o.errorDigest,c=o.errorMessage,d=o.errorComponentStack;if(Se(r,a.startInlineScript),a.sentClientRenderFunction?Se(r,Noe):(a.sentClientRenderFunction=!0,Se(r,Foe)),l===null)throw Error(je(395));Se(r,l),Se(r,Loe),(u||c||d)&&(Se(r,n0),Se(r,ze(r0(u||"")))),(c||d)&&(Se(r,n0),Se(r,ze(r0(c||"")))),d&&(Se(r,n0),Se(r,ze(r0(d)))),Gt(r,koe)}i.splice(0,s);var h=t.completedBoundaries;for(s=0;s<h.length;s++)Ak(t,e,h[s]);h.splice(0,s),rk(e),li=new Uint8Array(512),ui=0;var f=t.partialBoundaries;for(s=0;s<f.length;s++){var g=f[s];e:{i=t,o=e;var m=g.completedSegments;for(a=0;a<m.length;a++)if(!M4(i,o,g,m[a])){a++,m.splice(0,a);var v=!1;break e}m.splice(0,a),v=!0}if(!v){t.destination=null,s++,f.splice(0,s);return}}f.splice(0,s);var C=t.completedBoundaries;for(s=0;s<C.length;s++)Ak(t,e,C[s]);C.splice(0,s)}finally{rk(e),t.allPendingTasks===0&&t.pingedTasks.length===0&&t.clientRenderedBoundaries.length===0&&t.completedBoundaries.length===0&&e.close()}}function xk(t,e){try{var n=t.abortableTasks;n.forEach(function(r){return I4(r,t,e)}),n.clear(),t.destination!==null&&AD(t,t.destination)}catch(r){Ag(t,r),dw(t,r)}}yD.renderToReadableStream=function(t,e){return new Promise(function(n,r){var i,s,o=new Promise(function(c,d){s=c,i=d}),a=Zoe(t,Nse(e?e.identifierPrefix:void 0,e?e.nonce:void 0,e?e.bootstrapScriptContent:void 0,e?e.bootstrapScripts:void 0,e?e.bootstrapModules:void 0),Lse(e?e.namespaceURI:void 0),e?e.progressiveChunkSize:void 0,e?e.onError:void 0,s,function(){var c=new ReadableStream({type:"bytes",pull:function(d){if(a.status===1)a.status=2,d4(d,a.fatalError);else if(a.status!==2&&a.destination===null){a.destination=d;try{AD(a,d)}catch(h){Ag(a,h),dw(a,h)}}},cancel:function(){xk(a)}},{highWaterMark:0});c.allReady=o,n(c)},function(c){o.catch(function(){}),r(c)},i);if(e&&e.signal){var l=e.signal,u=function(){xk(a,l.reason),l.removeEventListener("abort",u)};l.addEventListener("abort",u)}O4(a)})};yD.version="18.3.1";var Gh,F4;Gh=kh,F4=yD;Gh.version;Gh.renderToString;var tae=Gh.renderToStaticMarkup;Gh.renderToNodeStream;Gh.renderToStaticNodeStream;F4.renderToReadableStream;var nae=Object.defineProperty,rae=Object.defineProperties,iae=Object.getOwnPropertyDescriptors,Pk=Object.getOwnPropertySymbols,sae=Object.prototype.hasOwnProperty,oae=Object.prototype.propertyIsEnumerable,Ik=(t,e,n)=>e in t?nae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$t=(t,e)=>{for(var n in e||(e={}))sae.call(e,n)&&Ik(t,n,e[n]);if(Pk)for(var n of Pk(e))oae.call(e,n)&&Ik(t,n,e[n]);return t},_r=(t,e)=>rae(t,iae(e)),xD=I.createContext({setMethods:()=>{}}),aae=t=>{const{initialProps:e,addUpdateCallback:n,CustomComponentClass:r,setMethods:i}=t,[s,o]=I.useState(e);return I.useEffect(()=>{n(a=>o(a))},[]),G.createElement(xD.Provider,{value:{setMethods:i}},G.createElement(r,$t({},s)))},lae=I.memo(aae),uae=0;function Dk(){return`agPortalKey_${++uae}`}var N4=class{constructor(t,e,n,r){this.portal=null,this.oldPortal=null,this.reactComponent=t,this.portalManager=e,this.componentType=n,this.suppressFallbackMethods=!!r,this.statelessComponent=this.isStateless(this.reactComponent),this.key=Dk(),this.portalKey=Dk(),this.instanceCreated=this.isStatelessComponent()?an.resolve(!1):new an(i=>{this.resolveInstanceCreated=i})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){return this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy(),this.portalManager.destroyPortal(this.portal)}createParentElement(t){const e=this.portalManager.getComponentWrappingElement(),n=document.createElement(e||"div");return n.classList.add("ag-react-container"),t.reactContainer=n,n}addParentContainerStyleAndClasses(){this.componentInstance&&(this.componentInstance.getReactContainerStyle&&this.componentInstance.getReactContainerStyle()&&(be.warnOnce('Since v31.1 "getReactContainerStyle" is deprecated. Apply styling directly to ".ag-react-container" if needed.'),Object.assign(this.eParentElement.style,this.componentInstance.getReactContainerStyle())),this.componentInstance.getReactContainerClasses&&this.componentInstance.getReactContainerClasses()&&(be.warnOnce('Since v31.1 "getReactContainerClasses" is deprecated. Apply styling directly to ".ag-react-container" if needed.'),this.componentInstance.getReactContainerClasses().forEach(e=>this.eParentElement.classList.add(e))))}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(t){return typeof t=="function"&&!(t.prototype&&t.prototype.isReactComponent)||typeof t=="object"&&t.$$typeof===this.getMemoType()}hasMethod(t){const e=this.getFrameworkComponentInstance();return!!e&&e[t]!=null||this.fallbackMethodAvailable(t)}callMethod(t,e){const n=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(t,e&&e[0]?e[0]:{});if(!n){setTimeout(()=>this.callMethod(t,e));return}const r=n[t];if(r)return r.apply(n,e);if(this.fallbackMethodAvailable(t))return this.fallbackMethod(t,e&&e[0]?e[0]:{})}addMethod(t,e){this[t]=e}init(t){return this.eParentElement=this.createParentElement(t),this.params=t,this.createOrUpdatePortal(t),new an(e=>this.createReactComponent(e))}createOrUpdatePortal(t){this.isStatelessComponent()||(this.ref=e=>{var n;this.componentInstance=e,this.addParentContainerStyleAndClasses(),(n=this.resolveInstanceCreated)==null||n.call(this,!0),this.resolveInstanceCreated=void 0},t.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,_r($t({},t),{key:this.key})),this.portal=OS.createPortal(this.reactElement,this.eParentElement,this.portalKey)}createElement(t,e){return I.createElement(t,e)}createReactComponent(t){this.portalManager.mountReactPortal(this.portal,this,e=>{t(e)})}isNullValue(){return this.valueRenderedIsNull(this.params)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}valueRenderedIsNull(t){if(!this.componentType.cellRenderer)return!1;const e=console.error;try{return console.error=()=>{},tae(I.createElement(this.reactComponent,t))===""}catch{}finally{console.error=e}return!1}refreshComponent(t){this.oldPortal=this.portal,this.createOrUpdatePortal(t),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(t,e){const n=this[`${t}Component`];if(!this.suppressFallbackMethods&&n)return n.bind(this)(e)}fallbackMethodAvailable(t){return this.suppressFallbackMethods?!1:!!this[`${t}Component`]}};function PD(t,e,n){t.forEach(r=>{const i=e[r];i&&(n[r]=i)})}var dl=class extends N4{constructor(){super(...arguments),this.awaitUpdateCallback=new an(t=>{this.resolveUpdateCallback=t}),this.wrapperComponent=lae}init(t){return this.sourceParams=t,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(t,e){return super.createElement(this.wrapperComponent,{initialProps:e,CustomComponentClass:t,setMethods:n=>this.setMethods(n),addUpdateCallback:n=>{this.updateCallback=()=>(n(this.getProps()),new an(r=>{setTimeout(()=>{r()})})),this.resolveUpdateCallback()}})}setMethods(t){this.providedMethods=t,PD(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return _r($t({},this.sourceParams),{key:this.key,ref:this.ref})}refreshProps(){return this.updateCallback?this.updateCallback():new an(t=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>t())}))}},cae=class extends dl{constructor(){super(...arguments),this.date=null,this.onDateChange=t=>this.updateDate(t)}getDate(){return this.date}setDate(t){this.date=t,this.refreshProps()}refresh(t){this.sourceParams=t,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(t){this.setDate(t),this.sourceParams.onDateChanged()}getProps(){const t=super.getProps();return t.date=this.date,t.onDateChange=this.onDateChange,delete t.onDateChanged,t}},dae=class extends dl{constructor(){super(...arguments),this.model=null,this.onModelChange=t=>this.updateModel(t),this.onUiChange=()=>this.sourceParams.filterChangedCallback()}isFilterActive(){return this.model!=null}doesFilterPass(t){return this.providedMethods.doesFilterPass(t)}getModel(){return this.model}setModel(t){return this.model=t,this.refreshProps()}refresh(t){return this.sourceParams=t,this.refreshProps(),!0}getOptionalMethods(){return["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}updateModel(t){this.setModel(t).then(()=>this.sourceParams.filterChangedCallback())}getProps(){const t=super.getProps();return t.model=this.model,t.onModelChange=this.onModelChange,t.onUiChange=this.onUiChange,delete t.filterChangedCallback,delete t.filterModifiedCallback,delete t.valueGetter,t}};function L4(t,e){t.parentFilterInstance(n=>{(n.setModel(e)||an.resolve()).then(()=>{t.filterParams.filterChangedCallback()})})}var hae=class{constructor(t,e){this.floatingFilterParams=t,this.refreshProps=e,this.model=null,this.onModelChange=n=>this.updateModel(n)}getProps(){return _r($t({},this.floatingFilterParams),{model:this.model,onModelChange:this.onModelChange})}onParentModelChanged(t){this.model=t,this.refreshProps()}refresh(t){this.floatingFilterParams=t,this.refreshProps()}setMethods(t){PD(this.getOptionalMethods(),t,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(t){this.model=t,this.refreshProps(),L4(this.floatingFilterParams,t)}},pae=class extends dl{constructor(){super(...arguments),this.model=null,this.onModelChange=t=>this.updateModel(t)}onParentModelChanged(t){this.model=t,this.refreshProps()}refresh(t){this.sourceParams=t,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(t){this.model=t,this.refreshProps(),L4(this.sourceParams,t)}getProps(){const t=super.getProps();return t.model=this.model,t.onModelChange=this.onModelChange,t}},fae=class extends dl{refresh(t){this.sourceParams=t,this.refreshProps()}},gae=class extends dl{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=t=>this.updateActive(t)}setActive(t){this.awaitSetActive(t)}setExpanded(t){this.expanded=t,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(t){return this.active=t,this.refreshProps()}updateActive(t){const e=this.awaitSetActive(t);t&&e.then(()=>this.sourceParams.onItemActivated())}getProps(){const t=super.getProps();return t.active=this.active,t.expanded=this.expanded,t.onActiveChange=this.onActiveChange,delete t.onItemActivated,t}},mae=class extends dl{refresh(t){this.sourceParams=t,this.refreshProps()}},vae=class extends dl{refresh(t){return this.sourceParams=t,this.refreshProps(),!0}},yae=class extends dl{constructor(){super(...arguments),this.onStateChange=t=>this.updateState(t)}refresh(t){return this.sourceParams=t,this.refreshProps(),!0}getState(){return this.state}updateState(t){this.state=t,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const t=super.getProps();return t.state=this.state,t.onStateChange=this.onStateChange,t}},k4=class G4{constructor(e,n,r){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=n||"div",this.refresher=e,this.maxComponentCreationTimeMs=r||G4.MAX_COMPONENT_CREATION_TIME_IN_MS}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(n=>n!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,n,r){this.portals=[...this.portals,e],this.waitForInstance(n,r),this.batchUpdate()}updateReactPortal(e,n){this.portals[this.portals.indexOf(e)]=n,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,n,r=Date.now()){if(this.destroyed){n(null);return}if(e.rendered())n(e);else{if(Date.now()-r>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate){if(e.isNullValue()){n(e);return}console.error(`AG Grid: React Component '${e.getReactComponentName()}' not created within ${this.maxComponentCreationTimeMs}ms.`),console.error("    If the component is using `forwardRef` but not `useImperativeHandle`, add the following: `useImperativeHandle(ref, () => ({}));`");return}window.setTimeout(()=>{this.waitForInstance(e,n,r)})}}};k4.MAX_COMPONENT_CREATION_TIME_IN_MS=1e3;var Cae=k4,Fr=G.createContext({}),rs=(...t)=>t.filter(n=>n!=null&&n!=="").join(" "),ki=class V4{constructor(...e){this.classesMap={},e.forEach(n=>{this.classesMap[n]=!0})}setClass(e,n){if(!!this.classesMap[e]==n)return this;const i=new V4;return i.classesMap=$t({},this.classesMap),i.classesMap[e]=n,i}toString(){return Object.keys(this.classesMap).filter(n=>this.classesMap[n]).join(" ")}},Vh=t=>{const e=()=>typeof Symbol=="function"&&Symbol.for,n=()=>e()?Symbol.for("react.memo"):60115;return typeof t=="function"&&!(t.prototype&&t.prototype.isReactComponent)||typeof t=="object"&&t.$$typeof===n()},wae=PR.createRoot!=null&&PR.flushSync!=null,Yy=!1;function Sae(t){return Yy||setTimeout(()=>Yy=!1,0),Yy=!0,t()}var ID=(t,e)=>{wae&&t&&!Yy?PR.flushSync(e):e()};function DD(t,e,n){if(e==null||t==null)return e;if(t===e||e.length===0&&t.length===0)return t;if(n||t.length===0&&e.length>0||t.length>0&&e.length===0)return e;const r=[],i=[],s=new Map,o=new Map;for(let a=0;a<e.length;a++){const l=e[a];o.set(l.getInstanceId(),l)}for(let a=0;a<t.length;a++){const l=t[a];s.set(l.getInstanceId(),l),o.has(l.getInstanceId())&&r.push(l)}for(let a=0;a<e.length;a++){const l=e[a],u=l.getInstanceId();s.has(u)||i.push(l)}return r.length===t.length&&i.length===0?t:r.length===0&&i.length===e.length?e:r.length===0?i:i.length===0?r:[...r,...i]}var Um=(t,e,n,r)=>{if(!t||t.componentFromFramework||e.isDestroyed())return;const s=t.newAgStackInstance();if(!s)return;let o,a,l=!1;return s.then(u=>{if(l){e.destroyBean(u);return}o=u,a=o.getGui(),n.appendChild(a),Ok(r,o)}),()=>{l=!0,o&&(a&&a.parentElement&&a.parentElement.removeChild(a),e.destroyBean(o),r&&Ok(r,void 0))}},Ok=(t,e)=>{if(t)if(t instanceof Function)t(e);else{const n=t;n.current=e}},Eae=t=>{const e=t.newAgStackInstance();if(e)return e.resolveNow(null,n=>n)},H4=I.forwardRef((t,e)=>{var n;const r=I.useContext(Fr).context,i=I.useRef(null),s=I.useRef(null),o=I.useRef(null),a=I.useRef(null),l=I.useRef(null),u=I.useRef(),[c,d]=I.useState(),[h,f]=I.useState(),[g,m]=I.useState(),[v,C]=I.useState(()=>new ki),[y,S]=I.useState(()=>new ki("ag-hidden")),[_,E]=I.useState(()=>new ki("ag-hidden")),[R,b]=I.useState(()=>new ki("ag-invisible"));I.useImperativeHandle(e,()=>({refresh(){return!1}})),I.useLayoutEffect(()=>Um(c,r,s.current),[c]);const A=I.useCallback(q=>{if(i.current=q,!i.current){r.destroyBean(u.current),u.current=null;return}const B={setInnerRenderer:(U,K)=>{d(U),m(K)},setChildCount:U=>f(U),addOrRemoveCssClass:(U,K)=>C(ie=>ie.setClass(U,K)),setContractedDisplayed:U=>E(K=>K.setClass("ag-hidden",!U)),setExpandedDisplayed:U=>S(K=>K.setClass("ag-hidden",!U)),setCheckboxVisible:U=>b(K=>K.setClass("ag-invisible",!U))};u.current=r.createBean(new Uu),u.current.init(B,i.current,o.current,a.current,l.current,H4,t)},[]),P=I.useMemo(()=>`ag-cell-wrapper ${v.toString()}`,[v]),F=I.useMemo(()=>`ag-group-expanded ${y.toString()}`,[y]),k=I.useMemo(()=>`ag-group-contracted ${_.toString()}`,[_]),L=I.useMemo(()=>`ag-group-checkbox ${R.toString()}`,[R]),N=c&&c.componentFromFramework,W=N?c.componentClass:void 0,j=c==null&&g!=null,z=be.escapeString(g,!0);return G.createElement("span",$t({className:P,ref:A},t.colDef?{}:{role:(n=u.current)==null?void 0:n.getCellAriaRole()}),G.createElement("span",{className:F,ref:a}),G.createElement("span",{className:k,ref:l}),G.createElement("span",{className:L,ref:o}),G.createElement("span",{className:"ag-group-value",ref:s},j&&G.createElement(G.Fragment,null,z),N&&G.createElement(W,$t({},c.params))),G.createElement("span",{className:"ag-group-child-count"},h))}),Mk=H4,bae=t=>{const{ctrl:e}=t,n=e.isAlive(),{context:r}=I.useContext(Fr),i=n?e.getColId():void 0,[s,o]=I.useState(),a=I.useRef(null),l=I.useRef(null),u=I.useRef(null),c=I.useRef();let d=I.useRef();n&&!d.current&&(d.current=new Dm(()=>a.current));const h=I.useCallback(v=>{var C;if(a.current=v,!a.current||!n)return;const y={setWidth:_=>{a.current&&(a.current.style.width=_)},addOrRemoveCssClass:(_,E)=>d.current.addOrRemoveCssClass(_,E),setAriaSort:_=>{a.current&&(_?be.setAriaSort(a.current,_):be.removeAriaSort(a.current))},setUserCompDetails:_=>o(_),getUserCompInstance:()=>c.current||void 0};e.setComp(y,a.current,l.current,u.current);const S=e.getSelectAllGui();(C=l.current)==null||C.insertAdjacentElement("afterend",S)},[]);I.useLayoutEffect(()=>Um(s,r,u.current,c),[s]),I.useEffect(()=>{e.setDragSource(a.current)},[s]);const f=I.useMemo(()=>!!((s==null?void 0:s.componentFromFramework)&&Vh(s.componentClass)),[s]),g=s&&s.componentFromFramework,m=s&&s.componentClass;return G.createElement("div",{ref:h,className:"ag-header-cell","col-id":i,role:"columnheader"},G.createElement("div",{ref:l,className:"ag-header-cell-resize",role:"presentation"}),G.createElement("div",{ref:u,className:"ag-header-cell-comp-wrapper",role:"presentation"},g&&f&&G.createElement(m,$t({},s.params)),g&&!f&&G.createElement(m,_r($t({},s.params),{ref:c}))))},Tae=I.memo(bae),Rae=t=>{const{context:e}=I.useContext(Fr),{ctrl:n}=t,[r,i]=I.useState(()=>new ki),[s,o]=I.useState(()=>new ki),[a,l]=I.useState("false"),[u,c]=I.useState(),[d,h]=I.useState(),f=I.useMemo(()=>n.getColId(),[]),g=I.useRef(null),m=I.useRef(null),v=I.useRef(),C=I.useCallback(b=>{if(g.current=b,!g.current)return;const A={setWidth:P=>{g.current&&(g.current.style.width=P)},addOrRemoveCssClass:(P,F)=>i(k=>k.setClass(P,F)),setUserCompDetails:P=>h(P),setResizableDisplayed:P=>{o(F=>F.setClass("ag-hidden",!P)),l(P?"false":"true")},setAriaExpanded:P=>c(P),getUserCompInstance:()=>v.current||void 0};n.setComp(A,g.current,m.current)},[]);I.useLayoutEffect(()=>Um(d,e,g.current),[d]),I.useEffect(()=>{g.current&&n.setDragSource(g.current)},[d]);const y=I.useMemo(()=>!!((d==null?void 0:d.componentFromFramework)&&Vh(d.componentClass)),[d]),S=I.useMemo(()=>"ag-header-group-cell "+r.toString(),[r]),_=I.useMemo(()=>"ag-header-cell-resize "+s.toString(),[s]),E=d&&d.componentFromFramework,R=d&&d.componentClass;return G.createElement("div",{ref:C,className:S,"col-id":f,role:"columnheader","aria-expanded":u},E&&y&&G.createElement(R,$t({},d.params)),E&&!y&&G.createElement(R,_r($t({},d.params),{ref:v})),G.createElement("div",{ref:m,"aria-hidden":a,className:_}))},_ae=I.memo(Rae);function OD(){be.warnOnce("Using custom components without `reactiveCustomComponents = true` is deprecated.")}var Aae=t=>{const{context:e,gos:n}=I.useContext(Fr),[r,i]=I.useState(()=>new ki("ag-header-cell","ag-floating-filter")),[s,o]=I.useState(()=>new ki),[a,l]=I.useState(()=>new ki("ag-floating-filter-button","ag-hidden")),[u,c]=I.useState("false"),[d,h]=I.useState(),[f,g]=I.useState(1),m=I.useRef(null),v=I.useRef(null),C=I.useRef(null),y=I.useRef(null),S=I.useRef(),_=I.useRef(),E=q=>{q!=null&&S.current&&S.current(q)},{ctrl:R}=t,b=I.useCallback(q=>{if(m.current=q,!m.current)return;_.current=new an(U=>{S.current=U});const B={addOrRemoveCssClass:(U,K)=>i(ie=>ie.setClass(U,K)),addOrRemoveBodyCssClass:(U,K)=>o(ie=>ie.setClass(U,K)),setButtonWrapperDisplayed:U=>{l(K=>K.setClass("ag-hidden",!U)),c(U?"false":"true")},setWidth:U=>{m.current&&(m.current.style.width=U)},setCompDetails:U=>h(U),getFloatingFilterComp:()=>_.current?_.current:null,setMenuIcon:U=>{var K;return(K=y.current)==null?void 0:K.appendChild(U)}};R.setComp(B,m.current,y.current,v.current)},[]);I.useLayoutEffect(()=>Um(d,e,v.current,E),[d]);const A=I.useMemo(()=>r.toString(),[r]),P=I.useMemo(()=>s.toString(),[s]),F=I.useMemo(()=>a.toString(),[a]),k=I.useMemo(()=>!!(d&&d.componentFromFramework&&Vh(d.componentClass)),[d]),L=I.useMemo(()=>n.get("reactiveCustomComponents"),[]),N=I.useMemo(()=>{if(d)if(L){const q=new hae(d.params,()=>g(B=>B+1));return E(q),q}else d.componentFromFramework&&OD()},[d]),W=N==null?void 0:N.getProps(),j=d&&d.componentFromFramework,z=d&&d.componentClass;return G.createElement("div",{ref:b,className:A,role:"gridcell"},G.createElement("div",{ref:v,className:P,role:"presentation"},j&&!L&&G.createElement(z,_r($t({},d.params),{ref:k?()=>{}:E})),j&&L&&G.createElement(xD.Provider,{value:{setMethods:q=>N.setMethods(q)}},G.createElement(z,$t({},W)))),G.createElement("div",{ref:C,"aria-hidden":u,className:F,role:"presentation"},G.createElement("button",{ref:y,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},xae=I.memo(Aae),Pae=t=>{const{ctrl:e}=t,{topOffset:n,rowHeight:r}=I.useMemo(()=>e.getTopAndHeight(),[]),i=e.getAriaRowIndex(),s=e.getHeaderRowClass(),[o,a]=I.useState(()=>r+"px"),[l,u]=I.useState(()=>n+"px"),c=I.useRef(null),d=I.useRef(null),[h,f]=I.useState(()=>e.getHeaderCtrls()),g=I.useRef(null),m=I.useCallback(y=>{if(g.current=y,!y)return;const S={setHeight:_=>a(_),setTop:_=>u(_),setHeaderCtrls:(_,E,R)=>{d.current=c.current,c.current=_;const b=DD(d.current,_,E);b!==d.current&&ID(R,()=>f(b))},setWidth:_=>{g.current&&(g.current.style.width=_)}};e.setComp(S,!1)},[]),v=I.useMemo(()=>({height:o,top:l}),[o,l]),C=I.useCallback(y=>{switch(e.getType()){case S_.COLUMN_GROUP:return G.createElement(_ae,{ctrl:y,key:y.getInstanceId()});case S_.FLOATING_FILTER:return G.createElement(xae,{ctrl:y,key:y.getInstanceId()});default:return G.createElement(Tae,{ctrl:y,key:y.getInstanceId()})}},[]);return G.createElement("div",{ref:m,className:s,role:"row",style:v,"aria-rowindex":i},h.map(C))},Iae=I.memo(Pae),Dae=t=>{const[e,n]=I.useState(!0),[r,i]=I.useState([]),{context:s}=I.useContext(Fr),o=I.useRef(null),a=I.useRef(null),l=I.useRef(null),u=t.pinned==="left",c=t.pinned==="right",d=!u&&!c,h=I.useCallback(m=>{if(o.current=m,!o.current){s.destroyBean(l.current),l.current=null;return}const v={setDisplayed:n,setCtrls:C=>i(C),setCenterWidth:C=>{a.current&&(a.current.style.width=C)},setViewportScrollLeft:C=>{o.current&&(o.current.scrollLeft=C)},setPinnedContainerWidth:C=>{o.current&&(o.current.style.width=C,o.current.style.minWidth=C,o.current.style.maxWidth=C)}};l.current=s.createBean(new sl(t.pinned)),l.current.setComp(v,o.current)},[]),f=e?"":"ag-hidden",g=()=>r.map(m=>G.createElement(Iae,{ctrl:m,key:m.getInstanceId()}));return G.createElement(G.Fragment,null,u&&G.createElement("div",{ref:h,className:"ag-pinned-left-header "+f,"aria-hidden":!e,role:"rowgroup"},g()),c&&G.createElement("div",{ref:h,className:"ag-pinned-right-header "+f,"aria-hidden":!e,role:"rowgroup"},g()),d&&G.createElement("div",{ref:h,className:"ag-header-viewport "+f,role:"presentation"},G.createElement("div",{ref:a,className:"ag-header-container",role:"rowgroup"},g())))},s0=I.memo(Dae),Oae=()=>{const[t,e]=I.useState(()=>new ki),[n,r]=I.useState(),{context:i}=I.useContext(Fr),s=I.useRef(null),o=I.useRef(null),a=I.useCallback(c=>{if(s.current=c,!c){i.destroyBean(o.current),o.current=null;return}const d={addOrRemoveCssClass:(h,f)=>e(g=>g.setClass(h,f)),setHeightAndMinHeight:h=>r(h)};o.current=i.createBean(new ol),o.current.setComp(d,s.current,s.current)},[]),l=I.useMemo(()=>"ag-header "+t.toString(),[t]),u=I.useMemo(()=>({height:n,minHeight:n}),[n]);return G.createElement("div",{ref:a,className:l,style:u,role:"presentation"},G.createElement(s0,{pinned:"left"}),G.createElement(s0,{pinned:null}),G.createElement(s0,{pinned:"right"}))},Mae=I.memo(Oae),Fae=(t,e)=>{I.useEffect(()=>{const n=e.current;if(n){const r=n.parentElement;if(r){const i=document.createComment(t);return r.insertBefore(i,n),()=>{r.removeChild(i)}}}},[t])},Ll=Fae,Nae=t=>{const e=I.useRef(t),n=I.useRef(),r=I.useRef(!1),i=I.useRef(!1),[,s]=I.useState(0);r.current&&(i.current=!0),I.useEffect(()=>(r.current||(n.current=e.current(),r.current=!0),s(o=>o+1),()=>{i.current&&n.current&&n.current()}),[])},Lae=t=>{const[e,n]=I.useState(),{context:r,popupService:i,localeService:s,gos:o}=I.useContext(Fr);return Nae(()=>{const{editDetails:a,cellCtrl:l,eParentCell:u}=t,{compDetails:c}=a,d=o.get("stopEditingWhenCellsLoseFocus"),h=r.createBean(new Cz(c.params)),f=h.getGui();if(t.jsChildComp){const S=t.jsChildComp.getGui();S&&f.appendChild(S)}const g={column:l.getColumn(),rowNode:l.getRowNode(),type:"popupCellEditor",eventSource:u,ePopup:f,position:a.popupPosition,keepWithinBounds:!0},m=i.positionPopupByComponent.bind(i,g),v=s.getLocaleTextFunc(),C=i.addPopup({modal:d,eChild:f,closeOnEsc:!0,closedCallback:()=>{l.onPopupEditorClosed()},anchorToElement:u,positionCallback:m,ariaLabel:v("ariaLabelCellEditor","Cell Editor")}),y=C?C.hideFunc:void 0;return n(h),t.jsChildComp&&t.jsChildComp.afterGuiAttached&&t.jsChildComp.afterGuiAttached(),()=>{y!=null&&y(),r.destroyBean(h)}}),G.createElement(G.Fragment,null,e&&t.wrappedContent&&OS.createPortal(t.wrappedContent,e.getGui()))},Fk=I.memo(Lae),kae=(t,e,n,r,i,s)=>{const{context:o}=I.useContext(Fr),a=I.useCallback(()=>{const l=i.current;if(!l)return;const u=l.getGui();u&&u.parentElement&&u.parentElement.removeChild(u),o.destroyBean(l),i.current=void 0},[]);I.useEffect(()=>{const l=t!=null,u=t&&t.compDetails&&!t.compDetails.componentFromFramework,c=e&&n==null;if(!(l&&u&&!c)){a();return}const h=t.compDetails;if(i.current){const C=i.current,S=C.refresh!=null&&t.force==!1?C.refresh(h.params):!1;if(S===!0||S===void 0)return;a()}const f=h.newAgStackInstance();if(!f)return;const g=f.resolveNow(null,C=>C);if(!g)return;const m=g.getGui();if(!m)return;(e?n:s.current).appendChild(m),i.current=g},[t,e,r]),I.useEffect(()=>a,[])},Gae=kae,Vae=class{constructor(t,e){this.cellEditorParams=t,this.refreshProps=e,this.instanceCreated=new an(n=>{this.resolveInstanceCreated=n}),this.onValueChange=n=>this.updateValue(n),this.value=t.value}getProps(){return _r($t({},this.cellEditorParams),{initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange})}getValue(){return this.value}refresh(t){this.cellEditorParams=t,this.refreshProps()}setMethods(t){PD(this.getOptionalMethods(),t,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(t){var e;this.componentInstance=t,(e=this.resolveInstanceCreated)==null||e.call(this),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached"]}updateValue(t){this.value=t,this.refreshProps()}},Hae=(t,e,n)=>{const r=n.getColumn();if(!t&&e.isPopup&&e.isPopup()){const i=`AG Grid: Found an issue in column ${r.getColId()}. If using React, specify an editor is a popup using colDef.cellEditorPopup=true. AG Grid React cannot depend on the editor component specifying if it's in a popup (via the isPopup() method on the editor), as React needs to know this information BEFORE the component is created.`;be.doOnce(()=>console.warn(i),"jsEditorComp-isPopup-"+n.getColumn().getColId())}if(t&&e.getPopupPosition&&e.getPopupPosition()!=null){const i=`AG Grid: Found an issue in column ${r.getColId()}. If using React, specify an editor popup position using colDef.cellEditorPopupPosition=true. AG Grid React cannot depend on the editor component specifying it's position (via the getPopupPosition() method on the editor), as React needs to know this information BEFORE the component is created.`;be.doOnce(()=>console.warn(i),"jsEditorComp-getPopupPosition-"+n.getColumn().getColId())}},Bae=(t,e,n)=>{const{compProxy:r}=t;n(r);const i=r.getProps(),s=Vh(e);return G.createElement(xD.Provider,{value:{setMethods:o=>r.setMethods(o)}},s&&G.createElement(e,$t({},i)),!s&&G.createElement(e,_r($t({},i),{ref:o=>r.setRef(o)})))},Nk=(t,e,n)=>{const r=t.compProxy;return G.createElement(G.Fragment,null,!r&&G.createElement(e,_r($t({},t.compDetails.params),{ref:n})),r&&Bae(t,e,n))},$ae=(t,e,n,r,i,s)=>{const o=t.compDetails,a=o.componentClass,l=o.componentFromFramework&&!t.popup,u=o.componentFromFramework&&t.popup,c=!o.componentFromFramework&&t.popup;return G.createElement(G.Fragment,null,l&&Nk(t,a,e),u&&G.createElement(Fk,{editDetails:t,cellCtrl:i,eParentCell:r,wrappedContent:Nk(t,a,n)}),c&&s&&G.createElement(Fk,{editDetails:t,cellCtrl:i,eParentCell:r,jsChildComp:s}))},Wae=(t,e,n,r,i,s,o)=>{const{compDetails:a,value:l}=t,u=!a,c=a&&a.componentFromFramework,d=a&&a.componentClass,h=l!=null&&l.toString?l.toString():l,f=()=>G.createElement(G.Fragment,null,u&&G.createElement(G.Fragment,null,h),c&&!s&&G.createElement(d,_r($t({},a.params),{key:e,ref:r})),c&&s&&G.createElement(d,_r($t({},a.params),{key:e})));return G.createElement(G.Fragment,null,i?G.createElement("span",{role:"presentation",id:`cell-${n}`,className:"ag-cell-value",ref:o},f()):f())},jae=t=>{const{context:e}=I.useContext(Fr),{cellCtrl:n,printLayout:r,editingRow:i}=t,s=n.getTabIndex(),o=n.getColumnIdSanitised(),a=n.getInstanceId(),[l,u]=I.useState(()=>n.isCellRenderer()?void 0:{compDetails:void 0,value:n.getValueToDisplay(),force:!1}),[c,d]=I.useState(),[h,f]=I.useState(1),[g,m]=I.useState(),[v,C]=I.useState(!1),[y,S]=I.useState(!1),[_,E]=I.useState(!1),[R,b]=I.useState(),A=I.useMemo(()=>n.isForceWrapper(),[n]),P=I.useMemo(()=>n.getCellAriaRole(),[n]),F=I.useRef(null),k=I.useRef(null),L=I.useRef(),N=I.useRef(),W=I.useRef(),j=I.useRef([]),z=I.useRef(),[q,B]=I.useState(0),U=I.useCallback(fe=>{z.current=fe,B(Z=>Z+1)},[]),K=l!=null&&(v||_||y),ie=A||K,Q=I.useCallback((fe,Z)=>{N.current=Z,Z&&(Hae(fe,Z,n),Z.isCancelBeforeStart&&Z.isCancelBeforeStart()&&setTimeout(()=>{n.stopEditing(!0),n.focusCell(!0)}))},[n]),se=I.useCallback(fe=>Q(!0,fe),[Q]),Me=I.useCallback(fe=>Q(!1,fe),[Q]);let Ee=I.useRef();Ee.current||(Ee.current=new Dm(()=>F.current)),Gae(l,ie,z.current,q,L,F);const qe=I.useRef();I.useLayoutEffect(()=>{const fe=qe.current,Z=l;if(qe.current=l,fe==null||fe.compDetails==null||Z==null||Z.compDetails==null)return;const Fe=fe.compDetails,pe=Z.compDetails;if(Fe.componentClass!=pe.componentClass||k.current==null||k.current.refresh==null)return;k.current.refresh(pe.params)!=!0&&f(Ze=>Ze+1)},[l]),I.useLayoutEffect(()=>{if(!(c&&!c.compDetails.componentFromFramework))return;const Z=c.compDetails,Fe=c.popup===!0,pe=Eae(Z);if(!pe)return;const ke=pe.getGui();if(Q(Fe,pe),!Fe){const Ze=(A?W:F).current;Ze==null||Ze.appendChild(ke),pe.afterGuiAttached&&pe.afterGuiAttached()}return b(pe),()=>{e.destroyBean(pe),Q(Fe,void 0),b(void 0),ke&&ke.parentElement&&ke.parentElement.removeChild(ke)}},[c]);const Ye=I.useCallback(fe=>{if(W.current=fe,!W.current){j.current.forEach(Fe=>Fe()),j.current=[];return}const Z=Fe=>{var pe;if(Fe){const ke=Fe.getGui();(pe=W.current)==null||pe.insertAdjacentElement("afterbegin",ke),j.current.push(()=>{e.destroyBean(Fe),be.removeFromParent(ke)})}return Fe};if(v){const Fe=n.createSelectionCheckbox();Z(Fe)}_&&Z(n.createDndSource()),y&&Z(n.createRowDragComp())},[n,e,_,y,v]),bt=I.useCallback(fe=>{if(F.current=fe,!F.current||!n)return;const Z={addOrRemoveCssClass:(pe,ke)=>Ee.current.addOrRemoveCssClass(pe,ke),setUserStyles:pe=>m(pe),getFocusableElement:()=>F.current,setIncludeSelection:pe=>C(pe),setIncludeRowDrag:pe=>S(pe),setIncludeDndSource:pe=>E(pe),getCellEditor:()=>N.current||null,getCellRenderer:()=>k.current?k.current:L.current,getParentOfValue:()=>z.current?z.current:W.current?W.current:F.current,setRenderDetails:(pe,ke,Ze)=>{u(yt=>(yt==null?void 0:yt.compDetails)!==pe||(yt==null?void 0:yt.value)!==ke||(yt==null?void 0:yt.force)!==Ze?{value:ke,compDetails:pe,force:Ze}:yt)},setEditDetails:(pe,ke,Ze,yt)=>{if(pe){let _n;yt?_n=new Vae(pe.params,()=>f(ei=>ei+1)):pe.componentFromFramework&&OD(),d({compDetails:pe,popup:ke,popupPosition:Ze,compProxy:_n}),ke||u(void 0)}else d(_n=>{_n!=null&&_n.compProxy&&(N.current=void 0)})}},Fe=W.current||void 0;n.setComp(Z,F.current,Fe,r,i)},[]),de=I.useMemo(()=>!!(l&&l.compDetails&&l.compDetails.componentFromFramework&&Vh(l.compDetails.componentClass)),[l]);I.useLayoutEffect(()=>{var fe;F.current&&(Ee.current.addOrRemoveCssClass("ag-cell-value",!ie),Ee.current.addOrRemoveCssClass("ag-cell-inline-editing",!!c&&!c.popup),Ee.current.addOrRemoveCssClass("ag-cell-popup-editing",!!c&&!!c.popup),Ee.current.addOrRemoveCssClass("ag-cell-not-inline-editing",!c||!!c.popup),(fe=n.getRowCtrl())==null||fe.setInlineEditingCss(!!c),n.shouldRestoreFocus()&&!n.isEditing()&&F.current.focus({preventScroll:!0}))});const xe=()=>G.createElement(G.Fragment,null,l!=null&&Wae(l,h,a,k,ie,de,U),c!=null&&$ae(c,Me,se,F.current,n,R));return G.createElement("div",{ref:bt,style:g,tabIndex:s,role:P,"col-id":o},ie?G.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:Ye},xe()):xe())},Uae=I.memo(jae),zae=t=>{const{context:e,gos:n}=I.useContext(Fr),{rowCtrl:r,containerType:i}=t,s=r.getTabIndex(),o=I.useRef(r.getDomOrder()),a=r.isFullWidth(),l=r.getRowNode().displayed,[u,c]=I.useState(()=>l?r.getRowIndex():null),[d,h]=I.useState(()=>r.getRowId()),[f,g]=I.useState(()=>r.getBusinessKey()),[m,v]=I.useState(()=>r.getRowStyles()),C=I.useRef(null),y=I.useRef(null),[S,_]=I.useState(()=>null),[E,R]=I.useState(),[b,A]=I.useState(()=>l?r.getInitialRowTop(i):void 0),[P,F]=I.useState(()=>l?r.getInitialTransform(i):void 0),k=I.useRef(null),L=I.useRef(),N=I.useRef(!1),[W,j]=I.useState(0);I.useEffect(()=>{var Ee;if(N.current||!E||W>10)return;const qe=(Ee=k.current)==null?void 0:Ee.firstChild;qe?(r.setupDetailRowAutoHeight(qe),N.current=!0):j(Ye=>Ye+1)},[E,W]);let z=I.useRef();z.current||(z.current=new Dm(()=>k.current));const q=I.useCallback(Ee=>{if(k.current=Ee,!k.current){r.unsetComp(i);return}if(!r.isAlive())return;const qe={setTop:A,setTransform:F,addOrRemoveCssClass:(Ye,bt)=>z.current.addOrRemoveCssClass(Ye,bt),setDomOrder:Ye=>o.current=Ye,setRowIndex:c,setRowId:h,setRowBusinessKey:g,setUserStyles:v,setCellCtrls:(Ye,bt)=>{y.current=C.current,C.current=Ye;const de=DD(y.current,Ye,o.current);de!==y.current&&ID(bt,()=>_(de))},showFullWidth:Ye=>R(Ye),getFullWidthCellRenderer:()=>L.current,refreshFullWidth:Ye=>Q.current?(R(bt=>_r($t({},bt),{params:Ye()})),!0):!L.current||!L.current.refresh?!1:L.current.refresh(Ye())};r.setComp(qe,k.current,i)},[]);I.useLayoutEffect(()=>Um(E,e,k.current,L),[E]);const B=I.useMemo(()=>{const Ee={top:b,transform:P};return Object.assign(Ee,m),Ee},[b,P,m]),U=a&&E&&E.componentFromFramework,K=!a&&S!=null,ie=I.useMemo(()=>!!((E==null?void 0:E.componentFromFramework)&&Vh(E.componentClass)),[E]),Q=I.useRef(!1);I.useEffect(()=>{Q.current=ie&&!!E&&!!n.get("reactiveCustomComponents")},[ie,E]);const se=()=>S==null?void 0:S.map(Ee=>G.createElement(Uae,{cellCtrl:Ee,editingRow:r.isEditing(),printLayout:r.isPrintLayout(),key:Ee.getInstanceId()})),Me=()=>{const Ee=E.componentClass;return G.createElement(G.Fragment,null,ie&&G.createElement(Ee,$t({},E.params)),!ie&&G.createElement(Ee,_r($t({},E.params),{ref:L})))};return G.createElement("div",{ref:q,role:"row",style:B,"row-index":u,"row-id":d,"row-business-key":f,tabIndex:s},K&&se(),U&&Me())},Kae=I.memo(zae),qae=t=>{const{context:e}=I.useContext(Fr),{name:n}=t,r=I.useMemo(()=>mz(n),[n]),i=I.useRef(null),s=I.useRef(null),o=I.useRef([]),a=I.useRef([]),[l,u]=I.useState(()=>[]),c=I.useRef(!1),d=I.useRef(),h=I.useMemo(()=>KC.getRowContainerCssClasses(n),[n]),f=I.useMemo(()=>rs(h.viewport),[h]),g=I.useMemo(()=>rs(h.container),[h]),m=n===Rt.CENTER||n===Rt.TOP_CENTER||n===Rt.BOTTOM_CENTER||n===Rt.STICKY_TOP_CENTER||n===Rt.STICKY_BOTTOM_CENTER,v=m?i:s;Ll(" AG Row Container "+n+" ",v);const C=I.useCallback(()=>m?i.current!=null&&s.current!=null:s.current!=null,[]),y=I.useCallback(()=>m?i.current==null&&s.current==null:s.current==null,[]),S=I.useCallback(()=>{if(y()&&(e.destroyBean(d.current),d.current=null),C()){const b=P=>{const F=DD(a.current,o.current,c.current);F!==a.current&&(a.current=F,ID(P,()=>u(F)))},A={setViewportHeight:P=>{i.current&&(i.current.style.height=P)},setRowCtrls:({rowCtrls:P,useFlushSync:F})=>{const k=!!F&&o.current.length>0&&P.length>0;o.current=P,b(k)},setDomOrder:P=>{c.current!=P&&(c.current=P,b(!1))},setContainerWidth:P=>{s.current&&(s.current.style.width=P)}};d.current=e.createBean(new KC(n)),d.current.setComp(A,s.current,i.current)}},[C,y]),_=I.useCallback(b=>{s.current=b,S()},[S]),E=I.useCallback(b=>{i.current=b,S()},[S]),R=()=>G.createElement("div",{className:g,ref:_,role:"rowgroup"},l.map(b=>G.createElement(Kae,{rowCtrl:b,containerType:r,key:b.getInstanceId()})));return G.createElement(G.Fragment,null,m?G.createElement("div",{className:f,ref:E,role:"presentation"},R()):R())},Yae=I.memo(qae),Qae=()=>{const{context:t,agStackComponentsRegistry:e,resizeObserverService:n}=I.useContext(Fr),[r,i]=I.useState(""),[s,o]=I.useState(0),[a,l]=I.useState(0),[u,c]=I.useState("0px"),[d,h]=I.useState("0px"),[f,g]=I.useState("100%"),[m,v]=I.useState("0px"),[C,y]=I.useState("0px"),[S,_]=I.useState("100%"),[E,R]=I.useState(""),[b,A]=I.useState(""),[P,F]=I.useState(null),[k,L]=I.useState(""),[N,W]=I.useState(null),[j,z]=I.useState("ag-layout-normal");let q=I.useRef();q.current||(q.current=new Dm(()=>B.current));const B=I.useRef(null),U=I.useRef(null),K=I.useRef(null),ie=I.useRef(null),Q=I.useRef(null),se=I.useRef(null),Me=I.useRef(null),Ee=I.useRef([]),qe=I.useRef([]);Ll(" AG Grid Body ",B),Ll(" AG Pinned Top ",U),Ll(" AG Sticky Top ",K),Ll(" AG Middle ",se),Ll(" AG Pinned Bottom ",Me);const Ye=I.useCallback(kn=>{if(B.current=kn,!B.current){t.destroyBeans(Ee.current),qe.current.forEach(Qe=>Qe()),Ee.current=[],qe.current=[];return}if(!t)return;const fr=Qe=>{const Tt=e.getComponentClass(Qe),ml=t.createBean(new Tt);return Ee.current.push(ml),ml},Qn=(Qe,Tt)=>{Qe.appendChild(Tt),qe.current.push(()=>Qe.removeChild(Tt))};Qn(B.current,document.createComment(" AG Fake Horizontal Scroll ")),Qn(B.current,fr("AG-FAKE-HORIZONTAL-SCROLL").getGui()),Qn(B.current,document.createComment(" AG Overlay Wrapper ")),Qn(B.current,fr("AG-OVERLAY-WRAPPER").getGui()),Q.current&&(Qn(Q.current,document.createComment(" AG Fake Vertical Scroll ")),Qn(Q.current,fr("AG-FAKE-VERTICAL-SCROLL").getGui()));const Es={setRowAnimationCssOnBodyViewport:i,setColumnCount:Qe=>{B.current&&be.setAriaColCount(B.current,Qe)},setRowCount:Qe=>{B.current&&be.setAriaRowCount(B.current,Qe)},setTopHeight:o,setBottomHeight:l,setStickyTopHeight:c,setStickyTopTop:h,setStickyTopWidth:g,setTopDisplay:R,setBottomDisplay:A,setColumnMovingCss:(Qe,Tt)=>q.current.addOrRemoveCssClass(Qe,Tt),updateLayoutClasses:z,setAlwaysVerticalScrollClass:F,setPinnedTopBottomOverflowY:L,setCellSelectableCss:(Qe,Tt)=>W(Tt?Qe:null),setBodyViewportWidth:Qe=>{se.current&&(se.current.style.width=Qe)},registerBodyViewportResizeListener:Qe=>{if(se.current){const Tt=n.observeResize(se.current,Qe);qe.current.push(()=>Tt())}},setStickyBottomHeight:v,setStickyBottomBottom:y,setStickyBottomWidth:_},Yo=t.createBean(new pr);Ee.current.push(Yo),Yo.setComp(Es,B.current,se.current,U.current,Me.current,K.current,ie.current)},[]),bt=I.useMemo(()=>rs("ag-root","ag-unselectable",j),[j]),de=I.useMemo(()=>rs("ag-body-viewport",r,j,P,N),[r,j,P,N]),xe=I.useMemo(()=>rs("ag-body",j),[j]),fe=I.useMemo(()=>rs("ag-floating-top",N),[N]),Z=I.useMemo(()=>rs("ag-sticky-top",N),[N]),Fe=I.useMemo(()=>rs("ag-sticky-bottom",N),[N]),pe=I.useMemo(()=>rs("ag-floating-bottom",N),[N]),ke=I.useMemo(()=>({height:s,minHeight:s,display:E,overflowY:k}),[s,E,k]),Ze=I.useMemo(()=>({height:u,top:d,width:f}),[u,d,f]),yt=I.useMemo(()=>({height:m,bottom:C,width:S}),[m,C,S]),_n=I.useMemo(()=>({height:a,minHeight:a,display:b,overflowY:k}),[a,b,k]),ei=kn=>G.createElement(Yae,{name:kn,key:`${kn}-container`}),Nr=({section:kn,children:fr,className:Qn,style:Es})=>G.createElement("div",{ref:kn,className:Qn,role:"presentation",style:Es},fr.map(ei));return G.createElement("div",{ref:Ye,className:bt,role:"treegrid"},G.createElement(Mae,null),Nr({section:U,className:fe,style:ke,children:[Rt.TOP_LEFT,Rt.TOP_CENTER,Rt.TOP_RIGHT,Rt.TOP_FULL_WIDTH]}),G.createElement("div",{className:xe,ref:Q,role:"presentation"},Nr({section:se,className:de,children:[Rt.LEFT,Rt.CENTER,Rt.RIGHT,Rt.FULL_WIDTH]})),Nr({section:K,className:Z,style:Ze,children:[Rt.STICKY_TOP_LEFT,Rt.STICKY_TOP_CENTER,Rt.STICKY_TOP_RIGHT,Rt.STICKY_TOP_FULL_WIDTH]}),Nr({section:ie,className:Fe,style:yt,children:[Rt.STICKY_BOTTOM_LEFT,Rt.STICKY_BOTTOM_CENTER,Rt.STICKY_BOTTOM_RIGHT,Rt.STICKY_BOTTOM_FULL_WIDTH]}),Nr({section:Me,className:pe,style:_n,children:[Rt.BOTTOM_LEFT,Rt.BOTTOM_CENTER,Rt.BOTTOM_RIGHT,Rt.BOTTOM_FULL_WIDTH]}))},Xae=I.memo(Qae),Jae=(t,e)=>{const{children:n,eFocusableElement:r,onTabKeyDown:i,gridCtrl:s,forceFocusOutWhenTabGuardsAreEmpty:o}=t,{context:a}=I.useContext(Fr),l=I.useRef(null),u=I.useRef(null),c=I.useRef(),d=v=>{const C=v==null?void 0:parseInt(v,10).toString();[l,u].forEach(y=>{var S,_;C===void 0?(S=y.current)==null||S.removeAttribute("tabindex"):(_=y.current)==null||_.setAttribute("tabindex",C)})};I.useImperativeHandle(e,()=>({forceFocusOutOfContainer(v){var C;(C=c.current)==null||C.forceFocusOutOfContainer(v)}}));const h=I.useCallback(()=>{if(!l.current&&!u.current){a.destroyBean(c.current),c.current=null;return}if(l.current&&u.current){const v={setTabIndex:d};c.current=a.createBean(new AE({comp:v,eTopGuard:l.current,eBottomGuard:u.current,eFocusableElement:r,onTabKeyDown:i,forceFocusOutWhenTabGuardsAreEmpty:o,focusInnerElement:C=>s.focusInnerElement(C)}))}},[]),f=I.useCallback(v=>{l.current=v,h()},[h]),g=I.useCallback(v=>{u.current=v,h()},[h]),m=v=>{const C=v==="top"?ky.TAB_GUARD_TOP:ky.TAB_GUARD_BOTTOM;return G.createElement("div",{className:`${ky.TAB_GUARD} ${C}`,role:"presentation",ref:v==="top"?f:g})};return G.createElement(G.Fragment,null,m("top"),n,m("bottom"))},Zae=I.forwardRef(Jae),ele=I.memo(Zae),tle=({context:t})=>{const[e,n]=I.useState(""),[r,i]=I.useState(""),[s,o]=I.useState(""),[a,l]=I.useState(null),[u,c]=I.useState(null),[d,h]=I.useState(!1),[f,g]=I.useState(),m=I.useRef(null),v=I.useRef(null),C=I.useRef(),[y,S]=I.useState(null),_=I.useRef(()=>{}),E=I.useCallback(()=>{},[]),R=I.useMemo(()=>t.isDestroyed()?null:t.getBean("beans"),[t]);Ll(" AG Grid ",v);const b=I.useCallback(L=>{if(v.current=L,!v.current){t.destroyBean(m.current),m.current=null;return}if(t.isDestroyed())return;m.current=t.createBean(new cl);const N=m.current;_.current=N.focusInnerElement.bind(N);const W={destroyGridUi:()=>{},setRtlClass:n,forceFocusOutOfContainer:j=>{var z;(z=C.current)==null||z.forceFocusOutOfContainer(j)},updateLayoutClasses:o,getFocusableContainers:()=>{var j,z;const q=[],B=(j=v.current)==null?void 0:j.querySelector(".ag-root"),U=(z=v.current)==null?void 0:z.querySelector(".ag-side-bar:not(.ag-hidden)");return B&&q.push(B),U&&q.push(U),q},setCursor:l,setUserSelect:c};N.setComp(W,v.current,v.current),h(!0)},[]);I.useEffect(()=>{if(!f||!R||!m.current||!y||!v.current)return;const L=m.current,N=[],{agStackComponentsRegistry:W}=R,j=W.getComponentClass("AG-GRID-HEADER-DROP-ZONES"),z=W.getComponentClass("AG-SIDE-BAR"),q=W.getComponentClass("AG-STATUS-BAR"),B=W.getComponentClass("AG-WATERMARK"),U=W.getComponentClass("AG-PAGINATION"),K=[],ie=v.current;if(L.showDropZones()&&j){const Q=t.createBean(new j),se=Q.getGui();ie.insertAdjacentElement("afterbegin",se),K.push(se),N.push(Q)}if(L.showSideBar()&&z){const Q=t.createBean(new z),se=Q.getGui(),Me=y.querySelector(".ag-tab-guard-bottom");Me&&(Me.insertAdjacentElement("beforebegin",se),K.push(se)),N.push(Q)}if(L.showStatusBar()&&q){const Q=t.createBean(new q),se=Q.getGui();ie.insertAdjacentElement("beforeend",se),K.push(se),N.push(Q)}if(U){const Q=t.createBean(new U),se=Q.getGui();ie.insertAdjacentElement("beforeend",se),K.push(se),N.push(Q)}if(L.showWatermark()&&B){const Q=t.createBean(new B),se=Q.getGui();ie.insertAdjacentElement("beforeend",se),K.push(se),N.push(Q)}return()=>{t.destroyBeans(N),K.forEach(Q=>{Q.parentElement&&Q.parentElement.removeChild(Q)})}},[f,y,R]);const A=I.useMemo(()=>rs("ag-root-wrapper",e,r,s),[e,r,s]),P=I.useMemo(()=>rs("ag-root-wrapper-body","ag-focus-managed",s),[s]),F=I.useMemo(()=>({userSelect:u??"",WebkitUserSelect:u??"",cursor:a??""}),[u,a]),k=I.useCallback(L=>{C.current=L,g(L!==null)},[]);return G.createElement("div",{ref:b,className:A,style:F,role:"presentation"},G.createElement("div",{className:P,ref:S,role:"presentation"},d&&y&&R&&G.createElement(Fr.Provider,{value:R},G.createElement(ele,{ref:k,eFocusableElement:y,onTabKeyDown:E,gridCtrl:m.current,forceFocusOutWhenTabGuardsAreEmpty:!0},G.createElement(Xae,null)))))},nle=I.memo(tle),B4=t=>{var e,n;const r=I.useRef(),i=I.useRef(null),s=I.useRef(null),o=I.useRef([]),a=I.useRef([]),l=I.useRef(t),u=I.useRef(!1),[c,d]=I.useState(void 0),[,h]=I.useState(0),f=I.useCallback(v=>{if(i.current=v,!i.current){o.current.forEach(b=>b()),o.current.length=0;return}const C=t.modules||[];s.current||(s.current=new Cae(()=>h(b=>b+1),t.componentWrappingElement,t.maxComponentCreationTimeMs),o.current.push(()=>{var b;(b=s.current)==null||b.destroy(),s.current=null}));const y=$C.combineAttributesAndGridOptions(t.gridOptions,t),S={providedBeanInstances:{frameworkComponentWrapper:new ile(s.current,!!y.reactiveCustomComponents)},modules:C,frameworkOverrides:new ole},_=b=>{d(b),o.current.push(()=>{b.destroy()}),b.getBean(ou.NAME).whenReady(()=>{if(b.isDestroyed())return;const P=r.current;P&&t.setGridApi&&t.setGridApi(P,new Id(P))})},E=b=>{b.getBean(ou.NAME).whenReady(()=>{a.current.forEach(P=>P()),a.current.length=0,u.current=!0})},R=new xie;r.current=R.create(i.current,y,_,E,S)},[]),g=I.useMemo(()=>$t({height:"100%"},t.containerStyle||{}),[t.containerStyle]),m=I.useCallback(v=>{u.current?v():a.current.push(v)},[]);return I.useEffect(()=>{const v=rle(l.current,t);l.current=t,m(()=>{r.current&&$C.processOnChange(v,r.current)})},[t]),G.createElement("div",{style:g,className:t.className,ref:f},c&&!c.isDestroyed()?G.createElement(nle,{context:c}):null,(n=(e=s.current)==null?void 0:e.getPortals())!=null?n:null)};function rle(t,e){const n={};return Object.keys(e).forEach(r=>{const i=e[r];t[r]!==i&&(n[r]=i)}),n}var ile=class extends Pie{constructor(t,e){super(),this.parent=t,this.reactiveCustomComponents=e}createWrapper(t,e){if(this.reactiveCustomComponents){const i=(s=>{switch(s){case"filter":return dae;case"floatingFilterComponent":return pae;case"dateComponent":return cae;case"loadingOverlayComponent":return fae;case"noRowsOverlayComponent":return mae;case"statusPanel":return vae;case"toolPanel":return yae;case"menuItem":return gae}})(e.propertyName);if(i)return new i(t,this.parent,e)}else switch(e.propertyName){case"filter":case"floatingFilterComponent":case"dateComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"statusPanel":case"toolPanel":case"menuItem":OD();break}const n=!e.cellRenderer&&e.propertyName!=="toolPanel";return new N4(t,this.parent,e,n)}},sle=I.forwardRef((t,e)=>{const{ctrlsFactory:n,context:r,gos:i,resizeObserverService:s,clientSideRowModel:o,serverSideRowModel:a}=I.useContext(Fr),[l,u]=I.useState(()=>new ki),[c,d]=I.useState(()=>new ki),[h,f]=I.useState(),[g,m]=I.useState(),v=I.useRef(),C=I.useRef(null),y=I.useRef(),S=I.useMemo(()=>nt.__getGridRegisteredModules(t.api.getGridId()),[t]),_=I.useMemo(()=>l.toString()+" ag-details-row",[l]),E=I.useMemo(()=>c.toString()+" ag-details-grid",[c]);e&&I.useImperativeHandle(e,()=>({refresh(){var A,P;return(P=(A=v.current)==null?void 0:A.refresh())!=null?P:!1}})),t.template&&be.warnOnce("detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://ag-grid.com/react-data-grid/master-detail-custom-detail/");const R=I.useCallback(A=>{if(C.current=A,!C.current){r.destroyBean(v.current),y.current&&y.current();return}const P={addOrRemoveCssClass:(k,L)=>u(N=>N.setClass(k,L)),addOrRemoveDetailGridCssClass:(k,L)=>d(N=>N.setClass(k,L)),setDetailGrid:k=>f(k),setRowData:k=>m(k),getGui:()=>C.current},F=n.getInstance("detailCellRenderer");if(F&&(r.createBean(F),F.init(P,t),v.current=F,i.get("detailRowAutoHeight"))){const k=()=>{if(C.current==null)return;const L=C.current.clientHeight;L!=null&&L>0&&setTimeout(()=>{t.node.setRowHeight(L),o?o.onRowHeightChanged():a&&a.onRowHeightChanged()},0)};y.current=s.observeResize(C.current,k),k()}},[]),b=I.useCallback((A,P)=>{var F;(F=v.current)==null||F.registerDetailWithMaster(A,P)},[]);return G.createElement("div",{className:_,ref:R},h&&G.createElement(B4,_r($t({className:E},h),{modules:S,rowData:g,setGridApi:b})))}),ole=class extends Oz{constructor(){super("react"),this.frameworkComponents={agGroupCellRenderer:Mk,agGroupRowRenderer:Mk,agDetailCellRenderer:sle},this.wrapIncoming=(t,e)=>e==="ensureVisible"?Sae(t):t(),this.renderingEngine="react"}frameworkComponent(t){return this.frameworkComponents[t]}isFrameworkComponent(t){if(!t)return!1;const e=t.prototype;return!(e&&"getGui"in e)}},ale=class extends I.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=(t,e)=>{this.api=t,this.columnApi=e,this.apiListeners.forEach(n=>n(t))}}registerApiListener(t){this.apiListeners.push(t)}componentWillUnmount(){this.apiListeners.length=0}render(){return G.createElement(B4,_r($t({},this.props),{setGridApi:this.setGridApi}))}};function lle(){const[t,e]=I.useState({}),[n,r]=I.useState(!1);return I.useEffect(()=>{const i=Rm(YS(_m,"athletes"),s=>{const o={};s.docs.forEach(a=>{o[a.id]={id:a.id,...a.data()}}),e(o),r(!0)},s=>{console.error("athletes map error:",s),r(!0)});return()=>i()},[]),{map:t,ready:n}}function ule(t=300){const[e,n]=I.useState([]),[r,i]=I.useState(!0),[s,o]=I.useState(null),{map:a,ready:l}=lle();return I.useEffect(()=>{if(!l)return;const u=nI(YS(_m,"jumpLogs"),Cte("timestamp","desc"),oI(t)),c=Rm(u,d=>{const h=d.docs.map(f=>{var v;const g={id:f.id,...f.data()},m=a[g.athleteId]||{};return{...g,name:m.name||`Athlete ${((v=g.athleteId)==null?void 0:v.slice(0,6))||"?"}`,position:m.position||"",club:m.club||"",country:m.country||"",age:m.age||""}});n(h),i(!1)},d=>{console.error("useJumpLogs error:",d),o(d.message),i(!1)});return()=>c()},[l,t]),{jumps:e,loading:r,error:s}}function cle(t,e=100){const[n,r]=I.useState([]),[i,s]=I.useState(!0),[o,a]=I.useState(null);return I.useEffect(()=>{if(!t)return;const l=nI(YS(_m,"jumpLogs"),JW("athleteId","==",t),oI(e)),u=Rm(l,c=>{r(c.docs.map(d=>({id:d.id,...d.data()}))),s(!1)},c=>{console.error("useAthleteJumps error:",c),a(c.message),s(!1)});return()=>u()},[t,e]),{jumps:n,loading:i,error:o}}function $4(t){const[e,n]=I.useState(null),[r,i]=I.useState(!0),[s,o]=I.useState(null);return I.useEffect(()=>{if(!t)return;const a=Rm(ste(_m,"athletes",t),l=>{n(l.exists()?{id:l.id,...l.data()}:null),i(!1)},l=>{o(l.message),i(!1)});return()=>a()},[t]),{athlete:e,loading:r,error:s}}function dle(t){const[e,n]=I.useState(null),[r,i]=I.useState(!0);return I.useEffect(()=>{const s=nI(YS(_m,"jumpLogs"),JW("athleteId","==",t),oI(10)),o=Rm(s,a=>{if(a.empty)n(null);else{const l=a.docs.map(u=>({id:u.id,...u.data()})).sort((u,c)=>new Date(c.timestamp)-new Date(u.timestamp));n(l[0])}i(!1)});return()=>o()},[t]),{jump:e,loading:r}}function W4(t){return t?typeof(t==null?void 0:t.toDate)=="function"?t.toDate():typeof t=="string"?new Date(t):t instanceof Date?t:null:null}function j4(t){const e=W4(t);if(!e||isNaN(e))return"Never";const r=new Date-e,i=Math.floor(r/1e3),s=Math.floor(i/60),o=Math.floor(s/60),a=Math.floor(o/24);return i<30?"Just now":i<60?`${i}s ago`:s<60?`${s}m ago`:o<24?`${o}h ago`:a<7?`${a}d ago`:e.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}function U4(t){const e=W4(t);return!e||isNaN(e)?"":e.toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}function hle(t){return(t==null?void 0:t.avgEfficiencyScore)??(t==null?void 0:t.efficiencyScore)??0}function Lc(t){return t>=80?"score-high":t>=60?"score-mid":"score-low"}function z4(t){return t>=80?{label:"Elite",bg:"bg-grass-500/20 text-grass-400 border border-grass-500/30"}:t>=60?{label:"Good",bg:"bg-amber-500/20 text-amber-400 border border-amber-500/30"}:{label:"Needs Work",bg:"bg-danger-500/20 text-danger-400 border border-danger-500/30"}}function xg(t){return!t&&t!==0?{color:"text-grass-400/40",bg:"",label:""}:t<10?{color:"text-grass-400",bg:"bg-grass-500/15",label:`${t.toFixed(1)}`}:t<15?{color:"text-amber-400",bg:"bg-amber-500/15",label:`${t.toFixed(1)}`}:{color:"text-danger-400",bg:"bg-danger-500/15",label:`${t.toFixed(1)}`}}function MD(t){return t==="LOW"?{color:"text-grass-400",bg:"bg-grass-500/15 border border-grass-500/25"}:{color:"text-danger-400",bg:"bg-danger-500/15 border border-danger-500/25"}}function ple(t){return t===1?"":t===2?"":t===3?"":`#${t}`}function fle(){return M.jsx("div",{className:"h-12 rounded-lg bg-pitch-800/50 animate-pulse my-1"})}function gle(){return M.jsxs("div",{className:"panel p-5 animate-pulse",children:[M.jsx("div",{className:"h-4 bg-pitch-700/60 rounded w-1/3 mb-3"}),M.jsx("div",{className:"h-8 bg-pitch-700/60 rounded w-1/2 mb-2"}),M.jsx("div",{className:"h-3 bg-pitch-700/40 rounded w-2/3"})]})}function K4({rows:t=8}){return M.jsx("div",{className:"space-y-1 animate-fade-in",children:Array.from({length:t}).map((e,n)=>M.jsx(fle,{},n))})}function q4({title:t="No data found",message:e="Try adjusting your filters.",icon:n}){return M.jsxs("div",{className:"flex flex-col items-center justify-center py-24 gap-4 animate-fade-in",children:[M.jsx("div",{className:"text-5xl opacity-30",children:n||""}),M.jsx("h3",{className:"font-display font-bold text-xl tracking-wide text-grass-400/60 uppercase",children:t}),M.jsx("p",{className:"text-sm text-grass-400/40 font-body max-w-xs text-center",children:e})]})}function Y4({message:t}){return M.jsxs("div",{className:"flex flex-col items-center justify-center py-24 gap-4 animate-fade-in",children:[M.jsx("div",{className:"text-5xl",children:""}),M.jsx("h3",{className:"font-display font-bold text-xl tracking-wide text-danger-400/80 uppercase",children:"Firebase Error"}),M.jsx("p",{className:"text-sm text-danger-400/60 font-mono max-w-md text-center bg-danger-500/10 border border-danger-500/20 rounded-lg px-4 py-3",children:t}),M.jsx("p",{className:"text-xs text-grass-400/40",children:"Check your .env file and Firestore security rules."})]})}const Q4={position:"All",country:"All",riskLevel:"All",movementType:"All",minScore:0,search:""};function mle({jumps:t,filters:e,onChange:n}){const r=(u,c)=>n({...e,[u]:c}),i=["All",...new Set(t.map(u=>u.position).filter(Boolean))],s=["All",...new Set(t.map(u=>u.country).filter(Boolean))].sort((u,c)=>u==="All"?-1:u.localeCompare(c)),o=["All",...new Set(t.map(u=>u.movementType).filter(Boolean))],a=["All","HIGH","LOW"],l=e.position!=="All"||e.country!=="All"||e.riskLevel!=="All"||e.movementType!=="All"||e.minScore>0||e.search!=="";return M.jsxs("div",{className:"panel px-5 py-4 flex flex-wrap gap-4 items-end",children:[M.jsxs("div",{className:"flex-1 min-w-[180px] flex flex-col gap-1",children:[M.jsx("label",{className:"text-[10px] font-display tracking-widest uppercase text-grass-400/50",children:"Search athlete"}),M.jsx("input",{type:"text",placeholder:"Name, club, country",className:"input-field w-full",value:e.search,onChange:u=>r("search",u.target.value)})]}),[{label:"Position",key:"position",opts:i},{label:"Country",key:"country",opts:s},{label:"Risk Level",key:"riskLevel",opts:a},{label:"Movement Type",key:"movementType",opts:o}].map(({label:u,key:c,opts:d})=>M.jsxs("div",{className:"flex flex-col gap-1",children:[M.jsx("label",{className:"text-[10px] font-display tracking-widest uppercase text-grass-400/50",children:u}),M.jsx("select",{className:"input-field",value:e[c],onChange:h=>r(c,h.target.value),children:d.map(h=>M.jsx("option",{value:h,children:h},h))})]},c)),M.jsxs("div",{className:"flex flex-col gap-1 min-w-[160px]",children:[M.jsxs("label",{className:"text-[10px] font-display tracking-widest uppercase text-grass-400/50",children:["Min Score: ",M.jsx("span",{className:"text-grass-400 font-mono",children:e.minScore})]}),M.jsx("input",{type:"range",min:0,max:100,step:5,value:e.minScore,onChange:u=>r("minScore",Number(u.target.value)),className:"accent-grass-500 cursor-pointer"})]}),l&&M.jsx("button",{className:"btn-ghost text-danger-400/70 hover:text-danger-400",onClick:()=>n(Q4),children:" Reset"})]})}function vle({jumps:t,loading:e,error:n}){const[r,i]=I.useState(!1);return M.jsxs("div",{className:"fixed bottom-4 right-4 z-50",children:[M.jsxs("button",{onClick:()=>i(s=>!s),className:"bg-pitch-800 border border-grass-500/30 text-grass-400 text-xs font-mono px-3 py-1.5 rounded-lg shadow-panel",children:[" Debug (",t.length," entries)"]}),r&&M.jsxs("div",{className:"absolute bottom-10 right-0 w-[440px] max-h-[420px] overflow-auto bg-pitch-950 border border-grass-500/20 rounded-xl shadow-panel p-4 text-xs font-mono",children:[M.jsx("div",{className:"text-grass-400 font-bold mb-2",children:"Firebase  jumpLogs"}),M.jsxs("div",{children:["Loading: ",M.jsx("span",{className:e?"text-amber-400":"text-grass-400",children:String(e)})]}),M.jsxs("div",{children:["Error: ",M.jsx("span",{className:n?"text-danger-400":"text-grass-400",children:n||"none"})]}),M.jsxs("div",{className:"mb-2",children:["Entries found: ",M.jsx("span",{className:"text-grass-400 font-bold",children:t.length})]}),t.length>0&&M.jsxs(M.Fragment,{children:[M.jsx("div",{className:"text-grass-400 font-bold mt-3 mb-1",children:"Latest entry raw data:"}),M.jsx("pre",{className:"text-grass-400/70 text-[10px] whitespace-pre-wrap overflow-auto",children:JSON.stringify(t[0],null,2)})]}),t.length===0&&!e&&!n&&M.jsxs("div",{className:"text-amber-400 mt-2",children:[" jumpLogs collection empty or Firestore index missing.",M.jsx("br",{}),"Create index: jumpLogs  timestamp DESC"]})]})]})}function yle(){const t=gh(),{jumps:e,loading:n,error:r}=ule(300),[i,s]=I.useState(Q4),o=I.useCallback(c=>{c&&t(`/dashboard/athlete/${c}`)},[t]),a=I.useMemo(()=>e.filter(c=>{if(i.position!=="All"&&c.position!==i.position||i.country!=="All"&&c.country!==i.country||i.riskLevel!=="All"&&c.riskLevel!==i.riskLevel||i.movementType!=="All"&&c.movementType!==i.movementType||i.minScore>0&&(c.efficiencyScore??0)<i.minScore)return!1;if(i.search){const d=i.search.toLowerCase();if(![c.name,c.club,c.country,c.position,c.movementType].some(h=>h==null?void 0:h.toLowerCase().includes(d)))return!1}return!0}).map((c,d)=>({...c,rank:d+1})),[e,i]),l=I.useMemo(()=>[{headerName:"#",field:"rank",width:75,pinned:"left",cellRenderer:({value:c})=>M.jsx("span",{className:"font-display font-bold text-base text-grass-400/80",children:ple(c)})},{headerName:"Athlete",field:"name",flex:1,minWidth:160,pinned:"left",cellRenderer:({value:c,data:d})=>M.jsxs("button",{onClick:()=>o(d==null?void 0:d.athleteId),className:"font-semibold text-white hover:text-grass-400 transition-colors text-left w-full group flex items-center gap-2",children:[M.jsx("span",{className:"w-7 h-7 rounded-lg bg-pitch-700 flex items-center justify-center text-xs text-grass-400 font-bold flex-shrink-0",children:(c||"?").charAt(0).toUpperCase()}),M.jsx("span",{className:"group-hover:underline underline-offset-2 truncate",children:c})]})},{headerName:"Score",field:"efficiencyScore",width:95,cellRenderer:({value:c})=>M.jsx("span",{className:`score-pill ${Lc(c??0)} text-sm`,children:c??""})},{headerName:"Risk",field:"riskLevel",width:90,cellRenderer:({value:c})=>{const d=MD(c);return M.jsx("span",{className:`badge ${d.bg} ${d.color} uppercase text-[10px]`,children:c})}},{headerName:"Movement",field:"movementType",width:115,cellRenderer:({value:c})=>M.jsx("span",{className:"badge bg-pitch-700 text-grass-400/80 border border-grass-500/15 uppercase text-[10px]",children:c})},{headerName:"Valgus ",field:"valgusAngle",width:105,cellRenderer:({value:c})=>{const d=xg(c);return M.jsxs("span",{className:`font-mono font-semibold ${d.color}`,children:[c!=null&&c.toFixed?c.toFixed(1):"",""]})}},{headerName:"Vertical G",field:"peakVerticalG",width:110,cellStyle:{fontFamily:"JetBrains Mono",color:"#86efac"},valueFormatter:({value:c})=>c!=null&&c.toFixed?c.toFixed(2):""},{headerName:"Lateral G",field:"peakLateralG",width:105,cellStyle:{fontFamily:"JetBrains Mono",color:"#86efac"},valueFormatter:({value:c})=>c!=null&&c.toFixed?c.toFixed(2):""},{headerName:"Rotational Vel",field:"peakRotationalVel",width:130,cellStyle:{fontFamily:"JetBrains Mono",color:"#c8f0d5"},valueFormatter:({value:c})=>c!=null&&c.toFixed?c.toFixed(2):""},{headerName:"Position",field:"position",width:120,cellStyle:{color:"#86efac",opacity:.8}},{headerName:"Country",field:"country",width:110,cellStyle:{color:"#c8f0d5"}},{headerName:"Timestamp",field:"timestamp",width:170,cellRenderer:({value:c})=>M.jsx("span",{className:"text-xs text-grass-400/50 font-mono",children:U4(c)})},{headerName:"AI Tip",field:"tip",flex:2,minWidth:200,cellStyle:{color:"#86efac",opacity:.6,fontSize:"11px"}}],[o]),u=I.useMemo(()=>({sortable:!0,resizable:!0}),[]);return r?M.jsx(Y4,{message:r}):M.jsxs("div",{className:"space-y-4 animate-fade-in",children:[M.jsxs("div",{className:"flex items-end justify-between",children:[M.jsxs("div",{children:[M.jsx("h1",{className:"font-display font-bold text-4xl uppercase tracking-wider text-white",children:"Live Jump Feed"}),M.jsx("p",{className:"text-sm text-grass-400/50 mt-1",children:n?"Connecting to Firebase":e.length===0?" No jump events found  check Firestore index and rules":`${a.length} events${a.length!==e.length?` of ${e.length}`:""}  sorted by latest`})]}),M.jsxs("div",{className:"flex items-center gap-2 text-xs font-mono text-grass-500/60",children:[M.jsx("span",{className:"w-2 h-2 rounded-full bg-grass-500 animate-pulse-slow"}),"Real-time"]})]}),M.jsx(mle,{jumps:e,filters:i,onChange:s}),n?M.jsx(K4,{rows:8}):a.length===0?M.jsx(q4,{title:"No events match",message:"Try adjusting your filters.",icon:""}):M.jsx("div",{className:"panel overflow-hidden",children:M.jsx("div",{className:"ag-theme-alpine-dark",style:{height:"calc(100vh - 320px)",minHeight:400},children:M.jsx(ale,{rowData:a,columnDefs:l,defaultColDef:u,animateRows:!0,suppressCellFocus:!0,getRowId:({data:c})=>c.id})})}),M.jsx(vle,{jumps:e,loading:n,error:r})]})}function X4(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=X4(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function $e(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=X4(t))&&(r&&(r+=" "),r+=e);return r}var Cle=Array.isArray,Zr=Cle,wle=typeof Cv=="object"&&Cv&&Cv.Object===Object&&Cv,J4=wle,Sle=J4,Ele=typeof self=="object"&&self&&self.Object===Object&&self,ble=Sle||Ele||Function("return this")(),Js=ble,Tle=Js,Rle=Tle.Symbol,zm=Rle,Lk=zm,Z4=Object.prototype,_le=Z4.hasOwnProperty,Ale=Z4.toString,bp=Lk?Lk.toStringTag:void 0;function xle(t){var e=_le.call(t,bp),n=t[bp];try{t[bp]=void 0;var r=!0}catch{}var i=Ale.call(t);return r&&(e?t[bp]=n:delete t[bp]),i}var Ple=xle,Ile=Object.prototype,Dle=Ile.toString;function Ole(t){return Dle.call(t)}var Mle=Ole,kk=zm,Fle=Ple,Nle=Mle,Lle="[object Null]",kle="[object Undefined]",Gk=kk?kk.toStringTag:void 0;function Gle(t){return t==null?t===void 0?kle:Lle:Gk&&Gk in Object(t)?Fle(t):Nle(t)}var Uo=Gle;function Vle(t){return t!=null&&typeof t=="object"}var zo=Vle,Hle=Uo,Ble=zo,$le="[object Symbol]";function Wle(t){return typeof t=="symbol"||Ble(t)&&Hle(t)==$le}var Hh=Wle,jle=Zr,Ule=Hh,zle=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Kle=/^\w*$/;function qle(t,e){if(jle(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Ule(t)?!0:Kle.test(t)||!zle.test(t)||e!=null&&t in Object(e)}var FD=qle;function Yle(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var hl=Yle;const Bh=gt(hl);var Qle=Uo,Xle=hl,Jle="[object AsyncFunction]",Zle="[object Function]",eue="[object GeneratorFunction]",tue="[object Proxy]";function nue(t){if(!Xle(t))return!1;var e=Qle(t);return e==Zle||e==eue||e==Jle||e==tue}var ND=nue;const Oe=gt(ND);var rue=Js,iue=rue["__core-js_shared__"],sue=iue,o0=sue,Vk=function(){var t=/[^.]+$/.exec(o0&&o0.keys&&o0.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function oue(t){return!!Vk&&Vk in t}var aue=oue,lue=Function.prototype,uue=lue.toString;function cue(t){if(t!=null){try{return uue.call(t)}catch{}try{return t+""}catch{}}return""}var e3=cue,due=ND,hue=aue,pue=hl,fue=e3,gue=/[\\^$.*+?()[\]{}|]/g,mue=/^\[object .+?Constructor\]$/,vue=Function.prototype,yue=Object.prototype,Cue=vue.toString,wue=yue.hasOwnProperty,Sue=RegExp("^"+Cue.call(wue).replace(gue,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Eue(t){if(!pue(t)||hue(t))return!1;var e=due(t)?Sue:mue;return e.test(fue(t))}var bue=Eue;function Tue(t,e){return t==null?void 0:t[e]}var Rue=Tue,_ue=bue,Aue=Rue;function xue(t,e){var n=Aue(t,e);return _ue(n)?n:void 0}var Zu=xue,Pue=Zu,Iue=Pue(Object,"create"),GE=Iue,Hk=GE;function Due(){this.__data__=Hk?Hk(null):{},this.size=0}var Oue=Due;function Mue(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Fue=Mue,Nue=GE,Lue="__lodash_hash_undefined__",kue=Object.prototype,Gue=kue.hasOwnProperty;function Vue(t){var e=this.__data__;if(Nue){var n=e[t];return n===Lue?void 0:n}return Gue.call(e,t)?e[t]:void 0}var Hue=Vue,Bue=GE,$ue=Object.prototype,Wue=$ue.hasOwnProperty;function jue(t){var e=this.__data__;return Bue?e[t]!==void 0:Wue.call(e,t)}var Uue=jue,zue=GE,Kue="__lodash_hash_undefined__";function que(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=zue&&e===void 0?Kue:e,this}var Yue=que,Que=Oue,Xue=Fue,Jue=Hue,Zue=Uue,ece=Yue;function $h(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}$h.prototype.clear=Que;$h.prototype.delete=Xue;$h.prototype.get=Jue;$h.prototype.has=Zue;$h.prototype.set=ece;var tce=$h;function nce(){this.__data__=[],this.size=0}var rce=nce;function ice(t,e){return t===e||t!==t&&e!==e}var LD=ice,sce=LD;function oce(t,e){for(var n=t.length;n--;)if(sce(t[n][0],e))return n;return-1}var VE=oce,ace=VE,lce=Array.prototype,uce=lce.splice;function cce(t){var e=this.__data__,n=ace(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():uce.call(e,n,1),--this.size,!0}var dce=cce,hce=VE;function pce(t){var e=this.__data__,n=hce(e,t);return n<0?void 0:e[n][1]}var fce=pce,gce=VE;function mce(t){return gce(this.__data__,t)>-1}var vce=mce,yce=VE;function Cce(t,e){var n=this.__data__,r=yce(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var wce=Cce,Sce=rce,Ece=dce,bce=fce,Tce=vce,Rce=wce;function Wh(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Wh.prototype.clear=Sce;Wh.prototype.delete=Ece;Wh.prototype.get=bce;Wh.prototype.has=Tce;Wh.prototype.set=Rce;var HE=Wh,_ce=Zu,Ace=Js,xce=_ce(Ace,"Map"),kD=xce,Bk=tce,Pce=HE,Ice=kD;function Dce(){this.size=0,this.__data__={hash:new Bk,map:new(Ice||Pce),string:new Bk}}var Oce=Dce;function Mce(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var Fce=Mce,Nce=Fce;function Lce(t,e){var n=t.__data__;return Nce(e)?n[typeof e=="string"?"string":"hash"]:n.map}var BE=Lce,kce=BE;function Gce(t){var e=kce(this,t).delete(t);return this.size-=e?1:0,e}var Vce=Gce,Hce=BE;function Bce(t){return Hce(this,t).get(t)}var $ce=Bce,Wce=BE;function jce(t){return Wce(this,t).has(t)}var Uce=jce,zce=BE;function Kce(t,e){var n=zce(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var qce=Kce,Yce=Oce,Qce=Vce,Xce=$ce,Jce=Uce,Zce=qce;function jh(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}jh.prototype.clear=Yce;jh.prototype.delete=Qce;jh.prototype.get=Xce;jh.prototype.has=Jce;jh.prototype.set=Zce;var GD=jh,t3=GD,ede="Expected a function";function VD(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(ede);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=t.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(VD.Cache||t3),n}VD.Cache=t3;var n3=VD;const tde=gt(n3);var nde=n3,rde=500;function ide(t){var e=nde(t,function(r){return n.size===rde&&n.clear(),r}),n=e.cache;return e}var sde=ide,ode=sde,ade=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,lde=/\\(\\)?/g,ude=ode(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(ade,function(n,r,i,s){e.push(i?s.replace(lde,"$1"):r||n)}),e}),cde=ude;function dde(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var HD=dde,$k=zm,hde=HD,pde=Zr,fde=Hh,Wk=$k?$k.prototype:void 0,jk=Wk?Wk.toString:void 0;function r3(t){if(typeof t=="string")return t;if(pde(t))return hde(t,r3)+"";if(fde(t))return jk?jk.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var gde=r3,mde=gde;function vde(t){return t==null?"":mde(t)}var i3=vde,yde=Zr,Cde=FD,wde=cde,Sde=i3;function Ede(t,e){return yde(t)?t:Cde(t,e)?[t]:wde(Sde(t))}var s3=Ede,bde=Hh;function Tde(t){if(typeof t=="string"||bde(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var $E=Tde,Rde=s3,_de=$E;function Ade(t,e){e=Rde(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[_de(e[n++])];return n&&n==r?t:void 0}var BD=Ade,xde=BD;function Pde(t,e,n){var r=t==null?void 0:xde(t,e);return r===void 0?n:r}var o3=Pde;const yi=gt(o3);function Ide(t){return t==null}var Dde=Ide;const Le=gt(Dde);var Ode=Uo,Mde=Zr,Fde=zo,Nde="[object String]";function Lde(t){return typeof t=="string"||!Mde(t)&&Fde(t)&&Ode(t)==Nde}var kde=Lde;const Du=gt(kde);var a3={exports:{}},vt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $D=Symbol.for("react.element"),WD=Symbol.for("react.portal"),WE=Symbol.for("react.fragment"),jE=Symbol.for("react.strict_mode"),UE=Symbol.for("react.profiler"),zE=Symbol.for("react.provider"),KE=Symbol.for("react.context"),Gde=Symbol.for("react.server_context"),qE=Symbol.for("react.forward_ref"),YE=Symbol.for("react.suspense"),QE=Symbol.for("react.suspense_list"),XE=Symbol.for("react.memo"),JE=Symbol.for("react.lazy"),Vde=Symbol.for("react.offscreen"),l3;l3=Symbol.for("react.module.reference");function Yi(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case $D:switch(t=t.type,t){case WE:case UE:case jE:case YE:case QE:return t;default:switch(t=t&&t.$$typeof,t){case Gde:case KE:case qE:case JE:case XE:case zE:return t;default:return e}}case WD:return e}}}vt.ContextConsumer=KE;vt.ContextProvider=zE;vt.Element=$D;vt.ForwardRef=qE;vt.Fragment=WE;vt.Lazy=JE;vt.Memo=XE;vt.Portal=WD;vt.Profiler=UE;vt.StrictMode=jE;vt.Suspense=YE;vt.SuspenseList=QE;vt.isAsyncMode=function(){return!1};vt.isConcurrentMode=function(){return!1};vt.isContextConsumer=function(t){return Yi(t)===KE};vt.isContextProvider=function(t){return Yi(t)===zE};vt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===$D};vt.isForwardRef=function(t){return Yi(t)===qE};vt.isFragment=function(t){return Yi(t)===WE};vt.isLazy=function(t){return Yi(t)===JE};vt.isMemo=function(t){return Yi(t)===XE};vt.isPortal=function(t){return Yi(t)===WD};vt.isProfiler=function(t){return Yi(t)===UE};vt.isStrictMode=function(t){return Yi(t)===jE};vt.isSuspense=function(t){return Yi(t)===YE};vt.isSuspenseList=function(t){return Yi(t)===QE};vt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===WE||t===UE||t===jE||t===YE||t===QE||t===Vde||typeof t=="object"&&t!==null&&(t.$$typeof===JE||t.$$typeof===XE||t.$$typeof===zE||t.$$typeof===KE||t.$$typeof===qE||t.$$typeof===l3||t.getModuleId!==void 0)};vt.typeOf=Yi;a3.exports=vt;var Hde=a3.exports,Bde=Uo,$de=zo,Wde="[object Number]";function jde(t){return typeof t=="number"||$de(t)&&Bde(t)==Wde}var u3=jde;const Ude=gt(u3);var zde=u3;function Kde(t){return zde(t)&&t!=+t}var qde=Kde;const Km=gt(qde);var Cr=function(e){return e===0?0:e>0?1:-1},zl=function(e){return Du(e)&&e.indexOf("%")===e.length-1},le=function(e){return Ude(e)&&!Km(e)},Yde=function(e){return Le(e)},Tn=function(e){return le(e)||Du(e)},Qde=0,Uh=function(e){var n=++Qde;return"".concat(e||"").concat(n)},wr=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!le(e)&&!Du(e))return r;var s;if(zl(e)){var o=e.indexOf("%");s=n*parseFloat(e.slice(0,o))/100}else s=+e;return Km(s)&&(s=r),i&&s>n&&(s=n),s},ga=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},Xde=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},hi=function(e,n){return le(e)&&le(n)?function(r){return e+r*(n-e)}:function(){return n}};function pw(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):yi(r,e))===n})}var Jde=function(e,n){return le(e)&&le(n)?e-n:Du(e)&&Du(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function rd(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function $_(t){"@babel/helpers - typeof";return $_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$_(t)}var Zde=["viewBox","children"],ehe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Uk=["points","pathLength"],a0={svg:Zde,polygon:Uk,polyline:Uk},jD=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],fw=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(I.isValidElement(e)&&(r=e.props),!Bh(r))return null;var i={};return Object.keys(r).forEach(function(s){jD.includes(s)&&(i[s]=n||function(o){return r[s](r,o)})}),i},the=function(e,n,r){return function(i){return e(n,r,i),null}},Ou=function(e,n,r){if(!Bh(e)||$_(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(s){var o=e[s];jD.includes(s)&&typeof o=="function"&&(i||(i={}),i[s]=the(o,n,r))}),i},nhe=["children"],rhe=["children"];function zk(t,e){if(t==null)return{};var n=ihe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ihe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function W_(t){"@babel/helpers - typeof";return W_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W_(t)}var Kk={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},wo=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},qk=null,l0=null,UD=function t(e){if(e===qk&&Array.isArray(l0))return l0;var n=[];return I.Children.forEach(e,function(r){Le(r)||(Hde.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),l0=n,qk=e,n};function Ci(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return wo(i)}):r=[wo(e)],UD(t).forEach(function(i){var s=yi(i,"type.displayName")||yi(i,"type.name");r.indexOf(s)!==-1&&n.push(i)}),n}function di(t,e){var n=Ci(t,e);return n&&n[0]}var Yk=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!le(r)||r<=0||!le(i)||i<=0)},she=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],ohe=function(e){return e&&e.type&&Du(e.type)&&she.indexOf(e.type)>=0},ahe=function(e){return e&&W_(e)==="object"&&"clipDot"in e},lhe=function(e,n,r,i){var s,o=(s=a0==null?void 0:a0[i])!==null&&s!==void 0?s:[];return n.startsWith("data-")||!Oe(e)&&(i&&o.includes(n)||ehe.includes(n))||r&&jD.includes(n)},_e=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(I.isValidElement(e)&&(i=e.props),!Bh(i))return null;var s={};return Object.keys(i).forEach(function(o){var a;lhe((a=i)===null||a===void 0?void 0:a[o],o,n,r)&&(s[o]=i[o])}),s},j_=function t(e,n){if(e===n)return!0;var r=I.Children.count(e);if(r!==I.Children.count(n))return!1;if(r===0)return!0;if(r===1)return Qk(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var s=e[i],o=n[i];if(Array.isArray(s)||Array.isArray(o)){if(!t(s,o))return!1}else if(!Qk(s,o))return!1}return!0},Qk=function(e,n){if(Le(e)&&Le(n))return!0;if(!Le(e)&&!Le(n)){var r=e.props||{},i=r.children,s=zk(r,nhe),o=n.props||{},a=o.children,l=zk(o,rhe);return i&&a?rd(s,l)&&j_(i,a):!i&&!a?rd(s,l):!1}return!1},Xk=function(e,n){var r=[],i={};return UD(e).forEach(function(s,o){if(ohe(s))r.push(s);else if(s){var a=wo(s.type),l=n[a]||{},u=l.handler,c=l.once;if(u&&(!c||!i[a])){var d=u(s,a,o);r.push(d),i[a]=!0}}}),r},uhe=function(e){var n=e&&e.type;return n&&Kk[n]?Kk[n]:null},che=function(e,n){return UD(n).indexOf(e)},dhe=["children","width","height","viewBox","className","style","title","desc"];function U_(){return U_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},U_.apply(this,arguments)}function hhe(t,e){if(t==null)return{};var n=phe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function phe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function z_(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,s=t.className,o=t.style,a=t.title,l=t.desc,u=hhe(t,dhe),c=i||{width:n,height:r,x:0,y:0},d=$e("recharts-surface",s);return G.createElement("svg",U_({},_e(u,!0,"svg"),{className:d,width:n,height:r,style:o,viewBox:"".concat(c.x," ").concat(c.y," ").concat(c.width," ").concat(c.height)}),G.createElement("title",null,a),G.createElement("desc",null,l),e)}var fhe=["children","className"];function K_(){return K_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},K_.apply(this,arguments)}function ghe(t,e){if(t==null)return{};var n=mhe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function mhe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var at=G.forwardRef(function(t,e){var n=t.children,r=t.className,i=ghe(t,fhe),s=$e("recharts-layer",r);return G.createElement("g",K_({className:s},_e(i,!0),{ref:e}),n)}),fs=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]};function vhe(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=t[r+e];return s}var yhe=vhe,Che=yhe;function whe(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:Che(t,e,n)}var She=whe,Ehe="\\ud800-\\udfff",bhe="\\u0300-\\u036f",The="\\ufe20-\\ufe2f",Rhe="\\u20d0-\\u20ff",_he=bhe+The+Rhe,Ahe="\\ufe0e\\ufe0f",xhe="\\u200d",Phe=RegExp("["+xhe+Ehe+_he+Ahe+"]");function Ihe(t){return Phe.test(t)}var c3=Ihe;function Dhe(t){return t.split("")}var Ohe=Dhe,d3="\\ud800-\\udfff",Mhe="\\u0300-\\u036f",Fhe="\\ufe20-\\ufe2f",Nhe="\\u20d0-\\u20ff",Lhe=Mhe+Fhe+Nhe,khe="\\ufe0e\\ufe0f",Ghe="["+d3+"]",q_="["+Lhe+"]",Y_="\\ud83c[\\udffb-\\udfff]",Vhe="(?:"+q_+"|"+Y_+")",h3="[^"+d3+"]",p3="(?:\\ud83c[\\udde6-\\uddff]){2}",f3="[\\ud800-\\udbff][\\udc00-\\udfff]",Hhe="\\u200d",g3=Vhe+"?",m3="["+khe+"]?",Bhe="(?:"+Hhe+"(?:"+[h3,p3,f3].join("|")+")"+m3+g3+")*",$he=m3+g3+Bhe,Whe="(?:"+[h3+q_+"?",q_,p3,f3,Ghe].join("|")+")",jhe=RegExp(Y_+"(?="+Y_+")|"+Whe+$he,"g");function Uhe(t){return t.match(jhe)||[]}var zhe=Uhe,Khe=Ohe,qhe=c3,Yhe=zhe;function Qhe(t){return qhe(t)?Yhe(t):Khe(t)}var Xhe=Qhe,Jhe=She,Zhe=c3,epe=Xhe,tpe=i3;function npe(t){return function(e){e=tpe(e);var n=Zhe(e)?epe(e):void 0,r=n?n[0]:e.charAt(0),i=n?Jhe(n,1).join(""):e.slice(1);return r[t]()+i}}var rpe=npe,ipe=rpe,spe=ipe("toUpperCase"),ope=spe;const ZE=gt(ope);function At(t){return function(){return t}}const v3=Math.cos,gw=Math.sin,Ss=Math.sqrt,mw=Math.PI,eb=2*mw,Q_=Math.PI,X_=2*Q_,Il=1e-6,ape=X_-Il;function y3(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function lpe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return y3;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class upe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?y3:lpe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=r-e,u=i-n,c=o-e,d=a-n,h=c*c+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>Il)if(!(Math.abs(d*l-u*c)>Il)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let f=r-o,g=i-a,m=l*l+u*u,v=f*f+g*g,C=Math.sqrt(m),y=Math.sqrt(h),S=s*Math.tan((Q_-Math.acos((m+h-v)/(2*C*y)))/2),_=S/y,E=S/C;Math.abs(_-1)>Il&&this._append`L${e+_*c},${n+_*d}`,this._append`A${s},${s},0,0,${+(d*f>c*g)},${this._x1=e+E*l},${this._y1=n+E*u}`}}arc(e,n,r,i,s,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),u=e+a,c=n+l,d=1^o,h=o?i-s:s-i;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>Il||Math.abs(this._y1-c)>Il)&&this._append`L${u},${c}`,r&&(h<0&&(h=h%X_+X_),h>ape?this._append`A${r},${r},0,1,${d},${e-a},${n-l}A${r},${r},0,1,${d},${this._x1=u},${this._y1=c}`:h>Il&&this._append`A${r},${r},0,${+(h>=Q_)},${d},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function zD(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new upe(e)}function KD(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function C3(t){this._context=t}C3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function tb(t){return new C3(t)}function w3(t){return t[0]}function S3(t){return t[1]}function E3(t,e){var n=At(!0),r=null,i=tb,s=null,o=zD(a);t=typeof t=="function"?t:t===void 0?w3:At(t),e=typeof e=="function"?e:e===void 0?S3:At(e);function a(l){var u,c=(l=KD(l)).length,d,h=!1,f;for(r==null&&(s=i(f=o())),u=0;u<=c;++u)!(u<c&&n(d=l[u],u,l))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+t(d,u,l),+e(d,u,l));if(f)return s=null,f+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:At(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:At(+l),a):e},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:At(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),a):r},a}function Yv(t,e,n){var r=null,i=At(!0),s=null,o=tb,a=null,l=zD(u);t=typeof t=="function"?t:t===void 0?w3:At(+t),e=typeof e=="function"?e:At(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?S3:At(+n);function u(d){var h,f,g,m=(d=KD(d)).length,v,C=!1,y,S=new Array(m),_=new Array(m);for(s==null&&(a=o(y=l())),h=0;h<=m;++h){if(!(h<m&&i(v=d[h],h,d))===C)if(C=!C)f=h,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),g=h-1;g>=f;--g)a.point(S[g],_[g]);a.lineEnd(),a.areaEnd()}C&&(S[h]=+t(v,h,d),_[h]=+e(v,h,d),a.point(r?+r(v,h,d):S[h],n?+n(v,h,d):_[h]))}if(y)return a=null,y+""||null}function c(){return E3().defined(i).curve(o).context(s)}return u.x=function(d){return arguments.length?(t=typeof d=="function"?d:At(+d),r=null,u):t},u.x0=function(d){return arguments.length?(t=typeof d=="function"?d:At(+d),u):t},u.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:At(+d),u):r},u.y=function(d){return arguments.length?(e=typeof d=="function"?d:At(+d),n=null,u):e},u.y0=function(d){return arguments.length?(e=typeof d=="function"?d:At(+d),u):e},u.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:At(+d),u):n},u.lineX0=u.lineY0=function(){return c().x(t).y(e)},u.lineY1=function(){return c().x(t).y(n)},u.lineX1=function(){return c().x(r).y(e)},u.defined=function(d){return arguments.length?(i=typeof d=="function"?d:At(!!d),u):i},u.curve=function(d){return arguments.length?(o=d,s!=null&&(a=o(s)),u):o},u.context=function(d){return arguments.length?(d==null?s=a=null:a=o(s=d),u):s},u}class b3{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function cpe(t){return new b3(t,!0)}function dpe(t){return new b3(t,!1)}const qD={draw(t,e){const n=Ss(e/mw);t.moveTo(n,0),t.arc(0,0,n,0,eb)}},hpe={draw(t,e){const n=Ss(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},T3=Ss(1/3),ppe=T3*2,fpe={draw(t,e){const n=Ss(e/ppe),r=n*T3;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},gpe={draw(t,e){const n=Ss(e),r=-n/2;t.rect(r,r,n,n)}},mpe=.8908130915292852,R3=gw(mw/10)/gw(7*mw/10),vpe=gw(eb/10)*R3,ype=-v3(eb/10)*R3,Cpe={draw(t,e){const n=Ss(e*mpe),r=vpe*n,i=ype*n;t.moveTo(0,-n),t.lineTo(r,i);for(let s=1;s<5;++s){const o=eb*s/5,a=v3(o),l=gw(o);t.lineTo(l*n,-a*n),t.lineTo(a*r-l*i,l*r+a*i)}t.closePath()}},u0=Ss(3),wpe={draw(t,e){const n=-Ss(e/(u0*3));t.moveTo(0,n*2),t.lineTo(-u0*n,-n),t.lineTo(u0*n,-n),t.closePath()}},_i=-.5,Ai=Ss(3)/2,J_=1/Ss(12),Spe=(J_/2+1)*3,Epe={draw(t,e){const n=Ss(e/Spe),r=n/2,i=n*J_,s=r,o=n*J_+n,a=-s,l=o;t.moveTo(r,i),t.lineTo(s,o),t.lineTo(a,l),t.lineTo(_i*r-Ai*i,Ai*r+_i*i),t.lineTo(_i*s-Ai*o,Ai*s+_i*o),t.lineTo(_i*a-Ai*l,Ai*a+_i*l),t.lineTo(_i*r+Ai*i,_i*i-Ai*r),t.lineTo(_i*s+Ai*o,_i*o-Ai*s),t.lineTo(_i*a+Ai*l,_i*l-Ai*a),t.closePath()}};function bpe(t,e){let n=null,r=zD(i);t=typeof t=="function"?t:At(t||qD),e=typeof e=="function"?e:At(e===void 0?64:+e);function i(){let s;if(n||(n=s=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:At(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:At(+s),i):e},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function vw(){}function yw(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function _3(t){this._context=t}_3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:yw(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:yw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Tpe(t){return new _3(t)}function A3(t){this._context=t}A3.prototype={areaStart:vw,areaEnd:vw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:yw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Rpe(t){return new A3(t)}function x3(t){this._context=t}x3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:yw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function _pe(t){return new x3(t)}function P3(t){this._context=t}P3.prototype={areaStart:vw,areaEnd:vw,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Ape(t){return new P3(t)}function Jk(t){return t<0?-1:1}function Zk(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Jk(s)+Jk(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function e1(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function c0(t,e,n){var r=t._x0,i=t._y0,s=t._x1,o=t._y1,a=(s-r)/3;t._context.bezierCurveTo(r+a,i+a*e,s-a,o-a*n,s,o)}function Cw(t){this._context=t}Cw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:c0(this,this._t0,e1(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,c0(this,e1(this,n=Zk(this,t,e)),n);break;default:c0(this,this._t0,n=Zk(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function I3(t){this._context=new D3(t)}(I3.prototype=Object.create(Cw.prototype)).point=function(t,e){Cw.prototype.point.call(this,e,t)};function D3(t){this._context=t}D3.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function xpe(t){return new Cw(t)}function Ppe(t){return new I3(t)}function O3(t){this._context=t}O3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=t1(t),i=t1(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function t1(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function Ipe(t){return new O3(t)}function nb(t,e){this._context=t,this._t=e}nb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Dpe(t){return new nb(t,.5)}function Ope(t){return new nb(t,0)}function Mpe(t){return new nb(t,1)}function Gd(t,e){if((o=t.length)>1)for(var n=1,r,i,s=t[e[0]],o,a=s.length;n<o;++n)for(i=s,s=t[e[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Z_(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Fpe(t,e){return t[e]}function Npe(t){const e=[];return e.key=t,e}function Lpe(){var t=At([]),e=Z_,n=Gd,r=Fpe;function i(s){var o=Array.from(t.apply(this,arguments),Npe),a,l=o.length,u=-1,c;for(const d of s)for(a=0,++u;a<l;++a)(o[a][u]=[0,+r(d,o[a].key,u,s)]).data=d;for(a=0,c=KD(e(o));a<l;++a)o[c[a]].index=a;return n(o,c),o}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:At(Array.from(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:At(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?Z_:typeof s=="function"?s:At(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??Gd,i):n},i}function kpe(t,e){if((r=t.length)>0){for(var n,r,i=0,s=t[0].length,o;i<s;++i){for(o=n=0;n<r;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<r;++n)t[n][i][1]/=o}Gd(t,e)}}function Gpe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,s=r.length;n<s;++n){for(var o=0,a=0;o<i;++o)a+=t[o][n][1]||0;r[n][1]+=r[n][0]=-a/2}Gd(t,e)}}function Vpe(t,e){if(!(!((o=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,s,o;r<s;++r){for(var a=0,l=0,u=0;a<o;++a){for(var c=t[e[a]],d=c[r][1]||0,h=c[r-1][1]||0,f=(d-h)/2,g=0;g<a;++g){var m=t[e[g]],v=m[r][1]||0,C=m[r-1][1]||0;f+=v-C}l+=d,u+=f*d}i[r-1][1]+=i[r-1][0]=n,l&&(n-=u/l)}i[r-1][1]+=i[r-1][0]=n,Gd(t,e)}}function Pg(t){"@babel/helpers - typeof";return Pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pg(t)}var Hpe=["type","size","sizeType"];function eA(){return eA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eA.apply(this,arguments)}function n1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function r1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?n1(Object(n),!0).forEach(function(r){Bpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):n1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bpe(t,e,n){return e=$pe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $pe(t){var e=Wpe(t,"string");return Pg(e)=="symbol"?e:e+""}function Wpe(t,e){if(Pg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Pg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jpe(t,e){if(t==null)return{};var n=Upe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Upe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var M3={symbolCircle:qD,symbolCross:hpe,symbolDiamond:fpe,symbolSquare:gpe,symbolStar:Cpe,symbolTriangle:wpe,symbolWye:Epe},zpe=Math.PI/180,Kpe=function(e){var n="symbol".concat(ZE(e));return M3[n]||qD},qpe=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*zpe;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Ype=function(e,n){M3["symbol".concat(ZE(e))]=n},YD=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,s=i===void 0?64:i,o=e.sizeType,a=o===void 0?"area":o,l=jpe(e,Hpe),u=r1(r1({},l),{},{type:r,size:s,sizeType:a}),c=function(){var v=Kpe(r),C=bpe().type(v).size(qpe(s,a,r));return C()},d=u.className,h=u.cx,f=u.cy,g=_e(u,!0);return h===+h&&f===+f&&s===+s?G.createElement("path",eA({},g,{className:$e("recharts-symbols",d),transform:"translate(".concat(h,", ").concat(f,")"),d:c()})):null};YD.registerSymbol=Ype;function Vd(t){"@babel/helpers - typeof";return Vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vd(t)}function tA(){return tA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tA.apply(this,arguments)}function i1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Qpe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?i1(Object(n),!0).forEach(function(r){Ig(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jpe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,N3(r.key),r)}}function Zpe(t,e,n){return e&&Jpe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function efe(t,e,n){return e=ww(e),tfe(t,F3()?Reflect.construct(e,n||[],ww(t).constructor):e.apply(t,n))}function tfe(t,e){if(e&&(Vd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nfe(t)}function nfe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function F3(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(F3=function(){return!!t})()}function ww(t){return ww=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ww(t)}function rfe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nA(t,e)}function nA(t,e){return nA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},nA(t,e)}function Ig(t,e,n){return e=N3(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function N3(t){var e=ife(t,"string");return Vd(e)=="symbol"?e:e+""}function ife(t,e){if(Vd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Vd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var xi=32,QD=function(t){function e(){return Xpe(this,e),efe(this,e,arguments)}return rfe(e,t),Zpe(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,s=xi/2,o=xi/6,a=xi/3,l=r.inactive?i:r.color;if(r.type==="plainline")return G.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:s,x2:xi,y2:s,className:"recharts-legend-icon"});if(r.type==="line")return G.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(s,"h").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*a,",").concat(s,`
            H`).concat(xi,"M").concat(2*a,",").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(a,",").concat(s),className:"recharts-legend-icon"});if(r.type==="rect")return G.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(xi/8,"h").concat(xi,"v").concat(xi*3/4,"h").concat(-xi,"z"),className:"recharts-legend-icon"});if(G.isValidElement(r.legendIcon)){var u=Qpe({},r);return delete u.legendIcon,G.cloneElement(r.legendIcon,u)}return G.createElement(YD,{fill:l,cx:s,cy:s,size:xi,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,s=i.payload,o=i.iconSize,a=i.layout,l=i.formatter,u=i.inactiveColor,c={x:0,y:0,width:xi,height:xi},d={display:a==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(f,g){var m=f.formatter||l,v=$e(Ig(Ig({"recharts-legend-item":!0},"legend-item-".concat(g),!0),"inactive",f.inactive));if(f.type==="none")return null;var C=Oe(f.value)?null:f.value;fs(!Oe(f.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var y=f.inactive?u:f.color;return G.createElement("li",tA({className:v,style:d,key:"legend-item-".concat(g)},Ou(r.props,f,g)),G.createElement(z_,{width:o,height:o,viewBox:c,style:h},r.renderIcon(f)),G.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},m?m(C,f,g):C))})}},{key:"render",value:function(){var r=this.props,i=r.payload,s=r.layout,o=r.align;if(!i||!i.length)return null;var a={padding:0,margin:0,textAlign:s==="horizontal"?o:"left"};return G.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}])}(I.PureComponent);Ig(QD,"displayName","Legend");Ig(QD,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var sfe=HE;function ofe(){this.__data__=new sfe,this.size=0}var afe=ofe;function lfe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var ufe=lfe;function cfe(t){return this.__data__.get(t)}var dfe=cfe;function hfe(t){return this.__data__.has(t)}var pfe=hfe,ffe=HE,gfe=kD,mfe=GD,vfe=200;function yfe(t,e){var n=this.__data__;if(n instanceof ffe){var r=n.__data__;if(!gfe||r.length<vfe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new mfe(r)}return n.set(t,e),this.size=n.size,this}var Cfe=yfe,wfe=HE,Sfe=afe,Efe=ufe,bfe=dfe,Tfe=pfe,Rfe=Cfe;function zh(t){var e=this.__data__=new wfe(t);this.size=e.size}zh.prototype.clear=Sfe;zh.prototype.delete=Efe;zh.prototype.get=bfe;zh.prototype.has=Tfe;zh.prototype.set=Rfe;var L3=zh,_fe="__lodash_hash_undefined__";function Afe(t){return this.__data__.set(t,_fe),this}var xfe=Afe;function Pfe(t){return this.__data__.has(t)}var Ife=Pfe,Dfe=GD,Ofe=xfe,Mfe=Ife;function Sw(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Dfe;++e<n;)this.add(t[e])}Sw.prototype.add=Sw.prototype.push=Ofe;Sw.prototype.has=Mfe;var k3=Sw;function Ffe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var G3=Ffe;function Nfe(t,e){return t.has(e)}var V3=Nfe,Lfe=k3,kfe=G3,Gfe=V3,Vfe=1,Hfe=2;function Bfe(t,e,n,r,i,s){var o=n&Vfe,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var u=s.get(t),c=s.get(e);if(u&&c)return u==e&&c==t;var d=-1,h=!0,f=n&Hfe?new Lfe:void 0;for(s.set(t,e),s.set(e,t);++d<a;){var g=t[d],m=e[d];if(r)var v=o?r(m,g,d,e,t,s):r(g,m,d,t,e,s);if(v!==void 0){if(v)continue;h=!1;break}if(f){if(!kfe(e,function(C,y){if(!Gfe(f,y)&&(g===C||i(g,C,n,r,s)))return f.push(y)})){h=!1;break}}else if(!(g===m||i(g,m,n,r,s))){h=!1;break}}return s.delete(t),s.delete(e),h}var H3=Bfe,$fe=Js,Wfe=$fe.Uint8Array,jfe=Wfe;function Ufe(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var zfe=Ufe;function Kfe(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var XD=Kfe,s1=zm,o1=jfe,qfe=LD,Yfe=H3,Qfe=zfe,Xfe=XD,Jfe=1,Zfe=2,ege="[object Boolean]",tge="[object Date]",nge="[object Error]",rge="[object Map]",ige="[object Number]",sge="[object RegExp]",oge="[object Set]",age="[object String]",lge="[object Symbol]",uge="[object ArrayBuffer]",cge="[object DataView]",a1=s1?s1.prototype:void 0,d0=a1?a1.valueOf:void 0;function dge(t,e,n,r,i,s,o){switch(n){case cge:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case uge:return!(t.byteLength!=e.byteLength||!s(new o1(t),new o1(e)));case ege:case tge:case ige:return qfe(+t,+e);case nge:return t.name==e.name&&t.message==e.message;case sge:case age:return t==e+"";case rge:var a=Qfe;case oge:var l=r&Jfe;if(a||(a=Xfe),t.size!=e.size&&!l)return!1;var u=o.get(t);if(u)return u==e;r|=Zfe,o.set(t,e);var c=Yfe(a(t),a(e),r,i,s,o);return o.delete(t),c;case lge:if(d0)return d0.call(t)==d0.call(e)}return!1}var hge=dge;function pge(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var B3=pge,fge=B3,gge=Zr;function mge(t,e,n){var r=e(t);return gge(t)?r:fge(r,n(t))}var vge=mge;function yge(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var o=t[n];e(o,n,t)&&(s[i++]=o)}return s}var Cge=yge;function wge(){return[]}var Sge=wge,Ege=Cge,bge=Sge,Tge=Object.prototype,Rge=Tge.propertyIsEnumerable,l1=Object.getOwnPropertySymbols,_ge=l1?function(t){return t==null?[]:(t=Object(t),Ege(l1(t),function(e){return Rge.call(t,e)}))}:bge,Age=_ge;function xge(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var Pge=xge,Ige=Uo,Dge=zo,Oge="[object Arguments]";function Mge(t){return Dge(t)&&Ige(t)==Oge}var Fge=Mge,u1=Fge,Nge=zo,$3=Object.prototype,Lge=$3.hasOwnProperty,kge=$3.propertyIsEnumerable,Gge=u1(function(){return arguments}())?u1:function(t){return Nge(t)&&Lge.call(t,"callee")&&!kge.call(t,"callee")},JD=Gge,Ew={exports:{}};function Vge(){return!1}var Hge=Vge;Ew.exports;(function(t,e){var n=Js,r=Hge,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===i,a=o?n.Buffer:void 0,l=a?a.isBuffer:void 0,u=l||r;t.exports=u})(Ew,Ew.exports);var W3=Ew.exports,Bge=9007199254740991,$ge=/^(?:0|[1-9]\d*)$/;function Wge(t,e){var n=typeof t;return e=e??Bge,!!e&&(n=="number"||n!="symbol"&&$ge.test(t))&&t>-1&&t%1==0&&t<e}var ZD=Wge,jge=9007199254740991;function Uge(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=jge}var eO=Uge,zge=Uo,Kge=eO,qge=zo,Yge="[object Arguments]",Qge="[object Array]",Xge="[object Boolean]",Jge="[object Date]",Zge="[object Error]",eme="[object Function]",tme="[object Map]",nme="[object Number]",rme="[object Object]",ime="[object RegExp]",sme="[object Set]",ome="[object String]",ame="[object WeakMap]",lme="[object ArrayBuffer]",ume="[object DataView]",cme="[object Float32Array]",dme="[object Float64Array]",hme="[object Int8Array]",pme="[object Int16Array]",fme="[object Int32Array]",gme="[object Uint8Array]",mme="[object Uint8ClampedArray]",vme="[object Uint16Array]",yme="[object Uint32Array]",Lt={};Lt[cme]=Lt[dme]=Lt[hme]=Lt[pme]=Lt[fme]=Lt[gme]=Lt[mme]=Lt[vme]=Lt[yme]=!0;Lt[Yge]=Lt[Qge]=Lt[lme]=Lt[Xge]=Lt[ume]=Lt[Jge]=Lt[Zge]=Lt[eme]=Lt[tme]=Lt[nme]=Lt[rme]=Lt[ime]=Lt[sme]=Lt[ome]=Lt[ame]=!1;function Cme(t){return qge(t)&&Kge(t.length)&&!!Lt[zge(t)]}var wme=Cme;function Sme(t){return function(e){return t(e)}}var j3=Sme,bw={exports:{}};bw.exports;(function(t,e){var n=J4,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,o=s&&n.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();t.exports=a})(bw,bw.exports);var Eme=bw.exports,bme=wme,Tme=j3,c1=Eme,d1=c1&&c1.isTypedArray,Rme=d1?Tme(d1):bme,U3=Rme,_me=Pge,Ame=JD,xme=Zr,Pme=W3,Ime=ZD,Dme=U3,Ome=Object.prototype,Mme=Ome.hasOwnProperty;function Fme(t,e){var n=xme(t),r=!n&&Ame(t),i=!n&&!r&&Pme(t),s=!n&&!r&&!i&&Dme(t),o=n||r||i||s,a=o?_me(t.length,String):[],l=a.length;for(var u in t)(e||Mme.call(t,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Ime(u,l)))&&a.push(u);return a}var Nme=Fme,Lme=Object.prototype;function kme(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||Lme;return t===n}var Gme=kme;function Vme(t,e){return function(n){return t(e(n))}}var z3=Vme,Hme=z3,Bme=Hme(Object.keys,Object),$me=Bme,Wme=Gme,jme=$me,Ume=Object.prototype,zme=Ume.hasOwnProperty;function Kme(t){if(!Wme(t))return jme(t);var e=[];for(var n in Object(t))zme.call(t,n)&&n!="constructor"&&e.push(n);return e}var qme=Kme,Yme=ND,Qme=eO;function Xme(t){return t!=null&&Qme(t.length)&&!Yme(t)}var qm=Xme,Jme=Nme,Zme=qme,eve=qm;function tve(t){return eve(t)?Jme(t):Zme(t)}var rb=tve,nve=vge,rve=Age,ive=rb;function sve(t){return nve(t,ive,rve)}var ove=sve,h1=ove,ave=1,lve=Object.prototype,uve=lve.hasOwnProperty;function cve(t,e,n,r,i,s){var o=n&ave,a=h1(t),l=a.length,u=h1(e),c=u.length;if(l!=c&&!o)return!1;for(var d=l;d--;){var h=a[d];if(!(o?h in e:uve.call(e,h)))return!1}var f=s.get(t),g=s.get(e);if(f&&g)return f==e&&g==t;var m=!0;s.set(t,e),s.set(e,t);for(var v=o;++d<l;){h=a[d];var C=t[h],y=e[h];if(r)var S=o?r(y,C,h,e,t,s):r(C,y,h,t,e,s);if(!(S===void 0?C===y||i(C,y,n,r,s):S)){m=!1;break}v||(v=h=="constructor")}if(m&&!v){var _=t.constructor,E=e.constructor;_!=E&&"constructor"in t&&"constructor"in e&&!(typeof _=="function"&&_ instanceof _&&typeof E=="function"&&E instanceof E)&&(m=!1)}return s.delete(t),s.delete(e),m}var dve=cve,hve=Zu,pve=Js,fve=hve(pve,"DataView"),gve=fve,mve=Zu,vve=Js,yve=mve(vve,"Promise"),Cve=yve,wve=Zu,Sve=Js,Eve=wve(Sve,"Set"),K3=Eve,bve=Zu,Tve=Js,Rve=bve(Tve,"WeakMap"),_ve=Rve,rA=gve,iA=kD,sA=Cve,oA=K3,aA=_ve,q3=Uo,Kh=e3,p1="[object Map]",Ave="[object Object]",f1="[object Promise]",g1="[object Set]",m1="[object WeakMap]",v1="[object DataView]",xve=Kh(rA),Pve=Kh(iA),Ive=Kh(sA),Dve=Kh(oA),Ove=Kh(aA),Dl=q3;(rA&&Dl(new rA(new ArrayBuffer(1)))!=v1||iA&&Dl(new iA)!=p1||sA&&Dl(sA.resolve())!=f1||oA&&Dl(new oA)!=g1||aA&&Dl(new aA)!=m1)&&(Dl=function(t){var e=q3(t),n=e==Ave?t.constructor:void 0,r=n?Kh(n):"";if(r)switch(r){case xve:return v1;case Pve:return p1;case Ive:return f1;case Dve:return g1;case Ove:return m1}return e});var Mve=Dl,h0=L3,Fve=H3,Nve=hge,Lve=dve,y1=Mve,C1=Zr,w1=W3,kve=U3,Gve=1,S1="[object Arguments]",E1="[object Array]",Qv="[object Object]",Vve=Object.prototype,b1=Vve.hasOwnProperty;function Hve(t,e,n,r,i,s){var o=C1(t),a=C1(e),l=o?E1:y1(t),u=a?E1:y1(e);l=l==S1?Qv:l,u=u==S1?Qv:u;var c=l==Qv,d=u==Qv,h=l==u;if(h&&w1(t)){if(!w1(e))return!1;o=!0,c=!1}if(h&&!c)return s||(s=new h0),o||kve(t)?Fve(t,e,n,r,i,s):Nve(t,e,l,n,r,i,s);if(!(n&Gve)){var f=c&&b1.call(t,"__wrapped__"),g=d&&b1.call(e,"__wrapped__");if(f||g){var m=f?t.value():t,v=g?e.value():e;return s||(s=new h0),i(m,v,n,r,s)}}return h?(s||(s=new h0),Lve(t,e,n,r,i,s)):!1}var Bve=Hve,$ve=Bve,T1=zo;function Y3(t,e,n,r,i){return t===e?!0:t==null||e==null||!T1(t)&&!T1(e)?t!==t&&e!==e:$ve(t,e,n,r,Y3,i)}var tO=Y3,Wve=L3,jve=tO,Uve=1,zve=2;function Kve(t,e,n,r){var i=n.length,s=i,o=!r;if(t==null)return!s;for(t=Object(t);i--;){var a=n[i];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<s;){a=n[i];var l=a[0],u=t[l],c=a[1];if(o&&a[2]){if(u===void 0&&!(l in t))return!1}else{var d=new Wve;if(r)var h=r(u,c,l,t,e,d);if(!(h===void 0?jve(c,u,Uve|zve,r,d):h))return!1}}return!0}var qve=Kve,Yve=hl;function Qve(t){return t===t&&!Yve(t)}var Q3=Qve,Xve=Q3,Jve=rb;function Zve(t){for(var e=Jve(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Xve(i)]}return e}var eye=Zve;function tye(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var X3=tye,nye=qve,rye=eye,iye=X3;function sye(t){var e=rye(t);return e.length==1&&e[0][2]?iye(e[0][0],e[0][1]):function(n){return n===t||nye(n,t,e)}}var oye=sye;function aye(t,e){return t!=null&&e in Object(t)}var lye=aye,uye=s3,cye=JD,dye=Zr,hye=ZD,pye=eO,fye=$E;function gye(t,e,n){e=uye(e,t);for(var r=-1,i=e.length,s=!1;++r<i;){var o=fye(e[r]);if(!(s=t!=null&&n(t,o)))break;t=t[o]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&pye(i)&&hye(o,i)&&(dye(t)||cye(t)))}var mye=gye,vye=lye,yye=mye;function Cye(t,e){return t!=null&&yye(t,e,vye)}var wye=Cye,Sye=tO,Eye=o3,bye=wye,Tye=FD,Rye=Q3,_ye=X3,Aye=$E,xye=1,Pye=2;function Iye(t,e){return Tye(t)&&Rye(e)?_ye(Aye(t),e):function(n){var r=Eye(n,t);return r===void 0&&r===e?bye(n,t):Sye(e,r,xye|Pye)}}var Dye=Iye;function Oye(t){return t}var qh=Oye;function Mye(t){return function(e){return e==null?void 0:e[t]}}var Fye=Mye,Nye=BD;function Lye(t){return function(e){return Nye(e,t)}}var kye=Lye,Gye=Fye,Vye=kye,Hye=FD,Bye=$E;function $ye(t){return Hye(t)?Gye(Bye(t)):Vye(t)}var Wye=$ye,jye=oye,Uye=Dye,zye=qh,Kye=Zr,qye=Wye;function Yye(t){return typeof t=="function"?t:t==null?zye:typeof t=="object"?Kye(t)?Uye(t[0],t[1]):jye(t):qye(t)}var Zs=Yye;function Qye(t,e,n,r){for(var i=t.length,s=n+(r?1:-1);r?s--:++s<i;)if(e(t[s],s,t))return s;return-1}var J3=Qye;function Xye(t){return t!==t}var Jye=Xye;function Zye(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var eCe=Zye,tCe=J3,nCe=Jye,rCe=eCe;function iCe(t,e,n){return e===e?rCe(t,e,n):tCe(t,nCe,n)}var sCe=iCe,oCe=sCe;function aCe(t,e){var n=t==null?0:t.length;return!!n&&oCe(t,e,0)>-1}var lCe=aCe;function uCe(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var cCe=uCe;function dCe(){}var hCe=dCe,p0=K3,pCe=hCe,fCe=XD,gCe=1/0,mCe=p0&&1/fCe(new p0([,-0]))[1]==gCe?function(t){return new p0(t)}:pCe,vCe=mCe,yCe=k3,CCe=lCe,wCe=cCe,SCe=V3,ECe=vCe,bCe=XD,TCe=200;function RCe(t,e,n){var r=-1,i=CCe,s=t.length,o=!0,a=[],l=a;if(n)o=!1,i=wCe;else if(s>=TCe){var u=e?null:ECe(t);if(u)return bCe(u);o=!1,i=SCe,l=new yCe}else l=e?[]:a;e:for(;++r<s;){var c=t[r],d=e?e(c):c;if(c=n||c!==0?c:0,o&&d===d){for(var h=l.length;h--;)if(l[h]===d)continue e;e&&l.push(d),a.push(c)}else i(l,d,n)||(l!==a&&l.push(d),a.push(c))}return a}var _Ce=RCe,ACe=Zs,xCe=_Ce;function PCe(t,e){return t&&t.length?xCe(t,ACe(e)):[]}var ICe=PCe;const R1=gt(ICe);function Z3(t,e,n){return e===!0?R1(t,n):Oe(e)?R1(t,e):t}function Hd(t){"@babel/helpers - typeof";return Hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hd(t)}var DCe=["ref"];function _1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ro(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_1(Object(n),!0).forEach(function(r){ib(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function OCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function A1(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,tK(r.key),r)}}function MCe(t,e,n){return e&&A1(t.prototype,e),n&&A1(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function FCe(t,e,n){return e=Tw(e),NCe(t,eK()?Reflect.construct(e,n||[],Tw(t).constructor):e.apply(t,n))}function NCe(t,e){if(e&&(Hd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LCe(t)}function LCe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eK=function(){return!!t})()}function Tw(t){return Tw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Tw(t)}function kCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lA(t,e)}function lA(t,e){return lA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},lA(t,e)}function ib(t,e,n){return e=tK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tK(t){var e=GCe(t,"string");return Hd(e)=="symbol"?e:e+""}function GCe(t,e){if(Hd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Hd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function VCe(t,e){if(t==null)return{};var n=HCe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function HCe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function BCe(t){return t.value}function $Ce(t,e){if(G.isValidElement(t))return G.cloneElement(t,e);if(typeof t=="function")return G.createElement(t,e);e.ref;var n=VCe(e,DCe);return G.createElement(QD,n)}var x1=1,au=function(t){function e(){var n;OCe(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=FCe(this,e,[].concat(i)),ib(n,"lastBoundingBox",{width:-1,height:-1}),n}return kCe(e,t),MCe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>x1||Math.abs(i.height-this.lastBoundingBox.height)>x1)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?ro({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,s=i.layout,o=i.align,a=i.verticalAlign,l=i.margin,u=i.chartWidth,c=i.chartHeight,d,h;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&s==="vertical"){var f=this.getBBoxSnapshot();d={left:((u||0)-f.width)/2}}else d=o==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(a==="middle"){var g=this.getBBoxSnapshot();h={top:((c||0)-g.height)/2}}else h=a==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return ro(ro({},d),h)}},{key:"render",value:function(){var r=this,i=this.props,s=i.content,o=i.width,a=i.height,l=i.wrapperStyle,u=i.payloadUniqBy,c=i.payload,d=ro(ro({position:"absolute",width:o||"auto",height:a||"auto"},this.getDefaultPosition(l)),l);return G.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(f){r.wrapperNode=f}},$Ce(s,ro(ro({},this.props),{},{payload:Z3(c,u,BCe)})))}}],[{key:"getWithHeight",value:function(r,i){var s=ro(ro({},this.defaultProps),r.props),o=s.layout;return o==="vertical"&&le(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||i}:null}}])}(I.PureComponent);ib(au,"displayName","Legend");ib(au,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var P1=zm,WCe=JD,jCe=Zr,I1=P1?P1.isConcatSpreadable:void 0;function UCe(t){return jCe(t)||WCe(t)||!!(I1&&t&&t[I1])}var zCe=UCe,KCe=B3,qCe=zCe;function nK(t,e,n,r,i){var s=-1,o=t.length;for(n||(n=qCe),i||(i=[]);++s<o;){var a=t[s];e>0&&n(a)?e>1?nK(a,e-1,n,r,i):KCe(i,a):r||(i[i.length]=a)}return i}var rK=nK;function YCe(t){return function(e,n,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var l=o[t?a:++i];if(n(s[l],l,s)===!1)break}return e}}var QCe=YCe,XCe=QCe,JCe=XCe(),ZCe=JCe,ewe=ZCe,twe=rb;function nwe(t,e){return t&&ewe(t,e,twe)}var iK=nwe,rwe=qm;function iwe(t,e){return function(n,r){if(n==null)return n;if(!rwe(n))return t(n,r);for(var i=n.length,s=e?i:-1,o=Object(n);(e?s--:++s<i)&&r(o[s],s,o)!==!1;);return n}}var swe=iwe,owe=iK,awe=swe,lwe=awe(owe),nO=lwe,uwe=nO,cwe=qm;function dwe(t,e){var n=-1,r=cwe(t)?Array(t.length):[];return uwe(t,function(i,s,o){r[++n]=e(i,s,o)}),r}var sK=dwe;function hwe(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var pwe=hwe,D1=Hh;function fwe(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,s=D1(t),o=e!==void 0,a=e===null,l=e===e,u=D1(e);if(!a&&!u&&!s&&t>e||s&&o&&l&&!a&&!u||r&&o&&l||!n&&l||!i)return 1;if(!r&&!s&&!u&&t<e||u&&n&&i&&!r&&!s||a&&n&&i||!o&&i||!l)return-1}return 0}var gwe=fwe,mwe=gwe;function vwe(t,e,n){for(var r=-1,i=t.criteria,s=e.criteria,o=i.length,a=n.length;++r<o;){var l=mwe(i[r],s[r]);if(l){if(r>=a)return l;var u=n[r];return l*(u=="desc"?-1:1)}}return t.index-e.index}var ywe=vwe,f0=HD,Cwe=BD,wwe=Zs,Swe=sK,Ewe=pwe,bwe=j3,Twe=ywe,Rwe=qh,_we=Zr;function Awe(t,e,n){e.length?e=f0(e,function(s){return _we(s)?function(o){return Cwe(o,s.length===1?s[0]:s)}:s}):e=[Rwe];var r=-1;e=f0(e,bwe(wwe));var i=Swe(t,function(s,o,a){var l=f0(e,function(u){return u(s)});return{criteria:l,index:++r,value:s}});return Ewe(i,function(s,o){return Twe(s,o,n)})}var xwe=Awe;function Pwe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var Iwe=Pwe,Dwe=Iwe,O1=Math.max;function Owe(t,e,n){return e=O1(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=O1(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(o),Dwe(t,this,a)}}var Mwe=Owe;function Fwe(t){return function(){return t}}var Nwe=Fwe,Lwe=Zu,kwe=function(){try{var t=Lwe(Object,"defineProperty");return t({},"",{}),t}catch{}}(),oK=kwe,Gwe=Nwe,M1=oK,Vwe=qh,Hwe=M1?function(t,e){return M1(t,"toString",{configurable:!0,enumerable:!1,value:Gwe(e),writable:!0})}:Vwe,Bwe=Hwe,$we=800,Wwe=16,jwe=Date.now;function Uwe(t){var e=0,n=0;return function(){var r=jwe(),i=Wwe-(r-n);if(n=r,i>0){if(++e>=$we)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var zwe=Uwe,Kwe=Bwe,qwe=zwe,Ywe=qwe(Kwe),Qwe=Ywe,Xwe=qh,Jwe=Mwe,Zwe=Qwe;function eSe(t,e){return Zwe(Jwe(t,e,Xwe),t+"")}var tSe=eSe,nSe=LD,rSe=qm,iSe=ZD,sSe=hl;function oSe(t,e,n){if(!sSe(n))return!1;var r=typeof e;return(r=="number"?rSe(n)&&iSe(e,n.length):r=="string"&&e in n)?nSe(n[e],t):!1}var sb=oSe,aSe=rK,lSe=xwe,uSe=tSe,F1=sb,cSe=uSe(function(t,e){if(t==null)return[];var n=e.length;return n>1&&F1(t,e[0],e[1])?e=[]:n>2&&F1(e[0],e[1],e[2])&&(e=[e[0]]),lSe(t,aSe(e,1),[])}),dSe=cSe;const rO=gt(dSe);function Dg(t){"@babel/helpers - typeof";return Dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dg(t)}function uA(){return uA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uA.apply(this,arguments)}function hSe(t,e){return mSe(t)||gSe(t,e)||fSe(t,e)||pSe()}function pSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fSe(t,e){if(t){if(typeof t=="string")return N1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N1(t,e)}}function N1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gSe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function mSe(t){if(Array.isArray(t))return t}function L1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function g0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L1(Object(n),!0).forEach(function(r){vSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vSe(t,e,n){return e=ySe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ySe(t){var e=CSe(t,"string");return Dg(e)=="symbol"?e:e+""}function CSe(t,e){if(Dg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Dg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wSe(t){return Array.isArray(t)&&Tn(t[0])&&Tn(t[1])?t.join(" ~ "):t}var SSe=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,s=i===void 0?{}:i,o=e.itemStyle,a=o===void 0?{}:o,l=e.labelStyle,u=l===void 0?{}:l,c=e.payload,d=e.formatter,h=e.itemSorter,f=e.wrapperClassName,g=e.labelClassName,m=e.label,v=e.labelFormatter,C=e.accessibilityLayer,y=C===void 0?!1:C,S=function(){if(c&&c.length){var L={padding:0,margin:0},N=(h?rO(c,h):c).map(function(W,j){if(W.type==="none")return null;var z=g0({display:"block",paddingTop:4,paddingBottom:4,color:W.color||"#000"},a),q=W.formatter||d||wSe,B=W.value,U=W.name,K=B,ie=U;if(q&&K!=null&&ie!=null){var Q=q(B,U,W,j,c);if(Array.isArray(Q)){var se=hSe(Q,2);K=se[0],ie=se[1]}else K=Q}return G.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(j),style:z},Tn(ie)?G.createElement("span",{className:"recharts-tooltip-item-name"},ie):null,Tn(ie)?G.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,G.createElement("span",{className:"recharts-tooltip-item-value"},K),G.createElement("span",{className:"recharts-tooltip-item-unit"},W.unit||""))});return G.createElement("ul",{className:"recharts-tooltip-item-list",style:L},N)}return null},_=g0({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),E=g0({margin:0},u),R=!Le(m),b=R?m:"",A=$e("recharts-default-tooltip",f),P=$e("recharts-tooltip-label",g);R&&v&&c!==void 0&&c!==null&&(b=v(m,c));var F=y?{role:"status","aria-live":"assertive"}:{};return G.createElement("div",uA({className:A,style:_},F),G.createElement("p",{className:P,style:E},G.isValidElement(b)?b:"".concat(b)),S())};function Og(t){"@babel/helpers - typeof";return Og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Og(t)}function Xv(t,e,n){return e=ESe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ESe(t){var e=bSe(t,"string");return Og(e)=="symbol"?e:e+""}function bSe(t,e){if(Og(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Og(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Tp="recharts-tooltip-wrapper",TSe={visibility:"hidden"};function RSe(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return $e(Tp,Xv(Xv(Xv(Xv({},"".concat(Tp,"-right"),le(n)&&e&&le(e.x)&&n>=e.x),"".concat(Tp,"-left"),le(n)&&e&&le(e.x)&&n<e.x),"".concat(Tp,"-bottom"),le(r)&&e&&le(e.y)&&r>=e.y),"".concat(Tp,"-top"),le(r)&&e&&le(e.y)&&r<e.y))}function k1(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,s=t.position,o=t.reverseDirection,a=t.tooltipDimension,l=t.viewBox,u=t.viewBoxDimension;if(s&&le(s[r]))return s[r];var c=n[r]-a-i,d=n[r]+i;if(e[r])return o[r]?c:d;if(o[r]){var h=c,f=l[r];return h<f?Math.max(d,l[r]):Math.max(c,l[r])}var g=d+a,m=l[r]+u;return g>m?Math.max(c,l[r]):Math.max(d,l[r])}function _Se(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function ASe(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,s=t.reverseDirection,o=t.tooltipBox,a=t.useTranslate3d,l=t.viewBox,u,c,d;return o.height>0&&o.width>0&&n?(c=k1({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),d=k1({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),u=_Se({translateX:c,translateY:d,useTranslate3d:a})):u=TSe,{cssProperties:u,cssClasses:RSe({translateX:c,translateY:d,coordinate:n})}}function Bd(t){"@babel/helpers - typeof";return Bd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bd(t)}function G1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function V1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?G1(Object(n),!0).forEach(function(r){dA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PSe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lK(r.key),r)}}function ISe(t,e,n){return e&&PSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function DSe(t,e,n){return e=Rw(e),OSe(t,aK()?Reflect.construct(e,n||[],Rw(t).constructor):e.apply(t,n))}function OSe(t,e){if(e&&(Bd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MSe(t)}function MSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aK=function(){return!!t})()}function Rw(t){return Rw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Rw(t)}function FSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cA(t,e)}function cA(t,e){return cA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},cA(t,e)}function dA(t,e,n){return e=lK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lK(t){var e=NSe(t,"string");return Bd(e)=="symbol"?e:e+""}function NSe(t,e){if(Bd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Bd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var H1=1,LSe=function(t){function e(){var n;xSe(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=DSe(this,e,[].concat(i)),dA(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),dA(n,"handleKeyDown",function(o){if(o.key==="Escape"){var a,l,u,c;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(a=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&a!==void 0?a:0,y:(u=(c=n.props.coordinate)===null||c===void 0?void 0:c.y)!==null&&u!==void 0?u:0}})}}),n}return FSe(e,t),ISe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>H1||Math.abs(r.height-this.state.lastBoundingBox.height)>H1)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,s=i.active,o=i.allowEscapeViewBox,a=i.animationDuration,l=i.animationEasing,u=i.children,c=i.coordinate,d=i.hasPayload,h=i.isAnimationActive,f=i.offset,g=i.position,m=i.reverseDirection,v=i.useTranslate3d,C=i.viewBox,y=i.wrapperStyle,S=ASe({allowEscapeViewBox:o,coordinate:c,offsetTopLeft:f,position:g,reverseDirection:m,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:C}),_=S.cssClasses,E=S.cssProperties,R=V1(V1({transition:h&&s?"transform ".concat(a,"ms ").concat(l):void 0},E),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&d?"visible":"hidden",position:"absolute",top:0,left:0},y);return G.createElement("div",{tabIndex:-1,className:_,style:R,ref:function(A){r.wrapperNode=A}},u)}}])}(I.PureComponent),kSe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},ec={isSsr:kSe()};function $d(t){"@babel/helpers - typeof";return $d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$d(t)}function B1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B1(Object(n),!0).forEach(function(r){iO(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function GSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function VSe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,cK(r.key),r)}}function HSe(t,e,n){return e&&VSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function BSe(t,e,n){return e=_w(e),$Se(t,uK()?Reflect.construct(e,n||[],_w(t).constructor):e.apply(t,n))}function $Se(t,e){if(e&&($d(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WSe(t)}function WSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uK=function(){return!!t})()}function _w(t){return _w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_w(t)}function jSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hA(t,e)}function hA(t,e){return hA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},hA(t,e)}function iO(t,e,n){return e=cK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cK(t){var e=USe(t,"string");return $d(e)=="symbol"?e:e+""}function USe(t,e){if($d(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($d(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function zSe(t){return t.dataKey}function KSe(t,e){return G.isValidElement(t)?G.cloneElement(t,e):typeof t=="function"?G.createElement(t,e):G.createElement(SSe,e)}var Ii=function(t){function e(){return GSe(this,e),BSe(this,e,arguments)}return jSe(e,t),HSe(e,[{key:"render",value:function(){var r=this,i=this.props,s=i.active,o=i.allowEscapeViewBox,a=i.animationDuration,l=i.animationEasing,u=i.content,c=i.coordinate,d=i.filterNull,h=i.isAnimationActive,f=i.offset,g=i.payload,m=i.payloadUniqBy,v=i.position,C=i.reverseDirection,y=i.useTranslate3d,S=i.viewBox,_=i.wrapperStyle,E=g??[];d&&E.length&&(E=Z3(g.filter(function(b){return b.value!=null&&(b.hide!==!0||r.props.includeHidden)}),m,zSe));var R=E.length>0;return G.createElement(LSe,{allowEscapeViewBox:o,animationDuration:a,animationEasing:l,isAnimationActive:h,active:s,coordinate:c,hasPayload:R,offset:f,position:v,reverseDirection:C,useTranslate3d:y,viewBox:S,wrapperStyle:_},KSe(u,$1($1({},this.props),{},{payload:E})))}}])}(I.PureComponent);iO(Ii,"displayName","Tooltip");iO(Ii,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!ec.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var qSe=Js,YSe=function(){return qSe.Date.now()},QSe=YSe,XSe=/\s/;function JSe(t){for(var e=t.length;e--&&XSe.test(t.charAt(e)););return e}var ZSe=JSe,eEe=ZSe,tEe=/^\s+/;function nEe(t){return t&&t.slice(0,eEe(t)+1).replace(tEe,"")}var rEe=nEe,iEe=rEe,W1=hl,sEe=Hh,j1=NaN,oEe=/^[-+]0x[0-9a-f]+$/i,aEe=/^0b[01]+$/i,lEe=/^0o[0-7]+$/i,uEe=parseInt;function cEe(t){if(typeof t=="number")return t;if(sEe(t))return j1;if(W1(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=W1(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=iEe(t);var n=aEe.test(t);return n||lEe.test(t)?uEe(t.slice(2),n?2:8):oEe.test(t)?j1:+t}var dK=cEe,dEe=hl,m0=QSe,U1=dK,hEe="Expected a function",pEe=Math.max,fEe=Math.min;function gEe(t,e,n){var r,i,s,o,a,l,u=0,c=!1,d=!1,h=!0;if(typeof t!="function")throw new TypeError(hEe);e=U1(e)||0,dEe(n)&&(c=!!n.leading,d="maxWait"in n,s=d?pEe(U1(n.maxWait)||0,e):s,h="trailing"in n?!!n.trailing:h);function f(R){var b=r,A=i;return r=i=void 0,u=R,o=t.apply(A,b),o}function g(R){return u=R,a=setTimeout(C,e),c?f(R):o}function m(R){var b=R-l,A=R-u,P=e-b;return d?fEe(P,s-A):P}function v(R){var b=R-l,A=R-u;return l===void 0||b>=e||b<0||d&&A>=s}function C(){var R=m0();if(v(R))return y(R);a=setTimeout(C,m(R))}function y(R){return a=void 0,h&&r?f(R):(r=i=void 0,o)}function S(){a!==void 0&&clearTimeout(a),u=0,r=l=i=a=void 0}function _(){return a===void 0?o:y(m0())}function E(){var R=m0(),b=v(R);if(r=arguments,i=this,l=R,b){if(a===void 0)return g(l);if(d)return clearTimeout(a),a=setTimeout(C,e),f(l)}return a===void 0&&(a=setTimeout(C,e)),o}return E.cancel=S,E.flush=_,E}var mEe=gEe,vEe=mEe,yEe=hl,CEe="Expected a function";function wEe(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(CEe);return yEe(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),vEe(t,e,{leading:r,maxWait:e,trailing:i})}var SEe=wEe;const hK=gt(SEe);function Mg(t){"@babel/helpers - typeof";return Mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mg(t)}function z1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Jv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z1(Object(n),!0).forEach(function(r){EEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function EEe(t,e,n){return e=bEe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bEe(t){var e=TEe(t,"string");return Mg(e)=="symbol"?e:e+""}function TEe(t,e){if(Mg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Mg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function REe(t,e){return PEe(t)||xEe(t,e)||AEe(t,e)||_Ee()}function _Ee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AEe(t,e){if(t){if(typeof t=="string")return K1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K1(t,e)}}function K1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function xEe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function PEe(t){if(Array.isArray(t))return t}var sO=I.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,s=t.width,o=s===void 0?"100%":s,a=t.height,l=a===void 0?"100%":a,u=t.minWidth,c=u===void 0?0:u,d=t.minHeight,h=t.maxHeight,f=t.children,g=t.debounce,m=g===void 0?0:g,v=t.id,C=t.className,y=t.onResize,S=t.style,_=S===void 0?{}:S,E=I.useRef(null),R=I.useRef();R.current=y,I.useImperativeHandle(e,function(){return Object.defineProperty(E.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),E.current},configurable:!0})});var b=I.useState({containerWidth:i.width,containerHeight:i.height}),A=REe(b,2),P=A[0],F=A[1],k=I.useCallback(function(N,W){F(function(j){var z=Math.round(N),q=Math.round(W);return j.containerWidth===z&&j.containerHeight===q?j:{containerWidth:z,containerHeight:q}})},[]);I.useEffect(function(){var N=function(U){var K,ie=U[0].contentRect,Q=ie.width,se=ie.height;k(Q,se),(K=R.current)===null||K===void 0||K.call(R,Q,se)};m>0&&(N=hK(N,m,{trailing:!0,leading:!1}));var W=new ResizeObserver(N),j=E.current.getBoundingClientRect(),z=j.width,q=j.height;return k(z,q),W.observe(E.current),function(){W.disconnect()}},[k,m]);var L=I.useMemo(function(){var N=P.containerWidth,W=P.containerHeight;if(N<0||W<0)return null;fs(zl(o)||zl(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,l),fs(!n||n>0,"The aspect(%s) must be greater than zero.",n);var j=zl(o)?N:o,z=zl(l)?W:l;n&&n>0&&(j?z=j/n:z&&(j=z*n),h&&z>h&&(z=h)),fs(j>0||z>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,j,z,o,l,c,d,n);var q=!Array.isArray(f)&&wo(f.type).endsWith("Chart");return G.Children.map(f,function(B){return G.isValidElement(B)?I.cloneElement(B,Jv({width:j,height:z},q?{style:Jv({height:"100%",width:"100%",maxHeight:z,maxWidth:j},B.props.style)}:{})):B})},[n,f,l,h,d,c,P,o]);return G.createElement("div",{id:v?"".concat(v):void 0,className:$e("recharts-responsive-container",C),style:Jv(Jv({},_),{},{width:o,height:l,minWidth:c,minHeight:d,maxHeight:h}),ref:E},L)}),ob=function(e){return null};ob.displayName="Cell";function Fg(t){"@babel/helpers - typeof";return Fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fg(t)}function q1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?q1(Object(n),!0).forEach(function(r){IEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function IEe(t,e,n){return e=DEe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DEe(t){var e=OEe(t,"string");return Fg(e)=="symbol"?e:e+""}function OEe(t,e){if(Fg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Fg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uc={widthCache:{},cacheCount:0},MEe=2e3,FEe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Y1="recharts_measurement_span";function NEe(t){var e=pA({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var yf=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||ec.isSsr)return{width:0,height:0};var r=NEe(n),i=JSON.stringify({text:e,copyStyle:r});if(uc.widthCache[i])return uc.widthCache[i];try{var s=document.getElementById(Y1);s||(s=document.createElement("span"),s.setAttribute("id",Y1),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var o=pA(pA({},FEe),r);Object.assign(s.style,o),s.textContent="".concat(e);var a=s.getBoundingClientRect(),l={width:a.width,height:a.height};return uc.widthCache[i]=l,++uc.cacheCount>MEe&&(uc.cacheCount=0,uc.widthCache={}),l}catch{return{width:0,height:0}}},LEe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Ng(t){"@babel/helpers - typeof";return Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ng(t)}function Aw(t,e){return HEe(t)||VEe(t,e)||GEe(t,e)||kEe()}function kEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GEe(t,e){if(t){if(typeof t=="string")return Q1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q1(t,e)}}function Q1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function VEe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function HEe(t){if(Array.isArray(t))return t}function BEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function X1(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,WEe(r.key),r)}}function $Ee(t,e,n){return e&&X1(t.prototype,e),n&&X1(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function WEe(t){var e=jEe(t,"string");return Ng(e)=="symbol"?e:e+""}function jEe(t,e){if(Ng(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ng(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var J1=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Z1=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,UEe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,zEe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,pK={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},KEe=Object.keys(pK),kc="NaN";function qEe(t,e){return t*pK[e]}var Zv=function(){function t(e,n){BEe(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!UEe.test(n)&&(this.num=NaN,this.unit=""),KEe.includes(n)&&(this.num=qEe(e,n),this.unit="px")}return $Ee(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=zEe.exec(n))!==null&&r!==void 0?r:[],s=Aw(i,3),o=s[1],a=s[2];return new t(parseFloat(o),a??"")}}])}();function fK(t){if(t.includes(kc))return kc;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=J1.exec(e))!==null&&n!==void 0?n:[],i=Aw(r,4),s=i[1],o=i[2],a=i[3],l=Zv.parse(s??""),u=Zv.parse(a??""),c=o==="*"?l.multiply(u):l.divide(u);if(c.isNaN())return kc;e=e.replace(J1,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,h=(d=Z1.exec(e))!==null&&d!==void 0?d:[],f=Aw(h,4),g=f[1],m=f[2],v=f[3],C=Zv.parse(g??""),y=Zv.parse(v??""),S=m==="+"?C.add(y):C.subtract(y);if(S.isNaN())return kc;e=e.replace(Z1,S.toString())}return e}var eG=/\(([^()]*)\)/;function YEe(t){for(var e=t;e.includes("(");){var n=eG.exec(e),r=Aw(n,2),i=r[1];e=e.replace(eG,fK(i))}return e}function QEe(t){var e=t.replace(/\s+/g,"");return e=YEe(e),e=fK(e),e}function XEe(t){try{return QEe(t)}catch{return kc}}function v0(t){var e=XEe(t.slice(5,-1));return e===kc?"":e}var JEe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],ZEe=["dx","dy","angle","className","breakAll"];function fA(){return fA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fA.apply(this,arguments)}function tG(t,e){if(t==null)return{};var n=ebe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ebe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function nG(t,e){return ibe(t)||rbe(t,e)||nbe(t,e)||tbe()}function tbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nbe(t,e){if(t){if(typeof t=="string")return rG(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rG(t,e)}}function rG(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rbe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function ibe(t){if(Array.isArray(t))return t}var gK=/[ \f\n\r\t\v\u2028\u2029]+/,mK=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var s=[];Le(n)||(r?s=n.toString().split(""):s=n.toString().split(gK));var o=s.map(function(l){return{word:l,width:yf(l,i).width}}),a=r?0:yf("",i).width;return{wordsWithComputedWidth:o,spaceWidth:a}}catch{return null}},sbe=function(e,n,r,i,s){var o=e.maxLines,a=e.children,l=e.style,u=e.breakAll,c=le(o),d=a,h=function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return j.reduce(function(z,q){var B=q.word,U=q.width,K=z[z.length-1];if(K&&(i==null||s||K.width+U+r<Number(i)))K.words.push(B),K.width+=U+r;else{var ie={words:[B],width:U};z.push(ie)}return z},[])},f=h(n),g=function(j){return j.reduce(function(z,q){return z.width>q.width?z:q})};if(!c)return f;for(var m="",v=function(j){var z=d.slice(0,j),q=mK({breakAll:u,style:l,children:z+m}).wordsWithComputedWidth,B=h(q),U=B.length>o||g(B).width>Number(i);return[U,B]},C=0,y=d.length-1,S=0,_;C<=y&&S<=d.length-1;){var E=Math.floor((C+y)/2),R=E-1,b=v(R),A=nG(b,2),P=A[0],F=A[1],k=v(E),L=nG(k,1),N=L[0];if(!P&&!N&&(C=E+1),P&&N&&(y=E-1),!P&&N){_=F;break}S++}return _||f},iG=function(e){var n=Le(e)?[]:e.toString().split(gK);return[{words:n}]},obe=function(e){var n=e.width,r=e.scaleToFit,i=e.children,s=e.style,o=e.breakAll,a=e.maxLines;if((n||r)&&!ec.isSsr){var l,u,c=mK({breakAll:o,children:i,style:s});if(c){var d=c.wordsWithComputedWidth,h=c.spaceWidth;l=d,u=h}else return iG(i);return sbe({breakAll:o,children:i,maxLines:a,style:s},l,u,n,r)}return iG(i)},sG="#808080",Mu=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,s=i===void 0?0:i,o=e.lineHeight,a=o===void 0?"1em":o,l=e.capHeight,u=l===void 0?"0.71em":l,c=e.scaleToFit,d=c===void 0?!1:c,h=e.textAnchor,f=h===void 0?"start":h,g=e.verticalAnchor,m=g===void 0?"end":g,v=e.fill,C=v===void 0?sG:v,y=tG(e,JEe),S=I.useMemo(function(){return obe({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:d,style:y.style,width:y.width})},[y.breakAll,y.children,y.maxLines,d,y.style,y.width]),_=y.dx,E=y.dy,R=y.angle,b=y.className,A=y.breakAll,P=tG(y,ZEe);if(!Tn(r)||!Tn(s))return null;var F=r+(le(_)?_:0),k=s+(le(E)?E:0),L;switch(m){case"start":L=v0("calc(".concat(u,")"));break;case"middle":L=v0("calc(".concat((S.length-1)/2," * -").concat(a," + (").concat(u," / 2))"));break;default:L=v0("calc(".concat(S.length-1," * -").concat(a,")"));break}var N=[];if(d){var W=S[0].width,j=y.width;N.push("scale(".concat((le(j)?j/W:1)/W,")"))}return R&&N.push("rotate(".concat(R,", ").concat(F,", ").concat(k,")")),N.length&&(P.transform=N.join(" ")),G.createElement("text",fA({},_e(P,!0),{x:F,y:k,className:$e("recharts-text",b),textAnchor:f,fill:C.includes("url")?sG:C}),S.map(function(z,q){var B=z.words.join(A?"":" ");return G.createElement("tspan",{x:F,dy:q===0?L:a,key:"".concat(B,"-").concat(q)},B)}))};function Va(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function abe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function oO(t){let e,n,r;t.length!==2?(e=Va,n=(a,l)=>Va(t(a),l),r=(a,l)=>t(a)-l):(e=t===Va||t===abe?t:lbe,n=t,r=t);function i(a,l,u=0,c=a.length){if(u<c){if(e(l,l)!==0)return c;do{const d=u+c>>>1;n(a[d],l)<0?u=d+1:c=d}while(u<c)}return u}function s(a,l,u=0,c=a.length){if(u<c){if(e(l,l)!==0)return c;do{const d=u+c>>>1;n(a[d],l)<=0?u=d+1:c=d}while(u<c)}return u}function o(a,l,u=0,c=a.length){const d=i(a,l,u,c-1);return d>u&&r(a[d-1],l)>-r(a[d],l)?d-1:d}return{left:i,center:o,right:s}}function lbe(){return 0}function vK(t){return t===null?NaN:+t}function*ube(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const cbe=oO(Va),Ym=cbe.right;oO(vK).center;class oG extends Map{constructor(e,n=pbe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(aG(this,e))}has(e){return super.has(aG(this,e))}set(e,n){return super.set(dbe(this,e),n)}delete(e){return super.delete(hbe(this,e))}}function aG({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function dbe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function hbe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function pbe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function fbe(t=Va){if(t===Va)return yK;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function yK(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const gbe=Math.sqrt(50),mbe=Math.sqrt(10),vbe=Math.sqrt(2);function xw(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=gbe?10:s>=mbe?5:s>=vbe?2:1;let a,l,u;return i<0?(u=Math.pow(10,-i)/o,a=Math.round(t*u),l=Math.round(e*u),a/u<t&&++a,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*o,a=Math.round(t/u),l=Math.round(e/u),a*u<t&&++a,l*u>e&&--l),l<a&&.5<=n&&n<2?xw(t,e,n*2):[a,l,u]}function gA(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,o]=r?xw(e,t,n):xw(t,e,n);if(!(s>=i))return[];const a=s-i+1,l=new Array(a);if(r)if(o<0)for(let u=0;u<a;++u)l[u]=(s-u)/-o;else for(let u=0;u<a;++u)l[u]=(s-u)*o;else if(o<0)for(let u=0;u<a;++u)l[u]=(i+u)/-o;else for(let u=0;u<a;++u)l[u]=(i+u)*o;return l}function mA(t,e,n){return e=+e,t=+t,n=+n,xw(t,e,n)[2]}function vA(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?mA(e,t,n):mA(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function lG(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function uG(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function CK(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?yK:fbe(i);r>n;){if(r-n>600){const l=r-n+1,u=e-n+1,c=Math.log(l),d=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*d*(l-d)/l)*(u-l/2<0?-1:1),f=Math.max(n,Math.floor(e-u*d/l+h)),g=Math.min(r,Math.floor(e+(l-u)*d/l+h));CK(t,e,f,g,i)}const s=t[e];let o=n,a=r;for(Rp(t,n,e),i(t[r],s)>0&&Rp(t,n,r);o<a;){for(Rp(t,o,a),++o,--a;i(t[o],s)<0;)++o;for(;i(t[a],s)>0;)--a}i(t[n],s)===0?Rp(t,n,a):(++a,Rp(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}return t}function Rp(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function ybe(t,e,n){if(t=Float64Array.from(ube(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return uG(t);if(e>=1)return lG(t);var r,i=(r-1)*e,s=Math.floor(i),o=lG(CK(t,s).subarray(0,s+1)),a=uG(t.subarray(s+1));return o+(a-o)*(i-s)}}function Cbe(t,e,n=vK){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,s=Math.floor(i),o=+n(t[s],s,t),a=+n(t[s+1],s+1,t);return o+(a-o)*(i-s)}}function wbe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function Qi(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ko(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const yA=Symbol("implicit");function aO(){var t=new oG,e=[],n=[],r=yA;function i(s){let o=t.get(s);if(o===void 0){if(r!==yA)return r;t.set(s,o=e.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new oG;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return aO(e,n).unknown(r)},Qi.apply(i,arguments),i}function Lg(){var t=aO().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,o,a=!1,l=0,u=0,c=.5;delete t.unknown;function d(){var h=e().length,f=i<r,g=f?i:r,m=f?r:i;s=(m-g)/Math.max(1,h-l+u*2),a&&(s=Math.floor(s)),g+=(m-g-s*(h-l))*c,o=s*(1-l),a&&(g=Math.round(g),o=Math.round(o));var v=wbe(h).map(function(C){return g+s*C});return n(f?v.reverse():v)}return t.domain=function(h){return arguments.length?(e(h),d()):e()},t.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,d()):[r,i]},t.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,a=!0,d()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(h){return arguments.length?(a=!!h,d()):a},t.padding=function(h){return arguments.length?(l=Math.min(1,u=+h),d()):l},t.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),d()):l},t.paddingOuter=function(h){return arguments.length?(u=+h,d()):u},t.align=function(h){return arguments.length?(c=Math.max(0,Math.min(1,h)),d()):c},t.copy=function(){return Lg(e(),[r,i]).round(a).paddingInner(l).paddingOuter(u).align(c)},Qi.apply(d(),arguments)}function wK(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return wK(e())},t}function Cf(){return wK(Lg.apply(null,arguments).paddingInner(1))}function lO(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function SK(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Qm(){}var kg=.7,Pw=1/kg,id="\\s*([+-]?\\d+)\\s*",Gg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Bs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Sbe=/^#([0-9a-f]{3,8})$/,Ebe=new RegExp(`^rgb\\(${id},${id},${id}\\)$`),bbe=new RegExp(`^rgb\\(${Bs},${Bs},${Bs}\\)$`),Tbe=new RegExp(`^rgba\\(${id},${id},${id},${Gg}\\)$`),Rbe=new RegExp(`^rgba\\(${Bs},${Bs},${Bs},${Gg}\\)$`),_be=new RegExp(`^hsl\\(${Gg},${Bs},${Bs}\\)$`),Abe=new RegExp(`^hsla\\(${Gg},${Bs},${Bs},${Gg}\\)$`),cG={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};lO(Qm,Vg,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:dG,formatHex:dG,formatHex8:xbe,formatHsl:Pbe,formatRgb:hG,toString:hG});function dG(){return this.rgb().formatHex()}function xbe(){return this.rgb().formatHex8()}function Pbe(){return EK(this).formatHsl()}function hG(){return this.rgb().formatRgb()}function Vg(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Sbe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?pG(e):n===3?new Ur(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?ey(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?ey(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Ebe.exec(t))?new Ur(e[1],e[2],e[3],1):(e=bbe.exec(t))?new Ur(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Tbe.exec(t))?ey(e[1],e[2],e[3],e[4]):(e=Rbe.exec(t))?ey(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=_be.exec(t))?mG(e[1],e[2]/100,e[3]/100,1):(e=Abe.exec(t))?mG(e[1],e[2]/100,e[3]/100,e[4]):cG.hasOwnProperty(t)?pG(cG[t]):t==="transparent"?new Ur(NaN,NaN,NaN,0):null}function pG(t){return new Ur(t>>16&255,t>>8&255,t&255,1)}function ey(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ur(t,e,n,r)}function Ibe(t){return t instanceof Qm||(t=Vg(t)),t?(t=t.rgb(),new Ur(t.r,t.g,t.b,t.opacity)):new Ur}function CA(t,e,n,r){return arguments.length===1?Ibe(t):new Ur(t,e,n,r??1)}function Ur(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}lO(Ur,CA,SK(Qm,{brighter(t){return t=t==null?Pw:Math.pow(Pw,t),new Ur(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?kg:Math.pow(kg,t),new Ur(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ur(lu(this.r),lu(this.g),lu(this.b),Iw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fG,formatHex:fG,formatHex8:Dbe,formatRgb:gG,toString:gG}));function fG(){return`#${Kl(this.r)}${Kl(this.g)}${Kl(this.b)}`}function Dbe(){return`#${Kl(this.r)}${Kl(this.g)}${Kl(this.b)}${Kl((isNaN(this.opacity)?1:this.opacity)*255)}`}function gG(){const t=Iw(this.opacity);return`${t===1?"rgb(":"rgba("}${lu(this.r)}, ${lu(this.g)}, ${lu(this.b)}${t===1?")":`, ${t})`}`}function Iw(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function lu(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Kl(t){return t=lu(t),(t<16?"0":"")+t.toString(16)}function mG(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new as(t,e,n,r)}function EK(t){if(t instanceof as)return new as(t.h,t.s,t.l,t.opacity);if(t instanceof Qm||(t=Vg(t)),!t)return new as;if(t instanceof as)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new as(o,a,l,t.opacity)}function Obe(t,e,n,r){return arguments.length===1?EK(t):new as(t,e,n,r??1)}function as(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}lO(as,Obe,SK(Qm,{brighter(t){return t=t==null?Pw:Math.pow(Pw,t),new as(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?kg:Math.pow(kg,t),new as(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Ur(y0(t>=240?t-240:t+120,i,r),y0(t,i,r),y0(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new as(vG(this.h),ty(this.s),ty(this.l),Iw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Iw(this.opacity);return`${t===1?"hsl(":"hsla("}${vG(this.h)}, ${ty(this.s)*100}%, ${ty(this.l)*100}%${t===1?")":`, ${t})`}`}}));function vG(t){return t=(t||0)%360,t<0?t+360:t}function ty(t){return Math.max(0,Math.min(1,t||0))}function y0(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const uO=t=>()=>t;function Mbe(t,e){return function(n){return t+n*e}}function Fbe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Nbe(t){return(t=+t)==1?bK:function(e,n){return n-e?Fbe(e,n,t):uO(isNaN(e)?n:e)}}function bK(t,e){var n=e-t;return n?Mbe(t,n):uO(isNaN(t)?e:t)}const yG=function t(e){var n=Nbe(e);function r(i,s){var o=n((i=CA(i)).r,(s=CA(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),u=bK(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=t,r}(1);function Lbe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function kbe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Gbe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Yh(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function Vbe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Dw(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Hbe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Yh(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var wA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,C0=new RegExp(wA.source,"g");function Bbe(t){return function(){return t}}function $be(t){return function(e){return t(e)+""}}function Wbe(t,e){var n=wA.lastIndex=C0.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=wA.exec(t))&&(i=C0.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:Dw(r,i)})),n=C0.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?$be(l[0].x):Bbe(e):(e=l.length,function(u){for(var c=0,d;c<e;++c)a[(d=l[c]).i]=d.x(u);return a.join("")})}function Yh(t,e){var n=typeof e,r;return e==null||n==="boolean"?uO(e):(n==="number"?Dw:n==="string"?(r=Vg(e))?(e=r,yG):Wbe:e instanceof Vg?yG:e instanceof Date?Vbe:kbe(e)?Lbe:Array.isArray(e)?Gbe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Hbe:Dw)(t,e)}function cO(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function jbe(t,e){e===void 0&&(e=t,t=Yh);for(var n=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(i,i=e[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function Ube(t){return function(){return t}}function Ow(t){return+t}var CG=[0,1];function Sr(t){return t}function SA(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Ube(isNaN(e)?NaN:.5)}function zbe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Kbe(t,e,n){var r=t[0],i=t[1],s=e[0],o=e[1];return i<r?(r=SA(i,r),s=n(o,s)):(r=SA(r,i),s=n(s,o)),function(a){return s(r(a))}}function qbe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=SA(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(a){var l=Ym(t,a,1,r)-1;return s[l](i[l](a))}}function Xm(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function ab(){var t=CG,e=CG,n=Yh,r,i,s,o=Sr,a,l,u;function c(){var h=Math.min(t.length,e.length);return o!==Sr&&(o=zbe(t[0],t[h-1])),a=h>2?qbe:Kbe,l=u=null,d}function d(h){return h==null||isNaN(h=+h)?s:(l||(l=a(t.map(r),e,n)))(r(o(h)))}return d.invert=function(h){return o(i((u||(u=a(e,t.map(r),Dw)))(h)))},d.domain=function(h){return arguments.length?(t=Array.from(h,Ow),c()):t.slice()},d.range=function(h){return arguments.length?(e=Array.from(h),c()):e.slice()},d.rangeRound=function(h){return e=Array.from(h),n=cO,c()},d.clamp=function(h){return arguments.length?(o=h?!0:Sr,c()):o!==Sr},d.interpolate=function(h){return arguments.length?(n=h,c()):n},d.unknown=function(h){return arguments.length?(s=h,d):s},function(h,f){return r=h,i=f,c()}}function dO(){return ab()(Sr,Sr)}function Ybe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Mw(t,e){if(!isFinite(t)||t===0)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Wd(t){return t=Mw(Math.abs(t)),t?t[1]:NaN}function Qbe(t,e){return function(n,r){for(var i=n.length,s=[],o=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}function Xbe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Jbe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Hg(t){if(!(e=Jbe.exec(t)))throw new Error("invalid format: "+t);var e;return new hO({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Hg.prototype=hO.prototype;function hO(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}hO.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Zbe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Fw;function eTe(t,e){var n=Mw(t,e);if(!n)return Fw=void 0,t.toPrecision(e);var r=n[0],i=n[1],s=i-(Fw=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Mw(t,Math.max(0,e+s-1))[0]}function wG(t,e){var n=Mw(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const SG={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Ybe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>wG(t*100,e),r:wG,s:eTe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function EG(t){return t}var bG=Array.prototype.map,TG=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function tTe(t){var e=t.grouping===void 0||t.thousands===void 0?EG:Qbe(bG.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?EG:Xbe(bG.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(d,h){d=Hg(d);var f=d.fill,g=d.align,m=d.sign,v=d.symbol,C=d.zero,y=d.width,S=d.comma,_=d.precision,E=d.trim,R=d.type;R==="n"?(S=!0,R="g"):SG[R]||(_===void 0&&(_=12),E=!0,R="g"),(C||f==="0"&&g==="=")&&(C=!0,f="0",g="=");var b=(h&&h.prefix!==void 0?h.prefix:"")+(v==="$"?n:v==="#"&&/[boxX]/.test(R)?"0"+R.toLowerCase():""),A=(v==="$"?r:/[%p]/.test(R)?o:"")+(h&&h.suffix!==void 0?h.suffix:""),P=SG[R],F=/[defgprs%]/.test(R);_=_===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function k(L){var N=b,W=A,j,z,q;if(R==="c")W=P(L)+W,L="";else{L=+L;var B=L<0||1/L<0;if(L=isNaN(L)?l:P(Math.abs(L),_),E&&(L=Zbe(L)),B&&+L==0&&m!=="+"&&(B=!1),N=(B?m==="("?m:a:m==="-"||m==="("?"":m)+N,W=(R==="s"&&!isNaN(L)&&Fw!==void 0?TG[8+Fw/3]:"")+W+(B&&m==="("?")":""),F){for(j=-1,z=L.length;++j<z;)if(q=L.charCodeAt(j),48>q||q>57){W=(q===46?i+L.slice(j+1):L.slice(j))+W,L=L.slice(0,j);break}}}S&&!C&&(L=e(L,1/0));var U=N.length+L.length+W.length,K=U<y?new Array(y-U+1).join(f):"";switch(S&&C&&(L=e(K+L,K.length?y-W.length:1/0),K=""),g){case"<":L=N+L+W+K;break;case"=":L=N+K+L+W;break;case"^":L=K.slice(0,U=K.length>>1)+N+L+W+K.slice(U);break;default:L=K+N+L+W;break}return s(L)}return k.toString=function(){return d+""},k}function c(d,h){var f=Math.max(-8,Math.min(8,Math.floor(Wd(h)/3)))*3,g=Math.pow(10,-f),m=u((d=Hg(d),d.type="f",d),{suffix:TG[8+f/3]});return function(v){return m(g*v)}}return{format:u,formatPrefix:c}}var ny,pO,TK;nTe({thousands:",",grouping:[3],currency:["$",""]});function nTe(t){return ny=tTe(t),pO=ny.format,TK=ny.formatPrefix,ny}function rTe(t){return Math.max(0,-Wd(Math.abs(t)))}function iTe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Wd(e)/3)))*3-Wd(Math.abs(t)))}function sTe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Wd(e)-Wd(t))+1}function RK(t,e,n,r){var i=vA(t,e,n),s;switch(r=Hg(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=iTe(i,o))&&(r.precision=s),TK(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=sTe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=rTe(i))&&(r.precision=s-(r.type==="%")*2);break}}return pO(r)}function pl(t){var e=t.domain;return t.ticks=function(n){var r=e();return gA(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return RK(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,o=r[i],a=r[s],l,u,c=10;for(a<o&&(u=o,o=a,a=u,u=i,i=s,s=u);c-- >0;){if(u=mA(o,a,n),u===l)return r[i]=o,r[s]=a,e(r);if(u>0)o=Math.floor(o/u)*u,a=Math.ceil(a/u)*u;else if(u<0)o=Math.ceil(o*u)/u,a=Math.floor(a*u)/u;else break;l=u}return t},t}function Nw(){var t=dO();return t.copy=function(){return Xm(t,Nw())},Qi.apply(t,arguments),pl(t)}function _K(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Ow),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return _K(t).unknown(e)},t=arguments.length?Array.from(t,Ow):[0,1],pl(n)}function AK(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),t[n]=e.floor(i),t[r]=e.ceil(s),t}function RG(t){return Math.log(t)}function _G(t){return Math.exp(t)}function oTe(t){return-Math.log(-t)}function aTe(t){return-Math.exp(-t)}function lTe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function uTe(t){return t===10?lTe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function cTe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function AG(t){return(e,n)=>-t(-e,n)}function fO(t){const e=t(RG,_G),n=e.domain;let r=10,i,s;function o(){return i=cTe(r),s=uTe(r),n()[0]<0?(i=AG(i),s=AG(s),t(oTe,aTe)):t(RG,_G),e}return e.base=function(a){return arguments.length?(r=+a,o()):r},e.domain=function(a){return arguments.length?(n(a),o()):n()},e.ticks=a=>{const l=n();let u=l[0],c=l[l.length-1];const d=c<u;d&&([u,c]=[c,u]);let h=i(u),f=i(c),g,m;const v=a==null?10:+a;let C=[];if(!(r%1)&&f-h<v){if(h=Math.floor(h),f=Math.ceil(f),u>0){for(;h<=f;++h)for(g=1;g<r;++g)if(m=h<0?g/s(-h):g*s(h),!(m<u)){if(m>c)break;C.push(m)}}else for(;h<=f;++h)for(g=r-1;g>=1;--g)if(m=h>0?g/s(-h):g*s(h),!(m<u)){if(m>c)break;C.push(m)}C.length*2<v&&(C=gA(u,c,v))}else C=gA(h,f,Math.min(f-h,v)).map(s);return d?C.reverse():C},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Hg(l)).precision==null&&(l.trim=!0),l=pO(l)),a===1/0)return l;const u=Math.max(1,r*a/e.ticks().length);return c=>{let d=c/s(Math.round(i(c)));return d*r<r-.5&&(d*=r),d<=u?l(c):""}},e.nice=()=>n(AK(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),e}function xK(){const t=fO(ab()).domain([1,10]);return t.copy=()=>Xm(t,xK()).base(t.base()),Qi.apply(t,arguments),t}function xG(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function PG(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function gO(t){var e=1,n=t(xG(e),PG(e));return n.constant=function(r){return arguments.length?t(xG(e=+r),PG(e)):e},pl(n)}function PK(){var t=gO(ab());return t.copy=function(){return Xm(t,PK()).constant(t.constant())},Qi.apply(t,arguments)}function IG(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function dTe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function hTe(t){return t<0?-t*t:t*t}function mO(t){var e=t(Sr,Sr),n=1;function r(){return n===1?t(Sr,Sr):n===.5?t(dTe,hTe):t(IG(n),IG(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},pl(e)}function vO(){var t=mO(ab());return t.copy=function(){return Xm(t,vO()).exponent(t.exponent())},Qi.apply(t,arguments),t}function pTe(){return vO.apply(null,arguments).exponent(.5)}function DG(t){return Math.sign(t)*t*t}function fTe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function IK(){var t=dO(),e=[0,1],n=!1,r;function i(s){var o=fTe(t(s));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(s){return t.invert(DG(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,Ow)).map(DG)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return IK(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Qi.apply(i,arguments),pl(i)}function DK(){var t=[],e=[],n=[],r;function i(){var o=0,a=Math.max(1,e.length);for(n=new Array(a-1);++o<a;)n[o-1]=Cbe(t,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:e[Ym(n,o)]}return s.invertExtent=function(o){var a=e.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let a of o)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Va),i()},s.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return DK().domain(t).range(e).unknown(r)},Qi.apply(s,arguments)}function OK(){var t=0,e=1,n=1,r=[.5],i=[0,1],s;function o(l){return l!=null&&l<=l?i[Ym(r,l,0,n)]:s}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return o}return o.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},o.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,a()):i.slice()},o.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},o.unknown=function(l){return arguments.length&&(s=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return OK().domain([t,e]).range(i).unknown(s)},Qi.apply(pl(o),arguments)}function MK(){var t=[.5],e=[0,1],n,r=1;function i(s){return s!=null&&s<=s?e[Ym(t,s,0,r)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return MK().domain(t).range(e).unknown(n)},Qi.apply(i,arguments)}const w0=new Date,S0=new Date;function Rn(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const l=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let u;do l.push(u=new Date(+s)),e(s,a),t(s);while(u<s&&s<o);return l},i.filter=s=>Rn(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!s(o););else for(;--a>=0;)for(;e(o,1),!s(o););}),n&&(i.count=(s,o)=>(w0.setTime(+s),S0.setTime(+o),t(w0),t(S0),Math.floor(n(w0,S0))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const Lw=Rn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Lw.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Rn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Lw);Lw.range;const go=1e3,Gi=go*60,mo=Gi*60,Fo=mo*24,yO=Fo*7,OG=Fo*30,E0=Fo*365,ql=Rn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*go)},(t,e)=>(e-t)/go,t=>t.getUTCSeconds());ql.range;const CO=Rn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*go)},(t,e)=>{t.setTime(+t+e*Gi)},(t,e)=>(e-t)/Gi,t=>t.getMinutes());CO.range;const wO=Rn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Gi)},(t,e)=>(e-t)/Gi,t=>t.getUTCMinutes());wO.range;const SO=Rn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*go-t.getMinutes()*Gi)},(t,e)=>{t.setTime(+t+e*mo)},(t,e)=>(e-t)/mo,t=>t.getHours());SO.range;const EO=Rn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*mo)},(t,e)=>(e-t)/mo,t=>t.getUTCHours());EO.range;const Jm=Rn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Gi)/Fo,t=>t.getDate()-1);Jm.range;const lb=Rn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Fo,t=>t.getUTCDate()-1);lb.range;const FK=Rn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Fo,t=>Math.floor(t/Fo));FK.range;function tc(t){return Rn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Gi)/yO)}const ub=tc(0),kw=tc(1),gTe=tc(2),mTe=tc(3),jd=tc(4),vTe=tc(5),yTe=tc(6);ub.range;kw.range;gTe.range;mTe.range;jd.range;vTe.range;yTe.range;function nc(t){return Rn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/yO)}const cb=nc(0),Gw=nc(1),CTe=nc(2),wTe=nc(3),Ud=nc(4),STe=nc(5),ETe=nc(6);cb.range;Gw.range;CTe.range;wTe.range;Ud.range;STe.range;ETe.range;const bO=Rn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());bO.range;const TO=Rn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());TO.range;const No=Rn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());No.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Rn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});No.range;const Lo=Rn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Lo.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Rn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Lo.range;function NK(t,e,n,r,i,s){const o=[[ql,1,go],[ql,5,5*go],[ql,15,15*go],[ql,30,30*go],[s,1,Gi],[s,5,5*Gi],[s,15,15*Gi],[s,30,30*Gi],[i,1,mo],[i,3,3*mo],[i,6,6*mo],[i,12,12*mo],[r,1,Fo],[r,2,2*Fo],[n,1,yO],[e,1,OG],[e,3,3*OG],[t,1,E0]];function a(u,c,d){const h=c<u;h&&([u,c]=[c,u]);const f=d&&typeof d.range=="function"?d:l(u,c,d),g=f?f.range(u,+c+1):[];return h?g.reverse():g}function l(u,c,d){const h=Math.abs(c-u)/d,f=oO(([,,v])=>v).right(o,h);if(f===o.length)return t.every(vA(u/E0,c/E0,d));if(f===0)return Lw.every(Math.max(vA(u,c,d),1));const[g,m]=o[h/o[f-1][2]<o[f][2]/h?f-1:f];return g.every(m)}return[a,l]}const[bTe,TTe]=NK(Lo,TO,cb,FK,EO,wO),[RTe,_Te]=NK(No,bO,ub,Jm,SO,CO);function b0(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function T0(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function _p(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function ATe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,u=Ap(i),c=xp(i),d=Ap(s),h=xp(s),f=Ap(o),g=xp(o),m=Ap(a),v=xp(a),C=Ap(l),y=xp(l),S={a:q,A:B,b:U,B:K,c:null,d:GG,e:GG,f:QTe,g:o0e,G:l0e,H:KTe,I:qTe,j:YTe,L:LK,m:XTe,M:JTe,p:ie,q:Q,Q:BG,s:$G,S:ZTe,u:e0e,U:t0e,V:n0e,w:r0e,W:i0e,x:null,X:null,y:s0e,Y:a0e,Z:u0e,"%":HG},_={a:se,A:Me,b:Ee,B:qe,c:null,d:VG,e:VG,f:p0e,g:b0e,G:R0e,H:c0e,I:d0e,j:h0e,L:GK,m:f0e,M:g0e,p:Ye,q:bt,Q:BG,s:$G,S:m0e,u:v0e,U:y0e,V:C0e,w:w0e,W:S0e,x:null,X:null,y:E0e,Y:T0e,Z:_0e,"%":HG},E={a:F,A:k,b:L,B:N,c:W,d:LG,e:LG,f:WTe,g:NG,G:FG,H:kG,I:kG,j:VTe,L:$Te,m:GTe,M:HTe,p:P,q:kTe,Q:UTe,s:zTe,S:BTe,u:OTe,U:MTe,V:FTe,w:DTe,W:NTe,x:j,X:z,y:NG,Y:FG,Z:LTe,"%":jTe};S.x=R(n,S),S.X=R(r,S),S.c=R(e,S),_.x=R(n,_),_.X=R(r,_),_.c=R(e,_);function R(de,xe){return function(fe){var Z=[],Fe=-1,pe=0,ke=de.length,Ze,yt,_n;for(fe instanceof Date||(fe=new Date(+fe));++Fe<ke;)de.charCodeAt(Fe)===37&&(Z.push(de.slice(pe,Fe)),(yt=MG[Ze=de.charAt(++Fe)])!=null?Ze=de.charAt(++Fe):yt=Ze==="e"?" ":"0",(_n=xe[Ze])&&(Ze=_n(fe,yt)),Z.push(Ze),pe=Fe+1);return Z.push(de.slice(pe,Fe)),Z.join("")}}function b(de,xe){return function(fe){var Z=_p(1900,void 0,1),Fe=A(Z,de,fe+="",0),pe,ke;if(Fe!=fe.length)return null;if("Q"in Z)return new Date(Z.Q);if("s"in Z)return new Date(Z.s*1e3+("L"in Z?Z.L:0));if(xe&&!("Z"in Z)&&(Z.Z=0),"p"in Z&&(Z.H=Z.H%12+Z.p*12),Z.m===void 0&&(Z.m="q"in Z?Z.q:0),"V"in Z){if(Z.V<1||Z.V>53)return null;"w"in Z||(Z.w=1),"Z"in Z?(pe=T0(_p(Z.y,0,1)),ke=pe.getUTCDay(),pe=ke>4||ke===0?Gw.ceil(pe):Gw(pe),pe=lb.offset(pe,(Z.V-1)*7),Z.y=pe.getUTCFullYear(),Z.m=pe.getUTCMonth(),Z.d=pe.getUTCDate()+(Z.w+6)%7):(pe=b0(_p(Z.y,0,1)),ke=pe.getDay(),pe=ke>4||ke===0?kw.ceil(pe):kw(pe),pe=Jm.offset(pe,(Z.V-1)*7),Z.y=pe.getFullYear(),Z.m=pe.getMonth(),Z.d=pe.getDate()+(Z.w+6)%7)}else("W"in Z||"U"in Z)&&("w"in Z||(Z.w="u"in Z?Z.u%7:"W"in Z?1:0),ke="Z"in Z?T0(_p(Z.y,0,1)).getUTCDay():b0(_p(Z.y,0,1)).getDay(),Z.m=0,Z.d="W"in Z?(Z.w+6)%7+Z.W*7-(ke+5)%7:Z.w+Z.U*7-(ke+6)%7);return"Z"in Z?(Z.H+=Z.Z/100|0,Z.M+=Z.Z%100,T0(Z)):b0(Z)}}function A(de,xe,fe,Z){for(var Fe=0,pe=xe.length,ke=fe.length,Ze,yt;Fe<pe;){if(Z>=ke)return-1;if(Ze=xe.charCodeAt(Fe++),Ze===37){if(Ze=xe.charAt(Fe++),yt=E[Ze in MG?xe.charAt(Fe++):Ze],!yt||(Z=yt(de,fe,Z))<0)return-1}else if(Ze!=fe.charCodeAt(Z++))return-1}return Z}function P(de,xe,fe){var Z=u.exec(xe.slice(fe));return Z?(de.p=c.get(Z[0].toLowerCase()),fe+Z[0].length):-1}function F(de,xe,fe){var Z=f.exec(xe.slice(fe));return Z?(de.w=g.get(Z[0].toLowerCase()),fe+Z[0].length):-1}function k(de,xe,fe){var Z=d.exec(xe.slice(fe));return Z?(de.w=h.get(Z[0].toLowerCase()),fe+Z[0].length):-1}function L(de,xe,fe){var Z=C.exec(xe.slice(fe));return Z?(de.m=y.get(Z[0].toLowerCase()),fe+Z[0].length):-1}function N(de,xe,fe){var Z=m.exec(xe.slice(fe));return Z?(de.m=v.get(Z[0].toLowerCase()),fe+Z[0].length):-1}function W(de,xe,fe){return A(de,e,xe,fe)}function j(de,xe,fe){return A(de,n,xe,fe)}function z(de,xe,fe){return A(de,r,xe,fe)}function q(de){return o[de.getDay()]}function B(de){return s[de.getDay()]}function U(de){return l[de.getMonth()]}function K(de){return a[de.getMonth()]}function ie(de){return i[+(de.getHours()>=12)]}function Q(de){return 1+~~(de.getMonth()/3)}function se(de){return o[de.getUTCDay()]}function Me(de){return s[de.getUTCDay()]}function Ee(de){return l[de.getUTCMonth()]}function qe(de){return a[de.getUTCMonth()]}function Ye(de){return i[+(de.getUTCHours()>=12)]}function bt(de){return 1+~~(de.getUTCMonth()/3)}return{format:function(de){var xe=R(de+="",S);return xe.toString=function(){return de},xe},parse:function(de){var xe=b(de+="",!1);return xe.toString=function(){return de},xe},utcFormat:function(de){var xe=R(de+="",_);return xe.toString=function(){return de},xe},utcParse:function(de){var xe=b(de+="",!0);return xe.toString=function(){return de},xe}}}var MG={"-":"",_:" ",0:"0"},Ln=/^\s*\d+/,xTe=/^%/,PTe=/[\\^$*+?|[\]().{}]/g;function lt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function ITe(t){return t.replace(PTe,"\\$&")}function Ap(t){return new RegExp("^(?:"+t.map(ITe).join("|")+")","i")}function xp(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function DTe(t,e,n){var r=Ln.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function OTe(t,e,n){var r=Ln.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function MTe(t,e,n){var r=Ln.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function FTe(t,e,n){var r=Ln.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function NTe(t,e,n){var r=Ln.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function FG(t,e,n){var r=Ln.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function NG(t,e,n){var r=Ln.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function LTe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function kTe(t,e,n){var r=Ln.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function GTe(t,e,n){var r=Ln.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function LG(t,e,n){var r=Ln.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function VTe(t,e,n){var r=Ln.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function kG(t,e,n){var r=Ln.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function HTe(t,e,n){var r=Ln.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function BTe(t,e,n){var r=Ln.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function $Te(t,e,n){var r=Ln.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function WTe(t,e,n){var r=Ln.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function jTe(t,e,n){var r=xTe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function UTe(t,e,n){var r=Ln.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function zTe(t,e,n){var r=Ln.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function GG(t,e){return lt(t.getDate(),e,2)}function KTe(t,e){return lt(t.getHours(),e,2)}function qTe(t,e){return lt(t.getHours()%12||12,e,2)}function YTe(t,e){return lt(1+Jm.count(No(t),t),e,3)}function LK(t,e){return lt(t.getMilliseconds(),e,3)}function QTe(t,e){return LK(t,e)+"000"}function XTe(t,e){return lt(t.getMonth()+1,e,2)}function JTe(t,e){return lt(t.getMinutes(),e,2)}function ZTe(t,e){return lt(t.getSeconds(),e,2)}function e0e(t){var e=t.getDay();return e===0?7:e}function t0e(t,e){return lt(ub.count(No(t)-1,t),e,2)}function kK(t){var e=t.getDay();return e>=4||e===0?jd(t):jd.ceil(t)}function n0e(t,e){return t=kK(t),lt(jd.count(No(t),t)+(No(t).getDay()===4),e,2)}function r0e(t){return t.getDay()}function i0e(t,e){return lt(kw.count(No(t)-1,t),e,2)}function s0e(t,e){return lt(t.getFullYear()%100,e,2)}function o0e(t,e){return t=kK(t),lt(t.getFullYear()%100,e,2)}function a0e(t,e){return lt(t.getFullYear()%1e4,e,4)}function l0e(t,e){var n=t.getDay();return t=n>=4||n===0?jd(t):jd.ceil(t),lt(t.getFullYear()%1e4,e,4)}function u0e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+lt(e/60|0,"0",2)+lt(e%60,"0",2)}function VG(t,e){return lt(t.getUTCDate(),e,2)}function c0e(t,e){return lt(t.getUTCHours(),e,2)}function d0e(t,e){return lt(t.getUTCHours()%12||12,e,2)}function h0e(t,e){return lt(1+lb.count(Lo(t),t),e,3)}function GK(t,e){return lt(t.getUTCMilliseconds(),e,3)}function p0e(t,e){return GK(t,e)+"000"}function f0e(t,e){return lt(t.getUTCMonth()+1,e,2)}function g0e(t,e){return lt(t.getUTCMinutes(),e,2)}function m0e(t,e){return lt(t.getUTCSeconds(),e,2)}function v0e(t){var e=t.getUTCDay();return e===0?7:e}function y0e(t,e){return lt(cb.count(Lo(t)-1,t),e,2)}function VK(t){var e=t.getUTCDay();return e>=4||e===0?Ud(t):Ud.ceil(t)}function C0e(t,e){return t=VK(t),lt(Ud.count(Lo(t),t)+(Lo(t).getUTCDay()===4),e,2)}function w0e(t){return t.getUTCDay()}function S0e(t,e){return lt(Gw.count(Lo(t)-1,t),e,2)}function E0e(t,e){return lt(t.getUTCFullYear()%100,e,2)}function b0e(t,e){return t=VK(t),lt(t.getUTCFullYear()%100,e,2)}function T0e(t,e){return lt(t.getUTCFullYear()%1e4,e,4)}function R0e(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Ud(t):Ud.ceil(t),lt(t.getUTCFullYear()%1e4,e,4)}function _0e(){return"+0000"}function HG(){return"%"}function BG(t){return+t}function $G(t){return Math.floor(+t/1e3)}var cc,HK,BK;A0e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function A0e(t){return cc=ATe(t),HK=cc.format,cc.parse,BK=cc.utcFormat,cc.utcParse,cc}function x0e(t){return new Date(t)}function P0e(t){return t instanceof Date?+t:+new Date(+t)}function RO(t,e,n,r,i,s,o,a,l,u){var c=dO(),d=c.invert,h=c.domain,f=u(".%L"),g=u(":%S"),m=u("%I:%M"),v=u("%I %p"),C=u("%a %d"),y=u("%b %d"),S=u("%B"),_=u("%Y");function E(R){return(l(R)<R?f:a(R)<R?g:o(R)<R?m:s(R)<R?v:r(R)<R?i(R)<R?C:y:n(R)<R?S:_)(R)}return c.invert=function(R){return new Date(d(R))},c.domain=function(R){return arguments.length?h(Array.from(R,P0e)):h().map(x0e)},c.ticks=function(R){var b=h();return t(b[0],b[b.length-1],R??10)},c.tickFormat=function(R,b){return b==null?E:u(b)},c.nice=function(R){var b=h();return(!R||typeof R.range!="function")&&(R=e(b[0],b[b.length-1],R??10)),R?h(AK(b,R)):c},c.copy=function(){return Xm(c,RO(t,e,n,r,i,s,o,a,l,u))},c}function I0e(){return Qi.apply(RO(RTe,_Te,No,bO,ub,Jm,SO,CO,ql,HK).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function D0e(){return Qi.apply(RO(bTe,TTe,Lo,TO,cb,lb,EO,wO,ql,BK).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function db(){var t=0,e=1,n,r,i,s,o=Sr,a=!1,l;function u(d){return d==null||isNaN(d=+d)?l:o(i===0?.5:(d=(s(d)-n)*i,a?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([t,e]=d,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(d){return arguments.length?(a=!!d,u):a},u.interpolator=function(d){return arguments.length?(o=d,u):o};function c(d){return function(h){var f,g;return arguments.length?([f,g]=h,o=d(f,g),u):[o(0),o(1)]}}return u.range=c(Yh),u.rangeRound=c(cO),u.unknown=function(d){return arguments.length?(l=d,u):l},function(d){return s=d,n=d(t),r=d(e),i=n===r?0:1/(r-n),u}}function fl(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function $K(){var t=pl(db()(Sr));return t.copy=function(){return fl(t,$K())},Ko.apply(t,arguments)}function WK(){var t=fO(db()).domain([1,10]);return t.copy=function(){return fl(t,WK()).base(t.base())},Ko.apply(t,arguments)}function jK(){var t=gO(db());return t.copy=function(){return fl(t,jK()).constant(t.constant())},Ko.apply(t,arguments)}function _O(){var t=mO(db());return t.copy=function(){return fl(t,_O()).exponent(t.exponent())},Ko.apply(t,arguments)}function O0e(){return _O.apply(null,arguments).exponent(.5)}function UK(){var t=[],e=Sr;function n(r){if(r!=null&&!isNaN(r=+r))return e((Ym(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Va),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>ybe(t,s/r))},n.copy=function(){return UK(e).domain(t)},Ko.apply(n,arguments)}function hb(){var t=0,e=.5,n=1,r=1,i,s,o,a,l,u=Sr,c,d=!1,h;function f(m){return isNaN(m=+m)?h:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:l),u(d?Math.max(0,Math.min(1,m)):m))}f.domain=function(m){return arguments.length?([t,e,n]=m,i=c(t=+t),s=c(e=+e),o=c(n=+n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,f):[t,e,n]},f.clamp=function(m){return arguments.length?(d=!!m,f):d},f.interpolator=function(m){return arguments.length?(u=m,f):u};function g(m){return function(v){var C,y,S;return arguments.length?([C,y,S]=v,u=jbe(m,[C,y,S]),f):[u(0),u(.5),u(1)]}}return f.range=g(Yh),f.rangeRound=g(cO),f.unknown=function(m){return arguments.length?(h=m,f):h},function(m){return c=m,i=m(t),s=m(e),o=m(n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,f}}function zK(){var t=pl(hb()(Sr));return t.copy=function(){return fl(t,zK())},Ko.apply(t,arguments)}function KK(){var t=fO(hb()).domain([.1,1,10]);return t.copy=function(){return fl(t,KK()).base(t.base())},Ko.apply(t,arguments)}function qK(){var t=gO(hb());return t.copy=function(){return fl(t,qK()).constant(t.constant())},Ko.apply(t,arguments)}function AO(){var t=mO(hb());return t.copy=function(){return fl(t,AO()).exponent(t.exponent())},Ko.apply(t,arguments)}function M0e(){return AO.apply(null,arguments).exponent(.5)}const WG=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Lg,scaleDiverging:zK,scaleDivergingLog:KK,scaleDivergingPow:AO,scaleDivergingSqrt:M0e,scaleDivergingSymlog:qK,scaleIdentity:_K,scaleImplicit:yA,scaleLinear:Nw,scaleLog:xK,scaleOrdinal:aO,scalePoint:Cf,scalePow:vO,scaleQuantile:DK,scaleQuantize:OK,scaleRadial:IK,scaleSequential:$K,scaleSequentialLog:WK,scaleSequentialPow:_O,scaleSequentialQuantile:UK,scaleSequentialSqrt:O0e,scaleSequentialSymlog:jK,scaleSqrt:pTe,scaleSymlog:PK,scaleThreshold:MK,scaleTime:I0e,scaleUtc:D0e,tickFormat:RK},Symbol.toStringTag,{value:"Module"}));var F0e=Hh;function N0e(t,e,n){for(var r=-1,i=t.length;++r<i;){var s=t[r],o=e(s);if(o!=null&&(a===void 0?o===o&&!F0e(o):n(o,a)))var a=o,l=s}return l}var pb=N0e;function L0e(t,e){return t>e}var YK=L0e,k0e=pb,G0e=YK,V0e=qh;function H0e(t){return t&&t.length?k0e(t,V0e,G0e):void 0}var B0e=H0e;const fb=gt(B0e);function $0e(t,e){return t<e}var QK=$0e,W0e=pb,j0e=QK,U0e=qh;function z0e(t){return t&&t.length?W0e(t,U0e,j0e):void 0}var K0e=z0e;const gb=gt(K0e);var q0e=HD,Y0e=Zs,Q0e=sK,X0e=Zr;function J0e(t,e){var n=X0e(t)?q0e:Q0e;return n(t,Y0e(e))}var Z0e=J0e,eRe=rK,tRe=Z0e;function nRe(t,e){return eRe(tRe(t,e),1)}var rRe=nRe;const iRe=gt(rRe);var sRe=tO;function oRe(t,e){return sRe(t,e)}var aRe=oRe;const Zm=gt(aRe);var Qh=1e9,lRe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},PO,zt=!0,zi="[DecimalError] ",uu=zi+"Invalid argument: ",xO=zi+"Exponent out of range: ",Xh=Math.floor,Ol=Math.pow,uRe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,pi,xn=1e7,kt=7,XK=9007199254740991,Vw=Xh(XK/kt),ve={};ve.absoluteValue=ve.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};ve.comparedTo=ve.cmp=function(t){var e,n,r,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(r=s.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};ve.decimalPlaces=ve.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*kt;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};ve.dividedBy=ve.div=function(t){return So(this,new this.constructor(t))};ve.dividedToIntegerBy=ve.idiv=function(t){var e=this,n=e.constructor;return Et(So(e,new n(t),0,1),n.precision)};ve.equals=ve.eq=function(t){return!this.cmp(t)};ve.exponent=function(){return mn(this)};ve.greaterThan=ve.gt=function(t){return this.cmp(t)>0};ve.greaterThanOrEqualTo=ve.gte=function(t){return this.cmp(t)>=0};ve.isInteger=ve.isint=function(){return this.e>this.d.length-2};ve.isNegative=ve.isneg=function(){return this.s<0};ve.isPositive=ve.ispos=function(){return this.s>0};ve.isZero=function(){return this.s===0};ve.lessThan=ve.lt=function(t){return this.cmp(t)<0};ve.lessThanOrEqualTo=ve.lte=function(t){return this.cmp(t)<1};ve.logarithm=ve.log=function(t){var e,n=this,r=n.constructor,i=r.precision,s=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(pi))throw Error(zi+"NaN");if(n.s<1)throw Error(zi+(n.s?"NaN":"-Infinity"));return n.eq(pi)?new r(0):(zt=!1,e=So(Bg(n,s),Bg(t,s),s),zt=!0,Et(e,i))};ve.minus=ve.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?e5(e,t):JK(e,(t.s=-t.s,t))};ve.modulo=ve.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(zi+"NaN");return n.s?(zt=!1,e=So(n,t,0,1).times(t),zt=!0,n.minus(e)):Et(new r(n),i)};ve.naturalExponential=ve.exp=function(){return ZK(this)};ve.naturalLogarithm=ve.ln=function(){return Bg(this)};ve.negated=ve.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};ve.plus=ve.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?JK(e,t):e5(e,(t.s=-t.s,t))};ve.precision=ve.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(uu+t);if(e=mn(i)+1,r=i.d.length-1,n=r*kt+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};ve.squareRoot=ve.sqrt=function(){var t,e,n,r,i,s,o,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(zi+"NaN")}for(t=mn(a),zt=!1,i=Math.sqrt(+a),i==0||i==1/0?(e=Ms(a.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Xh((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=o=n+3;;)if(s=r,r=s.plus(So(a,s,o+2)).times(.5),Ms(s.d).slice(0,o)===(e=Ms(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(Et(s,n+1,0),s.times(s).eq(a)){r=s;break}}else if(e!="9999")break;o+=4}return zt=!0,Et(r,n)};ve.times=ve.mul=function(t){var e,n,r,i,s,o,a,l,u,c=this,d=c.constructor,h=c.d,f=(t=new d(t)).d;if(!c.s||!t.s)return new d(0);for(t.s*=c.s,n=c.e+t.e,l=h.length,u=f.length,l<u&&(s=h,h=f,f=s,o=l,l=u,u=o),s=[],o=l+u,r=o;r--;)s.push(0);for(r=u;--r>=0;){for(e=0,i=l+r;i>r;)a=s[i]+f[r]*h[i-r-1]+e,s[i--]=a%xn|0,e=a/xn|0;s[i]=(s[i]+e)%xn|0}for(;!s[--o];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,zt?Et(t,d.precision):t};ve.toDecimalPlaces=ve.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Ys(t,0,Qh),e===void 0?e=r.rounding:Ys(e,0,8),Et(n,t+mn(n)+1,e))};ve.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Fu(r,!0):(Ys(t,0,Qh),e===void 0?e=i.rounding:Ys(e,0,8),r=Et(new i(r),t+1,e),n=Fu(r,!0,t+1)),n};ve.toFixed=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?Fu(i):(Ys(t,0,Qh),e===void 0?e=s.rounding:Ys(e,0,8),r=Et(new s(i),t+mn(i)+1,e),n=Fu(r.abs(),!1,t+mn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};ve.toInteger=ve.toint=function(){var t=this,e=t.constructor;return Et(new e(t),mn(t)+1,e.rounding)};ve.toNumber=function(){return+this};ve.toPower=ve.pow=function(t){var e,n,r,i,s,o,a=this,l=a.constructor,u=12,c=+(t=new l(t));if(!t.s)return new l(pi);if(a=new l(a),!a.s){if(t.s<1)throw Error(zi+"Infinity");return a}if(a.eq(pi))return a;if(r=l.precision,t.eq(pi))return Et(a,r);if(e=t.e,n=t.d.length-1,o=e>=n,s=a.s,o){if((n=c<0?-c:c)<=XK){for(i=new l(pi),e=Math.ceil(r/kt+4),zt=!1;n%2&&(i=i.times(a),UG(i.d,e)),n=Xh(n/2),n!==0;)a=a.times(a),UG(a.d,e);return zt=!0,t.s<0?new l(pi).div(i):Et(i,r)}}else if(s<0)throw Error(zi+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,a.s=1,zt=!1,i=t.times(Bg(a,r+u)),zt=!0,i=ZK(i),i.s=s,i};ve.toPrecision=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?(n=mn(i),r=Fu(i,n<=s.toExpNeg||n>=s.toExpPos)):(Ys(t,1,Qh),e===void 0?e=s.rounding:Ys(e,0,8),i=Et(new s(i),t,e),n=mn(i),r=Fu(i,t<=n||n<=s.toExpNeg,t)),r};ve.toSignificantDigits=ve.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Ys(t,1,Qh),e===void 0?e=r.rounding:Ys(e,0,8)),Et(new r(n),t,e)};ve.toString=ve.valueOf=ve.val=ve.toJSON=ve[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=mn(t),n=t.constructor;return Fu(t,e<=n.toExpNeg||e>=n.toExpPos)};function JK(t,e){var n,r,i,s,o,a,l,u,c=t.constructor,d=c.precision;if(!t.s||!e.s)return e.s||(e=new c(t)),zt?Et(e,d):e;if(l=t.d,u=e.d,o=t.e,i=e.e,l=l.slice(),s=o-i,s){for(s<0?(r=l,s=-s,a=u.length):(r=u,i=o,a=l.length),o=Math.ceil(d/kt),a=o>a?o+1:a+1,s>a&&(s=a,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(a=l.length,s=u.length,a-s<0&&(s=a,r=u,u=l,l=r),n=0;s;)n=(l[--s]=l[s]+u[s]+n)/xn|0,l[s]%=xn;for(n&&(l.unshift(n),++i),a=l.length;l[--a]==0;)l.pop();return e.d=l,e.e=i,zt?Et(e,d):e}function Ys(t,e,n){if(t!==~~t||t<e||t>n)throw Error(uu+t)}function Ms(t){var e,n,r,i=t.length-1,s="",o=t[0];if(i>0){for(s+=o,e=1;e<i;e++)r=t[e]+"",n=kt-r.length,n&&(s+=aa(n)),s+=r;o=t[e],r=o+"",n=kt-r.length,n&&(s+=aa(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var So=function(){function t(r,i){var s,o=0,a=r.length;for(r=r.slice();a--;)s=r[a]*i+o,r[a]=s%xn|0,o=s/xn|0;return o&&r.unshift(o),r}function e(r,i,s,o){var a,l;if(s!=o)l=s>o?1:-1;else for(a=l=0;a<s;a++)if(r[a]!=i[a]){l=r[a]>i[a]?1:-1;break}return l}function n(r,i,s){for(var o=0;s--;)r[s]-=o,o=r[s]<i[s]?1:0,r[s]=o*xn+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,o){var a,l,u,c,d,h,f,g,m,v,C,y,S,_,E,R,b,A,P=r.constructor,F=r.s==i.s?1:-1,k=r.d,L=i.d;if(!r.s)return new P(r);if(!i.s)throw Error(zi+"Division by zero");for(l=r.e-i.e,b=L.length,E=k.length,f=new P(F),g=f.d=[],u=0;L[u]==(k[u]||0);)++u;if(L[u]>(k[u]||0)&&--l,s==null?y=s=P.precision:o?y=s+(mn(r)-mn(i))+1:y=s,y<0)return new P(0);if(y=y/kt+2|0,u=0,b==1)for(c=0,L=L[0],y++;(u<E||c)&&y--;u++)S=c*xn+(k[u]||0),g[u]=S/L|0,c=S%L|0;else{for(c=xn/(L[0]+1)|0,c>1&&(L=t(L,c),k=t(k,c),b=L.length,E=k.length),_=b,m=k.slice(0,b),v=m.length;v<b;)m[v++]=0;A=L.slice(),A.unshift(0),R=L[0],L[1]>=xn/2&&++R;do c=0,a=e(L,m,b,v),a<0?(C=m[0],b!=v&&(C=C*xn+(m[1]||0)),c=C/R|0,c>1?(c>=xn&&(c=xn-1),d=t(L,c),h=d.length,v=m.length,a=e(d,m,h,v),a==1&&(c--,n(d,b<h?A:L,h))):(c==0&&(a=c=1),d=L.slice()),h=d.length,h<v&&d.unshift(0),n(m,d,v),a==-1&&(v=m.length,a=e(L,m,b,v),a<1&&(c++,n(m,b<v?A:L,v))),v=m.length):a===0&&(c++,m=[0]),g[u++]=c,a&&m[0]?m[v++]=k[_]||0:(m=[k[_]],v=1);while((_++<E||m[0]!==void 0)&&y--)}return g[0]||g.shift(),f.e=l,Et(f,o?s+mn(f)+1:s)}}();function ZK(t,e){var n,r,i,s,o,a,l=0,u=0,c=t.constructor,d=c.precision;if(mn(t)>16)throw Error(xO+mn(t));if(!t.s)return new c(pi);for(zt=!1,a=d,o=new c(.03125);t.abs().gte(.1);)t=t.times(o),u+=5;for(r=Math.log(Ol(2,u))/Math.LN10*2+5|0,a+=r,n=i=s=new c(pi),c.precision=a;;){if(i=Et(i.times(t),a),n=n.times(++l),o=s.plus(So(i,n,a)),Ms(o.d).slice(0,a)===Ms(s.d).slice(0,a)){for(;u--;)s=Et(s.times(s),a);return c.precision=d,e==null?(zt=!0,Et(s,d)):s}s=o}}function mn(t){for(var e=t.e*kt,n=t.d[0];n>=10;n/=10)e++;return e}function R0(t,e,n){if(e>t.LN10.sd())throw zt=!0,n&&(t.precision=n),Error(zi+"LN10 precision limit exceeded");return Et(new t(t.LN10),e)}function aa(t){for(var e="";t--;)e+="0";return e}function Bg(t,e){var n,r,i,s,o,a,l,u,c,d=1,h=10,f=t,g=f.d,m=f.constructor,v=m.precision;if(f.s<1)throw Error(zi+(f.s?"NaN":"-Infinity"));if(f.eq(pi))return new m(0);if(e==null?(zt=!1,u=v):u=e,f.eq(10))return e==null&&(zt=!0),R0(m,u);if(u+=h,m.precision=u,n=Ms(g),r=n.charAt(0),s=mn(f),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)f=f.times(t),n=Ms(f.d),r=n.charAt(0),d++;s=mn(f),r>1?(f=new m("0."+n),s++):f=new m(r+"."+n.slice(1))}else return l=R0(m,u+2,v).times(s+""),f=Bg(new m(r+"."+n.slice(1)),u-h).plus(l),m.precision=v,e==null?(zt=!0,Et(f,v)):f;for(a=o=f=So(f.minus(pi),f.plus(pi),u),c=Et(f.times(f),u),i=3;;){if(o=Et(o.times(c),u),l=a.plus(So(o,new m(i),u)),Ms(l.d).slice(0,u)===Ms(a.d).slice(0,u))return a=a.times(2),s!==0&&(a=a.plus(R0(m,u+2,v).times(s+""))),a=So(a,new m(d),u),m.precision=v,e==null?(zt=!0,Et(a,v)):a;a=l,i+=2}}function jG(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Xh(n/kt),t.d=[],r=(n+1)%kt,n<0&&(r+=kt),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=kt;r<i;)t.d.push(+e.slice(r,r+=kt));e=e.slice(r),r=kt-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),zt&&(t.e>Vw||t.e<-Vw))throw Error(xO+n)}else t.s=0,t.e=0,t.d=[0];return t}function Et(t,e,n){var r,i,s,o,a,l,u,c,d=t.d;for(o=1,s=d[0];s>=10;s/=10)o++;if(r=e-o,r<0)r+=kt,i=e,u=d[c=0];else{if(c=Math.ceil((r+1)/kt),s=d.length,c>=s)return t;for(u=s=d[c],o=1;s>=10;s/=10)o++;r%=kt,i=r-kt+o}if(n!==void 0&&(s=Ol(10,o-i-1),a=u/s%10|0,l=e<0||d[c+1]!==void 0||u%s,l=n<4?(a||l)&&(n==0||n==(t.s<0?3:2)):a>5||a==5&&(n==4||l||n==6&&(r>0?i>0?u/Ol(10,o-i):0:d[c-1])%10&1||n==(t.s<0?8:7))),e<1||!d[0])return l?(s=mn(t),d.length=1,e=e-s-1,d[0]=Ol(10,(kt-e%kt)%kt),t.e=Xh(-e/kt)||0):(d.length=1,d[0]=t.e=t.s=0),t;if(r==0?(d.length=c,s=1,c--):(d.length=c+1,s=Ol(10,kt-r),d[c]=i>0?(u/Ol(10,o-i)%Ol(10,i)|0)*s:0),l)for(;;)if(c==0){(d[0]+=s)==xn&&(d[0]=1,++t.e);break}else{if(d[c]+=s,d[c]!=xn)break;d[c--]=0,s=1}for(r=d.length;d[--r]===0;)d.pop();if(zt&&(t.e>Vw||t.e<-Vw))throw Error(xO+mn(t));return t}function e5(t,e){var n,r,i,s,o,a,l,u,c,d,h=t.constructor,f=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),zt?Et(e,f):e;if(l=t.d,d=e.d,r=e.e,u=t.e,l=l.slice(),o=u-r,o){for(c=o<0,c?(n=l,o=-o,a=d.length):(n=d,r=u,a=l.length),i=Math.max(Math.ceil(f/kt),a)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=l.length,a=d.length,c=i<a,c&&(a=i),i=0;i<a;i++)if(l[i]!=d[i]){c=l[i]<d[i];break}o=0}for(c&&(n=l,l=d,d=n,e.s=-e.s),a=l.length,i=d.length-a;i>0;--i)l[a++]=0;for(i=d.length;i>o;){if(l[--i]<d[i]){for(s=i;s&&l[--s]===0;)l[s]=xn-1;--l[s],l[i]+=xn}l[i]-=d[i]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,zt?Et(e,f):e):new h(0)}function Fu(t,e,n){var r,i=mn(t),s=Ms(t.d),o=s.length;return e?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+aa(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+aa(-i-1)+s,n&&(r=n-o)>0&&(s+=aa(r))):i>=o?(s+=aa(i+1-o),n&&(r=n-i-1)>0&&(s=s+"."+aa(r))):((r=i+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(s+="."),s+=aa(r))),t.s<0?"-"+s:s}function UG(t,e){if(t.length>e)return t.length=e,!0}function t5(t){var e,n,r;function i(s){var o=this;if(!(o instanceof i))return new i(s);if(o.constructor=i,s instanceof i){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(uu+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return jG(o,s.toString())}else if(typeof s!="string")throw Error(uu+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,uRe.test(s))jG(o,s);else throw Error(uu+s)}if(i.prototype=ve,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=t5,i.config=i.set=cRe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function cRe(t){if(!t||typeof t!="object")throw Error(zi+"Object expected");var e,n,r,i=["precision",1,Qh,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Xh(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(uu+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(uu+n+": "+r);return this}var PO=t5(lRe);pi=new PO(1);const wt=PO;function dRe(t){return gRe(t)||fRe(t)||pRe(t)||hRe()}function hRe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pRe(t,e){if(t){if(typeof t=="string")return EA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return EA(t,e)}}function fRe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function gRe(t){if(Array.isArray(t))return EA(t)}function EA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var mRe=function(e){return e},n5={},r5=function(e){return e===n5},zG=function(e){return function n(){return arguments.length===0||arguments.length===1&&r5(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},vRe=function t(e,n){return e===1?n:zG(function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var o=i.filter(function(a){return a!==n5}).length;return o>=e?n.apply(void 0,i):t(e-o,zG(function(){for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];var c=i.map(function(d){return r5(d)?l.shift():d});return n.apply(void 0,dRe(c).concat(l))}))})},mb=function(e){return vRe(e.length,e)},bA=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},yRe=mb(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),CRe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return mRe;var i=n.reverse(),s=i[0],o=i.slice(1);return function(){return o.reduce(function(a,l){return l(a)},s.apply(void 0,arguments))}},TA=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},i5=function(e){var n=null,r=null;return function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return n&&s.every(function(a,l){return a===n[l]})||(n=s,r=e.apply(void 0,s)),r}};function wRe(t){var e;return t===0?e=1:e=Math.floor(new wt(t).abs().log(10).toNumber())+1,e}function SRe(t,e,n){for(var r=new wt(t),i=0,s=[];r.lt(e)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}var ERe=mb(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),bRe=mb(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),TRe=mb(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const vb={rangeStep:SRe,getDigitCount:wRe,interpolateNumber:ERe,uninterpolateNumber:bRe,uninterpolateTruncation:TRe};function RA(t){return ARe(t)||_Re(t)||s5(t)||RRe()}function RRe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _Re(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function ARe(t){if(Array.isArray(t))return _A(t)}function $g(t,e){return IRe(t)||PRe(t,e)||s5(t,e)||xRe()}function xRe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s5(t,e){if(t){if(typeof t=="string")return _A(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _A(t,e)}}function _A(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function PRe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,s=void 0;try{for(var o=t[Symbol.iterator](),a;!(r=(a=o.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,s=l}finally{try{!r&&o.return!=null&&o.return()}finally{if(i)throw s}}return n}}function IRe(t){if(Array.isArray(t))return t}function o5(t){var e=$g(t,2),n=e[0],r=e[1],i=n,s=r;return n>r&&(i=r,s=n),[i,s]}function a5(t,e,n){if(t.lte(0))return new wt(0);var r=vb.getDigitCount(t.toNumber()),i=new wt(10).pow(r),s=t.div(i),o=r!==1?.05:.1,a=new wt(Math.ceil(s.div(o).toNumber())).add(n).mul(o),l=a.mul(i);return e?l:new wt(Math.ceil(l))}function DRe(t,e,n){var r=1,i=new wt(t);if(!i.isint()&&n){var s=Math.abs(t);s<1?(r=new wt(10).pow(vb.getDigitCount(t)-1),i=new wt(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new wt(Math.floor(t)))}else t===0?i=new wt(Math.floor((e-1)/2)):n||(i=new wt(Math.floor(t)));var o=Math.floor((e-1)/2),a=CRe(yRe(function(l){return i.add(new wt(l-o).mul(r)).toNumber()}),bA);return a(0,e)}function l5(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new wt(0),tickMin:new wt(0),tickMax:new wt(0)};var s=a5(new wt(e).sub(t).div(n-1),r,i),o;t<=0&&e>=0?o=new wt(0):(o=new wt(t).add(e).div(2),o=o.sub(new wt(o).mod(s)));var a=Math.ceil(o.sub(t).div(s).toNumber()),l=Math.ceil(new wt(e).sub(o).div(s).toNumber()),u=a+l+1;return u>n?l5(t,e,n,r,i+1):(u<n&&(l=e>0?l+(n-u):l,a=e>0?a:a+(n-u)),{step:s,tickMin:o.sub(new wt(a).mul(s)),tickMax:o.add(new wt(l).mul(s))})}function ORe(t){var e=$g(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),a=o5([n,r]),l=$g(a,2),u=l[0],c=l[1];if(u===-1/0||c===1/0){var d=c===1/0?[u].concat(RA(bA(0,i-1).map(function(){return 1/0}))):[].concat(RA(bA(0,i-1).map(function(){return-1/0})),[c]);return n>r?TA(d):d}if(u===c)return DRe(u,i,s);var h=l5(u,c,o,s),f=h.step,g=h.tickMin,m=h.tickMax,v=vb.rangeStep(g,m.add(new wt(.1).mul(f)),f);return n>r?TA(v):v}function MRe(t,e){var n=$g(t,2),r=n[0],i=n[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=o5([r,i]),a=$g(o,2),l=a[0],u=a[1];if(l===-1/0||u===1/0)return[r,i];if(l===u)return[l];var c=Math.max(e,2),d=a5(new wt(u).sub(l).div(c-1),s,0),h=[].concat(RA(vb.rangeStep(new wt(l),new wt(u).sub(new wt(.99).mul(d)),d)),[u]);return r>i?TA(h):h}var FRe=i5(ORe),NRe=i5(MRe),LRe="Invariant failed";function Nu(t,e){throw new Error(LRe)}var kRe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function zd(t){"@babel/helpers - typeof";return zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zd(t)}function Hw(){return Hw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hw.apply(this,arguments)}function GRe(t,e){return $Re(t)||BRe(t,e)||HRe(t,e)||VRe()}function VRe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HRe(t,e){if(t){if(typeof t=="string")return KG(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return KG(t,e)}}function KG(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function BRe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function $Re(t){if(Array.isArray(t))return t}function WRe(t,e){if(t==null)return{};var n=jRe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function jRe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function URe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zRe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,d5(r.key),r)}}function KRe(t,e,n){return e&&zRe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function qRe(t,e,n){return e=Bw(e),YRe(t,u5()?Reflect.construct(e,n||[],Bw(t).constructor):e.apply(t,n))}function YRe(t,e){if(e&&(zd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QRe(t)}function QRe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(u5=function(){return!!t})()}function Bw(t){return Bw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Bw(t)}function XRe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AA(t,e)}function AA(t,e){return AA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},AA(t,e)}function c5(t,e,n){return e=d5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d5(t){var e=JRe(t,"string");return zd(e)=="symbol"?e:e+""}function JRe(t,e){if(zd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(zd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ev=function(t){function e(){return URe(this,e),qRe(this,e,arguments)}return XRe(e,t),KRe(e,[{key:"render",value:function(){var r=this.props,i=r.offset,s=r.layout,o=r.width,a=r.dataKey,l=r.data,u=r.dataPointFormatter,c=r.xAxis,d=r.yAxis,h=WRe(r,kRe),f=_e(h,!1);this.props.direction==="x"&&c.type!=="number"&&Nu();var g=l.map(function(m){var v=u(m,a),C=v.x,y=v.y,S=v.value,_=v.errorVal;if(!_)return null;var E=[],R,b;if(Array.isArray(_)){var A=GRe(_,2);R=A[0],b=A[1]}else R=b=_;if(s==="vertical"){var P=c.scale,F=y+i,k=F+o,L=F-o,N=P(S-R),W=P(S+b);E.push({x1:W,y1:k,x2:W,y2:L}),E.push({x1:N,y1:F,x2:W,y2:F}),E.push({x1:N,y1:k,x2:N,y2:L})}else if(s==="horizontal"){var j=d.scale,z=C+i,q=z-o,B=z+o,U=j(S-R),K=j(S+b);E.push({x1:q,y1:K,x2:B,y2:K}),E.push({x1:z,y1:U,x2:z,y2:K}),E.push({x1:q,y1:U,x2:B,y2:U})}return G.createElement(at,Hw({className:"recharts-errorBar",key:"bar-".concat(E.map(function(ie){return"".concat(ie.x1,"-").concat(ie.x2,"-").concat(ie.y1,"-").concat(ie.y2)}))},f),E.map(function(ie){return G.createElement("line",Hw({},ie,{key:"line-".concat(ie.x1,"-").concat(ie.x2,"-").concat(ie.y1,"-").concat(ie.y2)}))}))});return G.createElement(at,{className:"recharts-errorBars"},g)}}])}(G.Component);c5(ev,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});c5(ev,"displayName","ErrorBar");function Wg(t){"@babel/helpers - typeof";return Wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wg(t)}function qG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Sl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qG(Object(n),!0).forEach(function(r){ZRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ZRe(t,e,n){return e=e_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e_e(t){var e=t_e(t,"string");return Wg(e)=="symbol"?e:e+""}function t_e(t,e){if(Wg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Wg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var h5=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,s=e.legendContent,o=di(n,au);if(!o)return null;var a=au.defaultProps,l=a!==void 0?Sl(Sl({},a),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:s==="children"?u=(r||[]).reduce(function(c,d){var h=d.item,f=d.props,g=f.sectors||f.data||[];return c.concat(g.map(function(m){return{type:o.props.iconType||h.props.legendType,value:m.name,color:m.fill,payload:m}}))},[]):u=(r||[]).map(function(c){var d=c.item,h=d.type.defaultProps,f=h!==void 0?Sl(Sl({},h),d.props):{},g=f.dataKey,m=f.name,v=f.legendType,C=f.hide;return{inactive:C,dataKey:g,type:l.iconType||v||"square",color:IO(d),value:m||g,payload:f}}),Sl(Sl(Sl({},l),au.getWithHeight(o,i)),{},{payload:u,item:o})};function jg(t){"@babel/helpers - typeof";return jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jg(t)}function YG(t){return s_e(t)||i_e(t)||r_e(t)||n_e()}function n_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r_e(t,e){if(t){if(typeof t=="string")return xA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xA(t,e)}}function i_e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function s_e(t){if(Array.isArray(t))return xA(t)}function xA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function QG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Jt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QG(Object(n),!0).forEach(function(r){sd(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sd(t,e,n){return e=o_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o_e(t){var e=a_e(t,"string");return jg(e)=="symbol"?e:e+""}function a_e(t,e){if(jg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(jg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function En(t,e,n){return Le(t)||Le(e)?n:Tn(e)?yi(t,e,n):Oe(e)?e(t):n}function wf(t,e,n,r){var i=iRe(t,function(a){return En(a,e)});if(n==="number"){var s=i.filter(function(a){return le(a)||parseFloat(a)});return s.length?[gb(s),fb(s)]:[1/0,-1/0]}var o=r?i.filter(function(a){return!Le(a)}):i;return o.map(function(a){return Tn(a)||a instanceof Date?a:""})}var l_e=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,o=-1,a=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(a<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var l=s.range,u=0;u<a;u++){var c=u>0?i[u-1].coordinate:i[a-1].coordinate,d=i[u].coordinate,h=u>=a-1?i[0].coordinate:i[u+1].coordinate,f=void 0;if(Cr(d-c)!==Cr(h-d)){var g=[];if(Cr(h-d)===Cr(l[1]-l[0])){f=h;var m=d+l[1]-l[0];g[0]=Math.min(m,(m+c)/2),g[1]=Math.max(m,(m+c)/2)}else{f=c;var v=h+l[1]-l[0];g[0]=Math.min(d,(v+d)/2),g[1]=Math.max(d,(v+d)/2)}var C=[Math.min(d,(f+d)/2),Math.max(d,(f+d)/2)];if(e>C[0]&&e<=C[1]||e>=g[0]&&e<=g[1]){o=i[u].index;break}}else{var y=Math.min(c,h),S=Math.max(c,h);if(e>(y+d)/2&&e<=(S+d)/2){o=i[u].index;break}}}else for(var _=0;_<a;_++)if(_===0&&e<=(r[_].coordinate+r[_+1].coordinate)/2||_>0&&_<a-1&&e>(r[_].coordinate+r[_-1].coordinate)/2&&e<=(r[_].coordinate+r[_+1].coordinate)/2||_===a-1&&e>(r[_].coordinate+r[_-1].coordinate)/2){o=r[_].index;break}return o},IO=function(e){var n,r=e,i=r.type.displayName,s=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Jt(Jt({},e.type.defaultProps),e.props):e.props,o=s.stroke,a=s.fill,l;switch(i){case"Line":l=o;break;case"Area":case"Radar":l=o&&o!=="none"?o:a;break;default:l=a;break}return l},u_e=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,s=i===void 0?{}:i;if(!s)return{};for(var o={},a=Object.keys(s),l=0,u=a.length;l<u;l++)for(var c=s[a[l]].stackGroups,d=Object.keys(c),h=0,f=d.length;h<f;h++){var g=c[d[h]],m=g.items,v=g.cateAxisId,C=m.filter(function(b){return wo(b.type).indexOf("Bar")>=0});if(C&&C.length){var y=C[0].type.defaultProps,S=y!==void 0?Jt(Jt({},y),C[0].props):C[0].props,_=S.barSize,E=S[v];o[E]||(o[E]=[]);var R=Le(_)?n:_;o[E].push({item:C[0],stackList:C.slice(1),barSize:Le(R)?void 0:wr(R,r,0)})}}return o},c_e=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,s=e.sizeList,o=s===void 0?[]:s,a=e.maxBarSize,l=o.length;if(l<1)return null;var u=wr(n,i,0,!0),c,d=[];if(o[0].barSize===+o[0].barSize){var h=!1,f=i/l,g=o.reduce(function(_,E){return _+E.barSize||0},0);g+=(l-1)*u,g>=i&&(g-=(l-1)*u,u=0),g>=i&&f>0&&(h=!0,f*=.9,g=l*f);var m=(i-g)/2>>0,v={offset:m-u,size:0};c=o.reduce(function(_,E){var R={item:E.item,position:{offset:v.offset+v.size+u,size:h?f:E.barSize}},b=[].concat(YG(_),[R]);return v=b[b.length-1].position,E.stackList&&E.stackList.length&&E.stackList.forEach(function(A){b.push({item:A,position:v})}),b},d)}else{var C=wr(r,i,0,!0);i-2*C-(l-1)*u<=0&&(u=0);var y=(i-2*C-(l-1)*u)/l;y>1&&(y>>=0);var S=a===+a?Math.min(y,a):y;c=o.reduce(function(_,E,R){var b=[].concat(YG(_),[{item:E.item,position:{offset:C+(y+u)*R+(y-S)/2,size:S}}]);return E.stackList&&E.stackList.length&&E.stackList.forEach(function(A){b.push({item:A,position:b[b.length-1].position})}),b},d)}return c},d_e=function(e,n,r,i){var s=r.children,o=r.width,a=r.margin,l=o-(a.left||0)-(a.right||0),u=h5({children:s,legendWidth:l});if(u){var c=i||{},d=c.width,h=c.height,f=u.align,g=u.verticalAlign,m=u.layout;if((m==="vertical"||m==="horizontal"&&g==="middle")&&f!=="center"&&le(e[f]))return Jt(Jt({},e),{},sd({},f,e[f]+(d||0)));if((m==="horizontal"||m==="vertical"&&f==="center")&&g!=="middle"&&le(e[g]))return Jt(Jt({},e),{},sd({},g,e[g]+(h||0)))}return e},h_e=function(e,n,r){return Le(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},p5=function(e,n,r,i,s){var o=n.props.children,a=Ci(o,ev).filter(function(u){return h_e(i,s,u.props.direction)});if(a&&a.length){var l=a.map(function(u){return u.props.dataKey});return e.reduce(function(u,c){var d=En(c,r);if(Le(d))return u;var h=Array.isArray(d)?[gb(d),fb(d)]:[d,d],f=l.reduce(function(g,m){var v=En(c,m,0),C=h[0]-Math.abs(Array.isArray(v)?v[0]:v),y=h[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(C,g[0]),Math.max(y,g[1])]},[1/0,-1/0]);return[Math.min(f[0],u[0]),Math.max(f[1],u[1])]},[1/0,-1/0])}return null},p_e=function(e,n,r,i,s){var o=n.map(function(a){return p5(e,a,r,s,i)}).filter(function(a){return!Le(a)});return o&&o.length?o.reduce(function(a,l){return[Math.min(a[0],l[0]),Math.max(a[1],l[1])]},[1/0,-1/0]):null},f5=function(e,n,r,i,s){var o=n.map(function(l){var u=l.props.dataKey;return r==="number"&&u&&p5(e,l,u,i)||wf(e,u,r,s)});if(r==="number")return o.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var a={};return o.reduce(function(l,u){for(var c=0,d=u.length;c<d;c++)a[u[c]]||(a[u[c]]=!0,l.push(u[c]));return l},[])},g5=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},m5=function(e,n,r,i){if(i)return e.map(function(l){return l.coordinate});var s,o,a=e.map(function(l){return l.coordinate===n&&(s=!0),l.coordinate===r&&(o=!0),l.coordinate});return s||a.push(n),o||a.push(r),a},vo=function(e,n,r){if(!e)return null;var i=e.scale,s=e.duplicateDomain,o=e.type,a=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(n||r)&&o==="category"&&i.bandwidth?i.bandwidth()/l:0;if(u=e.axisType==="angleAxis"&&(a==null?void 0:a.length)>=2?Cr(a[0]-a[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var c=(e.ticks||e.niceTicks).map(function(d){var h=s?s.indexOf(d):d;return{coordinate:i(h)+u,value:d,offset:u}});return c.filter(function(d){return!Km(d.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(d,h){return{coordinate:i(d)+u,value:d,index:h,offset:u}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(d){return{coordinate:i(d)+u,value:d,offset:u}}):i.domain().map(function(d,h){return{coordinate:i(d)+u,value:s?s[d]:d,index:h,offset:u}})},_0=new WeakMap,ry=function(e,n){if(typeof n!="function")return e;_0.has(e)||_0.set(e,new WeakMap);var r=_0.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},v5=function(e,n,r){var i=e.scale,s=e.type,o=e.layout,a=e.axisType;if(i==="auto")return o==="radial"&&a==="radiusAxis"?{scale:Lg(),realScaleType:"band"}:o==="radial"&&a==="angleAxis"?{scale:Nw(),realScaleType:"linear"}:s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Cf(),realScaleType:"point"}:s==="category"?{scale:Lg(),realScaleType:"band"}:{scale:Nw(),realScaleType:"linear"};if(Du(i)){var l="scale".concat(ZE(i));return{scale:(WG[l]||Cf)(),realScaleType:WG[l]?l:"point"}}return Oe(i)?{scale:i}:{scale:Cf(),realScaleType:"point"}},XG=1e-4,y5=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),s=Math.min(i[0],i[1])-XG,o=Math.max(i[0],i[1])+XG,a=e(n[0]),l=e(n[r-1]);(a<s||a>o||l<s||l>o)&&e.domain([n[0],n[r-1]])}},f_e=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},g_e=function(e,n){if(!n||n.length!==2||!le(n[0])||!le(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),s=[e[0],e[1]];return(!le(e[0])||e[0]<r)&&(s[0]=r),(!le(e[1])||e[1]>i)&&(s[1]=i),s[0]>i&&(s[0]=i),s[1]<r&&(s[1]=r),s},m_e=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var s=0,o=0,a=0;a<n;++a){var l=Km(e[a][r][1])?e[a][r][0]:e[a][r][1];l>=0?(e[a][r][0]=s,e[a][r][1]=s+l,s=e[a][r][1]):(e[a][r][0]=o,e[a][r][1]=o+l,o=e[a][r][1])}},v_e=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var s=0,o=0;o<n;++o){var a=Km(e[o][r][1])?e[o][r][0]:e[o][r][1];a>=0?(e[o][r][0]=s,e[o][r][1]=s+a,s=e[o][r][1]):(e[o][r][0]=0,e[o][r][1]=0)}},y_e={sign:m_e,expand:kpe,none:Gd,silhouette:Gpe,wiggle:Vpe,positive:v_e},C_e=function(e,n,r){var i=n.map(function(a){return a.props.dataKey}),s=y_e[r],o=Lpe().keys(i).value(function(a,l){return+En(a,l,0)}).order(Z_).offset(s);return o(e)},w_e=function(e,n,r,i,s,o){if(!e)return null;var a=o?n.reverse():n,l={},u=a.reduce(function(d,h){var f,g=(f=h.type)!==null&&f!==void 0&&f.defaultProps?Jt(Jt({},h.type.defaultProps),h.props):h.props,m=g.stackId,v=g.hide;if(v)return d;var C=g[r],y=d[C]||{hasStack:!1,stackGroups:{}};if(Tn(m)){var S=y.stackGroups[m]||{numericAxisId:r,cateAxisId:i,items:[]};S.items.push(h),y.hasStack=!0,y.stackGroups[m]=S}else y.stackGroups[Uh("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[h]};return Jt(Jt({},d),{},sd({},C,y))},l),c={};return Object.keys(u).reduce(function(d,h){var f=u[h];if(f.hasStack){var g={};f.stackGroups=Object.keys(f.stackGroups).reduce(function(m,v){var C=f.stackGroups[v];return Jt(Jt({},m),{},sd({},v,{numericAxisId:r,cateAxisId:i,items:C.items,stackedData:C_e(e,C.items,s)}))},g)}return Jt(Jt({},d),{},sd({},h,f))},c)},C5=function(e,n){var r=n.realScaleType,i=n.type,s=n.tickCount,o=n.originalDomain,a=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(s&&i==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=e.domain();if(!u.length)return null;var c=FRe(u,s,a);return e.domain([gb(c),fb(c)]),{niceTicks:c}}if(s&&i==="number"){var d=e.domain(),h=NRe(d,s,a);return{niceTicks:h}}return null};function JG(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,s=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Le(i[e.dataKey])){var a=pw(n,"value",i[e.dataKey]);if(a)return a.coordinate+r/2}return n[s]?n[s].coordinate+r/2:null}var l=En(i,Le(o)?e.dataKey:o);return Le(l)?null:e.scale(l)}var ZG=function(e){var n=e.axis,r=e.ticks,i=e.offset,s=e.bandSize,o=e.entry,a=e.index;if(n.type==="category")return r[a]?r[a].coordinate+i:null;var l=En(o,n.dataKey,n.domain[a]);return Le(l)?null:n.scale(l)-s/2+i},S_e=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return i<=0&&s>=0?0:s<0?s:i}return r[0]},E_e=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Jt(Jt({},e.type.defaultProps),e.props):e.props,s=i.stackId;if(Tn(s)){var o=n[s];if(o){var a=o.items.indexOf(e);return a>=0?o.stackedData[a]:null}}return null},b_e=function(e){return e.reduce(function(n,r){return[gb(r.concat([n[0]]).filter(le)),fb(r.concat([n[1]]).filter(le))]},[1/0,-1/0])},w5=function(e,n,r){return Object.keys(e).reduce(function(i,s){var o=e[s],a=o.stackedData,l=a.reduce(function(u,c){var d=b_e(c.slice(n,r+1));return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},eV=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,tV=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,PA=function(e,n,r){if(Oe(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(le(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(eV.test(e[0])){var s=+eV.exec(e[0])[1];i[0]=n[0]-s}else Oe(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(le(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(tV.test(e[1])){var o=+tV.exec(e[1])[1];i[1]=n[1]+o}else Oe(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},$w=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var s=rO(n,function(d){return d.coordinate}),o=1/0,a=1,l=s.length;a<l;a++){var u=s[a],c=s[a-1];o=Math.min((u.coordinate||0)-(c.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},nV=function(e,n,r){return!e||!e.length||Zm(e,yi(r,"type.defaultProps.domain"))?n:e},S5=function(e,n){var r=e.type.defaultProps?Jt(Jt({},e.type.defaultProps),e.props):e.props,i=r.dataKey,s=r.name,o=r.unit,a=r.formatter,l=r.tooltipType,u=r.chartType,c=r.hide;return Jt(Jt({},_e(e,!1)),{},{dataKey:i,unit:o,formatter:a,name:s||i,color:IO(e),value:En(n,i),type:l,payload:n,chartType:u,hide:c})};function Ug(t){"@babel/helpers - typeof";return Ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ug(t)}function rV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function so(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rV(Object(n),!0).forEach(function(r){E5(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function E5(t,e,n){return e=T_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T_e(t){var e=R_e(t,"string");return Ug(e)=="symbol"?e:e+""}function R_e(t,e){if(Ug(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ug(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function __e(t,e){return I_e(t)||P_e(t,e)||x_e(t,e)||A_e()}function A_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function x_e(t,e){if(t){if(typeof t=="string")return iV(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iV(t,e)}}function iV(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function P_e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function I_e(t){if(Array.isArray(t))return t}var Ww=Math.PI/180,D_e=function(e){return e*180/Math.PI},Ot=function(e,n,r,i){return{x:e+Math.cos(-Ww*i)*r,y:n+Math.sin(-Ww*i)*r}},b5=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},O_e=function(e,n,r,i,s){var o=e.width,a=e.height,l=e.startAngle,u=e.endAngle,c=wr(e.cx,o,o/2),d=wr(e.cy,a,a/2),h=b5(o,a,r),f=wr(e.innerRadius,h,0),g=wr(e.outerRadius,h,h*.8),m=Object.keys(n);return m.reduce(function(v,C){var y=n[C],S=y.domain,_=y.reversed,E;if(Le(y.range))i==="angleAxis"?E=[l,u]:i==="radiusAxis"&&(E=[f,g]),_&&(E=[E[1],E[0]]);else{E=y.range;var R=E,b=__e(R,2);l=b[0],u=b[1]}var A=v5(y,s),P=A.realScaleType,F=A.scale;F.domain(S).range(E),y5(F);var k=C5(F,so(so({},y),{},{realScaleType:P})),L=so(so(so({},y),k),{},{range:E,radius:g,realScaleType:P,scale:F,cx:c,cy:d,innerRadius:f,outerRadius:g,startAngle:l,endAngle:u});return so(so({},v),{},E5({},C,L))},{})},M_e=function(e,n){var r=e.x,i=e.y,s=n.x,o=n.y;return Math.sqrt(Math.pow(r-s,2)+Math.pow(i-o,2))},F_e=function(e,n){var r=e.x,i=e.y,s=n.cx,o=n.cy,a=M_e({x:r,y:i},{x:s,y:o});if(a<=0)return{radius:a};var l=(r-s)/a,u=Math.acos(l);return i>o&&(u=2*Math.PI-u),{radius:a,angle:D_e(u),angleInRadian:u}},N_e=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),s=Math.floor(r/360),o=Math.min(i,s);return{startAngle:n-o*360,endAngle:r-o*360}},L_e=function(e,n){var r=n.startAngle,i=n.endAngle,s=Math.floor(r/360),o=Math.floor(i/360),a=Math.min(s,o);return e+a*360},sV=function(e,n){var r=e.x,i=e.y,s=F_e({x:r,y:i},n),o=s.radius,a=s.angle,l=n.innerRadius,u=n.outerRadius;if(o<l||o>u)return!1;if(o===0)return!0;var c=N_e(n),d=c.startAngle,h=c.endAngle,f=a,g;if(d<=h){for(;f>h;)f-=360;for(;f<d;)f+=360;g=f>=d&&f<=h}else{for(;f>d;)f-=360;for(;f<h;)f+=360;g=f>=h&&f<=d}return g?so(so({},n),{},{radius:o,angle:L_e(f,n)}):null},T5=function(e){return!I.isValidElement(e)&&!Oe(e)&&typeof e!="boolean"?e.className:""};function zg(t){"@babel/helpers - typeof";return zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zg(t)}var k_e=["offset"];function G_e(t){return $_e(t)||B_e(t)||H_e(t)||V_e()}function V_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function H_e(t,e){if(t){if(typeof t=="string")return IA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IA(t,e)}}function B_e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function $_e(t){if(Array.isArray(t))return IA(t)}function IA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function W_e(t,e){if(t==null)return{};var n=j_e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function j_e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function oV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Cn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oV(Object(n),!0).forEach(function(r){U_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function U_e(t,e,n){return e=z_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function z_e(t){var e=K_e(t,"string");return zg(e)=="symbol"?e:e+""}function K_e(t,e){if(zg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(zg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Kg(){return Kg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kg.apply(this,arguments)}var q_e=function(e){var n=e.value,r=e.formatter,i=Le(e.children)?n:e.children;return Oe(r)?r(i):i},Y_e=function(e,n){var r=Cr(n-e),i=Math.min(Math.abs(n-e),360);return r*i},Q_e=function(e,n,r){var i=e.position,s=e.viewBox,o=e.offset,a=e.className,l=s,u=l.cx,c=l.cy,d=l.innerRadius,h=l.outerRadius,f=l.startAngle,g=l.endAngle,m=l.clockWise,v=(d+h)/2,C=Y_e(f,g),y=C>=0?1:-1,S,_;i==="insideStart"?(S=f+y*o,_=m):i==="insideEnd"?(S=g-y*o,_=!m):i==="end"&&(S=g+y*o,_=m),_=C<=0?_:!_;var E=Ot(u,c,v,S),R=Ot(u,c,v,S+(_?1:-1)*359),b="M".concat(E.x,",").concat(E.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(_?0:1,`,
    `).concat(R.x,",").concat(R.y),A=Le(e.id)?Uh("recharts-radial-line-"):e.id;return G.createElement("text",Kg({},r,{dominantBaseline:"central",className:$e("recharts-radial-bar-label",a)}),G.createElement("defs",null,G.createElement("path",{id:A,d:b})),G.createElement("textPath",{xlinkHref:"#".concat(A)},n))},X_e=function(e){var n=e.viewBox,r=e.offset,i=e.position,s=n,o=s.cx,a=s.cy,l=s.innerRadius,u=s.outerRadius,c=s.startAngle,d=s.endAngle,h=(c+d)/2;if(i==="outside"){var f=Ot(o,a,u+r,h),g=f.x,m=f.y;return{x:g,y:m,textAnchor:g>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:a,textAnchor:"middle",verticalAnchor:"end"};var v=(l+u)/2,C=Ot(o,a,v,h),y=C.x,S=C.y;return{x:y,y:S,textAnchor:"middle",verticalAnchor:"middle"}},J_e=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,s=e.position,o=n,a=o.x,l=o.y,u=o.width,c=o.height,d=c>=0?1:-1,h=d*i,f=d>0?"end":"start",g=d>0?"start":"end",m=u>=0?1:-1,v=m*i,C=m>0?"end":"start",y=m>0?"start":"end";if(s==="top"){var S={x:a+u/2,y:l-d*i,textAnchor:"middle",verticalAnchor:f};return Cn(Cn({},S),r?{height:Math.max(l-r.y,0),width:u}:{})}if(s==="bottom"){var _={x:a+u/2,y:l+c+h,textAnchor:"middle",verticalAnchor:g};return Cn(Cn({},_),r?{height:Math.max(r.y+r.height-(l+c),0),width:u}:{})}if(s==="left"){var E={x:a-v,y:l+c/2,textAnchor:C,verticalAnchor:"middle"};return Cn(Cn({},E),r?{width:Math.max(E.x-r.x,0),height:c}:{})}if(s==="right"){var R={x:a+u+v,y:l+c/2,textAnchor:y,verticalAnchor:"middle"};return Cn(Cn({},R),r?{width:Math.max(r.x+r.width-R.x,0),height:c}:{})}var b=r?{width:u,height:c}:{};return s==="insideLeft"?Cn({x:a+v,y:l+c/2,textAnchor:y,verticalAnchor:"middle"},b):s==="insideRight"?Cn({x:a+u-v,y:l+c/2,textAnchor:C,verticalAnchor:"middle"},b):s==="insideTop"?Cn({x:a+u/2,y:l+h,textAnchor:"middle",verticalAnchor:g},b):s==="insideBottom"?Cn({x:a+u/2,y:l+c-h,textAnchor:"middle",verticalAnchor:f},b):s==="insideTopLeft"?Cn({x:a+v,y:l+h,textAnchor:y,verticalAnchor:g},b):s==="insideTopRight"?Cn({x:a+u-v,y:l+h,textAnchor:C,verticalAnchor:g},b):s==="insideBottomLeft"?Cn({x:a+v,y:l+c-h,textAnchor:y,verticalAnchor:f},b):s==="insideBottomRight"?Cn({x:a+u-v,y:l+c-h,textAnchor:C,verticalAnchor:f},b):Bh(s)&&(le(s.x)||zl(s.x))&&(le(s.y)||zl(s.y))?Cn({x:a+wr(s.x,u),y:l+wr(s.y,c),textAnchor:"end",verticalAnchor:"end"},b):Cn({x:a+u/2,y:l+c/2,textAnchor:"middle",verticalAnchor:"middle"},b)},Z_e=function(e){return"cx"in e&&le(e.cx)};function In(t){var e=t.offset,n=e===void 0?5:e,r=W_e(t,k_e),i=Cn({offset:n},r),s=i.viewBox,o=i.position,a=i.value,l=i.children,u=i.content,c=i.className,d=c===void 0?"":c,h=i.textBreakAll;if(!s||Le(a)&&Le(l)&&!I.isValidElement(u)&&!Oe(u))return null;if(I.isValidElement(u))return I.cloneElement(u,i);var f;if(Oe(u)){if(f=I.createElement(u,i),I.isValidElement(f))return f}else f=q_e(i);var g=Z_e(s),m=_e(i,!0);if(g&&(o==="insideStart"||o==="insideEnd"||o==="end"))return Q_e(i,f,m);var v=g?X_e(i):J_e(i);return G.createElement(Mu,Kg({className:$e("recharts-label",d)},m,v,{breakAll:h}),f)}In.displayName="Label";var R5=function(e){var n=e.cx,r=e.cy,i=e.angle,s=e.startAngle,o=e.endAngle,a=e.r,l=e.radius,u=e.innerRadius,c=e.outerRadius,d=e.x,h=e.y,f=e.top,g=e.left,m=e.width,v=e.height,C=e.clockWise,y=e.labelViewBox;if(y)return y;if(le(m)&&le(v)){if(le(d)&&le(h))return{x:d,y:h,width:m,height:v};if(le(f)&&le(g))return{x:f,y:g,width:m,height:v}}return le(d)&&le(h)?{x:d,y:h,width:0,height:0}:le(n)&&le(r)?{cx:n,cy:r,startAngle:s||i||0,endAngle:o||i||0,innerRadius:u||0,outerRadius:c||l||a||0,clockWise:C}:e.viewBox?e.viewBox:{}},eAe=function(e,n){return e?e===!0?G.createElement(In,{key:"label-implicit",viewBox:n}):Tn(e)?G.createElement(In,{key:"label-implicit",viewBox:n,value:e}):I.isValidElement(e)?e.type===In?I.cloneElement(e,{key:"label-implicit",viewBox:n}):G.createElement(In,{key:"label-implicit",content:e,viewBox:n}):Oe(e)?G.createElement(In,{key:"label-implicit",content:e,viewBox:n}):Bh(e)?G.createElement(In,Kg({viewBox:n},e,{key:"label-implicit"})):null:null},tAe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,s=R5(e),o=Ci(i,In).map(function(l,u){return I.cloneElement(l,{viewBox:n||s,key:"label-".concat(u)})});if(!r)return o;var a=eAe(e.label,n||s);return[a].concat(G_e(o))};In.parseViewBox=R5;In.renderCallByParent=tAe;function nAe(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var rAe=nAe;const iAe=gt(rAe);function qg(t){"@babel/helpers - typeof";return qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qg(t)}var sAe=["valueAccessor"],oAe=["data","dataKey","clockWise","id","textBreakAll"];function aAe(t){return dAe(t)||cAe(t)||uAe(t)||lAe()}function lAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uAe(t,e){if(t){if(typeof t=="string")return DA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DA(t,e)}}function cAe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function dAe(t){if(Array.isArray(t))return DA(t)}function DA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function jw(){return jw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jw.apply(this,arguments)}function aV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aV(Object(n),!0).forEach(function(r){hAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hAe(t,e,n){return e=pAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pAe(t){var e=fAe(t,"string");return qg(e)=="symbol"?e:e+""}function fAe(t,e){if(qg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(qg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uV(t,e){if(t==null)return{};var n=gAe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function gAe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var mAe=function(e){return Array.isArray(e.value)?iAe(e.value):e.value};function Eo(t){var e=t.valueAccessor,n=e===void 0?mAe:e,r=uV(t,sAe),i=r.data,s=r.dataKey,o=r.clockWise,a=r.id,l=r.textBreakAll,u=uV(r,oAe);return!i||!i.length?null:G.createElement(at,{className:"recharts-label-list"},i.map(function(c,d){var h=Le(s)?n(c,d):En(c&&c.payload,s),f=Le(a)?{}:{id:"".concat(a,"-").concat(d)};return G.createElement(In,jw({},_e(c,!0),u,f,{parentViewBox:c.parentViewBox,value:h,textBreakAll:l,viewBox:In.parseViewBox(Le(o)?c:lV(lV({},c),{},{clockWise:o})),key:"label-".concat(d),index:d}))}))}Eo.displayName="LabelList";function vAe(t,e){return t?t===!0?G.createElement(Eo,{key:"labelList-implicit",data:e}):G.isValidElement(t)||Oe(t)?G.createElement(Eo,{key:"labelList-implicit",data:e,content:t}):Bh(t)?G.createElement(Eo,jw({data:e},t,{key:"labelList-implicit"})):null:null}function yAe(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=Ci(r,Eo).map(function(o,a){return I.cloneElement(o,{data:e,key:"labelList-".concat(a)})});if(!n)return i;var s=vAe(t.label,e);return[s].concat(aAe(i))}Eo.renderCallByParent=yAe;function Yg(t){"@babel/helpers - typeof";return Yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yg(t)}function OA(){return OA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},OA.apply(this,arguments)}function cV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cV(Object(n),!0).forEach(function(r){CAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function CAe(t,e,n){return e=wAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wAe(t){var e=SAe(t,"string");return Yg(e)=="symbol"?e:e+""}function SAe(t,e){if(Yg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Yg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var EAe=function(e,n){var r=Cr(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},iy=function(e){var n=e.cx,r=e.cy,i=e.radius,s=e.angle,o=e.sign,a=e.isExternal,l=e.cornerRadius,u=e.cornerIsExternal,c=l*(a?1:-1)+i,d=Math.asin(l/c)/Ww,h=u?s:s+o*d,f=Ot(n,r,c,h),g=Ot(n,r,i,h),m=u?s-o*d:s,v=Ot(n,r,c*Math.cos(d*Ww),m);return{center:f,circleTangency:g,lineTangency:v,theta:d}},_5=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,s=e.outerRadius,o=e.startAngle,a=e.endAngle,l=EAe(o,a),u=o+l,c=Ot(n,r,s,o),d=Ot(n,r,s,u),h="M ".concat(c.x,",").concat(c.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(o>u),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(i>0){var f=Ot(n,r,i,o),g=Ot(n,r,i,u);h+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(o<=u),`,
            `).concat(f.x,",").concat(f.y," Z")}else h+="L ".concat(n,",").concat(r," Z");return h},bAe=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,s=e.outerRadius,o=e.cornerRadius,a=e.forceCornerRadius,l=e.cornerIsExternal,u=e.startAngle,c=e.endAngle,d=Cr(c-u),h=iy({cx:n,cy:r,radius:s,angle:u,sign:d,cornerRadius:o,cornerIsExternal:l}),f=h.circleTangency,g=h.lineTangency,m=h.theta,v=iy({cx:n,cy:r,radius:s,angle:c,sign:-d,cornerRadius:o,cornerIsExternal:l}),C=v.circleTangency,y=v.lineTangency,S=v.theta,_=l?Math.abs(u-c):Math.abs(u-c)-m-S;if(_<0)return a?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):_5({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:u,endAngle:c});var E="M ".concat(g.x,",").concat(g.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(_>180),",").concat(+(d<0),",").concat(C.x,",").concat(C.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(y.x,",").concat(y.y,`
  `);if(i>0){var R=iy({cx:n,cy:r,radius:i,angle:u,sign:d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),b=R.circleTangency,A=R.lineTangency,P=R.theta,F=iy({cx:n,cy:r,radius:i,angle:c,sign:-d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),k=F.circleTangency,L=F.lineTangency,N=F.theta,W=l?Math.abs(u-c):Math.abs(u-c)-P-N;if(W<0&&o===0)return"".concat(E,"L").concat(n,",").concat(r,"Z");E+="L".concat(L.x,",").concat(L.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(k.x,",").concat(k.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(W>180),",").concat(+(d>0),",").concat(b.x,",").concat(b.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(A.x,",").concat(A.y,"Z")}else E+="L".concat(n,",").concat(r,"Z");return E},TAe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},A5=function(e){var n=dV(dV({},TAe),e),r=n.cx,i=n.cy,s=n.innerRadius,o=n.outerRadius,a=n.cornerRadius,l=n.forceCornerRadius,u=n.cornerIsExternal,c=n.startAngle,d=n.endAngle,h=n.className;if(o<s||c===d)return null;var f=$e("recharts-sector",h),g=o-s,m=wr(a,g,0,!0),v;return m>0&&Math.abs(c-d)<360?v=bAe({cx:r,cy:i,innerRadius:s,outerRadius:o,cornerRadius:Math.min(m,g/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:c,endAngle:d}):v=_5({cx:r,cy:i,innerRadius:s,outerRadius:o,startAngle:c,endAngle:d}),G.createElement("path",OA({},_e(n,!0),{className:f,d:v,role:"img"}))};function Qg(t){"@babel/helpers - typeof";return Qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qg(t)}function MA(){return MA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},MA.apply(this,arguments)}function hV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hV(Object(n),!0).forEach(function(r){RAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function RAe(t,e,n){return e=_Ae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _Ae(t){var e=AAe(t,"string");return Qg(e)=="symbol"?e:e+""}function AAe(t,e){if(Qg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Qg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fV={curveBasisClosed:Rpe,curveBasisOpen:_pe,curveBasis:Tpe,curveBumpX:cpe,curveBumpY:dpe,curveLinearClosed:Ape,curveLinear:tb,curveMonotoneX:xpe,curveMonotoneY:Ppe,curveNatural:Ipe,curveStep:Dpe,curveStepAfter:Mpe,curveStepBefore:Ope},sy=function(e){return e.x===+e.x&&e.y===+e.y},Pp=function(e){return e.x},Ip=function(e){return e.y},xAe=function(e,n){if(Oe(e))return e;var r="curve".concat(ZE(e));return(r==="curveMonotone"||r==="curveBump")&&n?fV["".concat(r).concat(n==="vertical"?"Y":"X")]:fV[r]||tb},PAe=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,s=i===void 0?[]:i,o=e.baseLine,a=e.layout,l=e.connectNulls,u=l===void 0?!1:l,c=xAe(r,a),d=u?s.filter(function(m){return sy(m)}):s,h;if(Array.isArray(o)){var f=u?o.filter(function(m){return sy(m)}):o,g=d.map(function(m,v){return pV(pV({},m),{},{base:f[v]})});return a==="vertical"?h=Yv().y(Ip).x1(Pp).x0(function(m){return m.base.x}):h=Yv().x(Pp).y1(Ip).y0(function(m){return m.base.y}),h.defined(sy).curve(c),h(g)}return a==="vertical"&&le(o)?h=Yv().y(Ip).x1(Pp).x0(o):le(o)?h=Yv().x(Pp).y1(Ip).y0(o):h=E3().x(Pp).y(Ip),h.defined(sy).curve(c),h(d)},Uw=function(e){var n=e.className,r=e.points,i=e.path,s=e.pathRef;if((!r||!r.length)&&!i)return null;var o=r&&r.length?PAe(e):i;return I.createElement("path",MA({},_e(e,!1),fw(e),{className:$e("recharts-curve",n),d:o,ref:s}))},x5={exports:{}},IAe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",DAe=IAe,OAe=DAe;function P5(){}function I5(){}I5.resetWarningCache=P5;var MAe=function(){function t(r,i,s,o,a,l){if(l!==OAe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:I5,resetWarningCache:P5};return n.PropTypes=n,n};x5.exports=MAe();var FAe=x5.exports;const ht=gt(FAe),{getOwnPropertyNames:NAe,getOwnPropertySymbols:LAe}=Object,{hasOwnProperty:kAe}=Object.prototype;function A0(t,e){return function(r,i,s){return t(r,i,s)&&e(r,i,s)}}function oy(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);const{cache:s}=i,o=s.get(n),a=s.get(r);if(o&&a)return o===r&&a===n;s.set(n,r),s.set(r,n);const l=t(n,r,i);return s.delete(n),s.delete(r),l}}function GAe(t){return t!=null?t[Symbol.toStringTag]:void 0}function gV(t){return NAe(t).concat(LAe(t))}const VAe=Object.hasOwn||((t,e)=>kAe.call(t,e));function rc(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const HAe="__v",BAe="__o",$Ae="_owner",{getOwnPropertyDescriptor:mV,keys:vV}=Object;function WAe(t,e){return t.byteLength===e.byteLength&&zw(new Uint8Array(t),new Uint8Array(e))}function jAe(t,e,n){let r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function UAe(t,e){return t.byteLength===e.byteLength&&zw(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function zAe(t,e){return rc(t.getTime(),e.getTime())}function KAe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function qAe(t,e){return t===e}function yV(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),s=t.entries();let o,a,l=0;for(;(o=s.next())&&!o.done;){const u=e.entries();let c=!1,d=0;for(;(a=u.next())&&!a.done;){if(i[d]){d++;continue}const h=o.value,f=a.value;if(n.equals(h[0],f[0],l,d,t,e,n)&&n.equals(h[1],f[1],h[0],f[0],t,e,n)){c=i[d]=!0;break}d++}if(!c)return!1;l++}return!0}const YAe=rc;function QAe(t,e,n){const r=vV(t);let i=r.length;if(vV(e).length!==i)return!1;for(;i-- >0;)if(!D5(t,e,n,r[i]))return!1;return!0}function Dp(t,e,n){const r=gV(t);let i=r.length;if(gV(e).length!==i)return!1;let s,o,a;for(;i-- >0;)if(s=r[i],!D5(t,e,n,s)||(o=mV(t,s),a=mV(e,s),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function XAe(t,e){return rc(t.valueOf(),e.valueOf())}function JAe(t,e){return t.source===e.source&&t.flags===e.flags}function CV(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),s=t.values();let o,a;for(;(o=s.next())&&!o.done;){const l=e.values();let u=!1,c=0;for(;(a=l.next())&&!a.done;){if(!i[c]&&n.equals(o.value,a.value,o.value,a.value,t,e,n)){u=i[c]=!0;break}c++}if(!u)return!1}return!0}function zw(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function ZAe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function D5(t,e,n,r){return(r===$Ae||r===BAe||r===HAe)&&(t.$$typeof||e.$$typeof)?!0:VAe(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}const exe="[object ArrayBuffer]",txe="[object Arguments]",nxe="[object Boolean]",rxe="[object DataView]",ixe="[object Date]",sxe="[object Error]",oxe="[object Map]",axe="[object Number]",lxe="[object Object]",uxe="[object RegExp]",cxe="[object Set]",dxe="[object String]",hxe={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},pxe="[object URL]",fxe=Object.prototype.toString;function gxe({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:s,areMapsEqual:o,areNumbersEqual:a,areObjectsEqual:l,arePrimitiveWrappersEqual:u,areRegExpsEqual:c,areSetsEqual:d,areTypedArraysEqual:h,areUrlsEqual:f,unknownTagComparators:g}){return function(v,C,y){if(v===C)return!0;if(v==null||C==null)return!1;const S=typeof v;if(S!==typeof C)return!1;if(S!=="object")return S==="number"?a(v,C,y):S==="function"?s(v,C,y):!1;const _=v.constructor;if(_!==C.constructor)return!1;if(_===Object)return l(v,C,y);if(Array.isArray(v))return e(v,C,y);if(_===Date)return r(v,C,y);if(_===RegExp)return c(v,C,y);if(_===Map)return o(v,C,y);if(_===Set)return d(v,C,y);const E=fxe.call(v);if(E===ixe)return r(v,C,y);if(E===uxe)return c(v,C,y);if(E===oxe)return o(v,C,y);if(E===cxe)return d(v,C,y);if(E===lxe)return typeof v.then!="function"&&typeof C.then!="function"&&l(v,C,y);if(E===pxe)return f(v,C,y);if(E===sxe)return i(v,C,y);if(E===txe)return l(v,C,y);if(hxe[E])return h(v,C,y);if(E===exe)return t(v,C,y);if(E===rxe)return n(v,C,y);if(E===nxe||E===axe||E===dxe)return u(v,C,y);if(g){let R=g[E];if(!R){const b=GAe(v);b&&(R=g[b])}if(R)return R(v,C,y)}return!1}}function mxe({circular:t,createCustomConfig:e,strict:n}){let r={areArrayBuffersEqual:WAe,areArraysEqual:n?Dp:jAe,areDataViewsEqual:UAe,areDatesEqual:zAe,areErrorsEqual:KAe,areFunctionsEqual:qAe,areMapsEqual:n?A0(yV,Dp):yV,areNumbersEqual:YAe,areObjectsEqual:n?Dp:QAe,arePrimitiveWrappersEqual:XAe,areRegExpsEqual:JAe,areSetsEqual:n?A0(CV,Dp):CV,areTypedArraysEqual:n?A0(zw,Dp):zw,areUrlsEqual:ZAe,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),t){const i=oy(r.areArraysEqual),s=oy(r.areMapsEqual),o=oy(r.areObjectsEqual),a=oy(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:a})}return r}function vxe(t){return function(e,n,r,i,s,o,a){return t(e,n,a)}}function yxe({circular:t,comparator:e,createState:n,equals:r,strict:i}){if(n)return function(a,l){const{cache:u=t?new WeakMap:void 0,meta:c}=n();return e(a,l,{cache:u,equals:r,meta:c,strict:i})};if(t)return function(a,l){return e(a,l,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const s={cache:void 0,equals:r,meta:void 0,strict:i};return function(a,l){return e(a,l,s)}}const Cxe=gl();gl({strict:!0});gl({circular:!0});gl({circular:!0,strict:!0});gl({createInternalComparator:()=>rc});gl({strict:!0,createInternalComparator:()=>rc});gl({circular:!0,createInternalComparator:()=>rc});gl({circular:!0,createInternalComparator:()=>rc,strict:!0});function gl(t={}){const{circular:e=!1,createInternalComparator:n,createState:r,strict:i=!1}=t,s=mxe(t),o=gxe(s),a=n?n(o):vxe(o);return yxe({circular:e,comparator:o,createState:r,equals:a,strict:i})}function wxe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function wV(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(s){n<0&&(n=s),s-n>e?(t(s),n=-1):wxe(i)};requestAnimationFrame(r)}function FA(t){"@babel/helpers - typeof";return FA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},FA(t)}function Sxe(t){return Rxe(t)||Txe(t)||bxe(t)||Exe()}function Exe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bxe(t,e){if(t){if(typeof t=="string")return SV(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SV(t,e)}}function SV(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Txe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Rxe(t){if(Array.isArray(t))return t}function _xe(){var t={},e=function(){return null},n=!1,r=function i(s){if(!n){if(Array.isArray(s)){if(!s.length)return;var o=s,a=Sxe(o),l=a[0],u=a.slice(1);if(typeof l=="number"){wV(i.bind(null,u),l);return}i(l),wV(i.bind(null,u));return}FA(s)==="object"&&(t=s,e(t)),typeof s=="function"&&s()}};return{stop:function(){n=!0},start:function(s){n=!1,r(s)},subscribe:function(s){return e=s,function(){e=function(){return null}}}}}function Xg(t){"@babel/helpers - typeof";return Xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xg(t)}function EV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EV(Object(n),!0).forEach(function(r){O5(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function O5(t,e,n){return e=Axe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Axe(t){var e=xxe(t,"string");return Xg(e)==="symbol"?e:String(e)}function xxe(t,e){if(Xg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Xg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Pxe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(s){return i.includes(s)})})},Ixe=function(e){return e},Dxe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Sf=function(e,n){return Object.keys(n).reduce(function(r,i){return bV(bV({},r),{},O5({},i,e(i,n[i])))},{})},TV=function(e,n,r){return e.map(function(i){return"".concat(Dxe(i)," ").concat(n,"ms ").concat(r)}).join(",")};function Oxe(t,e){return Nxe(t)||Fxe(t,e)||M5(t,e)||Mxe()}function Mxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fxe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function Nxe(t){if(Array.isArray(t))return t}function Lxe(t){return Vxe(t)||Gxe(t)||M5(t)||kxe()}function kxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M5(t,e){if(t){if(typeof t=="string")return NA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return NA(t,e)}}function Gxe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Vxe(t){if(Array.isArray(t))return NA(t)}function NA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Kw=1e-4,F5=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},N5=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},RV=function(e,n){return function(r){var i=F5(e,n);return N5(i,r)}},Hxe=function(e,n){return function(r){var i=F5(e,n),s=[].concat(Lxe(i.map(function(o,a){return o*a}).slice(1)),[0]);return N5(s,r)}},_V=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],s=n[1],o=n[2],a=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,s=0,o=1,a=1;break;case"ease":i=.25,s=.1,o=.25,a=1;break;case"ease-in":i=.42,s=0,o=1,a=1;break;case"ease-out":i=.42,s=0,o=.58,a=1;break;case"ease-in-out":i=0,s=0,o=.58,a=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),c=Oxe(u,4);i=c[0],s=c[1],o=c[2],a=c[3]}}}var d=RV(i,o),h=RV(s,a),f=Hxe(i,o),g=function(C){return C>1?1:C<0?0:C},m=function(C){for(var y=C>1?1:C,S=y,_=0;_<8;++_){var E=d(S)-y,R=f(S);if(Math.abs(E-y)<Kw||R<Kw)return h(S);S=g(S-E/R)}return h(S)};return m.isStepper=!1,m},Bxe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,s=i===void 0?8:i,o=e.dt,a=o===void 0?17:o,l=function(c,d,h){var f=-(c-d)*r,g=h*s,m=h+(f-g)*a/1e3,v=h*a/1e3+c;return Math.abs(v-d)<Kw&&Math.abs(m)<Kw?[d,0]:[v,m]};return l.isStepper=!0,l.dt=a,l},$xe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return _V(i);case"spring":return Bxe();default:if(i.split("(")[0]==="cubic-bezier")return _V(i)}return typeof i=="function"?i:null};function Jg(t){"@babel/helpers - typeof";return Jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jg(t)}function AV(t){return Uxe(t)||jxe(t)||L5(t)||Wxe()}function Wxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jxe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Uxe(t){if(Array.isArray(t))return kA(t)}function xV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Vn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xV(Object(n),!0).forEach(function(r){LA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LA(t,e,n){return e=zxe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zxe(t){var e=Kxe(t,"string");return Jg(e)==="symbol"?e:String(e)}function Kxe(t,e){if(Jg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Jg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qxe(t,e){return Xxe(t)||Qxe(t,e)||L5(t,e)||Yxe()}function Yxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function L5(t,e){if(t){if(typeof t=="string")return kA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kA(t,e)}}function kA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Qxe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function Xxe(t){if(Array.isArray(t))return t}var qw=function(e,n,r){return e+(n-e)*r},GA=function(e){var n=e.from,r=e.to;return n!==r},Jxe=function t(e,n,r){var i=Sf(function(s,o){if(GA(o)){var a=e(o.from,o.to,o.velocity),l=qxe(a,2),u=l[0],c=l[1];return Vn(Vn({},o),{},{from:u,velocity:c})}return o},n);return r<1?Sf(function(s,o){return GA(o)?Vn(Vn({},o),{},{velocity:qw(o.velocity,i[s].velocity,r),from:qw(o.from,i[s].from,r)}):o},n):t(e,i,r-1)};const Zxe=function(t,e,n,r,i){var s=Pxe(t,e),o=s.reduce(function(v,C){return Vn(Vn({},v),{},LA({},C,[t[C],e[C]]))},{}),a=s.reduce(function(v,C){return Vn(Vn({},v),{},LA({},C,{from:t[C],velocity:0,to:e[C]}))},{}),l=-1,u,c,d=function(){return null},h=function(){return Sf(function(C,y){return y.from},a)},f=function(){return!Object.values(a).filter(GA).length},g=function(C){u||(u=C);var y=C-u,S=y/n.dt;a=Jxe(n,a,S),i(Vn(Vn(Vn({},t),e),h())),u=C,f()||(l=requestAnimationFrame(d))},m=function(C){c||(c=C);var y=(C-c)/r,S=Sf(function(E,R){return qw.apply(void 0,AV(R).concat([n(y)]))},o);if(i(Vn(Vn(Vn({},t),e),S)),y<1)l=requestAnimationFrame(d);else{var _=Sf(function(E,R){return qw.apply(void 0,AV(R).concat([n(1)]))},o);i(Vn(Vn(Vn({},t),e),_))}};return d=n.isStepper?g:m,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(l)}}};function Kd(t){"@babel/helpers - typeof";return Kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kd(t)}var ePe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function tPe(t,e){if(t==null)return{};var n=nPe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function nPe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function x0(t){return oPe(t)||sPe(t)||iPe(t)||rPe()}function rPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iPe(t,e){if(t){if(typeof t=="string")return VA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VA(t,e)}}function sPe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function oPe(t){if(Array.isArray(t))return VA(t)}function VA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function PV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PV(Object(n),!0).forEach(function(r){Zp(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zp(t,e,n){return e=k5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lPe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,k5(r.key),r)}}function uPe(t,e,n){return e&&lPe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function k5(t){var e=cPe(t,"string");return Kd(e)==="symbol"?e:String(e)}function cPe(t,e){if(Kd(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Kd(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HA(t,e)}function HA(t,e){return HA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},HA(t,e)}function hPe(t){var e=pPe();return function(){var r=Yw(t),i;if(e){var s=Yw(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return BA(this,i)}}function BA(t,e){if(e&&(Kd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $A(t)}function $A(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pPe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Yw(t){return Yw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Yw(t)}var Qs=function(t){dPe(n,t);var e=hPe(n);function n(r,i){var s;aPe(this,n),s=e.call(this,r,i);var o=s.props,a=o.isActive,l=o.attributeName,u=o.from,c=o.to,d=o.steps,h=o.children,f=o.duration;if(s.handleStyleChange=s.handleStyleChange.bind($A(s)),s.changeStyle=s.changeStyle.bind($A(s)),!a||f<=0)return s.state={style:{}},typeof h=="function"&&(s.state={style:c}),BA(s);if(d&&d.length)s.state={style:d[0].style};else if(u){if(typeof h=="function")return s.state={style:u},BA(s);s.state={style:l?Zp({},l,u):u}}else s.state={style:{}};return s}return uPe(n,[{key:"componentDidMount",value:function(){var i=this.props,s=i.isActive,o=i.canBegin;this.mounted=!0,!(!s||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var s=this.props,o=s.isActive,a=s.canBegin,l=s.attributeName,u=s.shouldReAnimate,c=s.to,d=s.from,h=this.state.style;if(a){if(!o){var f={style:l?Zp({},l,c):c};this.state&&h&&(l&&h[l]!==c||!l&&h!==c)&&this.setState(f);return}if(!(Cxe(i.to,c)&&i.canBegin&&i.isActive)){var g=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var m=g||u?d:i.to;if(this.state&&h){var v={style:l?Zp({},l,m):m};(l&&h[l]!==m||!l&&h!==m)&&this.setState(v)}this.runAnimation(Zi(Zi({},this.props),{},{from:m,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var s=this,o=i.from,a=i.to,l=i.duration,u=i.easing,c=i.begin,d=i.onAnimationEnd,h=i.onAnimationStart,f=Zxe(o,a,$xe(u),l,this.changeStyle),g=function(){s.stopJSAnimation=f()};this.manager.start([h,c,g,l,d])}},{key:"runStepAnimation",value:function(i){var s=this,o=i.steps,a=i.begin,l=i.onAnimationStart,u=o[0],c=u.style,d=u.duration,h=d===void 0?0:d,f=function(m,v,C){if(C===0)return m;var y=v.duration,S=v.easing,_=S===void 0?"ease":S,E=v.style,R=v.properties,b=v.onAnimationEnd,A=C>0?o[C-1]:v,P=R||Object.keys(E);if(typeof _=="function"||_==="spring")return[].concat(x0(m),[s.runJSAnimation.bind(s,{from:A.style,to:E,duration:y,easing:_}),y]);var F=TV(P,y,_),k=Zi(Zi(Zi({},A.style),E),{},{transition:F});return[].concat(x0(m),[k,y,b]).filter(Ixe)};return this.manager.start([l].concat(x0(o.reduce(f,[c,Math.max(h,a)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=_xe());var s=i.begin,o=i.duration,a=i.attributeName,l=i.to,u=i.easing,c=i.onAnimationStart,d=i.onAnimationEnd,h=i.steps,f=i.children,g=this.manager;if(this.unSubscribe=g.subscribe(this.handleStyleChange),typeof u=="function"||typeof f=="function"||u==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var m=a?Zp({},a,l):l,v=TV(Object.keys(m),o,u);g.start([c,s,Zi(Zi({},m),{},{transition:v}),o,d])}},{key:"render",value:function(){var i=this.props,s=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var a=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=tPe(i,ePe),u=I.Children.count(s),c=this.state.style;if(typeof s=="function")return s(c);if(!a||u===0||o<=0)return s;var d=function(f){var g=f.props,m=g.style,v=m===void 0?{}:m,C=g.className,y=I.cloneElement(f,Zi(Zi({},l),{},{style:Zi(Zi({},v),c),className:C}));return y};return u===1?d(I.Children.only(s)):G.createElement("div",null,I.Children.map(s,function(h){return d(h)}))}}]),n}(I.PureComponent);Qs.displayName="Animate";Qs.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Qs.propTypes={from:ht.oneOfType([ht.object,ht.string]),to:ht.oneOfType([ht.object,ht.string]),attributeName:ht.string,duration:ht.number,begin:ht.number,easing:ht.oneOfType([ht.string,ht.func]),steps:ht.arrayOf(ht.shape({duration:ht.number.isRequired,style:ht.object.isRequired,easing:ht.oneOfType([ht.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),ht.func]),properties:ht.arrayOf("string"),onAnimationEnd:ht.func})),children:ht.oneOfType([ht.node,ht.func]),isActive:ht.bool,canBegin:ht.bool,onAnimationEnd:ht.func,shouldReAnimate:ht.bool,onAnimationStart:ht.func,onAnimationReStart:ht.func};function Zg(t){"@babel/helpers - typeof";return Zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zg(t)}function Qw(){return Qw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qw.apply(this,arguments)}function fPe(t,e){return yPe(t)||vPe(t,e)||mPe(t,e)||gPe()}function gPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mPe(t,e){if(t){if(typeof t=="string")return IV(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IV(t,e)}}function IV(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vPe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function yPe(t){if(Array.isArray(t))return t}function DV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function OV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DV(Object(n),!0).forEach(function(r){CPe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function CPe(t,e,n){return e=wPe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wPe(t){var e=SPe(t,"string");return Zg(e)=="symbol"?e:e+""}function SPe(t,e){if(Zg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Zg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var MV=function(e,n,r,i,s){var o=Math.min(Math.abs(r)/2,Math.abs(i)/2),a=i>=0?1:-1,l=r>=0?1:-1,u=i>=0&&r>=0||i<0&&r<0?1:0,c;if(o>0&&s instanceof Array){for(var d=[0,0,0,0],h=0,f=4;h<f;h++)d[h]=s[h]>o?o:s[h];c="M".concat(e,",").concat(n+a*d[0]),d[0]>0&&(c+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(u,",").concat(e+l*d[0],",").concat(n)),c+="L ".concat(e+r-l*d[1],",").concat(n),d[1]>0&&(c+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(n+a*d[1])),c+="L ".concat(e+r,",").concat(n+i-a*d[2]),d[2]>0&&(c+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(u,`,
        `).concat(e+r-l*d[2],",").concat(n+i)),c+="L ".concat(e+l*d[3],",").concat(n+i),d[3]>0&&(c+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+i-a*d[3])),c+="Z"}else if(o>0&&s===+s&&s>0){var g=Math.min(o,s);c="M ".concat(e,",").concat(n+a*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(e+l*g,",").concat(n,`
            L `).concat(e+r-l*g,",").concat(n,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(e+r,",").concat(n+a*g,`
            L `).concat(e+r,",").concat(n+i-a*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(e+r-l*g,",").concat(n+i,`
            L `).concat(e+l*g,",").concat(n+i,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(e,",").concat(n+i-a*g," Z")}else c="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return c},EPe=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,s=n.x,o=n.y,a=n.width,l=n.height;if(Math.abs(a)>0&&Math.abs(l)>0){var u=Math.min(s,s+a),c=Math.max(s,s+a),d=Math.min(o,o+l),h=Math.max(o,o+l);return r>=u&&r<=c&&i>=d&&i<=h}return!1},bPe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},DO=function(e){var n=OV(OV({},bPe),e),r=I.useRef(),i=I.useState(-1),s=fPe(i,2),o=s[0],a=s[1];I.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var _=r.current.getTotalLength();_&&a(_)}catch{}},[]);var l=n.x,u=n.y,c=n.width,d=n.height,h=n.radius,f=n.className,g=n.animationEasing,m=n.animationDuration,v=n.animationBegin,C=n.isAnimationActive,y=n.isUpdateAnimationActive;if(l!==+l||u!==+u||c!==+c||d!==+d||c===0||d===0)return null;var S=$e("recharts-rectangle",f);return y?G.createElement(Qs,{canBegin:o>0,from:{width:c,height:d,x:l,y:u},to:{width:c,height:d,x:l,y:u},duration:m,animationEasing:g,isActive:y},function(_){var E=_.width,R=_.height,b=_.x,A=_.y;return G.createElement(Qs,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:m,isActive:C,easing:g},G.createElement("path",Qw({},_e(n,!0),{className:S,d:MV(b,A,E,R,h),ref:r})))}):G.createElement("path",Qw({},_e(n,!0),{className:S,d:MV(l,u,c,d,h)}))},TPe=["points","className","baseLinePoints","connectNulls"];function Gc(){return Gc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gc.apply(this,arguments)}function RPe(t,e){if(t==null)return{};var n=_Pe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function _Pe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function FV(t){return IPe(t)||PPe(t)||xPe(t)||APe()}function APe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xPe(t,e){if(t){if(typeof t=="string")return WA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WA(t,e)}}function PPe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function IPe(t){if(Array.isArray(t))return WA(t)}function WA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var NV=function(e){return e&&e.x===+e.x&&e.y===+e.y},DPe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(r){NV(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),NV(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Ef=function(e,n){var r=DPe(e);n&&(r=[r.reduce(function(s,o){return[].concat(FV(s),FV(o))},[])]);var i=r.map(function(s){return s.reduce(function(o,a,l){return"".concat(o).concat(l===0?"M":"L").concat(a.x,",").concat(a.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},OPe=function(e,n,r){var i=Ef(e,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(Ef(n.reverse(),r).slice(1))},MPe=function(e){var n=e.points,r=e.className,i=e.baseLinePoints,s=e.connectNulls,o=RPe(e,TPe);if(!n||!n.length)return null;var a=$e("recharts-polygon",r);if(i&&i.length){var l=o.stroke&&o.stroke!=="none",u=OPe(n,i,s);return G.createElement("g",{className:a},G.createElement("path",Gc({},_e(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),l?G.createElement("path",Gc({},_e(o,!0),{fill:"none",d:Ef(n,s)})):null,l?G.createElement("path",Gc({},_e(o,!0),{fill:"none",d:Ef(i,s)})):null)}var c=Ef(n,s);return G.createElement("path",Gc({},_e(o,!0),{fill:c.slice(-1)==="Z"?o.fill:"none",className:a,d:c}))};function jA(){return jA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jA.apply(this,arguments)}var yb=function(e){var n=e.cx,r=e.cy,i=e.r,s=e.className,o=$e("recharts-dot",s);return n===+n&&r===+r&&i===+i?I.createElement("circle",jA({},_e(e,!1),fw(e),{className:o,cx:n,cy:r,r:i})):null};function em(t){"@babel/helpers - typeof";return em=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},em(t)}var FPe=["x","y","top","left","width","height","className"];function UA(){return UA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},UA.apply(this,arguments)}function LV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function NPe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LV(Object(n),!0).forEach(function(r){LPe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LPe(t,e,n){return e=kPe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kPe(t){var e=GPe(t,"string");return em(e)=="symbol"?e:e+""}function GPe(t,e){if(em(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(em(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function VPe(t,e){if(t==null)return{};var n=HPe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function HPe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var BPe=function(e,n,r,i,s,o){return"M".concat(e,",").concat(s,"v").concat(i,"M").concat(o,",").concat(n,"h").concat(r)},$Pe=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,s=i===void 0?0:i,o=e.top,a=o===void 0?0:o,l=e.left,u=l===void 0?0:l,c=e.width,d=c===void 0?0:c,h=e.height,f=h===void 0?0:h,g=e.className,m=VPe(e,FPe),v=NPe({x:r,y:s,top:a,left:u,width:d,height:f},m);return!le(r)||!le(s)||!le(d)||!le(f)||!le(a)||!le(u)?null:G.createElement("path",UA({},_e(v,!0),{className:$e("recharts-cross",g),d:BPe(r,s,d,f,a,u)}))},WPe=pb,jPe=YK,UPe=Zs;function zPe(t,e){return t&&t.length?WPe(t,UPe(e),jPe):void 0}var KPe=zPe;const qPe=gt(KPe);var YPe=pb,QPe=Zs,XPe=QK;function JPe(t,e){return t&&t.length?YPe(t,QPe(e),XPe):void 0}var ZPe=JPe;const eIe=gt(ZPe);var tIe=["cx","cy","angle","ticks","axisLine"],nIe=["ticks","tick","angle","tickFormatter","stroke"];function qd(t){"@babel/helpers - typeof";return qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qd(t)}function bf(){return bf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bf.apply(this,arguments)}function kV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function El(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kV(Object(n),!0).forEach(function(r){Cb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function GV(t,e){if(t==null)return{};var n=rIe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function rIe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function iIe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function VV(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,V5(r.key),r)}}function sIe(t,e,n){return e&&VV(t.prototype,e),n&&VV(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function oIe(t,e,n){return e=Xw(e),aIe(t,G5()?Reflect.construct(e,n||[],Xw(t).constructor):e.apply(t,n))}function aIe(t,e){if(e&&(qd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lIe(t)}function lIe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function G5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(G5=function(){return!!t})()}function Xw(t){return Xw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Xw(t)}function uIe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zA(t,e)}function zA(t,e){return zA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},zA(t,e)}function Cb(t,e,n){return e=V5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function V5(t){var e=cIe(t,"string");return qd(e)=="symbol"?e:e+""}function cIe(t,e){if(qd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(qd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wb=function(t){function e(){return iIe(this,e),oIe(this,e,arguments)}return uIe(e,t),sIe(e,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,s=this.props,o=s.angle,a=s.cx,l=s.cy;return Ot(a,l,i,o)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,s=r.cy,o=r.angle,a=r.ticks,l=qPe(a,function(c){return c.coordinate||0}),u=eIe(a,function(c){return c.coordinate||0});return{cx:i,cy:s,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:l.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,s=r.cy,o=r.angle,a=r.ticks,l=r.axisLine,u=GV(r,tIe),c=a.reduce(function(g,m){return[Math.min(g[0],m.coordinate),Math.max(g[1],m.coordinate)]},[1/0,-1/0]),d=Ot(i,s,c[0],o),h=Ot(i,s,c[1],o),f=El(El(El({},_e(u,!1)),{},{fill:"none"},_e(l,!1)),{},{x1:d.x,y1:d.y,x2:h.x,y2:h.y});return G.createElement("line",bf({className:"recharts-polar-radius-axis-line"},f))}},{key:"renderTicks",value:function(){var r=this,i=this.props,s=i.ticks,o=i.tick,a=i.angle,l=i.tickFormatter,u=i.stroke,c=GV(i,nIe),d=this.getTickTextAnchor(),h=_e(c,!1),f=_e(o,!1),g=s.map(function(m,v){var C=r.getTickValueCoord(m),y=El(El(El(El({textAnchor:d,transform:"rotate(".concat(90-a,", ").concat(C.x,", ").concat(C.y,")")},h),{},{stroke:"none",fill:u},f),{},{index:v},C),{},{payload:m});return G.createElement(at,bf({className:$e("recharts-polar-radius-axis-tick",T5(o)),key:"tick-".concat(m.coordinate)},Ou(r.props,m,v)),e.renderTickItem(o,y,l?l(m.value,v):m.value))});return G.createElement(at,{className:"recharts-polar-radius-axis-ticks"},g)}},{key:"render",value:function(){var r=this.props,i=r.ticks,s=r.axisLine,o=r.tick;return!i||!i.length?null:G.createElement(at,{className:$e("recharts-polar-radius-axis",this.props.className)},s&&this.renderAxisLine(),o&&this.renderTicks(),In.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,s){var o;return G.isValidElement(r)?o=G.cloneElement(r,i):Oe(r)?o=r(i):o=G.createElement(Mu,bf({},i,{className:"recharts-polar-radius-axis-tick-value"}),s),o}}])}(I.PureComponent);Cb(wb,"displayName","PolarRadiusAxis");Cb(wb,"axisType","radiusAxis");Cb(wb,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Yd(t){"@babel/helpers - typeof";return Yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yd(t)}function kl(){return kl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kl.apply(this,arguments)}function HV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HV(Object(n),!0).forEach(function(r){Sb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dIe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function BV(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,B5(r.key),r)}}function hIe(t,e,n){return e&&BV(t.prototype,e),n&&BV(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function pIe(t,e,n){return e=Jw(e),fIe(t,H5()?Reflect.construct(e,n||[],Jw(t).constructor):e.apply(t,n))}function fIe(t,e){if(e&&(Yd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gIe(t)}function gIe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function H5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(H5=function(){return!!t})()}function Jw(t){return Jw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Jw(t)}function mIe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KA(t,e)}function KA(t,e){return KA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},KA(t,e)}function Sb(t,e,n){return e=B5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B5(t){var e=vIe(t,"string");return Yd(e)=="symbol"?e:e+""}function vIe(t,e){if(Yd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Yd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yIe=Math.PI/180,$V=1e-5,Eb=function(t){function e(){return dIe(this,e),pIe(this,e,arguments)}return mIe(e,t),hIe(e,[{key:"getTickLineCoord",value:function(r){var i=this.props,s=i.cx,o=i.cy,a=i.radius,l=i.orientation,u=i.tickSize,c=u||8,d=Ot(s,o,a,r.coordinate),h=Ot(s,o,a+(l==="inner"?-1:1)*c,r.coordinate);return{x1:d.x,y1:d.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,s=Math.cos(-r.coordinate*yIe),o;return s>$V?o=i==="outer"?"start":"end":s<-$V?o=i==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,s=r.cy,o=r.radius,a=r.axisLine,l=r.axisLineType,u=bl(bl({},_e(this.props,!1)),{},{fill:"none"},_e(a,!1));if(l==="circle")return G.createElement(yb,kl({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:s,r:o}));var c=this.props.ticks,d=c.map(function(h){return Ot(i,s,o,h.coordinate)});return G.createElement(MPe,kl({className:"recharts-polar-angle-axis-line"},u,{points:d}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,s=i.ticks,o=i.tick,a=i.tickLine,l=i.tickFormatter,u=i.stroke,c=_e(this.props,!1),d=_e(o,!1),h=bl(bl({},c),{},{fill:"none"},_e(a,!1)),f=s.map(function(g,m){var v=r.getTickLineCoord(g),C=r.getTickTextAnchor(g),y=bl(bl(bl({textAnchor:C},c),{},{stroke:"none",fill:u},d),{},{index:m,payload:g,x:v.x2,y:v.y2});return G.createElement(at,kl({className:$e("recharts-polar-angle-axis-tick",T5(o)),key:"tick-".concat(g.coordinate)},Ou(r.props,g,m)),a&&G.createElement("line",kl({className:"recharts-polar-angle-axis-tick-line"},h,v)),o&&e.renderTickItem(o,y,l?l(g.value,m):g.value))});return G.createElement(at,{className:"recharts-polar-angle-axis-ticks"},f)}},{key:"render",value:function(){var r=this.props,i=r.ticks,s=r.radius,o=r.axisLine;return s<=0||!i||!i.length?null:G.createElement(at,{className:$e("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,s){var o;return G.isValidElement(r)?o=G.cloneElement(r,i):Oe(r)?o=r(i):o=G.createElement(Mu,kl({},i,{className:"recharts-polar-angle-axis-tick-value"}),s),o}}])}(I.PureComponent);Sb(Eb,"displayName","PolarAngleAxis");Sb(Eb,"axisType","angleAxis");Sb(Eb,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var CIe=z3,wIe=CIe(Object.getPrototypeOf,Object),SIe=wIe,EIe=Uo,bIe=SIe,TIe=zo,RIe="[object Object]",_Ie=Function.prototype,AIe=Object.prototype,$5=_Ie.toString,xIe=AIe.hasOwnProperty,PIe=$5.call(Object);function IIe(t){if(!TIe(t)||EIe(t)!=RIe)return!1;var e=bIe(t);if(e===null)return!0;var n=xIe.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&$5.call(n)==PIe}var DIe=IIe;const OIe=gt(DIe);var MIe=Uo,FIe=zo,NIe="[object Boolean]";function LIe(t){return t===!0||t===!1||FIe(t)&&MIe(t)==NIe}var kIe=LIe;const GIe=gt(kIe);function tm(t){"@babel/helpers - typeof";return tm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tm(t)}function Zw(){return Zw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zw.apply(this,arguments)}function VIe(t,e){return WIe(t)||$Ie(t,e)||BIe(t,e)||HIe()}function HIe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BIe(t,e){if(t){if(typeof t=="string")return WV(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WV(t,e)}}function WV(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $Ie(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function WIe(t){if(Array.isArray(t))return t}function jV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function UV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jV(Object(n),!0).forEach(function(r){jIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jIe(t,e,n){return e=UIe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UIe(t){var e=zIe(t,"string");return tm(e)=="symbol"?e:e+""}function zIe(t,e){if(tm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(tm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zV=function(e,n,r,i,s){var o=r-i,a;return a="M ".concat(e,",").concat(n),a+="L ".concat(e+r,",").concat(n),a+="L ".concat(e+r-o/2,",").concat(n+s),a+="L ".concat(e+r-o/2-i,",").concat(n+s),a+="L ".concat(e,",").concat(n," Z"),a},KIe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},qIe=function(e){var n=UV(UV({},KIe),e),r=I.useRef(),i=I.useState(-1),s=VIe(i,2),o=s[0],a=s[1];I.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var S=r.current.getTotalLength();S&&a(S)}catch{}},[]);var l=n.x,u=n.y,c=n.upperWidth,d=n.lowerWidth,h=n.height,f=n.className,g=n.animationEasing,m=n.animationDuration,v=n.animationBegin,C=n.isUpdateAnimationActive;if(l!==+l||u!==+u||c!==+c||d!==+d||h!==+h||c===0&&d===0||h===0)return null;var y=$e("recharts-trapezoid",f);return C?G.createElement(Qs,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:l,y:u},to:{upperWidth:c,lowerWidth:d,height:h,x:l,y:u},duration:m,animationEasing:g,isActive:C},function(S){var _=S.upperWidth,E=S.lowerWidth,R=S.height,b=S.x,A=S.y;return G.createElement(Qs,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:m,easing:g},G.createElement("path",Zw({},_e(n,!0),{className:y,d:zV(b,A,_,E,R),ref:r})))}):G.createElement("g",null,G.createElement("path",Zw({},_e(n,!0),{className:y,d:zV(l,u,c,d,h)})))},YIe=["option","shapeType","propTransformer","activeClassName","isActive"];function nm(t){"@babel/helpers - typeof";return nm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nm(t)}function QIe(t,e){if(t==null)return{};var n=XIe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function XIe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function KV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KV(Object(n),!0).forEach(function(r){JIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function JIe(t,e,n){return e=ZIe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZIe(t){var e=eDe(t,"string");return nm(e)=="symbol"?e:e+""}function eDe(t,e){if(nm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(nm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tDe(t,e){return eS(eS({},e),t)}function nDe(t,e){return t==="symbols"}function qV(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return G.createElement(DO,n);case"trapezoid":return G.createElement(qIe,n);case"sector":return G.createElement(A5,n);case"symbols":if(nDe(e))return G.createElement(YD,n);break;default:return null}}function rDe(t){return I.isValidElement(t)?t.props:t}function W5(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?tDe:r,s=t.activeClassName,o=s===void 0?"recharts-active-shape":s,a=t.isActive,l=QIe(t,YIe),u;if(I.isValidElement(e))u=I.cloneElement(e,eS(eS({},l),rDe(e)));else if(Oe(e))u=e(l);else if(OIe(e)&&!GIe(e)){var c=i(e,l);u=G.createElement(qV,{shapeType:n,elementProps:c})}else{var d=l;u=G.createElement(qV,{shapeType:n,elementProps:d})}return a?G.createElement(at,{className:o},u):u}function bb(t,e){return e!=null&&"trapezoids"in t.props}function Tb(t,e){return e!=null&&"sectors"in t.props}function rm(t,e){return e!=null&&"points"in t.props}function iDe(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,s=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&s}function sDe(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function oDe(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function aDe(t,e){var n;return bb(t,e)?n=iDe:Tb(t,e)?n=sDe:rm(t,e)&&(n=oDe),n}function lDe(t,e){var n;return bb(t,e)?n="trapezoids":Tb(t,e)?n="sectors":rm(t,e)&&(n="points"),n}function uDe(t,e){if(bb(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(Tb(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return rm(t,e)?e.payload:{}}function cDe(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=lDe(n,e),s=uDe(n,e),o=r.filter(function(l,u){var c=Zm(s,l),d=n.props[i].filter(function(g){var m=aDe(n,e);return m(g,e)}),h=n.props[i].indexOf(d[d.length-1]),f=u===h;return c&&f}),a=r.indexOf(o[o.length-1]);return a}var Qy;function Qd(t){"@babel/helpers - typeof";return Qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qd(t)}function Vc(){return Vc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vc.apply(this,arguments)}function YV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _t(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YV(Object(n),!0).forEach(function(r){Fi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dDe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QV(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,U5(r.key),r)}}function hDe(t,e,n){return e&&QV(t.prototype,e),n&&QV(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function pDe(t,e,n){return e=tS(e),fDe(t,j5()?Reflect.construct(e,n||[],tS(t).constructor):e.apply(t,n))}function fDe(t,e){if(e&&(Qd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gDe(t)}function gDe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(j5=function(){return!!t})()}function tS(t){return tS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},tS(t)}function mDe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qA(t,e)}function qA(t,e){return qA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},qA(t,e)}function Fi(t,e,n){return e=U5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function U5(t){var e=vDe(t,"string");return Qd(e)=="symbol"?e:e+""}function vDe(t,e){if(Qd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Qd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var qo=function(t){function e(n){var r;return dDe(this,e),r=pDe(this,e,[n]),Fi(r,"pieRef",null),Fi(r,"sectorRefs",[]),Fi(r,"id",Uh("recharts-pie-")),Fi(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Oe(i)&&i()}),Fi(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Oe(i)&&i()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return mDe(e,t),hDe(e,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.label,a=s.labelLine,l=s.dataKey,u=s.valueKey,c=_e(this.props,!1),d=_e(o,!1),h=_e(a,!1),f=o&&o.offsetRadius||20,g=r.map(function(m,v){var C=(m.startAngle+m.endAngle)/2,y=Ot(m.cx,m.cy,m.outerRadius+f,C),S=_t(_t(_t(_t({},c),m),{},{stroke:"none"},d),{},{index:v,textAnchor:e.getTextAnchor(y.x,m.cx)},y),_=_t(_t(_t(_t({},c),m),{},{fill:"none",stroke:m.fill},h),{},{index:v,points:[Ot(m.cx,m.cy,m.outerRadius,C),y]}),E=l;return Le(l)&&Le(u)?E="value":Le(l)&&(E=u),G.createElement(at,{key:"label-".concat(m.startAngle,"-").concat(m.endAngle,"-").concat(m.midAngle,"-").concat(v)},a&&e.renderLabelLineItem(a,_,"line"),e.renderLabelItem(o,S,En(m,E)))});return G.createElement(at,{className:"recharts-pie-labels"},g)}},{key:"renderSectorsStatically",value:function(r){var i=this,s=this.props,o=s.activeShape,a=s.blendStroke,l=s.inactiveShape;return r.map(function(u,c){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&r.length!==1)return null;var d=i.isActiveIndex(c),h=l&&i.hasActiveIndex()?l:null,f=d?o:h,g=_t(_t({},u),{},{stroke:a?u.fill:u.stroke,tabIndex:-1});return G.createElement(at,Vc({ref:function(v){v&&!i.sectorRefs.includes(v)&&i.sectorRefs.push(v)},tabIndex:-1,className:"recharts-pie-sector"},Ou(i.props,u,c),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(c)}),G.createElement(W5,Vc({option:f,isActive:d,shapeType:"sector"},g)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,s=i.sectors,o=i.isAnimationActive,a=i.animationBegin,l=i.animationDuration,u=i.animationEasing,c=i.animationId,d=this.state,h=d.prevSectors,f=d.prevIsAnimationActive;return G.createElement(Qs,{begin:a,duration:l,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(c,"-").concat(f),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(g){var m=g.t,v=[],C=s&&s[0],y=C.startAngle;return s.forEach(function(S,_){var E=h&&h[_],R=_>0?yi(S,"paddingAngle",0):0;if(E){var b=hi(E.endAngle-E.startAngle,S.endAngle-S.startAngle),A=_t(_t({},S),{},{startAngle:y+R,endAngle:y+b(m)+R});v.push(A),y=A.endAngle}else{var P=S.endAngle,F=S.startAngle,k=hi(0,P-F),L=k(m),N=_t(_t({},S),{},{startAngle:y+R,endAngle:y+L+R});v.push(N),y=N.endAngle}}),G.createElement(at,null,r.renderSectorsStatically(v))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var o=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"ArrowRight":{var a=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[a].focus(),i.setState({sectorToFocus:a});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,s=r.isAnimationActive,o=this.state.prevSectors;return s&&i&&i.length&&(!o||!Zm(o,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,s=i.hide,o=i.sectors,a=i.className,l=i.label,u=i.cx,c=i.cy,d=i.innerRadius,h=i.outerRadius,f=i.isAnimationActive,g=this.state.isAnimationFinished;if(s||!o||!o.length||!le(u)||!le(c)||!le(d)||!le(h))return null;var m=$e("recharts-pie",a);return G.createElement(at,{tabIndex:this.props.rootTabIndex,className:m,ref:function(C){r.pieRef=C}},this.renderSectors(),l&&this.renderLabels(o),In.renderCallByParent(this.props,null,!1),(!f||g)&&Eo.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,s){if(G.isValidElement(r))return G.cloneElement(r,i);if(Oe(r))return r(i);var o=$e("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return G.createElement(Uw,Vc({},i,{key:s,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(r,i,s){if(G.isValidElement(r))return G.cloneElement(r,i);var o=s;if(Oe(r)&&(o=r(i),G.isValidElement(o)))return o;var a=$e("recharts-pie-label-text",typeof r!="boolean"&&!Oe(r)?r.className:"");return G.createElement(Mu,Vc({},i,{alignmentBaseline:"middle",className:a}),o)}}])}(I.PureComponent);Qy=qo;Fi(qo,"displayName","Pie");Fi(qo,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!ec.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Fi(qo,"parseDeltaAngle",function(t,e){var n=Cr(e-t),r=Math.min(Math.abs(e-t),360);return n*r});Fi(qo,"getRealPieData",function(t){var e=t.data,n=t.children,r=_e(t,!1),i=Ci(n,ob);return e&&e.length?e.map(function(s,o){return _t(_t(_t({payload:s},r),s),i&&i[o]&&i[o].props)}):i&&i.length?i.map(function(s){return _t(_t({},r),s.props)}):[]});Fi(qo,"parseCoordinateOfPie",function(t,e){var n=e.top,r=e.left,i=e.width,s=e.height,o=b5(i,s),a=r+wr(t.cx,i,i/2),l=n+wr(t.cy,s,s/2),u=wr(t.innerRadius,o,0),c=wr(t.outerRadius,o,o*.8),d=t.maxRadius||Math.sqrt(i*i+s*s)/2;return{cx:a,cy:l,innerRadius:u,outerRadius:c,maxRadius:d}});Fi(qo,"getComposedData",function(t){var e=t.item,n=t.offset,r=e.type.defaultProps!==void 0?_t(_t({},e.type.defaultProps),e.props):e.props,i=Qy.getRealPieData(r);if(!i||!i.length)return null;var s=r.cornerRadius,o=r.startAngle,a=r.endAngle,l=r.paddingAngle,u=r.dataKey,c=r.nameKey,d=r.valueKey,h=r.tooltipType,f=Math.abs(r.minAngle),g=Qy.parseCoordinateOfPie(r,n),m=Qy.parseDeltaAngle(o,a),v=Math.abs(m),C=u;Le(u)&&Le(d)?(fs(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),C="value"):Le(u)&&(fs(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),C=d);var y=i.filter(function(A){return En(A,C,0)!==0}).length,S=(v>=360?y:y-1)*l,_=v-y*f-S,E=i.reduce(function(A,P){var F=En(P,C,0);return A+(le(F)?F:0)},0),R;if(E>0){var b;R=i.map(function(A,P){var F=En(A,C,0),k=En(A,c,P),L=(le(F)?F:0)/E,N;P?N=b.endAngle+Cr(m)*l*(F!==0?1:0):N=o;var W=N+Cr(m)*((F!==0?f:0)+L*_),j=(N+W)/2,z=(g.innerRadius+g.outerRadius)/2,q=[{name:k,value:F,payload:A,dataKey:C,type:h}],B=Ot(g.cx,g.cy,z,j);return b=_t(_t(_t({percent:L,cornerRadius:s,name:k,tooltipPayload:q,midAngle:j,middleRadius:z,tooltipPosition:B},A),g),{},{value:En(A,C),startAngle:N,endAngle:W,payload:A,paddingAngle:Cr(m)*l}),b})}return _t(_t({},g),{},{sectors:R,data:i})});var yDe=Math.ceil,CDe=Math.max;function wDe(t,e,n,r){for(var i=-1,s=CDe(yDe((e-t)/(n||1)),0),o=Array(s);s--;)o[r?s:++i]=t,t+=n;return o}var SDe=wDe,EDe=dK,XV=1/0,bDe=17976931348623157e292;function TDe(t){if(!t)return t===0?t:0;if(t=EDe(t),t===XV||t===-XV){var e=t<0?-1:1;return e*bDe}return t===t?t:0}var z5=TDe,RDe=SDe,_De=sb,P0=z5;function ADe(t){return function(e,n,r){return r&&typeof r!="number"&&_De(e,n,r)&&(n=r=void 0),e=P0(e),n===void 0?(n=e,e=0):n=P0(n),r=r===void 0?e<n?1:-1:P0(r),RDe(e,n,r,t)}}var xDe=ADe,PDe=xDe,IDe=PDe(),DDe=IDe;const nS=gt(DDe);function im(t){"@babel/helpers - typeof";return im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},im(t)}function JV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ZV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JV(Object(n),!0).forEach(function(r){K5(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function K5(t,e,n){return e=ODe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ODe(t){var e=MDe(t,"string");return im(e)=="symbol"?e:e+""}function MDe(t,e){if(im(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(im(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var FDe=["Webkit","Moz","O","ms"],NDe=function(e,n){var r=e.replace(/(\w)/,function(s){return s.toUpperCase()}),i=FDe.reduce(function(s,o){return ZV(ZV({},s),{},K5({},o+r,n))},{});return i[e]=n,i};function Xd(t){"@babel/helpers - typeof";return Xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xd(t)}function rS(){return rS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rS.apply(this,arguments)}function eH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function I0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eH(Object(n),!0).forEach(function(r){si(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LDe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tH(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Y5(r.key),r)}}function kDe(t,e,n){return e&&tH(t.prototype,e),n&&tH(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function GDe(t,e,n){return e=iS(e),VDe(t,q5()?Reflect.construct(e,n||[],iS(t).constructor):e.apply(t,n))}function VDe(t,e){if(e&&(Xd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HDe(t)}function HDe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function q5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(q5=function(){return!!t})()}function iS(t){return iS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},iS(t)}function BDe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&YA(t,e)}function YA(t,e){return YA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},YA(t,e)}function si(t,e,n){return e=Y5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Y5(t){var e=$De(t,"string");return Xd(e)=="symbol"?e:e+""}function $De(t,e){if(Xd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Xd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var WDe=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,s=e.x,o=e.width,a=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,u=Cf().domain(nS(0,l)).range([s,s+o-a]),c=u.domain().map(function(d){return u(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(i),scale:u,scaleValues:c}},nH=function(e){return e.changedTouches&&!!e.changedTouches.length},Jd=function(t){function e(n){var r;return LDe(this,e),r=GDe(this,e,[n]),si(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),si(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),si(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,s=i.endIndex,o=i.onDragEnd,a=i.startIndex;o==null||o({endIndex:s,startIndex:a})}),r.detachDragEndListener()}),si(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),si(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),si(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),si(r,"handleSlideDragStart",function(i){var s=nH(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return BDe(e,t),kDe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,s=r.endX,o=this.state.scaleValues,a=this.props,l=a.gap,u=a.data,c=u.length-1,d=Math.min(i,s),h=Math.max(i,s),f=e.getIndexInRange(o,d),g=e.getIndexInRange(o,h);return{startIndex:f-f%l,endIndex:g===c?c:g-g%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,s=i.data,o=i.tickFormatter,a=i.dataKey,l=En(s[r],a,r);return Oe(o)?o(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,s=i.slideMoveStartX,o=i.startX,a=i.endX,l=this.props,u=l.x,c=l.width,d=l.travellerWidth,h=l.startIndex,f=l.endIndex,g=l.onChange,m=r.pageX-s;m>0?m=Math.min(m,u+c-d-a,u+c-d-o):m<0&&(m=Math.max(m,u-o,u-a));var v=this.getIndex({startX:o+m,endX:a+m});(v.startIndex!==h||v.endIndex!==f)&&g&&g(v),this.setState({startX:o+m,endX:a+m,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var s=nH(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,s=i.brushMoveStartX,o=i.movingTravellerId,a=i.endX,l=i.startX,u=this.state[o],c=this.props,d=c.x,h=c.width,f=c.travellerWidth,g=c.onChange,m=c.gap,v=c.data,C={startX:this.state.startX,endX:this.state.endX},y=r.pageX-s;y>0?y=Math.min(y,d+h-f-u):y<0&&(y=Math.max(y,d-u)),C[o]=u+y;var S=this.getIndex(C),_=S.startIndex,E=S.endIndex,R=function(){var A=v.length-1;return o==="startX"&&(a>l?_%m===0:E%m===0)||a<l&&E===A||o==="endX"&&(a>l?E%m===0:_%m===0)||a>l&&E===A};this.setState(si(si({},o,u+y),"brushMoveStartX",r.pageX),function(){g&&R()&&g(S)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var s=this,o=this.state,a=o.scaleValues,l=o.startX,u=o.endX,c=this.state[i],d=a.indexOf(c);if(d!==-1){var h=d+r;if(!(h===-1||h>=a.length)){var f=a[h];i==="startX"&&f>=u||i==="endX"&&f<=l||this.setState(si({},i,f),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,s=r.y,o=r.width,a=r.height,l=r.fill,u=r.stroke;return G.createElement("rect",{stroke:u,fill:l,x:i,y:s,width:o,height:a})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,s=r.y,o=r.width,a=r.height,l=r.data,u=r.children,c=r.padding,d=I.Children.only(u);return d?G.cloneElement(d,{x:i,y:s,width:o,height:a,margin:c,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var s,o,a=this,l=this.props,u=l.y,c=l.travellerWidth,d=l.height,h=l.traveller,f=l.ariaLabel,g=l.data,m=l.startIndex,v=l.endIndex,C=Math.max(r,this.props.x),y=I0(I0({},_e(this.props,!1)),{},{x:C,y:u,width:c,height:d}),S=f||"Min value: ".concat((s=g[m])===null||s===void 0?void 0:s.name,", Max value: ").concat((o=g[v])===null||o===void 0?void 0:o.name);return G.createElement(at,{tabIndex:0,role:"slider","aria-label":S,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(E){["ArrowLeft","ArrowRight"].includes(E.key)&&(E.preventDefault(),E.stopPropagation(),a.handleTravellerMoveKeyboard(E.key==="ArrowRight"?1:-1,i))},onFocus:function(){a.setState({isTravellerFocused:!0})},onBlur:function(){a.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(h,y))}},{key:"renderSlide",value:function(r,i){var s=this.props,o=s.y,a=s.height,l=s.stroke,u=s.travellerWidth,c=Math.min(r,i)+u,d=Math.max(Math.abs(i-r)-u,0);return G.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:c,y:o,width:d,height:a})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,s=r.endIndex,o=r.y,a=r.height,l=r.travellerWidth,u=r.stroke,c=this.state,d=c.startX,h=c.endX,f=5,g={pointerEvents:"none",fill:u};return G.createElement(at,{className:"recharts-brush-texts"},G.createElement(Mu,rS({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,h)-f,y:o+a/2},g),this.getTextOfTick(i)),G.createElement(Mu,rS({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,h)+l+f,y:o+a/2},g),this.getTextOfTick(s)))}},{key:"render",value:function(){var r=this.props,i=r.data,s=r.className,o=r.children,a=r.x,l=r.y,u=r.width,c=r.height,d=r.alwaysShowText,h=this.state,f=h.startX,g=h.endX,m=h.isTextActive,v=h.isSlideMoving,C=h.isTravellerMoving,y=h.isTravellerFocused;if(!i||!i.length||!le(a)||!le(l)||!le(u)||!le(c)||u<=0||c<=0)return null;var S=$e("recharts-brush",s),_=G.Children.count(o)===1,E=NDe("userSelect","none");return G.createElement(at,{className:S,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:E},this.renderBackground(),_&&this.renderPanorama(),this.renderSlide(f,g),this.renderTravellerLayer(f,"startX"),this.renderTravellerLayer(g,"endX"),(m||v||C||y||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,s=r.y,o=r.width,a=r.height,l=r.stroke,u=Math.floor(s+a/2)-1;return G.createElement(G.Fragment,null,G.createElement("rect",{x:i,y:s,width:o,height:a,fill:l,stroke:"none"}),G.createElement("line",{x1:i+1,y1:u,x2:i+o-1,y2:u,fill:"none",stroke:"#fff"}),G.createElement("line",{x1:i+1,y1:u+2,x2:i+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var s;return G.isValidElement(r)?s=G.cloneElement(r,i):Oe(r)?s=r(i):s=e.renderDefaultTraveller(i),s}},{key:"getDerivedStateFromProps",value:function(r,i){var s=r.data,o=r.width,a=r.x,l=r.travellerWidth,u=r.updateId,c=r.startIndex,d=r.endIndex;if(s!==i.prevData||u!==i.prevUpdateId)return I0({prevData:s,prevTravellerWidth:l,prevUpdateId:u,prevX:a,prevWidth:o},s&&s.length?WDe({data:s,width:o,x:a,travellerWidth:l,startIndex:c,endIndex:d}):{scale:null,scaleValues:null});if(i.scale&&(o!==i.prevWidth||a!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([a,a+o-l]);var h=i.scale.domain().map(function(f){return i.scale(f)});return{prevData:s,prevTravellerWidth:l,prevUpdateId:u,prevX:a,prevWidth:o,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(r,i){for(var s=r.length,o=0,a=s-1;a-o>1;){var l=Math.floor((o+a)/2);r[l]>i?a=l:o=l}return i>=r[a]?a:o}}])}(I.PureComponent);si(Jd,"displayName","Brush");si(Jd,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var jDe=nO;function UDe(t,e){var n;return jDe(t,function(r,i,s){return n=e(r,i,s),!n}),!!n}var zDe=UDe,KDe=G3,qDe=Zs,YDe=zDe,QDe=Zr,XDe=sb;function JDe(t,e,n){var r=QDe(t)?KDe:YDe;return n&&XDe(t,e,n)&&(e=void 0),r(t,qDe(e))}var ZDe=JDe;const eOe=gt(ZDe);var $s=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},rH=oK;function tOe(t,e,n){e=="__proto__"&&rH?rH(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var nOe=tOe,rOe=nOe,iOe=iK,sOe=Zs;function oOe(t,e){var n={};return e=sOe(e),iOe(t,function(r,i,s){rOe(n,i,e(r,i,s))}),n}var aOe=oOe;const lOe=gt(aOe);function uOe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var cOe=uOe,dOe=nO;function hOe(t,e){var n=!0;return dOe(t,function(r,i,s){return n=!!e(r,i,s),n}),n}var pOe=hOe,fOe=cOe,gOe=pOe,mOe=Zs,vOe=Zr,yOe=sb;function COe(t,e,n){var r=vOe(t)?fOe:gOe;return n&&yOe(t,e,n)&&(e=void 0),r(t,mOe(e))}var wOe=COe;const Q5=gt(wOe);var SOe=["x","y"];function sm(t){"@babel/helpers - typeof";return sm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sm(t)}function QA(){return QA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},QA.apply(this,arguments)}function iH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Op(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iH(Object(n),!0).forEach(function(r){EOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function EOe(t,e,n){return e=bOe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bOe(t){var e=TOe(t,"string");return sm(e)=="symbol"?e:e+""}function TOe(t,e){if(sm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(sm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ROe(t,e){if(t==null)return{};var n=_Oe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function _Oe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function AOe(t,e){var n=t.x,r=t.y,i=ROe(t,SOe),s="".concat(n),o=parseInt(s,10),a="".concat(r),l=parseInt(a,10),u="".concat(e.height||i.height),c=parseInt(u,10),d="".concat(e.width||i.width),h=parseInt(d,10);return Op(Op(Op(Op(Op({},e),i),o?{x:o}:{}),l?{y:l}:{}),{},{height:c,width:h,name:e.name,radius:e.radius})}function sH(t){return G.createElement(W5,QA({shapeType:"rectangle",propTransformer:AOe,activeClassName:"recharts-active-bar"},t))}var xOe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var s=le(r)||Yde(r);return s?e(r,i):(s||Nu(),n)}},POe=["value","background"],X5;function Zd(t){"@babel/helpers - typeof";return Zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zd(t)}function IOe(t,e){if(t==null)return{};var n=DOe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function DOe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function sS(){return sS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sS.apply(this,arguments)}function oH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oH(Object(n),!0).forEach(function(r){ba(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function OOe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aH(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Z5(r.key),r)}}function MOe(t,e,n){return e&&aH(t.prototype,e),n&&aH(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function FOe(t,e,n){return e=oS(e),NOe(t,J5()?Reflect.construct(e,n||[],oS(t).constructor):e.apply(t,n))}function NOe(t,e){if(e&&(Zd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LOe(t)}function LOe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function J5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(J5=function(){return!!t})()}function oS(t){return oS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},oS(t)}function kOe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XA(t,e)}function XA(t,e){return XA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},XA(t,e)}function ba(t,e,n){return e=Z5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Z5(t){var e=GOe(t,"string");return Zd(e)=="symbol"?e:e+""}function GOe(t,e){if(Zd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Zd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var tv=function(t){function e(){var n;OOe(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=FOe(this,e,[].concat(i)),ba(n,"state",{isAnimationFinished:!1}),ba(n,"id",Uh("recharts-bar-")),ba(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),ba(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return kOe(e,t),MOe(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,s=this.props,o=s.shape,a=s.dataKey,l=s.activeIndex,u=s.activeBar,c=_e(this.props,!1);return r&&r.map(function(d,h){var f=h===l,g=f?u:o,m=dn(dn(dn({},c),d),{},{isActive:f,option:g,index:h,dataKey:a,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return G.createElement(at,sS({className:"recharts-bar-rectangle"},Ou(i.props,d,h),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(h)}),G.createElement(sH,m))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,s=i.data,o=i.layout,a=i.isAnimationActive,l=i.animationBegin,u=i.animationDuration,c=i.animationEasing,d=i.animationId,h=this.state.prevData;return G.createElement(Qs,{begin:l,duration:u,isActive:a,easing:c,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(f){var g=f.t,m=s.map(function(v,C){var y=h&&h[C];if(y){var S=hi(y.x,v.x),_=hi(y.y,v.y),E=hi(y.width,v.width),R=hi(y.height,v.height);return dn(dn({},v),{},{x:S(g),y:_(g),width:E(g),height:R(g)})}if(o==="horizontal"){var b=hi(0,v.height),A=b(g);return dn(dn({},v),{},{y:v.y+v.height-A,height:A})}var P=hi(0,v.width),F=P(g);return dn(dn({},v),{},{width:F})});return G.createElement(at,null,r.renderRectanglesStatically(m))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,s=r.isAnimationActive,o=this.state.prevData;return s&&i&&i.length&&(!o||!Zm(o,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,s=i.data,o=i.dataKey,a=i.activeIndex,l=_e(this.props.background,!1);return s.map(function(u,c){u.value;var d=u.background,h=IOe(u,POe);if(!d)return null;var f=dn(dn(dn(dn(dn({},h),{},{fill:"#eee"},d),l),Ou(r.props,u,c)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:c,className:"recharts-bar-background-rectangle"});return G.createElement(sH,sS({key:"background-bar-".concat(c),option:r.props.background,isActive:c===a},f))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.data,a=s.xAxis,l=s.yAxis,u=s.layout,c=s.children,d=Ci(c,ev);if(!d)return null;var h=u==="vertical"?o[0].height/2:o[0].width/2,f=function(v,C){var y=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:y,errorVal:En(v,C)}},g={clipPath:r?"url(#clipPath-".concat(i,")"):null};return G.createElement(at,g,d.map(function(m){return G.cloneElement(m,{key:"error-bar-".concat(i,"-").concat(m.props.dataKey),data:o,xAxis:a,yAxis:l,layout:u,offset:h,dataPointFormatter:f})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,s=r.data,o=r.className,a=r.xAxis,l=r.yAxis,u=r.left,c=r.top,d=r.width,h=r.height,f=r.isAnimationActive,g=r.background,m=r.id;if(i||!s||!s.length)return null;var v=this.state.isAnimationFinished,C=$e("recharts-bar",o),y=a&&a.allowDataOverflow,S=l&&l.allowDataOverflow,_=y||S,E=Le(m)?this.id:m;return G.createElement(at,{className:C},y||S?G.createElement("defs",null,G.createElement("clipPath",{id:"clipPath-".concat(E)},G.createElement("rect",{x:y?u:u-d/2,y:S?c:c-h/2,width:y?d:d*2,height:S?h:h*2}))):null,G.createElement(at,{className:"recharts-bar-rectangles",clipPath:_?"url(#clipPath-".concat(E,")"):null},g?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(_,E),(!f||v)&&Eo.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(I.PureComponent);X5=tv;ba(tv,"displayName","Bar");ba(tv,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!ec.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});ba(tv,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,s=t.xAxis,o=t.yAxis,a=t.xAxisTicks,l=t.yAxisTicks,u=t.stackedData,c=t.dataStartIndex,d=t.displayedData,h=t.offset,f=f_e(r,n);if(!f)return null;var g=e.layout,m=n.type.defaultProps,v=m!==void 0?dn(dn({},m),n.props):n.props,C=v.dataKey,y=v.children,S=v.minPointSize,_=g==="horizontal"?o:s,E=u?_.scale.domain():null,R=S_e({numericAxis:_}),b=Ci(y,ob),A=d.map(function(P,F){var k,L,N,W,j,z;u?k=g_e(u[c+F],E):(k=En(P,C),Array.isArray(k)||(k=[R,k]));var q=xOe(S,X5.defaultProps.minPointSize)(k[1],F);if(g==="horizontal"){var B,U=[o.scale(k[0]),o.scale(k[1])],K=U[0],ie=U[1];L=ZG({axis:s,ticks:a,bandSize:i,offset:f.offset,entry:P,index:F}),N=(B=ie??K)!==null&&B!==void 0?B:void 0,W=f.size;var Q=K-ie;if(j=Number.isNaN(Q)?0:Q,z={x:L,y:o.y,width:W,height:o.height},Math.abs(q)>0&&Math.abs(j)<Math.abs(q)){var se=Cr(j||q)*(Math.abs(q)-Math.abs(j));N-=se,j+=se}}else{var Me=[s.scale(k[0]),s.scale(k[1])],Ee=Me[0],qe=Me[1];if(L=Ee,N=ZG({axis:o,ticks:l,bandSize:i,offset:f.offset,entry:P,index:F}),W=qe-Ee,j=f.size,z={x:s.x,y:N,width:s.width,height:j},Math.abs(q)>0&&Math.abs(W)<Math.abs(q)){var Ye=Cr(W||q)*(Math.abs(q)-Math.abs(W));W+=Ye}}return dn(dn(dn({},P),{},{x:L,y:N,width:W,height:j,value:u?k:k[1],payload:P,background:z},b&&b[F]&&b[F].props),{},{tooltipPayload:[S5(n,P)],tooltipPosition:{x:L+W/2,y:N+j/2}})});return dn({data:A,layout:g},h)});function om(t){"@babel/helpers - typeof";return om=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},om(t)}function VOe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lH(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,e6(r.key),r)}}function HOe(t,e,n){return e&&lH(t.prototype,e),n&&lH(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function uH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function is(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uH(Object(n),!0).forEach(function(r){Rb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rb(t,e,n){return e=e6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e6(t){var e=BOe(t,"string");return om(e)=="symbol"?e:e+""}function BOe(t,e){if(om(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(om(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $Oe=function(e,n,r,i,s){var o=e.width,a=e.height,l=e.layout,u=e.children,c=Object.keys(n),d={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:a-r.bottom,bottomMirror:a-r.bottom},h=!!di(u,tv);return c.reduce(function(f,g){var m=n[g],v=m.orientation,C=m.domain,y=m.padding,S=y===void 0?{}:y,_=m.mirror,E=m.reversed,R="".concat(v).concat(_?"Mirror":""),b,A,P,F,k;if(m.type==="number"&&(m.padding==="gap"||m.padding==="no-gap")){var L=C[1]-C[0],N=1/0,W=m.categoricalDomain.sort(Jde);if(W.forEach(function(Me,Ee){Ee>0&&(N=Math.min((Me||0)-(W[Ee-1]||0),N))}),Number.isFinite(N)){var j=N/L,z=m.layout==="vertical"?r.height:r.width;if(m.padding==="gap"&&(b=j*z/2),m.padding==="no-gap"){var q=wr(e.barCategoryGap,j*z),B=j*z/2;b=B-q-(B-q)/z*q}}}i==="xAxis"?A=[r.left+(S.left||0)+(b||0),r.left+r.width-(S.right||0)-(b||0)]:i==="yAxis"?A=l==="horizontal"?[r.top+r.height-(S.bottom||0),r.top+(S.top||0)]:[r.top+(S.top||0)+(b||0),r.top+r.height-(S.bottom||0)-(b||0)]:A=m.range,E&&(A=[A[1],A[0]]);var U=v5(m,s,h),K=U.scale,ie=U.realScaleType;K.domain(C).range(A),y5(K);var Q=C5(K,is(is({},m),{},{realScaleType:ie}));i==="xAxis"?(k=v==="top"&&!_||v==="bottom"&&_,P=r.left,F=d[R]-k*m.height):i==="yAxis"&&(k=v==="left"&&!_||v==="right"&&_,P=d[R]-k*m.width,F=r.top);var se=is(is(is({},m),Q),{},{realScaleType:ie,x:P,y:F,scale:K,width:i==="xAxis"?r.width:m.width,height:i==="yAxis"?r.height:m.height});return se.bandSize=$w(se,Q),!m.hide&&i==="xAxis"?d[R]+=(k?-1:1)*se.height:m.hide||(d[R]+=(k?-1:1)*se.width),is(is({},f),{},Rb({},g,se))},{})},t6=function(e,n){var r=e.x,i=e.y,s=n.x,o=n.y;return{x:Math.min(r,s),y:Math.min(i,o),width:Math.abs(s-r),height:Math.abs(o-i)}},WOe=function(e){var n=e.x1,r=e.y1,i=e.x2,s=e.y2;return t6({x:n,y:r},{x:i,y:s})},n6=function(){function t(e){VOe(this,t),this.scale=e}return HOe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,s=r.position;if(n!==void 0){if(s)switch(s){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(n)+a}default:return this.scale(n)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],s=r[r.length-1];return i<=s?n>=i&&n<=s:n>=s&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();Rb(n6,"EPS",1e-4);var OO=function(e){var n=Object.keys(e).reduce(function(r,i){return is(is({},r),{},Rb({},i,n6.create(e[i])))},{});return is(is({},n),{},{apply:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=s.bandAware,a=s.position;return lOe(i,function(l,u){return n[u].apply(l,{bandAware:o,position:a})})},isInRange:function(i){return Q5(i,function(s,o){return n[o].isInRange(s)})}})};function jOe(t){return(t%180+180)%180}var UOe=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=jOe(i),o=s*Math.PI/180,a=Math.atan(r/n),l=o>a&&o<Math.PI-a?r/Math.sin(o):n/Math.cos(o);return Math.abs(l)},zOe=Zs,KOe=qm,qOe=rb;function YOe(t){return function(e,n,r){var i=Object(e);if(!KOe(e)){var s=zOe(n);e=qOe(e),n=function(a){return s(i[a],a,i)}}var o=t(e,n,r);return o>-1?i[s?e[o]:o]:void 0}}var QOe=YOe,XOe=z5;function JOe(t){var e=XOe(t),n=e%1;return e===e?n?e-n:e:0}var ZOe=JOe,eMe=J3,tMe=Zs,nMe=ZOe,rMe=Math.max;function iMe(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:nMe(n);return i<0&&(i=rMe(r+i,0)),eMe(t,tMe(e),i)}var sMe=iMe,oMe=QOe,aMe=sMe,lMe=oMe(aMe),uMe=lMe;const cMe=gt(uMe);var dMe=tde(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),MO=I.createContext(void 0),FO=I.createContext(void 0),r6=I.createContext(void 0),i6=I.createContext({}),s6=I.createContext(void 0),o6=I.createContext(0),a6=I.createContext(0),cH=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,s=n.offset,o=e.clipPathId,a=e.children,l=e.width,u=e.height,c=dMe(s);return G.createElement(MO.Provider,{value:r},G.createElement(FO.Provider,{value:i},G.createElement(i6.Provider,{value:s},G.createElement(r6.Provider,{value:c},G.createElement(s6.Provider,{value:o},G.createElement(o6.Provider,{value:u},G.createElement(a6.Provider,{value:l},a)))))))},hMe=function(){return I.useContext(s6)},l6=function(e){var n=I.useContext(MO);n==null&&Nu();var r=n[e];return r==null&&Nu(),r},pMe=function(){var e=I.useContext(MO);return ga(e)},fMe=function(){var e=I.useContext(FO),n=cMe(e,function(r){return Q5(r.domain,Number.isFinite)});return n||ga(e)},u6=function(e){var n=I.useContext(FO);n==null&&Nu();var r=n[e];return r==null&&Nu(),r},gMe=function(){var e=I.useContext(r6);return e},mMe=function(){return I.useContext(i6)},NO=function(){return I.useContext(a6)},LO=function(){return I.useContext(o6)};function eh(t){"@babel/helpers - typeof";return eh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eh(t)}function vMe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yMe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,d6(r.key),r)}}function CMe(t,e,n){return e&&yMe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function wMe(t,e,n){return e=aS(e),SMe(t,c6()?Reflect.construct(e,n||[],aS(t).constructor):e.apply(t,n))}function SMe(t,e){if(e&&(eh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EMe(t)}function EMe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(c6=function(){return!!t})()}function aS(t){return aS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},aS(t)}function bMe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&JA(t,e)}function JA(t,e){return JA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},JA(t,e)}function dH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dH(Object(n),!0).forEach(function(r){kO(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kO(t,e,n){return e=d6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d6(t){var e=TMe(t,"string");return eh(e)=="symbol"?e:e+""}function TMe(t,e){if(eh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(eh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function RMe(t,e){return PMe(t)||xMe(t,e)||AMe(t,e)||_Me()}function _Me(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AMe(t,e){if(t){if(typeof t=="string")return pH(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pH(t,e)}}function pH(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function xMe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function PMe(t){if(Array.isArray(t))return t}function ZA(){return ZA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ZA.apply(this,arguments)}var IMe=function(e,n){var r;return G.isValidElement(e)?r=G.cloneElement(e,n):Oe(e)?r=e(n):r=G.createElement("line",ZA({},n,{className:"recharts-reference-line-line"})),r},DMe=function(e,n,r,i,s,o,a,l,u){var c=s.x,d=s.y,h=s.width,f=s.height;if(r){var g=u.y,m=e.y.apply(g,{position:o});if($s(u,"discard")&&!e.y.isInRange(m))return null;var v=[{x:c+h,y:m},{x:c,y:m}];return l==="left"?v.reverse():v}if(n){var C=u.x,y=e.x.apply(C,{position:o});if($s(u,"discard")&&!e.x.isInRange(y))return null;var S=[{x:y,y:d+f},{x:y,y:d}];return a==="top"?S.reverse():S}if(i){var _=u.segment,E=_.map(function(R){return e.apply(R,{position:o})});return $s(u,"discard")&&eOe(E,function(R){return!e.isInRange(R)})?null:E}return null};function OMe(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,s=t.yAxisId,o=t.shape,a=t.className,l=t.alwaysShow,u=hMe(),c=l6(i),d=u6(s),h=gMe();if(!u||!h)return null;fs(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=OO({x:c.scale,y:d.scale}),g=Tn(e),m=Tn(n),v=r&&r.length===2,C=DMe(f,g,m,v,h,t.position,c.orientation,d.orientation,t);if(!C)return null;var y=RMe(C,2),S=y[0],_=S.x,E=S.y,R=y[1],b=R.x,A=R.y,P=$s(t,"hidden")?"url(#".concat(u,")"):void 0,F=hH(hH({clipPath:P},_e(t,!0)),{},{x1:_,y1:E,x2:b,y2:A});return G.createElement(at,{className:$e("recharts-reference-line",a)},IMe(o,F),In.renderCallByParent(t,WOe({x1:_,y1:E,x2:b,y2:A})))}var Lu=function(t){function e(){return vMe(this,e),wMe(this,e,arguments)}return bMe(e,t),CMe(e,[{key:"render",value:function(){return G.createElement(OMe,this.props)}}])}(G.Component);kO(Lu,"displayName","ReferenceLine");kO(Lu,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function ex(){return ex=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ex.apply(this,arguments)}function th(t){"@babel/helpers - typeof";return th=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},th(t)}function fH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fH(Object(n),!0).forEach(function(r){_b(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function MMe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function FMe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,p6(r.key),r)}}function NMe(t,e,n){return e&&FMe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function LMe(t,e,n){return e=lS(e),kMe(t,h6()?Reflect.construct(e,n||[],lS(t).constructor):e.apply(t,n))}function kMe(t,e){if(e&&(th(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return GMe(t)}function GMe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(h6=function(){return!!t})()}function lS(t){return lS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},lS(t)}function VMe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tx(t,e)}function tx(t,e){return tx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},tx(t,e)}function _b(t,e,n){return e=p6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p6(t){var e=HMe(t,"string");return th(e)=="symbol"?e:e+""}function HMe(t,e){if(th(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(th(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var BMe=function(e){var n=e.x,r=e.y,i=e.xAxis,s=e.yAxis,o=OO({x:i.scale,y:s.scale}),a=o.apply({x:n,y:r},{bandAware:!0});return $s(e,"discard")&&!o.isInRange(a)?null:a},Ab=function(t){function e(){return MMe(this,e),LMe(this,e,arguments)}return VMe(e,t),NMe(e,[{key:"render",value:function(){var r=this.props,i=r.x,s=r.y,o=r.r,a=r.alwaysShow,l=r.clipPathId,u=Tn(i),c=Tn(s);if(fs(a===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!c)return null;var d=BMe(this.props);if(!d)return null;var h=d.x,f=d.y,g=this.props,m=g.shape,v=g.className,C=$s(this.props,"hidden")?"url(#".concat(l,")"):void 0,y=gH(gH({clipPath:C},_e(this.props,!0)),{},{cx:h,cy:f});return G.createElement(at,{className:$e("recharts-reference-dot",v)},e.renderDot(m,y),In.renderCallByParent(this.props,{x:h-o,y:f-o,width:2*o,height:2*o}))}}])}(G.Component);_b(Ab,"displayName","ReferenceDot");_b(Ab,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});_b(Ab,"renderDot",function(t,e){var n;return G.isValidElement(t)?n=G.cloneElement(t,e):Oe(t)?n=t(e):n=G.createElement(yb,ex({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function nx(){return nx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nx.apply(this,arguments)}function nh(t){"@babel/helpers - typeof";return nh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nh(t)}function mH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mH(Object(n),!0).forEach(function(r){xb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $Me(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function WMe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,g6(r.key),r)}}function jMe(t,e,n){return e&&WMe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function UMe(t,e,n){return e=uS(e),zMe(t,f6()?Reflect.construct(e,n||[],uS(t).constructor):e.apply(t,n))}function zMe(t,e){if(e&&(nh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KMe(t)}function KMe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(f6=function(){return!!t})()}function uS(t){return uS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},uS(t)}function qMe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rx(t,e)}function rx(t,e){return rx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},rx(t,e)}function xb(t,e,n){return e=g6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g6(t){var e=YMe(t,"string");return nh(e)=="symbol"?e:e+""}function YMe(t,e){if(nh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(nh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var QMe=function(e,n,r,i,s){var o=s.x1,a=s.x2,l=s.y1,u=s.y2,c=s.xAxis,d=s.yAxis;if(!c||!d)return null;var h=OO({x:c.scale,y:d.scale}),f={x:e?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:r?h.y.apply(l,{position:"start"}):h.y.rangeMin},g={x:n?h.x.apply(a,{position:"end"}):h.x.rangeMax,y:i?h.y.apply(u,{position:"end"}):h.y.rangeMax};return $s(s,"discard")&&(!h.isInRange(f)||!h.isInRange(g))?null:t6(f,g)},Pb=function(t){function e(){return $Me(this,e),UMe(this,e,arguments)}return qMe(e,t),jMe(e,[{key:"render",value:function(){var r=this.props,i=r.x1,s=r.x2,o=r.y1,a=r.y2,l=r.className,u=r.alwaysShow,c=r.clipPathId;fs(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=Tn(i),h=Tn(s),f=Tn(o),g=Tn(a),m=this.props.shape;if(!d&&!h&&!f&&!g&&!m)return null;var v=QMe(d,h,f,g,this.props);if(!v&&!m)return null;var C=$s(this.props,"hidden")?"url(#".concat(c,")"):void 0;return G.createElement(at,{className:$e("recharts-reference-area",l)},e.renderRect(m,vH(vH({clipPath:C},_e(this.props,!0)),v)),In.renderCallByParent(this.props,v))}}])}(G.Component);xb(Pb,"displayName","ReferenceArea");xb(Pb,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});xb(Pb,"renderRect",function(t,e){var n;return G.isValidElement(t)?n=G.cloneElement(t,e):Oe(t)?n=t(e):n=G.createElement(DO,nx({},e,{className:"recharts-reference-area-rect"})),n});function m6(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function XMe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return UOe(r,n)}function JMe(t,e,n){var r=n==="width",i=t.x,s=t.y,o=t.width,a=t.height;return e===1?{start:r?i:s,end:r?i+o:s+a}:{start:r?i+o:s+a,end:r?i:s}}function cS(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var s=n();return t*(e-t*s/2-r)>=0&&t*(e+t*s/2-i)<=0}function ZMe(t,e){return m6(t,e+1)}function eFe(t,e,n,r,i){for(var s=(r||[]).slice(),o=e.start,a=e.end,l=0,u=1,c=o,d=function(){var g=r==null?void 0:r[l];if(g===void 0)return{v:m6(r,u)};var m=l,v,C=function(){return v===void 0&&(v=n(g,m)),v},y=g.coordinate,S=l===0||cS(t,y,C,c,a);S||(l=0,c=o,u+=1),S&&(c=y+t*(C()/2+i),l+=u)},h;u<=s.length;)if(h=d(),h)return h.v;return[]}function am(t){"@babel/helpers - typeof";return am=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},am(t)}function yH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yH(Object(n),!0).forEach(function(r){tFe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tFe(t,e,n){return e=nFe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nFe(t){var e=rFe(t,"string");return am(e)=="symbol"?e:e+""}function rFe(t,e){if(am(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(am(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iFe(t,e,n,r,i){for(var s=(r||[]).slice(),o=s.length,a=e.start,l=e.end,u=function(h){var f=s[h],g,m=function(){return g===void 0&&(g=n(f,h)),g};if(h===o-1){var v=t*(f.coordinate+t*m()/2-l);s[h]=f=nr(nr({},f),{},{tickCoord:v>0?f.coordinate-v*t:f.coordinate})}else s[h]=f=nr(nr({},f),{},{tickCoord:f.coordinate});var C=cS(t,f.tickCoord,m,a,l);C&&(l=f.tickCoord-t*(m()/2+i),s[h]=nr(nr({},f),{},{isShow:!0}))},c=o-1;c>=0;c--)u(c);return s}function sFe(t,e,n,r,i,s){var o=(r||[]).slice(),a=o.length,l=e.start,u=e.end;if(s){var c=r[a-1],d=n(c,a-1),h=t*(c.coordinate+t*d/2-u);o[a-1]=c=nr(nr({},c),{},{tickCoord:h>0?c.coordinate-h*t:c.coordinate});var f=cS(t,c.tickCoord,function(){return d},l,u);f&&(u=c.tickCoord-t*(d/2+i),o[a-1]=nr(nr({},c),{},{isShow:!0}))}for(var g=s?a-1:a,m=function(y){var S=o[y],_,E=function(){return _===void 0&&(_=n(S,y)),_};if(y===0){var R=t*(S.coordinate-t*E()/2-l);o[y]=S=nr(nr({},S),{},{tickCoord:R<0?S.coordinate-R*t:S.coordinate})}else o[y]=S=nr(nr({},S),{},{tickCoord:S.coordinate});var b=cS(t,S.tickCoord,E,l,u);b&&(l=S.tickCoord+t*(E()/2+i),o[y]=nr(nr({},S),{},{isShow:!0}))},v=0;v<g;v++)m(v);return o}function GO(t,e,n){var r=t.tick,i=t.ticks,s=t.viewBox,o=t.minTickGap,a=t.orientation,l=t.interval,u=t.tickFormatter,c=t.unit,d=t.angle;if(!i||!i.length||!r)return[];if(le(l)||ec.isSsr)return ZMe(i,typeof l=="number"&&le(l)?l:0);var h=[],f=a==="top"||a==="bottom"?"width":"height",g=c&&f==="width"?yf(c,{fontSize:e,letterSpacing:n}):{width:0,height:0},m=function(S,_){var E=Oe(u)?u(S.value,_):S.value;return f==="width"?XMe(yf(E,{fontSize:e,letterSpacing:n}),g,d):yf(E,{fontSize:e,letterSpacing:n})[f]},v=i.length>=2?Cr(i[1].coordinate-i[0].coordinate):1,C=JMe(s,v,f);return l==="equidistantPreserveStart"?eFe(v,C,m,i,o):(l==="preserveStart"||l==="preserveStartEnd"?h=sFe(v,C,m,i,o,l==="preserveStartEnd"):h=iFe(v,C,m,i,o),h.filter(function(y){return y.isShow}))}var oFe=["viewBox"],aFe=["viewBox"],lFe=["ticks"];function rh(t){"@babel/helpers - typeof";return rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rh(t)}function Hc(){return Hc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hc.apply(this,arguments)}function CH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CH(Object(n),!0).forEach(function(r){VO(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function D0(t,e){if(t==null)return{};var n=uFe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function uFe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function cFe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wH(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,y6(r.key),r)}}function dFe(t,e,n){return e&&wH(t.prototype,e),n&&wH(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function hFe(t,e,n){return e=dS(e),pFe(t,v6()?Reflect.construct(e,n||[],dS(t).constructor):e.apply(t,n))}function pFe(t,e){if(e&&(rh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fFe(t)}function fFe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(v6=function(){return!!t})()}function dS(t){return dS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},dS(t)}function gFe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ix(t,e)}function ix(t,e){return ix=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ix(t,e)}function VO(t,e,n){return e=y6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y6(t){var e=mFe(t,"string");return rh(e)=="symbol"?e:e+""}function mFe(t,e){if(rh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(rh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Jh=function(t){function e(n){var r;return cFe(this,e),r=hFe(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return gFe(e,t),dFe(e,[{key:"shouldComponentUpdate",value:function(r,i){var s=r.viewBox,o=D0(r,oFe),a=this.props,l=a.viewBox,u=D0(a,aFe);return!rd(s,l)||!rd(o,u)||!rd(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,s=i.x,o=i.y,a=i.width,l=i.height,u=i.orientation,c=i.tickSize,d=i.mirror,h=i.tickMargin,f,g,m,v,C,y,S=d?-1:1,_=r.tickSize||c,E=le(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":f=g=r.coordinate,v=o+ +!d*l,m=v-S*_,y=m-S*h,C=E;break;case"left":m=v=r.coordinate,g=s+ +!d*a,f=g-S*_,C=f-S*h,y=E;break;case"right":m=v=r.coordinate,g=s+ +d*a,f=g+S*_,C=f+S*h,y=E;break;default:f=g=r.coordinate,v=o+ +d*l,m=v+S*_,y=m+S*h,C=E;break}return{line:{x1:f,y1:m,x2:g,y2:v},tick:{x:C,y}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,o;switch(i){case"left":o=s?"start":"end";break;case"right":o=s?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=s?"start":"end";break;default:o=s?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,s=r.y,o=r.width,a=r.height,l=r.orientation,u=r.mirror,c=r.axisLine,d=vn(vn(vn({},_e(this.props,!1)),_e(c,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var h=+(l==="top"&&!u||l==="bottom"&&u);d=vn(vn({},d),{},{x1:i,y1:s+h*a,x2:i+o,y2:s+h*a})}else{var f=+(l==="left"&&!u||l==="right"&&u);d=vn(vn({},d),{},{x1:i+f*o,y1:s,x2:i+f*o,y2:s+a})}return G.createElement("line",Hc({},d,{className:$e("recharts-cartesian-axis-line",yi(c,"className"))}))}},{key:"renderTicks",value:function(r,i,s){var o=this,a=this.props,l=a.tickLine,u=a.stroke,c=a.tick,d=a.tickFormatter,h=a.unit,f=GO(vn(vn({},this.props),{},{ticks:r}),i,s),g=this.getTickTextAnchor(),m=this.getTickVerticalAnchor(),v=_e(this.props,!1),C=_e(c,!1),y=vn(vn({},v),{},{fill:"none"},_e(l,!1)),S=f.map(function(_,E){var R=o.getTickLineCoord(_),b=R.line,A=R.tick,P=vn(vn(vn(vn({textAnchor:g,verticalAnchor:m},v),{},{stroke:"none",fill:u},C),A),{},{index:E,payload:_,visibleTicksCount:f.length,tickFormatter:d});return G.createElement(at,Hc({className:"recharts-cartesian-axis-tick",key:"tick-".concat(_.value,"-").concat(_.coordinate,"-").concat(_.tickCoord)},Ou(o.props,_,E)),l&&G.createElement("line",Hc({},y,b,{className:$e("recharts-cartesian-axis-tick-line",yi(l,"className"))})),c&&e.renderTickItem(c,P,"".concat(Oe(d)?d(_.value,E):_.value).concat(h||"")))});return G.createElement("g",{className:"recharts-cartesian-axis-ticks"},S)}},{key:"render",value:function(){var r=this,i=this.props,s=i.axisLine,o=i.width,a=i.height,l=i.ticksGenerator,u=i.className,c=i.hide;if(c)return null;var d=this.props,h=d.ticks,f=D0(d,lFe),g=h;return Oe(l)&&(g=h&&h.length>0?l(this.props):l(f)),o<=0||a<=0||!g||!g.length?null:G.createElement(at,{className:$e("recharts-cartesian-axis",u),ref:function(v){r.layerReference=v}},s&&this.renderAxisLine(),this.renderTicks(g,this.state.fontSize,this.state.letterSpacing),In.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,s){var o,a=$e(i.className,"recharts-cartesian-axis-tick-value");return G.isValidElement(r)?o=G.cloneElement(r,vn(vn({},i),{},{className:a})):Oe(r)?o=r(vn(vn({},i),{},{className:a})):o=G.createElement(Mu,Hc({},i,{className:"recharts-cartesian-axis-tick-value"}),s),o}}])}(I.Component);VO(Jh,"displayName","CartesianAxis");VO(Jh,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var vFe=["x1","y1","x2","y2","key"],yFe=["offset"];function ku(t){"@babel/helpers - typeof";return ku=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ku(t)}function SH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function or(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SH(Object(n),!0).forEach(function(r){CFe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function CFe(t,e,n){return e=wFe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wFe(t){var e=SFe(t,"string");return ku(e)=="symbol"?e:e+""}function SFe(t,e){if(ku(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ku(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yl(){return Yl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yl.apply(this,arguments)}function EH(t,e){if(t==null)return{};var n=EFe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function EFe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var bFe=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,s=e.y,o=e.width,a=e.height,l=e.ry;return G.createElement("rect",{x:i,y:s,ry:l,width:o,height:a,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function C6(t,e){var n;if(G.isValidElement(t))n=G.cloneElement(t,e);else if(Oe(t))n=t(e);else{var r=e.x1,i=e.y1,s=e.x2,o=e.y2,a=e.key,l=EH(e,vFe),u=_e(l,!1);u.offset;var c=EH(u,yFe);n=G.createElement("line",Yl({},c,{x1:r,y1:i,x2:s,y2:o,fill:"none",key:a}))}return n}function TFe(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,s=t.horizontalPoints;if(!i||!s||!s.length)return null;var o=s.map(function(a,l){var u=or(or({},t),{},{x1:e,y1:a,x2:e+n,y2:a,key:"line-".concat(l),index:l});return C6(i,u)});return G.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function RFe(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,s=t.verticalPoints;if(!i||!s||!s.length)return null;var o=s.map(function(a,l){var u=or(or({},t),{},{x1:a,y1:e,x2:a,y2:e+n,key:"line-".concat(l),index:l});return C6(i,u)});return G.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function _Fe(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,s=t.width,o=t.height,a=t.horizontalPoints,l=t.horizontal,u=l===void 0?!0:l;if(!u||!e||!e.length)return null;var c=a.map(function(h){return Math.round(h+i-i)}).sort(function(h,f){return h-f});i!==c[0]&&c.unshift(0);var d=c.map(function(h,f){var g=!c[f+1],m=g?i+o-h:c[f+1]-h;if(m<=0)return null;var v=f%e.length;return G.createElement("rect",{key:"react-".concat(f),y:h,x:r,height:m,width:s,stroke:"none",fill:e[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return G.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function AFe(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,s=t.x,o=t.y,a=t.width,l=t.height,u=t.verticalPoints;if(!n||!r||!r.length)return null;var c=u.map(function(h){return Math.round(h+s-s)}).sort(function(h,f){return h-f});s!==c[0]&&c.unshift(0);var d=c.map(function(h,f){var g=!c[f+1],m=g?s+a-h:c[f+1]-h;if(m<=0)return null;var v=f%r.length;return G.createElement("rect",{key:"react-".concat(f),x:h,y:o,width:m,height:l,stroke:"none",fill:r[v],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return G.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var xFe=function(e,n){var r=e.xAxis,i=e.width,s=e.height,o=e.offset;return m5(GO(or(or(or({},Jh.defaultProps),r),{},{ticks:vo(r,!0),viewBox:{x:0,y:0,width:i,height:s}})),o.left,o.left+o.width,n)},PFe=function(e,n){var r=e.yAxis,i=e.width,s=e.height,o=e.offset;return m5(GO(or(or(or({},Jh.defaultProps),r),{},{ticks:vo(r,!0),viewBox:{x:0,y:0,width:i,height:s}})),o.top,o.top+o.height,n)},dc={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function HO(t){var e,n,r,i,s,o,a=NO(),l=LO(),u=mMe(),c=or(or({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:dc.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:dc.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:dc.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:dc.horizontalFill,vertical:(s=t.vertical)!==null&&s!==void 0?s:dc.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:dc.verticalFill,x:le(t.x)?t.x:u.left,y:le(t.y)?t.y:u.top,width:le(t.width)?t.width:u.width,height:le(t.height)?t.height:u.height}),d=c.x,h=c.y,f=c.width,g=c.height,m=c.syncWithTicks,v=c.horizontalValues,C=c.verticalValues,y=pMe(),S=fMe();if(!le(f)||f<=0||!le(g)||g<=0||!le(d)||d!==+d||!le(h)||h!==+h)return null;var _=c.verticalCoordinatesGenerator||xFe,E=c.horizontalCoordinatesGenerator||PFe,R=c.horizontalPoints,b=c.verticalPoints;if((!R||!R.length)&&Oe(E)){var A=v&&v.length,P=E({yAxis:S?or(or({},S),{},{ticks:A?v:S.ticks}):void 0,width:a,height:l,offset:u},A?!0:m);fs(Array.isArray(P),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(ku(P),"]")),Array.isArray(P)&&(R=P)}if((!b||!b.length)&&Oe(_)){var F=C&&C.length,k=_({xAxis:y?or(or({},y),{},{ticks:F?C:y.ticks}):void 0,width:a,height:l,offset:u},F?!0:m);fs(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(ku(k),"]")),Array.isArray(k)&&(b=k)}return G.createElement("g",{className:"recharts-cartesian-grid"},G.createElement(bFe,{fill:c.fill,fillOpacity:c.fillOpacity,x:c.x,y:c.y,width:c.width,height:c.height,ry:c.ry}),G.createElement(TFe,Yl({},c,{offset:u,horizontalPoints:R,xAxis:y,yAxis:S})),G.createElement(RFe,Yl({},c,{offset:u,verticalPoints:b,xAxis:y,yAxis:S})),G.createElement(_Fe,Yl({},c,{horizontalPoints:R})),G.createElement(AFe,Yl({},c,{verticalPoints:b})))}HO.displayName="CartesianGrid";var IFe=["type","layout","connectNulls","ref"],DFe=["key"];function ih(t){"@babel/helpers - typeof";return ih=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ih(t)}function bH(t,e){if(t==null)return{};var n=OFe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function OFe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Tf(){return Tf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tf.apply(this,arguments)}function TH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ii(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TH(Object(n),!0).forEach(function(r){ss(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hc(t){return LFe(t)||NFe(t)||FFe(t)||MFe()}function MFe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FFe(t,e){if(t){if(typeof t=="string")return sx(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sx(t,e)}}function NFe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function LFe(t){if(Array.isArray(t))return sx(t)}function sx(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function kFe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function RH(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,S6(r.key),r)}}function GFe(t,e,n){return e&&RH(t.prototype,e),n&&RH(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function VFe(t,e,n){return e=hS(e),HFe(t,w6()?Reflect.construct(e,n||[],hS(t).constructor):e.apply(t,n))}function HFe(t,e){if(e&&(ih(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BFe(t)}function BFe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(w6=function(){return!!t})()}function hS(t){return hS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},hS(t)}function $Fe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ox(t,e)}function ox(t,e){return ox=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ox(t,e)}function ss(t,e,n){return e=S6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S6(t){var e=WFe(t,"string");return ih(e)=="symbol"?e:e+""}function WFe(t,e){if(ih(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ih(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Zh=function(t){function e(){var n;kFe(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=VFe(this,e,[].concat(i)),ss(n,"state",{isAnimationFinished:!0,totalLength:0}),ss(n,"generateSimpleStrokeDasharray",function(o,a){return"".concat(a,"px ").concat(o-a,"px")}),ss(n,"getStrokeDasharray",function(o,a,l){var u=l.reduce(function(C,y){return C+y});if(!u)return n.generateSimpleStrokeDasharray(a,o);for(var c=Math.floor(o/u),d=o%u,h=a-o,f=[],g=0,m=0;g<l.length;m+=l[g],++g)if(m+l[g]>d){f=[].concat(hc(l.slice(0,g)),[d-m]);break}var v=f.length%2===0?[0,h]:[h];return[].concat(hc(e.repeat(l,c)),hc(f),v).map(function(C){return"".concat(C,"px")}).join(", ")}),ss(n,"id",Uh("recharts-line-")),ss(n,"pathRef",function(o){n.mainCurve=o}),ss(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),ss(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return $Fe(e,t),GFe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.points,a=s.xAxis,l=s.yAxis,u=s.layout,c=s.children,d=Ci(c,ev);if(!d)return null;var h=function(m,v){return{x:m.x,y:m.y,value:m.value,errorVal:En(m.payload,v)}},f={clipPath:r?"url(#clipPath-".concat(i,")"):null};return G.createElement(at,f,d.map(function(g){return G.cloneElement(g,{key:"bar-".concat(g.props.dataKey),data:o,xAxis:a,yAxis:l,layout:u,dataPointFormatter:h})}))}},{key:"renderDots",value:function(r,i,s){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var a=this.props,l=a.dot,u=a.points,c=a.dataKey,d=_e(this.props,!1),h=_e(l,!0),f=u.map(function(m,v){var C=ii(ii(ii({key:"dot-".concat(v),r:3},d),h),{},{index:v,cx:m.x,cy:m.y,value:m.value,dataKey:c,payload:m.payload,points:u});return e.renderDotItem(l,C)}),g={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return G.createElement(at,Tf({className:"recharts-line-dots",key:"dots"},g),f)}},{key:"renderCurveStatically",value:function(r,i,s,o){var a=this.props,l=a.type,u=a.layout,c=a.connectNulls;a.ref;var d=bH(a,IFe),h=ii(ii(ii({},_e(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(s,")"):null,points:r},o),{},{type:l,layout:u,connectNulls:c});return G.createElement(Uw,Tf({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var s=this,o=this.props,a=o.points,l=o.strokeDasharray,u=o.isAnimationActive,c=o.animationBegin,d=o.animationDuration,h=o.animationEasing,f=o.animationId,g=o.animateNewValues,m=o.width,v=o.height,C=this.state,y=C.prevPoints,S=C.totalLength;return G.createElement(Qs,{begin:c,duration:d,isActive:u,easing:h,from:{t:0},to:{t:1},key:"line-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(_){var E=_.t;if(y){var R=y.length/a.length,b=a.map(function(L,N){var W=Math.floor(N*R);if(y[W]){var j=y[W],z=hi(j.x,L.x),q=hi(j.y,L.y);return ii(ii({},L),{},{x:z(E),y:q(E)})}if(g){var B=hi(m*2,L.x),U=hi(v/2,L.y);return ii(ii({},L),{},{x:B(E),y:U(E)})}return ii(ii({},L),{},{x:L.x,y:L.y})});return s.renderCurveStatically(b,r,i)}var A=hi(0,S),P=A(E),F;if(l){var k="".concat(l).split(/[,\s]+/gim).map(function(L){return parseFloat(L)});F=s.getStrokeDasharray(P,S,k)}else F=s.generateSimpleStrokeDasharray(S,P);return s.renderCurveStatically(a,r,i,{strokeDasharray:F})})}},{key:"renderCurve",value:function(r,i){var s=this.props,o=s.points,a=s.isAnimationActive,l=this.state,u=l.prevPoints,c=l.totalLength;return a&&o&&o.length&&(!u&&c>0||!Zm(u,o))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(o,r,i)}},{key:"render",value:function(){var r,i=this.props,s=i.hide,o=i.dot,a=i.points,l=i.className,u=i.xAxis,c=i.yAxis,d=i.top,h=i.left,f=i.width,g=i.height,m=i.isAnimationActive,v=i.id;if(s||!a||!a.length)return null;var C=this.state.isAnimationFinished,y=a.length===1,S=$e("recharts-line",l),_=u&&u.allowDataOverflow,E=c&&c.allowDataOverflow,R=_||E,b=Le(v)?this.id:v,A=(r=_e(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},P=A.r,F=P===void 0?3:P,k=A.strokeWidth,L=k===void 0?2:k,N=ahe(o)?o:{},W=N.clipDot,j=W===void 0?!0:W,z=F*2+L;return G.createElement(at,{className:S},_||E?G.createElement("defs",null,G.createElement("clipPath",{id:"clipPath-".concat(b)},G.createElement("rect",{x:_?h:h-f/2,y:E?d:d-g/2,width:_?f:f*2,height:E?g:g*2})),!j&&G.createElement("clipPath",{id:"clipPath-dots-".concat(b)},G.createElement("rect",{x:h-z/2,y:d-z/2,width:f+z,height:g+z}))):null,!y&&this.renderCurve(R,b),this.renderErrorBar(R,b),(y||o)&&this.renderDots(R,j,b),(!m||C)&&Eo.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var s=r.length%2!==0?[].concat(hc(r),[0]):r,o=[],a=0;a<i;++a)o=[].concat(hc(o),hc(s));return o}},{key:"renderDotItem",value:function(r,i){var s;if(G.isValidElement(r))s=G.cloneElement(r,i);else if(Oe(r))s=r(i);else{var o=i.key,a=bH(i,DFe),l=$e("recharts-line-dot",typeof r!="boolean"?r.className:"");s=G.createElement(yb,Tf({key:o},a,{className:l}))}return s}}])}(I.PureComponent);ss(Zh,"displayName","Line");ss(Zh,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!ec.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});ss(Zh,"getComposedData",function(t){var e=t.props,n=t.xAxis,r=t.yAxis,i=t.xAxisTicks,s=t.yAxisTicks,o=t.dataKey,a=t.bandSize,l=t.displayedData,u=t.offset,c=e.layout,d=l.map(function(h,f){var g=En(h,o);return c==="horizontal"?{x:JG({axis:n,ticks:i,bandSize:a,entry:h,index:f}),y:Le(g)?null:r.scale(g),value:g,payload:h}:{x:Le(g)?null:n.scale(g),y:JG({axis:r,ticks:s,bandSize:a,entry:h,index:f}),value:g,payload:h}});return ii({points:d,layout:c},u)});function sh(t){"@babel/helpers - typeof";return sh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sh(t)}function jFe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function UFe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,T6(r.key),r)}}function zFe(t,e,n){return e&&UFe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function KFe(t,e,n){return e=pS(e),qFe(t,E6()?Reflect.construct(e,n||[],pS(t).constructor):e.apply(t,n))}function qFe(t,e){if(e&&(sh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return YFe(t)}function YFe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E6=function(){return!!t})()}function pS(t){return pS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},pS(t)}function QFe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ax(t,e)}function ax(t,e){return ax=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ax(t,e)}function b6(t,e,n){return e=T6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T6(t){var e=XFe(t,"string");return sh(e)=="symbol"?e:e+""}function XFe(t,e){if(sh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(sh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function lx(){return lx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lx.apply(this,arguments)}function JFe(t){var e=t.xAxisId,n=NO(),r=LO(),i=l6(e);return i==null?null:I.createElement(Jh,lx({},i,{className:$e("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return vo(o,!0)}}))}var nv=function(t){function e(){return jFe(this,e),KFe(this,e,arguments)}return QFe(e,t),zFe(e,[{key:"render",value:function(){return I.createElement(JFe,this.props)}}])}(I.Component);b6(nv,"displayName","XAxis");b6(nv,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function oh(t){"@babel/helpers - typeof";return oh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oh(t)}function ZFe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eNe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,A6(r.key),r)}}function tNe(t,e,n){return e&&eNe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function nNe(t,e,n){return e=fS(e),rNe(t,R6()?Reflect.construct(e,n||[],fS(t).constructor):e.apply(t,n))}function rNe(t,e){if(e&&(oh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iNe(t)}function iNe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function R6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(R6=function(){return!!t})()}function fS(t){return fS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fS(t)}function sNe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ux(t,e)}function ux(t,e){return ux=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ux(t,e)}function _6(t,e,n){return e=A6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A6(t){var e=oNe(t,"string");return oh(e)=="symbol"?e:e+""}function oNe(t,e){if(oh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(oh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function cx(){return cx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cx.apply(this,arguments)}var aNe=function(e){var n=e.yAxisId,r=NO(),i=LO(),s=u6(n);return s==null?null:I.createElement(Jh,cx({},s,{className:$e("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(a){return vo(a,!0)}}))},rv=function(t){function e(){return ZFe(this,e),nNe(this,e,arguments)}return sNe(e,t),tNe(e,[{key:"render",value:function(){return I.createElement(aNe,this.props)}}])}(I.Component);_6(rv,"displayName","YAxis");_6(rv,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function _H(t){return dNe(t)||cNe(t)||uNe(t)||lNe()}function lNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uNe(t,e){if(t){if(typeof t=="string")return dx(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dx(t,e)}}function cNe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function dNe(t){if(Array.isArray(t))return dx(t)}function dx(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var hx=function(e,n,r,i,s){var o=Ci(e,Lu),a=Ci(e,Ab),l=[].concat(_H(o),_H(a)),u=Ci(e,Pb),c="".concat(i,"Id"),d=i[0],h=n;if(l.length&&(h=l.reduce(function(m,v){if(v.props[c]===r&&$s(v.props,"extendDomain")&&le(v.props[d])){var C=v.props[d];return[Math.min(m[0],C),Math.max(m[1],C)]}return m},h)),u.length){var f="".concat(d,"1"),g="".concat(d,"2");h=u.reduce(function(m,v){if(v.props[c]===r&&$s(v.props,"extendDomain")&&le(v.props[f])&&le(v.props[g])){var C=v.props[f],y=v.props[g];return[Math.min(m[0],C,y),Math.max(m[1],C,y)]}return m},h)}return s&&s.length&&(h=s.reduce(function(m,v){return le(v)?[Math.min(m[0],v),Math.max(m[1],v)]:m},h)),h},x6={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function s(l,u,c,d,h){if(typeof c!="function")throw new TypeError("The listener must be a function");var f=new i(c,d||l,h),g=n?n+u:u;return l._events[g]?l._events[g].fn?l._events[g]=[l._events[g],f]:l._events[g].push(f):(l._events[g]=f,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],c,d;if(this._eventsCount===0)return u;for(d in c=this._events)e.call(c,d)&&u.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},a.prototype.listeners=function(u){var c=n?n+u:u,d=this._events[c];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,g=new Array(f);h<f;h++)g[h]=d[h].fn;return g},a.prototype.listenerCount=function(u){var c=n?n+u:u,d=this._events[c];return d?d.fn?1:d.length:0},a.prototype.emit=function(u,c,d,h,f,g){var m=n?n+u:u;if(!this._events[m])return!1;var v=this._events[m],C=arguments.length,y,S;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),C){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,c),!0;case 3:return v.fn.call(v.context,c,d),!0;case 4:return v.fn.call(v.context,c,d,h),!0;case 5:return v.fn.call(v.context,c,d,h,f),!0;case 6:return v.fn.call(v.context,c,d,h,f,g),!0}for(S=1,y=new Array(C-1);S<C;S++)y[S-1]=arguments[S];v.fn.apply(v.context,y)}else{var _=v.length,E;for(S=0;S<_;S++)switch(v[S].once&&this.removeListener(u,v[S].fn,void 0,!0),C){case 1:v[S].fn.call(v[S].context);break;case 2:v[S].fn.call(v[S].context,c);break;case 3:v[S].fn.call(v[S].context,c,d);break;case 4:v[S].fn.call(v[S].context,c,d,h);break;default:if(!y)for(E=1,y=new Array(C-1);E<C;E++)y[E-1]=arguments[E];v[S].fn.apply(v[S].context,y)}}return!0},a.prototype.on=function(u,c,d){return s(this,u,c,d,!1)},a.prototype.once=function(u,c,d){return s(this,u,c,d,!0)},a.prototype.removeListener=function(u,c,d,h){var f=n?n+u:u;if(!this._events[f])return this;if(!c)return o(this,f),this;var g=this._events[f];if(g.fn)g.fn===c&&(!h||g.once)&&(!d||g.context===d)&&o(this,f);else{for(var m=0,v=[],C=g.length;m<C;m++)(g[m].fn!==c||h&&!g[m].once||d&&g[m].context!==d)&&v.push(g[m]);v.length?this._events[f]=v.length===1?v[0]:v:o(this,f)}return this},a.prototype.removeAllListeners=function(u){var c;return u?(c=n?n+u:u,this._events[c]&&o(this,c)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(x6);var hNe=x6.exports;const pNe=gt(hNe);var O0=new pNe,M0="recharts.syncMouseEvents";function lm(t){"@babel/helpers - typeof";return lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lm(t)}function fNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gNe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,P6(r.key),r)}}function mNe(t,e,n){return e&&gNe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function F0(t,e,n){return e=P6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function P6(t){var e=vNe(t,"string");return lm(e)=="symbol"?e:e+""}function vNe(t,e){if(lm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(lm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var yNe=function(){function t(){fNe(this,t),F0(this,"activeIndex",0),F0(this,"coordinateList",[]),F0(this,"layout","horizontal")}return mNe(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,s=i===void 0?null:i,o=n.container,a=o===void 0?null:o,l=n.layout,u=l===void 0?null:l,c=n.offset,d=c===void 0?null:c,h=n.mouseHandlerCallback,f=h===void 0?null:h;this.coordinateList=(r=s??this.coordinateList)!==null&&r!==void 0?r:[],this.container=a??this.container,this.layout=u??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=f??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),s=i.x,o=i.y,a=i.height,l=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,c=((r=window)===null||r===void 0?void 0:r.scrollY)||0,d=s+l+u,h=o+this.offset.top+a/2+c;this.mouseHandlerCallback({pageX:d,pageY:h})}}}])}();function CNe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&le(r)&&le(i))return!0}return!1}function wNe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function I6(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,s=t.endAngle,o=Ot(e,n,r,i),a=Ot(e,n,r,s);return{points:[o,a],cx:e,cy:n,radius:r,startAngle:i,endAngle:s}}function SNe(t,e,n){var r,i,s,o;if(t==="horizontal")r=e.x,s=r,i=n.top,o=n.top+n.height;else if(t==="vertical")i=e.y,o=i,r=n.left,s=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var a=e.cx,l=e.cy,u=e.innerRadius,c=e.outerRadius,d=e.angle,h=Ot(a,l,u,d),f=Ot(a,l,c,d);r=h.x,i=h.y,s=f.x,o=f.y}else return I6(e);return[{x:r,y:i},{x:s,y:o}]}function um(t){"@babel/helpers - typeof";return um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},um(t)}function AH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ay(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AH(Object(n),!0).forEach(function(r){ENe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ENe(t,e,n){return e=bNe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bNe(t){var e=TNe(t,"string");return um(e)=="symbol"?e:e+""}function TNe(t,e){if(um(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(um(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function RNe(t){var e,n,r=t.element,i=t.tooltipEventType,s=t.isActive,o=t.activeCoordinate,a=t.activePayload,l=t.offset,u=t.activeTooltipIndex,c=t.tooltipAxisBandSize,d=t.layout,h=t.chartName,f=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!f||!s||!o||h!=="ScatterChart"&&i!=="axis")return null;var g,m=Uw;if(h==="ScatterChart")g=o,m=$Pe;else if(h==="BarChart")g=wNe(d,o,l,c),m=DO;else if(d==="radial"){var v=I6(o),C=v.cx,y=v.cy,S=v.radius,_=v.startAngle,E=v.endAngle;g={cx:C,cy:y,startAngle:_,endAngle:E,innerRadius:S,outerRadius:S},m=A5}else g={points:SNe(d,o,l)},m=Uw;var R=ay(ay(ay(ay({stroke:"#ccc",pointerEvents:"none"},l),g),_e(f,!1)),{},{payload:a,payloadIndex:u,className:$e("recharts-tooltip-cursor",f.className)});return I.isValidElement(f)?I.cloneElement(f,R):I.createElement(m,R)}var _Ne=["item"],ANe=["children","className","width","height","style","compact","title","desc"];function ah(t){"@babel/helpers - typeof";return ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ah(t)}function Bc(){return Bc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bc.apply(this,arguments)}function xH(t,e){return INe(t)||PNe(t,e)||O6(t,e)||xNe()}function xNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PNe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function INe(t){if(Array.isArray(t))return t}function PH(t,e){if(t==null)return{};var n=DNe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function DNe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ONe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function MNe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,M6(r.key),r)}}function FNe(t,e,n){return e&&MNe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function NNe(t,e,n){return e=gS(e),LNe(t,D6()?Reflect.construct(e,n||[],gS(t).constructor):e.apply(t,n))}function LNe(t,e){if(e&&(ah(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kNe(t)}function kNe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function D6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(D6=function(){return!!t})()}function gS(t){return gS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},gS(t)}function GNe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&px(t,e)}function px(t,e){return px=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},px(t,e)}function lh(t){return BNe(t)||HNe(t)||O6(t)||VNe()}function VNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O6(t,e){if(t){if(typeof t=="string")return fx(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fx(t,e)}}function HNe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function BNe(t){if(Array.isArray(t))return fx(t)}function fx(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function IH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function X(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IH(Object(n),!0).forEach(function(r){Pe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pe(t,e,n){return e=M6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M6(t){var e=$Ne(t,"string");return ah(e)=="symbol"?e:e+""}function $Ne(t,e){if(ah(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ah(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var WNe={xAxis:["bottom","top"],yAxis:["left","right"]},jNe={width:"100%",height:"100%"},F6={x:0,y:0};function ly(t){return t}var UNe=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},zNe=function(e,n,r,i){var s=n.find(function(c){return c&&c.index===r});if(s){if(e==="horizontal")return{x:s.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:s.coordinate};if(e==="centric"){var o=s.coordinate,a=i.radius;return X(X(X({},i),Ot(i.cx,i.cy,a,o)),{},{angle:o,radius:a})}var l=s.coordinate,u=i.angle;return X(X(X({},i),Ot(i.cx,i.cy,l,u)),{},{angle:u,radius:l})}return F6},Ib=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,s=n.dataEndIndex,o=(r??[]).reduce(function(a,l){var u=l.props.data;return u&&u.length?[].concat(lh(a),lh(u)):a},[]);return o.length>0?o:e&&e.length&&le(i)&&le(s)?e.slice(i,s+1):[]};function N6(t){return t==="number"?[0,"auto"]:void 0}var gx=function(e,n,r,i){var s=e.graphicalItems,o=e.tooltipAxis,a=Ib(n,e);return r<0||!s||!s.length||r>=a.length?null:s.reduce(function(l,u){var c,d=(c=u.props.data)!==null&&c!==void 0?c:n;d&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(d=d.slice(e.dataStartIndex,e.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var f=d===void 0?a:d;h=pw(f,o.dataKey,i)}else h=d&&d[r]||a[r];return h?[].concat(lh(l),[S5(u,h)]):l},[])},DH=function(e,n,r,i){var s=i||{x:e.chartX,y:e.chartY},o=UNe(s,r),a=e.orderedTooltipTicks,l=e.tooltipAxis,u=e.tooltipTicks,c=l_e(o,a,u,l);if(c>=0&&u){var d=u[c]&&u[c].value,h=gx(e,n,c,d),f=zNe(r,a,c,s);return{activeTooltipIndex:c,activeLabel:d,activePayload:h,activeCoordinate:f}}return null},KNe=function(e,n){var r=n.axes,i=n.graphicalItems,s=n.axisType,o=n.axisIdKey,a=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.layout,d=e.children,h=e.stackOffset,f=g5(c,s);return r.reduce(function(g,m){var v,C=m.type.defaultProps!==void 0?X(X({},m.type.defaultProps),m.props):m.props,y=C.type,S=C.dataKey,_=C.allowDataOverflow,E=C.allowDuplicatedCategory,R=C.scale,b=C.ticks,A=C.includeHidden,P=C[o];if(g[P])return g;var F=Ib(e.data,{graphicalItems:i.filter(function(Q){var se,Me=o in Q.props?Q.props[o]:(se=Q.type.defaultProps)===null||se===void 0?void 0:se[o];return Me===P}),dataStartIndex:l,dataEndIndex:u}),k=F.length,L,N,W;CNe(C.domain,_,y)&&(L=PA(C.domain,null,_),f&&(y==="number"||R!=="auto")&&(W=wf(F,S,"category")));var j=N6(y);if(!L||L.length===0){var z,q=(z=C.domain)!==null&&z!==void 0?z:j;if(S){if(L=wf(F,S,y),y==="category"&&f){var B=Xde(L);E&&B?(N=L,L=nS(0,k)):E||(L=nV(q,L,m).reduce(function(Q,se){return Q.indexOf(se)>=0?Q:[].concat(lh(Q),[se])},[]))}else if(y==="category")E?L=L.filter(function(Q){return Q!==""&&!Le(Q)}):L=nV(q,L,m).reduce(function(Q,se){return Q.indexOf(se)>=0||se===""||Le(se)?Q:[].concat(lh(Q),[se])},[]);else if(y==="number"){var U=p_e(F,i.filter(function(Q){var se,Me,Ee=o in Q.props?Q.props[o]:(se=Q.type.defaultProps)===null||se===void 0?void 0:se[o],qe="hide"in Q.props?Q.props.hide:(Me=Q.type.defaultProps)===null||Me===void 0?void 0:Me.hide;return Ee===P&&(A||!qe)}),S,s,c);U&&(L=U)}f&&(y==="number"||R!=="auto")&&(W=wf(F,S,"category"))}else f?L=nS(0,k):a&&a[P]&&a[P].hasStack&&y==="number"?L=h==="expand"?[0,1]:w5(a[P].stackGroups,l,u):L=f5(F,i.filter(function(Q){var se=o in Q.props?Q.props[o]:Q.type.defaultProps[o],Me="hide"in Q.props?Q.props.hide:Q.type.defaultProps.hide;return se===P&&(A||!Me)}),y,c,!0);if(y==="number")L=hx(d,L,P,s,b),q&&(L=PA(q,L,_));else if(y==="category"&&q){var K=q,ie=L.every(function(Q){return K.indexOf(Q)>=0});ie&&(L=K)}}return X(X({},g),{},Pe({},P,X(X({},C),{},{axisType:s,domain:L,categoricalDomain:W,duplicateDomain:N,originalDomain:(v=C.domain)!==null&&v!==void 0?v:j,isCategorical:f,layout:c})))},{})},qNe=function(e,n){var r=n.graphicalItems,i=n.Axis,s=n.axisType,o=n.axisIdKey,a=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.layout,d=e.children,h=Ib(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:u}),f=h.length,g=g5(c,s),m=-1;return r.reduce(function(v,C){var y=C.type.defaultProps!==void 0?X(X({},C.type.defaultProps),C.props):C.props,S=y[o],_=N6("number");if(!v[S]){m++;var E;return g?E=nS(0,f):a&&a[S]&&a[S].hasStack?(E=w5(a[S].stackGroups,l,u),E=hx(d,E,S,s)):(E=PA(_,f5(h,r.filter(function(R){var b,A,P=o in R.props?R.props[o]:(b=R.type.defaultProps)===null||b===void 0?void 0:b[o],F="hide"in R.props?R.props.hide:(A=R.type.defaultProps)===null||A===void 0?void 0:A.hide;return P===S&&!F}),"number",c),i.defaultProps.allowDataOverflow),E=hx(d,E,S,s)),X(X({},v),{},Pe({},S,X(X({axisType:s},i.defaultProps),{},{hide:!0,orientation:yi(WNe,"".concat(s,".").concat(m%2),null),domain:E,originalDomain:_,isCategorical:g,layout:c})))}return v},{})},YNe=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,s=n.AxisComp,o=n.graphicalItems,a=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.children,d="".concat(i,"Id"),h=Ci(c,s),f={};return h&&h.length?f=KNe(e,{axes:h,graphicalItems:o,axisType:i,axisIdKey:d,stackGroups:a,dataStartIndex:l,dataEndIndex:u}):o&&o.length&&(f=qNe(e,{Axis:s,graphicalItems:o,axisType:i,axisIdKey:d,stackGroups:a,dataStartIndex:l,dataEndIndex:u})),f},QNe=function(e){var n=ga(e),r=vo(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:rO(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:$w(n,r)}},OH=function(e){var n=e.children,r=e.defaultShowTooltip,i=di(n,Jd),s=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(s=i.props.startIndex),i.props.endIndex>=0&&(o=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},XNe=function(e){return!e||!e.length?!1:e.some(function(n){var r=wo(n&&n.type);return r&&r.indexOf("Bar")>=0})},MH=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},JNe=function(e,n){var r=e.props,i=e.graphicalItems,s=e.xAxisMap,o=s===void 0?{}:s,a=e.yAxisMap,l=a===void 0?{}:a,u=r.width,c=r.height,d=r.children,h=r.margin||{},f=di(d,Jd),g=di(d,au),m=Object.keys(l).reduce(function(E,R){var b=l[R],A=b.orientation;return!b.mirror&&!b.hide?X(X({},E),{},Pe({},A,E[A]+b.width)):E},{left:h.left||0,right:h.right||0}),v=Object.keys(o).reduce(function(E,R){var b=o[R],A=b.orientation;return!b.mirror&&!b.hide?X(X({},E),{},Pe({},A,yi(E,"".concat(A))+b.height)):E},{top:h.top||0,bottom:h.bottom||0}),C=X(X({},v),m),y=C.bottom;f&&(C.bottom+=f.props.height||Jd.defaultProps.height),g&&n&&(C=d_e(C,i,r,n));var S=u-C.left-C.right,_=c-C.top-C.bottom;return X(X({brushBottom:y},C),{},{width:Math.max(S,0),height:Math.max(_,0)})},ZNe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},L6=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,s=i===void 0?"axis":i,o=e.validateTooltipEventTypes,a=o===void 0?["axis"]:o,l=e.axisComponents,u=e.legendContent,c=e.formatAxisMap,d=e.defaultProps,h=function(C,y){var S=y.graphicalItems,_=y.stackGroups,E=y.offset,R=y.updateId,b=y.dataStartIndex,A=y.dataEndIndex,P=C.barSize,F=C.layout,k=C.barGap,L=C.barCategoryGap,N=C.maxBarSize,W=MH(F),j=W.numericAxisName,z=W.cateAxisName,q=XNe(S),B=[];return S.forEach(function(U,K){var ie=Ib(C.data,{graphicalItems:[U],dataStartIndex:b,dataEndIndex:A}),Q=U.type.defaultProps!==void 0?X(X({},U.type.defaultProps),U.props):U.props,se=Q.dataKey,Me=Q.maxBarSize,Ee=Q["".concat(j,"Id")],qe=Q["".concat(z,"Id")],Ye={},bt=l.reduce(function(kn,fr){var Qn=y["".concat(fr.axisType,"Map")],Es=Q["".concat(fr.axisType,"Id")];Qn&&Qn[Es]||fr.axisType==="zAxis"||Nu();var Yo=Qn[Es];return X(X({},kn),{},Pe(Pe({},fr.axisType,Yo),"".concat(fr.axisType,"Ticks"),vo(Yo)))},Ye),de=bt[z],xe=bt["".concat(z,"Ticks")],fe=_&&_[Ee]&&_[Ee].hasStack&&E_e(U,_[Ee].stackGroups),Z=wo(U.type).indexOf("Bar")>=0,Fe=$w(de,xe),pe=[],ke=q&&u_e({barSize:P,stackGroups:_,totalSize:ZNe(bt,z)});if(Z){var Ze,yt,_n=Le(Me)?N:Me,ei=(Ze=(yt=$w(de,xe,!0))!==null&&yt!==void 0?yt:_n)!==null&&Ze!==void 0?Ze:0;pe=c_e({barGap:k,barCategoryGap:L,bandSize:ei!==Fe?ei:Fe,sizeList:ke[qe],maxBarSize:_n}),ei!==Fe&&(pe=pe.map(function(kn){return X(X({},kn),{},{position:X(X({},kn.position),{},{offset:kn.position.offset-ei/2})})}))}var Nr=U&&U.type&&U.type.getComposedData;Nr&&B.push({props:X(X({},Nr(X(X({},bt),{},{displayedData:ie,props:C,dataKey:se,item:U,bandSize:Fe,barPosition:pe,offset:E,stackedData:fe,layout:F,dataStartIndex:b,dataEndIndex:A}))),{},Pe(Pe(Pe({key:U.key||"item-".concat(K)},j,bt[j]),z,bt[z]),"animationId",R)),childIndex:che(U,C.children),item:U})}),B},f=function(C,y){var S=C.props,_=C.dataStartIndex,E=C.dataEndIndex,R=C.updateId;if(!Yk({props:S}))return null;var b=S.children,A=S.layout,P=S.stackOffset,F=S.data,k=S.reverseStackOrder,L=MH(A),N=L.numericAxisName,W=L.cateAxisName,j=Ci(b,r),z=w_e(F,j,"".concat(N,"Id"),"".concat(W,"Id"),P,k),q=l.reduce(function(Q,se){var Me="".concat(se.axisType,"Map");return X(X({},Q),{},Pe({},Me,YNe(S,X(X({},se),{},{graphicalItems:j,stackGroups:se.axisType===N&&z,dataStartIndex:_,dataEndIndex:E}))))},{}),B=JNe(X(X({},q),{},{props:S,graphicalItems:j}),y==null?void 0:y.legendBBox);Object.keys(q).forEach(function(Q){q[Q]=c(S,q[Q],B,Q.replace("Map",""),n)});var U=q["".concat(W,"Map")],K=QNe(U),ie=h(S,X(X({},q),{},{dataStartIndex:_,dataEndIndex:E,updateId:R,graphicalItems:j,stackGroups:z,offset:B}));return X(X({formattedGraphicalItems:ie,graphicalItems:j,offset:B,stackGroups:z},K),q)},g=function(v){function C(y){var S,_,E;return ONe(this,C),E=NNe(this,C,[y]),Pe(E,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Pe(E,"accessibilityManager",new yNe),Pe(E,"handleLegendBBoxUpdate",function(R){if(R){var b=E.state,A=b.dataStartIndex,P=b.dataEndIndex,F=b.updateId;E.setState(X({legendBBox:R},f({props:E.props,dataStartIndex:A,dataEndIndex:P,updateId:F},X(X({},E.state),{},{legendBBox:R}))))}}),Pe(E,"handleReceiveSyncEvent",function(R,b,A){if(E.props.syncId===R){if(A===E.eventEmitterSymbol&&typeof E.props.syncMethod!="function")return;E.applySyncEvent(b)}}),Pe(E,"handleBrushChange",function(R){var b=R.startIndex,A=R.endIndex;if(b!==E.state.dataStartIndex||A!==E.state.dataEndIndex){var P=E.state.updateId;E.setState(function(){return X({dataStartIndex:b,dataEndIndex:A},f({props:E.props,dataStartIndex:b,dataEndIndex:A,updateId:P},E.state))}),E.triggerSyncEvent({dataStartIndex:b,dataEndIndex:A})}}),Pe(E,"handleMouseEnter",function(R){var b=E.getMouseInfo(R);if(b){var A=X(X({},b),{},{isTooltipActive:!0});E.setState(A),E.triggerSyncEvent(A);var P=E.props.onMouseEnter;Oe(P)&&P(A,R)}}),Pe(E,"triggeredAfterMouseMove",function(R){var b=E.getMouseInfo(R),A=b?X(X({},b),{},{isTooltipActive:!0}):{isTooltipActive:!1};E.setState(A),E.triggerSyncEvent(A);var P=E.props.onMouseMove;Oe(P)&&P(A,R)}),Pe(E,"handleItemMouseEnter",function(R){E.setState(function(){return{isTooltipActive:!0,activeItem:R,activePayload:R.tooltipPayload,activeCoordinate:R.tooltipPosition||{x:R.cx,y:R.cy}}})}),Pe(E,"handleItemMouseLeave",function(){E.setState(function(){return{isTooltipActive:!1}})}),Pe(E,"handleMouseMove",function(R){R.persist(),E.throttleTriggeredAfterMouseMove(R)}),Pe(E,"handleMouseLeave",function(R){E.throttleTriggeredAfterMouseMove.cancel();var b={isTooltipActive:!1};E.setState(b),E.triggerSyncEvent(b);var A=E.props.onMouseLeave;Oe(A)&&A(b,R)}),Pe(E,"handleOuterEvent",function(R){var b=uhe(R),A=yi(E.props,"".concat(b));if(b&&Oe(A)){var P,F;/.*touch.*/i.test(b)?F=E.getMouseInfo(R.changedTouches[0]):F=E.getMouseInfo(R),A((P=F)!==null&&P!==void 0?P:{},R)}}),Pe(E,"handleClick",function(R){var b=E.getMouseInfo(R);if(b){var A=X(X({},b),{},{isTooltipActive:!0});E.setState(A),E.triggerSyncEvent(A);var P=E.props.onClick;Oe(P)&&P(A,R)}}),Pe(E,"handleMouseDown",function(R){var b=E.props.onMouseDown;if(Oe(b)){var A=E.getMouseInfo(R);b(A,R)}}),Pe(E,"handleMouseUp",function(R){var b=E.props.onMouseUp;if(Oe(b)){var A=E.getMouseInfo(R);b(A,R)}}),Pe(E,"handleTouchMove",function(R){R.changedTouches!=null&&R.changedTouches.length>0&&E.throttleTriggeredAfterMouseMove(R.changedTouches[0])}),Pe(E,"handleTouchStart",function(R){R.changedTouches!=null&&R.changedTouches.length>0&&E.handleMouseDown(R.changedTouches[0])}),Pe(E,"handleTouchEnd",function(R){R.changedTouches!=null&&R.changedTouches.length>0&&E.handleMouseUp(R.changedTouches[0])}),Pe(E,"handleDoubleClick",function(R){var b=E.props.onDoubleClick;if(Oe(b)){var A=E.getMouseInfo(R);b(A,R)}}),Pe(E,"handleContextMenu",function(R){var b=E.props.onContextMenu;if(Oe(b)){var A=E.getMouseInfo(R);b(A,R)}}),Pe(E,"triggerSyncEvent",function(R){E.props.syncId!==void 0&&O0.emit(M0,E.props.syncId,R,E.eventEmitterSymbol)}),Pe(E,"applySyncEvent",function(R){var b=E.props,A=b.layout,P=b.syncMethod,F=E.state.updateId,k=R.dataStartIndex,L=R.dataEndIndex;if(R.dataStartIndex!==void 0||R.dataEndIndex!==void 0)E.setState(X({dataStartIndex:k,dataEndIndex:L},f({props:E.props,dataStartIndex:k,dataEndIndex:L,updateId:F},E.state)));else if(R.activeTooltipIndex!==void 0){var N=R.chartX,W=R.chartY,j=R.activeTooltipIndex,z=E.state,q=z.offset,B=z.tooltipTicks;if(!q)return;if(typeof P=="function")j=P(B,R);else if(P==="value"){j=-1;for(var U=0;U<B.length;U++)if(B[U].value===R.activeLabel){j=U;break}}var K=X(X({},q),{},{x:q.left,y:q.top}),ie=Math.min(N,K.x+K.width),Q=Math.min(W,K.y+K.height),se=B[j]&&B[j].value,Me=gx(E.state,E.props.data,j),Ee=B[j]?{x:A==="horizontal"?B[j].coordinate:ie,y:A==="horizontal"?Q:B[j].coordinate}:F6;E.setState(X(X({},R),{},{activeLabel:se,activeCoordinate:Ee,activePayload:Me,activeTooltipIndex:j}))}else E.setState(R)}),Pe(E,"renderCursor",function(R){var b,A=E.state,P=A.isTooltipActive,F=A.activeCoordinate,k=A.activePayload,L=A.offset,N=A.activeTooltipIndex,W=A.tooltipAxisBandSize,j=E.getTooltipEventType(),z=(b=R.props.active)!==null&&b!==void 0?b:P,q=E.props.layout,B=R.key||"_recharts-cursor";return G.createElement(RNe,{key:B,activeCoordinate:F,activePayload:k,activeTooltipIndex:N,chartName:n,element:R,isActive:z,layout:q,offset:L,tooltipAxisBandSize:W,tooltipEventType:j})}),Pe(E,"renderPolarAxis",function(R,b,A){var P=yi(R,"type.axisType"),F=yi(E.state,"".concat(P,"Map")),k=R.type.defaultProps,L=k!==void 0?X(X({},k),R.props):R.props,N=F&&F[L["".concat(P,"Id")]];return I.cloneElement(R,X(X({},N),{},{className:$e(P,N.className),key:R.key||"".concat(b,"-").concat(A),ticks:vo(N,!0)}))}),Pe(E,"renderPolarGrid",function(R){var b=R.props,A=b.radialLines,P=b.polarAngles,F=b.polarRadius,k=E.state,L=k.radiusAxisMap,N=k.angleAxisMap,W=ga(L),j=ga(N),z=j.cx,q=j.cy,B=j.innerRadius,U=j.outerRadius;return I.cloneElement(R,{polarAngles:Array.isArray(P)?P:vo(j,!0).map(function(K){return K.coordinate}),polarRadius:Array.isArray(F)?F:vo(W,!0).map(function(K){return K.coordinate}),cx:z,cy:q,innerRadius:B,outerRadius:U,key:R.key||"polar-grid",radialLines:A})}),Pe(E,"renderLegend",function(){var R=E.state.formattedGraphicalItems,b=E.props,A=b.children,P=b.width,F=b.height,k=E.props.margin||{},L=P-(k.left||0)-(k.right||0),N=h5({children:A,formattedGraphicalItems:R,legendWidth:L,legendContent:u});if(!N)return null;var W=N.item,j=PH(N,_Ne);return I.cloneElement(W,X(X({},j),{},{chartWidth:P,chartHeight:F,margin:k,onBBoxUpdate:E.handleLegendBBoxUpdate}))}),Pe(E,"renderTooltip",function(){var R,b=E.props,A=b.children,P=b.accessibilityLayer,F=di(A,Ii);if(!F)return null;var k=E.state,L=k.isTooltipActive,N=k.activeCoordinate,W=k.activePayload,j=k.activeLabel,z=k.offset,q=(R=F.props.active)!==null&&R!==void 0?R:L;return I.cloneElement(F,{viewBox:X(X({},z),{},{x:z.left,y:z.top}),active:q,label:j,payload:q?W:[],coordinate:N,accessibilityLayer:P})}),Pe(E,"renderBrush",function(R){var b=E.props,A=b.margin,P=b.data,F=E.state,k=F.offset,L=F.dataStartIndex,N=F.dataEndIndex,W=F.updateId;return I.cloneElement(R,{key:R.key||"_recharts-brush",onChange:ry(E.handleBrushChange,R.props.onChange),data:P,x:le(R.props.x)?R.props.x:k.left,y:le(R.props.y)?R.props.y:k.top+k.height+k.brushBottom-(A.bottom||0),width:le(R.props.width)?R.props.width:k.width,startIndex:L,endIndex:N,updateId:"brush-".concat(W)})}),Pe(E,"renderReferenceElement",function(R,b,A){if(!R)return null;var P=E,F=P.clipPathId,k=E.state,L=k.xAxisMap,N=k.yAxisMap,W=k.offset,j=R.type.defaultProps||{},z=R.props,q=z.xAxisId,B=q===void 0?j.xAxisId:q,U=z.yAxisId,K=U===void 0?j.yAxisId:U;return I.cloneElement(R,{key:R.key||"".concat(b,"-").concat(A),xAxis:L[B],yAxis:N[K],viewBox:{x:W.left,y:W.top,width:W.width,height:W.height},clipPathId:F})}),Pe(E,"renderActivePoints",function(R){var b=R.item,A=R.activePoint,P=R.basePoint,F=R.childIndex,k=R.isRange,L=[],N=b.props.key,W=b.item.type.defaultProps!==void 0?X(X({},b.item.type.defaultProps),b.item.props):b.item.props,j=W.activeDot,z=W.dataKey,q=X(X({index:F,dataKey:z,cx:A.x,cy:A.y,r:4,fill:IO(b.item),strokeWidth:2,stroke:"#fff",payload:A.payload,value:A.value},_e(j,!1)),fw(j));return L.push(C.renderActiveDot(j,q,"".concat(N,"-activePoint-").concat(F))),P?L.push(C.renderActiveDot(j,X(X({},q),{},{cx:P.x,cy:P.y}),"".concat(N,"-basePoint-").concat(F))):k&&L.push(null),L}),Pe(E,"renderGraphicChild",function(R,b,A){var P=E.filterFormatItem(R,b,A);if(!P)return null;var F=E.getTooltipEventType(),k=E.state,L=k.isTooltipActive,N=k.tooltipAxis,W=k.activeTooltipIndex,j=k.activeLabel,z=E.props.children,q=di(z,Ii),B=P.props,U=B.points,K=B.isRange,ie=B.baseLine,Q=P.item.type.defaultProps!==void 0?X(X({},P.item.type.defaultProps),P.item.props):P.item.props,se=Q.activeDot,Me=Q.hide,Ee=Q.activeBar,qe=Q.activeShape,Ye=!!(!Me&&L&&q&&(se||Ee||qe)),bt={};F!=="axis"&&q&&q.props.trigger==="click"?bt={onClick:ry(E.handleItemMouseEnter,R.props.onClick)}:F!=="axis"&&(bt={onMouseLeave:ry(E.handleItemMouseLeave,R.props.onMouseLeave),onMouseEnter:ry(E.handleItemMouseEnter,R.props.onMouseEnter)});var de=I.cloneElement(R,X(X({},P.props),bt));function xe(fr){return typeof N.dataKey=="function"?N.dataKey(fr.payload):null}if(Ye)if(W>=0){var fe,Z;if(N.dataKey&&!N.allowDuplicatedCategory){var Fe=typeof N.dataKey=="function"?xe:"payload.".concat(N.dataKey.toString());fe=pw(U,Fe,j),Z=K&&ie&&pw(ie,Fe,j)}else fe=U==null?void 0:U[W],Z=K&&ie&&ie[W];if(qe||Ee){var pe=R.props.activeIndex!==void 0?R.props.activeIndex:W;return[I.cloneElement(R,X(X(X({},P.props),bt),{},{activeIndex:pe})),null,null]}if(!Le(fe))return[de].concat(lh(E.renderActivePoints({item:P,activePoint:fe,basePoint:Z,childIndex:W,isRange:K})))}else{var ke,Ze=(ke=E.getItemByXY(E.state.activeCoordinate))!==null&&ke!==void 0?ke:{graphicalItem:de},yt=Ze.graphicalItem,_n=yt.item,ei=_n===void 0?R:_n,Nr=yt.childIndex,kn=X(X(X({},P.props),bt),{},{activeIndex:Nr});return[I.cloneElement(ei,kn),null,null]}return K?[de,null,null]:[de,null]}),Pe(E,"renderCustomized",function(R,b,A){return I.cloneElement(R,X(X({key:"recharts-customized-".concat(A)},E.props),E.state))}),Pe(E,"renderMap",{CartesianGrid:{handler:ly,once:!0},ReferenceArea:{handler:E.renderReferenceElement},ReferenceLine:{handler:ly},ReferenceDot:{handler:E.renderReferenceElement},XAxis:{handler:ly},YAxis:{handler:ly},Brush:{handler:E.renderBrush,once:!0},Bar:{handler:E.renderGraphicChild},Line:{handler:E.renderGraphicChild},Area:{handler:E.renderGraphicChild},Radar:{handler:E.renderGraphicChild},RadialBar:{handler:E.renderGraphicChild},Scatter:{handler:E.renderGraphicChild},Pie:{handler:E.renderGraphicChild},Funnel:{handler:E.renderGraphicChild},Tooltip:{handler:E.renderCursor,once:!0},PolarGrid:{handler:E.renderPolarGrid,once:!0},PolarAngleAxis:{handler:E.renderPolarAxis},PolarRadiusAxis:{handler:E.renderPolarAxis},Customized:{handler:E.renderCustomized}}),E.clipPathId="".concat((S=y.id)!==null&&S!==void 0?S:Uh("recharts"),"-clip"),E.throttleTriggeredAfterMouseMove=hK(E.triggeredAfterMouseMove,(_=y.throttleDelay)!==null&&_!==void 0?_:1e3/60),E.state={},E}return GNe(C,v),FNe(C,[{key:"componentDidMount",value:function(){var S,_;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var S=this.props,_=S.children,E=S.data,R=S.height,b=S.layout,A=di(_,Ii);if(A){var P=A.props.defaultIndex;if(!(typeof P!="number"||P<0||P>this.state.tooltipTicks.length-1)){var F=this.state.tooltipTicks[P]&&this.state.tooltipTicks[P].value,k=gx(this.state,E,P,F),L=this.state.tooltipTicks[P].coordinate,N=(this.state.offset.top+R)/2,W=b==="horizontal",j=W?{x:L,y:N}:{y:L,x:N},z=this.state.formattedGraphicalItems.find(function(B){var U=B.item;return U.type.name==="Scatter"});z&&(j=X(X({},j),z.props.points[P].tooltipPosition),k=z.props.points[P].tooltipPayload);var q={activeTooltipIndex:P,isTooltipActive:!0,activeLabel:F,activePayload:k,activeCoordinate:j};this.setState(q),this.renderCursor(A),this.accessibilityManager.setIndex(P)}}}},{key:"getSnapshotBeforeUpdate",value:function(S,_){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==_.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==S.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==S.margin){var E,R;this.accessibilityManager.setDetails({offset:{left:(E=this.props.margin.left)!==null&&E!==void 0?E:0,top:(R=this.props.margin.top)!==null&&R!==void 0?R:0}})}return null}},{key:"componentDidUpdate",value:function(S){j_([di(S.children,Ii)],[di(this.props.children,Ii)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var S=di(this.props.children,Ii);if(S&&typeof S.props.shared=="boolean"){var _=S.props.shared?"axis":"item";return a.indexOf(_)>=0?_:s}return s}},{key:"getMouseInfo",value:function(S){if(!this.container)return null;var _=this.container,E=_.getBoundingClientRect(),R=LEe(E),b={chartX:Math.round(S.pageX-R.left),chartY:Math.round(S.pageY-R.top)},A=E.width/_.offsetWidth||1,P=this.inRange(b.chartX,b.chartY,A);if(!P)return null;var F=this.state,k=F.xAxisMap,L=F.yAxisMap,N=this.getTooltipEventType(),W=DH(this.state,this.props.data,this.props.layout,P);if(N!=="axis"&&k&&L){var j=ga(k).scale,z=ga(L).scale,q=j&&j.invert?j.invert(b.chartX):null,B=z&&z.invert?z.invert(b.chartY):null;return X(X({},b),{},{xValue:q,yValue:B},W)}return W?X(X({},b),W):null}},{key:"inRange",value:function(S,_){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,R=this.props.layout,b=S/E,A=_/E;if(R==="horizontal"||R==="vertical"){var P=this.state.offset,F=b>=P.left&&b<=P.left+P.width&&A>=P.top&&A<=P.top+P.height;return F?{x:b,y:A}:null}var k=this.state,L=k.angleAxisMap,N=k.radiusAxisMap;if(L&&N){var W=ga(L);return sV({x:b,y:A},W)}return null}},{key:"parseEventsOfWrapper",value:function(){var S=this.props.children,_=this.getTooltipEventType(),E=di(S,Ii),R={};E&&_==="axis"&&(E.props.trigger==="click"?R={onClick:this.handleClick}:R={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var b=fw(this.props,this.handleOuterEvent);return X(X({},b),R)}},{key:"addListener",value:function(){O0.on(M0,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){O0.removeListener(M0,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(S,_,E){for(var R=this.state.formattedGraphicalItems,b=0,A=R.length;b<A;b++){var P=R[b];if(P.item===S||P.props.key===S.key||_===wo(P.item.type)&&E===P.childIndex)return P}return null}},{key:"renderClipPath",value:function(){var S=this.clipPathId,_=this.state.offset,E=_.left,R=_.top,b=_.height,A=_.width;return G.createElement("defs",null,G.createElement("clipPath",{id:S},G.createElement("rect",{x:E,y:R,height:b,width:A})))}},{key:"getXScales",value:function(){var S=this.state.xAxisMap;return S?Object.entries(S).reduce(function(_,E){var R=xH(E,2),b=R[0],A=R[1];return X(X({},_),{},Pe({},b,A.scale))},{}):null}},{key:"getYScales",value:function(){var S=this.state.yAxisMap;return S?Object.entries(S).reduce(function(_,E){var R=xH(E,2),b=R[0],A=R[1];return X(X({},_),{},Pe({},b,A.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(S){var _;return(_=this.state.xAxisMap)===null||_===void 0||(_=_[S])===null||_===void 0?void 0:_.scale}},{key:"getYScaleByAxisId",value:function(S){var _;return(_=this.state.yAxisMap)===null||_===void 0||(_=_[S])===null||_===void 0?void 0:_.scale}},{key:"getItemByXY",value:function(S){var _=this.state,E=_.formattedGraphicalItems,R=_.activeItem;if(E&&E.length)for(var b=0,A=E.length;b<A;b++){var P=E[b],F=P.props,k=P.item,L=k.type.defaultProps!==void 0?X(X({},k.type.defaultProps),k.props):k.props,N=wo(k.type);if(N==="Bar"){var W=(F.data||[]).find(function(B){return EPe(S,B)});if(W)return{graphicalItem:P,payload:W}}else if(N==="RadialBar"){var j=(F.data||[]).find(function(B){return sV(S,B)});if(j)return{graphicalItem:P,payload:j}}else if(bb(P,R)||Tb(P,R)||rm(P,R)){var z=cDe({graphicalItem:P,activeTooltipItem:R,itemData:L.data}),q=L.activeIndex===void 0?z:L.activeIndex;return{graphicalItem:X(X({},P),{},{childIndex:q}),payload:rm(P,R)?L.data[z]:P.props.data[z]}}}return null}},{key:"render",value:function(){var S=this;if(!Yk(this))return null;var _=this.props,E=_.children,R=_.className,b=_.width,A=_.height,P=_.style,F=_.compact,k=_.title,L=_.desc,N=PH(_,ANe),W=_e(N,!1);if(F)return G.createElement(cH,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},G.createElement(z_,Bc({},W,{width:b,height:A,title:k,desc:L}),this.renderClipPath(),Xk(E,this.renderMap)));if(this.props.accessibilityLayer){var j,z;W.tabIndex=(j=this.props.tabIndex)!==null&&j!==void 0?j:0,W.role=(z=this.props.role)!==null&&z!==void 0?z:"application",W.onKeyDown=function(B){S.accessibilityManager.keyboardEvent(B)},W.onFocus=function(){S.accessibilityManager.focus()}}var q=this.parseEventsOfWrapper();return G.createElement(cH,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},G.createElement("div",Bc({className:$e("recharts-wrapper",R),style:X({position:"relative",cursor:"default",width:b,height:A},P)},q,{ref:function(U){S.container=U}}),G.createElement(z_,Bc({},W,{width:b,height:A,title:k,desc:L,style:jNe}),this.renderClipPath(),Xk(E,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(I.Component);Pe(g,"displayName",n),Pe(g,"defaultProps",X({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),Pe(g,"getDerivedStateFromProps",function(v,C){var y=v.dataKey,S=v.data,_=v.children,E=v.width,R=v.height,b=v.layout,A=v.stackOffset,P=v.margin,F=C.dataStartIndex,k=C.dataEndIndex;if(C.updateId===void 0){var L=OH(v);return X(X(X({},L),{},{updateId:0},f(X(X({props:v},L),{},{updateId:0}),C)),{},{prevDataKey:y,prevData:S,prevWidth:E,prevHeight:R,prevLayout:b,prevStackOffset:A,prevMargin:P,prevChildren:_})}if(y!==C.prevDataKey||S!==C.prevData||E!==C.prevWidth||R!==C.prevHeight||b!==C.prevLayout||A!==C.prevStackOffset||!rd(P,C.prevMargin)){var N=OH(v),W={chartX:C.chartX,chartY:C.chartY,isTooltipActive:C.isTooltipActive},j=X(X({},DH(C,S,b)),{},{updateId:C.updateId+1}),z=X(X(X({},N),W),j);return X(X(X({},z),f(X({props:v},z),C)),{},{prevDataKey:y,prevData:S,prevWidth:E,prevHeight:R,prevLayout:b,prevStackOffset:A,prevMargin:P,prevChildren:_})}if(!j_(_,C.prevChildren)){var q,B,U,K,ie=di(_,Jd),Q=ie&&(q=(B=ie.props)===null||B===void 0?void 0:B.startIndex)!==null&&q!==void 0?q:F,se=ie&&(U=(K=ie.props)===null||K===void 0?void 0:K.endIndex)!==null&&U!==void 0?U:k,Me=Q!==F||se!==k,Ee=!Le(S),qe=Ee&&!Me?C.updateId:C.updateId+1;return X(X({updateId:qe},f(X(X({props:v},C),{},{updateId:qe,dataStartIndex:Q,dataEndIndex:se}),C)),{},{prevChildren:_,dataStartIndex:Q,dataEndIndex:se})}return null}),Pe(g,"renderActiveDot",function(v,C,y){var S;return I.isValidElement(v)?S=I.cloneElement(v,C):Oe(v)?S=v(C):S=G.createElement(yb,C),G.createElement(at,{className:"recharts-active-dot",key:y},S)});var m=I.forwardRef(function(C,y){return G.createElement(g,Bc({},C,{ref:y}))});return m.displayName=g.displayName,m},k6=L6({chartName:"LineChart",GraphicalChild:Zh,axisComponents:[{axisType:"xAxis",AxisComp:nv},{axisType:"yAxis",AxisComp:rv}],formatAxisMap:$Oe}),eLe=L6({chartName:"PieChart",GraphicalChild:qo,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Eb},{axisType:"radiusAxis",AxisComp:wb}],formatAxisMap:O_e,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});function tLe({jumps:t}){const e=[...t].slice(0,30).reverse().map((r,i)=>({index:i+1,score:r.efficiencyScore,label:r.timestamp?new Date(r.timestamp).toLocaleDateString("en-GB",{day:"2-digit",month:"short"}):`#${i+1}`})),n=({active:r,payload:i,label:s})=>{var o,a,l;return!r||!(i!=null&&i.length)?null:M.jsxs("div",{className:"bg-pitch-900 border border-grass-500/20 rounded-lg px-3 py-2 shadow-panel text-xs font-mono",children:[M.jsx("div",{className:"text-grass-400/50 mb-1",children:(a=(o=i[0])==null?void 0:o.payload)==null?void 0:a.label}),M.jsx("div",{className:"text-grass-400 font-bold text-base",children:(l=i[0])==null?void 0:l.value}),M.jsx("div",{className:"text-grass-400/40",children:"Efficiency Score"})]})};return M.jsxs("div",{className:"panel p-5 animate-slide-up",children:[M.jsxs("h3",{className:"font-display font-bold uppercase tracking-widest text-sm text-grass-400 mb-4",children:["Score Trend  Last ",Math.min(t.length,30)," Events"]}),e.length<2?M.jsx("div",{className:"flex items-center justify-center h-40 text-grass-400/30 text-sm",children:"Not enough data"}):M.jsx(sO,{width:"100%",height:220,children:M.jsxs(k6,{data:e,margin:{top:5,right:10,left:-20,bottom:5},children:[M.jsx(HO,{strokeDasharray:"3 3"}),M.jsx(nv,{dataKey:"label",tick:{fontSize:10},interval:"preserveStartEnd"}),M.jsx(rv,{domain:[0,100],tick:{fontSize:10}}),M.jsx(Lu,{y:80,stroke:"rgba(34,197,94,0.3)",strokeDasharray:"4 4",label:{value:"Elite",fill:"#4ade80",fontSize:10}}),M.jsx(Lu,{y:60,stroke:"rgba(245,158,11,0.3)",strokeDasharray:"4 4",label:{value:"Good",fill:"#fbbf24",fontSize:10}}),M.jsx(Ii,{content:M.jsx(n,{})}),M.jsx(Zh,{type:"monotone",dataKey:"score",stroke:"#22c55e",strokeWidth:2,dot:{fill:"#22c55e",r:3,strokeWidth:0},activeDot:{r:5,fill:"#4ade80"}})]})})]})}function nLe({jumps:t}){const e=t.filter(a=>a.riskLevel==="HIGH").length,n=t.filter(a=>a.riskLevel==="LOW").length,r=e+n,i=[{name:"Low Risk",value:n,pct:r?Math.round(n/r*100):0},{name:"High Risk",value:e,pct:r?Math.round(e/r*100):0}],s=["#22c55e","#ef4444"],o=({active:a,payload:l})=>!a||!(l!=null&&l.length)?null:M.jsxs("div",{className:"bg-pitch-900 border border-grass-500/20 rounded-lg px-3 py-2 shadow-panel text-xs font-mono",children:[M.jsx("div",{className:"font-bold",style:{color:l[0].payload.fill},children:l[0].name}),M.jsxs("div",{className:"text-white",children:[l[0].value," events (",l[0].payload.pct,"%)"]})]});return M.jsxs("div",{className:"panel p-5 animate-slide-up",children:[M.jsx("h3",{className:"font-display font-bold uppercase tracking-widest text-sm text-grass-400 mb-4",children:"Risk Distribution"}),r===0?M.jsx("div",{className:"flex items-center justify-center h-40 text-grass-400/30 text-sm",children:"No data"}):M.jsx(sO,{width:"100%",height:220,children:M.jsxs(eLe,{children:[M.jsx(qo,{data:i,cx:"50%",cy:"50%",innerRadius:55,outerRadius:80,paddingAngle:3,dataKey:"value",children:i.map((a,l)=>M.jsx(ob,{fill:s[l],opacity:.85},l))}),M.jsx(Ii,{content:M.jsx(o,{})}),M.jsx(au,{formatter:(a,l)=>M.jsxs("span",{style:{color:l.color,fontSize:12,fontFamily:"DM Sans"},children:[a," (",l.payload.pct,"%)"]})})]})})]})}function rLe({jumps:t}){const e=[...t].slice(0,30).reverse().map((n,r)=>({index:r+1,angle:n.valgusAngle,label:n.timestamp?new Date(n.timestamp).toLocaleDateString("en-GB",{day:"2-digit",month:"short"}):`#${r+1}`}));return M.jsxs("div",{className:"panel p-5 animate-slide-up",children:[M.jsx("h3",{className:"font-display font-bold uppercase tracking-widest text-sm text-grass-400 mb-4",children:"Valgus Angle Trend"}),e.length<2?M.jsx("div",{className:"flex items-center justify-center h-40 text-grass-400/30 text-sm",children:"Not enough data"}):M.jsx(sO,{width:"100%",height:220,children:M.jsxs(k6,{data:e,margin:{top:5,right:10,left:-20,bottom:5},children:[M.jsx(HO,{strokeDasharray:"3 3"}),M.jsx(nv,{dataKey:"label",tick:{fontSize:10},interval:"preserveStartEnd"}),M.jsx(rv,{tick:{fontSize:10}}),M.jsx(Lu,{y:10,stroke:"rgba(34,197,94,0.3)",strokeDasharray:"4 4"}),M.jsx(Lu,{y:15,stroke:"rgba(245,158,11,0.3)",strokeDasharray:"4 4"}),M.jsx(Ii,{contentStyle:{background:"#061a10",border:"1px solid rgba(34,197,94,0.2)",borderRadius:8,fontSize:12},formatter:n=>[`${n==null?void 0:n.toFixed(1)}`,"Valgus"]}),M.jsx(Zh,{type:"monotone",dataKey:"angle",stroke:"#fbbf24",strokeWidth:2,dot:{fill:"#fbbf24",r:3,strokeWidth:0},activeDot:{r:5,fill:"#f59e0b"}})]})})]})}const uy=15;function iLe(){var _;const{id:t}=gY(),e=gh(),{athlete:n}=$4(t),{jumps:r,loading:i,error:s}=cle(t,100),o=[...r].sort((E,R)=>new Date(R.timestamp)-new Date(E.timestamp)),[a,l]=I.useState(0);if(s)return M.jsx(Y4,{message:s});const u=o.length?Math.round(o.reduce((E,R)=>E+(R.efficiencyScore||0),0)/o.length):0,c=o.length?(o.reduce((E,R)=>E+(R.valgusAngle||0),0)/o.length).toFixed(1):0,d=o.length?(o.reduce((E,R)=>E+(R.peakVerticalG||0),0)/o.length).toFixed(2):0,h=o.length?(o.reduce((E,R)=>E+(R.peakLateralG||0),0)/o.length).toFixed(2):0,f=o.length?(o.reduce((E,R)=>E+(R.peakRotationalVel||0),0)/o.length).toFixed(2):0,g=o.filter(E=>E.riskLevel==="HIGH").length,m=z4(u),v=xg(parseFloat(c)),C=Math.ceil(o.length/uy),y=o.slice(a*uy,a*uy+uy),S=(n==null?void 0:n.name)||`Athlete ${t==null?void 0:t.slice(0,8)}`;return M.jsxs("div",{className:"space-y-5 animate-fade-in",children:[M.jsxs("div",{className:"panel p-6 flex flex-col sm:flex-row gap-6",children:[M.jsx("div",{className:"w-16 h-16 rounded-2xl bg-pitch-700 border border-grass-500/20 flex items-center justify-center flex-shrink-0",children:M.jsx("span",{className:"font-display font-bold text-3xl text-grass-400",children:S.charAt(0).toUpperCase()})}),M.jsxs("div",{className:"flex-1",children:[M.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-2",children:[M.jsx("h1",{className:"font-display font-bold text-3xl tracking-wide text-white uppercase",children:S}),M.jsx("span",{className:`badge ${m.bg}`,children:m.label})]}),M.jsxs("div",{className:"flex flex-wrap gap-x-5 gap-y-1 text-sm text-grass-400/60 mb-4",children:[(n==null?void 0:n.position)&&M.jsxs("span",{children:[" ",n.position]}),(n==null?void 0:n.club)&&M.jsxs("span",{children:[" ",n.club]}),(n==null?void 0:n.country)&&M.jsxs("span",{children:[" ",n.country]}),(n==null?void 0:n.age)&&M.jsxs("span",{children:[" Age ",n.age]}),M.jsxs("span",{children:[" ",o.length," events recorded"]}),((_=o[0])==null?void 0:_.timestamp)&&M.jsxs("span",{children:[" Last event ",j4(o[0].timestamp)]})]}),M.jsxs("div",{className:"flex items-center gap-3",children:[M.jsx("span",{className:`score-pill ${Lc(u)} text-base font-mono font-bold px-4 py-1.5 rounded-xl`,children:u}),M.jsxs("span",{className:"text-sm text-grass-400/50",children:["Avg Efficiency Score (computed from ",o.length," events)"]})]})]}),M.jsx("button",{onClick:()=>e(-1),className:"btn-ghost self-start",children:" Back"})]}),i?M.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-3",children:Array.from({length:5}).map((E,R)=>M.jsx(gle,{},R))}):M.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3",children:[{label:"Avg Score",value:u,unit:"",color:Lc(u).includes("high")?"text-grass-400":Lc(u).includes("mid")?"text-amber-400":"text-danger-400",icon:""},{label:"Avg Valgus",value:c,unit:"",color:v.color,icon:""},{label:"Avg Vertical G",value:d,unit:"G",color:"text-grass-400",icon:""},{label:"Avg Lateral G",value:h,unit:"G",color:"text-grass-400",icon:""},{label:"Avg Rot. Vel",value:f,unit:"rad/s",color:"text-grass-400",icon:""},{label:"High Risk",value:g,unit:" events",color:g>0?"text-danger-400":"text-grass-400",icon:""}].map(E=>M.jsxs("div",{className:"metric-card animate-slide-up",children:[M.jsx("span",{className:"text-lg",children:E.icon}),M.jsxs("div",{className:`font-display font-bold text-2xl ${E.color}`,children:[E.value,M.jsx("span",{className:"text-xs ml-0.5 opacity-60",children:E.unit})]}),M.jsx("div",{className:"text-xs text-white/60 font-semibold",children:E.label})]},E.label))}),M.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[M.jsx("div",{className:"lg:col-span-2",children:M.jsx(tLe,{jumps:o})}),M.jsx("div",{children:M.jsx(nLe,{jumps:o})})]}),M.jsx(rLe,{jumps:o}),M.jsxs("div",{className:"panel overflow-hidden animate-slide-up",children:[M.jsxs("div",{className:"px-5 py-3 border-b border-grass-500/10 flex items-center justify-between",children:[M.jsx("h3",{className:"font-display font-bold uppercase tracking-widest text-sm text-grass-400",children:"All Events"}),M.jsxs("span",{className:"text-xs font-mono text-grass-400/40",children:[o.length," total"]})]}),i?M.jsx(K4,{rows:5}):o.length===0?M.jsx(q4,{title:"No events",message:"No jump events found for this athlete.",icon:""}):M.jsxs(M.Fragment,{children:[M.jsx("div",{className:"overflow-x-auto",children:M.jsxs("table",{className:"w-full text-sm",children:[M.jsx("thead",{children:M.jsx("tr",{className:"border-b border-grass-500/10 bg-pitch-900/50",children:["Timestamp","Type","Valgus ","Vertical G","Lateral G","Rot. Vel","Risk","Score","Tip"].map(E=>M.jsx("th",{className:"text-left px-4 py-2.5 text-[11px] font-display font-semibold uppercase tracking-widest text-grass-400/60 whitespace-nowrap",children:E},E))})}),M.jsx("tbody",{children:y.map(E=>{var A,P,F,k;const R=xg(E.valgusAngle),b=MD(E.riskLevel);return M.jsxs("tr",{className:"border-b border-grass-500/05 hover:bg-grass-500/5 transition-colors",children:[M.jsx("td",{className:"px-4 py-3 font-mono text-xs text-grass-400/60 whitespace-nowrap",children:U4(E.timestamp)}),M.jsx("td",{className:"px-4 py-3",children:M.jsx("span",{className:"badge bg-pitch-700 text-grass-400/80 border border-grass-500/15 uppercase text-[10px]",children:E.movementType})}),M.jsx("td",{className:"px-4 py-3",children:M.jsxs("span",{className:`font-mono font-semibold ${R.color}`,children:[(A=E.valgusAngle)==null?void 0:A.toFixed(1),""]})}),M.jsx("td",{className:"px-4 py-3 font-mono text-sm text-white/70",children:(P=E.peakVerticalG)==null?void 0:P.toFixed(2)}),M.jsx("td",{className:"px-4 py-3 font-mono text-sm text-white/70",children:(F=E.peakLateralG)==null?void 0:F.toFixed(2)}),M.jsx("td",{className:"px-4 py-3 font-mono text-sm text-white/70",children:(k=E.peakRotationalVel)==null?void 0:k.toFixed(2)}),M.jsx("td",{className:"px-4 py-3",children:M.jsx("span",{className:`badge ${b.bg} ${b.color} uppercase text-[10px]`,children:E.riskLevel})}),M.jsx("td",{className:"px-4 py-3",children:M.jsx("span",{className:`score-pill ${Lc(E.efficiencyScore)} text-xs`,children:E.efficiencyScore})}),M.jsx("td",{className:"px-4 py-3 text-xs text-grass-400/50 max-w-[200px] truncate",title:E.tip,children:E.tip||""})]},E.id)})})]})}),C>1&&M.jsxs("div",{className:"px-5 py-3 border-t border-grass-500/10 flex items-center justify-between",children:[M.jsx("button",{disabled:a===0,onClick:()=>l(E=>E-1),className:"btn-ghost disabled:opacity-30",children:" Prev"}),M.jsxs("span",{className:"text-xs font-mono text-grass-400/40",children:["Page ",a+1," / ",C]}),M.jsx("button",{disabled:a>=C-1,onClick:()=>l(E=>E+1),className:"btn-ghost disabled:opacity-30",children:"Next "})]})]})]})]})}const N0="demo-user-001";function sLe(){const{athlete:t,loading:e}=$4(N0),{jump:n,loading:r}=dle(N0);return M.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 animate-fade-in",children:[M.jsxs("div",{className:"text-center pt-4",children:[M.jsxs("div",{className:"inline-flex items-center gap-2 bg-danger-500/10 border border-danger-500/20 rounded-full px-4 py-1.5 mb-4",children:[M.jsx("span",{className:"w-2 h-2 rounded-full bg-danger-400 animate-pulse"}),M.jsx("span",{className:"text-xs font-mono font-semibold text-danger-400 uppercase tracking-widest",children:"Live Session"})]}),M.jsx("h1",{className:"font-display font-bold text-5xl uppercase tracking-wider text-white",children:"Live Demo"}),M.jsx("p",{className:"text-grass-400/50 mt-2 text-sm",children:"Real-time data stream  Updates automatically"})]}),e?M.jsx(uLe,{}):t?M.jsxs(M.Fragment,{children:[M.jsx(oLe,{athlete:t}),M.jsxs("div",{className:"panel p-6",children:[M.jsxs("div",{className:"flex items-center justify-between mb-5",children:[M.jsx("h2",{className:"font-display font-bold uppercase tracking-widest text-lg text-grass-400",children:"Latest Event"}),!r&&n&&M.jsx("span",{className:"text-xs font-mono text-grass-400/40",children:j4(n.timestamp)})]}),r?M.jsx("div",{className:"h-24 bg-pitch-800/50 rounded-lg animate-pulse"}):n?M.jsx(aLe,{jump:n}):M.jsx("div",{className:"text-center py-8 text-grass-400/30 text-sm",children:"No events recorded yet"})]}),M.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[M.jsx(cy,{label:"Total Events",value:t.totalJumps,unit:""}),M.jsx(cy,{label:"Avg Valgus",value:t.avgValgusAngle,unit:"",isValgus:!0}),M.jsx(cy,{label:"Peak Vertical",value:t.avgPeakVerticalG,unit:"G"}),M.jsx(cy,{label:"Rotational Vel",value:t.avgRotationalVel,unit:"rad/s"})]})]}):M.jsx(lLe,{id:N0})]})}function oLe({athlete:t}){var r;const e=hle(t),n=z4(e);return M.jsxs("div",{className:"panel p-8 text-center relative overflow-hidden",children:[M.jsx("div",{className:"absolute right-6 top-1/2 -translate-y-1/2 font-display font-black text-[120px] text-grass-500/05 leading-none select-none pointer-events-none",children:e}),M.jsxs("div",{className:"relative z-10",children:[M.jsx("div",{className:"w-16 h-16 rounded-2xl bg-pitch-700 border border-grass-500/20 flex items-center justify-center mx-auto mb-4",children:M.jsx("span",{className:"font-display font-bold text-3xl text-grass-400",children:(r=t.name)==null?void 0:r.charAt(0)})}),M.jsx("h2",{className:"font-display font-bold text-4xl uppercase tracking-wider text-white mb-1",children:t.name}),M.jsxs("div",{className:"flex items-center justify-center gap-4 text-sm text-grass-400/60 mb-6",children:[M.jsx("span",{children:t.position}),M.jsx("span",{children:""}),M.jsx("span",{children:t.club}),M.jsx("span",{children:""}),M.jsx("span",{children:t.country})]}),M.jsxs("div",{className:"flex items-center justify-center gap-4",children:[M.jsx("div",{className:`text-7xl font-display font-black ${e>=80?"text-grass-400":e>=60?"text-amber-400":"text-danger-400"}`,children:e}),M.jsxs("div",{className:"text-left",children:[M.jsx("div",{className:`badge ${n.bg} mb-1`,children:n.label}),M.jsxs("div",{className:"text-xs text-grass-400/40",children:["Biomechanical",M.jsx("br",{}),"Efficiency Score"]})]})]})]})]})}function aLe({jump:t}){var r;const e=xg(t.valgusAngle),n=MD(t.riskLevel);return M.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[M.jsxs("div",{className:"bg-pitch-800/50 rounded-xl p-4 border border-grass-500/10",children:[M.jsx("div",{className:"text-[11px] uppercase tracking-widest text-grass-400/40 font-display mb-2",children:"Movement"}),M.jsx("div",{className:"font-mono font-bold text-white",children:t.movementType})]}),M.jsxs("div",{className:"bg-pitch-800/50 rounded-xl p-4 border border-grass-500/10",children:[M.jsx("div",{className:"text-[11px] uppercase tracking-widest text-grass-400/40 font-display mb-2",children:"Valgus Angle"}),M.jsxs("div",{className:`font-mono font-bold text-2xl ${e.color}`,children:[(r=t.valgusAngle)==null?void 0:r.toFixed(1),""]})]}),M.jsxs("div",{className:"bg-pitch-800/50 rounded-xl p-4 border border-grass-500/10",children:[M.jsx("div",{className:"text-[11px] uppercase tracking-widest text-grass-400/40 font-display mb-2",children:"Risk Level"}),M.jsx("span",{className:`badge ${n.bg} ${n.color} uppercase`,children:t.riskLevel})]}),M.jsxs("div",{className:"bg-pitch-800/50 rounded-xl p-4 border border-grass-500/10",children:[M.jsx("div",{className:"text-[11px] uppercase tracking-widest text-grass-400/40 font-display mb-2",children:"Score"}),M.jsx("div",{className:`font-mono font-bold text-2xl ${Lc(t.efficiencyScore).includes("high")?"text-grass-400":"text-amber-400"}`,children:t.efficiencyScore})]}),t.tip&&M.jsxs("div",{className:"col-span-full bg-grass-500/08 border border-grass-500/15 rounded-xl p-4",children:[M.jsx("div",{className:"text-[11px] uppercase tracking-widest text-grass-400/40 font-display mb-1",children:"AI Feedback"}),M.jsxs("div",{className:"text-sm text-grass-300 italic",children:['"',t.tip,'"']})]})]})}function cy({label:t,value:e,unit:n,isValgus:r}){const i=r?xg(e):null;return M.jsxs("div",{className:"panel p-4 text-center",children:[M.jsx("div",{className:"text-[10px] uppercase tracking-widest text-grass-400/40 font-display mb-2",children:t}),M.jsxs("div",{className:`font-display font-bold text-3xl ${i?i.color:"text-grass-400"}`,children:[typeof e=="number"?e.toFixed(n===""?0:1):"",M.jsx("span",{className:"text-sm ml-1 opacity-60",children:n})]})]})}function lLe({id:t}){return M.jsxs("div",{className:"panel p-10 text-center",children:[M.jsx("div",{className:"text-5xl mb-4",children:""}),M.jsx("h3",{className:"font-display font-bold text-2xl uppercase text-grass-400/60 mb-2",children:"Demo Athlete Not Found"}),M.jsxs("p",{className:"text-sm text-grass-400/40 max-w-md mx-auto mb-4",children:["No athlete document found with ID ",M.jsx("code",{className:"font-mono bg-pitch-800 px-2 py-0.5 rounded text-grass-400",children:t})," in Firestore."]}),M.jsxs("p",{className:"text-xs text-grass-400/30",children:["Open ",M.jsx("code",{className:"font-mono bg-pitch-800 px-1 rounded",children:"src/pages/LiveDemo.jsx"})," and change ",M.jsx("code",{className:"font-mono",children:"DEMO_ATHLETE_ID"})," to a valid athlete document ID."]})]})}function uLe(){return M.jsxs("div",{className:"space-y-4 animate-pulse",children:[M.jsx("div",{className:"panel p-8 h-64 bg-pitch-800/30"}),M.jsx("div",{className:"panel p-6 h-40 bg-pitch-800/30"}),M.jsx("div",{className:"grid grid-cols-4 gap-3",children:Array.from({length:4}).map((t,e)=>M.jsx("div",{className:"panel p-4 h-20 bg-pitch-800/30"},e))})]})}function cLe({children:t}){const{user:e,loading:n}=aI();return n?M.jsx("div",{className:"min-h-screen pitch-bg flex items-center justify-center",children:M.jsxs("div",{className:"flex flex-col items-center gap-4",children:[M.jsx("div",{className:"w-10 h-10 border-2 border-grass-500/30 border-t-grass-500 rounded-full animate-spin"}),M.jsx("p",{className:"font-mono text-xs text-grass-500/50",children:"Authenticating"})]})}):e?t:M.jsx(t$,{to:"/login",replace:!0})}function dLe(){return M.jsx(VY,{children:M.jsxs(OY,{children:[M.jsx(na,{path:"/",element:M.jsx(Ate,{})}),M.jsx(na,{path:"/login",element:M.jsx(xte,{})}),M.jsxs(na,{path:"/dashboard",element:M.jsx(cLe,{children:M.jsx(_te,{})}),children:[M.jsx(na,{index:!0,element:M.jsx(yle,{})}),M.jsx(na,{path:"athlete/:id",element:M.jsx(iLe,{})}),M.jsx(na,{path:"live",element:M.jsx(sLe,{})})]}),M.jsx(na,{path:"*",element:M.jsx(t$,{to:"/",replace:!0})})]})})}L0.createRoot(document.getElementById("root")).render(M.jsx(G.StrictMode,{children:M.jsx(dLe,{})}));
